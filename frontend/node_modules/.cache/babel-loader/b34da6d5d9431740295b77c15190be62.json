{"remainingRequest":"C:\\Users\\18083\\Desktop\\offic_ai\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18083\\Desktop\\offic_ai\\office\\smart-office\\frontend\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\18083\\Desktop\\offic_ai\\office\\smart-office\\frontend\\src\\utils\\request.js","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\offic_ai\\office\\smart-office\\frontend\\src\\utils\\request.js","mtime":1746796479226},{"path":"C:\\Users\\18083\\Desktop\\offic_ai\\office\\smart-office\\frontend\\babel.config.js","mtime":1746431728272},{"path":"C:\\Users\\18083\\Desktop\\offic_ai\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218359},{"path":"C:\\Users\\18083\\Desktop\\offic_ai\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202324},{"path":"C:\\Users\\18083\\Desktop\\offic_ai\\office\\smart-office\\frontend\\node_modules\\eslint-loader\\index.js","mtime":1746431218362}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgRWxNZXNzYWdlIH0gZnJvbSAnZWxlbWVudC1wbHVzJzsKCi8vIOWIm+W7umF4aW9z5a6e5L6LCmNvbnN0IHNlcnZpY2UgPSBheGlvcy5jcmVhdGUoewogIGJhc2VVUkw6IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUEkgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMCcsCiAgdGltZW91dDogMTUwMDAsCiAgaGVhZGVyczogewogICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogIH0KfSk7CgovLyDor7fmsYLmi6bmiKrlmaggLSDmt7vliqDorqTor4F0b2tlbgpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShjb25maWcgPT4gewogIGNvbnNvbGUubG9nKCflj5HpgIHor7fmsYLoh7M6JywgY29uZmlnLnVybCk7CiAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTsKICBpZiAodG9rZW4pIHsKICAgIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSBgQmVhcmVyICR7dG9rZW59YDsKICAgIGNvbnNvbGUubG9nKCflt7Lmt7vliqDorqTor4F0b2tlbicpOwogIH0gZWxzZSB7CiAgICBjb25zb2xlLmxvZygn5pyq5om+5Yiw6K6k6K+BdG9rZW4nKTsKICB9CgogIC8vIOehruS/neivt+axguWktOiuvue9ruato+ehrgogIGlmIChjb25maWcubWV0aG9kID09PSAncG9zdCcgfHwgY29uZmlnLm1ldGhvZCA9PT0gJ3B1dCcpIHsKICAgIGlmICghY29uZmlnLmhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddICYmICEoY29uZmlnLmRhdGEgaW5zdGFuY2VvZiBGb3JtRGF0YSkpIHsKICAgICAgY29uZmlnLmhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nOwogICAgfQogIH0KICByZXR1cm4gY29uZmlnOwp9LCBlcnJvciA9PiB7CiAgY29uc29sZS5lcnJvcign6K+35rGC6ZSZ6K+vOicsIGVycm9yKTsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKCi8vIOWTjeW6lOaLpuaIquWZqCAtIOe7n+S4gOWkhOeQhuWTjeW6lOWSjOmUmeivrwpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UocmVzcG9uc2UgPT4gewogIGNvbnNvbGUubG9nKCfmlLbliLDlk43lupQ6JywgcmVzcG9uc2UuY29uZmlnLnVybCwgcmVzcG9uc2Uuc3RhdHVzKTsKICBjb25zdCByZXMgPSByZXNwb25zZS5kYXRhOwoKICAvLyDor6bnu4borrDlvZXlk43lupTmlbDmja7nsbvlnovlkoznu5PmnoQKICBpZiAocmVzKSB7CiAgICBjb25zdCB0eXBlID0gdHlwZW9mIHJlczsKICAgIGNvbnN0IGlzQXJyYXkgPSBBcnJheS5pc0FycmF5KHJlcyk7CiAgICBjb25zb2xlLmxvZygn5ZON5bqU5pWw5o2u57G75Z6LOicsIGlzQXJyYXkgPyAnQXJyYXknIDogdHlwZSwgaXNBcnJheSA/IGAo6ZW/5bqmOiR7cmVzLmxlbmd0aH0pYCA6IHR5cGUgPT09ICdvYmplY3QnID8gYCjplK46JHtPYmplY3Qua2V5cyhyZXMpLmpvaW4oJywnKX0pYCA6ICcnKTsKICB9CgogIC8vIOWmguaenOaYr+S4i+i9veaWh+S7tuebtOaOpei/lOWbngogIGlmIChyZXNwb25zZS5jb25maWcucmVzcG9uc2VUeXBlID09PSAnYmxvYicpIHsKICAgIHJldHVybiByZXNwb25zZTsKICB9CgogIC8vIOm7mOiupOi/lOWbnuaVsOaNrgogIHJldHVybiByZXMgfHwge307Cn0sIGVycm9yID0+IHsKICBjb25zb2xlLmVycm9yKCflk43lupTplJnor686JywgZXJyb3IpOwoKICAvLyDlpITnkIZIVFRQ6ZSZ6K+vCiAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICBjb25zdCBzdGF0dXMgPSBlcnJvci5yZXNwb25zZS5zdGF0dXM7CgogICAgLy8g6K6k6K+B6ZSZ6K+vCiAgICBpZiAoc3RhdHVzID09PSA0MDEpIHsKICAgICAgRWxNZXNzYWdlLmVycm9yKCfnmbvlvZXlt7Lov4fmnJ/vvIzor7fph43mlrDnmbvlvZUnKTsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd1c2VyJyk7CgogICAgICAvLyDlj6rmnInlvZPliY3kuI3lnKjnmbvlvZXpobXpnaLml7bmiY3ph43lrprlkJEKICAgICAgY29uc3QgY3VycmVudFBhdGggPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7CiAgICAgIGlmIChjdXJyZW50UGF0aCAhPT0gJy9sb2dpbicgJiYgY3VycmVudFBhdGggIT09ICcvJykgewogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2xvZ2luJzsKICAgICAgICB9LCAxNTAwKTsKICAgICAgfQogICAgfQogICAgLy8g5p2D6ZmQ6ZSZ6K+vCiAgICBlbHNlIGlmIChzdGF0dXMgPT09IDQwMykgewogICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+ayoeacieadg+mZkOaJp+ihjOatpOaTjeS9nCcpOwogICAgfQogICAgLy8g6K+35rGC6ZSZ6K+vCiAgICBlbHNlIGlmIChzdGF0dXMgPT09IDQwMCkgewogICAgICBjb25zdCBkYXRhID0gZXJyb3IucmVzcG9uc2UuZGF0YTsKICAgICAgLy8g5bCd6K+V5o+Q5Y+W6ZSZ6K+v5L+h5oGvCiAgICAgIGxldCBtZXNzYWdlID0gJ+ivt+axguWPguaVsOmUmeivryc7CiAgICAgIGlmIChkYXRhICYmIGRhdGEubWVzc2FnZSkgewogICAgICAgIG1lc3NhZ2UgPSBkYXRhLm1lc3NhZ2U7CiAgICAgIH0gZWxzZSBpZiAoZGF0YSAmJiBkYXRhLmVycm9yKSB7CiAgICAgICAgbWVzc2FnZSA9IGRhdGEuZXJyb3I7CiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgbWVzc2FnZSA9IGRhdGE7CiAgICAgIH0KICAgICAgRWxNZXNzYWdlLmVycm9yKG1lc3NhZ2UpOwogICAgfQogICAgLy8g5pyN5Yqh5Zmo6ZSZ6K+vCiAgICBlbHNlIGlmIChzdGF0dXMgPj0gNTAwKSB7CiAgICAgIEVsTWVzc2FnZS5lcnJvcign5pyN5Yqh5Zmo6ZSZ6K+v77yM6K+356iN5ZCO5YaN6K+VJyk7CiAgICB9CiAgICAvLyDlhbbku5bplJnor68KICAgIGVsc2UgewogICAgICB0cnkgewogICAgICAgIEVsTWVzc2FnZS5lcnJvcihlcnJvci5yZXNwb25zZS5kYXRhICYmIGVycm9yLnJlc3BvbnNlLmRhdGEubWVzc2FnZSA/IGVycm9yLnJlc3BvbnNlLmRhdGEubWVzc2FnZSA6ICfor7fmsYLlpLHotKUnKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIEVsTWVzc2FnZS5lcnJvcign6K+35rGC5aSx6LSlJyk7CiAgICAgIH0KICAgIH0KICB9IGVsc2UgaWYgKGVycm9yLnJlcXVlc3QpIHsKICAgIC8vIOivt+axguWPkemAgeS9huayoeacieWTjeW6lAogICAgRWxNZXNzYWdlLmVycm9yKCfnvZHnu5zov57mjqXlpLHotKXvvIzor7fmo4Dmn6XnvZHnu5zorr7nva4nKTsKICB9IGVsc2UgewogICAgLy8g6K+35rGC6K6+572u6ZSZ6K+vCiAgICBFbE1lc3NhZ2UuZXJyb3IoJ+ivt+axgumFjee9rumUmeivrycpOwogIH0KICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKZXhwb3J0IGRlZmF1bHQgc2VydmljZTs="},{"version":3,"names":["axios","ElMessage","service","create","baseURL","process","env","VUE_APP_BASE_API","timeout","headers","interceptors","request","use","config","console","log","url","token","localStorage","getItem","Authorization","method","data","FormData","error","Promise","reject","response","status","res","type","isArray","Array","length","Object","keys","join","responseType","removeItem","currentPath","window","location","pathname","setTimeout","href","message","e"],"sources":["C:/Users/18083/Desktop/offic_ai/office/smart-office/frontend/src/utils/request.js"],"sourcesContent":["import axios from 'axios';\nimport { ElMessage } from 'element-plus';\n\n// 创建axios实例\nconst service = axios.create({\n  baseURL: process.env.VUE_APP_BASE_API || 'http://localhost:8000',\n  timeout: 15000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// 请求拦截器 - 添加认证token\nservice.interceptors.request.use(\n  config => {\n    console.log('发送请求至:', config.url)\n    \n    const token = localStorage.getItem('token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n      console.log('已添加认证token')\n    } else {\n      console.log('未找到认证token')\n    }\n    \n    // 确保请求头设置正确\n    if (config.method === 'post' || config.method === 'put') {\n      if (!config.headers['Content-Type'] && !(config.data instanceof FormData)) {\n        config.headers['Content-Type'] = 'application/json';\n      }\n    }\n    \n    return config;\n  },\n  error => {\n    console.error('请求错误:', error);\n    return Promise.reject(error);\n  }\n);\n\n// 响应拦截器 - 统一处理响应和错误\nservice.interceptors.response.use(\n  response => {\n    console.log('收到响应:', response.config.url, response.status)\n    const res = response.data;\n    \n    // 详细记录响应数据类型和结构\n    if (res) {\n      const type = typeof res;\n      const isArray = Array.isArray(res);\n      console.log('响应数据类型:', isArray ? 'Array' : type, \n                  isArray ? `(长度:${res.length})` : \n                  (type === 'object' ? `(键:${Object.keys(res).join(',')})` : ''));\n    }\n    \n    // 如果是下载文件直接返回\n    if (response.config.responseType === 'blob') {\n      return response;\n    }\n    \n    // 默认返回数据\n    return res || {};\n  },\n  error => {\n    console.error('响应错误:', error);\n    \n    // 处理HTTP错误\n    if (error.response) {\n      const status = error.response.status;\n      \n      // 认证错误\n      if (status === 401) {\n        ElMessage.error('登录已过期，请重新登录');\n        localStorage.removeItem('token');\n        localStorage.removeItem('user');\n        \n        // 只有当前不在登录页面时才重定向\n        const currentPath = window.location.pathname;\n        if (currentPath !== '/login' && currentPath !== '/') {\n          setTimeout(() => {\n            window.location.href = '/login';\n          }, 1500);\n        }\n      } \n      // 权限错误\n      else if (status === 403) {\n        ElMessage.error('没有权限执行此操作');\n      } \n      // 请求错误\n      else if (status === 400) {\n        const data = error.response.data;\n        // 尝试提取错误信息\n        let message = '请求参数错误';\n        if (data && data.message) {\n          message = data.message;\n        } else if (data && data.error) {\n          message = data.error;\n        } else if (typeof data === 'string') {\n          message = data;\n        }\n        ElMessage.error(message);\n      } \n      // 服务器错误\n      else if (status >= 500) {\n        ElMessage.error('服务器错误，请稍后再试');\n      } \n      // 其他错误\n      else {\n        try {\n          ElMessage.error(error.response.data && error.response.data.message ? error.response.data.message : '请求失败');\n        } catch (e) {\n          ElMessage.error('请求失败');\n        }\n      }\n    } else if (error.request) {\n      // 请求发送但没有响应\n      ElMessage.error('网络连接失败，请检查网络设置');\n    } else {\n      // 请求设置错误\n      ElMessage.error('请求配置错误');\n    }\n    \n    return Promise.reject(error);\n  }\n);\n\nexport default service; "],"mappings":"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","ignoreList":[]}]}