{"remainingRequest":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\quill\\blots\\block.js","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\quill\\blots\\block.js","mtime":1751792161995},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\babel.config.js","mtime":1748077811200},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJDOi9Vc2Vycy8xODA4My9EZXNrdG9wL0NDSVQvb2ZmaWNlL3NtYXJ0LW9mZmljZS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5yZWR1Y2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IucmVkdWNlLmpzIjsKaW1wb3J0IHsgQXR0cmlidXRvclN0b3JlLCBCbG9ja0Jsb3QsIEVtYmVkQmxvdCwgTGVhZkJsb3QsIFNjb3BlIH0gZnJvbSAncGFyY2htZW50JzsKaW1wb3J0IERlbHRhIGZyb20gJ3F1aWxsLWRlbHRhJzsKaW1wb3J0IEJyZWFrIGZyb20gJy4vYnJlYWsuanMnOwppbXBvcnQgSW5saW5lIGZyb20gJy4vaW5saW5lLmpzJzsKaW1wb3J0IFRleHRCbG90IGZyb20gJy4vdGV4dC5qcyc7CmNvbnN0IE5FV0xJTkVfTEVOR1RIID0gMTsKY2xhc3MgQmxvY2sgZXh0ZW5kcyBCbG9ja0Jsb3QgewogIGNvbnN0cnVjdG9yKC4uLmFyZ3MpIHsKICAgIHN1cGVyKC4uLmFyZ3MpOwogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJjYWNoZSIsIHt9KTsKICB9CiAgZGVsdGEoKSB7CiAgICBpZiAodGhpcy5jYWNoZS5kZWx0YSA9PSBudWxsKSB7CiAgICAgIHRoaXMuY2FjaGUuZGVsdGEgPSBibG9ja0RlbHRhKHRoaXMpOwogICAgfQogICAgcmV0dXJuIHRoaXMuY2FjaGUuZGVsdGE7CiAgfQogIGRlbGV0ZUF0KGluZGV4LCBsZW5ndGgpIHsKICAgIHN1cGVyLmRlbGV0ZUF0KGluZGV4LCBsZW5ndGgpOwogICAgdGhpcy5jYWNoZSA9IHt9OwogIH0KICBmb3JtYXRBdChpbmRleCwgbGVuZ3RoLCBuYW1lLCB2YWx1ZSkgewogICAgaWYgKGxlbmd0aCA8PSAwKSByZXR1cm47CiAgICBpZiAodGhpcy5zY3JvbGwucXVlcnkobmFtZSwgU2NvcGUuQkxPQ0spKSB7CiAgICAgIGlmIChpbmRleCArIGxlbmd0aCA9PT0gdGhpcy5sZW5ndGgoKSkgewogICAgICAgIHRoaXMuZm9ybWF0KG5hbWUsIHZhbHVlKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgc3VwZXIuZm9ybWF0QXQoaW5kZXgsIE1hdGgubWluKGxlbmd0aCwgdGhpcy5sZW5ndGgoKSAtIGluZGV4IC0gMSksIG5hbWUsIHZhbHVlKTsKICAgIH0KICAgIHRoaXMuY2FjaGUgPSB7fTsKICB9CiAgaW5zZXJ0QXQoaW5kZXgsIHZhbHVlLCBkZWYpIHsKICAgIGlmIChkZWYgIT0gbnVsbCkgewogICAgICBzdXBlci5pbnNlcnRBdChpbmRleCwgdmFsdWUsIGRlZik7CiAgICAgIHRoaXMuY2FjaGUgPSB7fTsKICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwogICAgY29uc3QgbGluZXMgPSB2YWx1ZS5zcGxpdCgnXG4nKTsKICAgIGNvbnN0IHRleHQgPSBsaW5lcy5zaGlmdCgpOwogICAgaWYgKHRleHQubGVuZ3RoID4gMCkgewogICAgICBpZiAoaW5kZXggPCB0aGlzLmxlbmd0aCgpIC0gMSB8fCB0aGlzLmNoaWxkcmVuLnRhaWwgPT0gbnVsbCkgewogICAgICAgIHN1cGVyLmluc2VydEF0KE1hdGgubWluKGluZGV4LCB0aGlzLmxlbmd0aCgpIC0gMSksIHRleHQpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY2hpbGRyZW4udGFpbC5pbnNlcnRBdCh0aGlzLmNoaWxkcmVuLnRhaWwubGVuZ3RoKCksIHRleHQpOwogICAgICB9CiAgICAgIHRoaXMuY2FjaGUgPSB7fTsKICAgIH0KICAgIC8vIFRPRE86IEZpeCB0aGlzIG5leHQgdGltZSB0aGUgZmlsZSBpcyBlZGl0ZWQuCiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXRoaXMtYWxpYXMKICAgIGxldCBibG9jayA9IHRoaXM7CiAgICBsaW5lcy5yZWR1Y2UoKGxpbmVJbmRleCwgbGluZSkgPT4gewogICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIEZpeCBtZSBsYXRlcgogICAgICBibG9jayA9IGJsb2NrLnNwbGl0KGxpbmVJbmRleCwgdHJ1ZSk7CiAgICAgIGJsb2NrLmluc2VydEF0KDAsIGxpbmUpOwogICAgICByZXR1cm4gbGluZS5sZW5ndGg7CiAgICB9LCBpbmRleCArIHRleHQubGVuZ3RoKTsKICB9CiAgaW5zZXJ0QmVmb3JlKGJsb3QsIHJlZikgewogICAgY29uc3QgewogICAgICBoZWFkCiAgICB9ID0gdGhpcy5jaGlsZHJlbjsKICAgIHN1cGVyLmluc2VydEJlZm9yZShibG90LCByZWYpOwogICAgaWYgKGhlYWQgaW5zdGFuY2VvZiBCcmVhaykgewogICAgICBoZWFkLnJlbW92ZSgpOwogICAgfQogICAgdGhpcy5jYWNoZSA9IHt9OwogIH0KICBsZW5ndGgoKSB7CiAgICBpZiAodGhpcy5jYWNoZS5sZW5ndGggPT0gbnVsbCkgewogICAgICB0aGlzLmNhY2hlLmxlbmd0aCA9IHN1cGVyLmxlbmd0aCgpICsgTkVXTElORV9MRU5HVEg7CiAgICB9CiAgICByZXR1cm4gdGhpcy5jYWNoZS5sZW5ndGg7CiAgfQogIG1vdmVDaGlsZHJlbih0YXJnZXQsIHJlZikgewogICAgc3VwZXIubW92ZUNoaWxkcmVuKHRhcmdldCwgcmVmKTsKICAgIHRoaXMuY2FjaGUgPSB7fTsKICB9CiAgb3B0aW1pemUoY29udGV4dCkgewogICAgc3VwZXIub3B0aW1pemUoY29udGV4dCk7CiAgICB0aGlzLmNhY2hlID0ge307CiAgfQogIHBhdGgoaW5kZXgpIHsKICAgIHJldHVybiBzdXBlci5wYXRoKGluZGV4LCB0cnVlKTsKICB9CiAgcmVtb3ZlQ2hpbGQoY2hpbGQpIHsKICAgIHN1cGVyLnJlbW92ZUNoaWxkKGNoaWxkKTsKICAgIHRoaXMuY2FjaGUgPSB7fTsKICB9CiAgc3BsaXQoaW5kZXgpIHsKICAgIGxldCBmb3JjZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7CiAgICBpZiAoZm9yY2UgJiYgKGluZGV4ID09PSAwIHx8IGluZGV4ID49IHRoaXMubGVuZ3RoKCkgLSBORVdMSU5FX0xFTkdUSCkpIHsKICAgICAgY29uc3QgY2xvbmUgPSB0aGlzLmNsb25lKCk7CiAgICAgIGlmIChpbmRleCA9PT0gMCkgewogICAgICAgIHRoaXMucGFyZW50Lmluc2VydEJlZm9yZShjbG9uZSwgdGhpcyk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KICAgICAgdGhpcy5wYXJlbnQuaW5zZXJ0QmVmb3JlKGNsb25lLCB0aGlzLm5leHQpOwogICAgICByZXR1cm4gY2xvbmU7CiAgICB9CiAgICBjb25zdCBuZXh0ID0gc3VwZXIuc3BsaXQoaW5kZXgsIGZvcmNlKTsKICAgIHRoaXMuY2FjaGUgPSB7fTsKICAgIHJldHVybiBuZXh0OwogIH0KfQpCbG9jay5ibG90TmFtZSA9ICdibG9jayc7CkJsb2NrLnRhZ05hbWUgPSAnUCc7CkJsb2NrLmRlZmF1bHRDaGlsZCA9IEJyZWFrOwpCbG9jay5hbGxvd2VkQ2hpbGRyZW4gPSBbQnJlYWssIElubGluZSwgRW1iZWRCbG90LCBUZXh0QmxvdF07CmNsYXNzIEJsb2NrRW1iZWQgZXh0ZW5kcyBFbWJlZEJsb3QgewogIGF0dGFjaCgpIHsKICAgIHN1cGVyLmF0dGFjaCgpOwogICAgdGhpcy5hdHRyaWJ1dGVzID0gbmV3IEF0dHJpYnV0b3JTdG9yZSh0aGlzLmRvbU5vZGUpOwogIH0KICBkZWx0YSgpIHsKICAgIHJldHVybiBuZXcgRGVsdGEoKS5pbnNlcnQodGhpcy52YWx1ZSgpLCB7CiAgICAgIC4uLnRoaXMuZm9ybWF0cygpLAogICAgICAuLi50aGlzLmF0dHJpYnV0ZXMudmFsdWVzKCkKICAgIH0pOwogIH0KICBmb3JtYXQobmFtZSwgdmFsdWUpIHsKICAgIGNvbnN0IGF0dHJpYnV0ZSA9IHRoaXMuc2Nyb2xsLnF1ZXJ5KG5hbWUsIFNjb3BlLkJMT0NLX0FUVFJJQlVURSk7CiAgICBpZiAoYXR0cmlidXRlICE9IG51bGwpIHsKICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUT0RPOiBTY3JvbGwjcXVlcnkoKSBzaG91bGQgcmV0dXJuIEF0dHJpYnV0b3Igd2hlbiBzY29wZSBpcyBhdHRyaWJ1dGUKICAgICAgdGhpcy5hdHRyaWJ1dGVzLmF0dHJpYnV0ZShhdHRyaWJ1dGUsIHZhbHVlKTsKICAgIH0KICB9CiAgZm9ybWF0QXQoaW5kZXgsIGxlbmd0aCwgbmFtZSwgdmFsdWUpIHsKICAgIHRoaXMuZm9ybWF0KG5hbWUsIHZhbHVlKTsKICB9CiAgaW5zZXJ0QXQoaW5kZXgsIHZhbHVlLCBkZWYpIHsKICAgIGlmIChkZWYgIT0gbnVsbCkgewogICAgICBzdXBlci5pbnNlcnRBdChpbmRleCwgdmFsdWUsIGRlZik7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGNvbnN0IGxpbmVzID0gdmFsdWUuc3BsaXQoJ1xuJyk7CiAgICBjb25zdCB0ZXh0ID0gbGluZXMucG9wKCk7CiAgICBjb25zdCBibG9ja3MgPSBsaW5lcy5tYXAobGluZSA9PiB7CiAgICAgIGNvbnN0IGJsb2NrID0gdGhpcy5zY3JvbGwuY3JlYXRlKEJsb2NrLmJsb3ROYW1lKTsKICAgICAgYmxvY2suaW5zZXJ0QXQoMCwgbGluZSk7CiAgICAgIHJldHVybiBibG9jazsKICAgIH0pOwogICAgY29uc3QgcmVmID0gdGhpcy5zcGxpdChpbmRleCk7CiAgICBibG9ja3MuZm9yRWFjaChibG9jayA9PiB7CiAgICAgIHRoaXMucGFyZW50Lmluc2VydEJlZm9yZShibG9jaywgcmVmKTsKICAgIH0pOwogICAgaWYgKHRleHQpIHsKICAgICAgdGhpcy5wYXJlbnQuaW5zZXJ0QmVmb3JlKHRoaXMuc2Nyb2xsLmNyZWF0ZSgndGV4dCcsIHRleHQpLCByZWYpOwogICAgfQogIH0KfQpCbG9ja0VtYmVkLnNjb3BlID0gU2NvcGUuQkxPQ0tfQkxPVDsKLy8gSXQgaXMgaW1wb3J0YW50IGZvciBjdXJzb3IgYmVoYXZpb3IgQmxvY2tFbWJlZHMgdXNlIHRhZ3MgdGhhdCBhcmUgYmxvY2sgbGV2ZWwgZWxlbWVudHMKCmZ1bmN0aW9uIGJsb2NrRGVsdGEoYmxvdCkgewogIGxldCBmaWx0ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHRydWU7CiAgcmV0dXJuIGJsb3QuZGVzY2VuZGFudHMoTGVhZkJsb3QpLnJlZHVjZSgoZGVsdGEsIGxlYWYpID0+IHsKICAgIGlmIChsZWFmLmxlbmd0aCgpID09PSAwKSB7CiAgICAgIHJldHVybiBkZWx0YTsKICAgIH0KICAgIHJldHVybiBkZWx0YS5pbnNlcnQobGVhZi52YWx1ZSgpLCBidWJibGVGb3JtYXRzKGxlYWYsIHt9LCBmaWx0ZXIpKTsKICB9LCBuZXcgRGVsdGEoKSkuaW5zZXJ0KCdcbicsIGJ1YmJsZUZvcm1hdHMoYmxvdCkpOwp9CmZ1bmN0aW9uIGJ1YmJsZUZvcm1hdHMoYmxvdCkgewogIGxldCBmb3JtYXRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTsKICBsZXQgZmlsdGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB0cnVlOwogIGlmIChibG90ID09IG51bGwpIHJldHVybiBmb3JtYXRzOwogIGlmICgnZm9ybWF0cycgaW4gYmxvdCAmJiB0eXBlb2YgYmxvdC5mb3JtYXRzID09PSAnZnVuY3Rpb24nKSB7CiAgICBmb3JtYXRzID0gewogICAgICAuLi5mb3JtYXRzLAogICAgICAuLi5ibG90LmZvcm1hdHMoKQogICAgfTsKICAgIGlmIChmaWx0ZXIpIHsKICAgICAgLy8gZXhjbHVkZSBzeW50YXggaGlnaGxpZ2h0aW5nIGZyb20gZGVsdGFzIGFuZCBnZXRGb3JtYXQoKQogICAgICBkZWxldGUgZm9ybWF0c1snY29kZS10b2tlbiddOwogICAgfQogIH0KICBpZiAoYmxvdC5wYXJlbnQgPT0gbnVsbCB8fCBibG90LnBhcmVudC5zdGF0aWNzLmJsb3ROYW1lID09PSAnc2Nyb2xsJyB8fCBibG90LnBhcmVudC5zdGF0aWNzLnNjb3BlICE9PSBibG90LnN0YXRpY3Muc2NvcGUpIHsKICAgIHJldHVybiBmb3JtYXRzOwogIH0KICByZXR1cm4gYnViYmxlRm9ybWF0cyhibG90LnBhcmVudCwgZm9ybWF0cywgZmlsdGVyKTsKfQpleHBvcnQgeyBibG9ja0RlbHRhLCBidWJibGVGb3JtYXRzLCBCbG9ja0VtYmVkLCBCbG9jayBhcyBkZWZhdWx0IH07"},{"version":3,"names":["AttributorStore","BlockBlot","EmbedBlot","LeafBlot","Scope","Delta","Break","Inline","TextBlot","NEWLINE_LENGTH","Block","constructor","args","_defineProperty","delta","cache","blockDelta","deleteAt","index","length","formatAt","name","value","scroll","query","BLOCK","format","Math","min","insertAt","def","lines","split","text","shift","children","tail","block","reduce","lineIndex","line","insertBefore","blot","ref","head","remove","moveChildren","target","optimize","context","path","removeChild","child","force","arguments","undefined","clone","parent","next","blotName","tagName","defaultChild","allowedChildren","BlockEmbed","attach","attributes","domNode","insert","formats","values","attribute","BLOCK_ATTRIBUTE","pop","blocks","map","create","forEach","scope","BLOCK_BLOT","filter","descendants","leaf","bubbleFormats","statics","default"],"sources":["../../src/blots/block.ts"],"sourcesContent":["import {\n  AttributorStore,\n  BlockBlot,\n  EmbedBlot,\n  LeafBlot,\n  Scope,\n} from 'parchment';\nimport type { Blot, Parent } from 'parchment';\nimport Delta from 'quill-delta';\nimport Break from './break.js';\nimport Inline from './inline.js';\nimport TextBlot from './text.js';\n\nconst NEWLINE_LENGTH = 1;\n\nclass Block extends BlockBlot {\n  cache: { delta?: Delta | null; length?: number } = {};\n\n  delta(): Delta {\n    if (this.cache.delta == null) {\n      this.cache.delta = blockDelta(this);\n    }\n    return this.cache.delta;\n  }\n\n  deleteAt(index: number, length: number) {\n    super.deleteAt(index, length);\n    this.cache = {};\n  }\n\n  formatAt(index: number, length: number, name: string, value: unknown) {\n    if (length <= 0) return;\n    if (this.scroll.query(name, Scope.BLOCK)) {\n      if (index + length === this.length()) {\n        this.format(name, value);\n      }\n    } else {\n      super.formatAt(\n        index,\n        Math.min(length, this.length() - index - 1),\n        name,\n        value,\n      );\n    }\n    this.cache = {};\n  }\n\n  insertAt(index: number, value: string, def?: unknown) {\n    if (def != null) {\n      super.insertAt(index, value, def);\n      this.cache = {};\n      return;\n    }\n    if (value.length === 0) return;\n    const lines = value.split('\\n');\n    const text = lines.shift() as string;\n    if (text.length > 0) {\n      if (index < this.length() - 1 || this.children.tail == null) {\n        super.insertAt(Math.min(index, this.length() - 1), text);\n      } else {\n        this.children.tail.insertAt(this.children.tail.length(), text);\n      }\n      this.cache = {};\n    }\n    // TODO: Fix this next time the file is edited.\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    let block: Blot | this = this;\n    lines.reduce((lineIndex, line) => {\n      // @ts-expect-error Fix me later\n      block = block.split(lineIndex, true);\n      block.insertAt(0, line);\n      return line.length;\n    }, index + text.length);\n  }\n\n  insertBefore(blot: Blot, ref?: Blot | null) {\n    const { head } = this.children;\n    super.insertBefore(blot, ref);\n    if (head instanceof Break) {\n      head.remove();\n    }\n    this.cache = {};\n  }\n\n  length() {\n    if (this.cache.length == null) {\n      this.cache.length = super.length() + NEWLINE_LENGTH;\n    }\n    return this.cache.length;\n  }\n\n  moveChildren(target: Parent, ref?: Blot | null) {\n    super.moveChildren(target, ref);\n    this.cache = {};\n  }\n\n  optimize(context: { [key: string]: any }) {\n    super.optimize(context);\n    this.cache = {};\n  }\n\n  path(index: number) {\n    return super.path(index, true);\n  }\n\n  removeChild(child: Blot) {\n    super.removeChild(child);\n    this.cache = {};\n  }\n\n  split(index: number, force: boolean | undefined = false): Blot | null {\n    if (force && (index === 0 || index >= this.length() - NEWLINE_LENGTH)) {\n      const clone = this.clone();\n      if (index === 0) {\n        this.parent.insertBefore(clone, this);\n        return this;\n      }\n      this.parent.insertBefore(clone, this.next);\n      return clone;\n    }\n    const next = super.split(index, force);\n    this.cache = {};\n    return next;\n  }\n}\nBlock.blotName = 'block';\nBlock.tagName = 'P';\nBlock.defaultChild = Break;\nBlock.allowedChildren = [Break, Inline, EmbedBlot, TextBlot];\n\nclass BlockEmbed extends EmbedBlot {\n  attributes: AttributorStore;\n  domNode: HTMLElement;\n\n  attach() {\n    super.attach();\n    this.attributes = new AttributorStore(this.domNode);\n  }\n\n  delta() {\n    return new Delta().insert(this.value(), {\n      ...this.formats(),\n      ...this.attributes.values(),\n    });\n  }\n\n  format(name: string, value: unknown) {\n    const attribute = this.scroll.query(name, Scope.BLOCK_ATTRIBUTE);\n    if (attribute != null) {\n      // @ts-expect-error TODO: Scroll#query() should return Attributor when scope is attribute\n      this.attributes.attribute(attribute, value);\n    }\n  }\n\n  formatAt(index: number, length: number, name: string, value: unknown) {\n    this.format(name, value);\n  }\n\n  insertAt(index: number, value: string, def?: unknown) {\n    if (def != null) {\n      super.insertAt(index, value, def);\n      return;\n    }\n    const lines = value.split('\\n');\n    const text = lines.pop();\n    const blocks = lines.map((line) => {\n      const block = this.scroll.create(Block.blotName);\n      block.insertAt(0, line);\n      return block;\n    });\n    const ref = this.split(index);\n    blocks.forEach((block) => {\n      this.parent.insertBefore(block, ref);\n    });\n    if (text) {\n      this.parent.insertBefore(this.scroll.create('text', text), ref);\n    }\n  }\n}\nBlockEmbed.scope = Scope.BLOCK_BLOT;\n// It is important for cursor behavior BlockEmbeds use tags that are block level elements\n\nfunction blockDelta(blot: BlockBlot, filter = true) {\n  return blot\n    .descendants(LeafBlot)\n    .reduce((delta, leaf) => {\n      if (leaf.length() === 0) {\n        return delta;\n      }\n      return delta.insert(leaf.value(), bubbleFormats(leaf, {}, filter));\n    }, new Delta())\n    .insert('\\n', bubbleFormats(blot));\n}\n\nfunction bubbleFormats(\n  blot: Blot | null,\n  formats: Record<string, unknown> = {},\n  filter = true,\n): Record<string, unknown> {\n  if (blot == null) return formats;\n  if ('formats' in blot && typeof blot.formats === 'function') {\n    formats = {\n      ...formats,\n      ...blot.formats(),\n    };\n    if (filter) {\n      // exclude syntax highlighting from deltas and getFormat()\n      delete formats['code-token'];\n    }\n  }\n  if (\n    blot.parent == null ||\n    blot.parent.statics.blotName === 'scroll' ||\n    blot.parent.statics.scope !== blot.statics.scope\n  ) {\n    return formats;\n  }\n  return bubbleFormats(blot.parent, formats, filter);\n}\n\nexport { blockDelta, bubbleFormats, BlockEmbed, Block as default };\n"],"mappings":"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","ignoreList":[]}]}