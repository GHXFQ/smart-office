{"remainingRequest":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\api\\auth.js","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\api\\auth.js","mtime":1747454339978},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\babel.config.js","mtime":1748077811200},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\eslint-loader\\index.js","mtime":1746431218000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKCi8vIOWIm+W7umF4aW9z5a6e5L6LCmNvbnN0IGFwaSA9IGF4aW9zLmNyZWF0ZSh7CiAgYmFzZVVSTDogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMCcsCiAgdGltZW91dDogMTAwMDAsCiAgaGVhZGVyczogewogICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogIH0KfSk7CgovLyDor7fmsYLmi6bmiKrlmaggLSDmt7vliqDorqTor4F0b2tlbgphcGkuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGNvbmZpZyA9PiB7CiAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTsKICBpZiAodG9rZW4pIHsKICAgIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSBgQmVhcmVyICR7dG9rZW59YDsKICB9CiAgcmV0dXJuIGNvbmZpZzsKfSwgZXJyb3IgPT4gewogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwoKLy8g5ZON5bqU5oum5oiq5ZmoIC0g5aSE55CG5bi46KeB6ZSZ6K+vCmFwaS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKHJlc3BvbnNlID0+IHsKICByZXR1cm4gcmVzcG9uc2UuZGF0YTsKfSwgZXJyb3IgPT4gewogIC8vIOmUmeivr+ivpue7huaXpeW/lwogIGNvbnNvbGUuZXJyb3IoJ0FQSemUmeivrzonLCBlcnJvci5yZXNwb25zZSB8fCBlcnJvcik7CiAgaWYgKGVycm9yLnJlc3BvbnNlICYmIGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7CiAgICAvLyDmuIXpmaTmnKzlnLB0b2tlbuS/oeaBrwogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7CiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndXNlcicpOwoKICAgIC8vIOS4jeimgeWcqOi/memHjOi/m+ihjOmHjeWumuWQke+8jOiAjOaYr+mAmui/h3N0b3Jl5Lit55qEYWN0aW9u5p2l5aSE55CGCiAgICAvLyDnlLHkuo5heGlvc+aLpuaIquWZqOS4jeW6lOivpeebtOaOpeiuv+mXrnJvdXRlcu+8jOaJgOS7peiuqee7hOS7tuWkhOeQhumHjeWumuWQkQogICAgLy8g5oiW5Zyo5o2V6I636ZSZ6K+v55qE5Zyw5pa56L+b6KGM5aSE55CGCiAgfQogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwoKLy8g6K6k6K+B55u45YWzQVBJCmV4cG9ydCBkZWZhdWx0IHsKICAvLyDnlKjmiLfnmbvlvZUKICBsb2dpbihkYXRhKSB7CiAgICByZXR1cm4gYXBpLnBvc3QoJy9hcGkvYXV0aC9sb2dpbi8nLCBkYXRhKTsKICB9LAogIC8vIOeUqOaIt+azqOWGjAogIHJlZ2lzdGVyKGRhdGEpIHsKICAgIGNvbnNvbGUubG9nKCflj5HpgIHms6jlhozor7fmsYI6JywgZGF0YSk7CiAgICByZXR1cm4gYXBpLnBvc3QoJy9hcGkvYXV0aC9yZWdpc3Rlci8nLCBkYXRhLCB7CiAgICAgIGhlYWRlcnM6IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicKICAgICAgfQogICAgfSk7CiAgfSwKICAvLyDnlKjmiLfnmbvlh7oKICBsb2dvdXQoKSB7CiAgICByZXR1cm4gYXBpLnBvc3QoJy9hcGkvYXV0aC9sb2dvdXQvJyk7CiAgfSwKICAvLyDor7fmsYLph43nva7lr4bnoIEKICByZXF1ZXN0UGFzc3dvcmRSZXNldChkYXRhKSB7CiAgICByZXR1cm4gYXBpLnBvc3QoJy9hcGkvYXV0aC9wYXNzd29yZC9yZXF1ZXN0LXJlc2V0LycsIGRhdGEpOwogIH0sCiAgLy8g6YeN572u5a+G56CBCiAgcmVzZXRQYXNzd29yZChkYXRhKSB7CiAgICByZXR1cm4gYXBpLnBvc3QoJy9hcGkvYXV0aC9wYXNzd29yZC9yZXNldC8nLCBkYXRhKTsKICB9Cn07"},{"version":3,"names":["axios","api","create","baseURL","timeout","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","error","Promise","reject","response","data","console","status","removeItem","login","post","register","log","logout","requestPasswordReset","resetPassword"],"sources":["C:/Users/18083/Desktop/CCIT/office/smart-office/frontend/src/api/auth.js"],"sourcesContent":["import axios from 'axios';\n\n// 创建axios实例\nconst api = axios.create({\n  baseURL: 'http://localhost:8000',\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// 请求拦截器 - 添加认证token\napi.interceptors.request.use(\n  config => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  error => {\n    return Promise.reject(error);\n  }\n);\n\n// 响应拦截器 - 处理常见错误\napi.interceptors.response.use(\n  response => {\n    return response.data;\n  },\n  error => {\n    // 错误详细日志\n    console.error('API错误:', error.response || error);\n    \n    if (error.response && error.response.status === 401) {\n      // 清除本地token信息\n      localStorage.removeItem('token');\n      localStorage.removeItem('user');\n      \n      // 不要在这里进行重定向，而是通过store中的action来处理\n      // 由于axios拦截器不应该直接访问router，所以让组件处理重定向\n      // 或在捕获错误的地方进行处理\n    }\n    return Promise.reject(error);\n  }\n);\n\n// 认证相关API\nexport default {\n  // 用户登录\n  login(data) {\n    return api.post('/api/auth/login/', data);\n  },\n  \n  // 用户注册\n  register(data) {\n    console.log('发送注册请求:', data);\n    return api.post('/api/auth/register/', data, {\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n      }\n    });\n  },\n  \n  // 用户登出\n  logout() {\n    return api.post('/api/auth/logout/');\n  },\n  \n  // 请求重置密码\n  requestPasswordReset(data) {\n    return api.post('/api/auth/password/request-reset/', data);\n  },\n  \n  // 重置密码\n  resetPassword(data) {\n    return api.post('/api/auth/password/reset/', data);\n  }\n}; "],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;;AAEzB;AACA,MAAMC,GAAG,GAAGD,KAAK,CAACE,MAAM,CAAC;EACvBC,OAAO,EAAE,uBAAuB;EAChCC,OAAO,EAAE,KAAK;EACdC,OAAO,EAAE;IACP,cAAc,EAAE;EAClB;AACF,CAAC,CAAC;;AAEF;AACAJ,GAAG,CAACK,YAAY,CAACC,OAAO,CAACC,GAAG,CAC1BC,MAAM,IAAI;EACR,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAIF,KAAK,EAAE;IACTD,MAAM,CAACJ,OAAO,CAACQ,aAAa,GAAG,UAAUH,KAAK,EAAE;EAClD;EACA,OAAOD,MAAM;AACf,CAAC,EACDK,KAAK,IAAI;EACP,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;;AAED;AACAb,GAAG,CAACK,YAAY,CAACW,QAAQ,CAACT,GAAG,CAC3BS,QAAQ,IAAI;EACV,OAAOA,QAAQ,CAACC,IAAI;AACtB,CAAC,EACDJ,KAAK,IAAI;EACP;EACAK,OAAO,CAACL,KAAK,CAAC,QAAQ,EAAEA,KAAK,CAACG,QAAQ,IAAIH,KAAK,CAAC;EAEhD,IAAIA,KAAK,CAACG,QAAQ,IAAIH,KAAK,CAACG,QAAQ,CAACG,MAAM,KAAK,GAAG,EAAE;IACnD;IACAT,YAAY,CAACU,UAAU,CAAC,OAAO,CAAC;IAChCV,YAAY,CAACU,UAAU,CAAC,MAAM,CAAC;;IAE/B;IACA;IACA;EACF;EACA,OAAON,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;;AAED;AACA,eAAe;EACb;EACAQ,KAAKA,CAACJ,IAAI,EAAE;IACV,OAAOjB,GAAG,CAACsB,IAAI,CAAC,kBAAkB,EAAEL,IAAI,CAAC;EAC3C,CAAC;EAED;EACAM,QAAQA,CAACN,IAAI,EAAE;IACbC,OAAO,CAACM,GAAG,CAAC,SAAS,EAAEP,IAAI,CAAC;IAC5B,OAAOjB,GAAG,CAACsB,IAAI,CAAC,qBAAqB,EAAEL,IAAI,EAAE;MAC3Cb,OAAO,EAAE;QACP,cAAc,EAAE,kBAAkB;QAClC,QAAQ,EAAE;MACZ;IACF,CAAC,CAAC;EACJ,CAAC;EAED;EACAqB,MAAMA,CAAA,EAAG;IACP,OAAOzB,GAAG,CAACsB,IAAI,CAAC,mBAAmB,CAAC;EACtC,CAAC;EAED;EACAI,oBAAoBA,CAACT,IAAI,EAAE;IACzB,OAAOjB,GAAG,CAACsB,IAAI,CAAC,mCAAmC,EAAEL,IAAI,CAAC;EAC5D,CAAC;EAED;EACAU,aAAaA,CAACV,IAAI,EAAE;IAClB,OAAOjB,GAAG,CAACsB,IAAI,CAAC,2BAA2B,EAAEL,IAAI,CAAC;EACpD;AACF,CAAC","ignoreList":[]}]}