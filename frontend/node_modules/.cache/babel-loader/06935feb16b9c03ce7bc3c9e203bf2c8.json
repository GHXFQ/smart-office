{"remainingRequest":"C:\\Users\\18083\\Desktop\\oo\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18083\\Desktop\\oo\\smart-office\\frontend\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\18083\\Desktop\\oo\\smart-office\\frontend\\src\\store\\modules\\auth.js","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\oo\\smart-office\\frontend\\src\\store\\modules\\auth.js","mtime":1746616887133},{"path":"C:\\Users\\18083\\Desktop\\oo\\smart-office\\frontend\\babel.config.js","mtime":1746431728272},{"path":"C:\\Users\\18083\\Desktop\\oo\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218359},{"path":"C:\\Users\\18083\\Desktop\\oo\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202324},{"path":"C:\\Users\\18083\\Desktop\\oo\\smart-office\\frontend\\node_modules\\eslint-loader\\index.js","mtime":1746431218362}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgbG9naW4sIGxvZ291dCwgcmVnaXN0ZXIgfSBmcm9tICdAL2FwaS9hdXRoJzsKaW1wb3J0IHsgZ2V0VG9rZW4sIHNldFRva2VuLCByZW1vdmVUb2tlbiwgZ2V0VXNlciwgc2V0VXNlciwgcmVtb3ZlVXNlciB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7CmNvbnN0IHN0YXRlID0gewogIHRva2VuOiBnZXRUb2tlbigpLAogIHVzZXI6IGdldFVzZXIoKSwKICBsb2FkaW5nOiBmYWxzZSwKICBlcnJvcjogbnVsbAp9Owpjb25zdCBtdXRhdGlvbnMgPSB7CiAgU0VUX1RPS0VOKHN0YXRlLCB0b2tlbikgewogICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICB9LAogIFNFVF9VU0VSKHN0YXRlLCB1c2VyKSB7CiAgICBzdGF0ZS51c2VyID0gdXNlcjsKICB9LAogIFNFVF9MT0FESU5HKHN0YXRlLCBpc0xvYWRpbmcpIHsKICAgIHN0YXRlLmxvYWRpbmcgPSBpc0xvYWRpbmc7CiAgfSwKICBTRVRfRVJST1Ioc3RhdGUsIGVycm9yKSB7CiAgICBzdGF0ZS5lcnJvciA9IGVycm9yOwogIH0sCiAgQ0xFQVJfRVJST1Ioc3RhdGUpIHsKICAgIHN0YXRlLmVycm9yID0gbnVsbDsKICB9Cn07CmNvbnN0IGFjdGlvbnMgPSB7CiAgLy8g55So5oi355m75b2VCiAgYXN5bmMgbG9naW4oewogICAgY29tbWl0CiAgfSwgewogICAgdXNlcm5hbWUsCiAgICBwYXNzd29yZCwKICAgIHJlbWVtYmVyCiAgfSkgewogICAgdHJ5IHsKICAgICAgY29tbWl0KCdTRVRfTE9BRElORycsIHRydWUpOwogICAgICBjb21taXQoJ0NMRUFSX0VSUk9SJyk7CiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgbG9naW4odXNlcm5hbWUsIHBhc3N3b3JkLCByZW1lbWJlcik7CiAgICAgIGNvbnN0IHsKICAgICAgICBkYXRhCiAgICAgIH0gPSByZXNwb25zZS5kYXRhOwogICAgICBjb21taXQoJ1NFVF9UT0tFTicsIGRhdGEudG9rZW4pOwogICAgICBjb21taXQoJ1NFVF9VU0VSJywgewogICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsCiAgICAgICAgdXNlcm5hbWU6IGRhdGEudXNlcm5hbWUKICAgICAgfSk7CgogICAgICAvLyDlrZjlgqh0b2tlbuWSjOeUqOaIt+S/oeaBrwogICAgICBzZXRUb2tlbihkYXRhLnRva2VuLCBkYXRhLmV4cGlyZXNJbik7CiAgICAgIHNldFVzZXIoewogICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsCiAgICAgICAgdXNlcm5hbWU6IGRhdGEudXNlcm5hbWUKICAgICAgfSk7CiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZGF0YSk7CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICB2YXIgX2Vycm9yJHJlc3BvbnNlLCBfZXJyb3IkcmVzcG9uc2UkZGF0YTsKICAgICAgY29tbWl0KCdTRVRfRVJST1InLCAoKF9lcnJvciRyZXNwb25zZSA9IGVycm9yLnJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfZXJyb3IkcmVzcG9uc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfZXJyb3IkcmVzcG9uc2UkZGF0YSA9IF9lcnJvciRyZXNwb25zZS5kYXRhKSA9PT0gbnVsbCB8fCBfZXJyb3IkcmVzcG9uc2UkZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Vycm9yJHJlc3BvbnNlJGRhdGEubWVzc2FnZSkgfHwgJ+eZu+W9leWksei0pScpOwogICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogICAgfSBmaW5hbGx5IHsKICAgICAgY29tbWl0KCdTRVRfTE9BRElORycsIGZhbHNlKTsKICAgIH0KICB9LAogIC8vIOeUqOaIt+azqOWGjAogIGFzeW5jIHJlZ2lzdGVyKHsKICAgIGNvbW1pdAogIH0sIHVzZXJJbmZvKSB7CiAgICB0cnkgewogICAgICBjb21taXQoJ1NFVF9MT0FESU5HJywgdHJ1ZSk7CiAgICAgIGNvbW1pdCgnQ0xFQVJfRVJST1InKTsKICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZWdpc3Rlcih1c2VySW5mby51c2VybmFtZSwgdXNlckluZm8uZW1haWwsIHVzZXJJbmZvLnBhc3N3b3JkLCB1c2VySW5mby5jb25maXJtUGFzc3dvcmQpOwogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3BvbnNlLmRhdGEpOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgdmFyIF9lcnJvciRyZXNwb25zZTIsIF9lcnJvciRyZXNwb25zZTIkZGF0YTsKICAgICAgY29tbWl0KCdTRVRfRVJST1InLCAoKF9lcnJvciRyZXNwb25zZTIgPSBlcnJvci5yZXNwb25zZSkgPT09IG51bGwgfHwgX2Vycm9yJHJlc3BvbnNlMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9lcnJvciRyZXNwb25zZTIkZGF0YSA9IF9lcnJvciRyZXNwb25zZTIuZGF0YSkgPT09IG51bGwgfHwgX2Vycm9yJHJlc3BvbnNlMiRkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZXJyb3IkcmVzcG9uc2UyJGRhdGEubWVzc2FnZSkgfHwgJ+azqOWGjOWksei0pScpOwogICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogICAgfSBmaW5hbGx5IHsKICAgICAgY29tbWl0KCdTRVRfTE9BRElORycsIGZhbHNlKTsKICAgIH0KICB9LAogIC8vIOmAgOWHuueZu+W9lQogIGFzeW5jIGxvZ291dCh7CiAgICBjb21taXQKICB9KSB7CiAgICB0cnkgewogICAgICBjb21taXQoJ1NFVF9MT0FESU5HJywgdHJ1ZSk7CiAgICAgIGF3YWl0IGxvZ291dCgpOwoKICAgICAgLy8g5riF6Zmk54q25oCBCiAgICAgIGNvbW1pdCgnU0VUX1RPS0VOJywgJycpOwogICAgICBjb21taXQoJ1NFVF9VU0VSJywgbnVsbCk7CgogICAgICAvLyDmuIXpmaTmnKzlnLDlrZjlgqgKICAgICAgcmVtb3ZlVG9rZW4oKTsKICAgICAgcmVtb3ZlVXNlcigpOwogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogICAgfSBmaW5hbGx5IHsKICAgICAgY29tbWl0KCdTRVRfTE9BRElORycsIGZhbHNlKTsKICAgIH0KICB9LAogIC8vIOmHjee9ruiupOivgeeKtuaAgQogIHJlc2V0QXV0aCh7CiAgICBjb21taXQKICB9KSB7CiAgICBjb21taXQoJ1NFVF9UT0tFTicsICcnKTsKICAgIGNvbW1pdCgnU0VUX1VTRVInLCBudWxsKTsKICAgIHJlbW92ZVRva2VuKCk7CiAgICByZW1vdmVVc2VyKCk7CiAgfQp9Owpjb25zdCBnZXR0ZXJzID0gewogIC8vIOaYr+WQpuW3suiupOivgQogIGlzQXV0aGVudGljYXRlZDogc3RhdGUgPT4gISFzdGF0ZS50b2tlbiwKICAvLyDlvZPliY3nlKjmiLcKICBjdXJyZW50VXNlcjogc3RhdGUgPT4gc3RhdGUudXNlciwKICAvLyDliqDovb3nirbmgIEKICBhdXRoTG9hZGluZzogc3RhdGUgPT4gc3RhdGUubG9hZGluZywKICAvLyDplJnor6/kv6Hmga8KICBhdXRoRXJyb3I6IHN0YXRlID0+IHN0YXRlLmVycm9yCn07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlLAogIG11dGF0aW9ucywKICBhY3Rpb25zLAogIGdldHRlcnMKfTs="},{"version":3,"names":["login","logout","register","getToken","setToken","removeToken","getUser","setUser","removeUser","state","token","user","loading","error","mutations","SET_TOKEN","SET_USER","SET_LOADING","isLoading","SET_ERROR","CLEAR_ERROR","actions","commit","username","password","remember","response","data","userId","expiresIn","Promise","resolve","_error$response","_error$response$data","message","reject","userInfo","email","confirmPassword","_error$response2","_error$response2$data","resetAuth","getters","isAuthenticated","currentUser","authLoading","authError","namespaced"],"sources":["C:/Users/18083/Desktop/oo/smart-office/frontend/src/store/modules/auth.js"],"sourcesContent":["import { login, logout, register } from '@/api/auth';\r\nimport { getToken, setToken, removeToken, getUser, setUser, removeUser } from '@/utils/auth';\r\n\r\nconst state = {\r\n  token: getToken(),\r\n  user: getUser(),\r\n  loading: false,\r\n  error: null\r\n};\r\n\r\nconst mutations = {\r\n  SET_TOKEN(state, token) {\r\n    state.token = token;\r\n  },\r\n  SET_USER(state, user) {\r\n    state.user = user;\r\n  },\r\n  SET_LOADING(state, isLoading) {\r\n    state.loading = isLoading;\r\n  },\r\n  SET_ERROR(state, error) {\r\n    state.error = error;\r\n  },\r\n  CLEAR_ERROR(state) {\r\n    state.error = null;\r\n  }\r\n};\r\n\r\nconst actions = {\r\n  // 用户登录\r\n  async login({ commit }, { username, password, remember }) {\r\n    try {\r\n      commit('SET_LOADING', true);\r\n      commit('CLEAR_ERROR');\r\n      \r\n      const response = await login(username, password, remember);\r\n      const { data } = response.data;\r\n      \r\n      commit('SET_TOKEN', data.token);\r\n      commit('SET_USER', {\r\n        userId: data.userId,\r\n        username: data.username\r\n      });\r\n      \r\n      // 存储token和用户信息\r\n      setToken(data.token, data.expiresIn);\r\n      setUser({\r\n        userId: data.userId,\r\n        username: data.username\r\n      });\r\n      \r\n      return Promise.resolve(data);\r\n    } catch (error) {\r\n      commit('SET_ERROR', error.response?.data?.message || '登录失败');\r\n      return Promise.reject(error);\r\n    } finally {\r\n      commit('SET_LOADING', false);\r\n    }\r\n  },\r\n  \r\n  // 用户注册\r\n  async register({ commit }, userInfo) {\r\n    try {\r\n      commit('SET_LOADING', true);\r\n      commit('CLEAR_ERROR');\r\n      \r\n      const response = await register(\r\n        userInfo.username,\r\n        userInfo.email,\r\n        userInfo.password,\r\n        userInfo.confirmPassword\r\n      );\r\n      \r\n      return Promise.resolve(response.data);\r\n    } catch (error) {\r\n      commit('SET_ERROR', error.response?.data?.message || '注册失败');\r\n      return Promise.reject(error);\r\n    } finally {\r\n      commit('SET_LOADING', false);\r\n    }\r\n  },\r\n  \r\n  // 退出登录\r\n  async logout({ commit }) {\r\n    try {\r\n      commit('SET_LOADING', true);\r\n      \r\n      await logout();\r\n      \r\n      // 清除状态\r\n      commit('SET_TOKEN', '');\r\n      commit('SET_USER', null);\r\n      \r\n      // 清除本地存储\r\n      removeToken();\r\n      removeUser();\r\n      \r\n      return Promise.resolve();\r\n    } catch (error) {\r\n      return Promise.reject(error);\r\n    } finally {\r\n      commit('SET_LOADING', false);\r\n    }\r\n  },\r\n  \r\n  // 重置认证状态\r\n  resetAuth({ commit }) {\r\n    commit('SET_TOKEN', '');\r\n    commit('SET_USER', null);\r\n    removeToken();\r\n    removeUser();\r\n  }\r\n};\r\n\r\nconst getters = {\r\n  // 是否已认证\r\n  isAuthenticated: state => !!state.token,\r\n  // 当前用户\r\n  currentUser: state => state.user,\r\n  // 加载状态\r\n  authLoading: state => state.loading,\r\n  // 错误信息\r\n  authError: state => state.error\r\n};\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  mutations,\r\n  actions,\r\n  getters\r\n}; "],"mappings":"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","ignoreList":[]}]}