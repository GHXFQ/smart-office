{"remainingRequest":"C:\\Users\\18083\\Desktop\\CCIT\\office\\o\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\o\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\18083\\Desktop\\CCIT\\office\\o\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\18083\\Desktop\\CCIT\\office\\o\\smart-office\\frontend\\src\\views\\admin\\KnowledgeManagement.vue?vue&type=script&setup=true&lang=js","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\o\\smart-office\\frontend\\src\\views\\admin\\KnowledgeManagement.vue","mtime":1750393064176},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\o\\smart-office\\frontend\\babel.config.js","mtime":1748077811200},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\o\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\o\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\o\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\o\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1746431218000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5ldmVyeS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLnNvbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zZXQuZGlmZmVyZW5jZS52Mi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnNldC5pbnRlcnNlY3Rpb24udjIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zZXQuaXMtZGlzam9pbnQtZnJvbS52Mi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnNldC5pcy1zdWJzZXQtb2YudjIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zZXQuaXMtc3VwZXJzZXQtb2YudjIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zZXQuc3ltbWV0cmljLWRpZmZlcmVuY2UudjIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zZXQudW5pb24udjIuanMiOwppbXBvcnQgeyByZWYsIHJlYWN0aXZlLCBvbk1vdW50ZWQsIGNvbXB1dGVkIH0gZnJvbSAndnVlJzsKaW1wb3J0IGFkbWluQXBpIGZyb20gJ0AvYXBpL2FkbWluJzsKaW1wb3J0IHsgRWxNZXNzYWdlLCBFbE1lc3NhZ2VCb3gsIEVsQ2FyZCwgRWxJY29uLCBFbElucHV0LCBFbEJ1dHRvbiwgRWxUYWJsZSwgRWxUYWJsZUNvbHVtbiwgRWxQYWdpbmF0aW9uLCBFbERpYWxvZywgRWxGb3JtLCBFbEZvcm1JdGVtLCBFbFNlbGVjdCwgRWxPcHRpb24sIEVsVXBsb2FkLCBFbENvbG9yUGlja2VyLCBFbEVtcHR5LCBFbFRvb2x0aXAgfSBmcm9tICdlbGVtZW50LXBsdXMnOwppbXBvcnQgeyBDb2xsZWN0aW9uLCBTZWFyY2gsIFVwbG9hZCwgRWRpdCwgRGVsZXRlLCBQbHVzLCBEb2N1bWVudCwgRm9sZGVyLCBEYXRhQW5hbHlzaXMsIFRyZW5kQ2hhcnRzLCBSZWFkaW5nLCBNYWdpY1N0aWNrLCBMb2FkaW5nLCBSZWZyZXNoIH0gZnJvbSAnQGVsZW1lbnQtcGx1cy9pY29ucy12dWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgX19uYW1lOiAnS25vd2xlZGdlTWFuYWdlbWVudCcsCiAgc2V0dXAoX19wcm9wcywgewogICAgZXhwb3NlOiBfX2V4cG9zZQogIH0pIHsKICAgIF9fZXhwb3NlKCk7CiAgICBjb25zdCBhcnRpY2xlcyA9IHJlZihbXSk7CiAgICBjb25zdCBjYXRlZ29yaWVzID0gcmVmKFtdKTsKICAgIGNvbnN0IGNvbXBhbmllcyA9IHJlZihbXSk7CiAgICBjb25zdCBsb2FkaW5nID0gcmVmKHRydWUpOwogICAgY29uc3Qgc2VhcmNoUXVlcnkgPSByZWYoJycpOwogICAgY29uc3QgdG90YWwgPSByZWYoMCk7CiAgICBjb25zdCBwYWdpbmF0aW9uID0gcmVhY3RpdmUoewogICAgICBwYWdlOiAxLAogICAgICBwYWdlU2l6ZTogMTAKICAgIH0pOwogICAgY29uc3QgaXNDYXRlZ29yeU1vZGFsT3BlbiA9IHJlZihmYWxzZSk7CiAgICBjb25zdCBpc1NpbmdsZUNhdGVnb3J5TW9kYWxPcGVuID0gcmVmKGZhbHNlKTsKICAgIGNvbnN0IGN1cnJlbnRDYXRlZ29yeSA9IHJlZih7fSk7CiAgICBjb25zdCBjYXRlZ29yeUZvcm0gPSByZWYobnVsbCk7CiAgICBjb25zdCBpc0VkaXRpbmdDYXRlZ29yeSA9IGNvbXB1dGVkKCgpID0+ICEhY3VycmVudENhdGVnb3J5LnZhbHVlLmlkKTsKICAgIGNvbnN0IGF2YWlsYWJsZUljb25zID0gW3sKICAgICAgbmFtZTogJ0RvY3VtZW50JywKICAgICAgbGFiZWw6ICfmlofmoaMnLAogICAgICBjb21wb25lbnQ6IERvY3VtZW50CiAgICB9LCB7CiAgICAgIG5hbWU6ICdGb2xkZXInLAogICAgICBsYWJlbDogJ+aWh+S7tuWkuScsCiAgICAgIGNvbXBvbmVudDogRm9sZGVyCiAgICB9LCB7CiAgICAgIG5hbWU6ICdEYXRhQW5hbHlzaXMnLAogICAgICBsYWJlbDogJ+aVsOaNruWIhuaekCcsCiAgICAgIGNvbXBvbmVudDogRGF0YUFuYWx5c2lzCiAgICB9LCB7CiAgICAgIG5hbWU6ICdUcmVuZENoYXJ0cycsCiAgICAgIGxhYmVsOiAn6LaL5Yq/5Zu+JywKICAgICAgY29tcG9uZW50OiBUcmVuZENoYXJ0cwogICAgfSwgewogICAgICBuYW1lOiAnUmVhZGluZycsCiAgICAgIGxhYmVsOiAn6ZiF6K+7JywKICAgICAgY29tcG9uZW50OiBSZWFkaW5nCiAgICB9LCB7CiAgICAgIG5hbWU6ICdNYWdpY1N0aWNrJywKICAgICAgbGFiZWw6ICfprZTmnK/mo5InLAogICAgICBjb21wb25lbnQ6IE1hZ2ljU3RpY2sKICAgIH1dOwogICAgY29uc3QgaXNBcnRpY2xlTW9kYWxPcGVuID0gcmVmKGZhbHNlKTsKICAgIGNvbnN0IGN1cnJlbnRBcnRpY2xlID0gcmVmKHt9KTsKICAgIGNvbnN0IGFydGljbGVGb3JtID0gcmVmKG51bGwpOwogICAgY29uc3QgY29tcGFueUNhdGVnb3JpZXMgPSByZWYoW10pOwogICAgY29uc3QgdXBsb2FkID0gcmVmKG51bGwpOwogICAgY29uc3Qgc2hvd1VwbG9hZCA9IHJlZihmYWxzZSk7CiAgICBjb25zdCBpc0J1aWxkTW9kYWxPcGVuID0gcmVmKGZhbHNlKTsKICAgIGNvbnN0IGJ1aWxkU3RhdHVzZXMgPSByZWYoW10pOwogICAgY29uc3QgaXNCdWlsZFN0YXR1c0xvYWRpbmcgPSByZWYoZmFsc2UpOwogICAgY29uc3Qgc2VsZWN0ZWRDb21wYW55SWRzID0gcmVmKFtdKTsKICAgIGNvbnN0IGJ1aWxkaW5nQ29tcGFueUlkcyA9IHJlZihuZXcgU2V0KCkpOwogICAgbGV0IHN0YXR1c1BvbGxJbnRlcnZhbCA9IG51bGw7CiAgICBsZXQgc2VhcmNoVGltZW91dCA9IG51bGw7CiAgICBjb25zdCBmZXRjaENhdGVnb3JpZXMgPSBhc3luYyAoKSA9PiB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhZG1pbkFwaS5nZXRLbm93bGVkZ2VDYXRlZ29yaWVzKHsKICAgICAgICAgIGFsbDogJ3RydWUnCiAgICAgICAgfSk7CiAgICAgICAgY2F0ZWdvcmllcy52YWx1ZSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfojrflj5bliIbnsbvliJfooajlpLHotKUnKTsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IGZldGNoQ29tcGFuaWVzID0gYXN5bmMgKCkgPT4gewogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYWRtaW5BcGkuZ2V0Q29tcGFuaWVzKHsKICAgICAgICAgIGFsbDogJ3RydWUnCiAgICAgICAgfSk7CiAgICAgICAgY29tcGFuaWVzLnZhbHVlID0gcmVzcG9uc2UuZGF0YTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+iOt+WPluWFrOWPuOWIl+ihqOWksei0pScpOwogICAgICB9CiAgICB9OwogICAgY29uc3Qgb3BlbkNhdGVnb3J5TW9kYWwgPSBhc3luYyAoKSA9PiB7CiAgICAgIGF3YWl0IGZldGNoQ29tcGFuaWVzKCk7CiAgICAgIGF3YWl0IGZldGNoQ2F0ZWdvcmllcygpOwogICAgICByZXNldENhdGVnb3J5Rm9ybSgpOwogICAgICBpc0NhdGVnb3J5TW9kYWxPcGVuLnZhbHVlID0gdHJ1ZTsKICAgIH07CiAgICBjb25zdCBjbG9zZVNpbmdsZUNhdGVnb3J5TW9kYWwgPSAoKSA9PiB7CiAgICAgIHZhciBfY2F0ZWdvcnlGb3JtJHZhbHVlOwogICAgICBpc1NpbmdsZUNhdGVnb3J5TW9kYWxPcGVuLnZhbHVlID0gZmFsc2U7CiAgICAgIGN1cnJlbnRDYXRlZ29yeS52YWx1ZSA9IHt9OwogICAgICAoX2NhdGVnb3J5Rm9ybSR2YWx1ZSA9IGNhdGVnb3J5Rm9ybS52YWx1ZSkgPT09IG51bGwgfHwgX2NhdGVnb3J5Rm9ybSR2YWx1ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NhdGVnb3J5Rm9ybSR2YWx1ZS5yZXNldEZpZWxkcygpOwogICAgfTsKICAgIGNvbnN0IHJlc2V0Q2F0ZWdvcnlGb3JtID0gKCkgPT4gewogICAgICB2YXIgX2NhdGVnb3J5Rm9ybSR2YWx1ZTI7CiAgICAgIGN1cnJlbnRDYXRlZ29yeS52YWx1ZSA9IHsKICAgICAgICBpZDogbnVsbCwKICAgICAgICBuYW1lOiAnJywKICAgICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgICAgaWNvbjogJ0RvY3VtZW50JywKICAgICAgICBjb2xvcjogJyM0MDlFRkYnLAogICAgICAgIGNvbXBhbnk6IG51bGwKICAgICAgfTsKICAgICAgKF9jYXRlZ29yeUZvcm0kdmFsdWUyID0gY2F0ZWdvcnlGb3JtLnZhbHVlKSA9PT0gbnVsbCB8fCBfY2F0ZWdvcnlGb3JtJHZhbHVlMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NhdGVnb3J5Rm9ybSR2YWx1ZTIucmVzZXRGaWVsZHMoKTsKICAgIH07CiAgICBjb25zdCBzZWxlY3RDYXRlZ29yeUZvckVkaXQgPSBjYXRlZ29yeSA9PiB7CiAgICAgIGN1cnJlbnRDYXRlZ29yeS52YWx1ZSA9IHsKICAgICAgICAuLi5jYXRlZ29yeQogICAgICB9OwogICAgfTsKICAgIGNvbnN0IHNhdmVDYXRlZ29yeSA9IGFzeW5jICgpID0+IHsKICAgICAgdHJ5IHsKICAgICAgICBpZiAoY3VycmVudENhdGVnb3J5LnZhbHVlLmlkKSB7CiAgICAgICAgICBhd2FpdCBhZG1pbkFwaS51cGRhdGVLbm93bGVkZ2VDYXRlZ29yeShjdXJyZW50Q2F0ZWdvcnkudmFsdWUuaWQsIGN1cnJlbnRDYXRlZ29yeS52YWx1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGF3YWl0IGFkbWluQXBpLmNyZWF0ZUtub3dsZWRnZUNhdGVnb3J5KGN1cnJlbnRDYXRlZ29yeS52YWx1ZSk7CiAgICAgICAgfQogICAgICAgIEVsTWVzc2FnZS5zdWNjZXNzKCfliIbnsbvkv53lrZjmiJDlip8nKTsKICAgICAgICBjbG9zZVNpbmdsZUNhdGVnb3J5TW9kYWwoKTsKICAgICAgICBmZXRjaENhdGVnb3JpZXMoKTsgLy8gUmVmcmVzaCBsaXN0IGluIHRoZSBiYWNrZ3JvdW5kCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfkv53lrZjliIbnsbvlpLHotKUnKTsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IGNvbmZpcm1EZWxldGVDYXRlZ29yeSA9IGNhdGVnb3J5ID0+IHsKICAgICAgRWxNZXNzYWdlQm94LmNvbmZpcm0oYOehruWumuimgeWIoOmZpOWIhuexuyAiJHtjYXRlZ29yeS5uYW1lfSIg5ZCXP2AsICforablkYonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKGFzeW5jICgpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgYXdhaXQgYWRtaW5BcGkuZGVsZXRlS25vd2xlZGdlQ2F0ZWdvcnkoY2F0ZWdvcnkuaWQpOwogICAgICAgICAgRWxNZXNzYWdlLnN1Y2Nlc3MoJ+WIhuexu+WIoOmZpOaIkOWKnycpOwogICAgICAgICAgZmV0Y2hDYXRlZ29yaWVzKCk7IC8vIFJlZnJlc2ggbGlzdAogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+WIoOmZpOWIhuexu+Wksei0pScpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9OwogICAgY29uc3QgZGVib3VuY2VkRmV0Y2hBcnRpY2xlcyA9ICgpID0+IHsKICAgICAgY2xlYXJUaW1lb3V0KHNlYXJjaFRpbWVvdXQpOwogICAgICBzZWFyY2hUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgcGFnaW5hdGlvbi5wYWdlID0gMTsKICAgICAgICBmZXRjaEFydGljbGVzKCk7CiAgICAgIH0sIDMwMCk7CiAgICB9OwogICAgY29uc3QgZmV0Y2hBcnRpY2xlcyA9IGFzeW5jICgpID0+IHsKICAgICAgbG9hZGluZy52YWx1ZSA9IHRydWU7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcGFyYW1zID0gewogICAgICAgICAgcGFnZTogcGFnaW5hdGlvbi5wYWdlLAogICAgICAgICAgc2l6ZTogcGFnaW5hdGlvbi5wYWdlU2l6ZSwKICAgICAgICAgIHNlYXJjaDogc2VhcmNoUXVlcnkudmFsdWUKICAgICAgICB9OwogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYWRtaW5BcGkuZ2V0S25vd2xlZGdlQmFzZXMocGFyYW1zKTsKICAgICAgICBhcnRpY2xlcy52YWx1ZSA9IHJlc3BvbnNlLmRhdGEucmVzdWx0czsKICAgICAgICB0b3RhbC52YWx1ZSA9IHJlc3BvbnNlLmRhdGEuY291bnQ7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfojrflj5bmlofnq6DliJfooajlpLHotKUnKTsKICAgICAgICBhcnRpY2xlcy52YWx1ZSA9IFtdOwogICAgICAgIHRvdGFsLnZhbHVlID0gMDsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBsb2FkaW5nLnZhbHVlID0gZmFsc2U7CiAgICAgIH0KICAgIH07CiAgICBjb25zdCBvcGVuQXJ0aWNsZU1vZGFsID0gYXN5bmMgKGFydGljbGUgPSB7fSkgPT4gewogICAgICBhd2FpdCBmZXRjaENvbXBhbmllcygpOwogICAgICBjdXJyZW50QXJ0aWNsZS52YWx1ZSA9IHsKICAgICAgICAuLi5hcnRpY2xlCiAgICAgIH07CiAgICAgIGlmIChhcnRpY2xlLmlkKSB7CiAgICAgICAgc2hvd1VwbG9hZC52YWx1ZSA9IGZhbHNlOyAvLyDnvJbovpHmqKHlvI/kuIvvvIzpu5jorqTkuI3mmL7npLrkuIrkvKDnu4Tku7YKICAgICAgfSBlbHNlIHsKICAgICAgICBzaG93VXBsb2FkLnZhbHVlID0gdHJ1ZTsgLy8g5paw5bu65qih5byP5LiL77yM55u05o6l5pi+56S65LiK5Lyg57uE5Lu2CiAgICAgIH0KICAgICAgaWYgKGN1cnJlbnRBcnRpY2xlLnZhbHVlLmNvbXBhbnkpIHsKICAgICAgICBhd2FpdCBmZXRjaENhdGVnb3JpZXNGb3JDb21wYW55KGN1cnJlbnRBcnRpY2xlLnZhbHVlLmNvbXBhbnkpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbXBhbnlDYXRlZ29yaWVzLnZhbHVlID0gW107CiAgICAgIH0KICAgICAgaXNBcnRpY2xlTW9kYWxPcGVuLnZhbHVlID0gdHJ1ZTsKICAgIH07CiAgICBjb25zdCBjbG9zZUFydGljbGVNb2RhbCA9ICgpID0+IHsKICAgICAgdmFyIF91cGxvYWQkdmFsdWUsIF9hcnRpY2xlRm9ybSR2YWx1ZTsKICAgICAgaXNBcnRpY2xlTW9kYWxPcGVuLnZhbHVlID0gZmFsc2U7CiAgICAgIGN1cnJlbnRBcnRpY2xlLnZhbHVlID0ge307CiAgICAgIGNvbXBhbnlDYXRlZ29yaWVzLnZhbHVlID0gW107CiAgICAgIChfdXBsb2FkJHZhbHVlID0gdXBsb2FkLnZhbHVlKSA9PT0gbnVsbCB8fCBfdXBsb2FkJHZhbHVlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdXBsb2FkJHZhbHVlLmNsZWFyRmlsZXMoKTsKICAgICAgKF9hcnRpY2xlRm9ybSR2YWx1ZSA9IGFydGljbGVGb3JtLnZhbHVlKSA9PT0gbnVsbCB8fCBfYXJ0aWNsZUZvcm0kdmFsdWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hcnRpY2xlRm9ybSR2YWx1ZS5yZXNldEZpZWxkcygpOwogICAgfTsKICAgIGNvbnN0IHNhdmVBcnRpY2xlID0gYXN5bmMgKCkgPT4gewogICAgICB0cnkgewogICAgICAgIGNvbnN0IGRhdGFUb1NhdmUgPSB7CiAgICAgICAgICAuLi5jdXJyZW50QXJ0aWNsZS52YWx1ZQogICAgICAgIH07CiAgICAgICAgaWYgKCFkYXRhVG9TYXZlLmlkICYmICFkYXRhVG9TYXZlLm9yaWdpbmFsX2ZpbGUpIHsKICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcign6K+36YCJ5oup5LiA5Liq5paH5Lu25LiK5LygJyk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGlmIChkYXRhVG9TYXZlLmlkKSB7CiAgICAgICAgICBhd2FpdCBhZG1pbkFwaS51cGRhdGVLbm93bGVkZ2VCYXNlKGRhdGFUb1NhdmUuaWQsIGRhdGFUb1NhdmUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhd2FpdCBhZG1pbkFwaS5jcmVhdGVLbm93bGVkZ2VCYXNlKGRhdGFUb1NhdmUpOwogICAgICAgIH0KICAgICAgICBFbE1lc3NhZ2Uuc3VjY2Vzcygn5paH5Lu25L+h5oGv5L+d5a2Y5oiQ5YqfJyk7CiAgICAgICAgY2xvc2VBcnRpY2xlTW9kYWwoKTsKICAgICAgICBmZXRjaEFydGljbGVzKCk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgdmFyIF9lcnJvciRyZXNwb25zZTsKICAgICAgICBjb25zdCBlcnJvck1zZyA9IChfZXJyb3IkcmVzcG9uc2UgPSBlcnJvci5yZXNwb25zZSkgIT09IG51bGwgJiYgX2Vycm9yJHJlc3BvbnNlICE9PSB2b2lkIDAgJiYgX2Vycm9yJHJlc3BvbnNlLmRhdGEgPyBKU09OLnN0cmluZ2lmeShlcnJvci5yZXNwb25zZS5kYXRhKSA6ICfkv53lrZjmlofku7bkv6Hmga/lpLHotKUnOwogICAgICAgIEVsTWVzc2FnZS5lcnJvcihlcnJvck1zZyk7CiAgICAgIH0KICAgIH07CiAgICBjb25zdCBjb25maXJtRGVsZXRlQXJ0aWNsZSA9IGFydGljbGUgPT4gewogICAgICBFbE1lc3NhZ2VCb3guY29uZmlybShg56Gu5a6a6KaB5Yig6Zmk5paH5Lu2ICIke2FydGljbGUudGl0bGV9IiDlkJc/IOi/meWwhuS4gOW5tuWIoOmZpOWFs+iBlOeahOaWh+S7tuWSjOaVsOaNruOAgmAsICforablkYonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKGFzeW5jICgpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgYXdhaXQgYWRtaW5BcGkuZGVsZXRlS25vd2xlZGdlQmFzZShhcnRpY2xlLmlkKTsKICAgICAgICAgIEVsTWVzc2FnZS5zdWNjZXNzKCfmlofku7bliKDpmaTmiJDlip8nKTsKICAgICAgICAgIGZldGNoQXJ0aWNsZXMoKTsgLy8gUmVmcmVzaCBsaXN0CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcign5Yig6Zmk5paH5Lu25aSx6LSlJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH07CiAgICBjb25zdCBoYW5kbGVQYWdlQ2hhbmdlID0gbmV3UGFnZSA9PiB7CiAgICAgIHBhZ2luYXRpb24ucGFnZSA9IG5ld1BhZ2U7CiAgICAgIGZldGNoQXJ0aWNsZXMoKTsKICAgIH07CiAgICBjb25zdCBoYW5kbGVDb21wYW55Q2hhbmdlID0gYXN5bmMgY29tcGFueUlkID0+IHsKICAgICAgY3VycmVudEFydGljbGUudmFsdWUuY2F0ZWdvcnkgPSBudWxsOwogICAgICBjb21wYW55Q2F0ZWdvcmllcy52YWx1ZSA9IFtdOwogICAgICBpZiAoY29tcGFueUlkKSB7CiAgICAgICAgYXdhaXQgZmV0Y2hDYXRlZ29yaWVzRm9yQ29tcGFueShjb21wYW55SWQpOwogICAgICB9CiAgICB9OwogICAgY29uc3QgZmV0Y2hDYXRlZ29yaWVzRm9yQ29tcGFueSA9IGFzeW5jIGNvbXBhbnlJZCA9PiB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhZG1pbkFwaS5nZXRLbm93bGVkZ2VDYXRlZ29yaWVzKHsKICAgICAgICAgIGFsbDogJ3RydWUnLAogICAgICAgICAgY29tcGFueV9pZDogY29tcGFueUlkCiAgICAgICAgfSk7CiAgICAgICAgY29tcGFueUNhdGVnb3JpZXMudmFsdWUgPSByZXNwb25zZS5kYXRhOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIEVsTWVzc2FnZS5lcnJvcign6I635Y+W6K+l5YWs5Y+45LiL55qE5YiG57G75aSx6LSlJyk7CiAgICAgIH0KICAgIH07CiAgICBjb25zdCBoYW5kbGVGaWxlQ2hhbmdlID0gZmlsZSA9PiB7CiAgICAgIGN1cnJlbnRBcnRpY2xlLnZhbHVlLm9yaWdpbmFsX2ZpbGUgPSBmaWxlLnJhdzsKICAgIH07CiAgICBjb25zdCBoYW5kbGVGaWxlUmVtb3ZlID0gKCkgPT4gewogICAgICBjdXJyZW50QXJ0aWNsZS52YWx1ZS5vcmlnaW5hbF9maWxlID0gbnVsbDsKICAgIH07CiAgICBjb25zdCBvcGVuQnVpbGRNb2RhbCA9ICgpID0+IHsKICAgICAgaXNCdWlsZE1vZGFsT3Blbi52YWx1ZSA9IHRydWU7CiAgICAgIGZldGNoQnVpbGRTdGF0dXNlcygpOwogICAgfTsKICAgIGNvbnN0IGZldGNoQnVpbGRTdGF0dXNlcyA9IGFzeW5jICgpID0+IHsKICAgICAgaXNCdWlsZFN0YXR1c0xvYWRpbmcudmFsdWUgPSB0cnVlOwogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYWRtaW5BcGkuZ2V0S25vd2xlZGdlQnVpbGRTdGF0dXMoKTsKICAgICAgICBidWlsZFN0YXR1c2VzLnZhbHVlID0gcmVzcG9uc2UuZGF0YTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+iOt+WPluaehOW7uueKtuaAgeWksei0pScpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIGlzQnVpbGRTdGF0dXNMb2FkaW5nLnZhbHVlID0gZmFsc2U7CiAgICAgIH0KICAgIH07CiAgICBjb25zdCBoYW5kbGVTZWxlY3Rpb25DaGFuZ2UgPSBzZWxlY3Rpb24gPT4gewogICAgICBzZWxlY3RlZENvbXBhbnlJZHMudmFsdWUgPSBzZWxlY3Rpb24ubWFwKGl0ZW0gPT4gaXRlbS5jb21wYW55X2lkKTsKICAgIH07CiAgICBjb25zdCB0cmlnZ2VyQnVpbGRGb3JDb21wYW5pZXMgPSBhc3luYyBjb21wYW55SWRzID0+IHsKICAgICAgaWYgKGNvbXBhbnlJZHMubGVuZ3RoID09PSAwKSByZXR1cm47CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhZG1pbkFwaS5idWlsZEtub3dsZWRnZUZvckNvbXBhbmllcyhjb21wYW55SWRzKTsKICAgICAgICBFbE1lc3NhZ2Uuc3VjY2VzcyhyZXNwb25zZS5kYXRhLm1lc3NhZ2UgfHwgJ+aehOW7uuS7u+WKoeW3suWQr+WKqCcpOwogICAgICAgIGNvbXBhbnlJZHMuZm9yRWFjaChpZCA9PiBidWlsZGluZ0NvbXBhbnlJZHMudmFsdWUuYWRkKGlkKSk7CiAgICAgICAgZmV0Y2hCdWlsZFN0YXR1c2VzKCk7CiAgICAgICAgc3RhcnRTdGF0dXNQb2xsaW5nKCk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgRWxNZXNzYWdlLmVycm9yKCflkK/liqjmnoTlu7rku7vliqHlpLHotKUnKTsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IHN0YXJ0U3RhdHVzUG9sbGluZyA9ICgpID0+IHsKICAgICAgaWYgKHN0YXR1c1BvbGxJbnRlcnZhbCkgcmV0dXJuOyAvLyDpgb/lhY3ph43lpI3lkK/liqgKICAgICAgc3RhdHVzUG9sbEludGVydmFsID0gc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4gewogICAgICAgIGF3YWl0IGZldGNoQnVpbGRTdGF0dXNlcygpOwogICAgICAgIC8vIOajgOafpeaYr+WQpuacieS7jeWcqOWkhOeQhuS4reeahOaehOW7ugogICAgICAgIGNvbnN0IHN0aWxsUHJvY2Vzc2luZyA9IGJ1aWxkU3RhdHVzZXMudmFsdWUuc29tZShzID0+IHMuc3RhdHVzID09PSAncHJvY2Vzc2luZycgfHwgcy5zdGF0dXMgPT09ICdwZW5kaW5nJyk7CiAgICAgICAgaWYgKCFzdGlsbFByb2Nlc3NpbmcpIHsKICAgICAgICAgIHN0b3BTdGF0dXNQb2xsaW5nKCk7CiAgICAgICAgICBidWlsZGluZ0NvbXBhbnlJZHMudmFsdWUuY2xlYXIoKTsKICAgICAgICAgIEVsTWVzc2FnZS5pbmZvKCfmiYDmnInmnoTlu7rku7vliqHlt7LlrozmiJDjgIInKTsKICAgICAgICB9CiAgICAgIH0sIDUwMDApOyAvLyDmr48156eS6L2u6K+i5LiA5qyhCiAgICB9OwogICAgY29uc3Qgc3RvcFN0YXR1c1BvbGxpbmcgPSAoKSA9PiB7CiAgICAgIGlmIChzdGF0dXNQb2xsSW50ZXJ2YWwpIHsKICAgICAgICBjbGVhckludGVydmFsKHN0YXR1c1BvbGxJbnRlcnZhbCk7CiAgICAgICAgc3RhdHVzUG9sbEludGVydmFsID0gbnVsbDsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IGdldFN0YXR1c1RhZ1R5cGUgPSBzdGF0dXMgPT4gewogICAgICBzd2l0Y2ggKHN0YXR1cykgewogICAgICAgIGNhc2UgJ2NvbXBsZXRlZCc6CiAgICAgICAgICByZXR1cm4gJ3N1Y2Nlc3MnOwogICAgICAgIGNhc2UgJ3Byb2Nlc3NpbmcnOgogICAgICAgICAgcmV0dXJuICdwcmltYXJ5JzsKICAgICAgICBjYXNlICdwZW5kaW5nJzoKICAgICAgICAgIHJldHVybiAnd2FybmluZyc7CiAgICAgICAgY2FzZSAnZmFpbGVkJzoKICAgICAgICAgIHJldHVybiAnZGFuZ2VyJzsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmV0dXJuICdpbmZvJzsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IGdldFN0YXR1c1RleHQgPSBzdGF0dXMgPT4gewogICAgICBjb25zdCBtYXAgPSB7CiAgICAgICAgJ2NvbXBsZXRlZCc6ICfmiJDlip8nLAogICAgICAgICdwcm9jZXNzaW5nJzogJ+aehOW7uuS4rScsCiAgICAgICAgJ3BlbmRpbmcnOiAn562J5b6F5LitJywKICAgICAgICAnZmFpbGVkJzogJ+Wksei0pScsCiAgICAgICAgJ25vdF9idWlsdCc6ICfmnKrmnoTlu7onCiAgICAgIH07CiAgICAgIHJldHVybiBtYXBbc3RhdHVzXSB8fCAn5pyq55+lJzsKICAgIH07CiAgICBjb25zdCBpc0NvbXBhbnlCdWlsZGluZyA9IGNvbXBhbnlJZCA9PiB7CiAgICAgIHZhciBfYnVpbGRTdGF0dXNlcyR2YWx1ZSQ7CiAgICAgIGNvbnN0IHN0YXR1cyA9IChfYnVpbGRTdGF0dXNlcyR2YWx1ZSQgPSBidWlsZFN0YXR1c2VzLnZhbHVlLmZpbmQocyA9PiBzLmNvbXBhbnlfaWQgPT09IGNvbXBhbnlJZCkpID09PSBudWxsIHx8IF9idWlsZFN0YXR1c2VzJHZhbHVlJCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2J1aWxkU3RhdHVzZXMkdmFsdWUkLnN0YXR1czsKICAgICAgcmV0dXJuIHN0YXR1cyA9PT0gJ3Byb2Nlc3NpbmcnIHx8IHN0YXR1cyA9PT0gJ3BlbmRpbmcnOwogICAgfTsKICAgIGNvbnN0IGlzQW55Q29tcGFueUJ1aWxkaW5nID0gY29tcGFueUlkcyA9PiB7CiAgICAgIC8vIOWinuWKoOS4gOS4quajgOafpe+8jOehruS/neaJgOmAieeahOWFrOWPuOmDveacieaWh+S7tgogICAgICBjb25zdCBoYXNGaWxlcyA9IGNvbXBhbnlJZHMuZXZlcnkoaWQgPT4gewogICAgICAgIGNvbnN0IGNvbXBhbnkgPSBidWlsZFN0YXR1c2VzLnZhbHVlLmZpbmQocyA9PiBzLmNvbXBhbnlfaWQgPT09IGlkKTsKICAgICAgICByZXR1cm4gY29tcGFueSAmJiBjb21wYW55LmZpbGVfY291bnQgPiAwOwogICAgICB9KTsKICAgICAgaWYgKCFoYXNGaWxlcykgcmV0dXJuIHRydWU7CiAgICAgIHJldHVybiBjb21wYW55SWRzLnNvbWUoaWQgPT4gaXNDb21wYW55QnVpbGRpbmcoaWQpKTsKICAgIH07CiAgICBjb25zdCBpc0NvbXBhbnlTZWxlY3RhYmxlID0gcm93ID0+IHsKICAgICAgcmV0dXJuIHJvdy5maWxlX2NvdW50ID4gMDsKICAgIH07CiAgICBvbk1vdW50ZWQoKCkgPT4gewogICAgICAvLyBpbml0aWFsIGZldGNoCiAgICAgIGZldGNoQXJ0aWNsZXMoKTsKICAgIH0pOwogICAgY29uc3QgX19yZXR1cm5lZF9fID0gewogICAgICBhcnRpY2xlcywKICAgICAgY2F0ZWdvcmllcywKICAgICAgY29tcGFuaWVzLAogICAgICBsb2FkaW5nLAogICAgICBzZWFyY2hRdWVyeSwKICAgICAgdG90YWwsCiAgICAgIHBhZ2luYXRpb24sCiAgICAgIGlzQ2F0ZWdvcnlNb2RhbE9wZW4sCiAgICAgIGlzU2luZ2xlQ2F0ZWdvcnlNb2RhbE9wZW4sCiAgICAgIGN1cnJlbnRDYXRlZ29yeSwKICAgICAgY2F0ZWdvcnlGb3JtLAogICAgICBpc0VkaXRpbmdDYXRlZ29yeSwKICAgICAgYXZhaWxhYmxlSWNvbnMsCiAgICAgIGlzQXJ0aWNsZU1vZGFsT3BlbiwKICAgICAgY3VycmVudEFydGljbGUsCiAgICAgIGFydGljbGVGb3JtLAogICAgICBjb21wYW55Q2F0ZWdvcmllcywKICAgICAgdXBsb2FkLAogICAgICBzaG93VXBsb2FkLAogICAgICBpc0J1aWxkTW9kYWxPcGVuLAogICAgICBidWlsZFN0YXR1c2VzLAogICAgICBpc0J1aWxkU3RhdHVzTG9hZGluZywKICAgICAgc2VsZWN0ZWRDb21wYW55SWRzLAogICAgICBidWlsZGluZ0NvbXBhbnlJZHMsCiAgICAgIGdldCBzdGF0dXNQb2xsSW50ZXJ2YWwoKSB7CiAgICAgICAgcmV0dXJuIHN0YXR1c1BvbGxJbnRlcnZhbDsKICAgICAgfSwKICAgICAgc2V0IHN0YXR1c1BvbGxJbnRlcnZhbCh2KSB7CiAgICAgICAgc3RhdHVzUG9sbEludGVydmFsID0gdjsKICAgICAgfSwKICAgICAgZ2V0IHNlYXJjaFRpbWVvdXQoKSB7CiAgICAgICAgcmV0dXJuIHNlYXJjaFRpbWVvdXQ7CiAgICAgIH0sCiAgICAgIHNldCBzZWFyY2hUaW1lb3V0KHYpIHsKICAgICAgICBzZWFyY2hUaW1lb3V0ID0gdjsKICAgICAgfSwKICAgICAgZmV0Y2hDYXRlZ29yaWVzLAogICAgICBmZXRjaENvbXBhbmllcywKICAgICAgb3BlbkNhdGVnb3J5TW9kYWwsCiAgICAgIGNsb3NlU2luZ2xlQ2F0ZWdvcnlNb2RhbCwKICAgICAgcmVzZXRDYXRlZ29yeUZvcm0sCiAgICAgIHNlbGVjdENhdGVnb3J5Rm9yRWRpdCwKICAgICAgc2F2ZUNhdGVnb3J5LAogICAgICBjb25maXJtRGVsZXRlQ2F0ZWdvcnksCiAgICAgIGRlYm91bmNlZEZldGNoQXJ0aWNsZXMsCiAgICAgIGZldGNoQXJ0aWNsZXMsCiAgICAgIG9wZW5BcnRpY2xlTW9kYWwsCiAgICAgIGNsb3NlQXJ0aWNsZU1vZGFsLAogICAgICBzYXZlQXJ0aWNsZSwKICAgICAgY29uZmlybURlbGV0ZUFydGljbGUsCiAgICAgIGhhbmRsZVBhZ2VDaGFuZ2UsCiAgICAgIGhhbmRsZUNvbXBhbnlDaGFuZ2UsCiAgICAgIGZldGNoQ2F0ZWdvcmllc0ZvckNvbXBhbnksCiAgICAgIGhhbmRsZUZpbGVDaGFuZ2UsCiAgICAgIGhhbmRsZUZpbGVSZW1vdmUsCiAgICAgIG9wZW5CdWlsZE1vZGFsLAogICAgICBmZXRjaEJ1aWxkU3RhdHVzZXMsCiAgICAgIGhhbmRsZVNlbGVjdGlvbkNoYW5nZSwKICAgICAgdHJpZ2dlckJ1aWxkRm9yQ29tcGFuaWVzLAogICAgICBzdGFydFN0YXR1c1BvbGxpbmcsCiAgICAgIHN0b3BTdGF0dXNQb2xsaW5nLAogICAgICBnZXRTdGF0dXNUYWdUeXBlLAogICAgICBnZXRTdGF0dXNUZXh0LAogICAgICBpc0NvbXBhbnlCdWlsZGluZywKICAgICAgaXNBbnlDb21wYW55QnVpbGRpbmcsCiAgICAgIGlzQ29tcGFueVNlbGVjdGFibGUsCiAgICAgIHJlZiwKICAgICAgcmVhY3RpdmUsCiAgICAgIG9uTW91bnRlZCwKICAgICAgY29tcHV0ZWQsCiAgICAgIGdldCBhZG1pbkFwaSgpIHsKICAgICAgICByZXR1cm4gYWRtaW5BcGk7CiAgICAgIH0sCiAgICAgIGdldCBFbE1lc3NhZ2UoKSB7CiAgICAgICAgcmV0dXJuIEVsTWVzc2FnZTsKICAgICAgfSwKICAgICAgZ2V0IEVsTWVzc2FnZUJveCgpIHsKICAgICAgICByZXR1cm4gRWxNZXNzYWdlQm94OwogICAgICB9LAogICAgICBnZXQgRWxDYXJkKCkgewogICAgICAgIHJldHVybiBFbENhcmQ7CiAgICAgIH0sCiAgICAgIGdldCBFbEljb24oKSB7CiAgICAgICAgcmV0dXJuIEVsSWNvbjsKICAgICAgfSwKICAgICAgZ2V0IEVsSW5wdXQoKSB7CiAgICAgICAgcmV0dXJuIEVsSW5wdXQ7CiAgICAgIH0sCiAgICAgIGdldCBFbEJ1dHRvbigpIHsKICAgICAgICByZXR1cm4gRWxCdXR0b247CiAgICAgIH0sCiAgICAgIGdldCBFbFRhYmxlKCkgewogICAgICAgIHJldHVybiBFbFRhYmxlOwogICAgICB9LAogICAgICBnZXQgRWxUYWJsZUNvbHVtbigpIHsKICAgICAgICByZXR1cm4gRWxUYWJsZUNvbHVtbjsKICAgICAgfSwKICAgICAgZ2V0IEVsUGFnaW5hdGlvbigpIHsKICAgICAgICByZXR1cm4gRWxQYWdpbmF0aW9uOwogICAgICB9LAogICAgICBnZXQgRWxEaWFsb2coKSB7CiAgICAgICAgcmV0dXJuIEVsRGlhbG9nOwogICAgICB9LAogICAgICBnZXQgRWxGb3JtKCkgewogICAgICAgIHJldHVybiBFbEZvcm07CiAgICAgIH0sCiAgICAgIGdldCBFbEZvcm1JdGVtKCkgewogICAgICAgIHJldHVybiBFbEZvcm1JdGVtOwogICAgICB9LAogICAgICBnZXQgRWxTZWxlY3QoKSB7CiAgICAgICAgcmV0dXJuIEVsU2VsZWN0OwogICAgICB9LAogICAgICBnZXQgRWxPcHRpb24oKSB7CiAgICAgICAgcmV0dXJuIEVsT3B0aW9uOwogICAgICB9LAogICAgICBnZXQgRWxVcGxvYWQoKSB7CiAgICAgICAgcmV0dXJuIEVsVXBsb2FkOwogICAgICB9LAogICAgICBnZXQgRWxDb2xvclBpY2tlcigpIHsKICAgICAgICByZXR1cm4gRWxDb2xvclBpY2tlcjsKICAgICAgfSwKICAgICAgZ2V0IEVsRW1wdHkoKSB7CiAgICAgICAgcmV0dXJuIEVsRW1wdHk7CiAgICAgIH0sCiAgICAgIGdldCBFbFRvb2x0aXAoKSB7CiAgICAgICAgcmV0dXJuIEVsVG9vbHRpcDsKICAgICAgfSwKICAgICAgZ2V0IENvbGxlY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIENvbGxlY3Rpb247CiAgICAgIH0sCiAgICAgIGdldCBTZWFyY2goKSB7CiAgICAgICAgcmV0dXJuIFNlYXJjaDsKICAgICAgfSwKICAgICAgZ2V0IFVwbG9hZCgpIHsKICAgICAgICByZXR1cm4gVXBsb2FkOwogICAgICB9LAogICAgICBnZXQgRWRpdCgpIHsKICAgICAgICByZXR1cm4gRWRpdDsKICAgICAgfSwKICAgICAgZ2V0IERlbGV0ZSgpIHsKICAgICAgICByZXR1cm4gRGVsZXRlOwogICAgICB9LAogICAgICBnZXQgUGx1cygpIHsKICAgICAgICByZXR1cm4gUGx1czsKICAgICAgfSwKICAgICAgZ2V0IERvY3VtZW50KCkgewogICAgICAgIHJldHVybiBEb2N1bWVudDsKICAgICAgfSwKICAgICAgZ2V0IEZvbGRlcigpIHsKICAgICAgICByZXR1cm4gRm9sZGVyOwogICAgICB9LAogICAgICBnZXQgRGF0YUFuYWx5c2lzKCkgewogICAgICAgIHJldHVybiBEYXRhQW5hbHlzaXM7CiAgICAgIH0sCiAgICAgIGdldCBUcmVuZENoYXJ0cygpIHsKICAgICAgICByZXR1cm4gVHJlbmRDaGFydHM7CiAgICAgIH0sCiAgICAgIGdldCBSZWFkaW5nKCkgewogICAgICAgIHJldHVybiBSZWFkaW5nOwogICAgICB9LAogICAgICBnZXQgTWFnaWNTdGljaygpIHsKICAgICAgICByZXR1cm4gTWFnaWNTdGljazsKICAgICAgfSwKICAgICAgZ2V0IExvYWRpbmcoKSB7CiAgICAgICAgcmV0dXJuIExvYWRpbmc7CiAgICAgIH0sCiAgICAgIGdldCBSZWZyZXNoKCkgewogICAgICAgIHJldHVybiBSZWZyZXNoOwogICAgICB9CiAgICB9OwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9fcmV0dXJuZWRfXywgJ19faXNTY3JpcHRTZXR1cCcsIHsKICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgIHZhbHVlOiB0cnVlCiAgICB9KTsKICAgIHJldHVybiBfX3JldHVybmVkX187CiAgfQp9Ow=="},{"version":3,"names":["ref","reactive","onMounted","computed","adminApi","ElMessage","ElMessageBox","ElCard","ElIcon","ElInput","ElButton","ElTable","ElTableColumn","ElPagination","ElDialog","ElForm","ElFormItem","ElSelect","ElOption","ElUpload","ElColorPicker","ElEmpty","ElTooltip","Collection","Search","Upload","Edit","Delete","Plus","Document","Folder","DataAnalysis","TrendCharts","Reading","MagicStick","Loading","Refresh","articles","categories","companies","loading","searchQuery","total","pagination","page","pageSize","isCategoryModalOpen","isSingleCategoryModalOpen","currentCategory","categoryForm","isEditingCategory","value","id","availableIcons","name","label","component","isArticleModalOpen","currentArticle","articleForm","companyCategories","upload","showUpload","isBuildModalOpen","buildStatuses","isBuildStatusLoading","selectedCompanyIds","buildingCompanyIds","Set","statusPollInterval","searchTimeout","fetchCategories","response","getKnowledgeCategories","all","data","error","fetchCompanies","getCompanies","openCategoryModal","resetCategoryForm","closeSingleCategoryModal","_categoryForm$value","resetFields","_categoryForm$value2","description","icon","color","company","selectCategoryForEdit","category","saveCategory","updateKnowledgeCategory","createKnowledgeCategory","success","confirmDeleteCategory","confirm","confirmButtonText","cancelButtonText","type","then","deleteKnowledgeCategory","debouncedFetchArticles","clearTimeout","setTimeout","fetchArticles","params","size","search","getKnowledgeBases","results","count","openArticleModal","article","fetchCategoriesForCompany","closeArticleModal","_upload$value","_articleForm$value","clearFiles","saveArticle","dataToSave","original_file","updateKnowledgeBase","createKnowledgeBase","_error$response","errorMsg","JSON","stringify","confirmDeleteArticle","title","deleteKnowledgeBase","handlePageChange","newPage","handleCompanyChange","companyId","company_id","handleFileChange","file","raw","handleFileRemove","openBuildModal","fetchBuildStatuses","getKnowledgeBuildStatus","handleSelectionChange","selection","map","item","triggerBuildForCompanies","companyIds","length","buildKnowledgeForCompanies","message","forEach","add","startStatusPolling","setInterval","stillProcessing","some","s","status","stopStatusPolling","clear","info","clearInterval","getStatusTagType","getStatusText","isCompanyBuilding","_buildStatuses$value$","find","isAnyCompanyBuilding","hasFiles","every","file_count","isCompanySelectable","row"],"sources":["C:/Users/18083/Desktop/CCIT/office/o/smart-office/frontend/src/views/admin/KnowledgeManagement.vue"],"sourcesContent":["<template>\n  <div class=\"management-container\">\n    <el-card class=\"box-card\">\n      <template #header>\n        <div class=\"card-header\">\n          <div class=\"header-left\">\n            <el-icon class=\"header-icon\"><Collection /></el-icon>\n            <span>知识库管理</span>\n          </div>\n          <div class=\"header-right\">\n            <el-input\n              v-model=\"searchQuery\"\n              placeholder=\"搜索知识库文章...\"\n              clearable\n              @clear=\"fetchArticles\"\n              @input=\"debouncedFetchArticles\"\n              class=\"search-input\"\n            >\n              <template #append>\n                <el-button :icon=\"Search\" />\n              </template>\n            </el-input>\n            <el-button type=\"success\" @click=\"openBuildModal\">构建知识库</el-button>\n            <el-button type=\"info\" @click=\"openCategoryModal()\">管理分类</el-button>\n            <el-button type=\"primary\" :icon=\"Upload\" @click=\"openArticleModal()\">上传文件</el-button>\n          </div>\n        </div>\n      </template>\n      <!-- Main content will go here -->\n      <el-table :data=\"articles\" v-loading=\"loading\" border>\n        <el-table-column prop=\"title\" label=\"标题\" min-width=\"200\"></el-table-column>\n        <el-table-column prop=\"original_filename\" label=\"文件名\" min-width=\"200\"></el-table-column>\n        <el-table-column prop=\"category_name\" label=\"分类\" width=\"120\"></el-table-column>\n        <el-table-column prop=\"company_name\" label=\"所属公司\" width=\"150\"></el-table-column>\n        <el-table-column prop=\"creator_name\" label=\"上传者\" width=\"120\"></el-table-column>\n        <el-table-column prop=\"created_at\" label=\"上传时间\" width=\"180\">\n            <template #default=\"scope\">\n                {{ new Date(scope.row.created_at).toLocaleString() }}\n            </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" width=\"150\" fixed=\"right\">\n          <template #default=\"scope\">\n            <el-button size=\"small\" :icon=\"Edit\" @click=\"openArticleModal(scope.row)\"></el-button>\n            <el-button size=\"small\" type=\"danger\" :icon=\"Delete\" @click=\"confirmDeleteArticle(scope.row)\"></el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <el-pagination\n        background\n        layout=\"prev, pager, next, total\"\n        :total=\"total\"\n        :page-size=\"pagination.pageSize\"\n        :current-page=\"pagination.page\"\n        @current-change=\"handlePageChange\"\n        style=\"margin-top: 20px; text-align: right;\"\n      />\n    </el-card>\n\n    <!-- Category Management Modal -->\n    <el-dialog v-model=\"isCategoryModalOpen\" title=\"管理分类\" width=\"60%\">\n      <div class=\"category-dialog-content\">\n        <div class=\"category-list-section\">\n           <div class=\"section-header\">\n            <h5>已有分类</h5>\n            <el-button \n              type=\"primary\" \n              size=\"small\" \n              @click=\"resetCategoryForm\">\n              <el-icon><Plus /></el-icon> 新增分类\n            </el-button>\n          </div>\n          <div v-if=\"!categories.length\" class=\"category-items\">\n             <el-empty description=\"暂无分类\" />\n          </div>\n          <div v-else class=\"category-items\">\n            <div \n                v-for=\"category in categories\" \n                :key=\"category.id\" \n                class=\"category-list-item\"\n                :class=\"{ 'selected': currentCategory.id === category.id }\"\n                @click=\"selectCategoryForEdit(category)\"\n            >\n              <div class=\"category-info\">\n                 <div class=\"category-icon\" :style=\"{'background-color': category.color}\">\n                    <el-icon><component :is=\"category.icon || 'Document'\" /></el-icon>\n                 </div>\n                <span class=\"category-name-section\">{{ category.name }}</span>\n              </div>\n               <div class=\"category-actions\">\n                    <el-button type=\"primary\" size=\"small\" plain :icon=\"Edit\" @click.stop=\"selectCategoryForEdit(category)\" />\n                    <el-button type=\"danger\" size=\"small\" plain :icon=\"Delete\" @click.stop=\"confirmDeleteCategory(category)\" />\n                </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"category-form-section\">\n          <div class=\"section-header\">\n             <h5>{{ isEditingCategory ? '编辑分类' : '新增分类' }}</h5>\n             <el-button v-if=\"isEditingCategory\" text @click=\"resetCategoryForm\">取消</el-button>\n          </div>\n          <el-form :model=\"currentCategory\" ref=\"categoryForm\" label-position=\"top\">\n            <el-form-item label=\"分类名称\" prop=\"name\" required>\n              <el-input v-model=\"currentCategory.name\" />\n            </el-form-item>\n             <el-form-item label=\"所属公司\" prop=\"company\" required>\n              <el-select v-model=\"currentCategory.company\" placeholder=\"请选择公司\" style=\"width: 100%;\">\n                <el-option v-for=\"company in companies\" :key=\"company.id\" :label=\"company.name\" :value=\"company.id\" />\n              </el-select>\n            </el-form-item>\n            <el-form-item label=\"分类描述\" prop=\"description\">\n              <el-input v-model=\"currentCategory.description\" type=\"textarea\" />\n            </el-form-item>\n            <el-form-item label=\"图标\" prop=\"icon\">\n               <el-select v-model=\"currentCategory.icon\" placeholder=\"选择一个图标\" style=\"width: 100%;\">\n                <el-option v-for=\"icon in availableIcons\" :key=\"icon.name\" :label=\"icon.label\" :value=\"icon.name\">\n                  <div style=\"display: flex; align-items: center;\">\n                    <el-icon style=\"margin-right: 8px;\"><component :is=\"icon.component\" /></el-icon>\n                    <span>{{ icon.label }}</span>\n                  </div>\n                </el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item label=\"颜色\" prop=\"color\">\n              <el-color-picker v-model=\"currentCategory.color\" />\n            </el-form-item>\n            <el-form-item>\n                <el-button type=\"primary\" @click=\"saveCategory\">保存</el-button>\n                <el-button @click=\"resetCategoryForm\" v-if=\"!isEditingCategory\">重置</el-button>\n            </el-form-item>\n          </el-form>\n        </div>\n      </div>\n    </el-dialog>\n\n    <!-- Add/Edit Article Modal -->\n    <el-dialog v-model=\"isArticleModalOpen\" :title=\"currentArticle.id ? '编辑文件信息' : '上传新文件'\" width=\"50%\">\n      <el-form :model=\"currentArticle\" ref=\"articleForm\" label-width=\"80px\">\n        <el-form-item label=\"标题\" prop=\"title\" required>\n          <el-input v-model=\"currentArticle.title\" />\n        </el-form-item>\n        <el-form-item label=\"公司\" prop=\"company\" required>\n            <el-select v-model=\"currentArticle.company\" placeholder=\"请选择公司\" style=\"width: 100%;\" @change=\"handleCompanyChange\">\n              <el-option v-for=\"company in companies\" :key=\"company.id\" :label=\"company.name\" :value=\"company.id\" />\n            </el-select>\n        </el-form-item>\n        <el-form-item label=\"分类\" prop=\"category\">\n            <el-select v-model=\"currentArticle.category\" placeholder=\"可选，请先选择公司\" style=\"width: 100%;\" :disabled=\"!currentArticle.company\" clearable>\n              <el-option v-for=\"category in companyCategories\" :key=\"category.id\" :label=\"category.name\" :value=\"category.id\" />\n            </el-select>\n        </el-form-item>\n        <el-form-item label=\"描述\" prop=\"description\">\n          <el-input v-model=\"currentArticle.description\" type=\"textarea\" />\n        </el-form-item>\n        <el-form-item label=\"文件\" prop=\"original_file\">\n            <div v-if=\"currentArticle.id && currentArticle.original_filename && !showUpload\">\n                <span class=\"file-info\">当前文件: {{ currentArticle.original_filename }} ({{ currentArticle.file_size }} KB)</span>\n                <el-button @click=\"showUpload = true\" type=\"primary\" link style=\"margin-left: 10px;\">替换文件</el-button>\n            </div>\n            <el-upload\n                v-else\n                ref=\"upload\"\n                action=\"#\"\n                :auto-upload=\"false\"\n                :on-change=\"handleFileChange\"\n                :on-remove=\"handleFileRemove\"\n                :limit=\"1\"\n                class=\"upload-component\"\n            >\n                <template #trigger>\n                <el-button type=\"primary\">选择文件</el-button>\n                </template>\n                <template #tip>\n                <div class=\"el-upload__tip\">\n                    只能上传单个文件，文件大小不应超过系统限制。\n                </div>\n                </template>\n            </el-upload>\n        </el-form-item>\n      </el-form>\n      <template #footer>\n        <el-button @click=\"closeArticleModal\">取消</el-button>\n        <el-button type=\"primary\" @click=\"saveArticle\">保存</el-button>\n      </template>\n    </el-dialog>\n\n    <!-- Build Knowledge Base Modal -->\n    <el-dialog v-model=\"isBuildModalOpen\" title=\"构建公司知识库\" width=\"70%\" @close=\"stopStatusPolling\">\n        <el-table \n            :data=\"buildStatuses\" \n            v-loading=\"isBuildStatusLoading\"\n            @selection-change=\"handleSelectionChange\"\n            border\n            row-key=\"company_id\"\n        >\n            <el-table-column type=\"selection\" width=\"55\" :selectable=\"isCompanySelectable\" />\n            <el-table-column prop=\"company_name\" label=\"公司名称\" />\n            <el-table-column prop=\"file_count\" label=\"文件数\" width=\"80\" />\n            <el-table-column prop=\"status\" label=\"构建状态\">\n                <template #default=\"scope\">\n                    <el-tooltip v-if=\"scope.row.file_count === 0\" content=\"没有文件，无法构建\" placement=\"top\">\n                        <el-tag type=\"info\">\n                            无法构建\n                        </el-tag>\n                    </el-tooltip>\n                    <el-tag v-else :type=\"getStatusTagType(scope.row.status)\">\n                        {{ getStatusText(scope.row.status) }}\n                        <el-icon v-if=\"scope.row.status === 'processing'\" class=\"is-loading\"><Loading /></el-icon>\n                    </el-tag>\n                </template>\n            </el-table-column>\n            <el-table-column prop=\"last_built_at\" label=\"上次构建时间\">\n                 <template #default=\"scope\">\n                    {{ scope.row.last_built_at ? new Date(scope.row.last_built_at).toLocaleString() : 'N/A' }}\n                </template>\n            </el-table-column>\n            <el-table-column prop=\"processing_message\" label=\"消息\" show-overflow-tooltip />\n            <el-table-column label=\"操作\" width=\"120\">\n                <template #default=\"scope\">\n                    <el-tooltip content=\"没有文件，无法构建\" :disabled=\"scope.row.file_count > 0\">\n                        <div style=\"display: inline-block\"> <!-- Wrapper for tooltip on disabled button -->\n                             <el-button \n                                type=\"primary\" \n                                size=\"small\" \n                                @click=\"triggerBuildForCompanies([scope.row.company_id])\"\n                                :disabled=\"isCompanyBuilding(scope.row.company_id) || scope.row.file_count === 0\"\n                            >\n                                构建\n                            </el-button>\n                        </div>\n                    </el-tooltip>\n                </template>\n            </el-table-column>\n        </el-table>\n        <template #footer>\n            <div class=\"build-footer\">\n                <el-button \n                    type=\"primary\" \n                    @click=\"triggerBuildForCompanies(selectedCompanyIds)\"\n                    :disabled=\"selectedCompanyIds.length === 0 || isAnyCompanyBuilding(selectedCompanyIds)\"\n                >\n                    构建选中 ({{ selectedCompanyIds.length }})\n                </el-button>\n                <el-button @click=\"fetchBuildStatuses\" :icon=\"Refresh\">刷新状态</el-button>\n            </div>\n        </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script setup>\nimport { ref, reactive, onMounted, computed } from 'vue';\nimport adminApi from '@/api/admin';\nimport { ElMessage, ElMessageBox, ElCard, ElIcon, ElInput, ElButton, ElTable, ElTableColumn, ElPagination, ElDialog, ElForm, ElFormItem, ElSelect, ElOption, ElUpload, ElColorPicker, ElEmpty, ElTooltip } from 'element-plus';\nimport { Collection, Search, Upload, Edit, Delete, Plus, Document, Folder, DataAnalysis, TrendCharts, Reading, MagicStick, Loading, Refresh } from '@element-plus/icons-vue';\n\nconst articles = ref([]);\nconst categories = ref([]);\nconst companies = ref([]);\nconst loading = ref(true);\nconst searchQuery = ref('');\nconst total = ref(0);\nconst pagination = reactive({\n  page: 1,\n  pageSize: 10,\n});\n\nconst isCategoryModalOpen = ref(false);\nconst isSingleCategoryModalOpen = ref(false);\nconst currentCategory = ref({});\nconst categoryForm = ref(null);\nconst isEditingCategory = computed(() => !!currentCategory.value.id);\n\nconst availableIcons = [\n  { name: 'Document', label: '文档', component: Document },\n  { name: 'Folder', label: '文件夹', component: Folder },\n  { name: 'DataAnalysis', label: '数据分析', component: DataAnalysis },\n  { name: 'TrendCharts', label: '趋势图', component: TrendCharts },\n  { name: 'Reading', label: '阅读', component: Reading },\n  { name: 'MagicStick', label: '魔术棒', component: MagicStick },\n];\n\nconst isArticleModalOpen = ref(false);\nconst currentArticle = ref({});\nconst articleForm = ref(null);\nconst companyCategories = ref([]);\nconst upload = ref(null);\nconst showUpload = ref(false);\n\nconst isBuildModalOpen = ref(false);\nconst buildStatuses = ref([]);\nconst isBuildStatusLoading = ref(false);\nconst selectedCompanyIds = ref([]);\nconst buildingCompanyIds = ref(new Set());\nlet statusPollInterval = null;\n\nlet searchTimeout = null;\n\nconst fetchCategories = async () => {\n  try {\n    const response = await adminApi.getKnowledgeCategories({ all: 'true' });\n    categories.value = response.data;\n  } catch (error) {\n    ElMessage.error('获取分类列表失败');\n  }\n};\n\nconst fetchCompanies = async () => {\n  try {\n    const response = await adminApi.getCompanies({ all: 'true' });\n    companies.value = response.data;\n  } catch (error) {\n    ElMessage.error('获取公司列表失败');\n  }\n};\n\nconst openCategoryModal = async () => {\n  await fetchCompanies();\n  await fetchCategories();\n  resetCategoryForm();\n  isCategoryModalOpen.value = true;\n};\n\nconst closeSingleCategoryModal = () => {\n  isSingleCategoryModalOpen.value = false;\n  currentCategory.value = {};\n  categoryForm.value?.resetFields();\n};\n\nconst resetCategoryForm = () => {\n  currentCategory.value = {\n    id: null,\n    name: '',\n    description: '',\n    icon: 'Document',\n    color: '#409EFF',\n    company: null,\n  };\n  categoryForm.value?.resetFields();\n};\n\nconst selectCategoryForEdit = (category) => {\n  currentCategory.value = { ...category };\n};\n\nconst saveCategory = async () => {\n  try {\n    if (currentCategory.value.id) {\n      await adminApi.updateKnowledgeCategory(currentCategory.value.id, currentCategory.value);\n    } else {\n      await adminApi.createKnowledgeCategory(currentCategory.value);\n    }\n    ElMessage.success('分类保存成功');\n    closeSingleCategoryModal();\n    fetchCategories(); // Refresh list in the background\n  } catch (error) {\n    ElMessage.error('保存分类失败');\n  }\n};\n\nconst confirmDeleteCategory = (category) => {\n  ElMessageBox.confirm(`确定要删除分类 \"${category.name}\" 吗?`, '警告', {\n    confirmButtonText: '确定',\n    cancelButtonText: '取消',\n    type: 'warning',\n  }).then(async () => {\n    try {\n      await adminApi.deleteKnowledgeCategory(category.id);\n      ElMessage.success('分类删除成功');\n      fetchCategories(); // Refresh list\n    } catch (error) {\n      ElMessage.error('删除分类失败');\n    }\n  });\n};\n\nconst debouncedFetchArticles = () => {\n  clearTimeout(searchTimeout);\n  searchTimeout = setTimeout(() => {\n    pagination.page = 1;\n    fetchArticles();\n  }, 300);\n};\n\nconst fetchArticles = async () => {\n  loading.value = true;\n  try {\n    const params = {\n      page: pagination.page,\n      size: pagination.pageSize,\n      search: searchQuery.value\n    };\n    const response = await adminApi.getKnowledgeBases(params);\n    articles.value = response.data.results;\n    total.value = response.data.count;\n  } catch (error) {\n    ElMessage.error('获取文章列表失败');\n    articles.value = [];\n    total.value = 0;\n  } finally {\n    loading.value = false;\n  }\n};\n\nconst openArticleModal = async (article = {}) => {\n  await fetchCompanies();\n  currentArticle.value = { ...article };\n\n  if (article.id) {\n    showUpload.value = false; // 编辑模式下，默认不显示上传组件\n  } else {\n    showUpload.value = true; // 新建模式下，直接显示上传组件\n  }\n  \n  if (currentArticle.value.company) {\n    await fetchCategoriesForCompany(currentArticle.value.company);\n  } else {\n    companyCategories.value = [];\n  }\n  isArticleModalOpen.value = true;\n};\n\nconst closeArticleModal = () => {\n  isArticleModalOpen.value = false;\n  currentArticle.value = {};\n  companyCategories.value = [];\n  upload.value?.clearFiles();\n  articleForm.value?.resetFields();\n};\n\nconst saveArticle = async () => {\n  try {\n    const dataToSave = { ...currentArticle.value };\n    if (!dataToSave.id && !dataToSave.original_file) {\n        ElMessage.error('请选择一个文件上传');\n        return;\n    }\n\n    if (dataToSave.id) {\n      await adminApi.updateKnowledgeBase(dataToSave.id, dataToSave);\n    } else {\n      await adminApi.createKnowledgeBase(dataToSave);\n    }\n    ElMessage.success('文件信息保存成功');\n    closeArticleModal();\n    fetchArticles();\n  } catch (error) {\n    const errorMsg = error.response?.data ? JSON.stringify(error.response.data) : '保存文件信息失败';\n    ElMessage.error(errorMsg);\n  }\n};\n\nconst confirmDeleteArticle = (article) => {\n  ElMessageBox.confirm(`确定要删除文件 \"${article.title}\" 吗? 这将一并删除关联的文件和数据。`, '警告', {\n    confirmButtonText: '确定',\n    cancelButtonText: '取消',\n    type: 'warning',\n  }).then(async () => {\n    try {\n      await adminApi.deleteKnowledgeBase(article.id);\n      ElMessage.success('文件删除成功');\n      fetchArticles(); // Refresh list\n    } catch (error) {\n      ElMessage.error('删除文件失败');\n    }\n  });\n};\n\nconst handlePageChange = (newPage) => {\n  pagination.page = newPage;\n  fetchArticles();\n};\n\nconst handleCompanyChange = async (companyId) => {\n  currentArticle.value.category = null;\n  companyCategories.value = [];\n  if (companyId) {\n    await fetchCategoriesForCompany(companyId);\n  }\n};\n\nconst fetchCategoriesForCompany = async (companyId) => {\n  try {\n    const response = await adminApi.getKnowledgeCategories({ all: 'true', company_id: companyId });\n    companyCategories.value = response.data;\n  } catch (error) {\n    ElMessage.error('获取该公司下的分类失败');\n  }\n};\n\nconst handleFileChange = (file) => {\n    currentArticle.value.original_file = file.raw;\n};\n\nconst handleFileRemove = () => {\n    currentArticle.value.original_file = null;\n};\n\nconst openBuildModal = () => {\n    isBuildModalOpen.value = true;\n    fetchBuildStatuses();\n};\n\nconst fetchBuildStatuses = async () => {\n    isBuildStatusLoading.value = true;\n    try {\n        const response = await adminApi.getKnowledgeBuildStatus();\n        buildStatuses.value = response.data;\n    } catch (error) {\n        ElMessage.error('获取构建状态失败');\n    } finally {\n        isBuildStatusLoading.value = false;\n    }\n};\n\nconst handleSelectionChange = (selection) => {\n    selectedCompanyIds.value = selection.map(item => item.company_id);\n};\n\nconst triggerBuildForCompanies = async (companyIds) => {\n    if (companyIds.length === 0) return;\n    try {\n        const response = await adminApi.buildKnowledgeForCompanies(companyIds);\n        ElMessage.success(response.data.message || '构建任务已启动');\n        companyIds.forEach(id => buildingCompanyIds.value.add(id));\n        fetchBuildStatuses();\n        startStatusPolling();\n    } catch (error) {\n        ElMessage.error('启动构建任务失败');\n    }\n};\n\nconst startStatusPolling = () => {\n    if (statusPollInterval) return; // 避免重复启动\n    statusPollInterval = setInterval(async () => {\n        await fetchBuildStatuses();\n        // 检查是否有仍在处理中的构建\n        const stillProcessing = buildStatuses.value.some(s => s.status === 'processing' || s.status === 'pending');\n        if (!stillProcessing) {\n            stopStatusPolling();\n            buildingCompanyIds.value.clear();\n            ElMessage.info('所有构建任务已完成。');\n        }\n    }, 5000); // 每5秒轮询一次\n};\n\nconst stopStatusPolling = () => {\n    if (statusPollInterval) {\n        clearInterval(statusPollInterval);\n        statusPollInterval = null;\n    }\n};\n\nconst getStatusTagType = (status) => {\n    switch (status) {\n        case 'completed': return 'success';\n        case 'processing': return 'primary';\n        case 'pending': return 'warning';\n        case 'failed': return 'danger';\n        default: return 'info';\n    }\n};\n\nconst getStatusText = (status) => {\n    const map = {\n        'completed': '成功',\n        'processing': '构建中',\n        'pending': '等待中',\n        'failed': '失败',\n        'not_built': '未构建'\n    };\n    return map[status] || '未知';\n};\n\nconst isCompanyBuilding = (companyId) => {\n    const status = buildStatuses.value.find(s => s.company_id === companyId)?.status;\n    return status === 'processing' || status === 'pending';\n};\n\nconst isAnyCompanyBuilding = (companyIds) => {\n    // 增加一个检查，确保所选的公司都有文件\n    const hasFiles = companyIds.every(id => {\n        const company = buildStatuses.value.find(s => s.company_id === id);\n        return company && company.file_count > 0;\n    });\n    if (!hasFiles) return true;\n\n    return companyIds.some(id => isCompanyBuilding(id));\n};\n\nconst isCompanySelectable = (row) => {\n    return row.file_count > 0;\n};\n\nonMounted(() => {\n  // initial fetch\n  fetchArticles();\n});\n</script>\n\n<style scoped>\n@import './shared-styles.css';\n\n.file-info {\n    font-size: 14px;\n    color: #606266;\n}\n\n.upload-component {\n    width: 100%;\n}\n\n.category-dialog-content {\n  display: flex;\n  gap: 20px;\n  min-height: 400px;\n}\n\n.category-list-section, .category-form-section {\n  padding: 10px;\n  border-radius: 8px;\n}\n\n.category-list-section {\n  flex: 1;\n  border-right: 1px solid #e0e0e0;\n  padding-right: 20px;\n  display: flex;\n  flex-direction: column;\n}\n\n.category-form-section {\n  flex: 1.2;\n}\n\n.section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n  padding-bottom: 10px;\n  border-bottom: 1px solid #f0f0f0;\n}\n\n.category-items {\n  overflow-y: auto;\n  max-height: 350px;\n}\n\n.category-list-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 10px;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: background-color 0.3s;\n  margin-bottom: 5px;\n}\n\n.category-list-item:hover {\n  background-color: #f5f7fa;\n}\n\n.category-list-item.selected {\n  background-color: #ecf5ff;\n  border: 1px solid #b3d8ff;\n}\n\n.category-info {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.category-color {\n  width: 8px;\n  height: 20px;\n  border-radius: 4px;\n  flex-shrink: 0;\n}\n\n.category-icon {\n  width: 32px;\n  height: 32px;\n  border-radius: 6px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.category-icon .el-icon {\n  color: white;\n}\n\n.build-footer {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n}\n</style>\n\n<style>\n.category-dialog-content .el-form-item {\n  margin-bottom: 22px;\n}\n</style> "],"mappings":"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","ignoreList":[]}]}