{"remainingRequest":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\hooks\\useRequest.js","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\hooks\\useRequest.js","mtime":1747314682737},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\babel.config.js","mtime":1748077811200},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\eslint-loader\\index.js","mtime":1746431218000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgcmVmIH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgRWxNZXNzYWdlIH0gZnJvbSAnZWxlbWVudC1wbHVzJzsKCi8qKgogKiDlsIHoo4VBUEnor7fmsYLpkqnlrZDlh73mlbAKICogQHJldHVybnMge09iamVjdH0g5YyF5ZCrcmVxdWVzdOaWueazleWSjGxvYWRpbmfnirbmgIHnmoTlr7nosaEKICovCmV4cG9ydCBmdW5jdGlvbiB1c2VSZXF1ZXN0KCkgewogIGNvbnN0IGxvYWRpbmcgPSByZWYoZmFsc2UpOwoKICAvLyDliJvlu7pheGlvc+WunuS+iwogIGNvbnN0IGluc3RhbmNlID0gYXhpb3MuY3JlYXRlKHsKICAgIHRpbWVvdXQ6IDEwMDAwLAogICAgLy8g6K+35rGC6LaF5pe25pe26Ze0CiAgICBoZWFkZXJzOiB7CiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KICB9KTsKCiAgLy8g6K+35rGC5oum5oiq5ZmoCiAgaW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGNvbmZpZyA9PiB7CiAgICAvLyDku45sb2NhbFN0b3JhZ2Xojrflj5Z0b2tlbgogICAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTsKICAgIGlmICh0b2tlbikgewogICAgICBjb25maWcuaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gYEJlYXJlciAke3Rva2VufWA7CiAgICB9CiAgICByZXR1cm4gY29uZmlnOwogIH0sIGVycm9yID0+IHsKICAgIGNvbnNvbGUuZXJyb3IoJ+ivt+axgumUmeivrzonLCBlcnJvcik7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogIH0pOwoKICAvLyDlk43lupTmi6bmiKrlmagKICBpbnN0YW5jZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKHJlc3BvbnNlID0+IHsKICAgIC8vIOWmguaenOWTjeW6lOaIkOWKn+S9huS4muWKoeeKtuaAgeeggeihqOekuuWksei0pQogICAgaWYgKHJlc3BvbnNlLmRhdGEgJiYgcmVzcG9uc2UuZGF0YS5jb2RlID49IDQwMCkgewogICAgICBFbE1lc3NhZ2UuZXJyb3IocmVzcG9uc2UuZGF0YS5tZXNzYWdlIHx8ICfor7fmsYLlpLHotKUnKTsKICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlc3BvbnNlLmRhdGEpOwogICAgfQogICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7CiAgfSwgZXJyb3IgPT4gewogICAgLy8g5aSE55CG5ZON5bqU6ZSZ6K+vCiAgICBpZiAoZXJyb3IucmVzcG9uc2UpIHsKICAgICAgY29uc3Qgc3RhdHVzID0gZXJyb3IucmVzcG9uc2Uuc3RhdHVzOwogICAgICBpZiAoc3RhdHVzID09PSA0MDEpIHsKICAgICAgICAvLyDmnKrmjojmnYPvvIzlj6/og73mmK90b2tlbui/h+acnwogICAgICAgIEVsTWVzc2FnZS5lcnJvcign55m75b2V5bey6L+H5pyf77yM6K+36YeN5paw55m75b2VJyk7CiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7CiAgICAgICAgLy8g6Lez6L2s5Yiw55m75b2V6aG1CiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2xvZ2luJzsKICAgICAgfSBlbHNlIGlmIChzdGF0dXMgPT09IDQwMykgewogICAgICAgIEVsTWVzc2FnZS5lcnJvcign5rKh5pyJ5p2D6ZmQ5omn6KGM5q2k5pON5L2cJyk7CiAgICAgIH0gZWxzZSBpZiAoc3RhdHVzID09PSA0MDQpIHsKICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+ivt+axgueahOi1hOa6kOS4jeWtmOWcqCcpOwogICAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gNTAwKSB7CiAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfmnI3liqHlmajlhoXpg6jplJnor68nKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgX2Vycm9yJHJlc3BvbnNlJGRhdGE7CiAgICAgICAgRWxNZXNzYWdlLmVycm9yKCgoX2Vycm9yJHJlc3BvbnNlJGRhdGEgPSBlcnJvci5yZXNwb25zZS5kYXRhKSA9PT0gbnVsbCB8fCBfZXJyb3IkcmVzcG9uc2UkZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Vycm9yJHJlc3BvbnNlJGRhdGEubWVzc2FnZSkgfHwgJ+ivt+axguWksei0pScpOwogICAgICB9CiAgICB9IGVsc2UgaWYgKGVycm9yLnJlcXVlc3QpIHsKICAgICAgLy8g6K+35rGC5bey5Y+R6YCB5L2G5rKh5pyJ5pS25Yiw5ZON5bqUCiAgICAgIEVsTWVzc2FnZS5lcnJvcign5pyN5Yqh5Zmo5peg5ZON5bqU77yM6K+356iN5ZCO6YeN6K+VJyk7CiAgICB9IGVsc2UgewogICAgICAvLyDor7fmsYLphY3nva7lh7rplJkKICAgICAgRWxNZXNzYWdlLmVycm9yKCfor7fmsYLphY3nva7plJnor68nKTsKICAgIH0KICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7CiAgfSk7CgogIC8qKgogICAqIOmAmueUqOivt+axguaWueazlQogICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgLSDor7fmsYLlnLDlnYAKICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIOivt+axgumFjee9rgogICAqIEByZXR1cm5zIHtQcm9taXNlfSDor7fmsYLnu5PmnpwKICAgKi8KICBjb25zdCByZXF1ZXN0ID0gYXN5bmMgKHVybCwgb3B0aW9ucyA9IHt9KSA9PiB7CiAgICBsb2FkaW5nLnZhbHVlID0gdHJ1ZTsKICAgIHRyeSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBtZXRob2QgPSAnR0VUJywKICAgICAgICBwYXJhbXMsCiAgICAgICAgZGF0YSwKICAgICAgICAuLi5yZXN0CiAgICAgIH0gPSBvcHRpb25zOwogICAgICBjb25zdCBjb25maWcgPSB7CiAgICAgICAgdXJsLAogICAgICAgIG1ldGhvZCwKICAgICAgICBwYXJhbXMsCiAgICAgICAgZGF0YSwKICAgICAgICAuLi5yZXN0CiAgICAgIH07CiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgaW5zdGFuY2UoY29uZmlnKTsKICAgICAgcmV0dXJuIHJlc3BvbnNlOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgY29uc29sZS5lcnJvcign6K+35rGC5Ye66ZSZOicsIGVycm9yKTsKICAgICAgdGhyb3cgZXJyb3I7CiAgICB9IGZpbmFsbHkgewogICAgICBsb2FkaW5nLnZhbHVlID0gZmFsc2U7CiAgICB9CiAgfTsKICByZXR1cm4gewogICAgbG9hZGluZywKICAgIHJlcXVlc3QKICB9Owp9"},{"version":3,"names":["axios","ref","ElMessage","useRequest","loading","instance","create","timeout","headers","interceptors","request","use","config","token","localStorage","getItem","error","console","Promise","reject","response","data","code","message","status","removeItem","window","location","href","_error$response$data","url","options","value","method","params","rest"],"sources":["C:/Users/18083/Desktop/CCIT/office/smart-office/frontend/src/hooks/useRequest.js"],"sourcesContent":["import axios from 'axios'\nimport { ref } from 'vue'\nimport { ElMessage } from 'element-plus'\n\n/**\n * 封装API请求钩子函数\n * @returns {Object} 包含request方法和loading状态的对象\n */\nexport function useRequest() {\n  const loading = ref(false)\n  \n  // 创建axios实例\n  const instance = axios.create({\n    timeout: 10000, // 请求超时时间\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  })\n  \n  // 请求拦截器\n  instance.interceptors.request.use(\n    config => {\n      // 从localStorage获取token\n      const token = localStorage.getItem('token')\n      if (token) {\n        config.headers['Authorization'] = `Bearer ${token}`\n      }\n      return config\n    },\n    error => {\n      console.error('请求错误:', error)\n      return Promise.reject(error)\n    }\n  )\n  \n  // 响应拦截器\n  instance.interceptors.response.use(\n    response => {\n      // 如果响应成功但业务状态码表示失败\n      if (response.data && response.data.code >= 400) {\n        ElMessage.error(response.data.message || '请求失败')\n        return Promise.reject(response.data)\n      }\n      return response.data\n    },\n    error => {\n      // 处理响应错误\n      if (error.response) {\n        const status = error.response.status\n        \n        if (status === 401) {\n          // 未授权，可能是token过期\n          ElMessage.error('登录已过期，请重新登录')\n          localStorage.removeItem('token')\n          // 跳转到登录页\n          window.location.href = '/login'\n        } else if (status === 403) {\n          ElMessage.error('没有权限执行此操作')\n        } else if (status === 404) {\n          ElMessage.error('请求的资源不存在')\n        } else if (status === 500) {\n          ElMessage.error('服务器内部错误')\n        } else {\n          ElMessage.error(error.response.data?.message || '请求失败')\n        }\n      } else if (error.request) {\n        // 请求已发送但没有收到响应\n        ElMessage.error('服务器无响应，请稍后重试')\n      } else {\n        // 请求配置出错\n        ElMessage.error('请求配置错误')\n      }\n      \n      return Promise.reject(error)\n    }\n  )\n  \n  /**\n   * 通用请求方法\n   * @param {string} url - 请求地址\n   * @param {Object} options - 请求配置\n   * @returns {Promise} 请求结果\n   */\n  const request = async (url, options = {}) => {\n    loading.value = true\n    \n    try {\n      const { method = 'GET', params, data, ...rest } = options\n      \n      const config = {\n        url,\n        method,\n        params,\n        data,\n        ...rest\n      }\n      \n      const response = await instance(config)\n      return response\n    } catch (error) {\n      console.error('请求出错:', error)\n      throw error\n    } finally {\n      loading.value = false\n    }\n  }\n  \n  return {\n    loading,\n    request\n  }\n} "],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,GAAG,QAAQ,KAAK;AACzB,SAASC,SAAS,QAAQ,cAAc;;AAExC;AACA;AACA;AACA;AACA,OAAO,SAASC,UAAUA,CAAA,EAAG;EAC3B,MAAMC,OAAO,GAAGH,GAAG,CAAC,KAAK,CAAC;;EAE1B;EACA,MAAMI,QAAQ,GAAGL,KAAK,CAACM,MAAM,CAAC;IAC5BC,OAAO,EAAE,KAAK;IAAE;IAChBC,OAAO,EAAE;MACP,cAAc,EAAE;IAClB;EACF,CAAC,CAAC;;EAEF;EACAH,QAAQ,CAACI,YAAY,CAACC,OAAO,CAACC,GAAG,CAC/BC,MAAM,IAAI;IACR;IACA,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAIF,KAAK,EAAE;MACTD,MAAM,CAACJ,OAAO,CAAC,eAAe,CAAC,GAAG,UAAUK,KAAK,EAAE;IACrD;IACA,OAAOD,MAAM;EACf,CAAC,EACDI,KAAK,IAAI;IACPC,OAAO,CAACD,KAAK,CAAC,OAAO,EAAEA,KAAK,CAAC;IAC7B,OAAOE,OAAO,CAACC,MAAM,CAACH,KAAK,CAAC;EAC9B,CACF,CAAC;;EAED;EACAX,QAAQ,CAACI,YAAY,CAACW,QAAQ,CAACT,GAAG,CAChCS,QAAQ,IAAI;IACV;IACA,IAAIA,QAAQ,CAACC,IAAI,IAAID,QAAQ,CAACC,IAAI,CAACC,IAAI,IAAI,GAAG,EAAE;MAC9CpB,SAAS,CAACc,KAAK,CAACI,QAAQ,CAACC,IAAI,CAACE,OAAO,IAAI,MAAM,CAAC;MAChD,OAAOL,OAAO,CAACC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAC;IACtC;IACA,OAAOD,QAAQ,CAACC,IAAI;EACtB,CAAC,EACDL,KAAK,IAAI;IACP;IACA,IAAIA,KAAK,CAACI,QAAQ,EAAE;MAClB,MAAMI,MAAM,GAAGR,KAAK,CAACI,QAAQ,CAACI,MAAM;MAEpC,IAAIA,MAAM,KAAK,GAAG,EAAE;QAClB;QACAtB,SAAS,CAACc,KAAK,CAAC,aAAa,CAAC;QAC9BF,YAAY,CAACW,UAAU,CAAC,OAAO,CAAC;QAChC;QACAC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;MACjC,CAAC,MAAM,IAAIJ,MAAM,KAAK,GAAG,EAAE;QACzBtB,SAAS,CAACc,KAAK,CAAC,WAAW,CAAC;MAC9B,CAAC,MAAM,IAAIQ,MAAM,KAAK,GAAG,EAAE;QACzBtB,SAAS,CAACc,KAAK,CAAC,UAAU,CAAC;MAC7B,CAAC,MAAM,IAAIQ,MAAM,KAAK,GAAG,EAAE;QACzBtB,SAAS,CAACc,KAAK,CAAC,SAAS,CAAC;MAC5B,CAAC,MAAM;QAAA,IAAAa,oBAAA;QACL3B,SAAS,CAACc,KAAK,CAAC,EAAAa,oBAAA,GAAAb,KAAK,CAACI,QAAQ,CAACC,IAAI,cAAAQ,oBAAA,uBAAnBA,oBAAA,CAAqBN,OAAO,KAAI,MAAM,CAAC;MACzD;IACF,CAAC,MAAM,IAAIP,KAAK,CAACN,OAAO,EAAE;MACxB;MACAR,SAAS,CAACc,KAAK,CAAC,cAAc,CAAC;IACjC,CAAC,MAAM;MACL;MACAd,SAAS,CAACc,KAAK,CAAC,QAAQ,CAAC;IAC3B;IAEA,OAAOE,OAAO,CAACC,MAAM,CAACH,KAAK,CAAC;EAC9B,CACF,CAAC;;EAED;AACF;AACA;AACA;AACA;AACA;EACE,MAAMN,OAAO,GAAG,MAAAA,CAAOoB,GAAG,EAAEC,OAAO,GAAG,CAAC,CAAC,KAAK;IAC3C3B,OAAO,CAAC4B,KAAK,GAAG,IAAI;IAEpB,IAAI;MACF,MAAM;QAAEC,MAAM,GAAG,KAAK;QAAEC,MAAM;QAAEb,IAAI;QAAE,GAAGc;MAAK,CAAC,GAAGJ,OAAO;MAEzD,MAAMnB,MAAM,GAAG;QACbkB,GAAG;QACHG,MAAM;QACNC,MAAM;QACNb,IAAI;QACJ,GAAGc;MACL,CAAC;MAED,MAAMf,QAAQ,GAAG,MAAMf,QAAQ,CAACO,MAAM,CAAC;MACvC,OAAOQ,QAAQ;IACjB,CAAC,CAAC,OAAOJ,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,OAAO,EAAEA,KAAK,CAAC;MAC7B,MAAMA,KAAK;IACb,CAAC,SAAS;MACRZ,OAAO,CAAC4B,KAAK,GAAG,KAAK;IACvB;EACF,CAAC;EAED,OAAO;IACL5B,OAAO;IACPM;EACF,CAAC;AACH","ignoreList":[]}]}