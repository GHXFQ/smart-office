{"remainingRequest":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\utils\\refresh-helper.js","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\utils\\refresh-helper.js","mtime":1749440446868},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\babel.config.js","mtime":1748077811200},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\eslint-loader\\index.js","mtime":1746431218000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqDQogKiDpobXpnaLliLfmlrDlt6Xlhbflh73mlbANCiAqIOeUqOS6juS8mOWMlumhtemdouWIh+aNouaXtueahOaVsOaNruWIt+aWsOWSjOaAp+iDvQ0KICovCgovLyDnvJPlrZjnmoTmlbDmja7lr7nosaEKY29uc3QgY2FjaGUgPSB7CiAgLy8g6aG16Z2i5pWw5o2u57yT5a2YCiAgcGFnZURhdGE6IHt9LAogIC8vIOS4iuasoeWIt+aWsOaXtumXtOiusOW9lQogIGxhc3RSZWZyZXNoVGltZToge30sCiAgLy8g5piv5ZCm5q2j5Zyo5Yi35paw55qE5qCH6K6wCiAgcmVmcmVzaGluZzoge30KfTsKCi8qKg0KICog5qOA5p+l6aG16Z2i5piv5ZCm6ZyA6KaB5Yi35pawDQogKiBAcGFyYW0ge3N0cmluZ30gcGFnZVBhdGgg6aG16Z2i6Lev5b6EDQogKiBAcGFyYW0ge251bWJlcn0gcmVmcmVzaEludGVydmFsIOWIt+aWsOmXtOmalOaXtumXtCjmr6vnp5Ip77yM6buY6K6kMzDnp5INCiAqIEByZXR1cm5zIHtib29sZWFufSDmmK/lkKbpnIDopoHliLfmlrANCiAqLwpleHBvcnQgZnVuY3Rpb24gc2hvdWxkUmVmcmVzaFBhZ2UocGFnZVBhdGgsIHJlZnJlc2hJbnRlcnZhbCA9IDMwMDAwKSB7CiAgLy8g6I635Y+W5b2T5YmN5pe26Ze0CiAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTsKICAvLyDojrflj5bkuIrmrKHliLfmlrDml7bpl7QKICBjb25zdCBsYXN0UmVmcmVzaCA9IGNhY2hlLmxhc3RSZWZyZXNoVGltZVtwYWdlUGF0aF0gfHwgMDsKICAvLyDmo4Dmn6XmmK/lkKbotoXov4fliLfmlrDpl7TpmpQKICByZXR1cm4gbm93IC0gbGFzdFJlZnJlc2ggPiByZWZyZXNoSW50ZXJ2YWw7Cn0KCi8qKg0KICog6Kem5Y+R6aG16Z2i5Yi35pawDQogKiBAcGFyYW0ge3N0cmluZ30gcGFnZVBhdGgg6aG16Z2i6Lev5b6EDQogKiBAcmV0dXJucyB7UHJvbWlzZX0g6L+U5Zue5Yi35paw57uT5p6cUHJvbWlzZQ0KICovCmV4cG9ydCBmdW5jdGlvbiB0cmlnZ2VyUGFnZVJlZnJlc2gocGFnZVBhdGgpIHsKICAvLyDlpoLmnpzlt7Lnu4/lnKjliLfmlrDvvIznm7TmjqXov5Tlm54KICBpZiAoY2FjaGUucmVmcmVzaGluZ1twYWdlUGF0aF0pIHsKICAgIGNvbnNvbGUubG9nKCfpobXpnaLmraPlnKjliLfmlrDkuK3vvIzot7Pov4c6JywgcGFnZVBhdGgpOwogICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSk7CiAgfQogIGNvbnNvbGUubG9nKCfop6blj5HpobXpnaLliLfmlrA6JywgcGFnZVBhdGgpOwogIC8vIOagh+iusOS4uuato+WcqOWIt+aWsAogIGNhY2hlLnJlZnJlc2hpbmdbcGFnZVBhdGhdID0gdHJ1ZTsKICAvLyDmm7TmlrDmnIDlkI7liLfmlrDml7bpl7QKICBjYWNoZS5sYXN0UmVmcmVzaFRpbWVbcGFnZVBhdGhdID0gRGF0ZS5ub3coKTsKCiAgLy8g6Kem5Y+R5Yi35paw5LqL5Lu2CiAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdyZWZyZXNoUGFnZScsIHsKICAgIGRldGFpbDogewogICAgICBwYXRoOiBwYWdlUGF0aAogICAgfQogIH0pKTsKCiAgLy8gNTAwbXPlkI7ph43nva7liLfmlrDnirbmgIEKICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgY2FjaGUucmVmcmVzaGluZ1twYWdlUGF0aF0gPSBmYWxzZTsKICAgICAgcmVzb2x2ZSh0cnVlKTsKICAgIH0sIDUwMCk7CiAgfSk7Cn0KCi8qKg0KICog5riF6Zmk6aG16Z2i57yT5a2Y5pWw5o2uDQogKiBAcGFyYW0ge3N0cmluZ30gcGFnZVBhdGgg6aG16Z2i6Lev5b6E77yM5LiN5Lyg5YiZ5riF6Zmk5omA5pyJ57yT5a2YDQogKi8KZXhwb3J0IGZ1bmN0aW9uIGNsZWFyUGFnZUNhY2hlKHBhZ2VQYXRoKSB7CiAgaWYgKHBhZ2VQYXRoKSB7CiAgICAvLyDmuIXpmaTnibnlrprpobXpnaLnvJPlrZgKICAgIGRlbGV0ZSBjYWNoZS5wYWdlRGF0YVtwYWdlUGF0aF07CiAgICBjb25zb2xlLmxvZygn5bey5riF6Zmk6aG16Z2i57yT5a2YOicsIHBhZ2VQYXRoKTsKICB9IGVsc2UgewogICAgLy8g5riF6Zmk5omA5pyJ6aG16Z2i57yT5a2YCiAgICBjYWNoZS5wYWdlRGF0YSA9IHt9OwogICAgY29uc29sZS5sb2coJ+W3sua4hemZpOaJgOaciemhtemdoue8k+WtmCcpOwogIH0KfQoKLyoqDQogKiDojrflj5bpobXpnaLnvJPlrZjmlbDmja4NCiAqIEBwYXJhbSB7c3RyaW5nfSBwYWdlUGF0aCDpobXpnaLot6/lvoQNCiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkg57yT5a2Y6ZSu5ZCNDQogKiBAcmV0dXJucyB7YW55fSDnvJPlrZjmlbDmja4NCiAqLwpleHBvcnQgZnVuY3Rpb24gZ2V0UGFnZUNhY2hlRGF0YShwYWdlUGF0aCwga2V5KSB7CiAgaWYgKCFjYWNoZS5wYWdlRGF0YVtwYWdlUGF0aF0pIHsKICAgIHJldHVybiBudWxsOwogIH0KICByZXR1cm4ga2V5ID8gY2FjaGUucGFnZURhdGFbcGFnZVBhdGhdW2tleV0gOiBjYWNoZS5wYWdlRGF0YVtwYWdlUGF0aF07Cn0KCi8qKg0KICog6K6+572u6aG16Z2i57yT5a2Y5pWw5o2uDQogKiBAcGFyYW0ge3N0cmluZ30gcGFnZVBhdGgg6aG16Z2i6Lev5b6EDQogKiBAcGFyYW0ge3N0cmluZ30ga2V5IOe8k+WtmOmUruWQjSANCiAqIEBwYXJhbSB7YW55fSBkYXRhIOimgee8k+WtmOeahOaVsOaNrg0KICovCmV4cG9ydCBmdW5jdGlvbiBzZXRQYWdlQ2FjaGVEYXRhKHBhZ2VQYXRoLCBrZXksIGRhdGEpIHsKICBpZiAoIWNhY2hlLnBhZ2VEYXRhW3BhZ2VQYXRoXSkgewogICAgY2FjaGUucGFnZURhdGFbcGFnZVBhdGhdID0ge307CiAgfQogIGlmIChrZXkpIHsKICAgIGNhY2hlLnBhZ2VEYXRhW3BhZ2VQYXRoXVtrZXldID0gZGF0YTsKICB9IGVsc2UgewogICAgY2FjaGUucGFnZURhdGFbcGFnZVBhdGhdID0gZGF0YTsKICB9Cn0KCi8qKg0KICog6aKE5Yqg6L296aG16Z2i6LWE5rqQDQogKiBAcGFyYW0ge3N0cmluZ30gcGFnZVBhdGgg6aG16Z2i6Lev5b6EDQogKi8KZXhwb3J0IGZ1bmN0aW9uIHByZWxvYWRQYWdlUmVzb3VyY2VzKHBhZ2VQYXRoKSB7CiAgLy8g6L+Z6YeM5Y+v5Lul5qC55o2u6Lev5b6E6aKE5Yqg6L295a+55bqU6aG16Z2i55qE6LWE5rqQCiAgY29uc29sZS5sb2coJ+mihOWKoOi9vemhtemdoui1hOa6kDonLCBwYWdlUGF0aCk7CiAgLy8g5a6e6ZmF5a6e546w5Y+v6IO95raJ5Y+K5Yiw6aKE5Yqg6L29SlPjgIFDU1PjgIHlm77niYfnrYnotYTmupAKfQpleHBvcnQgZGVmYXVsdCB7CiAgc2hvdWxkUmVmcmVzaFBhZ2UsCiAgdHJpZ2dlclBhZ2VSZWZyZXNoLAogIGNsZWFyUGFnZUNhY2hlLAogIGdldFBhZ2VDYWNoZURhdGEsCiAgc2V0UGFnZUNhY2hlRGF0YSwKICBwcmVsb2FkUGFnZVJlc291cmNlcwp9Ow=="},{"version":3,"names":["cache","pageData","lastRefreshTime","refreshing","shouldRefreshPage","pagePath","refreshInterval","now","Date","lastRefresh","triggerPageRefresh","console","log","Promise","resolve","window","dispatchEvent","CustomEvent","detail","path","setTimeout","clearPageCache","getPageCacheData","key","setPageCacheData","data","preloadPageResources"],"sources":["C:/Users/18083/Desktop/CCIT/office/smart-office/frontend/src/utils/refresh-helper.js"],"sourcesContent":["/**\r\n * 页面刷新工具函数\r\n * 用于优化页面切换时的数据刷新和性能\r\n */\r\n\r\n// 缓存的数据对象\r\nconst cache = {\r\n  // 页面数据缓存\r\n  pageData: {},\r\n  // 上次刷新时间记录\r\n  lastRefreshTime: {},\r\n  // 是否正在刷新的标记\r\n  refreshing: {}\r\n};\r\n\r\n/**\r\n * 检查页面是否需要刷新\r\n * @param {string} pagePath 页面路径\r\n * @param {number} refreshInterval 刷新间隔时间(毫秒)，默认30秒\r\n * @returns {boolean} 是否需要刷新\r\n */\r\nexport function shouldRefreshPage(pagePath, refreshInterval = 30000) {\r\n  // 获取当前时间\r\n  const now = Date.now();\r\n  // 获取上次刷新时间\r\n  const lastRefresh = cache.lastRefreshTime[pagePath] || 0;\r\n  // 检查是否超过刷新间隔\r\n  return (now - lastRefresh > refreshInterval);\r\n}\r\n\r\n/**\r\n * 触发页面刷新\r\n * @param {string} pagePath 页面路径\r\n * @returns {Promise} 返回刷新结果Promise\r\n */\r\nexport function triggerPageRefresh(pagePath) {\r\n  // 如果已经在刷新，直接返回\r\n  if (cache.refreshing[pagePath]) {\r\n    console.log('页面正在刷新中，跳过:', pagePath);\r\n    return Promise.resolve(false);\r\n  }\r\n\r\n  console.log('触发页面刷新:', pagePath);\r\n  // 标记为正在刷新\r\n  cache.refreshing[pagePath] = true;\r\n  // 更新最后刷新时间\r\n  cache.lastRefreshTime[pagePath] = Date.now();\r\n  \r\n  // 触发刷新事件\r\n  window.dispatchEvent(new CustomEvent('refreshPage', {\r\n    detail: { path: pagePath }\r\n  }));\r\n  \r\n  // 500ms后重置刷新状态\r\n  return new Promise(resolve => {\r\n    setTimeout(() => {\r\n      cache.refreshing[pagePath] = false;\r\n      resolve(true);\r\n    }, 500);\r\n  });\r\n}\r\n\r\n/**\r\n * 清除页面缓存数据\r\n * @param {string} pagePath 页面路径，不传则清除所有缓存\r\n */\r\nexport function clearPageCache(pagePath) {\r\n  if (pagePath) {\r\n    // 清除特定页面缓存\r\n    delete cache.pageData[pagePath];\r\n    console.log('已清除页面缓存:', pagePath);\r\n  } else {\r\n    // 清除所有页面缓存\r\n    cache.pageData = {};\r\n    console.log('已清除所有页面缓存');\r\n  }\r\n}\r\n\r\n/**\r\n * 获取页面缓存数据\r\n * @param {string} pagePath 页面路径\r\n * @param {string} key 缓存键名\r\n * @returns {any} 缓存数据\r\n */\r\nexport function getPageCacheData(pagePath, key) {\r\n  if (!cache.pageData[pagePath]) {\r\n    return null;\r\n  }\r\n  return key ? cache.pageData[pagePath][key] : cache.pageData[pagePath];\r\n}\r\n\r\n/**\r\n * 设置页面缓存数据\r\n * @param {string} pagePath 页面路径\r\n * @param {string} key 缓存键名 \r\n * @param {any} data 要缓存的数据\r\n */\r\nexport function setPageCacheData(pagePath, key, data) {\r\n  if (!cache.pageData[pagePath]) {\r\n    cache.pageData[pagePath] = {};\r\n  }\r\n  \r\n  if (key) {\r\n    cache.pageData[pagePath][key] = data;\r\n  } else {\r\n    cache.pageData[pagePath] = data;\r\n  }\r\n}\r\n\r\n/**\r\n * 预加载页面资源\r\n * @param {string} pagePath 页面路径\r\n */\r\nexport function preloadPageResources(pagePath) {\r\n  // 这里可以根据路径预加载对应页面的资源\r\n  console.log('预加载页面资源:', pagePath);\r\n  // 实际实现可能涉及到预加载JS、CSS、图片等资源\r\n}\r\n\r\nexport default {\r\n  shouldRefreshPage,\r\n  triggerPageRefresh,\r\n  clearPageCache,\r\n  getPageCacheData,\r\n  setPageCacheData,\r\n  preloadPageResources\r\n}; "],"mappings":"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","ignoreList":[]}]}