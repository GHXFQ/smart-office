{"remainingRequest":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\utils\\mockInterceptor.js","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\utils\\mockInterceptor.js","mtime":1747307988197},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\babel.config.js","mtime":1746431728000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\eslint-loader\\index.js","mtime":1746431218000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqDQogKiDmqKHmi5/lkI7nq69BUEnlk43lupTnmoTmi6bmiKrlmagNCiAqLwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwoKLy8g5qih5ouf55So5oi35pWw5o2uCmNvbnN0IG1vY2tVc2VyRGF0YSA9IHsKICBpZDogMSwKICB1c2VybmFtZTogJ2RlbW8nLAogIG5hbWU6ICflvKDnu4/nkIYnLAogIGVtYWlsOiAnemhhbmcubWFuYWdlckBleGFtcGxlLmNvbScsCiAgcGhvbmU6ICcxMzgwMDEzODAwMCcsCiAgYXZhdGFyOiAnJywKICBwb3NpdGlvbjogJ+i9r+S7tuW3peeoi+W4iCcsCiAgZGVwYXJ0bWVudDogJ+aKgOacr+mDqCcsCiAgY29tcGFueTogJ+aZuuiDveenkeaKgOaciemZkOWFrOWPuCcsCiAgYmlvOiAn6L+Z5piv5LiA5Liq566A55+t55qE5Liq5Lq65LuL57uNJywKICBvZmZpY2U6ICfmgLvpg6jlpKfmpbxB5Yy6M+alvCcsCiAgZW1wbG95ZWVfaWQ6ICdFTVAwMDcnLAogIG1hbmFnZXI6ICfmnY7mgLvnm5EnCn07CgovLyDliJ3lp4vljJbmqKHmi5/mi6bmiKrlmagKZXhwb3J0IGZ1bmN0aW9uIHNldHVwTW9ja0ludGVyY2VwdG9yKCkgewogIC8vIOivt+axguaLpuaIquWZqAogIGF4aW9zLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShjb25maWcgPT4gewogICAgLy8g5Li65q+P5Liq6K+35rGC5re75YqgdG9rZW7vvIzku45sb2NhbFN0b3JhZ2Xojrflj5YKICAgIGNvbnN0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7CiAgICBpZiAodG9rZW4pIHsKICAgICAgY29uZmlnLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9IGBCZWFyZXIgJHt0b2tlbn1gOwogICAgfQogICAgcmV0dXJuIGNvbmZpZzsKICB9LCBlcnJvciA9PiB7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogIH0pOwoKICAvLyDlk43lupTmi6bmiKrlmagKICBheGlvcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKHJlc3BvbnNlID0+IHsKICAgIC8vIOebtOaOpei/lOWbnuecn+WunuWTjeW6lAogICAgcmV0dXJuIHJlc3BvbnNlOwogIH0sIGVycm9yID0+IHsKICAgIGlmICghZXJyb3IucmVzcG9uc2UgfHwgZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDQpIHsKICAgICAgY29uc3QgdXJsID0gZXJyb3IuY29uZmlnLnVybDsKCiAgICAgIC8vIOWkhOeQhueUqOaIt0FQSeeahG1vY2vlk43lupQKICAgICAgaWYgKHVybC5pbmNsdWRlcygnL2FwaS91c2Vycy9tZS8nKSkgewogICAgICAgIGlmIChlcnJvci5jb25maWcubWV0aG9kID09PSAnZ2V0JykgewogICAgICAgICAgY29uc29sZS5sb2coJ01vY2s6IOiOt+WPlueUqOaIt+S/oeaBrycpOwogICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7CiAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLAogICAgICAgICAgICAgIGNvZGU6IDIwMCwKICAgICAgICAgICAgICBtZXNzYWdlOiAn6I635Y+W55So5oi35L+h5oGv5oiQ5YqfJywKICAgICAgICAgICAgICBkYXRhOiBtb2NrVXNlckRhdGEKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIGlmIChlcnJvci5jb25maWcubWV0aG9kID09PSAncHV0JykgewogICAgICAgICAgY29uc29sZS5sb2coJ01vY2s6IOabtOaWsOeUqOaIt+S/oeaBrycpOwogICAgICAgICAgLy8g5ZCI5bm25pu05paw55qE5pWw5o2uCiAgICAgICAgICBjb25zdCB1cGRhdGVkRGF0YSA9IEpTT04ucGFyc2UoZXJyb3IuY29uZmlnLmRhdGEpOwogICAgICAgICAgT2JqZWN0LmFzc2lnbihtb2NrVXNlckRhdGEsIHVwZGF0ZWREYXRhKTsKICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoewogICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSwKICAgICAgICAgICAgICBtZXNzYWdlOiAn5pu05paw55So5oi35L+h5oGv5oiQ5YqfJywKICAgICAgICAgICAgICBkYXRhOiBtb2NrVXNlckRhdGEKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CgogICAgICAvLyDlpITnkIblpLTlg4/kuIrkvKDnmoRtb2Nr5ZON5bqUCiAgICAgIGVsc2UgaWYgKHVybC5pbmNsdWRlcygnL2FwaS91c2Vycy9hdmF0YXIvJykpIHsKICAgICAgICBjb25zb2xlLmxvZygnTW9jazog5pu05paw55So5oi35aS05YOPJyk7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7CiAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICflpLTlg4/mm7TmlrDmiJDlip8nLAogICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgYXZhdGFyOiAnaHR0cHM6Ly92aWEucGxhY2Vob2xkZXIuY29tLzE1MCcKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CgogICAgICAvLyDlpITnkIblr4bnoIHkv67mlLnnmoRtb2Nr5ZON5bqUCiAgICAgIGVsc2UgaWYgKHVybC5pbmNsdWRlcygnL2FwaS91c2Vycy9jaGFuZ2VfcGFzc3dvcmQvJykpIHsKICAgICAgICBjb25zb2xlLmxvZygnTW9jazog5L+u5pS55a+G56CBJyk7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7CiAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICflr4bnoIHkv67mlLnmiJDlip8nCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KCiAgICAvLyDov5Tlm57ljp/lp4vplJnor68KICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7CiAgfSk7Cn0="},{"version":3,"names":["axios","mockUserData","id","username","name","email","phone","avatar","position","department","company","bio","office","employee_id","manager","setupMockInterceptor","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","error","Promise","reject","response","status","url","includes","method","console","log","resolve","data","success","code","message","updatedData","JSON","parse","Object","assign"],"sources":["C:/Users/18083/Desktop/CCIT/office/smart-office/frontend/src/utils/mockInterceptor.js"],"sourcesContent":["/**\r\n * 模拟后端API响应的拦截器\r\n */\r\nimport axios from 'axios';\r\n\r\n// 模拟用户数据\r\nconst mockUserData = {\r\n  id: 1,\r\n  username: 'demo',\r\n  name: '张经理',\r\n  email: 'zhang.manager@example.com',\r\n  phone: '13800138000',\r\n  avatar: '',\r\n  position: '软件工程师', \r\n  department: '技术部',\r\n  company: '智能科技有限公司',\r\n  bio: '这是一个简短的个人介绍',\r\n  office: '总部大楼A区3楼',\r\n  employee_id: 'EMP007',\r\n  manager: '李总监'\r\n};\r\n\r\n// 初始化模拟拦截器\r\nexport function setupMockInterceptor() {\r\n  // 请求拦截器\r\n  axios.interceptors.request.use(\r\n    config => {\r\n      // 为每个请求添加token，从localStorage获取\r\n      const token = localStorage.getItem('token');\r\n      if (token) {\r\n        config.headers.Authorization = `Bearer ${token}`;\r\n      }\r\n      return config;\r\n    },\r\n    error => {\r\n      return Promise.reject(error);\r\n    }\r\n  );\r\n\r\n  // 响应拦截器\r\n  axios.interceptors.response.use(\r\n    response => {\r\n      // 直接返回真实响应\r\n      return response;\r\n    },\r\n    error => {\r\n      if (!error.response || error.response.status === 404) {\r\n        const url = error.config.url;\r\n        \r\n        // 处理用户API的mock响应\r\n        if (url.includes('/api/users/me/')) {\r\n          if (error.config.method === 'get') {\r\n            console.log('Mock: 获取用户信息');\r\n            return Promise.resolve({\r\n              data: {\r\n                success: true,\r\n                code: 200,\r\n                message: '获取用户信息成功',\r\n                data: mockUserData\r\n              }\r\n            });\r\n          } else if (error.config.method === 'put') {\r\n            console.log('Mock: 更新用户信息');\r\n            // 合并更新的数据\r\n            const updatedData = JSON.parse(error.config.data);\r\n            Object.assign(mockUserData, updatedData);\r\n            \r\n            return Promise.resolve({\r\n              data: {\r\n                success: true,\r\n                message: '更新用户信息成功',\r\n                data: mockUserData\r\n              }\r\n            });\r\n          }\r\n        } \r\n        \r\n        // 处理头像上传的mock响应\r\n        else if (url.includes('/api/users/avatar/')) {\r\n          console.log('Mock: 更新用户头像');\r\n          return Promise.resolve({\r\n            data: {\r\n              success: true,\r\n              message: '头像更新成功',\r\n              data: {\r\n                avatar: 'https://via.placeholder.com/150'\r\n              }\r\n            }\r\n          });\r\n        } \r\n        \r\n        // 处理密码修改的mock响应\r\n        else if (url.includes('/api/users/change_password/')) {\r\n          console.log('Mock: 修改密码');\r\n          return Promise.resolve({\r\n            data: {\r\n              success: true,\r\n              message: '密码修改成功'\r\n            }\r\n          });\r\n        }\r\n      }\r\n      \r\n      // 返回原始错误\r\n      return Promise.reject(error);\r\n    }\r\n  );\r\n} "],"mappings":"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","ignoreList":[]}]}