{"remainingRequest":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\quill\\core\\composition.js","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\quill\\core\\composition.js","mtime":1751792162013},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\babel.config.js","mtime":1748077811200},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1746431219000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJDOi9Vc2Vycy8xODA4My9EZXNrdG9wL0NDSVQvb2ZmaWNlL3NtYXJ0LW9mZmljZS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmZpbmQuanMiOwppbXBvcnQgRW1iZWQgZnJvbSAnLi4vYmxvdHMvZW1iZWQuanMnOwppbXBvcnQgRW1pdHRlciBmcm9tICcuL2VtaXR0ZXIuanMnOwpjbGFzcyBDb21wb3NpdGlvbiB7CiAgY29uc3RydWN0b3Ioc2Nyb2xsLCBlbWl0dGVyKSB7CiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImlzQ29tcG9zaW5nIiwgZmFsc2UpOwogICAgdGhpcy5zY3JvbGwgPSBzY3JvbGw7CiAgICB0aGlzLmVtaXR0ZXIgPSBlbWl0dGVyOwogICAgdGhpcy5zZXR1cExpc3RlbmVycygpOwogIH0KICBzZXR1cExpc3RlbmVycygpIHsKICAgIHRoaXMuc2Nyb2xsLmRvbU5vZGUuYWRkRXZlbnRMaXN0ZW5lcignY29tcG9zaXRpb25zdGFydCcsIGV2ZW50ID0+IHsKICAgICAgaWYgKCF0aGlzLmlzQ29tcG9zaW5nKSB7CiAgICAgICAgdGhpcy5oYW5kbGVDb21wb3NpdGlvblN0YXJ0KGV2ZW50KTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLnNjcm9sbC5kb21Ob2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbXBvc2l0aW9uZW5kJywgZXZlbnQgPT4gewogICAgICBpZiAodGhpcy5pc0NvbXBvc2luZykgewogICAgICAgIC8vIFdlYmtpdCBtYWtlcyBET00gY2hhbmdlcyBhZnRlciBjb21wb3NpdGlvbmVuZCwgc28gd2UgdXNlIG1pY3JvdGFzayB0bwogICAgICAgIC8vIGVuc3VyZSB0aGUgb3JkZXIuCiAgICAgICAgLy8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTMxOTAyCiAgICAgICAgcXVldWVNaWNyb3Rhc2soKCkgPT4gewogICAgICAgICAgdGhpcy5oYW5kbGVDb21wb3NpdGlvbkVuZChldmVudCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogIH0KICBoYW5kbGVDb21wb3NpdGlvblN0YXJ0KGV2ZW50KSB7CiAgICBjb25zdCBibG90ID0gZXZlbnQudGFyZ2V0IGluc3RhbmNlb2YgTm9kZSA/IHRoaXMuc2Nyb2xsLmZpbmQoZXZlbnQudGFyZ2V0LCB0cnVlKSA6IG51bGw7CiAgICBpZiAoYmxvdCAmJiAhKGJsb3QgaW5zdGFuY2VvZiBFbWJlZCkpIHsKICAgICAgdGhpcy5lbWl0dGVyLmVtaXQoRW1pdHRlci5ldmVudHMuQ09NUE9TSVRJT05fQkVGT1JFX1NUQVJULCBldmVudCk7CiAgICAgIHRoaXMuc2Nyb2xsLmJhdGNoU3RhcnQoKTsKICAgICAgdGhpcy5lbWl0dGVyLmVtaXQoRW1pdHRlci5ldmVudHMuQ09NUE9TSVRJT05fU1RBUlQsIGV2ZW50KTsKICAgICAgdGhpcy5pc0NvbXBvc2luZyA9IHRydWU7CiAgICB9CiAgfQogIGhhbmRsZUNvbXBvc2l0aW9uRW5kKGV2ZW50KSB7CiAgICB0aGlzLmVtaXR0ZXIuZW1pdChFbWl0dGVyLmV2ZW50cy5DT01QT1NJVElPTl9CRUZPUkVfRU5ELCBldmVudCk7CiAgICB0aGlzLnNjcm9sbC5iYXRjaEVuZCgpOwogICAgdGhpcy5lbWl0dGVyLmVtaXQoRW1pdHRlci5ldmVudHMuQ09NUE9TSVRJT05fRU5ELCBldmVudCk7CiAgICB0aGlzLmlzQ29tcG9zaW5nID0gZmFsc2U7CiAgfQp9CmV4cG9ydCBkZWZhdWx0IENvbXBvc2l0aW9uOw=="},{"version":3,"names":["Embed","Emitter","Composition","constructor","scroll","emitter","_defineProperty","setupListeners","domNode","addEventListener","event","isComposing","handleCompositionStart","queueMicrotask","handleCompositionEnd","blot","target","Node","find","emit","events","COMPOSITION_BEFORE_START","batchStart","COMPOSITION_START","COMPOSITION_BEFORE_END","batchEnd","COMPOSITION_END"],"sources":["../../src/core/composition.ts"],"sourcesContent":["import Embed from '../blots/embed.js';\nimport type Scroll from '../blots/scroll.js';\nimport Emitter from './emitter.js';\n\nclass Composition {\n  isComposing = false;\n\n  constructor(\n    private scroll: Scroll,\n    private emitter: Emitter,\n  ) {\n    this.setupListeners();\n  }\n\n  private setupListeners() {\n    this.scroll.domNode.addEventListener('compositionstart', (event) => {\n      if (!this.isComposing) {\n        this.handleCompositionStart(event);\n      }\n    });\n\n    this.scroll.domNode.addEventListener('compositionend', (event) => {\n      if (this.isComposing) {\n        // Webkit makes DOM changes after compositionend, so we use microtask to\n        // ensure the order.\n        // https://bugs.webkit.org/show_bug.cgi?id=31902\n        queueMicrotask(() => {\n          this.handleCompositionEnd(event);\n        });\n      }\n    });\n  }\n\n  private handleCompositionStart(event: CompositionEvent) {\n    const blot =\n      event.target instanceof Node\n        ? this.scroll.find(event.target, true)\n        : null;\n\n    if (blot && !(blot instanceof Embed)) {\n      this.emitter.emit(Emitter.events.COMPOSITION_BEFORE_START, event);\n      this.scroll.batchStart();\n      this.emitter.emit(Emitter.events.COMPOSITION_START, event);\n      this.isComposing = true;\n    }\n  }\n\n  private handleCompositionEnd(event: CompositionEvent) {\n    this.emitter.emit(Emitter.events.COMPOSITION_BEFORE_END, event);\n    this.scroll.batchEnd();\n    this.emitter.emit(Emitter.events.COMPOSITION_END, event);\n    this.isComposing = false;\n  }\n}\n\nexport default Composition;\n"],"mappings":";;;AAAA,OAAOA,KAAK,MAAM,mBAAmB;AAErC,OAAOC,OAAO,MAAM,cAAc;AAElC,MAAMC,WAAW,CAAC;EAGhBC,WAAWA,CACDC,MAAc,EACdC,OAAgB,EACxB;IAAAC,eAAA,sBALY,KAAK;IAKjB,KAFQF,MAAc,GAAdA,MAAc;IAAA,KACdC,OAAgB,GAAhBA,OAAgB;IAExB,IAAI,CAACE,cAAc,CAAC,CAAC;EACvB;EAEQA,cAAcA,CAAA,EAAG;IACvB,IAAI,CAACH,MAAM,CAACI,OAAO,CAACC,gBAAgB,CAAC,kBAAkB,EAAGC,KAAK,IAAK;MAClE,IAAI,CAAC,IAAI,CAACC,WAAW,EAAE;QACrB,IAAI,CAACC,sBAAsB,CAACF,KAAK,CAAC;MACpC;IACF,CAAC,CAAC;IAEF,IAAI,CAACN,MAAM,CAACI,OAAO,CAACC,gBAAgB,CAAC,gBAAgB,EAAGC,KAAK,IAAK;MAChE,IAAI,IAAI,CAACC,WAAW,EAAE;QACpB;QACA;QACA;QACAE,cAAc,CAAC,MAAM;UACnB,IAAI,CAACC,oBAAoB,CAACJ,KAAK,CAAC;QAClC,CAAC,CAAC;MACJ;IACF,CAAC,CAAC;EACJ;EAEQE,sBAAsBA,CAACF,KAAuB,EAAE;IACtD,MAAMK,IAAI,GACRL,KAAK,CAACM,MAAM,YAAYC,IAAI,GACxB,IAAI,CAACb,MAAM,CAACc,IAAI,CAACR,KAAK,CAACM,MAAM,EAAE,IAAI,CAAC,GACpC,IAAI;IAEV,IAAID,IAAI,IAAI,EAAEA,IAAI,YAAYf,KAAK,CAAC,EAAE;MACpC,IAAI,CAACK,OAAO,CAACc,IAAI,CAAClB,OAAO,CAACmB,MAAM,CAACC,wBAAwB,EAAEX,KAAK,CAAC;MACjE,IAAI,CAACN,MAAM,CAACkB,UAAU,CAAC,CAAC;MACxB,IAAI,CAACjB,OAAO,CAACc,IAAI,CAAClB,OAAO,CAACmB,MAAM,CAACG,iBAAiB,EAAEb,KAAK,CAAC;MAC1D,IAAI,CAACC,WAAW,GAAG,IAAI;IACzB;EACF;EAEQG,oBAAoBA,CAACJ,KAAuB,EAAE;IACpD,IAAI,CAACL,OAAO,CAACc,IAAI,CAAClB,OAAO,CAACmB,MAAM,CAACI,sBAAsB,EAAEd,KAAK,CAAC;IAC/D,IAAI,CAACN,MAAM,CAACqB,QAAQ,CAAC,CAAC;IACtB,IAAI,CAACpB,OAAO,CAACc,IAAI,CAAClB,OAAO,CAACmB,MAAM,CAACM,eAAe,EAAEhB,KAAK,CAAC;IACxD,IAAI,CAACC,WAAW,GAAG,KAAK;EAC1B;AACF;AAEA,eAAeT,WAAW","ignoreList":[]}]}