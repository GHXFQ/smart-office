{"remainingRequest":"C:\\Users\\18083\\Desktop\\新建文件夹 (3)\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18083\\Desktop\\新建文件夹 (3)\\smart-office\\frontend\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\18083\\Desktop\\新建文件夹 (3)\\smart-office\\frontend\\src\\api\\auth.js","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\新建文件夹 (3)\\smart-office\\frontend\\src\\api\\auth.js","mtime":1746543882443},{"path":"C:\\Users\\18083\\Desktop\\新建文件夹 (3)\\smart-office\\frontend\\babel.config.js","mtime":1746431728272},{"path":"C:\\Users\\18083\\Desktop\\新建文件夹 (3)\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218359},{"path":"C:\\Users\\18083\\Desktop\\新建文件夹 (3)\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202324},{"path":"C:\\Users\\18083\\Desktop\\新建文件夹 (3)\\smart-office\\frontend\\node_modules\\eslint-loader\\index.js","mtime":1746431218362}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwoKLy8g5Yib5bu6IGF4aW9zIOWunuS+iwpjb25zdCBzZXJ2aWNlID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiBwcm9jZXNzLmVudi5WVUVfQVBQX0FQSV9CQVNFX1VSTCB8fCAnL2FwaScsCiAgdGltZW91dDogMTAwMDAKfSk7CgovLyDor7fmsYLmi6bmiKrlmagKc2VydmljZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoY29uZmlnID0+IHsKICAvLyDku45sb2NhbFN0b3JhZ2Xojrflj5Z0b2tlbuW5tua3u+WKoOWIsOivt+axguWktAogIGNvbnN0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7CiAgaWYgKHRva2VuKSB7CiAgICBjb25maWcuaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gYEJlYXJlciAke3Rva2VufWA7CiAgfQogIHJldHVybiBjb25maWc7Cn0sIGVycm9yID0+IHsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKCi8vIOWTjeW6lOaLpuaIquWZqApzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UocmVzcG9uc2UgPT4gewogIGNvbnN0IHJlcyA9IHJlc3BvbnNlLmRhdGE7CiAgLy8g5aaC5p6c54q25oCB56CB5LiN5pivMjAw77yM6K6k5Li66K+35rGC5byC5bi4CiAgaWYgKHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwICYmICFyZXMuc3VjY2VzcykgewogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihyZXMubWVzc2FnZSB8fCAn5pyq55+l6ZSZ6K+vJykpOwogIH0KICByZXR1cm4gcmVzOwp9LCBlcnJvciA9PiB7CiAgbGV0IG1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlIHx8ICfor7fmsYLlpLHotKUnOwogIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgLy8g5aSE55CG5ZCO56uv6L+U5Zue55qE6ZSZ6K+v5L+h5oGvCiAgICBjb25zdCBkYXRhID0gZXJyb3IucmVzcG9uc2UuZGF0YTsKICAgIG1lc3NhZ2UgPSBkYXRhLm1lc3NhZ2UgfHwgJ+acjeWKoeWZqOmUmeivryc7CgogICAgLy8g5aSE55CGNDAx6ZSZ6K+v77yM5Y+v6IO95pivdG9rZW7ov4fmnJ8KICAgIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwMSkgewogICAgICAvLyDmuIXpmaR0b2tlbuW5tumHjeWumuWQkeWIsOeZu+W9lemhtQogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTsKICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2xvZ2luJzsKICAgIH0KICB9CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihtZXNzYWdlKSk7Cn0pOwoKLyoqDQogKiDnlKjmiLfnmbvlvZUNCiAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIOeZu+W9leS/oeaBrw0KICogQHJldHVybnMge1Byb21pc2V9DQogKi8KZXhwb3J0IGZ1bmN0aW9uIGxvZ2luKGRhdGEpIHsKICByZXR1cm4gc2VydmljZSh7CiAgICB1cmw6ICcvdXNlcnMvbG9naW4vJywKICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgZGF0YQogIH0pOwp9CgovKioNCiAqIOeUqOaIt+azqOWGjA0KICogQHBhcmFtIHtPYmplY3R9IGRhdGEg5rOo5YaM5L+h5oGvDQogKiBAcmV0dXJucyB7UHJvbWlzZX0NCiAqLwpleHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXIoZGF0YSkgewogIHJldHVybiBzZXJ2aWNlKHsKICAgIHVybDogJy91c2Vycy9yZWdpc3Rlci8nLAogICAgbWV0aG9kOiAncG9zdCcsCiAgICBkYXRhCiAgfSk7Cn0KCi8qKg0KICog6YCA5Ye655m75b2VDQogKiBAcmV0dXJucyB7UHJvbWlzZX0NCiAqLwpleHBvcnQgZnVuY3Rpb24gbG9nb3V0KCkgewogIHJldHVybiBzZXJ2aWNlKHsKICAgIHVybDogJy91c2Vycy9sb2dvdXQvJywKICAgIG1ldGhvZDogJ3Bvc3QnCiAgfSk7Cn0KCi8qKg0KICog6K+35rGC6YeN572u5a+G56CBDQogKiBAcGFyYW0ge09iamVjdH0gZGF0YSDljIXlkKvpgq7nrrHnmoTlr7nosaENCiAqIEByZXR1cm5zIHtQcm9taXNlfQ0KICovCmV4cG9ydCBmdW5jdGlvbiByZXF1ZXN0UGFzc3dvcmRSZXNldChkYXRhKSB7CiAgcmV0dXJuIHNlcnZpY2UoewogICAgdXJsOiAnL3VzZXJzL3Bhc3N3b3JkL3JlcXVlc3QtcmVzZXQvJywKICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgZGF0YQogIH0pOwp9CgovKioNCiAqIOmHjee9ruWvhueggQ0KICogQHBhcmFtIHtPYmplY3R9IGRhdGEg6YeN572u5a+G56CB5omA6ZyA5pWw5o2uDQogKiBAcmV0dXJucyB7UHJvbWlzZX0NCiAqLwpleHBvcnQgZnVuY3Rpb24gcmVzZXRQYXNzd29yZChkYXRhKSB7CiAgcmV0dXJuIHNlcnZpY2UoewogICAgdXJsOiAnL3VzZXJzL3Bhc3N3b3JkL3Jlc2V0LycsCiAgICBtZXRob2Q6ICdwb3N0JywKICAgIGRhdGEKICB9KTsKfQpleHBvcnQgZGVmYXVsdCB7CiAgbG9naW4sCiAgcmVnaXN0ZXIsCiAgbG9nb3V0LAogIHJlcXVlc3RQYXNzd29yZFJlc2V0LAogIHJlc2V0UGFzc3dvcmQKfTs="},{"version":3,"names":["axios","service","create","baseURL","process","env","VUE_APP_API_BASE_URL","timeout","interceptors","request","use","config","token","localStorage","getItem","headers","error","Promise","reject","response","res","data","status","success","Error","message","removeItem","window","location","href","login","url","method","register","logout","requestPasswordReset","resetPassword"],"sources":["C:/Users/18083/Desktop/新建文件夹 (3)/smart-office/frontend/src/api/auth.js"],"sourcesContent":["import axios from 'axios';\r\n\r\n// 创建 axios 实例\r\nconst service = axios.create({\r\n  baseURL: process.env.VUE_APP_API_BASE_URL || '/api',\r\n  timeout: 10000,\r\n});\r\n\r\n// 请求拦截器\r\nservice.interceptors.request.use(\r\n  (config) => {\r\n    // 从localStorage获取token并添加到请求头\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      config.headers['Authorization'] = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// 响应拦截器\r\nservice.interceptors.response.use(\r\n  (response) => {\r\n    const res = response.data;\r\n    // 如果状态码不是200，认为请求异常\r\n    if (response.status !== 200 && !res.success) {\r\n      return Promise.reject(new Error(res.message || '未知错误'));\r\n    }\r\n    return res;\r\n  },\r\n  (error) => {\r\n    let message = error.message || '请求失败';\r\n    if (error.response) {\r\n      // 处理后端返回的错误信息\r\n      const data = error.response.data;\r\n      message = data.message || '服务器错误';\r\n      \r\n      // 处理401错误，可能是token过期\r\n      if (error.response.status === 401) {\r\n        // 清除token并重定向到登录页\r\n        localStorage.removeItem('token');\r\n        window.location.href = '/login';\r\n      }\r\n    }\r\n    return Promise.reject(new Error(message));\r\n  }\r\n);\r\n\r\n/**\r\n * 用户登录\r\n * @param {Object} data 登录信息\r\n * @returns {Promise}\r\n */\r\nexport function login(data) {\r\n  return service({\r\n    url: '/users/login/',\r\n    method: 'post',\r\n    data\r\n  });\r\n}\r\n\r\n/**\r\n * 用户注册\r\n * @param {Object} data 注册信息\r\n * @returns {Promise}\r\n */\r\nexport function register(data) {\r\n  return service({\r\n    url: '/users/register/',\r\n    method: 'post',\r\n    data\r\n  });\r\n}\r\n\r\n/**\r\n * 退出登录\r\n * @returns {Promise}\r\n */\r\nexport function logout() {\r\n  return service({\r\n    url: '/users/logout/',\r\n    method: 'post'\r\n  });\r\n}\r\n\r\n/**\r\n * 请求重置密码\r\n * @param {Object} data 包含邮箱的对象\r\n * @returns {Promise}\r\n */\r\nexport function requestPasswordReset(data) {\r\n  return service({\r\n    url: '/users/password/request-reset/',\r\n    method: 'post',\r\n    data\r\n  });\r\n}\r\n\r\n/**\r\n * 重置密码\r\n * @param {Object} data 重置密码所需数据\r\n * @returns {Promise}\r\n */\r\nexport function resetPassword(data) {\r\n  return service({\r\n    url: '/users/password/reset/',\r\n    method: 'post',\r\n    data\r\n  });\r\n}\r\n\r\nexport default {\r\n  login,\r\n  register,\r\n  logout,\r\n  requestPasswordReset,\r\n  resetPassword\r\n}; "],"mappings":"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","ignoreList":[]}]}