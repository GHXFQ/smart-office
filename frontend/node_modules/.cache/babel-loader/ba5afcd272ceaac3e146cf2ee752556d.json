{"remainingRequest":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\admin\\KnowledgeManagement.vue?vue&type=script&setup=true&lang=js","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\admin\\KnowledgeManagement.vue","mtime":1750393064176},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\babel.config.js","mtime":1748077811200},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1746431219000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1746431218000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5ldmVyeS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLnNvbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zZXQuZGlmZmVyZW5jZS52Mi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnNldC5pbnRlcnNlY3Rpb24udjIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zZXQuaXMtZGlzam9pbnQtZnJvbS52Mi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnNldC5pcy1zdWJzZXQtb2YudjIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zZXQuaXMtc3VwZXJzZXQtb2YudjIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zZXQuc3ltbWV0cmljLWRpZmZlcmVuY2UudjIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zZXQudW5pb24udjIuanMiOwppbXBvcnQgeyB1bnJlZiBhcyBfdW5yZWYsIGNyZWF0ZVZOb2RlIGFzIF9jcmVhdGVWTm9kZSwgd2l0aEN0eCBhcyBfd2l0aEN0eCwgY3JlYXRlRWxlbWVudFZOb2RlIGFzIF9jcmVhdGVFbGVtZW50Vk5vZGUsIGNyZWF0ZVRleHRWTm9kZSBhcyBfY3JlYXRlVGV4dFZOb2RlLCB0b0Rpc3BsYXlTdHJpbmcgYXMgX3RvRGlzcGxheVN0cmluZywgcmVzb2x2ZURpcmVjdGl2ZSBhcyBfcmVzb2x2ZURpcmVjdGl2ZSwgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUJsb2NrIGFzIF9jcmVhdGVCbG9jaywgd2l0aERpcmVjdGl2ZXMgYXMgX3dpdGhEaXJlY3RpdmVzLCBjcmVhdGVFbGVtZW50QmxvY2sgYXMgX2NyZWF0ZUVsZW1lbnRCbG9jaywgY3JlYXRlQ29tbWVudFZOb2RlIGFzIF9jcmVhdGVDb21tZW50Vk5vZGUsIHJlbmRlckxpc3QgYXMgX3JlbmRlckxpc3QsIEZyYWdtZW50IGFzIF9GcmFnbWVudCwgcmVzb2x2ZUR5bmFtaWNDb21wb25lbnQgYXMgX3Jlc29sdmVEeW5hbWljQ29tcG9uZW50LCBub3JtYWxpemVTdHlsZSBhcyBfbm9ybWFsaXplU3R5bGUsIHdpdGhNb2RpZmllcnMgYXMgX3dpdGhNb2RpZmllcnMsIG5vcm1hbGl6ZUNsYXNzIGFzIF9ub3JtYWxpemVDbGFzcywgcmVzb2x2ZUNvbXBvbmVudCBhcyBfcmVzb2x2ZUNvbXBvbmVudCB9IGZyb20gInZ1ZSI7CmNvbnN0IF9ob2lzdGVkXzEgPSB7CiAgY2xhc3M6ICJtYW5hZ2VtZW50LWNvbnRhaW5lciIKfTsKY29uc3QgX2hvaXN0ZWRfMiA9IHsKICBjbGFzczogImNhcmQtaGVhZGVyIgp9Owpjb25zdCBfaG9pc3RlZF8zID0gewogIGNsYXNzOiAiaGVhZGVyLWxlZnQiCn07CmNvbnN0IF9ob2lzdGVkXzQgPSB7CiAgY2xhc3M6ICJoZWFkZXItcmlnaHQiCn07CmNvbnN0IF9ob2lzdGVkXzUgPSB7CiAgY2xhc3M6ICJjYXRlZ29yeS1kaWFsb2ctY29udGVudCIKfTsKY29uc3QgX2hvaXN0ZWRfNiA9IHsKICBjbGFzczogImNhdGVnb3J5LWxpc3Qtc2VjdGlvbiIKfTsKY29uc3QgX2hvaXN0ZWRfNyA9IHsKICBjbGFzczogInNlY3Rpb24taGVhZGVyIgp9Owpjb25zdCBfaG9pc3RlZF84ID0gewogIGtleTogMCwKICBjbGFzczogImNhdGVnb3J5LWl0ZW1zIgp9Owpjb25zdCBfaG9pc3RlZF85ID0gewogIGtleTogMSwKICBjbGFzczogImNhdGVnb3J5LWl0ZW1zIgp9Owpjb25zdCBfaG9pc3RlZF8xMCA9IFsib25DbGljayJdOwpjb25zdCBfaG9pc3RlZF8xMSA9IHsKICBjbGFzczogImNhdGVnb3J5LWluZm8iCn07CmNvbnN0IF9ob2lzdGVkXzEyID0gewogIGNsYXNzOiAiY2F0ZWdvcnktbmFtZS1zZWN0aW9uIgp9Owpjb25zdCBfaG9pc3RlZF8xMyA9IHsKICBjbGFzczogImNhdGVnb3J5LWFjdGlvbnMiCn07CmNvbnN0IF9ob2lzdGVkXzE0ID0gewogIGNsYXNzOiAiY2F0ZWdvcnktZm9ybS1zZWN0aW9uIgp9Owpjb25zdCBfaG9pc3RlZF8xNSA9IHsKICBjbGFzczogInNlY3Rpb24taGVhZGVyIgp9Owpjb25zdCBfaG9pc3RlZF8xNiA9IHsKICBzdHlsZTogewogICAgImRpc3BsYXkiOiAiZmxleCIsCiAgICAiYWxpZ24taXRlbXMiOiAiY2VudGVyIgogIH0KfTsKY29uc3QgX2hvaXN0ZWRfMTcgPSB7CiAga2V5OiAwCn07CmNvbnN0IF9ob2lzdGVkXzE4ID0gewogIGNsYXNzOiAiZmlsZS1pbmZvIgp9Owpjb25zdCBfaG9pc3RlZF8xOSA9IHsKICBzdHlsZTogewogICAgImRpc3BsYXkiOiAiaW5saW5lLWJsb2NrIgogIH0KfTsKY29uc3QgX2hvaXN0ZWRfMjAgPSB7CiAgY2xhc3M6ICJidWlsZC1mb290ZXIiCn07CmltcG9ydCB7IHJlZiwgcmVhY3RpdmUsIG9uTW91bnRlZCwgY29tcHV0ZWQgfSBmcm9tICd2dWUnOwppbXBvcnQgYWRtaW5BcGkgZnJvbSAnQC9hcGkvYWRtaW4nOwppbXBvcnQgeyBFbE1lc3NhZ2UsIEVsTWVzc2FnZUJveCwgRWxDYXJkLCBFbEljb24sIEVsSW5wdXQsIEVsQnV0dG9uLCBFbFRhYmxlLCBFbFRhYmxlQ29sdW1uLCBFbFBhZ2luYXRpb24sIEVsRGlhbG9nLCBFbEZvcm0sIEVsRm9ybUl0ZW0sIEVsU2VsZWN0LCBFbE9wdGlvbiwgRWxVcGxvYWQsIEVsQ29sb3JQaWNrZXIsIEVsRW1wdHksIEVsVG9vbHRpcCB9IGZyb20gJ2VsZW1lbnQtcGx1cyc7CmltcG9ydCB7IENvbGxlY3Rpb24sIFNlYXJjaCwgVXBsb2FkLCBFZGl0LCBEZWxldGUsIFBsdXMsIERvY3VtZW50LCBGb2xkZXIsIERhdGFBbmFseXNpcywgVHJlbmRDaGFydHMsIFJlYWRpbmcsIE1hZ2ljU3RpY2ssIExvYWRpbmcsIFJlZnJlc2ggfSBmcm9tICdAZWxlbWVudC1wbHVzL2ljb25zLXZ1ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBfX25hbWU6ICdLbm93bGVkZ2VNYW5hZ2VtZW50JywKICBzZXR1cChfX3Byb3BzKSB7CiAgICBjb25zdCBhcnRpY2xlcyA9IHJlZihbXSk7CiAgICBjb25zdCBjYXRlZ29yaWVzID0gcmVmKFtdKTsKICAgIGNvbnN0IGNvbXBhbmllcyA9IHJlZihbXSk7CiAgICBjb25zdCBsb2FkaW5nID0gcmVmKHRydWUpOwogICAgY29uc3Qgc2VhcmNoUXVlcnkgPSByZWYoJycpOwogICAgY29uc3QgdG90YWwgPSByZWYoMCk7CiAgICBjb25zdCBwYWdpbmF0aW9uID0gcmVhY3RpdmUoewogICAgICBwYWdlOiAxLAogICAgICBwYWdlU2l6ZTogMTAKICAgIH0pOwogICAgY29uc3QgaXNDYXRlZ29yeU1vZGFsT3BlbiA9IHJlZihmYWxzZSk7CiAgICBjb25zdCBpc1NpbmdsZUNhdGVnb3J5TW9kYWxPcGVuID0gcmVmKGZhbHNlKTsKICAgIGNvbnN0IGN1cnJlbnRDYXRlZ29yeSA9IHJlZih7fSk7CiAgICBjb25zdCBjYXRlZ29yeUZvcm0gPSByZWYobnVsbCk7CiAgICBjb25zdCBpc0VkaXRpbmdDYXRlZ29yeSA9IGNvbXB1dGVkKCgpID0+ICEhY3VycmVudENhdGVnb3J5LnZhbHVlLmlkKTsKICAgIGNvbnN0IGF2YWlsYWJsZUljb25zID0gW3sKICAgICAgbmFtZTogJ0RvY3VtZW50JywKICAgICAgbGFiZWw6ICfmlofmoaMnLAogICAgICBjb21wb25lbnQ6IERvY3VtZW50CiAgICB9LCB7CiAgICAgIG5hbWU6ICdGb2xkZXInLAogICAgICBsYWJlbDogJ+aWh+S7tuWkuScsCiAgICAgIGNvbXBvbmVudDogRm9sZGVyCiAgICB9LCB7CiAgICAgIG5hbWU6ICdEYXRhQW5hbHlzaXMnLAogICAgICBsYWJlbDogJ+aVsOaNruWIhuaekCcsCiAgICAgIGNvbXBvbmVudDogRGF0YUFuYWx5c2lzCiAgICB9LCB7CiAgICAgIG5hbWU6ICdUcmVuZENoYXJ0cycsCiAgICAgIGxhYmVsOiAn6LaL5Yq/5Zu+JywKICAgICAgY29tcG9uZW50OiBUcmVuZENoYXJ0cwogICAgfSwgewogICAgICBuYW1lOiAnUmVhZGluZycsCiAgICAgIGxhYmVsOiAn6ZiF6K+7JywKICAgICAgY29tcG9uZW50OiBSZWFkaW5nCiAgICB9LCB7CiAgICAgIG5hbWU6ICdNYWdpY1N0aWNrJywKICAgICAgbGFiZWw6ICfprZTmnK/mo5InLAogICAgICBjb21wb25lbnQ6IE1hZ2ljU3RpY2sKICAgIH1dOwogICAgY29uc3QgaXNBcnRpY2xlTW9kYWxPcGVuID0gcmVmKGZhbHNlKTsKICAgIGNvbnN0IGN1cnJlbnRBcnRpY2xlID0gcmVmKHt9KTsKICAgIGNvbnN0IGFydGljbGVGb3JtID0gcmVmKG51bGwpOwogICAgY29uc3QgY29tcGFueUNhdGVnb3JpZXMgPSByZWYoW10pOwogICAgY29uc3QgdXBsb2FkID0gcmVmKG51bGwpOwogICAgY29uc3Qgc2hvd1VwbG9hZCA9IHJlZihmYWxzZSk7CiAgICBjb25zdCBpc0J1aWxkTW9kYWxPcGVuID0gcmVmKGZhbHNlKTsKICAgIGNvbnN0IGJ1aWxkU3RhdHVzZXMgPSByZWYoW10pOwogICAgY29uc3QgaXNCdWlsZFN0YXR1c0xvYWRpbmcgPSByZWYoZmFsc2UpOwogICAgY29uc3Qgc2VsZWN0ZWRDb21wYW55SWRzID0gcmVmKFtdKTsKICAgIGNvbnN0IGJ1aWxkaW5nQ29tcGFueUlkcyA9IHJlZihuZXcgU2V0KCkpOwogICAgbGV0IHN0YXR1c1BvbGxJbnRlcnZhbCA9IG51bGw7CiAgICBsZXQgc2VhcmNoVGltZW91dCA9IG51bGw7CiAgICBjb25zdCBmZXRjaENhdGVnb3JpZXMgPSBhc3luYyAoKSA9PiB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhZG1pbkFwaS5nZXRLbm93bGVkZ2VDYXRlZ29yaWVzKHsKICAgICAgICAgIGFsbDogJ3RydWUnCiAgICAgICAgfSk7CiAgICAgICAgY2F0ZWdvcmllcy52YWx1ZSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfojrflj5bliIbnsbvliJfooajlpLHotKUnKTsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IGZldGNoQ29tcGFuaWVzID0gYXN5bmMgKCkgPT4gewogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYWRtaW5BcGkuZ2V0Q29tcGFuaWVzKHsKICAgICAgICAgIGFsbDogJ3RydWUnCiAgICAgICAgfSk7CiAgICAgICAgY29tcGFuaWVzLnZhbHVlID0gcmVzcG9uc2UuZGF0YTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+iOt+WPluWFrOWPuOWIl+ihqOWksei0pScpOwogICAgICB9CiAgICB9OwogICAgY29uc3Qgb3BlbkNhdGVnb3J5TW9kYWwgPSBhc3luYyAoKSA9PiB7CiAgICAgIGF3YWl0IGZldGNoQ29tcGFuaWVzKCk7CiAgICAgIGF3YWl0IGZldGNoQ2F0ZWdvcmllcygpOwogICAgICByZXNldENhdGVnb3J5Rm9ybSgpOwogICAgICBpc0NhdGVnb3J5TW9kYWxPcGVuLnZhbHVlID0gdHJ1ZTsKICAgIH07CiAgICBjb25zdCBjbG9zZVNpbmdsZUNhdGVnb3J5TW9kYWwgPSAoKSA9PiB7CiAgICAgIHZhciBfY2F0ZWdvcnlGb3JtJHZhbHVlOwogICAgICBpc1NpbmdsZUNhdGVnb3J5TW9kYWxPcGVuLnZhbHVlID0gZmFsc2U7CiAgICAgIGN1cnJlbnRDYXRlZ29yeS52YWx1ZSA9IHt9OwogICAgICAoX2NhdGVnb3J5Rm9ybSR2YWx1ZSA9IGNhdGVnb3J5Rm9ybS52YWx1ZSkgPT09IG51bGwgfHwgX2NhdGVnb3J5Rm9ybSR2YWx1ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NhdGVnb3J5Rm9ybSR2YWx1ZS5yZXNldEZpZWxkcygpOwogICAgfTsKICAgIGNvbnN0IHJlc2V0Q2F0ZWdvcnlGb3JtID0gKCkgPT4gewogICAgICB2YXIgX2NhdGVnb3J5Rm9ybSR2YWx1ZTI7CiAgICAgIGN1cnJlbnRDYXRlZ29yeS52YWx1ZSA9IHsKICAgICAgICBpZDogbnVsbCwKICAgICAgICBuYW1lOiAnJywKICAgICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgICAgaWNvbjogJ0RvY3VtZW50JywKICAgICAgICBjb2xvcjogJyM0MDlFRkYnLAogICAgICAgIGNvbXBhbnk6IG51bGwKICAgICAgfTsKICAgICAgKF9jYXRlZ29yeUZvcm0kdmFsdWUyID0gY2F0ZWdvcnlGb3JtLnZhbHVlKSA9PT0gbnVsbCB8fCBfY2F0ZWdvcnlGb3JtJHZhbHVlMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NhdGVnb3J5Rm9ybSR2YWx1ZTIucmVzZXRGaWVsZHMoKTsKICAgIH07CiAgICBjb25zdCBzZWxlY3RDYXRlZ29yeUZvckVkaXQgPSBjYXRlZ29yeSA9PiB7CiAgICAgIGN1cnJlbnRDYXRlZ29yeS52YWx1ZSA9IHsKICAgICAgICAuLi5jYXRlZ29yeQogICAgICB9OwogICAgfTsKICAgIGNvbnN0IHNhdmVDYXRlZ29yeSA9IGFzeW5jICgpID0+IHsKICAgICAgdHJ5IHsKICAgICAgICBpZiAoY3VycmVudENhdGVnb3J5LnZhbHVlLmlkKSB7CiAgICAgICAgICBhd2FpdCBhZG1pbkFwaS51cGRhdGVLbm93bGVkZ2VDYXRlZ29yeShjdXJyZW50Q2F0ZWdvcnkudmFsdWUuaWQsIGN1cnJlbnRDYXRlZ29yeS52YWx1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGF3YWl0IGFkbWluQXBpLmNyZWF0ZUtub3dsZWRnZUNhdGVnb3J5KGN1cnJlbnRDYXRlZ29yeS52YWx1ZSk7CiAgICAgICAgfQogICAgICAgIEVsTWVzc2FnZS5zdWNjZXNzKCfliIbnsbvkv53lrZjmiJDlip8nKTsKICAgICAgICBjbG9zZVNpbmdsZUNhdGVnb3J5TW9kYWwoKTsKICAgICAgICBmZXRjaENhdGVnb3JpZXMoKTsgLy8gUmVmcmVzaCBsaXN0IGluIHRoZSBiYWNrZ3JvdW5kCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfkv53lrZjliIbnsbvlpLHotKUnKTsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IGNvbmZpcm1EZWxldGVDYXRlZ29yeSA9IGNhdGVnb3J5ID0+IHsKICAgICAgRWxNZXNzYWdlQm94LmNvbmZpcm0oYOehruWumuimgeWIoOmZpOWIhuexuyAiJHtjYXRlZ29yeS5uYW1lfSIg5ZCXP2AsICforablkYonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKGFzeW5jICgpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgYXdhaXQgYWRtaW5BcGkuZGVsZXRlS25vd2xlZGdlQ2F0ZWdvcnkoY2F0ZWdvcnkuaWQpOwogICAgICAgICAgRWxNZXNzYWdlLnN1Y2Nlc3MoJ+WIhuexu+WIoOmZpOaIkOWKnycpOwogICAgICAgICAgZmV0Y2hDYXRlZ29yaWVzKCk7IC8vIFJlZnJlc2ggbGlzdAogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+WIoOmZpOWIhuexu+Wksei0pScpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9OwogICAgY29uc3QgZGVib3VuY2VkRmV0Y2hBcnRpY2xlcyA9ICgpID0+IHsKICAgICAgY2xlYXJUaW1lb3V0KHNlYXJjaFRpbWVvdXQpOwogICAgICBzZWFyY2hUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgcGFnaW5hdGlvbi5wYWdlID0gMTsKICAgICAgICBmZXRjaEFydGljbGVzKCk7CiAgICAgIH0sIDMwMCk7CiAgICB9OwogICAgY29uc3QgZmV0Y2hBcnRpY2xlcyA9IGFzeW5jICgpID0+IHsKICAgICAgbG9hZGluZy52YWx1ZSA9IHRydWU7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcGFyYW1zID0gewogICAgICAgICAgcGFnZTogcGFnaW5hdGlvbi5wYWdlLAogICAgICAgICAgc2l6ZTogcGFnaW5hdGlvbi5wYWdlU2l6ZSwKICAgICAgICAgIHNlYXJjaDogc2VhcmNoUXVlcnkudmFsdWUKICAgICAgICB9OwogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYWRtaW5BcGkuZ2V0S25vd2xlZGdlQmFzZXMocGFyYW1zKTsKICAgICAgICBhcnRpY2xlcy52YWx1ZSA9IHJlc3BvbnNlLmRhdGEucmVzdWx0czsKICAgICAgICB0b3RhbC52YWx1ZSA9IHJlc3BvbnNlLmRhdGEuY291bnQ7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfojrflj5bmlofnq6DliJfooajlpLHotKUnKTsKICAgICAgICBhcnRpY2xlcy52YWx1ZSA9IFtdOwogICAgICAgIHRvdGFsLnZhbHVlID0gMDsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBsb2FkaW5nLnZhbHVlID0gZmFsc2U7CiAgICAgIH0KICAgIH07CiAgICBjb25zdCBvcGVuQXJ0aWNsZU1vZGFsID0gYXN5bmMgKGFydGljbGUgPSB7fSkgPT4gewogICAgICBhd2FpdCBmZXRjaENvbXBhbmllcygpOwogICAgICBjdXJyZW50QXJ0aWNsZS52YWx1ZSA9IHsKICAgICAgICAuLi5hcnRpY2xlCiAgICAgIH07CiAgICAgIGlmIChhcnRpY2xlLmlkKSB7CiAgICAgICAgc2hvd1VwbG9hZC52YWx1ZSA9IGZhbHNlOyAvLyDnvJbovpHmqKHlvI/kuIvvvIzpu5jorqTkuI3mmL7npLrkuIrkvKDnu4Tku7YKICAgICAgfSBlbHNlIHsKICAgICAgICBzaG93VXBsb2FkLnZhbHVlID0gdHJ1ZTsgLy8g5paw5bu65qih5byP5LiL77yM55u05o6l5pi+56S65LiK5Lyg57uE5Lu2CiAgICAgIH0KICAgICAgaWYgKGN1cnJlbnRBcnRpY2xlLnZhbHVlLmNvbXBhbnkpIHsKICAgICAgICBhd2FpdCBmZXRjaENhdGVnb3JpZXNGb3JDb21wYW55KGN1cnJlbnRBcnRpY2xlLnZhbHVlLmNvbXBhbnkpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbXBhbnlDYXRlZ29yaWVzLnZhbHVlID0gW107CiAgICAgIH0KICAgICAgaXNBcnRpY2xlTW9kYWxPcGVuLnZhbHVlID0gdHJ1ZTsKICAgIH07CiAgICBjb25zdCBjbG9zZUFydGljbGVNb2RhbCA9ICgpID0+IHsKICAgICAgdmFyIF91cGxvYWQkdmFsdWUsIF9hcnRpY2xlRm9ybSR2YWx1ZTsKICAgICAgaXNBcnRpY2xlTW9kYWxPcGVuLnZhbHVlID0gZmFsc2U7CiAgICAgIGN1cnJlbnRBcnRpY2xlLnZhbHVlID0ge307CiAgICAgIGNvbXBhbnlDYXRlZ29yaWVzLnZhbHVlID0gW107CiAgICAgIChfdXBsb2FkJHZhbHVlID0gdXBsb2FkLnZhbHVlKSA9PT0gbnVsbCB8fCBfdXBsb2FkJHZhbHVlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdXBsb2FkJHZhbHVlLmNsZWFyRmlsZXMoKTsKICAgICAgKF9hcnRpY2xlRm9ybSR2YWx1ZSA9IGFydGljbGVGb3JtLnZhbHVlKSA9PT0gbnVsbCB8fCBfYXJ0aWNsZUZvcm0kdmFsdWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hcnRpY2xlRm9ybSR2YWx1ZS5yZXNldEZpZWxkcygpOwogICAgfTsKICAgIGNvbnN0IHNhdmVBcnRpY2xlID0gYXN5bmMgKCkgPT4gewogICAgICB0cnkgewogICAgICAgIGNvbnN0IGRhdGFUb1NhdmUgPSB7CiAgICAgICAgICAuLi5jdXJyZW50QXJ0aWNsZS52YWx1ZQogICAgICAgIH07CiAgICAgICAgaWYgKCFkYXRhVG9TYXZlLmlkICYmICFkYXRhVG9TYXZlLm9yaWdpbmFsX2ZpbGUpIHsKICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcign6K+36YCJ5oup5LiA5Liq5paH5Lu25LiK5LygJyk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGlmIChkYXRhVG9TYXZlLmlkKSB7CiAgICAgICAgICBhd2FpdCBhZG1pbkFwaS51cGRhdGVLbm93bGVkZ2VCYXNlKGRhdGFUb1NhdmUuaWQsIGRhdGFUb1NhdmUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhd2FpdCBhZG1pbkFwaS5jcmVhdGVLbm93bGVkZ2VCYXNlKGRhdGFUb1NhdmUpOwogICAgICAgIH0KICAgICAgICBFbE1lc3NhZ2Uuc3VjY2Vzcygn5paH5Lu25L+h5oGv5L+d5a2Y5oiQ5YqfJyk7CiAgICAgICAgY2xvc2VBcnRpY2xlTW9kYWwoKTsKICAgICAgICBmZXRjaEFydGljbGVzKCk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgdmFyIF9lcnJvciRyZXNwb25zZTsKICAgICAgICBjb25zdCBlcnJvck1zZyA9IChfZXJyb3IkcmVzcG9uc2UgPSBlcnJvci5yZXNwb25zZSkgIT09IG51bGwgJiYgX2Vycm9yJHJlc3BvbnNlICE9PSB2b2lkIDAgJiYgX2Vycm9yJHJlc3BvbnNlLmRhdGEgPyBKU09OLnN0cmluZ2lmeShlcnJvci5yZXNwb25zZS5kYXRhKSA6ICfkv53lrZjmlofku7bkv6Hmga/lpLHotKUnOwogICAgICAgIEVsTWVzc2FnZS5lcnJvcihlcnJvck1zZyk7CiAgICAgIH0KICAgIH07CiAgICBjb25zdCBjb25maXJtRGVsZXRlQXJ0aWNsZSA9IGFydGljbGUgPT4gewogICAgICBFbE1lc3NhZ2VCb3guY29uZmlybShg56Gu5a6a6KaB5Yig6Zmk5paH5Lu2ICIke2FydGljbGUudGl0bGV9IiDlkJc/IOi/meWwhuS4gOW5tuWIoOmZpOWFs+iBlOeahOaWh+S7tuWSjOaVsOaNruOAgmAsICforablkYonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKGFzeW5jICgpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgYXdhaXQgYWRtaW5BcGkuZGVsZXRlS25vd2xlZGdlQmFzZShhcnRpY2xlLmlkKTsKICAgICAgICAgIEVsTWVzc2FnZS5zdWNjZXNzKCfmlofku7bliKDpmaTmiJDlip8nKTsKICAgICAgICAgIGZldGNoQXJ0aWNsZXMoKTsgLy8gUmVmcmVzaCBsaXN0CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcign5Yig6Zmk5paH5Lu25aSx6LSlJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH07CiAgICBjb25zdCBoYW5kbGVQYWdlQ2hhbmdlID0gbmV3UGFnZSA9PiB7CiAgICAgIHBhZ2luYXRpb24ucGFnZSA9IG5ld1BhZ2U7CiAgICAgIGZldGNoQXJ0aWNsZXMoKTsKICAgIH07CiAgICBjb25zdCBoYW5kbGVDb21wYW55Q2hhbmdlID0gYXN5bmMgY29tcGFueUlkID0+IHsKICAgICAgY3VycmVudEFydGljbGUudmFsdWUuY2F0ZWdvcnkgPSBudWxsOwogICAgICBjb21wYW55Q2F0ZWdvcmllcy52YWx1ZSA9IFtdOwogICAgICBpZiAoY29tcGFueUlkKSB7CiAgICAgICAgYXdhaXQgZmV0Y2hDYXRlZ29yaWVzRm9yQ29tcGFueShjb21wYW55SWQpOwogICAgICB9CiAgICB9OwogICAgY29uc3QgZmV0Y2hDYXRlZ29yaWVzRm9yQ29tcGFueSA9IGFzeW5jIGNvbXBhbnlJZCA9PiB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhZG1pbkFwaS5nZXRLbm93bGVkZ2VDYXRlZ29yaWVzKHsKICAgICAgICAgIGFsbDogJ3RydWUnLAogICAgICAgICAgY29tcGFueV9pZDogY29tcGFueUlkCiAgICAgICAgfSk7CiAgICAgICAgY29tcGFueUNhdGVnb3JpZXMudmFsdWUgPSByZXNwb25zZS5kYXRhOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIEVsTWVzc2FnZS5lcnJvcign6I635Y+W6K+l5YWs5Y+45LiL55qE5YiG57G75aSx6LSlJyk7CiAgICAgIH0KICAgIH07CiAgICBjb25zdCBoYW5kbGVGaWxlQ2hhbmdlID0gZmlsZSA9PiB7CiAgICAgIGN1cnJlbnRBcnRpY2xlLnZhbHVlLm9yaWdpbmFsX2ZpbGUgPSBmaWxlLnJhdzsKICAgIH07CiAgICBjb25zdCBoYW5kbGVGaWxlUmVtb3ZlID0gKCkgPT4gewogICAgICBjdXJyZW50QXJ0aWNsZS52YWx1ZS5vcmlnaW5hbF9maWxlID0gbnVsbDsKICAgIH07CiAgICBjb25zdCBvcGVuQnVpbGRNb2RhbCA9ICgpID0+IHsKICAgICAgaXNCdWlsZE1vZGFsT3Blbi52YWx1ZSA9IHRydWU7CiAgICAgIGZldGNoQnVpbGRTdGF0dXNlcygpOwogICAgfTsKICAgIGNvbnN0IGZldGNoQnVpbGRTdGF0dXNlcyA9IGFzeW5jICgpID0+IHsKICAgICAgaXNCdWlsZFN0YXR1c0xvYWRpbmcudmFsdWUgPSB0cnVlOwogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYWRtaW5BcGkuZ2V0S25vd2xlZGdlQnVpbGRTdGF0dXMoKTsKICAgICAgICBidWlsZFN0YXR1c2VzLnZhbHVlID0gcmVzcG9uc2UuZGF0YTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+iOt+WPluaehOW7uueKtuaAgeWksei0pScpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIGlzQnVpbGRTdGF0dXNMb2FkaW5nLnZhbHVlID0gZmFsc2U7CiAgICAgIH0KICAgIH07CiAgICBjb25zdCBoYW5kbGVTZWxlY3Rpb25DaGFuZ2UgPSBzZWxlY3Rpb24gPT4gewogICAgICBzZWxlY3RlZENvbXBhbnlJZHMudmFsdWUgPSBzZWxlY3Rpb24ubWFwKGl0ZW0gPT4gaXRlbS5jb21wYW55X2lkKTsKICAgIH07CiAgICBjb25zdCB0cmlnZ2VyQnVpbGRGb3JDb21wYW5pZXMgPSBhc3luYyBjb21wYW55SWRzID0+IHsKICAgICAgaWYgKGNvbXBhbnlJZHMubGVuZ3RoID09PSAwKSByZXR1cm47CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhZG1pbkFwaS5idWlsZEtub3dsZWRnZUZvckNvbXBhbmllcyhjb21wYW55SWRzKTsKICAgICAgICBFbE1lc3NhZ2Uuc3VjY2VzcyhyZXNwb25zZS5kYXRhLm1lc3NhZ2UgfHwgJ+aehOW7uuS7u+WKoeW3suWQr+WKqCcpOwogICAgICAgIGNvbXBhbnlJZHMuZm9yRWFjaChpZCA9PiBidWlsZGluZ0NvbXBhbnlJZHMudmFsdWUuYWRkKGlkKSk7CiAgICAgICAgZmV0Y2hCdWlsZFN0YXR1c2VzKCk7CiAgICAgICAgc3RhcnRTdGF0dXNQb2xsaW5nKCk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgRWxNZXNzYWdlLmVycm9yKCflkK/liqjmnoTlu7rku7vliqHlpLHotKUnKTsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IHN0YXJ0U3RhdHVzUG9sbGluZyA9ICgpID0+IHsKICAgICAgaWYgKHN0YXR1c1BvbGxJbnRlcnZhbCkgcmV0dXJuOyAvLyDpgb/lhY3ph43lpI3lkK/liqgKICAgICAgc3RhdHVzUG9sbEludGVydmFsID0gc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4gewogICAgICAgIGF3YWl0IGZldGNoQnVpbGRTdGF0dXNlcygpOwogICAgICAgIC8vIOajgOafpeaYr+WQpuacieS7jeWcqOWkhOeQhuS4reeahOaehOW7ugogICAgICAgIGNvbnN0IHN0aWxsUHJvY2Vzc2luZyA9IGJ1aWxkU3RhdHVzZXMudmFsdWUuc29tZShzID0+IHMuc3RhdHVzID09PSAncHJvY2Vzc2luZycgfHwgcy5zdGF0dXMgPT09ICdwZW5kaW5nJyk7CiAgICAgICAgaWYgKCFzdGlsbFByb2Nlc3NpbmcpIHsKICAgICAgICAgIHN0b3BTdGF0dXNQb2xsaW5nKCk7CiAgICAgICAgICBidWlsZGluZ0NvbXBhbnlJZHMudmFsdWUuY2xlYXIoKTsKICAgICAgICAgIEVsTWVzc2FnZS5pbmZvKCfmiYDmnInmnoTlu7rku7vliqHlt7LlrozmiJDjgIInKTsKICAgICAgICB9CiAgICAgIH0sIDUwMDApOyAvLyDmr48156eS6L2u6K+i5LiA5qyhCiAgICB9OwogICAgY29uc3Qgc3RvcFN0YXR1c1BvbGxpbmcgPSAoKSA9PiB7CiAgICAgIGlmIChzdGF0dXNQb2xsSW50ZXJ2YWwpIHsKICAgICAgICBjbGVhckludGVydmFsKHN0YXR1c1BvbGxJbnRlcnZhbCk7CiAgICAgICAgc3RhdHVzUG9sbEludGVydmFsID0gbnVsbDsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IGdldFN0YXR1c1RhZ1R5cGUgPSBzdGF0dXMgPT4gewogICAgICBzd2l0Y2ggKHN0YXR1cykgewogICAgICAgIGNhc2UgJ2NvbXBsZXRlZCc6CiAgICAgICAgICByZXR1cm4gJ3N1Y2Nlc3MnOwogICAgICAgIGNhc2UgJ3Byb2Nlc3NpbmcnOgogICAgICAgICAgcmV0dXJuICdwcmltYXJ5JzsKICAgICAgICBjYXNlICdwZW5kaW5nJzoKICAgICAgICAgIHJldHVybiAnd2FybmluZyc7CiAgICAgICAgY2FzZSAnZmFpbGVkJzoKICAgICAgICAgIHJldHVybiAnZGFuZ2VyJzsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmV0dXJuICdpbmZvJzsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IGdldFN0YXR1c1RleHQgPSBzdGF0dXMgPT4gewogICAgICBjb25zdCBtYXAgPSB7CiAgICAgICAgJ2NvbXBsZXRlZCc6ICfmiJDlip8nLAogICAgICAgICdwcm9jZXNzaW5nJzogJ+aehOW7uuS4rScsCiAgICAgICAgJ3BlbmRpbmcnOiAn562J5b6F5LitJywKICAgICAgICAnZmFpbGVkJzogJ+Wksei0pScsCiAgICAgICAgJ25vdF9idWlsdCc6ICfmnKrmnoTlu7onCiAgICAgIH07CiAgICAgIHJldHVybiBtYXBbc3RhdHVzXSB8fCAn5pyq55+lJzsKICAgIH07CiAgICBjb25zdCBpc0NvbXBhbnlCdWlsZGluZyA9IGNvbXBhbnlJZCA9PiB7CiAgICAgIHZhciBfYnVpbGRTdGF0dXNlcyR2YWx1ZSQ7CiAgICAgIGNvbnN0IHN0YXR1cyA9IChfYnVpbGRTdGF0dXNlcyR2YWx1ZSQgPSBidWlsZFN0YXR1c2VzLnZhbHVlLmZpbmQocyA9PiBzLmNvbXBhbnlfaWQgPT09IGNvbXBhbnlJZCkpID09PSBudWxsIHx8IF9idWlsZFN0YXR1c2VzJHZhbHVlJCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2J1aWxkU3RhdHVzZXMkdmFsdWUkLnN0YXR1czsKICAgICAgcmV0dXJuIHN0YXR1cyA9PT0gJ3Byb2Nlc3NpbmcnIHx8IHN0YXR1cyA9PT0gJ3BlbmRpbmcnOwogICAgfTsKICAgIGNvbnN0IGlzQW55Q29tcGFueUJ1aWxkaW5nID0gY29tcGFueUlkcyA9PiB7CiAgICAgIC8vIOWinuWKoOS4gOS4quajgOafpe+8jOehruS/neaJgOmAieeahOWFrOWPuOmDveacieaWh+S7tgogICAgICBjb25zdCBoYXNGaWxlcyA9IGNvbXBhbnlJZHMuZXZlcnkoaWQgPT4gewogICAgICAgIGNvbnN0IGNvbXBhbnkgPSBidWlsZFN0YXR1c2VzLnZhbHVlLmZpbmQocyA9PiBzLmNvbXBhbnlfaWQgPT09IGlkKTsKICAgICAgICByZXR1cm4gY29tcGFueSAmJiBjb21wYW55LmZpbGVfY291bnQgPiAwOwogICAgICB9KTsKICAgICAgaWYgKCFoYXNGaWxlcykgcmV0dXJuIHRydWU7CiAgICAgIHJldHVybiBjb21wYW55SWRzLnNvbWUoaWQgPT4gaXNDb21wYW55QnVpbGRpbmcoaWQpKTsKICAgIH07CiAgICBjb25zdCBpc0NvbXBhbnlTZWxlY3RhYmxlID0gcm93ID0+IHsKICAgICAgcmV0dXJuIHJvdy5maWxlX2NvdW50ID4gMDsKICAgIH07CiAgICBvbk1vdW50ZWQoKCkgPT4gewogICAgICAvLyBpbml0aWFsIGZldGNoCiAgICAgIGZldGNoQXJ0aWNsZXMoKTsKICAgIH0pOwogICAgcmV0dXJuIChfY3R4LCBfY2FjaGUpID0+IHsKICAgICAgY29uc3QgX2NvbXBvbmVudF9lbF90YWcgPSBfcmVzb2x2ZUNvbXBvbmVudCgiZWwtdGFnIik7CiAgICAgIGNvbnN0IF9kaXJlY3RpdmVfbG9hZGluZyA9IF9yZXNvbHZlRGlyZWN0aXZlKCJsb2FkaW5nIik7CiAgICAgIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soImRpdiIsIF9ob2lzdGVkXzEsIFtfY3JlYXRlVk5vZGUoX3VucmVmKEVsQ2FyZCksIHsKICAgICAgICBjbGFzczogImJveC1jYXJkIgogICAgICB9LCB7CiAgICAgICAgaGVhZGVyOiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMiwgW19jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzMsIFtfY3JlYXRlVk5vZGUoX3VucmVmKEVsSWNvbiksIHsKICAgICAgICAgIGNsYXNzOiAiaGVhZGVyLWljb24iCiAgICAgICAgfSwgewogICAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gW19jcmVhdGVWTm9kZShfdW5yZWYoQ29sbGVjdGlvbikpXSksCiAgICAgICAgICBfOiAxCiAgICAgICAgfSksIF9jYWNoZVsxN10gfHwgKF9jYWNoZVsxN10gPSBfY3JlYXRlRWxlbWVudFZOb2RlKCJzcGFuIiwgbnVsbCwgIuefpeivhuW6k+euoeeQhiIsIC0xKSldKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfNCwgW19jcmVhdGVWTm9kZShfdW5yZWYoRWxJbnB1dCksIHsKICAgICAgICAgIG1vZGVsVmFsdWU6IHNlYXJjaFF1ZXJ5LnZhbHVlLAogICAgICAgICAgIm9uVXBkYXRlOm1vZGVsVmFsdWUiOiBfY2FjaGVbMF0gfHwgKF9jYWNoZVswXSA9ICRldmVudCA9PiBzZWFyY2hRdWVyeS52YWx1ZSA9ICRldmVudCksCiAgICAgICAgICBwbGFjZWhvbGRlcjogIuaQnOe0ouefpeivhuW6k+aWh+eroC4uLiIsCiAgICAgICAgICBjbGVhcmFibGU6ICIiLAogICAgICAgICAgb25DbGVhcjogZmV0Y2hBcnRpY2xlcywKICAgICAgICAgIG9uSW5wdXQ6IGRlYm91bmNlZEZldGNoQXJ0aWNsZXMsCiAgICAgICAgICBjbGFzczogInNlYXJjaC1pbnB1dCIKICAgICAgICB9LCB7CiAgICAgICAgICBhcHBlbmQ6IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlVk5vZGUoX3VucmVmKEVsQnV0dG9uKSwgewogICAgICAgICAgICBpY29uOiBfdW5yZWYoU2VhcmNoKQogICAgICAgICAgfSwgbnVsbCwgOCwgWyJpY29uIl0pXSksCiAgICAgICAgICBfOiAxCiAgICAgICAgfSwgOCwgWyJtb2RlbFZhbHVlIl0pLCBfY3JlYXRlVk5vZGUoX3VucmVmKEVsQnV0dG9uKSwgewogICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgb25DbGljazogb3BlbkJ1aWxkTW9kYWwKICAgICAgICB9LCB7CiAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBfY2FjaGVbMThdIHx8IChfY2FjaGVbMThdID0gW19jcmVhdGVUZXh0Vk5vZGUoIuaehOW7uuefpeivhuW6kyIpXSkpLAogICAgICAgICAgXzogMQogICAgICAgIH0pLCBfY3JlYXRlVk5vZGUoX3VucmVmKEVsQnV0dG9uKSwgewogICAgICAgICAgdHlwZTogImluZm8iLAogICAgICAgICAgb25DbGljazogX2NhY2hlWzFdIHx8IChfY2FjaGVbMV0gPSAkZXZlbnQgPT4gb3BlbkNhdGVnb3J5TW9kYWwoKSkKICAgICAgICB9LCB7CiAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBfY2FjaGVbMTldIHx8IChfY2FjaGVbMTldID0gW19jcmVhdGVUZXh0Vk5vZGUoIueuoeeQhuWIhuexuyIpXSkpLAogICAgICAgICAgXzogMQogICAgICAgIH0pLCBfY3JlYXRlVk5vZGUoX3VucmVmKEVsQnV0dG9uKSwgewogICAgICAgICAgdHlwZTogInByaW1hcnkiLAogICAgICAgICAgaWNvbjogX3VucmVmKFVwbG9hZCksCiAgICAgICAgICBvbkNsaWNrOiBfY2FjaGVbMl0gfHwgKF9jYWNoZVsyXSA9ICRldmVudCA9PiBvcGVuQXJ0aWNsZU1vZGFsKCkpCiAgICAgICAgfSwgewogICAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gX2NhY2hlWzIwXSB8fCAoX2NhY2hlWzIwXSA9IFtfY3JlYXRlVGV4dFZOb2RlKCLkuIrkvKDmlofku7YiKV0pKSwKICAgICAgICAgIF86IDEKICAgICAgICB9LCA4LCBbImljb24iXSldKV0pXSksCiAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gW193aXRoRGlyZWN0aXZlcygoX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soX3VucmVmKEVsVGFibGUpLCB7CiAgICAgICAgICBkYXRhOiBhcnRpY2xlcy52YWx1ZSwKICAgICAgICAgIGJvcmRlcjogIiIKICAgICAgICB9LCB7CiAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZVZOb2RlKF91bnJlZihFbFRhYmxlQ29sdW1uKSwgewogICAgICAgICAgICBwcm9wOiAidGl0bGUiLAogICAgICAgICAgICBsYWJlbDogIuagh+mimCIsCiAgICAgICAgICAgICJtaW4td2lkdGgiOiAiMjAwIgogICAgICAgICAgfSksIF9jcmVhdGVWTm9kZShfdW5yZWYoRWxUYWJsZUNvbHVtbiksIHsKICAgICAgICAgICAgcHJvcDogIm9yaWdpbmFsX2ZpbGVuYW1lIiwKICAgICAgICAgICAgbGFiZWw6ICLmlofku7blkI0iLAogICAgICAgICAgICAibWluLXdpZHRoIjogIjIwMCIKICAgICAgICAgIH0pLCBfY3JlYXRlVk5vZGUoX3VucmVmKEVsVGFibGVDb2x1bW4pLCB7CiAgICAgICAgICAgIHByb3A6ICJjYXRlZ29yeV9uYW1lIiwKICAgICAgICAgICAgbGFiZWw6ICLliIbnsbsiLAogICAgICAgICAgICB3aWR0aDogIjEyMCIKICAgICAgICAgIH0pLCBfY3JlYXRlVk5vZGUoX3VucmVmKEVsVGFibGVDb2x1bW4pLCB7CiAgICAgICAgICAgIHByb3A6ICJjb21wYW55X25hbWUiLAogICAgICAgICAgICBsYWJlbDogIuaJgOWxnuWFrOWPuCIsCiAgICAgICAgICAgIHdpZHRoOiAiMTUwIgogICAgICAgICAgfSksIF9jcmVhdGVWTm9kZShfdW5yZWYoRWxUYWJsZUNvbHVtbiksIHsKICAgICAgICAgICAgcHJvcDogImNyZWF0b3JfbmFtZSIsCiAgICAgICAgICAgIGxhYmVsOiAi5LiK5Lyg6ICFIiwKICAgICAgICAgICAgd2lkdGg6ICIxMjAiCiAgICAgICAgICB9KSwgX2NyZWF0ZVZOb2RlKF91bnJlZihFbFRhYmxlQ29sdW1uKSwgewogICAgICAgICAgICBwcm9wOiAiY3JlYXRlZF9hdCIsCiAgICAgICAgICAgIGxhYmVsOiAi5LiK5Lyg5pe26Ze0IiwKICAgICAgICAgICAgd2lkdGg6ICIxODAiCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KHNjb3BlID0+IFtfY3JlYXRlVGV4dFZOb2RlKF90b0Rpc3BsYXlTdHJpbmcobmV3IERhdGUoc2NvcGUucm93LmNyZWF0ZWRfYXQpLnRvTG9jYWxlU3RyaW5nKCkpLCAxKV0pLAogICAgICAgICAgICBfOiAxCiAgICAgICAgICB9KSwgX2NyZWF0ZVZOb2RlKF91bnJlZihFbFRhYmxlQ29sdW1uKSwgewogICAgICAgICAgICBsYWJlbDogIuaTjeS9nCIsCiAgICAgICAgICAgIHdpZHRoOiAiMTUwIiwKICAgICAgICAgICAgZml4ZWQ6ICJyaWdodCIKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoc2NvcGUgPT4gW19jcmVhdGVWTm9kZShfdW5yZWYoRWxCdXR0b24pLCB7CiAgICAgICAgICAgICAgc2l6ZTogInNtYWxsIiwKICAgICAgICAgICAgICBpY29uOiBfdW5yZWYoRWRpdCksCiAgICAgICAgICAgICAgb25DbGljazogJGV2ZW50ID0+IG9wZW5BcnRpY2xlTW9kYWwoc2NvcGUucm93KQogICAgICAgICAgICB9LCBudWxsLCA4LCBbImljb24iLCAib25DbGljayJdKSwgX2NyZWF0ZVZOb2RlKF91bnJlZihFbEJ1dHRvbiksIHsKICAgICAgICAgICAgICBzaXplOiAic21hbGwiLAogICAgICAgICAgICAgIHR5cGU6ICJkYW5nZXIiLAogICAgICAgICAgICAgIGljb246IF91bnJlZihEZWxldGUpLAogICAgICAgICAgICAgIG9uQ2xpY2s6ICRldmVudCA9PiBjb25maXJtRGVsZXRlQXJ0aWNsZShzY29wZS5yb3cpCiAgICAgICAgICAgIH0sIG51bGwsIDgsIFsiaWNvbiIsICJvbkNsaWNrIl0pXSksCiAgICAgICAgICAgIF86IDEKICAgICAgICAgIH0pXSksCiAgICAgICAgICBfOiAxCiAgICAgICAgfSwgOCwgWyJkYXRhIl0pKSwgW1tfZGlyZWN0aXZlX2xvYWRpbmcsIGxvYWRpbmcudmFsdWVdXSksIF9jcmVhdGVWTm9kZShfdW5yZWYoRWxQYWdpbmF0aW9uKSwgewogICAgICAgICAgYmFja2dyb3VuZDogIiIsCiAgICAgICAgICBsYXlvdXQ6ICJwcmV2LCBwYWdlciwgbmV4dCwgdG90YWwiLAogICAgICAgICAgdG90YWw6IHRvdGFsLnZhbHVlLAogICAgICAgICAgInBhZ2Utc2l6ZSI6IHBhZ2luYXRpb24ucGFnZVNpemUsCiAgICAgICAgICAiY3VycmVudC1wYWdlIjogcGFnaW5hdGlvbi5wYWdlLAogICAgICAgICAgb25DdXJyZW50Q2hhbmdlOiBoYW5kbGVQYWdlQ2hhbmdlLAogICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgIm1hcmdpbi10b3AiOiAiMjBweCIsCiAgICAgICAgICAgICJ0ZXh0LWFsaWduIjogInJpZ2h0IgogICAgICAgICAgfQogICAgICAgIH0sIG51bGwsIDgsIFsidG90YWwiLCAicGFnZS1zaXplIiwgImN1cnJlbnQtcGFnZSJdKV0pLAogICAgICAgIF86IDEKICAgICAgfSksIF9jcmVhdGVWTm9kZShfdW5yZWYoRWxEaWFsb2cpLCB7CiAgICAgICAgbW9kZWxWYWx1ZTogaXNDYXRlZ29yeU1vZGFsT3Blbi52YWx1ZSwKICAgICAgICAib25VcGRhdGU6bW9kZWxWYWx1ZSI6IF9jYWNoZVs4XSB8fCAoX2NhY2hlWzhdID0gJGV2ZW50ID0+IGlzQ2F0ZWdvcnlNb2RhbE9wZW4udmFsdWUgPSAkZXZlbnQpLAogICAgICAgIHRpdGxlOiAi566h55CG5YiG57G7IiwKICAgICAgICB3aWR0aDogIjYwJSIKICAgICAgfSwgewogICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBfaG9pc3RlZF81LCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfNiwgW19jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzcsIFtfY2FjaGVbMjJdIHx8IChfY2FjaGVbMjJdID0gX2NyZWF0ZUVsZW1lbnRWTm9kZSgiaDUiLCBudWxsLCAi5bey5pyJ5YiG57G7IiwgLTEpKSwgX2NyZWF0ZVZOb2RlKF91bnJlZihFbEJ1dHRvbiksIHsKICAgICAgICAgIHR5cGU6ICJwcmltYXJ5IiwKICAgICAgICAgIHNpemU6ICJzbWFsbCIsCiAgICAgICAgICBvbkNsaWNrOiByZXNldENhdGVnb3J5Rm9ybQogICAgICAgIH0sIHsKICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlVk5vZGUoX3VucmVmKEVsSWNvbiksIG51bGwsIHsKICAgICAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gW19jcmVhdGVWTm9kZShfdW5yZWYoUGx1cykpXSksCiAgICAgICAgICAgIF86IDEKICAgICAgICAgIH0pLCBfY2FjaGVbMjFdIHx8IChfY2FjaGVbMjFdID0gX2NyZWF0ZVRleHRWTm9kZSgiIOaWsOWinuWIhuexuyAiKSldKSwKICAgICAgICAgIF86IDEKICAgICAgICB9KV0pLCAhY2F0ZWdvcmllcy52YWx1ZS5sZW5ndGggPyAoX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJkaXYiLCBfaG9pc3RlZF84LCBbX2NyZWF0ZVZOb2RlKF91bnJlZihFbEVtcHR5KSwgewogICAgICAgICAgZGVzY3JpcHRpb246ICLmmoLml6DliIbnsbsiCiAgICAgICAgfSldKSkgOiAoX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJkaXYiLCBfaG9pc3RlZF85LCBbKF9vcGVuQmxvY2sodHJ1ZSksIF9jcmVhdGVFbGVtZW50QmxvY2soX0ZyYWdtZW50LCBudWxsLCBfcmVuZGVyTGlzdChjYXRlZ29yaWVzLnZhbHVlLCBjYXRlZ29yeSA9PiB7CiAgICAgICAgICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJkaXYiLCB7CiAgICAgICAgICAgIGtleTogY2F0ZWdvcnkuaWQsCiAgICAgICAgICAgIGNsYXNzOiBfbm9ybWFsaXplQ2xhc3MoWyJjYXRlZ29yeS1saXN0LWl0ZW0iLCB7CiAgICAgICAgICAgICAgJ3NlbGVjdGVkJzogY3VycmVudENhdGVnb3J5LnZhbHVlLmlkID09PSBjYXRlZ29yeS5pZAogICAgICAgICAgICB9XSksCiAgICAgICAgICAgIG9uQ2xpY2s6ICRldmVudCA9PiBzZWxlY3RDYXRlZ29yeUZvckVkaXQoY2F0ZWdvcnkpCiAgICAgICAgICB9LCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMTEsIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCB7CiAgICAgICAgICAgIGNsYXNzOiAiY2F0ZWdvcnktaWNvbiIsCiAgICAgICAgICAgIHN0eWxlOiBfbm9ybWFsaXplU3R5bGUoewogICAgICAgICAgICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogY2F0ZWdvcnkuY29sb3IKICAgICAgICAgICAgfSkKICAgICAgICAgIH0sIFtfY3JlYXRlVk5vZGUoX3VucmVmKEVsSWNvbiksIG51bGwsIHsKICAgICAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gWyhfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfcmVzb2x2ZUR5bmFtaWNDb21wb25lbnQoY2F0ZWdvcnkuaWNvbiB8fCAnRG9jdW1lbnQnKSkpXSksCiAgICAgICAgICAgIF86IDIKICAgICAgICAgIH0sIDEwMjQpXSwgNCksIF9jcmVhdGVFbGVtZW50Vk5vZGUoInNwYW4iLCBfaG9pc3RlZF8xMiwgX3RvRGlzcGxheVN0cmluZyhjYXRlZ29yeS5uYW1lKSwgMSldKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMTMsIFtfY3JlYXRlVk5vZGUoX3VucmVmKEVsQnV0dG9uKSwgewogICAgICAgICAgICB0eXBlOiAicHJpbWFyeSIsCiAgICAgICAgICAgIHNpemU6ICJzbWFsbCIsCiAgICAgICAgICAgIHBsYWluOiAiIiwKICAgICAgICAgICAgaWNvbjogX3VucmVmKEVkaXQpLAogICAgICAgICAgICBvbkNsaWNrOiBfd2l0aE1vZGlmaWVycygkZXZlbnQgPT4gc2VsZWN0Q2F0ZWdvcnlGb3JFZGl0KGNhdGVnb3J5KSwgWyJzdG9wIl0pCiAgICAgICAgICB9LCBudWxsLCA4LCBbImljb24iLCAib25DbGljayJdKSwgX2NyZWF0ZVZOb2RlKF91bnJlZihFbEJ1dHRvbiksIHsKICAgICAgICAgICAgdHlwZTogImRhbmdlciIsCiAgICAgICAgICAgIHNpemU6ICJzbWFsbCIsCiAgICAgICAgICAgIHBsYWluOiAiIiwKICAgICAgICAgICAgaWNvbjogX3VucmVmKERlbGV0ZSksCiAgICAgICAgICAgIG9uQ2xpY2s6IF93aXRoTW9kaWZpZXJzKCRldmVudCA9PiBjb25maXJtRGVsZXRlQ2F0ZWdvcnkoY2F0ZWdvcnkpLCBbInN0b3AiXSkKICAgICAgICAgIH0sIG51bGwsIDgsIFsiaWNvbiIsICJvbkNsaWNrIl0pXSldLCAxMCwgX2hvaXN0ZWRfMTApOwogICAgICAgIH0pLCAxMjgpKV0pKV0pLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBfaG9pc3RlZF8xNCwgW19jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzE1LCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiaDUiLCBudWxsLCBfdG9EaXNwbGF5U3RyaW5nKGlzRWRpdGluZ0NhdGVnb3J5LnZhbHVlID8gJ+e8lui+keWIhuexuycgOiAn5paw5aKe5YiG57G7JyksIDEpLCBpc0VkaXRpbmdDYXRlZ29yeS52YWx1ZSA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfdW5yZWYoRWxCdXR0b24pLCB7CiAgICAgICAgICBrZXk6IDAsCiAgICAgICAgICB0ZXh0OiAiIiwKICAgICAgICAgIG9uQ2xpY2s6IHJlc2V0Q2F0ZWdvcnlGb3JtCiAgICAgICAgfSwgewogICAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gX2NhY2hlWzIzXSB8fCAoX2NhY2hlWzIzXSA9IFtfY3JlYXRlVGV4dFZOb2RlKCLlj5bmtogiKV0pKSwKICAgICAgICAgIF86IDEKICAgICAgICB9KSkgOiBfY3JlYXRlQ29tbWVudFZOb2RlKCIiLCB0cnVlKV0pLCBfY3JlYXRlVk5vZGUoX3VucmVmKEVsRm9ybSksIHsKICAgICAgICAgIG1vZGVsOiBjdXJyZW50Q2F0ZWdvcnkudmFsdWUsCiAgICAgICAgICByZWZfa2V5OiAiY2F0ZWdvcnlGb3JtIiwKICAgICAgICAgIHJlZjogY2F0ZWdvcnlGb3JtLAogICAgICAgICAgImxhYmVsLXBvc2l0aW9uIjogInRvcCIKICAgICAgICB9LCB7CiAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZVZOb2RlKF91bnJlZihFbEZvcm1JdGVtKSwgewogICAgICAgICAgICBsYWJlbDogIuWIhuexu+WQjeensCIsCiAgICAgICAgICAgIHByb3A6ICJuYW1lIiwKICAgICAgICAgICAgcmVxdWlyZWQ6ICIiCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlVk5vZGUoX3VucmVmKEVsSW5wdXQpLCB7CiAgICAgICAgICAgICAgbW9kZWxWYWx1ZTogY3VycmVudENhdGVnb3J5LnZhbHVlLm5hbWUsCiAgICAgICAgICAgICAgIm9uVXBkYXRlOm1vZGVsVmFsdWUiOiBfY2FjaGVbM10gfHwgKF9jYWNoZVszXSA9ICRldmVudCA9PiBjdXJyZW50Q2F0ZWdvcnkudmFsdWUubmFtZSA9ICRldmVudCkKICAgICAgICAgICAgfSwgbnVsbCwgOCwgWyJtb2RlbFZhbHVlIl0pXSksCiAgICAgICAgICAgIF86IDEKICAgICAgICAgIH0pLCBfY3JlYXRlVk5vZGUoX3VucmVmKEVsRm9ybUl0ZW0pLCB7CiAgICAgICAgICAgIGxhYmVsOiAi5omA5bGe5YWs5Y+4IiwKICAgICAgICAgICAgcHJvcDogImNvbXBhbnkiLAogICAgICAgICAgICByZXF1aXJlZDogIiIKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gW19jcmVhdGVWTm9kZShfdW5yZWYoRWxTZWxlY3QpLCB7CiAgICAgICAgICAgICAgbW9kZWxWYWx1ZTogY3VycmVudENhdGVnb3J5LnZhbHVlLmNvbXBhbnksCiAgICAgICAgICAgICAgIm9uVXBkYXRlOm1vZGVsVmFsdWUiOiBfY2FjaGVbNF0gfHwgKF9jYWNoZVs0XSA9ICRldmVudCA9PiBjdXJyZW50Q2F0ZWdvcnkudmFsdWUuY29tcGFueSA9ICRldmVudCksCiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICLor7fpgInmi6nlhazlj7giLAogICAgICAgICAgICAgIHN0eWxlOiB7CiAgICAgICAgICAgICAgICAid2lkdGgiOiAiMTAwJSIKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbKF9vcGVuQmxvY2sodHJ1ZSksIF9jcmVhdGVFbGVtZW50QmxvY2soX0ZyYWdtZW50LCBudWxsLCBfcmVuZGVyTGlzdChjb21wYW5pZXMudmFsdWUsIGNvbXBhbnkgPT4gewogICAgICAgICAgICAgICAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKF91bnJlZihFbE9wdGlvbiksIHsKICAgICAgICAgICAgICAgICAga2V5OiBjb21wYW55LmlkLAogICAgICAgICAgICAgICAgICBsYWJlbDogY29tcGFueS5uYW1lLAogICAgICAgICAgICAgICAgICB2YWx1ZTogY29tcGFueS5pZAogICAgICAgICAgICAgICAgfSwgbnVsbCwgOCwgWyJsYWJlbCIsICJ2YWx1ZSJdKTsKICAgICAgICAgICAgICB9KSwgMTI4KSldKSwKICAgICAgICAgICAgICBfOiAxCiAgICAgICAgICAgIH0sIDgsIFsibW9kZWxWYWx1ZSJdKV0pLAogICAgICAgICAgICBfOiAxCiAgICAgICAgICB9KSwgX2NyZWF0ZVZOb2RlKF91bnJlZihFbEZvcm1JdGVtKSwgewogICAgICAgICAgICBsYWJlbDogIuWIhuexu+aPj+i/sCIsCiAgICAgICAgICAgIHByb3A6ICJkZXNjcmlwdGlvbiIKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gW19jcmVhdGVWTm9kZShfdW5yZWYoRWxJbnB1dCksIHsKICAgICAgICAgICAgICBtb2RlbFZhbHVlOiBjdXJyZW50Q2F0ZWdvcnkudmFsdWUuZGVzY3JpcHRpb24sCiAgICAgICAgICAgICAgIm9uVXBkYXRlOm1vZGVsVmFsdWUiOiBfY2FjaGVbNV0gfHwgKF9jYWNoZVs1XSA9ICRldmVudCA9PiBjdXJyZW50Q2F0ZWdvcnkudmFsdWUuZGVzY3JpcHRpb24gPSAkZXZlbnQpLAogICAgICAgICAgICAgIHR5cGU6ICJ0ZXh0YXJlYSIKICAgICAgICAgICAgfSwgbnVsbCwgOCwgWyJtb2RlbFZhbHVlIl0pXSksCiAgICAgICAgICAgIF86IDEKICAgICAgICAgIH0pLCBfY3JlYXRlVk5vZGUoX3VucmVmKEVsRm9ybUl0ZW0pLCB7CiAgICAgICAgICAgIGxhYmVsOiAi5Zu+5qCHIiwKICAgICAgICAgICAgcHJvcDogImljb24iCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlVk5vZGUoX3VucmVmKEVsU2VsZWN0KSwgewogICAgICAgICAgICAgIG1vZGVsVmFsdWU6IGN1cnJlbnRDYXRlZ29yeS52YWx1ZS5pY29uLAogICAgICAgICAgICAgICJvblVwZGF0ZTptb2RlbFZhbHVlIjogX2NhY2hlWzZdIHx8IChfY2FjaGVbNl0gPSAkZXZlbnQgPT4gY3VycmVudENhdGVnb3J5LnZhbHVlLmljb24gPSAkZXZlbnQpLAogICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAi6YCJ5oup5LiA5Liq5Zu+5qCHIiwKICAgICAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICAgICAgIndpZHRoIjogIjEwMCUiCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gWyhfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soX0ZyYWdtZW50LCBudWxsLCBfcmVuZGVyTGlzdChhdmFpbGFibGVJY29ucywgaWNvbiA9PiB7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NyZWF0ZVZOb2RlKF91bnJlZihFbE9wdGlvbiksIHsKICAgICAgICAgICAgICAgICAga2V5OiBpY29uLm5hbWUsCiAgICAgICAgICAgICAgICAgIGxhYmVsOiBpY29uLmxhYmVsLAogICAgICAgICAgICAgICAgICB2YWx1ZTogaWNvbi5uYW1lCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBfaG9pc3RlZF8xNiwgW19jcmVhdGVWTm9kZShfdW5yZWYoRWxJY29uKSwgewogICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgICAibWFyZ2luLXJpZ2h0IjogIjhweCIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKF9yZXNvbHZlRHluYW1pY0NvbXBvbmVudChpY29uLmNvbXBvbmVudCkpKV0pLAogICAgICAgICAgICAgICAgICAgIF86IDIKICAgICAgICAgICAgICAgICAgfSwgMTAyNCksIF9jcmVhdGVFbGVtZW50Vk5vZGUoInNwYW4iLCBudWxsLCBfdG9EaXNwbGF5U3RyaW5nKGljb24ubGFiZWwpLCAxKV0pXSksCiAgICAgICAgICAgICAgICAgIF86IDIKICAgICAgICAgICAgICAgIH0sIDEwMzIsIFsibGFiZWwiLCAidmFsdWUiXSk7CiAgICAgICAgICAgICAgfSksIDY0KSldKSwKICAgICAgICAgICAgICBfOiAxCiAgICAgICAgICAgIH0sIDgsIFsibW9kZWxWYWx1ZSJdKV0pLAogICAgICAgICAgICBfOiAxCiAgICAgICAgICB9KSwgX2NyZWF0ZVZOb2RlKF91bnJlZihFbEZvcm1JdGVtKSwgewogICAgICAgICAgICBsYWJlbDogIuminOiJsiIsCiAgICAgICAgICAgIHByb3A6ICJjb2xvciIKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gW19jcmVhdGVWTm9kZShfdW5yZWYoRWxDb2xvclBpY2tlciksIHsKICAgICAgICAgICAgICBtb2RlbFZhbHVlOiBjdXJyZW50Q2F0ZWdvcnkudmFsdWUuY29sb3IsCiAgICAgICAgICAgICAgIm9uVXBkYXRlOm1vZGVsVmFsdWUiOiBfY2FjaGVbN10gfHwgKF9jYWNoZVs3XSA9ICRldmVudCA9PiBjdXJyZW50Q2F0ZWdvcnkudmFsdWUuY29sb3IgPSAkZXZlbnQpCiAgICAgICAgICAgIH0sIG51bGwsIDgsIFsibW9kZWxWYWx1ZSJdKV0pLAogICAgICAgICAgICBfOiAxCiAgICAgICAgICB9KSwgX2NyZWF0ZVZOb2RlKF91bnJlZihFbEZvcm1JdGVtKSwgbnVsbCwgewogICAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZVZOb2RlKF91bnJlZihFbEJ1dHRvbiksIHsKICAgICAgICAgICAgICB0eXBlOiAicHJpbWFyeSIsCiAgICAgICAgICAgICAgb25DbGljazogc2F2ZUNhdGVnb3J5CiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBfY2FjaGVbMjRdIHx8IChfY2FjaGVbMjRdID0gW19jcmVhdGVUZXh0Vk5vZGUoIuS/neWtmCIpXSkpLAogICAgICAgICAgICAgIF86IDEKICAgICAgICAgICAgfSksICFpc0VkaXRpbmdDYXRlZ29yeS52YWx1ZSA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfdW5yZWYoRWxCdXR0b24pLCB7CiAgICAgICAgICAgICAga2V5OiAwLAogICAgICAgICAgICAgIG9uQ2xpY2s6IHJlc2V0Q2F0ZWdvcnlGb3JtCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBfY2FjaGVbMjVdIHx8IChfY2FjaGVbMjVdID0gW19jcmVhdGVUZXh0Vk5vZGUoIumHjee9riIpXSkpLAogICAgICAgICAgICAgIF86IDEKICAgICAgICAgICAgfSkpIDogX2NyZWF0ZUNvbW1lbnRWTm9kZSgiIiwgdHJ1ZSldKSwKICAgICAgICAgICAgXzogMQogICAgICAgICAgfSldKSwKICAgICAgICAgIF86IDEKICAgICAgICB9LCA4LCBbIm1vZGVsIl0pXSldKV0pLAogICAgICAgIF86IDEKICAgICAgfSwgOCwgWyJtb2RlbFZhbHVlIl0pLCBfY3JlYXRlVk5vZGUoX3VucmVmKEVsRGlhbG9nKSwgewogICAgICAgIG1vZGVsVmFsdWU6IGlzQXJ0aWNsZU1vZGFsT3Blbi52YWx1ZSwKICAgICAgICAib25VcGRhdGU6bW9kZWxWYWx1ZSI6IF9jYWNoZVsxNF0gfHwgKF9jYWNoZVsxNF0gPSAkZXZlbnQgPT4gaXNBcnRpY2xlTW9kYWxPcGVuLnZhbHVlID0gJGV2ZW50KSwKICAgICAgICB0aXRsZTogY3VycmVudEFydGljbGUudmFsdWUuaWQgPyAn57yW6L6R5paH5Lu25L+h5oGvJyA6ICfkuIrkvKDmlrDmlofku7YnLAogICAgICAgIHdpZHRoOiAiNTAlIgogICAgICB9LCB7CiAgICAgICAgZm9vdGVyOiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZVZOb2RlKF91bnJlZihFbEJ1dHRvbiksIHsKICAgICAgICAgIG9uQ2xpY2s6IGNsb3NlQXJ0aWNsZU1vZGFsCiAgICAgICAgfSwgewogICAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gX2NhY2hlWzI5XSB8fCAoX2NhY2hlWzI5XSA9IFtfY3JlYXRlVGV4dFZOb2RlKCLlj5bmtogiKV0pKSwKICAgICAgICAgIF86IDEKICAgICAgICB9KSwgX2NyZWF0ZVZOb2RlKF91bnJlZihFbEJ1dHRvbiksIHsKICAgICAgICAgIHR5cGU6ICJwcmltYXJ5IiwKICAgICAgICAgIG9uQ2xpY2s6IHNhdmVBcnRpY2xlCiAgICAgICAgfSwgewogICAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gX2NhY2hlWzMwXSB8fCAoX2NhY2hlWzMwXSA9IFtfY3JlYXRlVGV4dFZOb2RlKCLkv53lrZgiKV0pKSwKICAgICAgICAgIF86IDEKICAgICAgICB9KV0pLAogICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlVk5vZGUoX3VucmVmKEVsRm9ybSksIHsKICAgICAgICAgIG1vZGVsOiBjdXJyZW50QXJ0aWNsZS52YWx1ZSwKICAgICAgICAgIHJlZl9rZXk6ICJhcnRpY2xlRm9ybSIsCiAgICAgICAgICByZWY6IGFydGljbGVGb3JtLAogICAgICAgICAgImxhYmVsLXdpZHRoIjogIjgwcHgiCiAgICAgICAgfSwgewogICAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gW19jcmVhdGVWTm9kZShfdW5yZWYoRWxGb3JtSXRlbSksIHsKICAgICAgICAgICAgbGFiZWw6ICLmoIfpopgiLAogICAgICAgICAgICBwcm9wOiAidGl0bGUiLAogICAgICAgICAgICByZXF1aXJlZDogIiIKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gW19jcmVhdGVWTm9kZShfdW5yZWYoRWxJbnB1dCksIHsKICAgICAgICAgICAgICBtb2RlbFZhbHVlOiBjdXJyZW50QXJ0aWNsZS52YWx1ZS50aXRsZSwKICAgICAgICAgICAgICAib25VcGRhdGU6bW9kZWxWYWx1ZSI6IF9jYWNoZVs5XSB8fCAoX2NhY2hlWzldID0gJGV2ZW50ID0+IGN1cnJlbnRBcnRpY2xlLnZhbHVlLnRpdGxlID0gJGV2ZW50KQogICAgICAgICAgICB9LCBudWxsLCA4LCBbIm1vZGVsVmFsdWUiXSldKSwKICAgICAgICAgICAgXzogMQogICAgICAgICAgfSksIF9jcmVhdGVWTm9kZShfdW5yZWYoRWxGb3JtSXRlbSksIHsKICAgICAgICAgICAgbGFiZWw6ICLlhazlj7giLAogICAgICAgICAgICBwcm9wOiAiY29tcGFueSIsCiAgICAgICAgICAgIHJlcXVpcmVkOiAiIgogICAgICAgICAgfSwgewogICAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZVZOb2RlKF91bnJlZihFbFNlbGVjdCksIHsKICAgICAgICAgICAgICBtb2RlbFZhbHVlOiBjdXJyZW50QXJ0aWNsZS52YWx1ZS5jb21wYW55LAogICAgICAgICAgICAgICJvblVwZGF0ZTptb2RlbFZhbHVlIjogX2NhY2hlWzEwXSB8fCAoX2NhY2hlWzEwXSA9ICRldmVudCA9PiBjdXJyZW50QXJ0aWNsZS52YWx1ZS5jb21wYW55ID0gJGV2ZW50KSwKICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogIuivt+mAieaLqeWFrOWPuCIsCiAgICAgICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgICAgICJ3aWR0aCI6ICIxMDAlIgogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgb25DaGFuZ2U6IGhhbmRsZUNvbXBhbnlDaGFuZ2UKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFsoX29wZW5CbG9jayh0cnVlKSwgX2NyZWF0ZUVsZW1lbnRCbG9jayhfRnJhZ21lbnQsIG51bGwsIF9yZW5kZXJMaXN0KGNvbXBhbmllcy52YWx1ZSwgY29tcGFueSA9PiB7CiAgICAgICAgICAgICAgICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soX3VucmVmKEVsT3B0aW9uKSwgewogICAgICAgICAgICAgICAgICBrZXk6IGNvbXBhbnkuaWQsCiAgICAgICAgICAgICAgICAgIGxhYmVsOiBjb21wYW55Lm5hbWUsCiAgICAgICAgICAgICAgICAgIHZhbHVlOiBjb21wYW55LmlkCiAgICAgICAgICAgICAgICB9LCBudWxsLCA4LCBbImxhYmVsIiwgInZhbHVlIl0pOwogICAgICAgICAgICAgIH0pLCAxMjgpKV0pLAogICAgICAgICAgICAgIF86IDEKICAgICAgICAgICAgfSwgOCwgWyJtb2RlbFZhbHVlIl0pXSksCiAgICAgICAgICAgIF86IDEKICAgICAgICAgIH0pLCBfY3JlYXRlVk5vZGUoX3VucmVmKEVsRm9ybUl0ZW0pLCB7CiAgICAgICAgICAgIGxhYmVsOiAi5YiG57G7IiwKICAgICAgICAgICAgcHJvcDogImNhdGVnb3J5IgogICAgICAgICAgfSwgewogICAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZVZOb2RlKF91bnJlZihFbFNlbGVjdCksIHsKICAgICAgICAgICAgICBtb2RlbFZhbHVlOiBjdXJyZW50QXJ0aWNsZS52YWx1ZS5jYXRlZ29yeSwKICAgICAgICAgICAgICAib25VcGRhdGU6bW9kZWxWYWx1ZSI6IF9jYWNoZVsxMV0gfHwgKF9jYWNoZVsxMV0gPSAkZXZlbnQgPT4gY3VycmVudEFydGljbGUudmFsdWUuY2F0ZWdvcnkgPSAkZXZlbnQpLAogICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAi5Y+v6YCJ77yM6K+35YWI6YCJ5oup5YWs5Y+4IiwKICAgICAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICAgICAgIndpZHRoIjogIjEwMCUiCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBkaXNhYmxlZDogIWN1cnJlbnRBcnRpY2xlLnZhbHVlLmNvbXBhbnksCiAgICAgICAgICAgICAgY2xlYXJhYmxlOiAiIgogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gWyhfb3BlbkJsb2NrKHRydWUpLCBfY3JlYXRlRWxlbWVudEJsb2NrKF9GcmFnbWVudCwgbnVsbCwgX3JlbmRlckxpc3QoY29tcGFueUNhdGVnb3JpZXMudmFsdWUsIGNhdGVnb3J5ID0+IHsKICAgICAgICAgICAgICAgIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfdW5yZWYoRWxPcHRpb24pLCB7CiAgICAgICAgICAgICAgICAgIGtleTogY2F0ZWdvcnkuaWQsCiAgICAgICAgICAgICAgICAgIGxhYmVsOiBjYXRlZ29yeS5uYW1lLAogICAgICAgICAgICAgICAgICB2YWx1ZTogY2F0ZWdvcnkuaWQKICAgICAgICAgICAgICAgIH0sIG51bGwsIDgsIFsibGFiZWwiLCAidmFsdWUiXSk7CiAgICAgICAgICAgICAgfSksIDEyOCkpXSksCiAgICAgICAgICAgICAgXzogMQogICAgICAgICAgICB9LCA4LCBbIm1vZGVsVmFsdWUiLCAiZGlzYWJsZWQiXSldKSwKICAgICAgICAgICAgXzogMQogICAgICAgICAgfSksIF9jcmVhdGVWTm9kZShfdW5yZWYoRWxGb3JtSXRlbSksIHsKICAgICAgICAgICAgbGFiZWw6ICLmj4/ov7AiLAogICAgICAgICAgICBwcm9wOiAiZGVzY3JpcHRpb24iCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlVk5vZGUoX3VucmVmKEVsSW5wdXQpLCB7CiAgICAgICAgICAgICAgbW9kZWxWYWx1ZTogY3VycmVudEFydGljbGUudmFsdWUuZGVzY3JpcHRpb24sCiAgICAgICAgICAgICAgIm9uVXBkYXRlOm1vZGVsVmFsdWUiOiBfY2FjaGVbMTJdIHx8IChfY2FjaGVbMTJdID0gJGV2ZW50ID0+IGN1cnJlbnRBcnRpY2xlLnZhbHVlLmRlc2NyaXB0aW9uID0gJGV2ZW50KSwKICAgICAgICAgICAgICB0eXBlOiAidGV4dGFyZWEiCiAgICAgICAgICAgIH0sIG51bGwsIDgsIFsibW9kZWxWYWx1ZSJdKV0pLAogICAgICAgICAgICBfOiAxCiAgICAgICAgICB9KSwgX2NyZWF0ZVZOb2RlKF91bnJlZihFbEZvcm1JdGVtKSwgewogICAgICAgICAgICBsYWJlbDogIuaWh+S7tiIsCiAgICAgICAgICAgIHByb3A6ICJvcmlnaW5hbF9maWxlIgogICAgICAgICAgfSwgewogICAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbY3VycmVudEFydGljbGUudmFsdWUuaWQgJiYgY3VycmVudEFydGljbGUudmFsdWUub3JpZ2luYWxfZmlsZW5hbWUgJiYgIXNob3dVcGxvYWQudmFsdWUgPyAoX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJkaXYiLCBfaG9pc3RlZF8xNywgW19jcmVhdGVFbGVtZW50Vk5vZGUoInNwYW4iLCBfaG9pc3RlZF8xOCwgIuW9k+WJjeaWh+S7tjogIiArIF90b0Rpc3BsYXlTdHJpbmcoY3VycmVudEFydGljbGUudmFsdWUub3JpZ2luYWxfZmlsZW5hbWUpICsgIiAoIiArIF90b0Rpc3BsYXlTdHJpbmcoY3VycmVudEFydGljbGUudmFsdWUuZmlsZV9zaXplKSArICIgS0IpIiwgMSksIF9jcmVhdGVWTm9kZShfdW5yZWYoRWxCdXR0b24pLCB7CiAgICAgICAgICAgICAgb25DbGljazogX2NhY2hlWzEzXSB8fCAoX2NhY2hlWzEzXSA9ICRldmVudCA9PiBzaG93VXBsb2FkLnZhbHVlID0gdHJ1ZSksCiAgICAgICAgICAgICAgdHlwZTogInByaW1hcnkiLAogICAgICAgICAgICAgIGxpbms6ICIiLAogICAgICAgICAgICAgIHN0eWxlOiB7CiAgICAgICAgICAgICAgICAibWFyZ2luLWxlZnQiOiAiMTBweCIKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBfY2FjaGVbMjZdIHx8IChfY2FjaGVbMjZdID0gW19jcmVhdGVUZXh0Vk5vZGUoIuabv+aNouaWh+S7tiIpXSkpLAogICAgICAgICAgICAgIF86IDEKICAgICAgICAgICAgfSldKSkgOiAoX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soX3VucmVmKEVsVXBsb2FkKSwgewogICAgICAgICAgICAgIGtleTogMSwKICAgICAgICAgICAgICByZWZfa2V5OiAidXBsb2FkIiwKICAgICAgICAgICAgICByZWY6IHVwbG9hZCwKICAgICAgICAgICAgICBhY3Rpb246ICIjIiwKICAgICAgICAgICAgICAiYXV0by11cGxvYWQiOiBmYWxzZSwKICAgICAgICAgICAgICAib24tY2hhbmdlIjogaGFuZGxlRmlsZUNoYW5nZSwKICAgICAgICAgICAgICAib24tcmVtb3ZlIjogaGFuZGxlRmlsZVJlbW92ZSwKICAgICAgICAgICAgICBsaW1pdDogMSwKICAgICAgICAgICAgICBjbGFzczogInVwbG9hZC1jb21wb25lbnQiCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICB0cmlnZ2VyOiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZVZOb2RlKF91bnJlZihFbEJ1dHRvbiksIHsKICAgICAgICAgICAgICAgIHR5cGU6ICJwcmltYXJ5IgogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IF9jYWNoZVsyN10gfHwgKF9jYWNoZVsyN10gPSBbX2NyZWF0ZVRleHRWTm9kZSgi6YCJ5oup5paH5Lu2IildKSksCiAgICAgICAgICAgICAgICBfOiAxCiAgICAgICAgICAgICAgfSldKSwKICAgICAgICAgICAgICB0aXA6IF93aXRoQ3R4KCgpID0+IF9jYWNoZVsyOF0gfHwgKF9jYWNoZVsyOF0gPSBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgewogICAgICAgICAgICAgICAgY2xhc3M6ICJlbC11cGxvYWRfX3RpcCIKICAgICAgICAgICAgICB9LCAiIOWPquiDveS4iuS8oOWNleS4quaWh+S7tu+8jOaWh+S7tuWkp+Wwj+S4jeW6lOi2hei/h+ezu+e7n+mZkOWItuOAgiAiLCAtMSldKSksCiAgICAgICAgICAgICAgXzogMQogICAgICAgICAgICB9LCA1MTIpKV0pLAogICAgICAgICAgICBfOiAxCiAgICAgICAgICB9KV0pLAogICAgICAgICAgXzogMQogICAgICAgIH0sIDgsIFsibW9kZWwiXSldKSwKICAgICAgICBfOiAxCiAgICAgIH0sIDgsIFsibW9kZWxWYWx1ZSIsICJ0aXRsZSJdKSwgX2NyZWF0ZVZOb2RlKF91bnJlZihFbERpYWxvZyksIHsKICAgICAgICBtb2RlbFZhbHVlOiBpc0J1aWxkTW9kYWxPcGVuLnZhbHVlLAogICAgICAgICJvblVwZGF0ZTptb2RlbFZhbHVlIjogX2NhY2hlWzE2XSB8fCAoX2NhY2hlWzE2XSA9ICRldmVudCA9PiBpc0J1aWxkTW9kYWxPcGVuLnZhbHVlID0gJGV2ZW50KSwKICAgICAgICB0aXRsZTogIuaehOW7uuWFrOWPuOefpeivhuW6kyIsCiAgICAgICAgd2lkdGg6ICI3MCUiLAogICAgICAgIG9uQ2xvc2U6IHN0b3BTdGF0dXNQb2xsaW5nCiAgICAgIH0sIHsKICAgICAgICBmb290ZXI6IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBfaG9pc3RlZF8yMCwgW19jcmVhdGVWTm9kZShfdW5yZWYoRWxCdXR0b24pLCB7CiAgICAgICAgICB0eXBlOiAicHJpbWFyeSIsCiAgICAgICAgICBvbkNsaWNrOiBfY2FjaGVbMTVdIHx8IChfY2FjaGVbMTVdID0gJGV2ZW50ID0+IHRyaWdnZXJCdWlsZEZvckNvbXBhbmllcyhzZWxlY3RlZENvbXBhbnlJZHMudmFsdWUpKSwKICAgICAgICAgIGRpc2FibGVkOiBzZWxlY3RlZENvbXBhbnlJZHMudmFsdWUubGVuZ3RoID09PSAwIHx8IGlzQW55Q29tcGFueUJ1aWxkaW5nKHNlbGVjdGVkQ29tcGFueUlkcy52YWx1ZSkKICAgICAgICB9LCB7CiAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZVRleHRWTm9kZSgiIOaehOW7uumAieS4rSAoIiArIF90b0Rpc3BsYXlTdHJpbmcoc2VsZWN0ZWRDb21wYW55SWRzLnZhbHVlLmxlbmd0aCkgKyAiKSAiLCAxKV0pLAogICAgICAgICAgXzogMQogICAgICAgIH0sIDgsIFsiZGlzYWJsZWQiXSksIF9jcmVhdGVWTm9kZShfdW5yZWYoRWxCdXR0b24pLCB7CiAgICAgICAgICBvbkNsaWNrOiBmZXRjaEJ1aWxkU3RhdHVzZXMsCiAgICAgICAgICBpY29uOiBfdW5yZWYoUmVmcmVzaCkKICAgICAgICB9LCB7CiAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBfY2FjaGVbMzNdIHx8IChfY2FjaGVbMzNdID0gW19jcmVhdGVUZXh0Vk5vZGUoIuWIt+aWsOeKtuaAgSIpXSkpLAogICAgICAgICAgXzogMQogICAgICAgIH0sIDgsIFsiaWNvbiJdKV0pXSksCiAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gW193aXRoRGlyZWN0aXZlcygoX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soX3VucmVmKEVsVGFibGUpLCB7CiAgICAgICAgICBkYXRhOiBidWlsZFN0YXR1c2VzLnZhbHVlLAogICAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2U6IGhhbmRsZVNlbGVjdGlvbkNoYW5nZSwKICAgICAgICAgIGJvcmRlcjogIiIsCiAgICAgICAgICAicm93LWtleSI6ICJjb21wYW55X2lkIgogICAgICAgIH0sIHsKICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlVk5vZGUoX3VucmVmKEVsVGFibGVDb2x1bW4pLCB7CiAgICAgICAgICAgIHR5cGU6ICJzZWxlY3Rpb24iLAogICAgICAgICAgICB3aWR0aDogIjU1IiwKICAgICAgICAgICAgc2VsZWN0YWJsZTogaXNDb21wYW55U2VsZWN0YWJsZQogICAgICAgICAgfSksIF9jcmVhdGVWTm9kZShfdW5yZWYoRWxUYWJsZUNvbHVtbiksIHsKICAgICAgICAgICAgcHJvcDogImNvbXBhbnlfbmFtZSIsCiAgICAgICAgICAgIGxhYmVsOiAi5YWs5Y+45ZCN56ewIgogICAgICAgICAgfSksIF9jcmVhdGVWTm9kZShfdW5yZWYoRWxUYWJsZUNvbHVtbiksIHsKICAgICAgICAgICAgcHJvcDogImZpbGVfY291bnQiLAogICAgICAgICAgICBsYWJlbDogIuaWh+S7tuaVsCIsCiAgICAgICAgICAgIHdpZHRoOiAiODAiCiAgICAgICAgICB9KSwgX2NyZWF0ZVZOb2RlKF91bnJlZihFbFRhYmxlQ29sdW1uKSwgewogICAgICAgICAgICBwcm9wOiAic3RhdHVzIiwKICAgICAgICAgICAgbGFiZWw6ICLmnoTlu7rnirbmgIEiCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KHNjb3BlID0+IFtzY29wZS5yb3cuZmlsZV9jb3VudCA9PT0gMCA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfdW5yZWYoRWxUb29sdGlwKSwgewogICAgICAgICAgICAgIGtleTogMCwKICAgICAgICAgICAgICBjb250ZW50OiAi5rKh5pyJ5paH5Lu277yM5peg5rOV5p6E5bu6IiwKICAgICAgICAgICAgICBwbGFjZW1lbnQ6ICJ0b3AiCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfdGFnLCB7CiAgICAgICAgICAgICAgICB0eXBlOiAiaW5mbyIKICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBfY2FjaGVbMzFdIHx8IChfY2FjaGVbMzFdID0gW19jcmVhdGVUZXh0Vk5vZGUoIiDml6Dms5XmnoTlu7ogIildKSksCiAgICAgICAgICAgICAgICBfOiAxCiAgICAgICAgICAgICAgfSldKSwKICAgICAgICAgICAgICBfOiAxCiAgICAgICAgICAgIH0pKSA6IChfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfY29tcG9uZW50X2VsX3RhZywgewogICAgICAgICAgICAgIGtleTogMSwKICAgICAgICAgICAgICB0eXBlOiBnZXRTdGF0dXNUYWdUeXBlKHNjb3BlLnJvdy5zdGF0dXMpCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZVRleHRWTm9kZShfdG9EaXNwbGF5U3RyaW5nKGdldFN0YXR1c1RleHQoc2NvcGUucm93LnN0YXR1cykpICsgIiAiLCAxKSwgc2NvcGUucm93LnN0YXR1cyA9PT0gJ3Byb2Nlc3NpbmcnID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKF91bnJlZihFbEljb24pLCB7CiAgICAgICAgICAgICAgICBrZXk6IDAsCiAgICAgICAgICAgICAgICBjbGFzczogImlzLWxvYWRpbmciCiAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gW19jcmVhdGVWTm9kZShfdW5yZWYoTG9hZGluZykpXSksCiAgICAgICAgICAgICAgICBfOiAxCiAgICAgICAgICAgICAgfSkpIDogX2NyZWF0ZUNvbW1lbnRWTm9kZSgiIiwgdHJ1ZSldKSwKICAgICAgICAgICAgICBfOiAyCiAgICAgICAgICAgIH0sIDEwMzIsIFsidHlwZSJdKSldKSwKICAgICAgICAgICAgXzogMQogICAgICAgICAgfSksIF9jcmVhdGVWTm9kZShfdW5yZWYoRWxUYWJsZUNvbHVtbiksIHsKICAgICAgICAgICAgcHJvcDogImxhc3RfYnVpbHRfYXQiLAogICAgICAgICAgICBsYWJlbDogIuS4iuasoeaehOW7uuaXtumXtCIKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoc2NvcGUgPT4gW19jcmVhdGVUZXh0Vk5vZGUoX3RvRGlzcGxheVN0cmluZyhzY29wZS5yb3cubGFzdF9idWlsdF9hdCA/IG5ldyBEYXRlKHNjb3BlLnJvdy5sYXN0X2J1aWx0X2F0KS50b0xvY2FsZVN0cmluZygpIDogJ04vQScpLCAxKV0pLAogICAgICAgICAgICBfOiAxCiAgICAgICAgICB9KSwgX2NyZWF0ZVZOb2RlKF91bnJlZihFbFRhYmxlQ29sdW1uKSwgewogICAgICAgICAgICBwcm9wOiAicHJvY2Vzc2luZ19tZXNzYWdlIiwKICAgICAgICAgICAgbGFiZWw6ICLmtojmga8iLAogICAgICAgICAgICAic2hvdy1vdmVyZmxvdy10b29sdGlwIjogIiIKICAgICAgICAgIH0pLCBfY3JlYXRlVk5vZGUoX3VucmVmKEVsVGFibGVDb2x1bW4pLCB7CiAgICAgICAgICAgIGxhYmVsOiAi5pON5L2cIiwKICAgICAgICAgICAgd2lkdGg6ICIxMjAiCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KHNjb3BlID0+IFtfY3JlYXRlVk5vZGUoX3VucmVmKEVsVG9vbHRpcCksIHsKICAgICAgICAgICAgICBjb250ZW50OiAi5rKh5pyJ5paH5Lu277yM5peg5rOV5p6E5bu6IiwKICAgICAgICAgICAgICBkaXNhYmxlZDogc2NvcGUucm93LmZpbGVfY291bnQgPiAwCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMTksIFtfY3JlYXRlVk5vZGUoX3VucmVmKEVsQnV0dG9uKSwgewogICAgICAgICAgICAgICAgdHlwZTogInByaW1hcnkiLAogICAgICAgICAgICAgICAgc2l6ZTogInNtYWxsIiwKICAgICAgICAgICAgICAgIG9uQ2xpY2s6ICRldmVudCA9PiB0cmlnZ2VyQnVpbGRGb3JDb21wYW5pZXMoW3Njb3BlLnJvdy5jb21wYW55X2lkXSksCiAgICAgICAgICAgICAgICBkaXNhYmxlZDogaXNDb21wYW55QnVpbGRpbmcoc2NvcGUucm93LmNvbXBhbnlfaWQpIHx8IHNjb3BlLnJvdy5maWxlX2NvdW50ID09PSAwCiAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gX2NhY2hlWzMyXSB8fCAoX2NhY2hlWzMyXSA9IFtfY3JlYXRlVGV4dFZOb2RlKCIg5p6E5bu6ICIpXSkpLAogICAgICAgICAgICAgICAgXzogMgogICAgICAgICAgICAgIH0sIDEwMzIsIFsib25DbGljayIsICJkaXNhYmxlZCJdKV0pXSksCiAgICAgICAgICAgICAgXzogMgogICAgICAgICAgICB9LCAxMDMyLCBbImRpc2FibGVkIl0pXSksCiAgICAgICAgICAgIF86IDEKICAgICAgICAgIH0pXSksCiAgICAgICAgICBfOiAxCiAgICAgICAgfSwgOCwgWyJkYXRhIl0pKSwgW1tfZGlyZWN0aXZlX2xvYWRpbmcsIGlzQnVpbGRTdGF0dXNMb2FkaW5nLnZhbHVlXV0pXSksCiAgICAgICAgXzogMQogICAgICB9LCA4LCBbIm1vZGVsVmFsdWUiXSldKTsKICAgIH07CiAgfQp9Ow=="},{"version":3,"names":["ref","reactive","onMounted","computed","adminApi","ElMessage","ElMessageBox","ElCard","ElIcon","ElInput","ElButton","ElTable","ElTableColumn","ElPagination","ElDialog","ElForm","ElFormItem","ElSelect","ElOption","ElUpload","ElColorPicker","ElEmpty","ElTooltip","Collection","Search","Upload","Edit","Delete","Plus","Document","Folder","DataAnalysis","TrendCharts","Reading","MagicStick","Loading","Refresh","articles","categories","companies","loading","searchQuery","total","pagination","page","pageSize","isCategoryModalOpen","isSingleCategoryModalOpen","currentCategory","categoryForm","isEditingCategory","value","id","availableIcons","name","label","component","isArticleModalOpen","currentArticle","articleForm","companyCategories","upload","showUpload","isBuildModalOpen","buildStatuses","isBuildStatusLoading","selectedCompanyIds","buildingCompanyIds","Set","statusPollInterval","searchTimeout","fetchCategories","response","getKnowledgeCategories","all","data","error","fetchCompanies","getCompanies","openCategoryModal","resetCategoryForm","closeSingleCategoryModal","_categoryForm$value","resetFields","_categoryForm$value2","description","icon","color","company","selectCategoryForEdit","category","saveCategory","updateKnowledgeCategory","createKnowledgeCategory","success","confirmDeleteCategory","confirm","confirmButtonText","cancelButtonText","type","then","deleteKnowledgeCategory","debouncedFetchArticles","clearTimeout","setTimeout","fetchArticles","params","size","search","getKnowledgeBases","results","count","openArticleModal","article","fetchCategoriesForCompany","closeArticleModal","_upload$value","_articleForm$value","clearFiles","saveArticle","dataToSave","original_file","updateKnowledgeBase","createKnowledgeBase","_error$response","errorMsg","JSON","stringify","confirmDeleteArticle","title","deleteKnowledgeBase","handlePageChange","newPage","handleCompanyChange","companyId","company_id","handleFileChange","file","raw","handleFileRemove","openBuildModal","fetchBuildStatuses","getKnowledgeBuildStatus","handleSelectionChange","selection","map","item","triggerBuildForCompanies","companyIds","length","buildKnowledgeForCompanies","message","forEach","add","startStatusPolling","setInterval","stillProcessing","some","s","status","stopStatusPolling","clear","info","clearInterval","getStatusTagType","getStatusText","isCompanyBuilding","_buildStatuses$value$","find","isAnyCompanyBuilding","hasFiles","every","file_count","isCompanySelectable","row"],"sources":["C:/Users/18083/Desktop/CCIT/office/smart-office/frontend/src/views/admin/KnowledgeManagement.vue"],"sourcesContent":["<template>\n  <div class=\"management-container\">\n    <el-card class=\"box-card\">\n      <template #header>\n        <div class=\"card-header\">\n          <div class=\"header-left\">\n            <el-icon class=\"header-icon\"><Collection /></el-icon>\n            <span>知识库管理</span>\n          </div>\n          <div class=\"header-right\">\n            <el-input\n              v-model=\"searchQuery\"\n              placeholder=\"搜索知识库文章...\"\n              clearable\n              @clear=\"fetchArticles\"\n              @input=\"debouncedFetchArticles\"\n              class=\"search-input\"\n            >\n              <template #append>\n                <el-button :icon=\"Search\" />\n              </template>\n            </el-input>\n            <el-button type=\"success\" @click=\"openBuildModal\">构建知识库</el-button>\n            <el-button type=\"info\" @click=\"openCategoryModal()\">管理分类</el-button>\n            <el-button type=\"primary\" :icon=\"Upload\" @click=\"openArticleModal()\">上传文件</el-button>\n          </div>\n        </div>\n      </template>\n      <!-- Main content will go here -->\n      <el-table :data=\"articles\" v-loading=\"loading\" border>\n        <el-table-column prop=\"title\" label=\"标题\" min-width=\"200\"></el-table-column>\n        <el-table-column prop=\"original_filename\" label=\"文件名\" min-width=\"200\"></el-table-column>\n        <el-table-column prop=\"category_name\" label=\"分类\" width=\"120\"></el-table-column>\n        <el-table-column prop=\"company_name\" label=\"所属公司\" width=\"150\"></el-table-column>\n        <el-table-column prop=\"creator_name\" label=\"上传者\" width=\"120\"></el-table-column>\n        <el-table-column prop=\"created_at\" label=\"上传时间\" width=\"180\">\n            <template #default=\"scope\">\n                {{ new Date(scope.row.created_at).toLocaleString() }}\n            </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" width=\"150\" fixed=\"right\">\n          <template #default=\"scope\">\n            <el-button size=\"small\" :icon=\"Edit\" @click=\"openArticleModal(scope.row)\"></el-button>\n            <el-button size=\"small\" type=\"danger\" :icon=\"Delete\" @click=\"confirmDeleteArticle(scope.row)\"></el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <el-pagination\n        background\n        layout=\"prev, pager, next, total\"\n        :total=\"total\"\n        :page-size=\"pagination.pageSize\"\n        :current-page=\"pagination.page\"\n        @current-change=\"handlePageChange\"\n        style=\"margin-top: 20px; text-align: right;\"\n      />\n    </el-card>\n\n    <!-- Category Management Modal -->\n    <el-dialog v-model=\"isCategoryModalOpen\" title=\"管理分类\" width=\"60%\">\n      <div class=\"category-dialog-content\">\n        <div class=\"category-list-section\">\n           <div class=\"section-header\">\n            <h5>已有分类</h5>\n            <el-button \n              type=\"primary\" \n              size=\"small\" \n              @click=\"resetCategoryForm\">\n              <el-icon><Plus /></el-icon> 新增分类\n            </el-button>\n          </div>\n          <div v-if=\"!categories.length\" class=\"category-items\">\n             <el-empty description=\"暂无分类\" />\n          </div>\n          <div v-else class=\"category-items\">\n            <div \n                v-for=\"category in categories\" \n                :key=\"category.id\" \n                class=\"category-list-item\"\n                :class=\"{ 'selected': currentCategory.id === category.id }\"\n                @click=\"selectCategoryForEdit(category)\"\n            >\n              <div class=\"category-info\">\n                 <div class=\"category-icon\" :style=\"{'background-color': category.color}\">\n                    <el-icon><component :is=\"category.icon || 'Document'\" /></el-icon>\n                 </div>\n                <span class=\"category-name-section\">{{ category.name }}</span>\n              </div>\n               <div class=\"category-actions\">\n                    <el-button type=\"primary\" size=\"small\" plain :icon=\"Edit\" @click.stop=\"selectCategoryForEdit(category)\" />\n                    <el-button type=\"danger\" size=\"small\" plain :icon=\"Delete\" @click.stop=\"confirmDeleteCategory(category)\" />\n                </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"category-form-section\">\n          <div class=\"section-header\">\n             <h5>{{ isEditingCategory ? '编辑分类' : '新增分类' }}</h5>\n             <el-button v-if=\"isEditingCategory\" text @click=\"resetCategoryForm\">取消</el-button>\n          </div>\n          <el-form :model=\"currentCategory\" ref=\"categoryForm\" label-position=\"top\">\n            <el-form-item label=\"分类名称\" prop=\"name\" required>\n              <el-input v-model=\"currentCategory.name\" />\n            </el-form-item>\n             <el-form-item label=\"所属公司\" prop=\"company\" required>\n              <el-select v-model=\"currentCategory.company\" placeholder=\"请选择公司\" style=\"width: 100%;\">\n                <el-option v-for=\"company in companies\" :key=\"company.id\" :label=\"company.name\" :value=\"company.id\" />\n              </el-select>\n            </el-form-item>\n            <el-form-item label=\"分类描述\" prop=\"description\">\n              <el-input v-model=\"currentCategory.description\" type=\"textarea\" />\n            </el-form-item>\n            <el-form-item label=\"图标\" prop=\"icon\">\n               <el-select v-model=\"currentCategory.icon\" placeholder=\"选择一个图标\" style=\"width: 100%;\">\n                <el-option v-for=\"icon in availableIcons\" :key=\"icon.name\" :label=\"icon.label\" :value=\"icon.name\">\n                  <div style=\"display: flex; align-items: center;\">\n                    <el-icon style=\"margin-right: 8px;\"><component :is=\"icon.component\" /></el-icon>\n                    <span>{{ icon.label }}</span>\n                  </div>\n                </el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item label=\"颜色\" prop=\"color\">\n              <el-color-picker v-model=\"currentCategory.color\" />\n            </el-form-item>\n            <el-form-item>\n                <el-button type=\"primary\" @click=\"saveCategory\">保存</el-button>\n                <el-button @click=\"resetCategoryForm\" v-if=\"!isEditingCategory\">重置</el-button>\n            </el-form-item>\n          </el-form>\n        </div>\n      </div>\n    </el-dialog>\n\n    <!-- Add/Edit Article Modal -->\n    <el-dialog v-model=\"isArticleModalOpen\" :title=\"currentArticle.id ? '编辑文件信息' : '上传新文件'\" width=\"50%\">\n      <el-form :model=\"currentArticle\" ref=\"articleForm\" label-width=\"80px\">\n        <el-form-item label=\"标题\" prop=\"title\" required>\n          <el-input v-model=\"currentArticle.title\" />\n        </el-form-item>\n        <el-form-item label=\"公司\" prop=\"company\" required>\n            <el-select v-model=\"currentArticle.company\" placeholder=\"请选择公司\" style=\"width: 100%;\" @change=\"handleCompanyChange\">\n              <el-option v-for=\"company in companies\" :key=\"company.id\" :label=\"company.name\" :value=\"company.id\" />\n            </el-select>\n        </el-form-item>\n        <el-form-item label=\"分类\" prop=\"category\">\n            <el-select v-model=\"currentArticle.category\" placeholder=\"可选，请先选择公司\" style=\"width: 100%;\" :disabled=\"!currentArticle.company\" clearable>\n              <el-option v-for=\"category in companyCategories\" :key=\"category.id\" :label=\"category.name\" :value=\"category.id\" />\n            </el-select>\n        </el-form-item>\n        <el-form-item label=\"描述\" prop=\"description\">\n          <el-input v-model=\"currentArticle.description\" type=\"textarea\" />\n        </el-form-item>\n        <el-form-item label=\"文件\" prop=\"original_file\">\n            <div v-if=\"currentArticle.id && currentArticle.original_filename && !showUpload\">\n                <span class=\"file-info\">当前文件: {{ currentArticle.original_filename }} ({{ currentArticle.file_size }} KB)</span>\n                <el-button @click=\"showUpload = true\" type=\"primary\" link style=\"margin-left: 10px;\">替换文件</el-button>\n            </div>\n            <el-upload\n                v-else\n                ref=\"upload\"\n                action=\"#\"\n                :auto-upload=\"false\"\n                :on-change=\"handleFileChange\"\n                :on-remove=\"handleFileRemove\"\n                :limit=\"1\"\n                class=\"upload-component\"\n            >\n                <template #trigger>\n                <el-button type=\"primary\">选择文件</el-button>\n                </template>\n                <template #tip>\n                <div class=\"el-upload__tip\">\n                    只能上传单个文件，文件大小不应超过系统限制。\n                </div>\n                </template>\n            </el-upload>\n        </el-form-item>\n      </el-form>\n      <template #footer>\n        <el-button @click=\"closeArticleModal\">取消</el-button>\n        <el-button type=\"primary\" @click=\"saveArticle\">保存</el-button>\n      </template>\n    </el-dialog>\n\n    <!-- Build Knowledge Base Modal -->\n    <el-dialog v-model=\"isBuildModalOpen\" title=\"构建公司知识库\" width=\"70%\" @close=\"stopStatusPolling\">\n        <el-table \n            :data=\"buildStatuses\" \n            v-loading=\"isBuildStatusLoading\"\n            @selection-change=\"handleSelectionChange\"\n            border\n            row-key=\"company_id\"\n        >\n            <el-table-column type=\"selection\" width=\"55\" :selectable=\"isCompanySelectable\" />\n            <el-table-column prop=\"company_name\" label=\"公司名称\" />\n            <el-table-column prop=\"file_count\" label=\"文件数\" width=\"80\" />\n            <el-table-column prop=\"status\" label=\"构建状态\">\n                <template #default=\"scope\">\n                    <el-tooltip v-if=\"scope.row.file_count === 0\" content=\"没有文件，无法构建\" placement=\"top\">\n                        <el-tag type=\"info\">\n                            无法构建\n                        </el-tag>\n                    </el-tooltip>\n                    <el-tag v-else :type=\"getStatusTagType(scope.row.status)\">\n                        {{ getStatusText(scope.row.status) }}\n                        <el-icon v-if=\"scope.row.status === 'processing'\" class=\"is-loading\"><Loading /></el-icon>\n                    </el-tag>\n                </template>\n            </el-table-column>\n            <el-table-column prop=\"last_built_at\" label=\"上次构建时间\">\n                 <template #default=\"scope\">\n                    {{ scope.row.last_built_at ? new Date(scope.row.last_built_at).toLocaleString() : 'N/A' }}\n                </template>\n            </el-table-column>\n            <el-table-column prop=\"processing_message\" label=\"消息\" show-overflow-tooltip />\n            <el-table-column label=\"操作\" width=\"120\">\n                <template #default=\"scope\">\n                    <el-tooltip content=\"没有文件，无法构建\" :disabled=\"scope.row.file_count > 0\">\n                        <div style=\"display: inline-block\"> <!-- Wrapper for tooltip on disabled button -->\n                             <el-button \n                                type=\"primary\" \n                                size=\"small\" \n                                @click=\"triggerBuildForCompanies([scope.row.company_id])\"\n                                :disabled=\"isCompanyBuilding(scope.row.company_id) || scope.row.file_count === 0\"\n                            >\n                                构建\n                            </el-button>\n                        </div>\n                    </el-tooltip>\n                </template>\n            </el-table-column>\n        </el-table>\n        <template #footer>\n            <div class=\"build-footer\">\n                <el-button \n                    type=\"primary\" \n                    @click=\"triggerBuildForCompanies(selectedCompanyIds)\"\n                    :disabled=\"selectedCompanyIds.length === 0 || isAnyCompanyBuilding(selectedCompanyIds)\"\n                >\n                    构建选中 ({{ selectedCompanyIds.length }})\n                </el-button>\n                <el-button @click=\"fetchBuildStatuses\" :icon=\"Refresh\">刷新状态</el-button>\n            </div>\n        </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script setup>\nimport { ref, reactive, onMounted, computed } from 'vue';\nimport adminApi from '@/api/admin';\nimport { ElMessage, ElMessageBox, ElCard, ElIcon, ElInput, ElButton, ElTable, ElTableColumn, ElPagination, ElDialog, ElForm, ElFormItem, ElSelect, ElOption, ElUpload, ElColorPicker, ElEmpty, ElTooltip } from 'element-plus';\nimport { Collection, Search, Upload, Edit, Delete, Plus, Document, Folder, DataAnalysis, TrendCharts, Reading, MagicStick, Loading, Refresh } from '@element-plus/icons-vue';\n\nconst articles = ref([]);\nconst categories = ref([]);\nconst companies = ref([]);\nconst loading = ref(true);\nconst searchQuery = ref('');\nconst total = ref(0);\nconst pagination = reactive({\n  page: 1,\n  pageSize: 10,\n});\n\nconst isCategoryModalOpen = ref(false);\nconst isSingleCategoryModalOpen = ref(false);\nconst currentCategory = ref({});\nconst categoryForm = ref(null);\nconst isEditingCategory = computed(() => !!currentCategory.value.id);\n\nconst availableIcons = [\n  { name: 'Document', label: '文档', component: Document },\n  { name: 'Folder', label: '文件夹', component: Folder },\n  { name: 'DataAnalysis', label: '数据分析', component: DataAnalysis },\n  { name: 'TrendCharts', label: '趋势图', component: TrendCharts },\n  { name: 'Reading', label: '阅读', component: Reading },\n  { name: 'MagicStick', label: '魔术棒', component: MagicStick },\n];\n\nconst isArticleModalOpen = ref(false);\nconst currentArticle = ref({});\nconst articleForm = ref(null);\nconst companyCategories = ref([]);\nconst upload = ref(null);\nconst showUpload = ref(false);\n\nconst isBuildModalOpen = ref(false);\nconst buildStatuses = ref([]);\nconst isBuildStatusLoading = ref(false);\nconst selectedCompanyIds = ref([]);\nconst buildingCompanyIds = ref(new Set());\nlet statusPollInterval = null;\n\nlet searchTimeout = null;\n\nconst fetchCategories = async () => {\n  try {\n    const response = await adminApi.getKnowledgeCategories({ all: 'true' });\n    categories.value = response.data;\n  } catch (error) {\n    ElMessage.error('获取分类列表失败');\n  }\n};\n\nconst fetchCompanies = async () => {\n  try {\n    const response = await adminApi.getCompanies({ all: 'true' });\n    companies.value = response.data;\n  } catch (error) {\n    ElMessage.error('获取公司列表失败');\n  }\n};\n\nconst openCategoryModal = async () => {\n  await fetchCompanies();\n  await fetchCategories();\n  resetCategoryForm();\n  isCategoryModalOpen.value = true;\n};\n\nconst closeSingleCategoryModal = () => {\n  isSingleCategoryModalOpen.value = false;\n  currentCategory.value = {};\n  categoryForm.value?.resetFields();\n};\n\nconst resetCategoryForm = () => {\n  currentCategory.value = {\n    id: null,\n    name: '',\n    description: '',\n    icon: 'Document',\n    color: '#409EFF',\n    company: null,\n  };\n  categoryForm.value?.resetFields();\n};\n\nconst selectCategoryForEdit = (category) => {\n  currentCategory.value = { ...category };\n};\n\nconst saveCategory = async () => {\n  try {\n    if (currentCategory.value.id) {\n      await adminApi.updateKnowledgeCategory(currentCategory.value.id, currentCategory.value);\n    } else {\n      await adminApi.createKnowledgeCategory(currentCategory.value);\n    }\n    ElMessage.success('分类保存成功');\n    closeSingleCategoryModal();\n    fetchCategories(); // Refresh list in the background\n  } catch (error) {\n    ElMessage.error('保存分类失败');\n  }\n};\n\nconst confirmDeleteCategory = (category) => {\n  ElMessageBox.confirm(`确定要删除分类 \"${category.name}\" 吗?`, '警告', {\n    confirmButtonText: '确定',\n    cancelButtonText: '取消',\n    type: 'warning',\n  }).then(async () => {\n    try {\n      await adminApi.deleteKnowledgeCategory(category.id);\n      ElMessage.success('分类删除成功');\n      fetchCategories(); // Refresh list\n    } catch (error) {\n      ElMessage.error('删除分类失败');\n    }\n  });\n};\n\nconst debouncedFetchArticles = () => {\n  clearTimeout(searchTimeout);\n  searchTimeout = setTimeout(() => {\n    pagination.page = 1;\n    fetchArticles();\n  }, 300);\n};\n\nconst fetchArticles = async () => {\n  loading.value = true;\n  try {\n    const params = {\n      page: pagination.page,\n      size: pagination.pageSize,\n      search: searchQuery.value\n    };\n    const response = await adminApi.getKnowledgeBases(params);\n    articles.value = response.data.results;\n    total.value = response.data.count;\n  } catch (error) {\n    ElMessage.error('获取文章列表失败');\n    articles.value = [];\n    total.value = 0;\n  } finally {\n    loading.value = false;\n  }\n};\n\nconst openArticleModal = async (article = {}) => {\n  await fetchCompanies();\n  currentArticle.value = { ...article };\n\n  if (article.id) {\n    showUpload.value = false; // 编辑模式下，默认不显示上传组件\n  } else {\n    showUpload.value = true; // 新建模式下，直接显示上传组件\n  }\n  \n  if (currentArticle.value.company) {\n    await fetchCategoriesForCompany(currentArticle.value.company);\n  } else {\n    companyCategories.value = [];\n  }\n  isArticleModalOpen.value = true;\n};\n\nconst closeArticleModal = () => {\n  isArticleModalOpen.value = false;\n  currentArticle.value = {};\n  companyCategories.value = [];\n  upload.value?.clearFiles();\n  articleForm.value?.resetFields();\n};\n\nconst saveArticle = async () => {\n  try {\n    const dataToSave = { ...currentArticle.value };\n    if (!dataToSave.id && !dataToSave.original_file) {\n        ElMessage.error('请选择一个文件上传');\n        return;\n    }\n\n    if (dataToSave.id) {\n      await adminApi.updateKnowledgeBase(dataToSave.id, dataToSave);\n    } else {\n      await adminApi.createKnowledgeBase(dataToSave);\n    }\n    ElMessage.success('文件信息保存成功');\n    closeArticleModal();\n    fetchArticles();\n  } catch (error) {\n    const errorMsg = error.response?.data ? JSON.stringify(error.response.data) : '保存文件信息失败';\n    ElMessage.error(errorMsg);\n  }\n};\n\nconst confirmDeleteArticle = (article) => {\n  ElMessageBox.confirm(`确定要删除文件 \"${article.title}\" 吗? 这将一并删除关联的文件和数据。`, '警告', {\n    confirmButtonText: '确定',\n    cancelButtonText: '取消',\n    type: 'warning',\n  }).then(async () => {\n    try {\n      await adminApi.deleteKnowledgeBase(article.id);\n      ElMessage.success('文件删除成功');\n      fetchArticles(); // Refresh list\n    } catch (error) {\n      ElMessage.error('删除文件失败');\n    }\n  });\n};\n\nconst handlePageChange = (newPage) => {\n  pagination.page = newPage;\n  fetchArticles();\n};\n\nconst handleCompanyChange = async (companyId) => {\n  currentArticle.value.category = null;\n  companyCategories.value = [];\n  if (companyId) {\n    await fetchCategoriesForCompany(companyId);\n  }\n};\n\nconst fetchCategoriesForCompany = async (companyId) => {\n  try {\n    const response = await adminApi.getKnowledgeCategories({ all: 'true', company_id: companyId });\n    companyCategories.value = response.data;\n  } catch (error) {\n    ElMessage.error('获取该公司下的分类失败');\n  }\n};\n\nconst handleFileChange = (file) => {\n    currentArticle.value.original_file = file.raw;\n};\n\nconst handleFileRemove = () => {\n    currentArticle.value.original_file = null;\n};\n\nconst openBuildModal = () => {\n    isBuildModalOpen.value = true;\n    fetchBuildStatuses();\n};\n\nconst fetchBuildStatuses = async () => {\n    isBuildStatusLoading.value = true;\n    try {\n        const response = await adminApi.getKnowledgeBuildStatus();\n        buildStatuses.value = response.data;\n    } catch (error) {\n        ElMessage.error('获取构建状态失败');\n    } finally {\n        isBuildStatusLoading.value = false;\n    }\n};\n\nconst handleSelectionChange = (selection) => {\n    selectedCompanyIds.value = selection.map(item => item.company_id);\n};\n\nconst triggerBuildForCompanies = async (companyIds) => {\n    if (companyIds.length === 0) return;\n    try {\n        const response = await adminApi.buildKnowledgeForCompanies(companyIds);\n        ElMessage.success(response.data.message || '构建任务已启动');\n        companyIds.forEach(id => buildingCompanyIds.value.add(id));\n        fetchBuildStatuses();\n        startStatusPolling();\n    } catch (error) {\n        ElMessage.error('启动构建任务失败');\n    }\n};\n\nconst startStatusPolling = () => {\n    if (statusPollInterval) return; // 避免重复启动\n    statusPollInterval = setInterval(async () => {\n        await fetchBuildStatuses();\n        // 检查是否有仍在处理中的构建\n        const stillProcessing = buildStatuses.value.some(s => s.status === 'processing' || s.status === 'pending');\n        if (!stillProcessing) {\n            stopStatusPolling();\n            buildingCompanyIds.value.clear();\n            ElMessage.info('所有构建任务已完成。');\n        }\n    }, 5000); // 每5秒轮询一次\n};\n\nconst stopStatusPolling = () => {\n    if (statusPollInterval) {\n        clearInterval(statusPollInterval);\n        statusPollInterval = null;\n    }\n};\n\nconst getStatusTagType = (status) => {\n    switch (status) {\n        case 'completed': return 'success';\n        case 'processing': return 'primary';\n        case 'pending': return 'warning';\n        case 'failed': return 'danger';\n        default: return 'info';\n    }\n};\n\nconst getStatusText = (status) => {\n    const map = {\n        'completed': '成功',\n        'processing': '构建中',\n        'pending': '等待中',\n        'failed': '失败',\n        'not_built': '未构建'\n    };\n    return map[status] || '未知';\n};\n\nconst isCompanyBuilding = (companyId) => {\n    const status = buildStatuses.value.find(s => s.company_id === companyId)?.status;\n    return status === 'processing' || status === 'pending';\n};\n\nconst isAnyCompanyBuilding = (companyIds) => {\n    // 增加一个检查，确保所选的公司都有文件\n    const hasFiles = companyIds.every(id => {\n        const company = buildStatuses.value.find(s => s.company_id === id);\n        return company && company.file_count > 0;\n    });\n    if (!hasFiles) return true;\n\n    return companyIds.some(id => isCompanyBuilding(id));\n};\n\nconst isCompanySelectable = (row) => {\n    return row.file_count > 0;\n};\n\nonMounted(() => {\n  // initial fetch\n  fetchArticles();\n});\n</script>\n\n<style scoped>\n@import './shared-styles.css';\n\n.file-info {\n    font-size: 14px;\n    color: #606266;\n}\n\n.upload-component {\n    width: 100%;\n}\n\n.category-dialog-content {\n  display: flex;\n  gap: 20px;\n  min-height: 400px;\n}\n\n.category-list-section, .category-form-section {\n  padding: 10px;\n  border-radius: 8px;\n}\n\n.category-list-section {\n  flex: 1;\n  border-right: 1px solid #e0e0e0;\n  padding-right: 20px;\n  display: flex;\n  flex-direction: column;\n}\n\n.category-form-section {\n  flex: 1.2;\n}\n\n.section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n  padding-bottom: 10px;\n  border-bottom: 1px solid #f0f0f0;\n}\n\n.category-items {\n  overflow-y: auto;\n  max-height: 350px;\n}\n\n.category-list-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 10px;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: background-color 0.3s;\n  margin-bottom: 5px;\n}\n\n.category-list-item:hover {\n  background-color: #f5f7fa;\n}\n\n.category-list-item.selected {\n  background-color: #ecf5ff;\n  border: 1px solid #b3d8ff;\n}\n\n.category-info {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.category-color {\n  width: 8px;\n  height: 20px;\n  border-radius: 4px;\n  flex-shrink: 0;\n}\n\n.category-icon {\n  width: 32px;\n  height: 32px;\n  border-radius: 6px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.category-icon .el-icon {\n  color: white;\n}\n\n.build-footer {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n}\n</style>\n\n<style>\n.category-dialog-content .el-form-item {\n  margin-bottom: 22px;\n}\n</style> "],"mappings":"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","ignoreList":[]}]}