{"remainingRequest":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\quill\\modules\\uiNode.js","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\quill\\modules\\uiNode.js","mtime":1751792162347},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\babel.config.js","mtime":1748077811200},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1746431219000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJDOi9Vc2Vycy8xODA4My9EZXNrdG9wL0NDSVQvb2ZmaWNlL3NtYXJ0LW9mZmljZS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmZpbmQuanMiOwppbXBvcnQgeyBQYXJlbnRCbG90IH0gZnJvbSAncGFyY2htZW50JzsKaW1wb3J0IE1vZHVsZSBmcm9tICcuLi9jb3JlL21vZHVsZS5qcyc7CmltcG9ydCBRdWlsbCBmcm9tICcuLi9jb3JlL3F1aWxsLmpzJzsKY29uc3QgaXNNYWMgPSAvTWFjL2kudGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pOwoKLy8gRXhwb3J0IGZvciB0ZXN0aW5nCmV4cG9ydCBjb25zdCBUVExfRk9SX1ZBTElEX1NFTEVDVElPTl9DSEFOR0UgPSAxMDA7CgovLyBBIGxvb3NlIGNoZWNrIHRvIGRldGVybWluZSBpZiB0aGUgc2hvcnRjdXQgY2FuIG1vdmUgdGhlIGNhcmV0IGJlZm9yZSBhIFVJIG5vZGU6Ci8vIDxBTllfUEFSRU5UPltDQVJFVF08ZGl2IGNsYXNzPSJxbC11aSI+PC9kaXY+W0NPTlRFTlRdPC9BTllfUEFSRU5UPgpjb25zdCBjYW5Nb3ZlQ2FyZXRCZWZvcmVVSU5vZGUgPSBldmVudCA9PiB7CiAgaWYgKGV2ZW50LmtleSA9PT0gJ0Fycm93TGVmdCcgfHwgZXZlbnQua2V5ID09PSAnQXJyb3dSaWdodCcgfHwKICAvLyBSVEwgc2NyaXB0cyBvciBtb3ZpbmcgZnJvbSB0aGUgZW5kIG9mIHRoZSBwcmV2aW91cyBsaW5lCiAgZXZlbnQua2V5ID09PSAnQXJyb3dVcCcgfHwgZXZlbnQua2V5ID09PSAnQXJyb3dEb3duJyB8fCBldmVudC5rZXkgPT09ICdIb21lJykgewogICAgcmV0dXJuIHRydWU7CiAgfQogIGlmIChpc01hYyAmJiBldmVudC5rZXkgPT09ICdhJyAmJiBldmVudC5jdHJsS2V5ID09PSB0cnVlKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9CiAgcmV0dXJuIGZhbHNlOwp9OwpjbGFzcyBVSU5vZGUgZXh0ZW5kcyBNb2R1bGUgewogIGNvbnN0cnVjdG9yKHF1aWxsLCBvcHRpb25zKSB7CiAgICBzdXBlcihxdWlsbCwgb3B0aW9ucyk7CiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImlzTGlzdGVuaW5nIiwgZmFsc2UpOwogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJzZWxlY3Rpb25DaGFuZ2VEZWFkbGluZSIsIDApOwogICAgdGhpcy5oYW5kbGVBcnJvd0tleXMoKTsKICAgIHRoaXMuaGFuZGxlTmF2aWdhdGlvblNob3J0Y3V0cygpOwogIH0KICBoYW5kbGVBcnJvd0tleXMoKSB7CiAgICB0aGlzLnF1aWxsLmtleWJvYXJkLmFkZEJpbmRpbmcoewogICAgICBrZXk6IFsnQXJyb3dMZWZ0JywgJ0Fycm93UmlnaHQnXSwKICAgICAgb2Zmc2V0OiAwLAogICAgICBzaGlmdEtleTogbnVsbCwKICAgICAgaGFuZGxlcihyYW5nZSwgX3JlZikgewogICAgICAgIGxldCB7CiAgICAgICAgICBsaW5lLAogICAgICAgICAgZXZlbnQKICAgICAgICB9ID0gX3JlZjsKICAgICAgICBpZiAoIShsaW5lIGluc3RhbmNlb2YgUGFyZW50QmxvdCkgfHwgIWxpbmUudWlOb2RlKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgY29uc3QgaXNSVEwgPSBnZXRDb21wdXRlZFN0eWxlKGxpbmUuZG9tTm9kZSlbJ2RpcmVjdGlvbiddID09PSAncnRsJzsKICAgICAgICBpZiAoaXNSVEwgJiYgZXZlbnQua2V5ICE9PSAnQXJyb3dSaWdodCcgfHwgIWlzUlRMICYmIGV2ZW50LmtleSAhPT0gJ0Fycm93TGVmdCcpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICB0aGlzLnF1aWxsLnNldFNlbGVjdGlvbihyYW5nZS5pbmRleCAtIDEsIHJhbmdlLmxlbmd0aCArIChldmVudC5zaGlmdEtleSA/IDEgOiAwKSwgUXVpbGwuc291cmNlcy5VU0VSKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0pOwogIH0KICBoYW5kbGVOYXZpZ2F0aW9uU2hvcnRjdXRzKCkgewogICAgdGhpcy5xdWlsbC5yb290LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBldmVudCA9PiB7CiAgICAgIGlmICghZXZlbnQuZGVmYXVsdFByZXZlbnRlZCAmJiBjYW5Nb3ZlQ2FyZXRCZWZvcmVVSU5vZGUoZXZlbnQpKSB7CiAgICAgICAgdGhpcy5lbnN1cmVMaXN0ZW5pbmdUb1NlbGVjdGlvbkNoYW5nZSgpOwogICAgICB9CiAgICB9KTsKICB9CgogIC8qKgogICAqIFdlIG9ubHkgbGlzdGVuIHRvIHRoZSBgc2VsZWN0aW9uY2hhbmdlYCBldmVudCB3aGVuCiAgICogdGhlcmUgaXMgYW4gaW50ZW50aW9uIG9mIG1vdmluZyB0aGUgY2FyZXQgdG8gdGhlIGJlZ2lubmluZyB1c2luZyBzaG9ydGN1dHMuCiAgICogVGhpcyBpcyBwcmltYXJpbHkgaW1wbGVtZW50ZWQgdG8gcHJldmVudCBpbmZpbml0ZSBsb29wcywgYXMgd2UgYXJlIGNoYW5naW5nCiAgICogdGhlIHNlbGVjdGlvbiB3aXRoaW4gdGhlIGhhbmRsZXIgb2YgYSBgc2VsZWN0aW9uY2hhbmdlYCBldmVudC4KICAgKi8KICBlbnN1cmVMaXN0ZW5pbmdUb1NlbGVjdGlvbkNoYW5nZSgpIHsKICAgIHRoaXMuc2VsZWN0aW9uQ2hhbmdlRGVhZGxpbmUgPSBEYXRlLm5vdygpICsgVFRMX0ZPUl9WQUxJRF9TRUxFQ1RJT05fQ0hBTkdFOwogICAgaWYgKHRoaXMuaXNMaXN0ZW5pbmcpIHJldHVybjsKICAgIHRoaXMuaXNMaXN0ZW5pbmcgPSB0cnVlOwogICAgY29uc3QgbGlzdGVuZXIgPSAoKSA9PiB7CiAgICAgIHRoaXMuaXNMaXN0ZW5pbmcgPSBmYWxzZTsKICAgICAgaWYgKERhdGUubm93KCkgPD0gdGhpcy5zZWxlY3Rpb25DaGFuZ2VEZWFkbGluZSkgewogICAgICAgIHRoaXMuaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKCk7CiAgICAgIH0KICAgIH07CiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzZWxlY3Rpb25jaGFuZ2UnLCBsaXN0ZW5lciwgewogICAgICBvbmNlOiB0cnVlCiAgICB9KTsKICB9CiAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKCkgewogICAgY29uc3Qgc2VsZWN0aW9uID0gZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKCk7CiAgICBpZiAoIXNlbGVjdGlvbikgcmV0dXJuOwogICAgY29uc3QgcmFuZ2UgPSBzZWxlY3Rpb24uZ2V0UmFuZ2VBdCgwKTsKICAgIGlmIChyYW5nZS5jb2xsYXBzZWQgIT09IHRydWUgfHwgcmFuZ2Uuc3RhcnRPZmZzZXQgIT09IDApIHJldHVybjsKICAgIGNvbnN0IGxpbmUgPSB0aGlzLnF1aWxsLnNjcm9sbC5maW5kKHJhbmdlLnN0YXJ0Q29udGFpbmVyKTsKICAgIGlmICghKGxpbmUgaW5zdGFuY2VvZiBQYXJlbnRCbG90KSB8fCAhbGluZS51aU5vZGUpIHJldHVybjsKICAgIGNvbnN0IG5ld1JhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTsKICAgIG5ld1JhbmdlLnNldFN0YXJ0QWZ0ZXIobGluZS51aU5vZGUpOwogICAgbmV3UmFuZ2Uuc2V0RW5kQWZ0ZXIobGluZS51aU5vZGUpOwogICAgc2VsZWN0aW9uLnJlbW92ZUFsbFJhbmdlcygpOwogICAgc2VsZWN0aW9uLmFkZFJhbmdlKG5ld1JhbmdlKTsKICB9Cn0KZXhwb3J0IGRlZmF1bHQgVUlOb2RlOw=="},{"version":3,"names":["ParentBlot","Module","Quill","isMac","test","navigator","platform","TTL_FOR_VALID_SELECTION_CHANGE","canMoveCaretBeforeUINode","event","key","ctrlKey","UINode","constructor","quill","options","_defineProperty","handleArrowKeys","handleNavigationShortcuts","keyboard","addBinding","offset","shiftKey","handler","range","_ref","line","uiNode","isRTL","getComputedStyle","domNode","setSelection","index","length","sources","USER","root","addEventListener","defaultPrevented","ensureListeningToSelectionChange","selectionChangeDeadline","Date","now","isListening","listener","handleSelectionChange","document","once","selection","getSelection","getRangeAt","collapsed","startOffset","scroll","find","startContainer","newRange","createRange","setStartAfter","setEndAfter","removeAllRanges","addRange"],"sources":["../../src/modules/uiNode.ts"],"sourcesContent":["import { ParentBlot } from 'parchment';\nimport Module from '../core/module.js';\nimport Quill from '../core/quill.js';\n\nconst isMac = /Mac/i.test(navigator.platform);\n\n// Export for testing\nexport const TTL_FOR_VALID_SELECTION_CHANGE = 100;\n\n// A loose check to determine if the shortcut can move the caret before a UI node:\n// <ANY_PARENT>[CARET]<div class=\"ql-ui\"></div>[CONTENT]</ANY_PARENT>\nconst canMoveCaretBeforeUINode = (event: KeyboardEvent) => {\n  if (\n    event.key === 'ArrowLeft' ||\n    event.key === 'ArrowRight' || // RTL scripts or moving from the end of the previous line\n    event.key === 'ArrowUp' ||\n    event.key === 'ArrowDown' ||\n    event.key === 'Home'\n  ) {\n    return true;\n  }\n\n  if (isMac && event.key === 'a' && event.ctrlKey === true) {\n    return true;\n  }\n\n  return false;\n};\n\nclass UINode extends Module {\n  isListening = false;\n  selectionChangeDeadline = 0;\n\n  constructor(quill: Quill, options: Record<string, never>) {\n    super(quill, options);\n\n    this.handleArrowKeys();\n    this.handleNavigationShortcuts();\n  }\n\n  private handleArrowKeys() {\n    this.quill.keyboard.addBinding({\n      key: ['ArrowLeft', 'ArrowRight'],\n      offset: 0,\n      shiftKey: null,\n      handler(range, { line, event }) {\n        if (!(line instanceof ParentBlot) || !line.uiNode) {\n          return true;\n        }\n\n        const isRTL = getComputedStyle(line.domNode)['direction'] === 'rtl';\n        if (\n          (isRTL && event.key !== 'ArrowRight') ||\n          (!isRTL && event.key !== 'ArrowLeft')\n        ) {\n          return true;\n        }\n\n        this.quill.setSelection(\n          range.index - 1,\n          range.length + (event.shiftKey ? 1 : 0),\n          Quill.sources.USER,\n        );\n        return false;\n      },\n    });\n  }\n\n  private handleNavigationShortcuts() {\n    this.quill.root.addEventListener('keydown', (event) => {\n      if (!event.defaultPrevented && canMoveCaretBeforeUINode(event)) {\n        this.ensureListeningToSelectionChange();\n      }\n    });\n  }\n\n  /**\n   * We only listen to the `selectionchange` event when\n   * there is an intention of moving the caret to the beginning using shortcuts.\n   * This is primarily implemented to prevent infinite loops, as we are changing\n   * the selection within the handler of a `selectionchange` event.\n   */\n  private ensureListeningToSelectionChange() {\n    this.selectionChangeDeadline = Date.now() + TTL_FOR_VALID_SELECTION_CHANGE;\n\n    if (this.isListening) return;\n    this.isListening = true;\n\n    const listener = () => {\n      this.isListening = false;\n\n      if (Date.now() <= this.selectionChangeDeadline) {\n        this.handleSelectionChange();\n      }\n    };\n\n    document.addEventListener('selectionchange', listener, {\n      once: true,\n    });\n  }\n\n  private handleSelectionChange() {\n    const selection = document.getSelection();\n    if (!selection) return;\n    const range = selection.getRangeAt(0);\n    if (range.collapsed !== true || range.startOffset !== 0) return;\n\n    const line = this.quill.scroll.find(range.startContainer);\n    if (!(line instanceof ParentBlot) || !line.uiNode) return;\n\n    const newRange = document.createRange();\n    newRange.setStartAfter(line.uiNode);\n    newRange.setEndAfter(line.uiNode);\n    selection.removeAllRanges();\n    selection.addRange(newRange);\n  }\n}\n\nexport default UINode;\n"],"mappings":"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","ignoreList":[]}]}