{"remainingRequest":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\contract\\Index.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\contract\\Index.vue","mtime":1747805708008},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\babel.config.js","mtime":1748076840894},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1746431218000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5tYXAuanMiOwppbXBvcnQgeyByZWYsIHJlYWN0aXZlLCBjb21wdXRlZCwgb25Nb3VudGVkLCB3YXRjaCB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IFBsdXMsIFNlYXJjaCwgSW5mb0ZpbGxlZCB9IGZyb20gJ0BlbGVtZW50LXBsdXMvaWNvbnMtdnVlJzsKaW1wb3J0IHsgRWxNZXNzYWdlLCBFbExvYWRpbmcgfSBmcm9tICdlbGVtZW50LXBsdXMnOwppbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IHsgZ2V0Q29udHJhY3RMaXN0LCBjcmVhdGVDb250cmFjdCBhcyBjcmVhdGVDb250cmFjdEFQSSwgZ2V0UmVjb21tZW5kZWRUZW1wbGF0ZXMsIGNyZWF0ZUNvbnRyYWN0RnJvbVRlbXBsYXRlIH0gZnJvbSAnQC9hcGkvY29udHJhY3QnOwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZSc7CgovLyDmoLzlvI/ljJbml6XmnJ/kuLpZWVlZLU1NLURECmZ1bmN0aW9uIGZvcm1hdERhdGUoZGF0ZSkgewogIGlmICghZGF0ZSkgcmV0dXJuIG51bGw7CiAgaWYgKHR5cGVvZiBkYXRlID09PSAnc3RyaW5nJykgcmV0dXJuIGRhdGU7CiAgcmV0dXJuIGRhdGUudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdOwp9CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQ29udHJhY3QnLAogIHNldHVwKCkgewogICAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7CiAgICBjb25zdCBzZWFyY2hRdWVyeSA9IHJlZignJyk7CiAgICBjb25zdCBmaWx0ZXJTdGF0dXMgPSByZWYoJycpOwogICAgY29uc3Qgc29ydEJ5ID0gcmVmKCdkZWZhdWx0Jyk7CiAgICBjb25zdCBzb3J0T3JkZXIgPSByZWYoJ2Rlc2MnKTsKICAgIGNvbnN0IHNlbGVjdGVkQ29udHJhY3QgPSByZWYoMCk7CiAgICBjb25zdCBzaG93TmV3Q29udHJhY3REaWFsb2cgPSByZWYoZmFsc2UpOwogICAgY29uc3QgY3JlYXRpb25Nb2RlID0gcmVmKCdtYW51YWwnKTsKICAgIGNvbnN0IHNlbGVjdGVkVGVtcGxhdGUgPSByZWYobnVsbCk7CiAgICBjb25zdCBpc0xvYWRpbmcgPSByZWYoZmFsc2UpOwoKICAgIC8vIOWIhumhteebuOWFs+eKtuaAgQogICAgY29uc3QgY3VycmVudFBhZ2UgPSByZWYoMSk7CiAgICBjb25zdCBwYWdlU2l6ZSA9IHJlZigxMCk7CiAgICBjb25zdCB0b3RhbEl0ZW1zID0gcmVmKDApOwoKICAgIC8vIOaWsOWQiOWQjOihqOWNlQogICAgY29uc3QgbmV3Q29udHJhY3QgPSByZWFjdGl2ZSh7CiAgICAgIHRpdGxlOiAnJywKICAgICAgdHlwZTogJycsCiAgICAgIGNvbXBhbnk6ICcnLAogICAgICBhbW91bnQ6ICcnLAogICAgICBzaWduRGF0ZTogJycsCiAgICAgIHN0YXJ0RGF0ZTogJycsCiAgICAgIGV4cGlyZURhdGU6ICcnLAogICAgICByZW1hcms6ICcnCiAgICB9KTsKCiAgICAvLyDmqKHmnb/ooajljZUKICAgIGNvbnN0IHRlbXBsYXRlRm9ybSA9IHJlYWN0aXZlKHsKICAgICAgY29udHJhY3RUeXBlOiAnJywKICAgICAgaW5kdXN0cnk6ICcnLAogICAgICBzY2VuZTogJycsCiAgICAgIHRpdGxlOiAnJywKICAgICAgY29tcGFueTogJycsCiAgICAgIGFtb3VudDogJycsCiAgICAgIHJlbWFyazogJycKICAgIH0pOwoKICAgIC8vIEFJ6KGo5Y2VCiAgICBjb25zdCBhaUZvcm0gPSByZWFjdGl2ZSh7CiAgICAgIGNvcmVFbGVtZW50czogJycKICAgIH0pOwoKICAgIC8vIOWPr+eUqOaooeadv+WIl+ihqAogICAgY29uc3QgYXZhaWxhYmxlVGVtcGxhdGVzID0gcmVmKFtdKTsKICAgIGNvbnN0IGlzTG9hZGluZ1RlbXBsYXRlcyA9IHJlZihmYWxzZSk7CgogICAgLy8g5ZCI5ZCM5YiX6KGoIC0g5LuOQVBJ6I635Y+WCiAgICBjb25zdCBjb250cmFjdHMgPSByZWYoW10pOwoKICAgIC8vIOebkeWQrOaooeadv+etm+mAieadoeS7tuWPmOWMlu+8jOWKoOi9veaOqOiNkOaooeadvwogICAgd2F0Y2goKCkgPT4gW3RlbXBsYXRlRm9ybS5jb250cmFjdFR5cGUsIHRlbXBsYXRlRm9ybS5pbmR1c3RyeSwgdGVtcGxhdGVGb3JtLnNjZW5lXSwgYXN5bmMgKCkgPT4gewogICAgICBhd2FpdCBsb2FkUmVjb21tZW5kZWRUZW1wbGF0ZXMoKTsKICAgIH0pOwoKICAgIC8vIOWKoOi9veaOqOiNkOeahOWQiOWQjOaooeadvwogICAgY29uc3QgbG9hZFJlY29tbWVuZGVkVGVtcGxhdGVzID0gYXN5bmMgKCkgPT4gewogICAgICBpZiAoIXRlbXBsYXRlRm9ybS5jb250cmFjdFR5cGUgJiYgIXRlbXBsYXRlRm9ybS5pbmR1c3RyeSAmJiAhdGVtcGxhdGVGb3JtLnNjZW5lKSB7CiAgICAgICAgYXZhaWxhYmxlVGVtcGxhdGVzLnZhbHVlID0gW107CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgaXNMb2FkaW5nVGVtcGxhdGVzLnZhbHVlID0gdHJ1ZTsKICAgICAgICBzZWxlY3RlZFRlbXBsYXRlLnZhbHVlID0gbnVsbDsKICAgICAgICBjb25zdCBwYXJhbXMgPSB7CiAgICAgICAgICBjb250cmFjdF90eXBlOiB0ZW1wbGF0ZUZvcm0uY29udHJhY3RUeXBlLAogICAgICAgICAgaW5kdXN0cnk6IHRlbXBsYXRlRm9ybS5pbmR1c3RyeSwKICAgICAgICAgIHNjZW5lOiB0ZW1wbGF0ZUZvcm0uc2NlbmUKICAgICAgICB9OwogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ2V0UmVjb21tZW5kZWRUZW1wbGF0ZXMocGFyYW1zKTsKICAgICAgICBjb25zb2xlLmxvZygn6I635Y+W5Yiw55qE5qih5p2/5pWw5o2uOicsIHJlc3BvbnNlKTsgLy8g5re75Yqg6LCD6K+V5L+h5oGvCiAgICAgICAgYXZhaWxhYmxlVGVtcGxhdGVzLnZhbHVlID0gcmVzcG9uc2U7CgogICAgICAgIC8vIOWmguaenOWPquacieS4gOS4quaooeadv++8jOiHquWKqOmAieaLqQogICAgICAgIGlmIChhdmFpbGFibGVUZW1wbGF0ZXMudmFsdWUubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICBzZWxlY3RlZFRlbXBsYXRlLnZhbHVlID0gMDsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign5Yqg6L295o6o6I2Q5qih5p2/5aSx6LSlOicsIGVycm9yKTsKICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+iOt+WPluaOqOiNkOaooeadv+Wksei0pe+8jOivt+eojeWQjumHjeivlScpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIGlzTG9hZGluZ1RlbXBsYXRlcy52YWx1ZSA9IGZhbHNlOwogICAgICB9CiAgICB9OwoKICAgIC8vIOW9k+mAieaLqeS4gOS4quaooeadv+aXtgogICAgY29uc3QgaGFuZGxlVGVtcGxhdGVTZWxlY3QgPSBpbmRleCA9PiB7CiAgICAgIHNlbGVjdGVkVGVtcGxhdGUudmFsdWUgPSBpbmRleDsKICAgICAgY29uc3QgdGVtcGxhdGUgPSBhdmFpbGFibGVUZW1wbGF0ZXMudmFsdWVbaW5kZXhdOwoKICAgICAgLy8g5qC55o2u5qih5p2/5aGr5YWF6KGo5Y2VCiAgICAgIGlmICh0ZW1wbGF0ZSkgewogICAgICAgIC8vIOiHquWKqOeUn+aIkOagh+mimOW7uuiurgogICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoJ3poLUNOJyk7CiAgICAgICAgdGVtcGxhdGVGb3JtLnRpdGxlID0gYCR7dGVtcGxhdGUuY29udHJhY3RfdHlwZX0oJHtjdXJyZW50RGF0ZX0pYDsKICAgICAgfQogICAgfTsKCiAgICAvLyDliqDovb3lkIjlkIzliJfooajmlbDmja4KICAgIGNvbnN0IGxvYWRDb250cmFjdHMgPSBhc3luYyAoKSA9PiB7CiAgICAgIHRyeSB7CiAgICAgICAgaXNMb2FkaW5nLnZhbHVlID0gdHJ1ZTsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldENvbnRyYWN0TGlzdCh7CiAgICAgICAgICBzZWFyY2g6IHNlYXJjaFF1ZXJ5LnZhbHVlLAogICAgICAgICAgc3RhdHVzOiBmaWx0ZXJTdGF0dXMudmFsdWUsCiAgICAgICAgICBvcmRlcmluZzogc29ydE9yZGVyLnZhbHVlID09PSAnZGVzYycgPyBgLSR7c29ydEJ5LnZhbHVlfWAgOiBzb3J0QnkudmFsdWUsCiAgICAgICAgICBwYWdlOiBjdXJyZW50UGFnZS52YWx1ZSwKICAgICAgICAgIHBhZ2Vfc2l6ZTogcGFnZVNpemUudmFsdWUKICAgICAgICB9KTsKCiAgICAgICAgLy8g5qC85byP5YyW5ZCO56uv6L+U5Zue55qE5pWw5o2uCiAgICAgICAgY29uc3QgZm9ybWF0dGVkQ29udHJhY3RzID0gcmVzcG9uc2UucmVzdWx0cy5tYXAoY29udHJhY3QgPT4gKHsKICAgICAgICAgIGlkOiBjb250cmFjdC5pZCwKICAgICAgICAgIHRpdGxlOiBjb250cmFjdC50aXRsZSwKICAgICAgICAgIG51bWJlcjogY29udHJhY3QubnVtYmVyLAogICAgICAgICAgc3RhdHVzOiBjb250cmFjdC5zdGF0dXMsCiAgICAgICAgICBleHBpcmVEYXRlOiBjb250cmFjdC5leHBpcmVfZGF0ZSB8fCAn5pyq6K6+572uJywKICAgICAgICAgIGNvbXBhbnk6IGNvbnRyYWN0LmNvbXBhbnksCiAgICAgICAgICBjcmVhdGVkQXQ6IGNvbnRyYWN0LmNyZWF0ZWRfYXQsCiAgICAgICAgICBhbW91bnQ6IGDvv6Uke2NvbnRyYWN0LmFtb3VudH1gCiAgICAgICAgfSkpOwogICAgICAgIGNvbnRyYWN0cy52YWx1ZSA9IGZvcm1hdHRlZENvbnRyYWN0czsKICAgICAgICB0b3RhbEl0ZW1zLnZhbHVlID0gcmVzcG9uc2UuY291bnQ7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign5Yqg6L295ZCI5ZCM5YiX6KGo5aSx6LSlOicsIGVycm9yKTsKICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+WKoOi9veWQiOWQjOWIl+ihqOWksei0pe+8jOivt+eojeWQjumHjeivlScpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIGlzTG9hZGluZy52YWx1ZSA9IGZhbHNlOwogICAgICB9CiAgICB9OwoKICAgIC8vIOagueaNruetm+mAieadoeS7tui/h+a7pOWQiOWQjAogICAgY29uc3QgZmlsdGVyZWRDb250cmFjdHMgPSBjb21wdXRlZCgoKSA9PiB7CiAgICAgIC8vIOWboOS4uuaIkeS7rOeOsOWcqOWcqEFQSeWxgumdouWBmuS6huetm+mAie+8jOi/memHjOWPquaYr+Wxleekuui/lOWbnueahOaVsOaNrgogICAgICByZXR1cm4gY29udHJhY3RzLnZhbHVlOwogICAgfSk7CgogICAgLy8g6I635Y+W54q25oCB5paH5pysCiAgICBjb25zdCBnZXRTdGF0dXNUZXh0ID0gc3RhdHVzID0+IHsKICAgICAgY29uc3Qgc3RhdHVzTWFwID0gewogICAgICAgICdkcmFmdCc6ICfojYnnqL8nLAogICAgICAgICdwZW5kaW5nJzogJ+W+heWuoeaJuScsCiAgICAgICAgJ3NpZ25lZCc6ICflt7Lnrb7nvbInLAogICAgICAgICdleHBpcmVkJzogJ+W3sui/h+acnycsCiAgICAgICAgJ3JlamVjdGVkJzogJ+W3sumps+WbnicKICAgICAgfTsKICAgICAgcmV0dXJuIHN0YXR1c01hcFtzdGF0dXNdIHx8IHN0YXR1czsKICAgIH07CgogICAgLy8g5Yib5bu65ZCI5ZCMCiAgICBjb25zdCBvcGVuQ29udHJhY3REaWFsb2cgPSAoKSA9PiB7CiAgICAgIHJlc2V0Rm9ybXMoKTsKICAgICAgc2hvd05ld0NvbnRyYWN0RGlhbG9nLnZhbHVlID0gdHJ1ZTsKICAgIH07CgogICAgLy8g6YeN572u6KGo5Y2VCiAgICBjb25zdCByZXNldEZvcm1zID0gKCkgPT4gewogICAgICBPYmplY3Qua2V5cyhuZXdDb250cmFjdCkuZm9yRWFjaChrZXkgPT4gewogICAgICAgIG5ld0NvbnRyYWN0W2tleV0gPSAnJzsKICAgICAgfSk7CiAgICAgIE9iamVjdC5rZXlzKHRlbXBsYXRlRm9ybSkuZm9yRWFjaChrZXkgPT4gewogICAgICAgIHRlbXBsYXRlRm9ybVtrZXldID0gJyc7CiAgICAgIH0pOwogICAgICBhaUZvcm0uY29yZUVsZW1lbnRzID0gJyc7CiAgICAgIGNyZWF0aW9uTW9kZS52YWx1ZSA9ICdtYW51YWwnOwogICAgICBzZWxlY3RlZFRlbXBsYXRlLnZhbHVlID0gbnVsbDsKICAgIH07CgogICAgLy8g6I635Y+W5o+Q5Lqk5oyJ6ZKu5paH5pysCiAgICBjb25zdCBnZXRTdWJtaXRCdXR0b25UZXh0ID0gKCkgPT4gewogICAgICBzd2l0Y2ggKGNyZWF0aW9uTW9kZS52YWx1ZSkgewogICAgICAgIGNhc2UgJ3RlbXBsYXRlJzoKICAgICAgICAgIHJldHVybiAn5L2/55So5qih5p2/5Yib5bu6JzsKICAgICAgICBjYXNlICdhaSc6CiAgICAgICAgICByZXR1cm4gJ0FJIOeUn+aIkOWQiOWQjCc7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJldHVybiAn5o+Q5Lqk5a6h5om5JzsKICAgICAgfQogICAgfTsKCiAgICAvLyDkv53lrZjkuLrojYnnqL8KICAgIGNvbnN0IHNhdmVBc0RyYWZ0ID0gYXN5bmMgKCkgPT4gewogICAgICB0cnkgewogICAgICAgIHZhciBfc3RvcmUkZ2V0dGVycyR1c2VyOwogICAgICAgIGNvbnN0IGxvYWRpbmcgPSBFbExvYWRpbmcuc2VydmljZSh7CiAgICAgICAgICBsb2NrOiB0cnVlLAogICAgICAgICAgdGV4dDogJ+ato+WcqOS/neWtmC4uLicsCiAgICAgICAgICBiYWNrZ3JvdW5kOiAncmdiYSgwLCAwLCAwLCAwLjcpJwogICAgICAgIH0pOwoKICAgICAgICAvLyDku45WdWV45Lit6I635Y+W5b2T5YmN55So5oi3SUQKICAgICAgICBjb25zdCB1c2VySWQgPSAoX3N0b3JlJGdldHRlcnMkdXNlciA9IHN0b3JlLmdldHRlcnMudXNlcikgPT09IG51bGwgfHwgX3N0b3JlJGdldHRlcnMkdXNlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3N0b3JlJGdldHRlcnMkdXNlci5pZDsKICAgICAgICBpZiAoIXVzZXJJZCkgewogICAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfnlKjmiLfmnKrnmbvlvZXmiJbml6Dms5Xojrflj5bnlKjmiLdJRCcpOwogICAgICAgICAgbG9hZGluZy5jbG9zZSgpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgLy8g5qC55o2u5LiN5ZCM55qE5Yib5bu65qih5byP77yM5p6E5bu65ZCI5ZCM5pWw5o2uCiAgICAgICAgbGV0IGNvbnRyYWN0RGF0YSA9IHt9OwogICAgICAgIGlmIChjcmVhdGlvbk1vZGUudmFsdWUgPT09ICdtYW51YWwnKSB7CiAgICAgICAgICAvLyDpqozor4Hlv4XloavlrZfmrrUKICAgICAgICAgIGlmICghbmV3Q29udHJhY3QudGl0bGUgfHwgIW5ld0NvbnRyYWN0LnR5cGUgfHwgIW5ld0NvbnRyYWN0LmNvbXBhbnkpIHsKICAgICAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfor7floavlhpnlv4XloavlrZfmrrXvvJrlkIjlkIzlkI3np7DjgIHlkIjlkIznsbvlnovlkoznrb7nuqblr7nmlrknKTsKICAgICAgICAgICAgbG9hZGluZy5jbG9zZSgpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBjb250cmFjdERhdGEgPSB7CiAgICAgICAgICAgIHRpdGxlOiBuZXdDb250cmFjdC50aXRsZSwKICAgICAgICAgICAgdHlwZTogbmV3Q29udHJhY3QudHlwZSwKICAgICAgICAgICAgY29tcGFueTogbmV3Q29udHJhY3QuY29tcGFueSwKICAgICAgICAgICAgYW1vdW50OiBuZXdDb250cmFjdC5hbW91bnQgPyBOdW1iZXIobmV3Q29udHJhY3QuYW1vdW50LnJlcGxhY2UoL1teXGQuXS9nLCAnJykpIDogMCwKICAgICAgICAgICAgc2lnbl9kYXRlOiBmb3JtYXREYXRlKG5ld0NvbnRyYWN0LnNpZ25EYXRlKSwKICAgICAgICAgICAgc3RhcnRfZGF0ZTogZm9ybWF0RGF0ZShuZXdDb250cmFjdC5zdGFydERhdGUpLAogICAgICAgICAgICBleHBpcmVfZGF0ZTogZm9ybWF0RGF0ZShuZXdDb250cmFjdC5leHBpcmVEYXRlKSwKICAgICAgICAgICAgcmVtYXJrOiBuZXdDb250cmFjdC5yZW1hcmsgfHwgJycsCiAgICAgICAgICAgIHN0YXR1czogJ2RyYWZ0JwogICAgICAgICAgfTsKICAgICAgICB9IGVsc2UgaWYgKGNyZWF0aW9uTW9kZS52YWx1ZSA9PT0gJ3RlbXBsYXRlJykgewogICAgICAgICAgLy8g6aqM6K+B5b+F5aGr5a2X5q61CiAgICAgICAgICBpZiAoIXRlbXBsYXRlRm9ybS50aXRsZSB8fCAhdGVtcGxhdGVGb3JtLmNvbnRyYWN0VHlwZSB8fCAhdGVtcGxhdGVGb3JtLmNvbXBhbnkpIHsKICAgICAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfor7floavlhpnlv4XloavlrZfmrrXvvJrlkIjlkIzlkI3np7DjgIHlkIjlkIznsbvlnovlkoznrb7nuqblr7nmlrknKTsKICAgICAgICAgICAgbG9hZGluZy5jbG9zZSgpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBjb250cmFjdERhdGEgPSB7CiAgICAgICAgICAgIHRpdGxlOiB0ZW1wbGF0ZUZvcm0udGl0bGUsCiAgICAgICAgICAgIHR5cGU6IHRlbXBsYXRlRm9ybS5jb250cmFjdFR5cGUsCiAgICAgICAgICAgIGNvbXBhbnk6IHRlbXBsYXRlRm9ybS5jb21wYW55LAogICAgICAgICAgICBhbW91bnQ6IDAsCiAgICAgICAgICAgIC8vIOm7mOiupOWAvAogICAgICAgICAgICByZW1hcms6IHRlbXBsYXRlRm9ybS5yZW1hcmsgfHwgJycsCiAgICAgICAgICAgIHN0YXR1czogJ2RyYWZ0JwogICAgICAgICAgfTsKICAgICAgICB9IGVsc2UgaWYgKGNyZWF0aW9uTW9kZS52YWx1ZSA9PT0gJ2FpJykgewogICAgICAgICAgLy8g6aqM6K+B5b+F5aGr5a2X5q61CiAgICAgICAgICBpZiAoIWFpRm9ybS5jb3JlRWxlbWVudHMpIHsKICAgICAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfor7floavlhpnlkIjlkIzpnIDmsYLmj4/ov7AnKTsKICAgICAgICAgICAgbG9hZGluZy5jbG9zZSgpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBjb250cmFjdERhdGEgPSB7CiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBhaUZvcm0uY29yZUVsZW1lbnRzLAogICAgICAgICAgICB1c2VfYWlfYWdlbnQ6IHRydWUsCiAgICAgICAgICAgIHN0YXR1czogJ2RyYWZ0JwogICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIC8vIOiwg+eUqEFQSeWIm+W7uuWQiOWQjAogICAgICAgIGNvbnNvbGUubG9nKCfmj5DkuqTlkIjlkIzmlbDmja46JywgSlNPTi5zdHJpbmdpZnkoY29udHJhY3REYXRhKSk7CiAgICAgICAgYXdhaXQgY3JlYXRlQ29udHJhY3RBUEkoY29udHJhY3REYXRhKTsKICAgICAgICBFbE1lc3NhZ2Uuc3VjY2Vzcygn5ZCI5ZCM5bey5L+d5a2Y5Li66I2J56i/Jyk7CiAgICAgICAgc2hvd05ld0NvbnRyYWN0RGlhbG9nLnZhbHVlID0gZmFsc2U7CgogICAgICAgIC8vIOmHjeaWsOWKoOi9veWQiOWQjOWIl+ihqAogICAgICAgIGF3YWl0IGxvYWRDb250cmFjdHMoKTsKICAgICAgICBsb2FkaW5nLmNsb3NlKCk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign5L+d5a2Y6I2J56i/5aSx6LSlOicsIGVycm9yKTsKICAgICAgICBsZXQgZXJyb3JNc2cgPSAn5L+d5a2Y6I2J56i/5aSx6LSl77yM6K+35qOA5p+l6L6T5YWl5YaF5a65JzsKCiAgICAgICAgLy8g5bCd6K+V5o+Q5Y+W5pu06K+m57uG55qE6ZSZ6K+v5L+h5oGvCiAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlICYmIGVycm9yLnJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgIGlmICh0eXBlb2YgZXJyb3IucmVzcG9uc2UuZGF0YSA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgZXJyb3JNc2cgPSBlcnJvci5yZXNwb25zZS5kYXRhOwogICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZXJyb3IucmVzcG9uc2UuZGF0YSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBjb25zdCBlcnJvckRldGFpbHMgPSBPYmplY3QuZW50cmllcyhlcnJvci5yZXNwb25zZS5kYXRhKS5tYXAoKFtrZXksIHZhbHVlXSkgPT4gYCR7a2V5fTogJHtBcnJheS5pc0FycmF5KHZhbHVlKSA/IHZhbHVlLmpvaW4oJywgJykgOiB2YWx1ZX1gKS5qb2luKCc7ICcpOwogICAgICAgICAgICAgIGVycm9yTXNnID0gYOS/neWtmOWksei0pTogJHtlcnJvckRldGFpbHN9YDsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+ino+aekOmUmeivr+ivpuaDheWksei0pTonLCBlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoZXJyb3JNc2cpOwogICAgICB9CiAgICB9OwoKICAgIC8vIOaPkOS6pOWQiOWQjAogICAgY29uc3Qgc3VibWl0Q29udHJhY3QgPSBhc3luYyAoKSA9PiB7CiAgICAgIC8vIOmqjOivgeW/heWhq+Wtl+autQogICAgICBpZiAoY3JlYXRpb25Nb2RlLnZhbHVlID09PSAndGVtcGxhdGUnICYmIHNlbGVjdGVkVGVtcGxhdGUudmFsdWUgPT09IG51bGwpIHsKICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+ivt+mAieaLqeS4gOS4quaooeadvycpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgLy8g5ZCv5Yqo5YWo5bGP5Yqg6L29CiAgICAgIGNvbnN0IGxvYWRpbmcgPSBFbExvYWRpbmcuc2VydmljZSh7CiAgICAgICAgbG9jazogdHJ1ZSwKICAgICAgICB0ZXh0OiAn5o+Q5Lqk5LitLi4uJywKICAgICAgICBiYWNrZ3JvdW5kOiAncmdiYSgwLCAwLCAwLCAwLjcpJwogICAgICB9KTsKICAgICAgdHJ5IHsKICAgICAgICBsZXQgY29udHJhY3REYXRhID0ge307CiAgICAgICAgbGV0IHJlc3BvbnNlID0gbnVsbDsKCiAgICAgICAgLy8g5qC55o2u5LiN5ZCM55qE5Yib5bu65qih5byP5aSE55CG5pWw5o2uCiAgICAgICAgaWYgKGNyZWF0aW9uTW9kZS52YWx1ZSA9PT0gJ21hbnVhbCcpIHsKICAgICAgICAgIC8vIOmqjOivgeW/heWhq+Wtl+autQogICAgICAgICAgaWYgKCFuZXdDb250cmFjdC50aXRsZSB8fCAhbmV3Q29udHJhY3QudHlwZSB8fCAhbmV3Q29udHJhY3QuY29tcGFueSkgewogICAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+ivt+Whq+WGmeW/heWhq+Wtl+aute+8muWQiOWQjOWQjeensOOAgeWQiOWQjOexu+Wei+WSjOetvue6puWvueaWuScpOwogICAgICAgICAgICBsb2FkaW5nLmNsb3NlKCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnRyYWN0RGF0YSA9IHsKICAgICAgICAgICAgdGl0bGU6IG5ld0NvbnRyYWN0LnRpdGxlLAogICAgICAgICAgICB0eXBlOiBuZXdDb250cmFjdC50eXBlLAogICAgICAgICAgICBjb21wYW55OiBuZXdDb250cmFjdC5jb21wYW55LAogICAgICAgICAgICBhbW91bnQ6IG5ld0NvbnRyYWN0LmFtb3VudCA/IE51bWJlcihuZXdDb250cmFjdC5hbW91bnQucmVwbGFjZSgvW15cZC5dL2csICcnKSkgOiAwLAogICAgICAgICAgICBzaWduX2RhdGU6IGZvcm1hdERhdGUobmV3Q29udHJhY3Quc2lnbkRhdGUpLAogICAgICAgICAgICBzdGFydF9kYXRlOiBmb3JtYXREYXRlKG5ld0NvbnRyYWN0LnN0YXJ0RGF0ZSksCiAgICAgICAgICAgIGV4cGlyZV9kYXRlOiBmb3JtYXREYXRlKG5ld0NvbnRyYWN0LmV4cGlyZURhdGUpLAogICAgICAgICAgICByZW1hcms6IG5ld0NvbnRyYWN0LnJlbWFyayB8fCAnJywKICAgICAgICAgICAgc3RhdHVzOiAncGVuZGluZycKICAgICAgICAgIH07CiAgICAgICAgfSBlbHNlIGlmIChjcmVhdGlvbk1vZGUudmFsdWUgPT09ICd0ZW1wbGF0ZScpIHsKICAgICAgICAgIC8vIOS9v+eUqOaooeadv+WIm+W7uuWQiOWQjAogICAgICAgICAgaWYgKHNlbGVjdGVkVGVtcGxhdGUudmFsdWUgPT09IG51bGwpIHsKICAgICAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfor7fpgInmi6nkuIDkuKrmqKHmnb8nKTsKICAgICAgICAgICAgbG9hZGluZy5jbG9zZSgpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgLy8g6aqM6K+B5b+F5aGr5a2X5q61CiAgICAgICAgICBpZiAoIXRlbXBsYXRlRm9ybS50aXRsZSkgewogICAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+ivt+Whq+WGmeWQiOWQjOagh+mimCcpOwogICAgICAgICAgICBsb2FkaW5nLmNsb3NlKCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIGlmICghdGVtcGxhdGVGb3JtLmNvbXBhbnkpIHsKICAgICAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfor7floavlhpnnrb7nuqblr7nmlrknKTsKICAgICAgICAgICAgbG9hZGluZy5jbG9zZSgpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgLy8g6I635Y+W6YCJ5oup55qE5qih5p2/CiAgICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IGF2YWlsYWJsZVRlbXBsYXRlcy52YWx1ZVtzZWxlY3RlZFRlbXBsYXRlLnZhbHVlXTsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIC8vIOS9v+eUqEFQSeWIm+W7uuWQiOWQjAogICAgICAgICAgICByZXNwb25zZSA9IGF3YWl0IGNyZWF0ZUNvbnRyYWN0RnJvbVRlbXBsYXRlKHRlbXBsYXRlLmlkLCB7CiAgICAgICAgICAgICAgdGl0bGU6IHRlbXBsYXRlRm9ybS50aXRsZSwKICAgICAgICAgICAgICBjb21wYW55OiB0ZW1wbGF0ZUZvcm0uY29tcGFueSwKICAgICAgICAgICAgICB0eXBlOiB0ZW1wbGF0ZS5jb250cmFjdF90eXBlLAogICAgICAgICAgICAgIGFtb3VudDogdGVtcGxhdGVGb3JtLmFtb3VudCB8fCAwLAogICAgICAgICAgICAgIHJlbWFyazogdGVtcGxhdGVGb3JtLnJlbWFyawogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIOaIkOWKn+WIm+W7uuWQjuebtOaOpeaYvuekuuaIkOWKn+S/oeaBr+W5tui/lOWbngogICAgICAgICAgICBjb25zdCBhY3Rpb25UZXh0ID0gZ2V0U3VibWl0QnV0dG9uVGV4dCgpOwogICAgICAgICAgICBFbE1lc3NhZ2Uuc3VjY2VzcyhhY3Rpb25UZXh0ICsgJ+ivt+axguW3suaPkOS6pCcpOwogICAgICAgICAgICBzaG93TmV3Q29udHJhY3REaWFsb2cudmFsdWUgPSBmYWxzZTsKCiAgICAgICAgICAgIC8vIOWmguaenOacieWTjeW6lOS4lOWMheWQq+WQiOWQjElE77yM6Lez6L2s5Yiw6K+m5oOF6aG16Z2iCiAgICAgICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5pZCkgewogICAgICAgICAgICAgIC8vIOe7meWQjuerr+S4gOS6m+WkhOeQhuaXtumXtAogICAgICAgICAgICAgIGxvYWRpbmcudGV4dCA9ICflkIjlkIzliJvlu7rlrozmiJDvvIzmraPlnKjot7PovawuLi4nOwogICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDAwKSk7CiAgICAgICAgICAgICAgcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgbmFtZTogJ0NvbnRyYWN0RGV0YWlsJywKICAgICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgICBpZDogcmVzcG9uc2UuaWQKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvLyDph43mlrDliqDovb3lkIjlkIzliJfooagKICAgICAgICAgICAgICBhd2FpdCBsb2FkQ29udHJhY3RzKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbG9hZGluZy5jbG9zZSgpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKCfkvb/nlKjmqKHmnb/liJvlu7rlkIjlkIzlpLHotKU6JywgZXJyb3IpOwogICAgICAgICAgICB0aHJvdyBlcnJvcjsgLy8g6YeN5paw5oqb5Ye66ZSZ6K+v77yM5Lya6KKr5aSW5bGCY2F0Y2jmjZXojrcKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKGNyZWF0aW9uTW9kZS52YWx1ZSA9PT0gJ2FpJykgewogICAgICAgICAgLy8g6aqM6K+B5b+F5aGr5a2X5q61CiAgICAgICAgICBpZiAoIWFpRm9ybS5jb3JlRWxlbWVudHMpIHsKICAgICAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfor7floavlhpnlkIjlkIzpnIDmsYLmj4/ov7AnKTsKICAgICAgICAgICAgbG9hZGluZy5jbG9zZSgpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBjb250cmFjdERhdGEgPSB7CiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBhaUZvcm0uY29yZUVsZW1lbnRzLAogICAgICAgICAgICB1c2VfYWlfYWdlbnQ6IHRydWUsCiAgICAgICAgICAgIHN0YXR1czogJ3BlbmRpbmcnCiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgLy8g6LCD55SoQVBJ5Yib5bu65ZCI5ZCMIC0g5re75Yqg6YeN6K+V6YC76L6RCiAgICAgICAgY29uc29sZS5sb2coJ+aPkOS6pOWQiOWQjOaVsOaNrjonLCBKU09OLnN0cmluZ2lmeShjb250cmFjdERhdGEpKTsKICAgICAgICBsZXQgcmV0cnlDb3VudCA9IDA7CiAgICAgICAgY29uc3QgbWF4UmV0cmllcyA9IDM7CiAgICAgICAgd2hpbGUgKHJldHJ5Q291bnQgPCBtYXhSZXRyaWVzKSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICAvLyDlr7lBSeeUn+aIkOiuvue9ruabtOmVv+eahOi2heaXtuaXtumXtAogICAgICAgICAgICBjb25zdCB0aW1lb3V0ID0gY3JlYXRpb25Nb2RlLnZhbHVlID09PSAnYWknID8gMTgwMDAwIDogNjAwMDA7IC8vIEFJ55Sf5oiQM+WIhumSn++8jOWFtuS7ljHliIbpkp8KCiAgICAgICAgICAgIGxvYWRpbmcudGV4dCA9IGNyZWF0aW9uTW9kZS52YWx1ZSA9PT0gJ2FpJyA/ICfmraPlnKjkvb/nlKhBSeeUn+aIkOWQiOWQjO+8jOi/meWPr+iDvemcgOimgeS4gOS6m+aXtumXtC4uLicgOiAn5q2j5Zyo5o+Q5LqkLi4uJzsKCiAgICAgICAgICAgIC8vIOWIm+W7uuS4gOS4quWPr+S7peWPlua2iOeahOivt+axggogICAgICAgICAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpOwogICAgICAgICAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICBjb250cm9sbGVyLmFib3J0KCk7CiAgICAgICAgICAgIH0sIHRpbWVvdXQpOwoKICAgICAgICAgICAgLy8g5Y+R6YCB6K+35rGCCiAgICAgICAgICAgIHJlc3BvbnNlID0gYXdhaXQgY3JlYXRlQ29udHJhY3RBUEkoewogICAgICAgICAgICAgIC4uLmNvbnRyYWN0RGF0YSwKICAgICAgICAgICAgICBzaWduYWw6IGNvbnRyb2xsZXIuc2lnbmFsCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8g5riF6Zmk6LaF5pe26K6h5pe25ZmoCiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpOwoKICAgICAgICAgICAgLy8g5oiQ5Yqf6I635Y+W5ZON5bqU77yM6Lez5Ye65b6q546vCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfSBjYXRjaCAoYXBpRXJyb3IpIHsKICAgICAgICAgICAgcmV0cnlDb3VudCsrOwogICAgICAgICAgICBjb25zb2xlLmVycm9yKGBBUEnosIPnlKjlpLHotKUoJHtyZXRyeUNvdW50fS8ke21heFJldHJpZXN9KTpgLCBhcGlFcnJvcik7CgogICAgICAgICAgICAvLyDmo4Dmn6XmmK/lkKbmmK/otoXml7bmiJbnvZHnu5zplJnor68KICAgICAgICAgICAgY29uc3QgaXNOZXR3b3JrRXJyb3IgPSAhYXBpRXJyb3IucmVzcG9uc2UgJiYgYXBpRXJyb3IubWVzc2FnZSAmJiAoYXBpRXJyb3IubWVzc2FnZS5pbmNsdWRlcygnTmV0d29yayBFcnJvcicpIHx8IGFwaUVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ3RpbWVvdXQnKSB8fCBhcGlFcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdhYm9ydGVkJykpOwogICAgICAgICAgICBpZiAoaXNOZXR3b3JrRXJyb3IgJiYgcmV0cnlDb3VudCA8IG1heFJldHJpZXMpIHsKICAgICAgICAgICAgICAvLyDnvZHnu5zplJnor6/lj6/ku6Xph43or5UKICAgICAgICAgICAgICBsb2FkaW5nLnRleHQgPSBg6L+e5o6l5aSx6LSl77yM5q2j5Zyo6L+b6KGM56ysJHtyZXRyeUNvdW50feasoemHjeivlS4uLmA7CgogICAgICAgICAgICAgIC8vIOetieW+heS4gOauteaXtumXtOWQjumHjeivlQogICAgICAgICAgICAgIGNvbnN0IHJldHJ5RGVsYXkgPSAzMDAwICogcmV0cnlDb3VudDsgLy8g6YCS5aKe5bu26L+f77yaM+enku+8jDbnp5LvvIw556eSLi4uCiAgICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIHJldHJ5RGVsYXkpKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChyZXRyeUNvdW50ID49IG1heFJldHJpZXMpIHsKICAgICAgICAgICAgICAvLyDovr7liLDmnIDlpKfph43or5XmrKHmlbDvvIzmipvlh7rmnIDlkI7nmoTplJnor68KICAgICAgICAgICAgICB0aHJvdyBhcGlFcnJvcjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvLyDlhbbku5bnsbvlnovnmoTplJnor6/vvIznm7TmjqXmipvlh7oKICAgICAgICAgICAgICB0aHJvdyBhcGlFcnJvcjsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBjb25zdCBhY3Rpb25UZXh0ID0gZ2V0U3VibWl0QnV0dG9uVGV4dCgpOwogICAgICAgIEVsTWVzc2FnZS5zdWNjZXNzKGFjdGlvblRleHQgKyAn6K+35rGC5bey5o+Q5LqkJyk7CiAgICAgICAgc2hvd05ld0NvbnRyYWN0RGlhbG9nLnZhbHVlID0gZmFsc2U7CgogICAgICAgIC8vIEFJ55Sf5oiQ5oOF5Ya15LiL55u05o6l6Lez6L2s5Yiw5ZCI5ZCM6K+m5oOF6aG16Z2iCiAgICAgICAgaWYgKGNyZWF0aW9uTW9kZS52YWx1ZSA9PT0gJ2FpJyAmJiByZXNwb25zZSAmJiByZXNwb25zZS5pZCkgewogICAgICAgICAgLy8g57uZ5ZCO56uv5LiA5Lqb5aSE55CG5pe26Ze0CiAgICAgICAgICBsb2FkaW5nLnRleHQgPSAn5ZCI5ZCM55Sf5oiQ5a6M5oiQ77yM5q2j5Zyo6Lez6L2sLi4uJzsKICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDAwKSk7CiAgICAgICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIG5hbWU6ICdDb250cmFjdERldGFpbCcsCiAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgIGlkOiByZXNwb25zZS5pZAogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8g6YeN5paw5Yqg6L295ZCI5ZCM5YiX6KGoCiAgICAgICAgICBhd2FpdCBsb2FkQ29udHJhY3RzKCk7CiAgICAgICAgfQogICAgICAgIGxvYWRpbmcuY2xvc2UoKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfmj5DkuqTlkIjlkIzlpLHotKU6JywgZXJyb3IpOwogICAgICAgIGxldCBlcnJvck1zZyA9ICfmj5DkuqTlkIjlkIzlpLHotKXvvIzor7fmo4Dmn6XovpPlhaXlhoXlrrknOwoKICAgICAgICAvLyDmo4Dmn6XnibnlrprnmoTnvZHnu5zplJnor68KICAgICAgICBpZiAoIWVycm9yLnJlc3BvbnNlICYmIGVycm9yLm1lc3NhZ2UpIHsKICAgICAgICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdOZXR3b3JrIEVycm9yJykpIHsKICAgICAgICAgICAgZXJyb3JNc2cgPSAn572R57uc6L+e5o6l6ZSZ6K+v77yM6K+356Gu5L+d5ZCO56uv5pyN5Yqh5q2j5bi46L+Q6KGM5bm256iN5ZCO6YeN6K+VJzsKICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygndGltZW91dCcpKSB7CiAgICAgICAgICAgIGVycm9yTXNnID0gJ+ivt+axgui2heaXtu+8jEFJ55Sf5oiQ5ZCI5ZCM5Y+v6IO96ZyA6KaB6L6D6ZW/5pe26Ze077yM6K+356iN5ZCO6YeN6K+VJzsKICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnYWJvcnRlZCcpKSB7CiAgICAgICAgICAgIGVycm9yTXNnID0gJ+ivt+axguiiq+S4reaWre+8jOivt+eojeWQjumHjeivlSc7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChlcnJvci5yZXNwb25zZSAmJiBlcnJvci5yZXNwb25zZS5kYXRhKSB7CiAgICAgICAgICBpZiAodHlwZW9mIGVycm9yLnJlc3BvbnNlLmRhdGEgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgIGVycm9yTXNnID0gZXJyb3IucmVzcG9uc2UuZGF0YTsKICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGVycm9yLnJlc3BvbnNlLmRhdGEgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3IpIHsKICAgICAgICAgICAgICAgIC8vIOebtOaOpeS9v+eUqOWQjuerr+i/lOWbnueahOmUmeivr+a2iOaBrwogICAgICAgICAgICAgICAgZXJyb3JNc2cgPSBlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjb25zdCBlcnJvckRldGFpbHMgPSBPYmplY3QuZW50cmllcyhlcnJvci5yZXNwb25zZS5kYXRhKS5tYXAoKFtrZXksIHZhbHVlXSkgPT4gYCR7a2V5fTogJHtBcnJheS5pc0FycmF5KHZhbHVlKSA/IHZhbHVlLmpvaW4oJywgJykgOiB2YWx1ZX1gKS5qb2luKCc7ICcpOwogICAgICAgICAgICAgICAgZXJyb3JNc2cgPSBg5o+Q5Lqk5aSx6LSlOiAke2Vycm9yRGV0YWlsc31gOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+ino+aekOmUmeivr+ivpuaDheWksei0pTonLCBlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoZXJyb3JNc2cpOwogICAgICAgIGNvbnNvbGUubG9nKCflhbPpl63liqDovb3moYYuLi4nKTsKICAgICAgICBFbExvYWRpbmcuc2VydmljZSgpLmNsb3NlKCk7IC8vIOehruS/neWKoOi9veahhuWFs+mXrQogICAgICB9CiAgICB9OwoKICAgIC8vIOafpeeci+WQiOWQjOivpuaDhQogICAgY29uc3Qgdmlld0NvbnRyYWN0RGV0YWlsID0gKGNvbnRyYWN0LCBpbmRleCkgPT4gewogICAgICBzZWxlY3RlZENvbnRyYWN0LnZhbHVlID0gaW5kZXg7CiAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAnQ29udHJhY3REZXRhaWwnLAogICAgICAgIHBhcmFtczogewogICAgICAgICAgaWQ6IGNvbnRyYWN0LmlkCiAgICAgICAgfQogICAgICB9KTsKICAgIH07CgogICAgLy8g562b6YCJ5ZKM5o6S5bqP5Y+Y5YyW5pe26YeN5paw5Yqg6L295pWw5o2uCiAgICBjb25zdCBoYW5kbGVGaWx0ZXJDaGFuZ2UgPSAoKSA9PiB7CiAgICAgIGN1cnJlbnRQYWdlLnZhbHVlID0gMTsgLy8g6YeN572u5Yiw56ys5LiA6aG1CiAgICAgIGxvYWRDb250cmFjdHMoKTsKICAgIH07CgogICAgLy8g5ZyoIHNjcmlwdCBzZXR1cCDpg6jliIbmt7vliqDlpITnkIblh73mlbAKICAgIGNvbnN0IGhhbmRsZUNvbnRyYWN0VHlwZUNoYW5nZSA9IHZhbHVlID0+IHsKICAgICAgLy8g5aaC5p6c55So5oi36YCJ5oup5LqGIuWFtuS7liLvvIzmuIXnqbrlvZPliY3lgLzku6XlhYHorrjovpPlhaUKICAgICAgaWYgKHZhbHVlID09PSAn5YW25LuWJykgewogICAgICAgIG5ld0NvbnRyYWN0LnR5cGUgPSAnJzsKICAgICAgfQogICAgfTsKCiAgICAvLyDlpITnkIbliIbpobXlpKflsI/lj5jljJYKICAgIGNvbnN0IGhhbmRsZVNpemVDaGFuZ2UgPSBuZXdTaXplID0+IHsKICAgICAgcGFnZVNpemUudmFsdWUgPSBuZXdTaXplOwogICAgICBjdXJyZW50UGFnZS52YWx1ZSA9IDE7IC8vIOmHjee9ruWIsOesrOS4gOmhtQogICAgICBsb2FkQ29udHJhY3RzKCk7CiAgICB9OwoKICAgIC8vIOWkhOeQhumhteeggeWPmOWMlgogICAgY29uc3QgaGFuZGxlQ3VycmVudENoYW5nZSA9IG5ld1BhZ2UgPT4gewogICAgICBjdXJyZW50UGFnZS52YWx1ZSA9IG5ld1BhZ2U7CiAgICAgIGxvYWRDb250cmFjdHMoKTsKICAgIH07CgogICAgLy8g5Yid5aeL5YyW5Yqg6L295pWw5o2uCiAgICBvbk1vdW50ZWQoKCkgPT4gewogICAgICBsb2FkQ29udHJhY3RzKCk7CiAgICB9KTsKICAgIHJldHVybiB7CiAgICAgIHNlYXJjaFF1ZXJ5LAogICAgICBmaWx0ZXJTdGF0dXMsCiAgICAgIHNvcnRCeSwKICAgICAgc29ydE9yZGVyLAogICAgICBzZWxlY3RlZENvbnRyYWN0LAogICAgICBjb250cmFjdHMsCiAgICAgIGZpbHRlcmVkQ29udHJhY3RzLAogICAgICBzaG93TmV3Q29udHJhY3REaWFsb2csCiAgICAgIGNyZWF0aW9uTW9kZSwKICAgICAgbmV3Q29udHJhY3QsCiAgICAgIHRlbXBsYXRlRm9ybSwKICAgICAgYWlGb3JtLAogICAgICBzZWxlY3RlZFRlbXBsYXRlLAogICAgICBhdmFpbGFibGVUZW1wbGF0ZXMsCiAgICAgIGlzTG9hZGluZywKICAgICAgaXNMb2FkaW5nVGVtcGxhdGVzLAogICAgICAvLyDliIbpobXnm7jlhbMKICAgICAgY3VycmVudFBhZ2UsCiAgICAgIHBhZ2VTaXplLAogICAgICB0b3RhbEl0ZW1zLAogICAgICAvLyDlm77moIcKICAgICAgUGx1cywKICAgICAgU2VhcmNoLAogICAgICBJbmZvRmlsbGVkLAogICAgICAvLyDmlrnms5UKICAgICAgZ2V0U3RhdHVzVGV4dCwKICAgICAgb3BlbkNvbnRyYWN0RGlhbG9nLAogICAgICBnZXRTdWJtaXRCdXR0b25UZXh0LAogICAgICBzYXZlQXNEcmFmdCwKICAgICAgc3VibWl0Q29udHJhY3QsCiAgICAgIHZpZXdDb250cmFjdERldGFpbCwKICAgICAgaGFuZGxlRmlsdGVyQ2hhbmdlLAogICAgICBoYW5kbGVDb250cmFjdFR5cGVDaGFuZ2UsCiAgICAgIGhhbmRsZVRlbXBsYXRlU2VsZWN0LAogICAgICBoYW5kbGVTaXplQ2hhbmdlLAogICAgICBoYW5kbGVDdXJyZW50Q2hhbmdlCiAgICB9OwogIH0KfTs="},{"version":3,"names":["ref","reactive","computed","onMounted","watch","Plus","Search","InfoFilled","ElMessage","ElLoading","useRouter","getContractList","createContract","createContractAPI","getRecommendedTemplates","createContractFromTemplate","store","formatDate","date","toISOString","split","name","setup","router","searchQuery","filterStatus","sortBy","sortOrder","selectedContract","showNewContractDialog","creationMode","selectedTemplate","isLoading","currentPage","pageSize","totalItems","newContract","title","type","company","amount","signDate","startDate","expireDate","remark","templateForm","contractType","industry","scene","aiForm","coreElements","availableTemplates","isLoadingTemplates","contracts","loadRecommendedTemplates","value","params","contract_type","response","console","log","length","error","handleTemplateSelect","index","template","currentDate","Date","toLocaleDateString","loadContracts","search","status","ordering","page","page_size","formattedContracts","results","map","contract","id","number","expire_date","createdAt","created_at","count","filteredContracts","getStatusText","statusMap","openContractDialog","resetForms","Object","keys","forEach","key","getSubmitButtonText","saveAsDraft","_store$getters$user","loading","service","lock","text","background","userId","getters","user","close","contractData","Number","replace","sign_date","start_date","description","use_ai_agent","JSON","stringify","success","errorMsg","data","errorDetails","entries","Array","isArray","join","e","submitContract","actionText","Promise","resolve","setTimeout","push","retryCount","maxRetries","timeout","controller","AbortController","timeoutId","abort","signal","clearTimeout","apiError","isNetworkError","message","includes","retryDelay","viewContractDetail","handleFilterChange","handleContractTypeChange","handleSizeChange","newSize","handleCurrentChange","newPage"],"sources":["C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\contract\\Index.vue"],"sourcesContent":["<template>\n  <div class=\"contract-container\">\n    <div class=\"row\">\n      <!-- 合同列表 -->\n      <div class=\"col-lg-12\">\n        <el-card class=\"contract-list-card\" v-loading=\"isLoading\">\n          <template #header>\n            <div class=\"card-header-flex\">\n              <span>合同列表</span>\n              <div class=\"d-flex align-items-center ms-auto me-3\"> \n            <el-input \n              v-model=\"searchQuery\" \n                  placeholder=\"搜索标题或编号...\" \n              clearable\n              :prefix-icon=\"Search\"\n                  class=\"me-2\"\n                  style=\"width: 200px;\"\n                  @clear=\"handleFilterChange\"\n                  @keyup.enter=\"handleFilterChange\"\n            ></el-input>\n            <el-select \n              v-model=\"filterStatus\" \n                  placeholder=\"所有状态\" \n              clearable\n                  class=\"me-2\"\n                  style=\"width: 150px;\"\n                  @change=\"handleFilterChange\"\n            >\n                  <el-option label=\"所有状态\" value=\"\"></el-option>\n              <el-option label=\"草稿\" value=\"draft\"></el-option>\n              <el-option label=\"待审批\" value=\"pending\"></el-option>\n              <el-option label=\"已签署\" value=\"signed\"></el-option>\n              <el-option label=\"已过期\" value=\"expired\"></el-option>\n                  <el-option label=\"已驳回\" value=\"rejected\"></el-option>\n                </el-select>\n                <el-select \n                  v-model=\"sortBy\" \n                  placeholder=\"默认排序\" \n                  class=\"me-2\"\n                  style=\"width: 150px;\"\n                  @change=\"handleFilterChange\"\n                >\n                  <el-option label=\"默认排序\" value=\"default\"></el-option>\n                  <el-option label=\"合同标题\" value=\"title\"></el-option>\n                  <el-option label=\"创建时间\" value=\"created_at\"></el-option>\n                  <el-option label=\"合同金额\" value=\"amount\"></el-option>\n                </el-select>\n                <el-select \n                  v-model=\"sortOrder\" \n                  style=\"width: 100px;\"\n                  @change=\"handleFilterChange\"\n                >\n                  <el-option label=\"升序\" value=\"asc\"></el-option>\n                  <el-option label=\"降序\" value=\"desc\"></el-option>\n            </el-select>\n          </div>\n              <el-button type=\"primary\" size=\"small\" @click=\"openContractDialog\">\n                <el-icon class=\"mr-1\"><Plus /></el-icon> 新建合同\n              </el-button>\n            </div>\n          </template>\n          \n          <div class=\"contract-list\">\n            <div \n              v-for=\"(contract, index) in filteredContracts\" \n              :key=\"index\"\n              class=\"contract-item\"\n              :class=\"{'active': selectedContract === index}\"\n              @click=\"viewContractDetail(contract, index)\"\n            >\n              <div class=\"contract-title\">\n                {{ contract.title }}\n                <span class=\"contract-status\" :class=\"'status-' + contract.status\">\n                  {{ getStatusText(contract.status) }}\n                </span>\n              </div>\n              <div class=\"contract-info\">\n                <span>合同编号: {{ contract.number }}</span>\n                <span>创建时间: {{ contract.createdAt }}</span>\n              </div>\n              <div class=\"contract-info mt-1\">\n                <span>{{ contract.company }}</span>\n                <span>金额: {{ contract.amount }}</span>\n              </div>\n            </div>\n            \n            <el-empty \n              v-if=\"filteredContracts.length === 0\" \n              description=\"没有找到匹配的合同\"\n            ></el-empty>\n          </div>\n          \n          <!-- 添加分页组件 -->\n          <div class=\"pagination-container\">\n            <el-pagination\n              v-model:current-page=\"currentPage\"\n              v-model:page-size=\"pageSize\"\n              :page-sizes=\"[10, 20, 30, 50]\"\n              layout=\"total, sizes, prev, pager, next, jumper\"\n              :total=\"totalItems\"\n              @size-change=\"handleSizeChange\"\n              @current-change=\"handleCurrentChange\"\n            />\n          </div>\n        </el-card>\n      </div>\n      </div>\n      \n    <!-- 创建合同模态框 -->\n    <el-dialog\n      v-model=\"showNewContractDialog\"\n      title=\"新建合同\"\n      width=\"70%\"\n                >\n      <!-- 创建方式 -->\n      <div class=\"mb-3\">\n        <label class=\"form-label fw-bold\">创建方式:</label>\n        <div>\n          <el-radio-group v-model=\"creationMode\">\n            <el-radio label=\"manual\">手动创建</el-radio>\n            <el-radio label=\"template\">使用模板</el-radio>\n            <el-radio label=\"ai\">AI 生成</el-radio>\n          </el-radio-group>\n              </div>\n            </div>\n      <el-divider />\n          \n      <!-- 手动创建部分 -->\n      <div v-if=\"creationMode === 'manual'\">\n        <div class=\"row\">\n          <div class=\"col-md-6\">\n            <el-form-item label=\"合同名称\" required>\n              <el-input v-model=\"newContract.title\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"合同类型\" required>\n              <el-select \n                v-model=\"newContract.type\" \n                placeholder=\"请选择...\" \n                style=\"width: 100%\"\n                filterable\n                allow-create\n                default-first-option\n                @change=\"handleContractTypeChange\"\n              >\n                <el-option label=\"采购合同\" value=\"采购合同\"></el-option>\n                <el-option label=\"销售合同\" value=\"销售合同\"></el-option>\n                <el-option label=\"服务合同\" value=\"服务合同\"></el-option>\n                <el-option label=\"合作协议\" value=\"合作协议\"></el-option>\n                <el-option label=\"租赁合同\" value=\"租赁合同\"></el-option>\n                <el-option label=\"其他\" value=\"其他\"></el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item label=\"签约对方\" required>\n              <el-input v-model=\"newContract.company\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"合同金额\" required>\n              <el-input v-model=\"newContract.amount\" prefix=\"¥\"></el-input>\n            </el-form-item>\n                  </div>\n          <div class=\"col-md-6\">\n            <el-form-item label=\"签约日期\">\n              <el-date-picker \n                v-model=\"newContract.signDate\" \n                type=\"date\" \n                placeholder=\"选择日期\"\n                style=\"width: 100%\">\n              </el-date-picker>\n            </el-form-item>\n            <el-form-item label=\"生效日期\">\n              <el-date-picker \n                v-model=\"newContract.startDate\" \n                type=\"date\" \n                placeholder=\"选择日期\"\n                style=\"width: 100%\">\n              </el-date-picker>\n            </el-form-item>\n            <el-form-item label=\"到期日期\">\n              <el-date-picker \n                v-model=\"newContract.expireDate\" \n                type=\"date\" \n                placeholder=\"选择日期\"\n                style=\"width: 100%\">\n              </el-date-picker>\n            </el-form-item>\n                  </div>\n                  </div>\n        <el-form-item label=\"备注\">\n          <el-input \n            v-model=\"newContract.remark\" \n            type=\"textarea\" \n            :rows=\"3\"\n          ></el-input>\n        </el-form-item>\n                </div>\n\n      <!-- 模板选择部分 -->\n      <div v-if=\"creationMode === 'template'\">\n        <div class=\"row\">\n          <div class=\"col-md-4 mb-3\">\n            <el-form-item label=\"合同类型\">\n              <el-select v-model=\"templateForm.contractType\" placeholder=\"请选择...\" style=\"width: 100%\">\n                <el-option label=\"采购合同\" value=\"采购合同\"></el-option>\n                <el-option label=\"销售合同\" value=\"销售合同\"></el-option>\n                <el-option label=\"租赁合同\" value=\"租赁合同\"></el-option>\n                <el-option label=\"服务协议\" value=\"服务协议\"></el-option>\n                <el-option label=\"劳动合同\" value=\"劳动合同\"></el-option>\n                <el-option label=\"保密协议\" value=\"保密协议\"></el-option>\n              </el-select>\n            </el-form-item>\n          </div>\n          <div class=\"col-md-4 mb-3\">\n            <el-form-item label=\"行业领域\">\n              <el-select v-model=\"templateForm.industry\" placeholder=\"请选择...\" style=\"width: 100%\">\n                <el-option label=\"信息技术\" value=\"信息技术\"></el-option>\n                <el-option label=\"制造业\" value=\"制造业\"></el-option>\n                <el-option label=\"零售与电商\" value=\"零售与电商\"></el-option>\n                <el-option label=\"金融服务\" value=\"金融服务\"></el-option>\n                <el-option label=\"医疗健康\" value=\"医疗健康\"></el-option>\n              </el-select>\n            </el-form-item>\n          </div>\n          <div class=\"col-md-4 mb-3\">\n            <el-form-item label=\"交易场景\">\n              <el-select v-model=\"templateForm.scene\" placeholder=\"请选择...\" style=\"width: 100%\">\n                <el-option label=\"国内贸易\" value=\"国内贸易\"></el-option>\n                <el-option label=\"跨境交易\" value=\"跨境交易\"></el-option>\n                <el-option label=\"股权融资\" value=\"股权融资\"></el-option>\n                <el-option label=\"知识产权转让\" value=\"知识产权转让\"></el-option>\n              </el-select>\n            </el-form-item>\n          </div>\n        </div>\n              \n        <div class=\"mb-3\">\n          <label class=\"form-label\">推荐模板:</label>\n          <div class=\"template-list\" v-loading=\"isLoadingTemplates\">\n            <div \n              v-for=\"(template, idx) in availableTemplates\" \n              :key=\"idx\"\n              class=\"template-item\"\n              :class=\"{'active': selectedTemplate === idx}\"\n              @click=\"handleTemplateSelect(idx)\"\n            >\n              <div class=\"template-name\">{{ template.name }}</div>\n              <div class=\"template-info\">\n                <span class=\"template-type\">{{ template.contract_type }}</span>\n                <span class=\"template-industry\" v-if=\"template.industry\">{{ template.industry }}</span>\n              </div>\n              <div class=\"template-desc\" v-if=\"template.description\">{{ template.description }}</div>\n            </div>\n            \n            <el-empty \n              v-if=\"!isLoadingTemplates && availableTemplates.length === 0 && (templateForm.contractType || templateForm.industry || templateForm.scene)\"\n              description=\"没有找到匹配的模板\"\n              :image-size=\"100\"\n            ></el-empty>\n            \n            <div class=\"template-hint\" v-if=\"!templateForm.contractType && !templateForm.industry && !templateForm.scene\">\n              <el-icon><InfoFilled /></el-icon>\n              <span>请选择合同类型、行业或场景以获取推荐模板</span>\n            </div>\n          </div>\n        </div>\n                  \n        <div class=\"row\">\n          <div class=\"col-md-6 mb-3\">\n            <el-form-item label=\"合同名称\" required>\n              <el-input v-model=\"templateForm.title\" placeholder=\"请输入合同名称\"></el-input>\n            </el-form-item>\n          </div>\n          <div class=\"col-md-6 mb-3\">\n            <el-form-item label=\"签约对方\" required>\n              <el-input v-model=\"templateForm.company\" placeholder=\"请输入签约对方名称\"></el-input>\n            </el-form-item>\n          </div>\n        </div>\n        \n        <div class=\"row\">\n          <div class=\"col-md-6 mb-3\">\n            <el-form-item label=\"合同金额\">\n              <el-input v-model=\"templateForm.amount\" placeholder=\"请输入金额\" prefix=\"¥\"></el-input>\n            </el-form-item>\n          </div>\n        </div>\n              \n        <el-form-item label=\"备注\">\n          <el-input\n            v-model=\"templateForm.remark\" \n            type=\"textarea\"\n            :rows=\"2\"\n          ></el-input>\n        </el-form-item>\n      </div>\n\n      <!-- AI生成部分 -->\n      <div v-if=\"creationMode === 'ai'\">\n        <el-form-item label=\"一句话描述合同需求\" required>\n          <el-input \n            v-model=\"aiForm.coreElements\" \n            type=\"textarea\" \n            :rows=\"4\"\n            placeholder=\"例如：帮我生成一份甲方为XX科技公司，乙方为XX物流公司的物流运输合同，主要包含运输货物、时间、费用和付款方式等关键信息。\"\n          ></el-input>\n        </el-form-item>\n              </div>\n\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"showNewContractDialog = false\">取消</el-button>\n          <el-button type=\"info\" @click=\"saveAsDraft\">保存草稿</el-button>\n          <el-button type=\"primary\" @click=\"submitContract\">\n            {{ getSubmitButtonText() }}\n          </el-button>\n        </span>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { ref, reactive, computed, onMounted, watch } from 'vue'\nimport { \n  Plus, Search, InfoFilled\n} from '@element-plus/icons-vue'\nimport { ElMessage, ElLoading } from 'element-plus'\nimport { useRouter } from 'vue-router'\nimport { \n  getContractList, createContract as createContractAPI,\n  getRecommendedTemplates, createContractFromTemplate \n} from '@/api/contract'\nimport store from '@/store'\n\n// 格式化日期为YYYY-MM-DD\nfunction formatDate(date) {\n  if (!date) return null;\n  if (typeof date === 'string') return date;\n  return date.toISOString().split('T')[0];\n}\n\nexport default {\n  name: 'Contract',\n  setup() {\n    const router = useRouter()\n    const searchQuery = ref('')\n    const filterStatus = ref('')\n    const sortBy = ref('default')\n    const sortOrder = ref('desc')\n    const selectedContract = ref(0)\n    const showNewContractDialog = ref(false)\n    const creationMode = ref('manual')\n    const selectedTemplate = ref(null)\n    const isLoading = ref(false)\n    \n    // 分页相关状态\n    const currentPage = ref(1)\n    const pageSize = ref(10)\n    const totalItems = ref(0)\n    \n    // 新合同表单\n    const newContract = reactive({\n      title: '',\n      type: '',\n      company: '',\n      amount: '',\n        signDate: '',\n      startDate: '',\n      expireDate: '',\n      remark: ''\n    })\n\n    // 模板表单\n    const templateForm = reactive({\n      contractType: '',\n      industry: '',\n      scene: '',\n      title: '',\n      company: '',\n      amount: '',\n      remark: ''\n    })\n\n    // AI表单\n    const aiForm = reactive({\n      coreElements: ''\n    })\n\n    // 可用模板列表\n    const availableTemplates = ref([])\n    const isLoadingTemplates = ref(false)\n    \n    // 合同列表 - 从API获取\n    const contracts = ref([])\n    \n    // 监听模板筛选条件变化，加载推荐模板\n    watch(\n      () => [templateForm.contractType, templateForm.industry, templateForm.scene],\n      async () => {\n        await loadRecommendedTemplates()\n      }\n    )\n    \n    // 加载推荐的合同模板\n    const loadRecommendedTemplates = async () => {\n      if (!templateForm.contractType && !templateForm.industry && !templateForm.scene) {\n        availableTemplates.value = []\n        return\n      }\n      \n      try {\n        isLoadingTemplates.value = true\n        selectedTemplate.value = null\n        \n        const params = {\n          contract_type: templateForm.contractType,\n          industry: templateForm.industry,\n          scene: templateForm.scene\n        }\n        \n        const response = await getRecommendedTemplates(params)\n        console.log('获取到的模板数据:', response)  // 添加调试信息\n        availableTemplates.value = response\n        \n        // 如果只有一个模板，自动选择\n        if (availableTemplates.value.length === 1) {\n          selectedTemplate.value = 0\n        }\n      } catch (error) {\n        console.error('加载推荐模板失败:', error)\n        ElMessage.error('获取推荐模板失败，请稍后重试')\n      } finally {\n        isLoadingTemplates.value = false\n      }\n    }\n\n    // 当选择一个模板时\n    const handleTemplateSelect = (index) => {\n      selectedTemplate.value = index\n      const template = availableTemplates.value[index]\n      \n      // 根据模板填充表单\n      if (template) {\n        // 自动生成标题建议\n        const currentDate = new Date().toLocaleDateString('zh-CN')\n        templateForm.title = `${template.contract_type}(${currentDate})`\n      }\n    }\n    \n    // 加载合同列表数据\n    const loadContracts = async () => {\n      try {\n        isLoading.value = true\n        const response = await getContractList({\n          search: searchQuery.value,\n          status: filterStatus.value,\n          ordering: sortOrder.value === 'desc' ? `-${sortBy.value}` : sortBy.value,\n          page: currentPage.value,\n          page_size: pageSize.value\n        })\n        \n        // 格式化后端返回的数据\n        const formattedContracts = response.results.map(contract => ({\n          id: contract.id,\n          title: contract.title,\n          number: contract.number,\n          status: contract.status,\n          expireDate: contract.expire_date || '未设置',\n          company: contract.company,\n          createdAt: contract.created_at,\n          amount: `￥${contract.amount}`\n        }))\n        \n        contracts.value = formattedContracts\n        totalItems.value = response.count\n      } catch (error) {\n        console.error('加载合同列表失败:', error)\n        ElMessage.error('加载合同列表失败，请稍后重试')\n      } finally {\n        isLoading.value = false\n      }\n    }\n    \n    // 根据筛选条件过滤合同\n    const filteredContracts = computed(() => {\n      // 因为我们现在在API层面做了筛选，这里只是展示返回的数据\n      return contracts.value\n    })\n    \n    // 获取状态文本\n    const getStatusText = (status) => {\n      const statusMap = {\n        'draft': '草稿',\n        'pending': '待审批',\n        'signed': '已签署',\n        'expired': '已过期',\n        'rejected': '已驳回'\n      }\n      return statusMap[status] || status\n    }\n    \n    // 创建合同\n    const openContractDialog = () => {\n      resetForms()\n      showNewContractDialog.value = true\n    }\n    \n    // 重置表单\n    const resetForms = () => {\n      Object.keys(newContract).forEach(key => {\n        newContract[key] = ''\n      })\n      Object.keys(templateForm).forEach(key => {\n        templateForm[key] = ''\n      })\n      aiForm.coreElements = ''\n      creationMode.value = 'manual'\n      selectedTemplate.value = null\n    }\n    \n    // 获取提交按钮文本\n    const getSubmitButtonText = () => {\n      switch (creationMode.value) {\n        case 'template':\n          return '使用模板创建'\n        case 'ai':\n          return 'AI 生成合同'\n        default:\n          return '提交审批'\n      }\n    }\n    \n    // 保存为草稿\n    const saveAsDraft = async () => {\n      try {\n        const loading = ElLoading.service({\n          lock: true,\n          text: '正在保存...',\n          background: 'rgba(0, 0, 0, 0.7)'\n        })\n        \n        // 从Vuex中获取当前用户ID\n        const userId = store.getters.user?.id\n        if (!userId) {\n          ElMessage.error('用户未登录或无法获取用户ID')\n          loading.close()\n          return\n        }\n        \n        // 根据不同的创建模式，构建合同数据\n        let contractData = {}\n        \n        if (creationMode.value === 'manual') {\n          // 验证必填字段\n          if (!newContract.title || !newContract.type || !newContract.company) {\n            ElMessage.error('请填写必填字段：合同名称、合同类型和签约对方')\n            loading.close()\n            return\n          }\n          \n          contractData = {\n            title: newContract.title,\n            type: newContract.type,\n            company: newContract.company,\n            amount: newContract.amount ? Number(newContract.amount.replace(/[^\\d.]/g, '')) : 0,\n            sign_date: formatDate(newContract.signDate),\n            start_date: formatDate(newContract.startDate),\n            expire_date: formatDate(newContract.expireDate),\n            remark: newContract.remark || '',\n            status: 'draft'\n          }\n        } else if (creationMode.value === 'template') {\n          // 验证必填字段\n          if (!templateForm.title || !templateForm.contractType || !templateForm.company) {\n            ElMessage.error('请填写必填字段：合同名称、合同类型和签约对方')\n            loading.close()\n            return\n          }\n          \n          contractData = {\n            title: templateForm.title,\n            type: templateForm.contractType,\n            company: templateForm.company,\n            amount: 0, // 默认值\n            remark: templateForm.remark || '',\n            status: 'draft'\n          }\n        } else if (creationMode.value === 'ai') {\n          // 验证必填字段\n          if (!aiForm.coreElements) {\n            ElMessage.error('请填写合同需求描述')\n            loading.close()\n            return\n          }\n          \n          contractData = {\n            description: aiForm.coreElements,\n            use_ai_agent: true,\n            status: 'draft'\n          }\n        }\n        \n        // 调用API创建合同\n        console.log('提交合同数据:', JSON.stringify(contractData));\n        await createContractAPI(contractData)\n        \n        ElMessage.success('合同已保存为草稿')\n        showNewContractDialog.value = false\n        \n        // 重新加载合同列表\n        await loadContracts()\n        \n        loading.close()\n      } catch (error) {\n        console.error('保存草稿失败:', error)\n        let errorMsg = '保存草稿失败，请检查输入内容'\n        \n        // 尝试提取更详细的错误信息\n        if (error.response && error.response.data) {\n          if (typeof error.response.data === 'string') {\n            errorMsg = error.response.data\n          } else if (typeof error.response.data === 'object') {\n            try {\n              const errorDetails = Object.entries(error.response.data)\n                .map(([key, value]) => `${key}: ${Array.isArray(value) ? value.join(', ') : value}`)\n                .join('; ')\n              errorMsg = `保存失败: ${errorDetails}`\n            } catch (e) {\n              console.error('解析错误详情失败:', e)\n            }\n          }\n        }\n        \n        ElMessage.error(errorMsg)\n      }\n    }\n    \n    // 提交合同\n    const submitContract = async () => {\n      // 验证必填字段\n      if (creationMode.value === 'template' && selectedTemplate.value === null) {\n        ElMessage.error('请选择一个模板')\n        return\n      }\n      \n      // 启动全屏加载\n      const loading = ElLoading.service({\n        lock: true,\n        text: '提交中...',\n        background: 'rgba(0, 0, 0, 0.7)'\n      })\n      \n      try {\n        let contractData = {}\n        let response = null\n        \n        // 根据不同的创建模式处理数据\n        if (creationMode.value === 'manual') {\n          // 验证必填字段\n          if (!newContract.title || !newContract.type || !newContract.company) {\n            ElMessage.error('请填写必填字段：合同名称、合同类型和签约对方')\n            loading.close()\n            return\n          }\n          \n          contractData = {\n            title: newContract.title,\n            type: newContract.type,\n            company: newContract.company,\n            amount: newContract.amount ? Number(newContract.amount.replace(/[^\\d.]/g, '')) : 0,\n            sign_date: formatDate(newContract.signDate),\n            start_date: formatDate(newContract.startDate),\n            expire_date: formatDate(newContract.expireDate),\n            remark: newContract.remark || '',\n            status: 'pending'\n          }\n        } else if (creationMode.value === 'template') {\n          // 使用模板创建合同\n          if (selectedTemplate.value === null) {\n            ElMessage.error('请选择一个模板')\n            loading.close()\n            return\n          }\n          \n          // 验证必填字段\n          if (!templateForm.title) {\n            ElMessage.error('请填写合同标题')\n            loading.close()\n            return\n          }\n          \n          if (!templateForm.company) {\n            ElMessage.error('请填写签约对方')\n            loading.close()\n            return\n          }\n          \n          // 获取选择的模板\n          const template = availableTemplates.value[selectedTemplate.value]\n          \n          try {\n            // 使用API创建合同\n            response = await createContractFromTemplate(template.id, {\n              title: templateForm.title,\n              company: templateForm.company,\n              type: template.contract_type,\n              amount: templateForm.amount || 0,\n              remark: templateForm.remark\n            })\n            \n            // 成功创建后直接显示成功信息并返回\n            const actionText = getSubmitButtonText()\n            ElMessage.success(actionText + '请求已提交')\n            showNewContractDialog.value = false\n            \n            // 如果有响应且包含合同ID，跳转到详情页面\n            if (response && response.id) {\n              // 给后端一些处理时间\n              loading.text = '合同创建完成，正在跳转...'\n              await new Promise(resolve => setTimeout(resolve, 1000))\n              \n              router.push({\n                name: 'ContractDetail',\n                params: { id: response.id }\n              })\n            } else {\n              // 重新加载合同列表\n              await loadContracts()\n            }\n            \n            loading.close()\n            return\n          } catch (error) {\n            console.error('使用模板创建合同失败:', error)\n            throw error  // 重新抛出错误，会被外层catch捕获\n          }\n        } else if (creationMode.value === 'ai') {\n          // 验证必填字段\n          if (!aiForm.coreElements) {\n            ElMessage.error('请填写合同需求描述')\n            loading.close()\n            return\n          }\n          \n          contractData = {\n            description: aiForm.coreElements,\n            use_ai_agent: true,\n            status: 'pending'\n          }\n        }\n        \n        // 调用API创建合同 - 添加重试逻辑\n        console.log('提交合同数据:', JSON.stringify(contractData))\n        let retryCount = 0\n        const maxRetries = 3\n        \n        while (retryCount < maxRetries) {\n          try {\n            // 对AI生成设置更长的超时时间\n            const timeout = creationMode.value === 'ai' ? 180000 : 60000 // AI生成3分钟，其他1分钟\n            \n            loading.text = creationMode.value === 'ai' \n              ? '正在使用AI生成合同，这可能需要一些时间...'\n              : '正在提交...'\n            \n            // 创建一个可以取消的请求\n            const controller = new AbortController()\n            const timeoutId = setTimeout(() => {\n              controller.abort()\n            }, timeout)\n            \n            // 发送请求\n            response = await createContractAPI({ \n              ...contractData,\n              signal: controller.signal\n            })\n            \n            // 清除超时计时器\n            clearTimeout(timeoutId)\n            \n            // 成功获取响应，跳出循环\n            break\n          } catch (apiError) {\n            retryCount++\n            console.error(`API调用失败(${retryCount}/${maxRetries}):`, apiError)\n            \n            // 检查是否是超时或网络错误\n            const isNetworkError = !apiError.response && apiError.message && \n                                  (apiError.message.includes('Network Error') ||\n                                   apiError.message.includes('timeout') ||\n                                   apiError.message.includes('aborted'))\n            \n            if (isNetworkError && retryCount < maxRetries) {\n              // 网络错误可以重试\n              loading.text = `连接失败，正在进行第${retryCount}次重试...`\n              \n              // 等待一段时间后重试\n              const retryDelay = 3000 * retryCount  // 递增延迟：3秒，6秒，9秒...\n              await new Promise(resolve => setTimeout(resolve, retryDelay))\n            } else if (retryCount >= maxRetries) {\n              // 达到最大重试次数，抛出最后的错误\n              throw apiError\n            } else {\n              // 其他类型的错误，直接抛出\n              throw apiError\n            }\n          }\n        }\n        \n        const actionText = getSubmitButtonText()\n        ElMessage.success(actionText + '请求已提交')\n        showNewContractDialog.value = false\n        \n        // AI生成情况下直接跳转到合同详情页面\n        if (creationMode.value === 'ai' && response && response.id) {\n          // 给后端一些处理时间\n          loading.text = '合同生成完成，正在跳转...'\n          await new Promise(resolve => setTimeout(resolve, 1000))\n          \n          router.push({\n            name: 'ContractDetail',\n            params: { id: response.id }\n          })\n        } else {\n          // 重新加载合同列表\n          await loadContracts()\n        }\n        \n        loading.close()\n      } catch (error) {\n        console.error('提交合同失败:', error)\n        let errorMsg = '提交合同失败，请检查输入内容'\n        \n        // 检查特定的网络错误\n        if (!error.response && error.message) {\n          if (error.message.includes('Network Error')) {\n            errorMsg = '网络连接错误，请确保后端服务正常运行并稍后重试'\n          } else if (error.message.includes('timeout')) {\n            errorMsg = '请求超时，AI生成合同可能需要较长时间，请稍后重试'\n          } else if (error.message.includes('aborted')) {\n            errorMsg = '请求被中断，请稍后重试'\n          }\n        } else if (error.response && error.response.data) {\n          if (typeof error.response.data === 'string') {\n            errorMsg = error.response.data\n          } else if (typeof error.response.data === 'object') {\n            try {\n              if (error.response.data.error) {\n                // 直接使用后端返回的错误消息\n                errorMsg = error.response.data.error\n              } else {\n                const errorDetails = Object.entries(error.response.data)\n                  .map(([key, value]) => `${key}: ${Array.isArray(value) ? value.join(', ') : value}`)\n                  .join('; ')\n                errorMsg = `提交失败: ${errorDetails}`\n              }\n            } catch (e) {\n              console.error('解析错误详情失败:', e)\n            }\n          }\n        }\n        \n        ElMessage.error(errorMsg)\n        console.log('关闭加载框...')\n        ElLoading.service().close()  // 确保加载框关闭\n      }\n    }\n    \n    // 查看合同详情\n    const viewContractDetail = (contract, index) => {\n      selectedContract.value = index\n      router.push({\n        name: 'ContractDetail',\n        params: { id: contract.id }\n      })\n    }\n    \n    // 筛选和排序变化时重新加载数据\n    const handleFilterChange = () => {\n      currentPage.value = 1 // 重置到第一页\n      loadContracts()\n    }\n    \n    // 在 script setup 部分添加处理函数\n    const handleContractTypeChange = (value) => {\n      // 如果用户选择了\"其他\"，清空当前值以允许输入\n      if (value === '其他') {\n        newContract.type = ''\n      }\n    }\n    \n    // 处理分页大小变化\n    const handleSizeChange = (newSize) => {\n      pageSize.value = newSize\n      currentPage.value = 1 // 重置到第一页\n      loadContracts()\n    }\n    \n    // 处理页码变化\n    const handleCurrentChange = (newPage) => {\n      currentPage.value = newPage\n      loadContracts()\n    }\n    \n    // 初始化加载数据\n    onMounted(() => {\n      loadContracts()\n    })\n    \n    return {\n      searchQuery,\n      filterStatus,\n      sortBy,\n      sortOrder,\n      selectedContract,\n      contracts,\n      filteredContracts,\n      showNewContractDialog,\n      creationMode,\n      newContract,\n      templateForm,\n      aiForm,\n      selectedTemplate,\n      availableTemplates,\n      isLoading,\n      isLoadingTemplates,\n      // 分页相关\n      currentPage,\n      pageSize,\n      totalItems,\n      // 图标\n      Plus,\n      Search,\n      InfoFilled,\n      // 方法\n      getStatusText,\n      openContractDialog,\n      getSubmitButtonText,\n      saveAsDraft,\n      submitContract,\n      viewContractDetail,\n      handleFilterChange,\n      handleContractTypeChange,\n      handleTemplateSelect,\n      handleSizeChange,\n      handleCurrentChange\n    }\n  }\n}\n</script>\n\n<style scoped>\n.contract-container {\n  padding: 20px;\n}\n\n.card-header-flex {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.contract-list-card {\n  display: flex;\n  flex-direction: column;\n}\n\n.contract-list {\n  flex: 1;\n  overflow-y: auto;\n  max-height: 650px;\n}\n\n.contract-item {\n  padding: 15px;\n  border-bottom: 1px solid #f0f0f0;\n  cursor: pointer;\n  transition: all 0.2s;\n  /* 在正常模式下就设置背景色，确保一致性 */\n  background-color: #f5f5f5;\n}\n\n.contract-item:hover {\n  background-color: #e8e8e8;\n}\n\n.contract-item.active {\n  background-color: #e6f2ff;\n  border-left: 3px solid #007bff;\n}\n\n.contract-title {\n  font-weight: 500;\n  color: #000;\n  margin-bottom: 5px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.contract-info {\n  color: #333;\n  font-size: 13px;\n  display: flex;\n  justify-content: space-between;\n  margin-top: 5px;\n  font-weight: 500;\n}\n\n.contract-status {\n  display: inline-block;\n  padding: 2px 8px;\n  border-radius: 12px;\n  font-size: 12px;\n}\n\n.status-draft {\n  background-color: rgba(108, 117, 125, 0.1);\n  color: #6c757d;\n}\n\n.status-pending {\n  background-color: rgba(255, 193, 7, 0.1);\n  color: #ffc107;\n}\n\n.status-signed {\n  background-color: rgba(40, 167, 69, 0.1);\n  color: #28a745;\n}\n\n.status-expired {\n  background-color: rgba(220, 53, 69, 0.1);\n  color: #dc3545;\n}\n\n.status-rejected {\n  background-color: rgba(108, 117, 125, 0.1);\n  color: #6c757d;\n}\n\n.me-2 {\n  margin-right: 8px;\n}\n\n.mt-1 {\n  margin-top: 4px;\n}\n\n.mb-3 {\n  margin-bottom: 16px;\n}\n\n.pagination-container {\n  display: flex;\n  justify-content: center;\n  margin-top: 20px;\n  padding: 10px 0;\n  border-top: 1px solid #ebeef5;\n}\n\n.template-list {\n  height: 150px;\n  overflow-y: auto;\n  border: 1px solid #ebeef5;\n  border-radius: 4px;\n}\n\n.template-item {\n  padding: 10px 15px;\n  border-bottom: 1px solid #ebeef5;\n  cursor: pointer;\n}\n\n.template-item:hover {\n  background-color: #f5f7fa;\n}\n\n.template-item.active {\n  background-color: #e6f2ff;\n  border-left: 2px solid #409eff;\n}\n\n.template-name {\n  font-weight: 500;\n  color: #343a40;\n  margin-bottom: 5px;\n}\n\n.template-info {\n  color: #6c757d;\n  font-size: 13px;\n  display: flex;\n  justify-content: space-between;\n  margin-top: 5px;\n}\n\n.template-desc {\n  color: #6c757d;\n  font-size: 12px;\n  margin-top: 5px;\n}\n\n.template-hint {\n  font-size: 13px;\n  color: #6c757d;\n  margin-top: 10px;\n}\n\n.custom-template-title {\n  font-weight: 600;\n  font-size: 14px;\n  margin-bottom: 5px;\n}\n\n.template-preview {\n  max-height: 150px;\n  overflow-y: auto;\n  border: 1px solid #ebeef5;\n  border-radius: 4px;\n  padding: 10px;\n  font-size: 13px;\n  line-height: 1.5;\n  margin-top: 5px;\n  background-color: #fafafa;\n}\n\n/* 深色模式适配 - 使用更强力的选择器 */\nhtml[data-theme=\"dark\"] body .contract-container .contract-item,\nbody.is-dark .contract-container .contract-item {\n  background-color: #f5f5f5 !important;\n  border-bottom-color: #e0e0e0 !important;\n  color: #333 !important;\n}\n\nhtml[data-theme=\"dark\"] body .contract-container .contract-item:hover,\nbody.is-dark .contract-container .contract-item:hover {\n  background-color: #e8e8e8 !important;\n}\n\nhtml[data-theme=\"dark\"] body .contract-container .contract-item.active,\nbody.is-dark .contract-container .contract-item.active {\n  background-color: #e6f2ff !important;\n  border-left-color: #409eff !important;\n}\n\nhtml[data-theme=\"dark\"] body .contract-container .contract-title,\nbody.is-dark .contract-container .contract-title {\n  color: #000 !important;\n}\n\nhtml[data-theme=\"dark\"] body .contract-container .contract-info,\nbody.is-dark .contract-container .contract-info {\n  color: #333 !important;\n}\n\nhtml[data-theme=\"dark\"] body .contract-container .contract-info span,\nbody.is-dark .contract-container .contract-info span {\n  color: #333 !important;\n}\n</style> "],"mappings":"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","ignoreList":[]}]}