{"remainingRequest":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\smartdoc\\Index.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\smartdoc\\Index.vue","mtime":1749015238197},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\babel.config.js","mtime":1748077811200},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1746431218000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc2V0LmRpZmZlcmVuY2UudjIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zZXQuaW50ZXJzZWN0aW9uLnYyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc2V0LmlzLWRpc2pvaW50LWZyb20udjIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zZXQuaXMtc3Vic2V0LW9mLnYyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc2V0LmlzLXN1cGVyc2V0LW9mLnYyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc2V0LnN5bW1ldHJpYy1kaWZmZXJlbmNlLnYyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc2V0LnVuaW9uLnYyLmpzIjsKaW1wb3J0IHsgcmVmLCBjb21wdXRlZCwgb25Nb3VudGVkLCBuZXh0VGljaywgZ2V0Q3VycmVudEluc3RhbmNlLCBwcm92aWRlLCBvbkFjdGl2YXRlZCwgd2F0Y2ggfSBmcm9tICd2dWUnOwppbXBvcnQgeyB1c2VSb3V0ZXIsIHVzZVJvdXRlIH0gZnJvbSAndnVlLXJvdXRlcic7CmltcG9ydCB7IEVsTWVzc2FnZSwgRWxNZXNzYWdlQm94IH0gZnJvbSAnZWxlbWVudC1wbHVzJzsKaW1wb3J0IHsgU2VhcmNoLCBQbHVzLCBFZGl0UGVuLCBTaGFyZSwgRm9sZGVyLCBDbG9zZSwgTW9yZSwgRG9jdW1lbnQgfSBmcm9tICdAZWxlbWVudC1wbHVzL2ljb25zLXZ1ZSc7CmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7CmltcG9ydCB7IGdldERvY3VtZW50cywgZ2V0UmVjZW50RG9jdW1lbnRzLCBnZXRTaGFyZWREb2N1bWVudHMsIGdldERvY3VtZW50Q2F0ZWdvcmllcywgY3JlYXRlRG9jdW1lbnQsIGRlbGV0ZURvY3VtZW50IGFzIGFwaURlbGV0ZURvY3VtZW50LCBzaGFyZURvY3VtZW50IGFzIGFwaVNoYXJlRG9jdW1lbnQsIGNyZWF0ZURvY3VtZW50Q2F0ZWdvcnksIHVwZGF0ZURvY3VtZW50Q2F0ZWdvcnksIGRlbGV0ZURvY3VtZW50Q2F0ZWdvcnksIGFpR2VuZXJhdGVEb2N1bWVudCB9IGZyb20gJ0AvYXBpL3NtYXJ0ZG9jJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdTbWFydERvY0hvbWUnLAogIGNvbXBvbmVudHM6IHsKICAgIFNlYXJjaCwKICAgIFBsdXMsCiAgICBFZGl0UGVuLAogICAgU2hhcmUsCiAgICBGb2xkZXIsCiAgICBDbG9zZSwKICAgIE1vcmUsCiAgICBEb2N1bWVudAogIH0sCiAgc2V0dXAoKSB7CiAgICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTsKICAgIGNvbnN0IHJvdXRlID0gdXNlUm91dGUoKTsKICAgIGNvbnN0IHsKICAgICAgcHJveHkKICAgIH0gPSBnZXRDdXJyZW50SW5zdGFuY2UoKTsgLy8g6I635Y+W57uE5Lu25a6e5L6LCgogICAgLy8g5Yi35paw6Kem5Y+R5Zmo77yM55So5LqO5by65Yi257uE5Lu25Yi35pawCiAgICBjb25zdCByZWZyZXNoVHJpZ2dlciA9IHJlZihEYXRlLm5vdygpKTsKCiAgICAvLyDnirbmgIHmlbDmja4KICAgIGNvbnN0IGRvY3VtZW50cyA9IHJlZihbXSk7CiAgICBjb25zdCByZWNlbnREb2N1bWVudHMgPSByZWYoW10pOwogICAgY29uc3Qgc2hhcmVkRG9jdW1lbnRzID0gcmVmKFtdKTsKICAgIGNvbnN0IGRvY3VtZW50Q2F0ZWdvcmllcyA9IHJlZihbXSk7CiAgICBjb25zdCBzZWFyY2hRdWVyeSA9IHJlZignJyk7CiAgICBjb25zdCBzZWFyY2hDYXRlZ29yeSA9IHJlZignYWxsJyk7CiAgICBjb25zdCBuZXdEb2N1bWVudERpYWxvZ1Zpc2libGUgPSByZWYoZmFsc2UpOwogICAgY29uc3Qgc2hhcmVEaWFsb2dWaXNpYmxlID0gcmVmKGZhbHNlKTsKICAgIGNvbnN0IGRlbGV0ZURpYWxvZ1Zpc2libGUgPSByZWYoZmFsc2UpOwogICAgY29uc3QgZG9jdW1lbnRDcmVhdGVUeXBlID0gcmVmKCdibGFuaycpOwogICAgY29uc3Qgc2VsZWN0ZWREb2N1bWVudCA9IHJlZihudWxsKTsKICAgIGNvbnN0IHNlbGVjdGVkVXNlcnMgPSByZWYoW10pOwogICAgY29uc3QgYXZhaWxhYmxlVXNlcnMgPSByZWYoW10pOwogICAgY29uc3QgY3JlYXRlTG9hZGluZyA9IHJlZihmYWxzZSk7CiAgICBjb25zdCBzaGFyZUxvYWRpbmcgPSByZWYoZmFsc2UpOwogICAgY29uc3QgZGVsZXRlTG9hZGluZyA9IHJlZihmYWxzZSk7CiAgICBjb25zdCBsb2FkaW5nTW9yZSA9IHJlZihmYWxzZSk7CgogICAgLy8g5paw5aKe5YiG6aG155u45YWz54q25oCBCiAgICBjb25zdCBwYWdlID0gcmVmKDEpOwogICAgY29uc3QgcGFnZVNpemUgPSAxMDsKICAgIGNvbnN0IGhhc01vcmUgPSByZWYodHJ1ZSk7CiAgICBjb25zdCB0b3RhbENvdW50ID0gcmVmKDApOwoKICAgIC8vIOihqOWNleaVsOaNrgogICAgY29uc3QgbmV3RG9jdW1lbnRGb3JtID0gcmVmKHsKICAgICAgdGl0bGU6ICcnLAogICAgICB0eXBlOiAnJwogICAgfSk7CiAgICBjb25zdCBhaURvY3VtZW50Rm9ybSA9IHJlZih7CiAgICAgIHRpdGxlOiAnJywKICAgICAgcmVxdWlyZW1lbnRzOiAnJwogICAgfSk7CgogICAgLy8g6KGo5Y2V5qCh6aqM6KeE5YiZCiAgICBjb25zdCBibGFua0Zvcm1SdWxlcyA9IHsKICAgICAgdGl0bGU6IFt7CiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeaWh+aho+agh+mimCcsCiAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgIH0sIHsKICAgICAgICBtaW46IDIsCiAgICAgICAgbWF4OiA1MCwKICAgICAgICBtZXNzYWdlOiAn6ZW/5bqm5ZyoIDIg5YiwIDUwIOS4quWtl+espicsCiAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgIH1dCiAgICB9OwogICAgY29uc3QgYWlGb3JtUnVsZXMgPSB7CiAgICAgIHRpdGxlOiBbewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXmlofmoaPkuLvpopgnLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9LCB7CiAgICAgICAgbWluOiAyLAogICAgICAgIG1heDogNTAsCiAgICAgICAgbWVzc2FnZTogJ+mVv+W6puWcqCAyIOWIsCA1MCDkuKrlrZfnrKYnLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9XSwKICAgICAgcmVxdWlyZW1lbnRzOiBbewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXmlofmoaPopoHmsYInLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9LCB7CiAgICAgICAgbWluOiAxMCwKICAgICAgICBtYXg6IDUwMCwKICAgICAgICBtZXNzYWdlOiAn6ZW/5bqm5ZyoIDEwIOWIsCA1MDAg5Liq5a2X56ymJywKICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgfV0KICAgIH07CiAgICBjb25zdCBibGFua0Zvcm1SZWYgPSByZWYobnVsbCk7CiAgICBjb25zdCBhaUZvcm1SZWYgPSByZWYobnVsbCk7CgogICAgLy8g6K6h566X5bGe5oCnCiAgICBjb25zdCB0b3RhbERvY3VtZW50cyA9IGNvbXB1dGVkKCgpID0+IHsKICAgICAgcmV0dXJuIHRvdGFsQ291bnQudmFsdWUgfHwgZG9jdW1lbnRzLnZhbHVlLmxlbmd0aCB8fCAwOwogICAgfSk7CiAgICBjb25zdCByZWNlbnRFZGl0Q291bnQgPSBjb21wdXRlZCgoKSA9PiB7CiAgICAgIHJldHVybiByZWNlbnREb2N1bWVudHMudmFsdWUubGVuZ3RoIHx8IDA7CiAgICB9KTsKCiAgICAvLyDliIbnsbvnrqHnkIbnm7jlhbPnirbmgIEKICAgIGNvbnN0IGNhdGVnb3J5RGlhbG9nVmlzaWJsZSA9IHJlZihmYWxzZSk7CiAgICBjb25zdCBlZGl0aW5nQ2F0ZWdvcnkgPSByZWYoewogICAgICBuYW1lOiAnJywKICAgICAgY29sb3I6ICcjNDA5RUZGJywKICAgICAgZGVzY3JpcHRpb246ICcnCiAgICB9KTsKICAgIGNvbnN0IGNhdGVnb3J5Rm9ybVJlZiA9IHJlZihudWxsKTsKICAgIGNvbnN0IGNhdGVnb3J5TG9hZGluZyA9IHJlZihmYWxzZSk7CiAgICBjb25zdCBjYXRlZ29yeUZvcm1SdWxlcyA9IHsKICAgICAgbmFtZTogW3sKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl57G75Z6L5ZCN56ewJywKICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgfSwgewogICAgICAgIG1pbjogMiwKICAgICAgICBtYXg6IDIwLAogICAgICAgIG1lc3NhZ2U6ICfplb/luqblnKgy5YiwMjDkuKrlrZfnrKYnLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9XSwKICAgICAgY29sb3I6IFt7CiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgbWVzc2FnZTogJ+ivt+mAieaLqeminOiJsicsCiAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgfV0KICAgIH07CgogICAgLy8g6L6F5Yqp5pa55rOV77ya5by65Yi25Yi35paw6KeG5Zu+CiAgICBjb25zdCBmb3JjZVVwZGF0ZSA9IGFzeW5jICgpID0+IHsKICAgICAgLy8g5Yib5bu65Li05pe25pWw5o2u77yM6Kem5Y+R5rex5bqm5ZON5bqU5byP5pu05pawCiAgICAgIGRvY3VtZW50cy52YWx1ZSA9IFsuLi5kb2N1bWVudHMudmFsdWVdOwogICAgICByZWNlbnREb2N1bWVudHMudmFsdWUgPSBbLi4ucmVjZW50RG9jdW1lbnRzLnZhbHVlXTsKICAgICAgc2hhcmVkRG9jdW1lbnRzLnZhbHVlID0gWy4uLnNoYXJlZERvY3VtZW50cy52YWx1ZV07CgogICAgICAvLyDkvb/nlKhWdWXlrp7kvovnmoQkZm9yY2VVcGRhdGXmlrnms5UKICAgICAgaWYgKHByb3h5ICYmIHByb3h5LiRmb3JjZVVwZGF0ZSkgewogICAgICAgIHByb3h5LiRmb3JjZVVwZGF0ZSgpOwogICAgICB9CgogICAgICAvLyDnrYnlvoVET03mm7TmlrAKICAgICAgYXdhaXQgbmV4dFRpY2soKTsKICAgIH07CgogICAgLy8g5pa55rOVCiAgICBjb25zdCBmZXRjaERvY3VtZW50cyA9IGFzeW5jIChmb3JjZVJlZnJlc2ggPSBmYWxzZSwgYXBwZW5kID0gZmFsc2UpID0+IHsKICAgICAgaWYgKGZvcmNlUmVmcmVzaCkgewogICAgICAgIHBhZ2UudmFsdWUgPSAxOwogICAgICAgIGhhc01vcmUudmFsdWUgPSB0cnVlOwogICAgICB9CiAgICAgIGlmICghaGFzTW9yZS52YWx1ZSAmJiAhZm9yY2VSZWZyZXNoKSByZXR1cm47CiAgICAgIGlmICghYXBwZW5kKSB7CiAgICAgICAgY3JlYXRlTG9hZGluZy52YWx1ZSA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9hZGluZ01vcmUudmFsdWUgPSB0cnVlOwogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcGFyYW1zID0gewogICAgICAgICAgcGFnZTogcGFnZS52YWx1ZSwKICAgICAgICAgIGxpbWl0OiAxMDAsCiAgICAgICAgICAvLyDlsJ3or5Xor7fmsYLmm7TlpJrmlbDmja7vvIzlsL3nrqHlkI7nq6/lj6/og73pmZDliLbkuLoxMOadoQogICAgICAgICAgX3Q6IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8vIOa3u+WKoOaXtumXtOaIs++8jOehruS/neS4jeS9v+eUqOe8k+WtmAogICAgICAgIH07CgogICAgICAgIC8vIOWPquacieWcqHNlYXJjaENhdGVnb3J55LiN5Li6J2FsbCfkuJTmnInlgLzml7bmiY3mt7vliqBjYXRlZ29yeeWPguaVsAogICAgICAgIGlmIChzZWFyY2hDYXRlZ29yeS52YWx1ZSAmJiBzZWFyY2hDYXRlZ29yeS52YWx1ZSAhPT0gJ2FsbCcpIHsKICAgICAgICAgIHBhcmFtcy5jYXRlZ29yeSA9IHNlYXJjaENhdGVnb3J5LnZhbHVlOwogICAgICAgICAgY29uc29sZS5sb2coJ+a3u+WKoOWIhuexu+etm+mAieWPguaVsDonLCBzZWFyY2hDYXRlZ29yeS52YWx1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCfojrflj5blhajpg6jmlofmoaPvvIzkuI3mt7vliqDliIbnsbvnrZvpgIknKTsKICAgICAgICB9CiAgICAgICAgaWYgKHNlYXJjaFF1ZXJ5LnZhbHVlKSB7CiAgICAgICAgICBwYXJhbXMuc2VhcmNoID0gc2VhcmNoUXVlcnkudmFsdWU7CiAgICAgICAgfQogICAgICAgIGNvbnNvbGUubG9nKCfmraPlnKjojrflj5bmlofmoaPliJfooajvvIzlj4LmlbA6JywgSlNPTi5zdHJpbmdpZnkocGFyYW1zKSk7CiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZ2V0RG9jdW1lbnRzKHBhcmFtcyk7CiAgICAgICAgY29uc29sZS5sb2coJ+iOt+WPluaWh+aho+WTjeW6lDonLCByZXMpOwogICAgICAgIGlmIChyZXMgJiYgcmVzLmRhdGEpIHsKICAgICAgICAgIC8vIOWkhOeQhuWIhumhteagvOW8j++8jOWPr+iDveaYr0RSRuagh+WHhuagvOW8j+aIluiHquWumuS5ieagvOW8jwogICAgICAgICAgbGV0IGxpc3QgPSBbXTsKICAgICAgICAgIGxldCB0b3RhbCA9IDA7CiAgICAgICAgICBsZXQgbmV4dFBhZ2UgPSBmYWxzZTsKCiAgICAgICAgICAvLyBEUkbmoIflh4bliIbpobXmoLzlvI8KICAgICAgICAgIGlmIChyZXMucmVzdWx0cyAmJiBBcnJheS5pc0FycmF5KHJlcy5yZXN1bHRzKSkgewogICAgICAgICAgICBsaXN0ID0gcmVzLnJlc3VsdHM7CiAgICAgICAgICAgIHRvdGFsID0gcmVzLmNvdW50IHx8IDA7CiAgICAgICAgICAgIG5leHRQYWdlID0gISFyZXMubmV4dDsKICAgICAgICAgICAgY29uc29sZS5sb2coYERSRuWIhumhteagvOW8j++8muiOt+WPluWIsCR7bGlzdC5sZW5ndGh95Liq5paH5qGj77yM5oC75pWwOiR7dG90YWx9YCk7CiAgICAgICAgICB9CiAgICAgICAgICAvLyDlpoLmnpzliY3nq69yZXF1ZXN0Lmpz5bey57uP5aSE55CG5LqG5YiG6aG1CiAgICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHJlcy5kYXRhKSkgewogICAgICAgICAgICBsaXN0ID0gcmVzLmRhdGE7CiAgICAgICAgICAgIHRvdGFsID0gcmVzLmNvdW50IHx8IHJlcy50b3RhbCB8fCBsaXN0Lmxlbmd0aDsKICAgICAgICAgICAgbmV4dFBhZ2UgPSBsaXN0Lmxlbmd0aCA+IDAgJiYgZG9jdW1lbnRzLnZhbHVlLmxlbmd0aCArIGxpc3QubGVuZ3RoIDwgdG90YWw7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDmlbDnu4TmoLzlvI/vvJrojrflj5bliLAke2xpc3QubGVuZ3RofeS4quaWh+aho++8jOaAu+aVsDoke3RvdGFsfWApOwogICAgICAgICAgfQogICAgICAgICAgLy8g5aaC5p6c5piv55u05o6l5YyF6KOF55qE5pWw57uE5oiW5a+56LGhCiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgbGlzdCA9IEFycmF5LmlzQXJyYXkocmVzLmRhdGEpID8gcmVzLmRhdGEgOiBbcmVzLmRhdGFdOwogICAgICAgICAgICB0b3RhbCA9IHJlcy5jb3VudCB8fCByZXMudG90YWwgfHwgbGlzdC5sZW5ndGg7CiAgICAgICAgICAgIG5leHRQYWdlID0gbGlzdC5sZW5ndGggPiAwICYmIGRvY3VtZW50cy52YWx1ZS5sZW5ndGggKyBsaXN0Lmxlbmd0aCA8IHRvdGFsOwogICAgICAgICAgICBjb25zb2xlLmxvZyhg5a+56LGh5qC85byP77ya6I635Y+W5YiwJHtsaXN0Lmxlbmd0aH3kuKrmlofmoaPvvIzmgLvmlbA6JHt0b3RhbH1gKTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyDnoa7kv53kuI3mt7vliqDph43lpI3nmoTmlofmoaMKICAgICAgICAgIGlmIChhcHBlbmQgJiYgZG9jdW1lbnRzLnZhbHVlLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdJZHMgPSBuZXcgU2V0KGRvY3VtZW50cy52YWx1ZS5tYXAoZG9jID0+IGRvYy5pZCkpOwogICAgICAgICAgICBsaXN0ID0gbGlzdC5maWx0ZXIoZG9jID0+ICFleGlzdGluZ0lkcy5oYXMoZG9jLmlkKSk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDov4fmu6Tph43lpI3pobnlkI7ov5jmnIkke2xpc3QubGVuZ3RofeS4quaWsOaWh+aho2ApOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGFwcGVuZCkgewogICAgICAgICAgICAvLyDlsIbmlrDmlbDmja7mt7vliqDliLDnjrDmnInmlbDnu4QKICAgICAgICAgICAgZG9jdW1lbnRzLnZhbHVlID0gWy4uLmRvY3VtZW50cy52YWx1ZSwgLi4ubGlzdF07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyDopobnm5bnjrDmnInmlbDnu4QKICAgICAgICAgICAgZG9jdW1lbnRzLnZhbHVlID0gWy4uLmxpc3RdOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIOiuvue9ruaAu+aVsAogICAgICAgICAgdG90YWxDb3VudC52YWx1ZSA9IHRvdGFsOwoKICAgICAgICAgIC8vIOWIpOaWreaYr+WQpui/mOacieabtOWkmumhtemdouWPr+WKoOi9vQogICAgICAgICAgaGFzTW9yZS52YWx1ZSA9IG5leHRQYWdlIHx8IGRvY3VtZW50cy52YWx1ZS5sZW5ndGggPCB0b3RhbCAmJiBsaXN0Lmxlbmd0aCA+IDA7CgogICAgICAgICAgLy8g6LCD6K+V5L+h5oGvCiAgICAgICAgICBjb25zb2xlLmxvZyhg5bey5Yqg6L29JHtkb2N1bWVudHMudmFsdWUubGVuZ3RofS8ke3RvdGFsfeS4quaWh+ahoywg5piv5ZCm5pyJ5pu05aSaOmAsIGhhc01vcmUudmFsdWUsICcobmV4dFBhZ2U6JywgbmV4dFBhZ2UsICcpJyk7CgogICAgICAgICAgLy8g5aaC5p6c5pWw5o2u5LiN6Laz5LiU6L+Y5pyJ5pu05aSa77yM6Ieq5Yqo5Yqg6L295LiL5LiA6aG1CiAgICAgICAgICBpZiAoaGFzTW9yZS52YWx1ZSAmJiBkb2N1bWVudHMudmFsdWUubGVuZ3RoIDwgNTAgJiYgIWxvYWRpbmdNb3JlLnZhbHVlKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCLmlbDmja7kuI3otrPvvIzoh6rliqjliqDovb3kuIvkuIDpobUiKTsKICAgICAgICAgICAgcGFnZS52YWx1ZSsrOwogICAgICAgICAgICAvLyDlu7bov58xMDBtc+mBv+WFjeivt+axgui/h+S6jumikee5gQogICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwKSk7CiAgICAgICAgICAgIGF3YWl0IGZldGNoRG9jdW1lbnRzKGZhbHNlLCB0cnVlKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS53YXJuKCdBUEnov5Tlm57nmoTmlofmoaPmlbDmja7ml6DmlYg6JywgcmVzKTsKICAgICAgICAgIGlmICghYXBwZW5kKSB7CiAgICAgICAgICAgIGRvY3VtZW50cy52YWx1ZSA9IFtdOwogICAgICAgICAgfQogICAgICAgICAgaGFzTW9yZS52YWx1ZSA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfojrflj5bmlofmoaPliJfooajlpLHotKU6JywgZXJyb3IpOwogICAgICAgIEVsTWVzc2FnZS5lcnJvcign6I635Y+W5paH5qGj5YiX6KGo5aSx6LSl77yM6K+35Yi35paw6aG16Z2i6YeN6K+VJyk7CiAgICAgICAgaWYgKCFhcHBlbmQpIHsKICAgICAgICAgIGRvY3VtZW50cy52YWx1ZSA9IFtdOwogICAgICAgIH0KICAgICAgICBoYXNNb3JlLnZhbHVlID0gZmFsc2U7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgY3JlYXRlTG9hZGluZy52YWx1ZSA9IGZhbHNlOwogICAgICAgIGxvYWRpbmdNb3JlLnZhbHVlID0gZmFsc2U7CiAgICAgIH0KICAgIH07CiAgICBjb25zdCBmZXRjaFJlY2VudERvY3VtZW50cyA9IGFzeW5jIChmb3JjZVJlZnJlc2ggPSBmYWxzZSkgPT4gewogICAgICBjb25zb2xlLmxvZygn5byA5aeL6I635Y+W5pyA6L+R5paH5qGjLi4uJyk7CiAgICAgIHRyeSB7CiAgICAgICAgLy8g5YeG5aSH5Y+C5pWw77yM5aaC5p6c5by65Yi25Yi35paw5re75Yqg5pe26Ze05oizCiAgICAgICAgY29uc3QgcGFyYW1zID0gZm9yY2VSZWZyZXNoID8gewogICAgICAgICAgX3Q6IG5ldyBEYXRlKCkuZ2V0VGltZSgpCiAgICAgICAgfSA6IHt9OwogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGdldFJlY2VudERvY3VtZW50cyhwYXJhbXMpOwogICAgICAgIGNvbnNvbGUubG9nKCfmnIDov5HmlofmoaNBUEnlk43lupQ6JywgcmVzKTsKICAgICAgICBpZiAocmVzICYmIHJlcy5kYXRhKSB7CiAgICAgICAgICAvLyDlrozlhajmm7/mjaLmlbDnu4TogIzkuI3mmK/kv67mlLnlvJXnlKgKICAgICAgICAgIHJlY2VudERvY3VtZW50cy52YWx1ZSA9IEFycmF5LmlzQXJyYXkocmVzLmRhdGEpID8gWy4uLnJlcy5kYXRhXSA6IFtdOwogICAgICAgICAgY29uc29sZS5sb2coYOiuvue9ruacgOi/keaWh+ahozogJHtyZWNlbnREb2N1bWVudHMudmFsdWUubGVuZ3RofeadoeiusOW9lWApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLndhcm4oJ0FQSei/lOWbnueahOacgOi/keaWh+aho+aVsOaNruaXoOaViDonLCByZXMpOwogICAgICAgICAgcmVjZW50RG9jdW1lbnRzLnZhbHVlID0gW107CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+iOt+WPluacgOi/keaWh+aho+Wksei0pTonLCBlcnJvcik7CiAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfojrflj5bmnIDov5HmlofmoaPlpLHotKUnKTsKICAgICAgICByZWNlbnREb2N1bWVudHMudmFsdWUgPSBbXTsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IGZldGNoU2hhcmVkRG9jdW1lbnRzID0gYXN5bmMgKCkgPT4gewogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ2V0U2hhcmVkRG9jdW1lbnRzKCk7CiAgICAgICAgc2hhcmVkRG9jdW1lbnRzLnZhbHVlID0gcmVzcG9uc2UuZGF0YTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfojrflj5blhbHkuqvmlofmoaPlpLHotKUnLCBlcnJvcik7CiAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfojrflj5blhbHkuqvmlofmoaPlpLHotKUnKTsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IGZldGNoRG9jdW1lbnRDYXRlZ29yaWVzID0gYXN5bmMgKHJldHJ5Q291bnQgPSAwKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKCflvIDlp4vojrflj5bmlofmoaPliIbnsbsuLi4nKTsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBnZXREb2N1bWVudENhdGVnb3JpZXMoKTsKICAgICAgICBjb25zb2xlLmxvZygn5paH5qGj5YiG57G7QVBJ5ZON5bqUOicsIHJlcyk7CiAgICAgICAgaWYgKHJlcyAmJiByZXMuZGF0YSkgewogICAgICAgICAgZG9jdW1lbnRDYXRlZ29yaWVzLnZhbHVlID0gcmVzLmRhdGE7CiAgICAgICAgICBjb25zb2xlLmxvZyhg6K6+572u5paH5qGj5YiG57G7OiAke2RvY3VtZW50Q2F0ZWdvcmllcy52YWx1ZS5sZW5ndGh95p2h6K6w5b2VLCDmlbDmja46YCwgZG9jdW1lbnRDYXRlZ29yaWVzLnZhbHVlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS53YXJuKCdBUEnov5Tlm57nmoTmlofmoaPliIbnsbvmlbDmja7ml6DmlYg6JywgcmVzKTsKICAgICAgICAgIGRvY3VtZW50Q2F0ZWdvcmllcy52YWx1ZSA9IFtdOwoKICAgICAgICAgIC8vIOWmguaenOi/lOWbnuepuuaVsOaNruS4lOacqui+vuWIsOacgOWkp+mHjeivleasoeaVsO+8jOWwneivlemHjeivlQogICAgICAgICAgaWYgKGRvY3VtZW50Q2F0ZWdvcmllcy52YWx1ZS5sZW5ndGggPT09IDAgJiYgcmV0cnlDb3VudCA8IDIpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coYOaWh+aho+WIhuexu+aVsOaNruS4uuepuu+8jCR7cmV0cnlDb3VudCArIDF956eS5ZCO6YeN6K+VLi4uYCk7CiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gZmV0Y2hEb2N1bWVudENhdGVnb3JpZXMocmV0cnlDb3VudCArIDEpLCAocmV0cnlDb3VudCArIDEpICogMTAwMCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+iOt+WPluaWh+aho+WIhuexu+Wksei0pTonLCBlcnJvcik7CgogICAgICAgIC8vIOWmguaenOaYr+acjeWKoeWZqOmUmeivr+S4lOacqui+vuWIsOacgOWkp+mHjeivleasoeaVsO+8jOWwneivlemHjeivlQogICAgICAgIGlmIChlcnJvci5yZXNwb25zZSAmJiBlcnJvci5yZXNwb25zZS5zdGF0dXMgPj0gNTAwICYmIHJldHJ5Q291bnQgPCAyKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhg5pyN5Yqh5Zmo6ZSZ6K+v77yMJHtyZXRyeUNvdW50ICsgMX3np5LlkI7ph43or5UuLi5gKTsKICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gZmV0Y2hEb2N1bWVudENhdGVnb3JpZXMocmV0cnlDb3VudCArIDEpLCAocmV0cnlDb3VudCArIDEpICogMTAwMCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcign6I635Y+W5paH5qGj5YiG57G75aSx6LSl77yM6K+35Yi35paw6aG16Z2i6YeN6K+VJyk7CiAgICAgICAgICAvLyDliJ3lp4vljJbnqbrmlbDnu4QKICAgICAgICAgIGRvY3VtZW50Q2F0ZWdvcmllcy52YWx1ZSA9IFtdOwogICAgICAgIH0KICAgICAgfQogICAgfTsKCiAgICAvLyDpmLLmipbmkJzntKIKICAgIGNvbnN0IGRlYm91bmNlZFNlYXJjaCA9IF8uZGVib3VuY2UoYXN5bmMgKCkgPT4gewogICAgICBwYWdlLnZhbHVlID0gMTsKICAgICAgaGFzTW9yZS52YWx1ZSA9IHRydWU7CiAgICAgIGF3YWl0IGZldGNoRG9jdW1lbnRzKHRydWUpOwogICAgfSwgNTAwKTsKICAgIGNvbnN0IGNyZWF0ZU5ld0RvY3VtZW50ID0gKCkgPT4gewogICAgICAvLyDph43nva7ooajljZUKICAgICAgbmV3RG9jdW1lbnRGb3JtLnZhbHVlID0gewogICAgICAgIHRpdGxlOiAnJywKICAgICAgICB0eXBlOiAnJwogICAgICB9OwogICAgICBhaURvY3VtZW50Rm9ybS52YWx1ZSA9IHsKICAgICAgICB0aXRsZTogJycsCiAgICAgICAgcmVxdWlyZW1lbnRzOiAnJwogICAgICB9OwogICAgICBkb2N1bWVudENyZWF0ZVR5cGUudmFsdWUgPSAnYmxhbmsnOwogICAgICBuZXdEb2N1bWVudERpYWxvZ1Zpc2libGUudmFsdWUgPSB0cnVlOwoKICAgICAgLy8g55uR5ZCs5a+56K+d5qGG5YWz6Zet5LqL5Lu277yM5riF55CG6KGo5Y2VCiAgICAgIG5leHRUaWNrKCgpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgY29uc3QgZGlhbG9nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVsLWRpYWxvZycpOwogICAgICAgICAgaWYgKGRpYWxvZykgewogICAgICAgICAgICBkaWFsb2cuYWRkRXZlbnRMaXN0ZW5lcignY2xvc2VkJywgKCkgPT4gewogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBpZiAoYmxhbmtGb3JtUmVmLnZhbHVlKSB7CiAgICAgICAgICAgICAgICAgIGJsYW5rRm9ybVJlZi52YWx1ZS5jbGVhclZhbGlkYXRlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoYWlGb3JtUmVmLnZhbHVlKSB7CiAgICAgICAgICAgICAgICAgIGFpRm9ybVJlZi52YWx1ZS5jbGVhclZhbGlkYXRlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjbGVhcmluZyBmb3JtIHZhbGlkYXRpb246JywgZXJyKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICBvbmNlOiB0cnVlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2V0dGluZyB1cCBkaWFsb2cgZXZlbnQgbGlzdGVuZXI6JywgZXJyKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfTsKICAgIGNvbnN0IHN1Ym1pdE5ld0RvY3VtZW50ID0gYXN5bmMgKCkgPT4gewogICAgICBpZiAoZG9jdW1lbnRDcmVhdGVUeXBlLnZhbHVlID09PSAnYmxhbmsnKSB7CiAgICAgICAgaWYgKCFibGFua0Zvcm1SZWYudmFsdWUpIHsKICAgICAgICAgIGNvbnNvbGUud2Fybign6KGo5Y2V5byV55So5LiN5a2Y5ZyoJyk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICBjb25zdCB2YWxpZCA9IGF3YWl0IGJsYW5rRm9ybVJlZi52YWx1ZS52YWxpZGF0ZSgpLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+ihqOWNlemqjOivgeWksei0pTonLCBlcnIpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9KTsKICAgICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgICBjcmVhdGVMb2FkaW5nLnZhbHVlID0gdHJ1ZTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5byA5aeL5Yib5bu65paH5qGjOicsIHsKICAgICAgICAgICAgICAgIHRpdGxlOiBuZXdEb2N1bWVudEZvcm0udmFsdWUudGl0bGUsCiAgICAgICAgICAgICAgICB0eXBlOiBuZXdEb2N1bWVudEZvcm0udmFsdWUudHlwZSB8fCAn6YCa55SoJwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY3JlYXRlRG9jdW1lbnQoewogICAgICAgICAgICAgICAgdGl0bGU6IG5ld0RvY3VtZW50Rm9ybS52YWx1ZS50aXRsZSwKICAgICAgICAgICAgICAgIHR5cGU6IG5ld0RvY3VtZW50Rm9ybS52YWx1ZS50eXBlIHx8ICfpgJrnlKgnLAogICAgICAgICAgICAgICAgY29udGVudDogJycKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5Yib5bu65paH5qGj5ZON5bqU5pWw5o2u77yaJywgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UpKTsKCiAgICAgICAgICAgICAgLy8g5YWz6Zet5a+56K+d5qGGCiAgICAgICAgICAgICAgbmV3RG9jdW1lbnREaWFsb2dWaXNpYmxlLnZhbHVlID0gZmFsc2U7CiAgICAgICAgICAgICAgRWxNZXNzYWdlLnN1Y2Nlc3MoJ+aWh+aho+WIm+W7uuaIkOWKnycpOwoKICAgICAgICAgICAgICAvLyDop6PmnpDov5Tlm57nmoTmlofmoaNJRAogICAgICAgICAgICAgIGxldCBkb2NJZCA9IG51bGw7CiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmlkKSB7CiAgICAgICAgICAgICAgICAgIGRvY0lkID0gcmVzcG9uc2UuZGF0YS5pZDsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShyZXNwb25zZS5kYXRhKSAmJiByZXNwb25zZS5kYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgZG9jSWQgPSByZXNwb25zZS5kYXRhWzBdLmlkOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLnJlc3VsdHMgJiYgQXJyYXkuaXNBcnJheShyZXNwb25zZS5kYXRhLnJlc3VsdHMpICYmIHJlc3BvbnNlLmRhdGEucmVzdWx0cy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgIGRvY0lkID0gcmVzcG9uc2UuZGF0YS5yZXN1bHRzWzBdLmlkOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgLy8g562J5b6F5a+56K+d5qGG5YWz6Zet5a6M5oiQ5ZCO5YaN5omn6KGM6Lez6L2s77yM6YG/5YWNRE9N6ZSZ6K+vCiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoZG9jSWQpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYOWHhuWkh+i3s+i9rOWIsOaWh+aho+ivpuaDhemhte+8jElEOiAke2RvY0lkfWApOwoKICAgICAgICAgICAgICAgICAgLy8g5YWI5Yi35paw5paH5qGj5YiX6KGo77yM56Gu5L+d5pWw5o2u5piv5pyA5paw55qECiAgICAgICAgICAgICAgICAgIGZldGNoRG9jdW1lbnRzKCk7CiAgICAgICAgICAgICAgICAgIGZldGNoUmVjZW50RG9jdW1lbnRzKCk7CgogICAgICAgICAgICAgICAgICAvLyDnhLblkI7lho3miafooYzlr7zoiKoKICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ1NtYXJ0RG9jRGV0YWlsJywKICAgICAgICAgICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgICAgICAgICBpZDogZG9jSWQKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZUxvYWRpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcign6Lev55Sx5a+86Iiq5aSx6LSlOicsIGVycik7CiAgICAgICAgICAgICAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+i3s+i9rOaWh+aho+ivpuaDhemhteWksei0pe+8jOivt+aJi+WKqOWIt+aWsOmhtemdoicpOwogICAgICAgICAgICAgICAgICAgICAgLy8g5bCd6K+V6Lev5b6E6Lez6L2sCiAgICAgICAgICAgICAgICAgICAgICByb3V0ZXIucHVzaChgL3NtYXJ0ZG9jLyR7ZG9jSWR9YCkuY2F0Y2gobmF2RXJyID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcign6Lev5b6E5a+86Iiq5Lmf5aSx6LSlOicsIG5hdkVycik7CiAgICAgICAgICAgICAgICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcign6Lev5b6E6Lez6L2s6K+m5oOF6aG15Lmf5aSx6LSlJyk7CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZUxvYWRpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2Fybign5Yib5bu65paH5qGj5oiQ5Yqf77yM5L2G6L+U5Zue55qE5pWw5o2u5qC85byP5LiN5q2j56GuJywgcmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAvLyDliLfmlrDmlofmoaPliJfooagKICAgICAgICAgICAgICAgICAgZmV0Y2hEb2N1bWVudHMoKTsKICAgICAgICAgICAgICAgICAgZmV0Y2hSZWNlbnREb2N1bWVudHMoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LCAxMDApOwogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WIm+W7uuaWh+aho+Wksei0pScsIGVycm9yKTsKICAgICAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+WIm+W7uuaWh+aho+Wksei0pScpOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgIGNyZWF0ZUxvYWRpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCfmj5DkuqTooajljZXml7blj5HnlJ/plJnor686JywgZXJyb3IpOwogICAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfooajljZXmj5DkuqTlpLHotKUnKTsKICAgICAgICAgIGNyZWF0ZUxvYWRpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoZG9jdW1lbnRDcmVhdGVUeXBlLnZhbHVlID09PSAnYWknKSB7CiAgICAgICAgaWYgKCFhaUZvcm1SZWYudmFsdWUpIHsKICAgICAgICAgIGNvbnNvbGUud2FybignQUnooajljZXlvJXnlKjkuI3lrZjlnKgnKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGNvbnN0IHZhbGlkID0gYXdhaXQgYWlGb3JtUmVmLnZhbHVlLnZhbGlkYXRlKCkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcignQUnooajljZXpqozor4HlpLHotKU6JywgZXJyKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgICAgY3JlYXRlTG9hZGluZy52YWx1ZSA9IHRydWU7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgLy8g6LCD55SoQUnnlJ/miJDmlofmoaNBUEkKICAgICAgICAgICAgICBjb25zdCBjYXRlZ29yeUlkID0gc2VhcmNoQ2F0ZWdvcnkudmFsdWUgIT09ICdhbGwnID8gc2VhcmNoQ2F0ZWdvcnkudmFsdWUgOiBudWxsOwogICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYWlHZW5lcmF0ZURvY3VtZW50KHsKICAgICAgICAgICAgICAgIHRpdGxlOiBhaURvY3VtZW50Rm9ybS52YWx1ZS50aXRsZSwKICAgICAgICAgICAgICAgIHJlcXVpcmVtZW50OiBhaURvY3VtZW50Rm9ybS52YWx1ZS5yZXF1aXJlbWVudHMsCiAgICAgICAgICAgICAgICBjYXRlZ29yeV9pZDogY2F0ZWdvcnlJZCwKICAgICAgICAgICAgICAgIGRvY190eXBlOiAnQUknCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0FJ55Sf5oiQ5paH5qGj5ZON5bqU5pWw5o2u77yaJywgcmVzcG9uc2UpOwogICAgICAgICAgICAgIC8vIOajgOafpei2heaXtgogICAgICAgICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5zdGF0dXMgPT09IDUwNCkgewogICAgICAgICAgICAgICAgdmFyIF9yZXNwb25zZSRkYXRhOwogICAgICAgICAgICAgICAgRWxNZXNzYWdlLmVycm9yKCgoX3Jlc3BvbnNlJGRhdGEgPSByZXNwb25zZS5kYXRhKSA9PT0gbnVsbCB8fCBfcmVzcG9uc2UkZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Jlc3BvbnNlJGRhdGEuZGV0YWlsKSB8fCAnQUnnlJ/miJDotoXml7bvvIzor7fnroDljJbpnIDmsYLmiJbnqI3lkI7ph43or5UnKTsKICAgICAgICAgICAgICAgIGNyZWF0ZUxvYWRpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLmRhdGEgJiYgdHlwZW9mIHJlc3BvbnNlLmRhdGEuZGV0YWlsID09PSAnc3RyaW5nJyAmJiByZXNwb25zZS5kYXRhLmRldGFpbC5pbmNsdWRlcygn6LaF5pe2JykpIHsKICAgICAgICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcihyZXNwb25zZS5kYXRhLmRldGFpbCk7CiAgICAgICAgICAgICAgICBjcmVhdGVMb2FkaW5nLnZhbHVlID0gZmFsc2U7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIG5ld0RvY3VtZW50RGlhbG9nVmlzaWJsZS52YWx1ZSA9IGZhbHNlOwogICAgICAgICAgICAgIEVsTWVzc2FnZS5zdWNjZXNzKCdBSeeUn+aIkOaWh+aho+aIkOWKnycpOwogICAgICAgICAgICAgIGxldCBkb2NJZCA9IG51bGw7CiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLmRhdGEgJiYgcmVzcG9uc2UuZGF0YS5pZCkgewogICAgICAgICAgICAgICAgZG9jSWQgPSByZXNwb25zZS5kYXRhLmlkOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoZG9jSWQpIHsKICAgICAgICAgICAgICAgIC8vIOi3s+i9rOWJjeaJk+WNsOaXpeW/lwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+WHhuWkh+i3s+i9rOWIsOaWh+aho+ivpuaDhemhte+8jOi3r+eUseWQjTogU21hcnREb2NEZXRhaWwsIGlkOicsIGRvY0lkKTsKICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgbmFtZTogJ1NtYXJ0RG9jRGV0YWlsJywKICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IFN0cmluZyhkb2NJZCkKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgIGNyZWF0ZUxvYWRpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+i3r+eUseWvvOiIquWksei0pTonLCBlcnIpOwogICAgICAgICAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+i3s+i9rOaWh+aho+ivpuaDhemhteWksei0pe+8jOivt+aJi+WKqOWIt+aWsOmhtemdoicpOwogICAgICAgICAgICAgICAgICAvLyDlsJ3or5Xot6/lvoTot7PovawKICAgICAgICAgICAgICAgICAgcm91dGVyLnB1c2goYC9zbWFydGRvYy8ke2RvY0lkfWApLmNhdGNoKG5hdkVyciA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcign6Lev5b6E5a+86Iiq5Lmf5aSx6LSlOicsIG5hdkVycik7CiAgICAgICAgICAgICAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfot6/lvoTot7Povazor6bmg4XpobXkuZ/lpLHotKUnKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIGNyZWF0ZUxvYWRpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgLy8g5byC5q2l5Yi35paw5pWw5o2uCiAgICAgICAgICAgICAgICBmZXRjaERvY3VtZW50cygpOwogICAgICAgICAgICAgICAgZmV0Y2hSZWNlbnREb2N1bWVudHMoKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZmV0Y2hEb2N1bWVudHMoKTsKICAgICAgICAgICAgICAgIGZldGNoUmVjZW50RG9jdW1lbnRzKCk7CiAgICAgICAgICAgICAgICBjcmVhdGVMb2FkaW5nLnZhbHVlID0gZmFsc2U7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FJ55Sf5oiQ5paH5qGj5aSx6LSlJywgZXJyb3IpOwogICAgICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcignQUnnlJ/miJDmlofmoaPlpLHotKUnKTsKICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICBjcmVhdGVMb2FkaW5nLnZhbHVlID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgY29uc29sZS5lcnJvcign5o+Q5LqkQUnooajljZXml7blj5HnlJ/plJnor686JywgZXJyb3IpOwogICAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfooajljZXmj5DkuqTlpLHotKUnKTsKICAgICAgICAgIGNyZWF0ZUxvYWRpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgICBjb25zdCBvcGVuRG9jdW1lbnQgPSBkb2MgPT4gewogICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogJ1NtYXJ0RG9jRGV0YWlsJywKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIGlkOiBkb2MuaWQKICAgICAgICB9CiAgICAgIH0pOwogICAgfTsKICAgIGNvbnN0IHJlbmFtZURvY3VtZW50ID0gZG9jID0+IHsKICAgICAgRWxNZXNzYWdlQm94LnByb21wdCgn6K+36L6T5YWl5paw5paH5qGj5ZCN56ewJywgJ+mHjeWRveWQjeaWh+ahoycsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgaW5wdXRWYWx1ZTogZG9jLnRpdGxlLAogICAgICAgIGlucHV0VmFsaWRhdG9yOiB2YWx1ZSA9PiB7CiAgICAgICAgICBpZiAoIXZhbHVlKSB7CiAgICAgICAgICAgIHJldHVybiAn5paH5qGj5ZCN56ew5LiN6IO95Li656m6JzsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgfSkudGhlbigoewogICAgICAgIHZhbHVlCiAgICAgIH0pID0+IHsKICAgICAgICAvLyDmraTlpITlupTor6XosIPnlKjmm7TmlrDmlofmoaNBUEkKICAgICAgICBFbE1lc3NhZ2UuaW5mbyhg6YeN5ZG95ZCN5paH5qGj5Li6OiAke3ZhbHVlfWApOwogICAgICB9KS5jYXRjaCgoKSA9PiB7fSk7CiAgICB9OwogICAgY29uc3QgZHVwbGljYXRlRG9jdW1lbnQgPSBkb2MgPT4gewogICAgICBFbE1lc3NhZ2UuaW5mbyhg5aSN5Yi25paH5qGjOiAke2RvYy50aXRsZX1gKTsKICAgIH07CiAgICBjb25zdCBzaGFyZURvY3VtZW50ID0gZG9jID0+IHsKICAgICAgc2VsZWN0ZWREb2N1bWVudC52YWx1ZSA9IGRvYzsKICAgICAgLy8g5Zyo5a6e6ZmF6aG555uu5Lit77yM6L+Z6YeM5bqU6K+l5LuOQVBJ6I635Y+W5Y+v55So55So5oi35YiX6KGoCiAgICAgIGF2YWlsYWJsZVVzZXJzLnZhbHVlID0gW3sKICAgICAgICBpZDogMSwKICAgICAgICB1c2VybmFtZTogJ+W8oOS4iScKICAgICAgfSwgewogICAgICAgIGlkOiAyLAogICAgICAgIHVzZXJuYW1lOiAn5p2O5ZubJwogICAgICB9LCB7CiAgICAgICAgaWQ6IDMsCiAgICAgICAgdXNlcm5hbWU6ICfnjovkupQnCiAgICAgIH1dOwogICAgICBzZWxlY3RlZFVzZXJzLnZhbHVlID0gW107CiAgICAgIHNoYXJlRGlhbG9nVmlzaWJsZS52YWx1ZSA9IHRydWU7CiAgICB9OwogICAgY29uc3QgY29uZmlybVNoYXJlID0gYXN5bmMgKCkgPT4gewogICAgICBpZiAoIXNlbGVjdGVkRG9jdW1lbnQudmFsdWUgfHwgc2VsZWN0ZWRVc2Vycy52YWx1ZS5sZW5ndGggPT09IDApIHsKICAgICAgICBFbE1lc3NhZ2Uud2FybmluZygn6K+36YCJ5oup6Iez5bCR5LiA5Liq55So5oi3Jyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHNoYXJlTG9hZGluZy52YWx1ZSA9IHRydWU7CiAgICAgIHRyeSB7CiAgICAgICAgYXdhaXQgYXBpU2hhcmVEb2N1bWVudChzZWxlY3RlZERvY3VtZW50LnZhbHVlLmlkLCBzZWxlY3RlZFVzZXJzLnZhbHVlKTsKICAgICAgICBFbE1lc3NhZ2Uuc3VjY2Vzcygn5paH5qGj5YiG5Lqr5oiQ5YqfJyk7CiAgICAgICAgc2hhcmVEaWFsb2dWaXNpYmxlLnZhbHVlID0gZmFsc2U7CiAgICAgICAgZmV0Y2hTaGFyZWREb2N1bWVudHMoKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfliIbkuqvmlofmoaPlpLHotKUnLCBlcnJvcik7CiAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfliIbkuqvmlofmoaPlpLHotKUnKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBzaGFyZUxvYWRpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IGRlbGV0ZURvY3VtZW50ID0gZG9jID0+IHsKICAgICAgc2VsZWN0ZWREb2N1bWVudC52YWx1ZSA9IGRvYzsKICAgICAgZGVsZXRlRGlhbG9nVmlzaWJsZS52YWx1ZSA9IHRydWU7CiAgICB9OwogICAgY29uc3QgY29uZmlybURlbGV0ZSA9IGFzeW5jICgpID0+IHsKICAgICAgaWYgKCFzZWxlY3RlZERvY3VtZW50LnZhbHVlKSByZXR1cm47CiAgICAgIGRlbGV0ZUxvYWRpbmcudmFsdWUgPSB0cnVlOwogICAgICB0cnkgewogICAgICAgIHZhciBfc2VsZWN0ZWREb2N1bWVudCR2YWw7CiAgICAgICAgLy8g6K6w5b2V6KaB5Yig6Zmk55qE5paH5qGjSUTlkoznsbvliKsKICAgICAgICBjb25zdCBkZWxldGVkRG9jSWQgPSBzZWxlY3RlZERvY3VtZW50LnZhbHVlLmlkOwogICAgICAgIGNvbnN0IGRlbGV0ZWREb2NDYXRlZ29yeUlkID0gKF9zZWxlY3RlZERvY3VtZW50JHZhbCA9IHNlbGVjdGVkRG9jdW1lbnQudmFsdWUuY2F0ZWdvcnkpID09PSBudWxsIHx8IF9zZWxlY3RlZERvY3VtZW50JHZhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3NlbGVjdGVkRG9jdW1lbnQkdmFsLmlkOwoKICAgICAgICAvLyDlhYjlhbPpl63lr7nor53moYbvvIzmj5Dpq5jnlKjmiLfkvZPpqowKICAgICAgICBkZWxldGVEaWFsb2dWaXNpYmxlLnZhbHVlID0gZmFsc2U7CgogICAgICAgIC8vIOaJp+ihjOWIoOmZpOaTjeS9nAogICAgICAgIGF3YWl0IGFwaURlbGV0ZURvY3VtZW50KGRlbGV0ZWREb2NJZCk7CiAgICAgICAgRWxNZXNzYWdlLnN1Y2Nlc3MoJ+aWh+aho+WIoOmZpOaIkOWKnycpOwoKICAgICAgICAvLyDlvLrliLbmuIXpmaTpgInkuK3nmoTmlofmoaMKICAgICAgICBzZWxlY3RlZERvY3VtZW50LnZhbHVlID0gbnVsbDsKCiAgICAgICAgLy8g5riF6Zmk5Y+v6IO955qE57yT5a2Y5pWw5o2uCiAgICAgICAgaWYgKHdpbmRvdy5sb2NhbFN0b3JhZ2UpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIC8vIOenu+mZpOWPr+iDveWtmOWcqOeahOebuOWFs+e8k+WtmAogICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShgZG9jX2NhY2hlXyR7ZGVsZXRlZERvY0lkfWApOwogICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShgcmVjZW50X2RvY3NfY2FjaGVgKTsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oYGRvY19saXN0X2NhY2hlYCk7CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+a4hemZpOacrOWcsOe8k+WtmOWksei0pTonLCBlKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIOabtOaWsOWIt+aWsOinpuWPkeWZqAogICAgICAgIHJlZnJlc2hUcmlnZ2VyLnZhbHVlID0gRGF0ZS5ub3coKTsKCiAgICAgICAgLy8g5L2/55So5paw5pWw57uE5pu/5o2i5Y6f5pWw57uE77yM56Gu5L+dVnVl6IO95qOA5rWL5Yiw5Y+Y5YyWIAogICAgICAgIGRvY3VtZW50cy52YWx1ZSA9IFsuLi5kb2N1bWVudHMudmFsdWUuZmlsdGVyKGRvYyA9PiBkb2MuaWQgIT09IGRlbGV0ZWREb2NJZCldOwogICAgICAgIHJlY2VudERvY3VtZW50cy52YWx1ZSA9IFsuLi5yZWNlbnREb2N1bWVudHMudmFsdWUuZmlsdGVyKGRvYyA9PiBkb2MuaWQgIT09IGRlbGV0ZWREb2NJZCldOwogICAgICAgIHNoYXJlZERvY3VtZW50cy52YWx1ZSA9IFsuLi5zaGFyZWREb2N1bWVudHMudmFsdWUuZmlsdGVyKGRvYyA9PiBkb2MuaWQgIT09IGRlbGV0ZWREb2NJZCldOwoKICAgICAgICAvLyDlvLrliLbmm7TmlrDop4blm74KICAgICAgICBhd2FpdCBmb3JjZVVwZGF0ZSgpOwoKICAgICAgICAvLyDmm7TmlrDliIbnsbvkuK3nmoTmlofmoaPorqHmlbAKICAgICAgICBpZiAoZGVsZXRlZERvY0NhdGVnb3J5SWQpIHsKICAgICAgICAgIGNvbnN0IGNhdGVnb3J5ID0gZG9jdW1lbnRDYXRlZ29yaWVzLnZhbHVlLmZpbmQoYyA9PiBjLmlkID09PSBkZWxldGVkRG9jQ2F0ZWdvcnlJZCk7CiAgICAgICAgICBpZiAoY2F0ZWdvcnkgJiYgY2F0ZWdvcnkuZG9jdW1lbnRfY291bnQgPiAwKSB7CiAgICAgICAgICAgIGNhdGVnb3J5LmRvY3VtZW50X2NvdW50LS07CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyDnrYnlvoVET03mm7TmlrAKICAgICAgICBhd2FpdCBuZXh0VGljaygpOwoKICAgICAgICAvLyDph43mlrDlr7zoiKrliLDmlofmoaPpppbpobXvvIznoa7kv53nirbmgIHlhajpg6jliLfmlrAKICAgICAgICBpZiAocm91dGVyLmN1cnJlbnRSb3V0ZS52YWx1ZS5uYW1lID09PSAnU21hcnREb2NEZXRhaWwnKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygn5LuO6K+m5oOF6aG15Yig6Zmk5paH5qGj77yM6YeN5paw5a+86Iiq5Yiw5paH5qGj6aaW6aG1Jyk7CgogICAgICAgICAgLy8g5YWI5by65Yi25Yi35paw5pWw5o2u77yM56Gu5L+d5a+86Iiq5ZCO5pWw5o2u5piv5pyA5paw55qECiAgICAgICAgICBhd2FpdCByZWxvYWRBbGxEYXRhKCk7CgogICAgICAgICAgLy8g5L2/55SocmVwbGFjZeaooeW8j+i3s+i9rO+8jOS4jeeVmeS4i+WOhuWPsuiusOW9le+8jOW5tua3u+WKoOW8uuWItuWIt+aWsOWPguaVsAogICAgICAgICAgcm91dGVyLnJlcGxhY2UoewogICAgICAgICAgICBuYW1lOiAnU21hcnREb2MnLAogICAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICAgIF9yZWZyZXNoOiBEYXRlLm5vdygpCiAgICAgICAgICAgIH0gLy8g5re75Yqg5pe26Ze05oiz5Y+C5pWw6Ziy5q2i57yT5a2YCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8g5aaC5p6c5bey57uP5Zyo5paH5qGj6aaW6aG177yM56uL5Y2z6YeN6L295pWw5o2u5bm25by65Yi25Yi35paw6aG16Z2iCiAgICAgICAgICBhd2FpdCByZWZyZXNoRGF0YSgpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfliKDpmaTmlofmoaPlpLHotKUnLCBlcnJvcik7CiAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfliKDpmaTmlofmoaPlpLHotKUnKTsKICAgICAgICAvLyDlpoLmnpzliKDpmaTlpLHotKXvvIzlhbPpl63lr7nor53moYYKICAgICAgICBkZWxldGVEaWFsb2dWaXNpYmxlLnZhbHVlID0gZmFsc2U7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgZGVsZXRlTG9hZGluZy52YWx1ZSA9IGZhbHNlOwogICAgICB9CiAgICB9OwogICAgY29uc3Qgdmlld0FsbERvY3VtZW50cyA9IHR5cGUgPT4gewogICAgICBpZiAodHlwZSA9PT0gJ3JlY2VudCcpIHsKICAgICAgICAvLyDot6/nlLHkuK3msqHmnIlTbWFydERvY0xpc3TvvIznm7TmjqXot7PovazliLDmmbrog73mlofmoaPpppbpobXlubbmu5rliqjliLDmlofmoaPliJfooagKICAgICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiAnU21hcnREb2MnCiAgICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgY29uc3QgZG9jU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWN0aW9uJyk7CiAgICAgICAgICAgIGlmIChkb2NTZWN0aW9uKSB7CiAgICAgICAgICAgICAgZG9jU2VjdGlvbi5zY3JvbGxJbnRvVmlldyh7CiAgICAgICAgICAgICAgICBiZWhhdmlvcjogJ3Ntb290aCcKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwgMzAwKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IHNlbGVjdENhdGVnb3J5ID0gY2F0ZWdvcnkgPT4gewogICAgICBjb25zb2xlLmxvZygn6YCJ5oup5YiG57G7OicsIGNhdGVnb3J5KTsKCiAgICAgIC8vIOWkhOeQhuS4jeWQjOexu+Wei+eahGNhdGVnb3J55Y+C5pWwCiAgICAgIGxldCBjYXRlZ29yeUlkOwogICAgICBpZiAoY2F0ZWdvcnkgPT09ICdhbGwnKSB7CiAgICAgICAgY2F0ZWdvcnlJZCA9ICdhbGwnOwogICAgICB9IGVsc2UgaWYgKHR5cGVvZiBjYXRlZ29yeSA9PT0gJ3N0cmluZycpIHsKICAgICAgICBjYXRlZ29yeUlkID0gY2F0ZWdvcnk7CiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGNhdGVnb3J5ID09PSAnb2JqZWN0JyAmJiBjYXRlZ29yeSAhPT0gbnVsbCkgewogICAgICAgIGNhdGVnb3J5SWQgPSBjYXRlZ29yeS5pZC50b1N0cmluZygpOwogICAgICB9CiAgICAgIGNvbnNvbGUubG9nKCflpITnkIblkI7nmoTliIbnsbtJRDonLCBjYXRlZ29yeUlkKTsKCiAgICAgIC8vIOaXoOiuuuaYr+WQpumAieS4reW9k+WJjeWIhuexu++8jOmDveiuvue9ruS4uuaJgOmAieWIhuexu0lE77yI566A5YyW6YC76L6R77yJCiAgICAgIHNlYXJjaENhdGVnb3J5LnZhbHVlID0gY2F0ZWdvcnlJZDsKCiAgICAgIC8vIOa3u+WKoOWKqOeUu+aViOaenAogICAgICBkb2N1bWVudHMudmFsdWUgPSBbXTsKICAgICAgY3JlYXRlTG9hZGluZy52YWx1ZSA9IHRydWU7CgogICAgICAvLyDph43nva7liIbpobUKICAgICAgcGFnZS52YWx1ZSA9IDE7CiAgICAgIGhhc01vcmUudmFsdWUgPSB0cnVlOwoKICAgICAgLy8g5bu26L+f6I635Y+W77yM5a6e546w6L+H5rih5pWI5p6cCiAgICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4gewogICAgICAgIHRyeSB7CiAgICAgICAgICAvLyDlvLrliLbliLfmlrDmlofmoaPliJfooagKICAgICAgICAgIGF3YWl0IGZldGNoRG9jdW1lbnRzKHRydWUpOwogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCfojrflj5bmlofmoaPlpLHotKU6JywgZXJyb3IpOwogICAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfojrflj5bmlofmoaPliJfooajlpLHotKXvvIzor7fliLfmlrDpobXpnaLph43or5UnKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgY3JlYXRlTG9hZGluZy52YWx1ZSA9IGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgLy8g6Kem5Y+R5LiA5Liq566A5Y2V55qE5Yqo55S75pWI5p6c77yM56qB5Ye65pi+56S65bey562b6YCJ55qE5paH5qGjCiAgICAgICAgY29uc3QgZG9jQ2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZG9jLWNhcmQnKTsKICAgICAgICBpZiAoZG9jQ2FyZHMgJiYgZG9jQ2FyZHMubGVuZ3RoID4gMCkgewogICAgICAgICAgZG9jQ2FyZHMuZm9yRWFjaCgoY2FyZCwgaW5kZXgpID0+IHsKICAgICAgICAgICAgaWYgKGNhcmQpIHsKICAgICAgICAgICAgICBjYXJkLnN0eWxlLmFuaW1hdGlvbkRlbGF5ID0gYCR7aW5kZXggKiA1MH1tc2A7CiAgICAgICAgICAgICAgY2FyZC5jbGFzc0xpc3QucmVtb3ZlKCdmYWRlSW4nKTsKICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgIGlmIChjYXJkKSB7CiAgICAgICAgICAgICAgICAgIGNhcmQuY2xhc3NMaXN0LmFkZCgnZmFkZUluJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwgMTApOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sIDMwMCk7CiAgICB9OwoKICAgIC8vIOiOt+WPlumAieS4reWIhuexu+eahOminOiJsgogICAgY29uc3QgZ2V0U2VsZWN0ZWRDYXRlZ29yeUNvbG9yID0gKCkgPT4gewogICAgICBpZiAoc2VhcmNoQ2F0ZWdvcnkudmFsdWUgPT09ICdhbGwnKSByZXR1cm4gJyM0MDlFRkYnOwogICAgICBjb25zdCBzZWxlY3RlZENhdGVnb3J5ID0gZG9jdW1lbnRDYXRlZ29yaWVzLnZhbHVlLmZpbmQoYyA9PiBjLmlkLnRvU3RyaW5nKCkgPT09IHNlYXJjaENhdGVnb3J5LnZhbHVlKTsKICAgICAgcmV0dXJuIChzZWxlY3RlZENhdGVnb3J5ID09PSBudWxsIHx8IHNlbGVjdGVkQ2F0ZWdvcnkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNlbGVjdGVkQ2F0ZWdvcnkuY29sb3IpIHx8ICcjNjdDMjNBJzsKICAgIH07CgogICAgLy8g6I635Y+W6YCJ5Lit5YiG57G755qE5ZCN56ewCiAgICBjb25zdCBnZXRTZWxlY3RlZENhdGVnb3J5TmFtZSA9ICgpID0+IHsKICAgICAgaWYgKHNlYXJjaENhdGVnb3J5LnZhbHVlID09PSAnYWxsJykgcmV0dXJuICflhajpg6jmlofmoaMnOwogICAgICBjb25zdCBzZWxlY3RlZENhdGVnb3J5ID0gZG9jdW1lbnRDYXRlZ29yaWVzLnZhbHVlLmZpbmQoYyA9PiBjLmlkLnRvU3RyaW5nKCkgPT09IHNlYXJjaENhdGVnb3J5LnZhbHVlKTsKICAgICAgcmV0dXJuIChzZWxlY3RlZENhdGVnb3J5ID09PSBudWxsIHx8IHNlbGVjdGVkQ2F0ZWdvcnkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNlbGVjdGVkQ2F0ZWdvcnkubmFtZSkgfHwgJ+acquefpeWIhuexuyc7CiAgICB9OwogICAgY29uc3QgbWFuYWdlQ2F0ZWdvcmllcyA9ICgpID0+IHsKICAgICAgY2F0ZWdvcnlEaWFsb2dWaXNpYmxlLnZhbHVlID0gdHJ1ZTsKICAgICAgcmVzZXRDYXRlZ29yeUZvcm0oKTsKICAgIH07CiAgICBjb25zdCBlZGl0Q2F0ZWdvcnkgPSBjYXRlZ29yeSA9PiB7CiAgICAgIGVkaXRpbmdDYXRlZ29yeS52YWx1ZSA9IHsKICAgICAgICAuLi5jYXRlZ29yeQogICAgICB9OwogICAgfTsKICAgIGNvbnN0IHJlc2V0Q2F0ZWdvcnlGb3JtID0gKCkgPT4gewogICAgICBlZGl0aW5nQ2F0ZWdvcnkudmFsdWUgPSB7CiAgICAgICAgaWQ6ICcnLAogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGNvbG9yOiAnIzQwOUVGRicsCiAgICAgICAgZGVzY3JpcHRpb246ICcnCiAgICAgIH07CiAgICAgIGlmIChjYXRlZ29yeUZvcm1SZWYudmFsdWUpIHsKICAgICAgICBjYXRlZ29yeUZvcm1SZWYudmFsdWUucmVzZXRGaWVsZHMoKTsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IHN1Ym1pdENhdGVnb3J5ID0gYXN5bmMgKCkgPT4gewogICAgICBpZiAoIWNhdGVnb3J5Rm9ybVJlZi52YWx1ZSkgcmV0dXJuOwogICAgICBhd2FpdCBjYXRlZ29yeUZvcm1SZWYudmFsdWUudmFsaWRhdGUoYXN5bmMgdmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgY2F0ZWdvcnlMb2FkaW5nLnZhbHVlID0gdHJ1ZTsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNvbnN0IGNhdGVnb3J5RGF0YSA9IHsKICAgICAgICAgICAgICBuYW1lOiBlZGl0aW5nQ2F0ZWdvcnkudmFsdWUubmFtZSwKICAgICAgICAgICAgICBjb2xvcjogZWRpdGluZ0NhdGVnb3J5LnZhbHVlLmNvbG9yLAogICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBlZGl0aW5nQ2F0ZWdvcnkudmFsdWUuZGVzY3JpcHRpb24gfHwgJycKICAgICAgICAgICAgfTsKICAgICAgICAgICAgaWYgKGVkaXRpbmdDYXRlZ29yeS52YWx1ZS5pZCkgewogICAgICAgICAgICAgIC8vIOabtOaWsOWIhuexuwogICAgICAgICAgICAgIGF3YWl0IHVwZGF0ZURvY3VtZW50Q2F0ZWdvcnkoZWRpdGluZ0NhdGVnb3J5LnZhbHVlLmlkLCBjYXRlZ29yeURhdGEpOwogICAgICAgICAgICAgIEVsTWVzc2FnZS5zdWNjZXNzKCfliIbnsbvmm7TmlrDmiJDlip8nKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvLyDliJvlu7rliIbnsbsKICAgICAgICAgICAgICBhd2FpdCBjcmVhdGVEb2N1bWVudENhdGVnb3J5KGNhdGVnb3J5RGF0YSk7CiAgICAgICAgICAgICAgRWxNZXNzYWdlLnN1Y2Nlc3MoJ+WIhuexu+WIm+W7uuaIkOWKnycpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyDph43mlrDojrflj5bliIbnsbvliJfooagKICAgICAgICAgICAgZmV0Y2hEb2N1bWVudENhdGVnb3JpZXMoKTsKICAgICAgICAgICAgcmVzZXRDYXRlZ29yeUZvcm0oKTsKICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+S/neWtmOWIhuexu+Wksei0pTonLCBlcnJvcik7CiAgICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcign5L+d5a2Y5YiG57G75aSx6LSlJyk7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBjYXRlZ29yeUxvYWRpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfTsKICAgIGNvbnN0IGRlbGV0ZUNhdGVnb3J5ID0gY2F0ZWdvcnkgPT4gewogICAgICBpZiAoY2F0ZWdvcnkuZG9jdW1lbnRfY291bnQgPiAwKSB7CiAgICAgICAgRWxNZXNzYWdlLndhcm5pbmcoJ+ivpeWIhuexu+S4i+acieaWh+aho++8jOaXoOazleWIoOmZpCcpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBFbE1lc3NhZ2VCb3guY29uZmlybShg56Gu5a6a6KaB5Yig6Zmk5YiG57G7IiR7Y2F0ZWdvcnkubmFtZX0i5ZCX77yfYCwgJ+WIoOmZpOWIhuexuycsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oYXN5bmMgKCkgPT4gewogICAgICAgIHRyeSB7CiAgICAgICAgICBhd2FpdCBkZWxldGVEb2N1bWVudENhdGVnb3J5KGNhdGVnb3J5LmlkKTsKICAgICAgICAgIEVsTWVzc2FnZS5zdWNjZXNzKCfliIbnsbvliKDpmaTmiJDlip8nKTsKICAgICAgICAgIGZldGNoRG9jdW1lbnRDYXRlZ29yaWVzKCk7CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WIoOmZpOWIhuexu+Wksei0pTonLCBlcnJvcik7CiAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+WIoOmZpOWIhuexu+Wksei0pScpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goKCkgPT4ge30pOwogICAgfTsKICAgIGNvbnN0IGZvcm1hdERhdGUgPSBkYXRlU3RyaW5nID0+IHsKICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHJpbmcpOwogICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOwoKICAgICAgLy8g5ZCM5LiA5aSp5pi+56S65pe26Ze0CiAgICAgIGlmIChkYXRlLnRvRGF0ZVN0cmluZygpID09PSBub3cudG9EYXRlU3RyaW5nKCkpIHsKICAgICAgICByZXR1cm4gZGF0ZS50b0xvY2FsZVRpbWVTdHJpbmcoJ3poLUNOJywgewogICAgICAgICAgaG91cjogJzItZGlnaXQnLAogICAgICAgICAgbWludXRlOiAnMi1kaWdpdCcKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgLy8g5pio5aSpCiAgICAgIGNvbnN0IHllc3RlcmRheSA9IG5ldyBEYXRlKG5vdyk7CiAgICAgIHllc3RlcmRheS5zZXREYXRlKG5vdy5nZXREYXRlKCkgLSAxKTsKICAgICAgaWYgKGRhdGUudG9EYXRlU3RyaW5nKCkgPT09IHllc3RlcmRheS50b0RhdGVTdHJpbmcoKSkgewogICAgICAgIHJldHVybiAn5pio5aSpJzsKICAgICAgfQoKICAgICAgLy8g5LiA5ZGo5YaF5pi+56S65pif5pyfCiAgICAgIGNvbnN0IHdlZWtEYXlzID0gWyflkajml6UnLCAn5ZGo5LiAJywgJ+WRqOS6jCcsICflkajkuIknLCAn5ZGo5ZubJywgJ+WRqOS6lCcsICflkajlha0nXTsKICAgICAgY29uc3QgZGlmZkRheXMgPSBNYXRoLnJvdW5kKChub3cgLSBkYXRlKSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSk7CiAgICAgIGlmIChkaWZmRGF5cyA8IDcpIHsKICAgICAgICByZXR1cm4gd2Vla0RheXNbZGF0ZS5nZXREYXkoKV07CiAgICAgIH0KCiAgICAgIC8vIOWFtuS7luaDheWGteaYvuekuuaXpeacnwogICAgICByZXR1cm4gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoJ3poLUNOJywgewogICAgICAgIG1vbnRoOiAnbnVtZXJpYycsCiAgICAgICAgZGF5OiAnbnVtZXJpYycKICAgICAgfSk7CiAgICB9OwogICAgY29uc3QgcmVzZXRDYXRlZ29yeUZpbHRlciA9ICgpID0+IHsKICAgICAgc2VhcmNoQ2F0ZWdvcnkudmFsdWUgPSAnYWxsJzsKICAgICAgcGFnZS52YWx1ZSA9IDE7CiAgICAgIGhhc01vcmUudmFsdWUgPSB0cnVlOwogICAgICBmZXRjaERvY3VtZW50cyh0cnVlKTsKICAgIH07CgogICAgLy8g5re75Yqg6aG16Z2i5r+A5rS76ZKp5a2Q77yM56Gu5L+d5LuO5YW25LuW6aG16Z2i6L+U5Zue5pe26YeN5paw6I635Y+W5pWw5o2uCiAgICBvbkFjdGl2YXRlZCgoKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKCdTbWFydERvY+e7hOS7tuiiq+a/gOa0u++8jOmHjeaWsOiOt+WPluaVsOaNricpOwogICAgICByZWxvYWRBbGxEYXRhKCk7CiAgICB9KTsKCiAgICAvLyDpobXpnaLmv4DmtLvlkI7ph43mlrDliqDovb3miYDmnInmlbDmja7nmoTlh73mlbAKICAgIGNvbnN0IHJlbG9hZEFsbERhdGEgPSBhc3luYyAoKSA9PiB7CiAgICAgIHBhZ2UudmFsdWUgPSAxOwogICAgICBoYXNNb3JlLnZhbHVlID0gdHJ1ZTsKICAgICAgdHJ5IHsKICAgICAgICBjb25zb2xlLmxvZygn6YeN5paw5Yqg6L295omA5pyJ5paH5qGj5pWw5o2uLi4uJyk7CiAgICAgICAgY3JlYXRlTG9hZGluZy52YWx1ZSA9IHRydWU7CgogICAgICAgIC8vIOWFiOiOt+WPluWIhuexu++8jOWboOS4uuaYvuekuuaWh+aho+aXtumcgOimgeWIhuexu+S/oeaBrwogICAgICAgIGF3YWl0IGZldGNoRG9jdW1lbnRDYXRlZ29yaWVzKCk7CgogICAgICAgIC8vIOeEtuWQjuW5tuihjOiOt+WPluWFtuS7luaVsOaNru+8jOS9huS4jemcgOimgeS/neWtmOi/lOWbnuWAvAogICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtmZXRjaERvY3VtZW50cyh0cnVlKSwgZmV0Y2hSZWNlbnREb2N1bWVudHModHJ1ZSksIGZldGNoU2hhcmVkRG9jdW1lbnRzKCldKTsKICAgICAgICBjb25zb2xlLmxvZygn5pWw5o2u6YeN5paw5Yqg6L295a6M5oiQJywgewogICAgICAgICAg5YiG57G75pWw6YePOiBkb2N1bWVudENhdGVnb3JpZXMudmFsdWUubGVuZ3RoLAogICAgICAgICAg5paH5qGj5pWw6YePOiBkb2N1bWVudHMudmFsdWUubGVuZ3RoLAogICAgICAgICAg5pyA6L+R5paH5qGjOiByZWNlbnREb2N1bWVudHMudmFsdWUubGVuZ3RoLAogICAgICAgICAg5YWx5Lqr5paH5qGjOiBzaGFyZWREb2N1bWVudHMudmFsdWUubGVuZ3RoLAogICAgICAgICAg5oC76K6h5pWwOiB0b3RhbENvdW50LnZhbHVlCiAgICAgICAgfSk7CgogICAgICAgIC8vIOW8uuWItuabtOaWsOinhuWbvgogICAgICAgIGF3YWl0IGZvcmNlVXBkYXRlKCk7CgogICAgICAgIC8vIOWmguaenOaWh+aho+WIl+ihqOS4jeS4uuepuuS9huaVsOmHj+Wwj+S6juaAu+aVsO+8jOiHquWKqOWKoOi9veabtOWkmuebtOWIsOWhq+a7oeS4gOmhtQogICAgICAgIGlmIChkb2N1bWVudHMudmFsdWUubGVuZ3RoID4gMCAmJiBkb2N1bWVudHMudmFsdWUubGVuZ3RoIDwgdG90YWxDb3VudC52YWx1ZSAmJiBkb2N1bWVudHMudmFsdWUubGVuZ3RoIDwgcGFnZVNpemUpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCfmlofmoaPmlbDph4/kuI3otrPkuIDpobXvvIzoh6rliqjliqDovb3mm7TlpJouLi4nKTsKICAgICAgICAgIGF3YWl0IGxvYWRNb3JlRG9jdW1lbnRzKCk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+aVsOaNrumHjeaWsOWKoOi9veWksei0pTonLCBlcnJvcik7CiAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfliqDovb3mlbDmja7lpLHotKXvvIzor7fliLfmlrDpobXpnaInKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBjcmVhdGVMb2FkaW5nLnZhbHVlID0gZmFsc2U7CiAgICAgIH0KICAgIH07CgogICAgLy8g5o+Q5L6b6YeN6L295Ye95pWw57uZ5a2Q57uE5Lu25oiW54i257uE5Lu25L2/55SoCiAgICBwcm92aWRlKCdyZWxvYWREb2N1bWVudHMnLCByZWxvYWRBbGxEYXRhKTsKCiAgICAvLyDnm5HlkKzot6/nlLHlj5jljJbvvIzlvLrliLbliLfmlrDmlbDmja4KICAgIHdhdGNoKCgpID0+IHJvdXRlLnF1ZXJ5Ll9yZWZyZXNoLCBuZXdWYWwgPT4gewogICAgICBpZiAobmV3VmFsKSB7CiAgICAgICAgY29uc29sZS5sb2coJ+ajgOa1i+WIsOi3r+eUseWIt+aWsOWPguaVsDonLCBuZXdWYWwpOwogICAgICAgIHJlZnJlc2hUcmlnZ2VyLnZhbHVlID0gRGF0ZS5ub3coKTsKICAgICAgICByZWxvYWRBbGxEYXRhKCk7CiAgICAgIH0KICAgIH0pOwoKICAgIC8vIOebkeWQrOi3r+eUseWPguaVsO+8jOWkhOeQhuS4jeWQjOaDheWGtQogICAgd2F0Y2goKCkgPT4gcm91dGUucGF0aCwgKG5ld1BhdGgsIG9sZFBhdGgpID0+IHsKICAgICAgY29uc29sZS5sb2coJ+i3r+eUseWPmOWMljonLCBvbGRQYXRoLCAnLT4nLCBuZXdQYXRoKTsKICAgICAgaWYgKG5ld1BhdGggPT09ICcvc21hcnRkb2MnICYmIG9sZFBhdGggJiYgb2xkUGF0aC5zdGFydHNXaXRoKCcvc21hcnRkb2MvJykpIHsKICAgICAgICAvLyDku47mlofmoaPor6bmg4XpobXov5Tlm57mlofmoaPliJfooajpobXvvIzlvLrliLbliLfmlrAKICAgICAgICBjb25zb2xlLmxvZygn5LuO6K+m5oOF6aG16L+U5Zue5YiX6KGo6aG177yM5by65Yi25Yi35paw5pWw5o2uJyk7CiAgICAgICAgcmVmcmVzaFRyaWdnZXIudmFsdWUgPSBEYXRlLm5vdygpOwogICAgICAgIHJlbG9hZEFsbERhdGEoKTsKICAgICAgfQogICAgfSk7CgogICAgLy8g5omL5Yqo5by65Yi25Yi35paw5pa55rOVCiAgICBjb25zdCByZWZyZXNoRGF0YSA9IGFzeW5jICgpID0+IHsKICAgICAgcGFnZS52YWx1ZSA9IDE7CiAgICAgIGhhc01vcmUudmFsdWUgPSB0cnVlOwogICAgICBhd2FpdCByZWxvYWRBbGxEYXRhKCk7CiAgICAgIGlmIChwcm94eSAmJiBwcm94eS4kZm9yY2VVcGRhdGUpIHsKICAgICAgICBwcm94eS4kZm9yY2VVcGRhdGUoKTsKICAgICAgfQogICAgfTsKCiAgICAvLyDmlrDlop7mn6XnnIvmm7TlpJrmlrnms5UKICAgIGNvbnN0IGxvYWRNb3JlRG9jdW1lbnRzID0gYXN5bmMgKCkgPT4gewogICAgICBpZiAoIWhhc01vcmUudmFsdWUpIHsKICAgICAgICBjb25zb2xlLmxvZygn5rKh5pyJ5pu05aSa5paH5qGj5LqGJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvbnNvbGUubG9nKGDliqDovb3mm7TlpJrmlofmoaPvvIzlvZPliY3pobXnoIE6ICR7cGFnZS52YWx1ZX0gLT4gJHtwYWdlLnZhbHVlICsgMX1gKTsKICAgICAgbG9hZGluZ01vcmUudmFsdWUgPSB0cnVlOwogICAgICB0cnkgewogICAgICAgIHBhZ2UudmFsdWUgKz0gMTsKICAgICAgICBhd2FpdCBmZXRjaERvY3VtZW50cyhmYWxzZSwgdHJ1ZSk7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgbG9hZGluZ01vcmUudmFsdWUgPSBmYWxzZTsKICAgICAgfQogICAgfTsKCiAgICAvLyDnlJ/lkb3lkajmnJ/pkqnlrZAKICAgIG9uTW91bnRlZCgoKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKCdTbWFydERvY+e7hOS7tm1vdW50ZWTvvIzliqDovb3mlbDmja4nKTsKICAgICAgcmVsb2FkQWxsRGF0YSgpOyAvLyDkvb/nlKjnu5/kuIDnmoTmlbDmja7liqDovb3lh73mlbAKICAgIH0pOwogICAgcmV0dXJuIHsKICAgICAgZG9jdW1lbnRzLAogICAgICByZWNlbnREb2N1bWVudHMsCiAgICAgIHNoYXJlZERvY3VtZW50cywKICAgICAgZG9jdW1lbnRDYXRlZ29yaWVzLAogICAgICBzZWFyY2hRdWVyeSwKICAgICAgc2VhcmNoQ2F0ZWdvcnksCiAgICAgIGRlYm91bmNlZFNlYXJjaCwKICAgICAgdG90YWxEb2N1bWVudHMsCiAgICAgIHJlY2VudEVkaXRDb3VudCwKICAgICAgbmV3RG9jdW1lbnREaWFsb2dWaXNpYmxlLAogICAgICBzaGFyZURpYWxvZ1Zpc2libGUsCiAgICAgIGRlbGV0ZURpYWxvZ1Zpc2libGUsCiAgICAgIGRvY3VtZW50Q3JlYXRlVHlwZSwKICAgICAgbmV3RG9jdW1lbnRGb3JtLAogICAgICBhaURvY3VtZW50Rm9ybSwKICAgICAgYmxhbmtGb3JtUnVsZXMsCiAgICAgIGFpRm9ybVJ1bGVzLAogICAgICBibGFua0Zvcm1SZWYsCiAgICAgIGFpRm9ybVJlZiwKICAgICAgc2VsZWN0ZWREb2N1bWVudCwKICAgICAgc2VsZWN0ZWRVc2VycywKICAgICAgYXZhaWxhYmxlVXNlcnMsCiAgICAgIGNyZWF0ZUxvYWRpbmcsCiAgICAgIHNoYXJlTG9hZGluZywKICAgICAgZGVsZXRlTG9hZGluZywKICAgICAgY3JlYXRlTmV3RG9jdW1lbnQsCiAgICAgIHN1Ym1pdE5ld0RvY3VtZW50LAogICAgICBvcGVuRG9jdW1lbnQsCiAgICAgIHJlbmFtZURvY3VtZW50LAogICAgICBkdXBsaWNhdGVEb2N1bWVudCwKICAgICAgc2hhcmVEb2N1bWVudCwKICAgICAgY29uZmlybVNoYXJlLAogICAgICBkZWxldGVEb2N1bWVudCwKICAgICAgY29uZmlybURlbGV0ZSwKICAgICAgdmlld0FsbERvY3VtZW50cywKICAgICAgZm9ybWF0RGF0ZSwKICAgICAgY2F0ZWdvcnlEaWFsb2dWaXNpYmxlLAogICAgICBlZGl0aW5nQ2F0ZWdvcnksCiAgICAgIGNhdGVnb3J5Rm9ybVJlZiwKICAgICAgY2F0ZWdvcnlMb2FkaW5nLAogICAgICBjYXRlZ29yeUZvcm1SdWxlcywKICAgICAgZWRpdENhdGVnb3J5LAogICAgICByZXNldENhdGVnb3J5Rm9ybSwKICAgICAgc3VibWl0Q2F0ZWdvcnksCiAgICAgIGRlbGV0ZUNhdGVnb3J5LAogICAgICByZXNldENhdGVnb3J5RmlsdGVyLAogICAgICBzZWxlY3RDYXRlZ29yeSwKICAgICAgZ2V0U2VsZWN0ZWRDYXRlZ29yeUNvbG9yLAogICAgICBnZXRTZWxlY3RlZENhdGVnb3J5TmFtZSwKICAgICAgbWFuYWdlQ2F0ZWdvcmllcywKICAgICAgcmVsb2FkQWxsRGF0YSwKICAgICAgcmVmcmVzaERhdGEsCiAgICAgIHJlZnJlc2hUcmlnZ2VyLAogICAgICBoYXNNb3JlLAogICAgICBsb2FkaW5nTW9yZSwKICAgICAgbG9hZE1vcmVEb2N1bWVudHMKICAgIH07CiAgfQp9Ow=="},{"version":3,"names":["ref","computed","onMounted","nextTick","getCurrentInstance","provide","onActivated","watch","useRouter","useRoute","ElMessage","ElMessageBox","Search","Plus","EditPen","Share","Folder","Close","More","Document","_","getDocuments","getRecentDocuments","getSharedDocuments","getDocumentCategories","createDocument","deleteDocument","apiDeleteDocument","shareDocument","apiShareDocument","createDocumentCategory","updateDocumentCategory","deleteDocumentCategory","aiGenerateDocument","name","components","setup","router","route","proxy","refreshTrigger","Date","now","documents","recentDocuments","sharedDocuments","documentCategories","searchQuery","searchCategory","newDocumentDialogVisible","shareDialogVisible","deleteDialogVisible","documentCreateType","selectedDocument","selectedUsers","availableUsers","createLoading","shareLoading","deleteLoading","loadingMore","page","pageSize","hasMore","totalCount","newDocumentForm","title","type","aiDocumentForm","requirements","blankFormRules","required","message","trigger","min","max","aiFormRules","blankFormRef","aiFormRef","totalDocuments","value","length","recentEditCount","categoryDialogVisible","editingCategory","color","description","categoryFormRef","categoryLoading","categoryFormRules","forceUpdate","$forceUpdate","fetchDocuments","forceRefresh","append","params","limit","_t","getTime","category","console","log","search","JSON","stringify","res","data","list","total","nextPage","results","Array","isArray","count","next","existingIds","Set","map","doc","id","filter","has","Promise","resolve","setTimeout","warn","error","fetchRecentDocuments","fetchSharedDocuments","response","fetchDocumentCategories","retryCount","status","debouncedSearch","debounce","createNewDocument","dialog","document","querySelector","addEventListener","clearValidate","err","once","submitNewDocument","valid","validate","catch","content","success","docId","push","then","navErr","categoryId","requirement","category_id","doc_type","_response$data","detail","includes","String","openDocument","renameDocument","prompt","confirmButtonText","cancelButtonText","inputValue","inputValidator","info","duplicateDocument","username","confirmShare","warning","confirmDelete","_selectedDocument$val","deletedDocId","deletedDocCategoryId","window","localStorage","removeItem","e","find","c","document_count","currentRoute","reloadAllData","replace","query","_refresh","refreshData","viewAllDocuments","docSection","scrollIntoView","behavior","selectCategory","toString","docCards","querySelectorAll","forEach","card","index","style","animationDelay","classList","remove","add","getSelectedCategoryColor","selectedCategory","getSelectedCategoryName","manageCategories","resetCategoryForm","editCategory","resetFields","submitCategory","categoryData","deleteCategory","confirm","formatDate","dateString","date","toDateString","toLocaleTimeString","hour","minute","yesterday","setDate","getDate","weekDays","diffDays","Math","round","getDay","toLocaleDateString","month","day","resetCategoryFilter","all","","","","","","loadMoreDocuments","newVal","path","newPath","oldPath","startsWith"],"sources":["C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\smartdoc\\Index.vue"],"sourcesContent":["<template>\n  <div class=\"smartdoc-home-container\">\n    <!--  -->\n    <div style=\"display: none;\">{{ refreshTrigger }}</div>\n    \n    <!--  -->\n    <div class=\"page-header\">\n      <div class=\"left-section\">\n        <h2 class=\"page-title\"></h2>\n        <p class=\"page-description\"></p>\n        </div>\n      <div class=\"right-section\">\n        <div class=\"search-controls\">\n          <el-select \n            v-model=\"searchCategory\" \n            placeholder=\"\" \n            @change=\"selectCategory(searchCategory)\" \n            class=\"category-select\"\n          >\n            <el-option label=\"\" value=\"all\" />\n            <el-option \n              v-for=\"category in documentCategories\" \n              :key=\"category.id\" \n              :label=\"category.name\" \n              :value=\"category.id.toString()\"\n            />\n          </el-select>\n          \n          <el-input\n            placeholder=\"...\"\n            v-model=\"searchQuery\"\n          class=\"search-input\"\n            clearable\n            @input=\"debouncedSearch\"\n          >\n            <template #prefix>\n              <el-icon><Search /></el-icon>\n            </template>\n          </el-input>\n        </div>\n        \n        <el-button type=\"primary\" @click=\"createNewDocument\">\n          <el-icon><Plus /></el-icon> \n        </el-button>\n          </div>\n        </div>\n\n    <!--  -->\n    <div class=\"stats-cards\">\n      <el-card class=\"stat-card\" shadow=\"hover\" @click=\"selectCategory('all')\">\n        <div class=\"stat-content\">\n          <div class=\"stat-icon doc-icon\">\n                <el-icon><Document /></el-icon>\n              </div>\n          <div class=\"stat-info\">\n            <div class=\"stat-value\">{{ totalDocuments }}</div>\n            <div class=\"stat-label\"></div>\n                </div>\n              </div>\n      </el-card>\n      \n      <el-card class=\"stat-card\" shadow=\"hover\">\n        <div class=\"stat-content\">\n          <div class=\"stat-icon edit-icon\">\n            <el-icon><EditPen /></el-icon>\n            </div>\n          <div class=\"stat-info\">\n            <div class=\"stat-value\">{{ recentEditCount }}</div>\n            <div class=\"stat-label\"></div>\n          </div>\n        </div>\n      </el-card>\n      \n      <el-card class=\"stat-card\" shadow=\"hover\">\n        <div class=\"stat-content\">\n          <div class=\"stat-icon share-icon\">\n            <el-icon><Share /></el-icon>\n          </div>\n          <div class=\"stat-info\">\n            <div class=\"stat-value\">{{ sharedDocuments.length }}</div>\n            <div class=\"stat-label\"></div>\n            </div>\n        </div>\n      </el-card>\n    </div>\n\n    <!--  -->\n    <div v-if=\"searchCategory !== 'all'\" class=\"filter-status-bar\">\n      <div class=\"filter-bar-content\">\n        <div class=\"filter-title\">\n          <span>: </span>\n          <span class=\"filter-category\" :style=\"{ backgroundColor: getSelectedCategoryColor() }\">\n            {{ getSelectedCategoryName() }}\n          </span>\n        </div>\n        <div class=\"filter-actions\">\n          <el-button type=\"primary\" link @click=\"resetCategoryFilter\">\n            <el-icon><Close /></el-icon> \n          </el-button>\n        </div>\n      </div>\n    </div>\n\n    <!--  -  -->\n    <div class=\"section category-section\">\n      <div class=\"section-header\">\n        <h3></h3>\n        <div class=\"section-actions\">\n          <el-button text @click=\"manageCategories\"></el-button>\n        </div>\n      </div>\n      \n      <div class=\"category-cards\">\n        <!--  -->\n        <div \n          class=\"category-card\" \n          :class=\"{ 'category-active': searchCategory === 'all' }\"\n          @click=\"selectCategory('all')\"\n        >\n          <div class=\"category-icon\" :style=\"{ backgroundColor: '#409EFF' }\">\n            <el-icon><Document /></el-icon>\n          </div>\n          <div class=\"category-info\">\n            <h4></h4>\n            <div class=\"category-count\">{{ totalDocuments }} </div>\n          </div>\n          <div v-if=\"searchCategory === 'all'\" class=\"category-selected-indicator\"></div>\n        </div>\n        \n        <!--  -->\n        <div \n          v-for=\"category in documentCategories\" \n          :key=\"category.id\" \n          class=\"category-card\" \n          :class=\"{ 'category-active': searchCategory === category.id.toString() }\"\n          @click=\"selectCategory(category)\"\n        >\n          <div class=\"category-icon\" :style=\"{ backgroundColor: category.color }\">\n            <el-icon><Folder /></el-icon>\n          </div>\n          <div class=\"category-info\">\n            <h4>{{ category.name }}</h4>\n            <div class=\"category-count\">{{ category.document_count }} </div>\n          </div>\n          <div v-if=\"searchCategory === category.id.toString()\" class=\"category-selected-indicator\"></div>\n        </div>\n      </div>\n    </div>\n\n    <!--  -->\n    <div class=\"section\">\n      <div class=\"section-header\">\n        <h3></h3>\n        <div class=\"filter-controls\">\n          <el-button text @click=\"fetchDocuments\"></el-button>\n        </div>\n              </div>\n      \n      <div class=\"document-cards\">\n        <el-card \n          v-for=\"doc in documents\" \n          :key=\"doc.id\" \n          class=\"doc-card\" \n          shadow=\"hover\"\n          @click=\"openDocument(doc)\"\n        >\n          <div class=\"doc-card-header\">\n            <div class=\"doc-info\">\n            <div class=\"doc-type-tag\">{{ doc.type }}</div>\n              <div v-if=\"doc.category\" \n                   class=\"doc-category-tag\" \n                   :style=\"{ backgroundColor: doc.category.color || '#67C23A' }\"\n              >\n                {{ doc.category.name }}\n              </div>\n            </div>\n            <div class=\"doc-menu\">\n              <el-dropdown trigger=\"click\" @click.stop>\n                <el-icon><More /></el-icon>\n                  <template #dropdown>\n                    <el-dropdown-menu>\n                    <el-dropdown-item @click.stop=\"openDocument(doc)\"></el-dropdown-item>\n                    <el-dropdown-item @click.stop=\"renameDocument(doc)\"></el-dropdown-item>\n                    <el-dropdown-item @click.stop=\"duplicateDocument(doc)\"></el-dropdown-item>\n                    <el-dropdown-item @click.stop=\"shareDocument(doc)\"></el-dropdown-item>\n                    <el-dropdown-item divided @click.stop=\"deleteDocument(doc)\" type=\"danger\"></el-dropdown-item>\n                    </el-dropdown-menu>\n                  </template>\n                </el-dropdown>\n            </div>\n          </div>\n          \n          <h4 class=\"doc-title\" :title=\"doc.title\">{{ doc.title }}</h4>\n          \n          <div class=\"doc-preview\" v-html=\"doc.preview || ''\"></div>\n          \n          <div class=\"doc-footer\">\n            <div class=\"doc-time\">{{ formatDate(doc.update_time) }}</div>\n            <div class=\"doc-actions\">\n              <el-tooltip content=\"\" placement=\"top\">\n                <el-button link circle size=\"small\" @click.stop=\"openDocument(doc)\">\n                  <el-icon><EditPen /></el-icon>\n                </el-button>\n              </el-tooltip>\n              <el-tooltip content=\"\" placement=\"top\">\n                <el-button link circle size=\"small\" @click.stop=\"shareDocument(doc)\">\n                  <el-icon><Share /></el-icon>\n                </el-button>\n              </el-tooltip>\n              </div>\n            </div>\n        </el-card>\n        \n        <!--  -->\n        <div class=\"doc-card new-doc-card\" @click=\"createNewDocument\">\n          <div class=\"new-doc-content\">\n            <el-icon><Plus /></el-icon>\n            <span></span>\n                  </div>\n                    </div>\n                  </div>\n      \n      <div v-if=\"hasMore && documents.length > 0\" style=\"text-align:center;margin:16px 0;\">\n        <el-button type=\"primary\" @click=\"loadMoreDocuments\" :loading=\"loadingMore\" plain round>\n          {{ loadingMore ? '...' : '' }}\n        </el-button>\n      </div>\n      <div v-if=\"!hasMore && documents.length > 0\" style=\"text-align:center;color:#909399;font-size:13px;margin-bottom:16px;\">\n        \n      </div>\n    </div>\n\n    <!--  -->\n    <div class=\"section\">\n      <div class=\"section-header\">\n        <h3></h3>\n        <div class=\"section-actions\">\n        <el-button text @click=\"viewAllDocuments('recent')\"></el-button>\n        </div>\n                </div>\n      \n      <div class=\"document-cards\">\n        <el-card \n          v-for=\"doc in recentDocuments\" \n          :key=\"doc.id\" \n          class=\"doc-card\" \n          shadow=\"hover\"\n          @click=\"openDocument(doc)\"\n        >\n          <div class=\"doc-card-header\">\n            <div class=\"doc-info\">\n            <div class=\"doc-type-tag\">{{ doc.type }}</div>\n              <div v-if=\"doc.category\" \n                   class=\"doc-category-tag\" \n                   :style=\"{ backgroundColor: doc.category.color || '#67C23A' }\"\n              >\n                {{ doc.category.name }}\n                  </div>\n            </div>\n            <div class=\"doc-menu\">\n              <el-dropdown trigger=\"click\" @click.stop>\n                <el-icon><More /></el-icon>\n                  <template #dropdown>\n                    <el-dropdown-menu>\n                    <el-dropdown-item @click.stop=\"openDocument(doc)\"></el-dropdown-item>\n                    <el-dropdown-item @click.stop=\"renameDocument(doc)\"></el-dropdown-item>\n                    <el-dropdown-item @click.stop=\"duplicateDocument(doc)\"></el-dropdown-item>\n                    <el-dropdown-item @click.stop=\"shareDocument(doc)\"></el-dropdown-item>\n                    <el-dropdown-item divided @click.stop=\"deleteDocument(doc)\" type=\"danger\"></el-dropdown-item>\n                    </el-dropdown-menu>\n                  </template>\n                </el-dropdown>\n            </div>\n          </div>\n          \n          <h4 class=\"doc-title\" :title=\"doc.title\">{{ doc.title }}</h4>\n          \n          <div class=\"doc-preview\" v-html=\"doc.preview || ''\"></div>\n          \n          <div class=\"doc-footer\">\n            <div class=\"doc-time\">{{ formatDate(doc.update_time) }}</div>\n            <div class=\"doc-actions\">\n              <el-tooltip content=\"\" placement=\"top\">\n                <el-button link circle size=\"small\" @click.stop=\"openDocument(doc)\">\n                  <el-icon><EditPen /></el-icon>\n                </el-button>\n              </el-tooltip>\n              <el-tooltip content=\"\" placement=\"top\">\n                <el-button link circle size=\"small\" @click.stop=\"shareDocument(doc)\">\n                  <el-icon><Share /></el-icon>\n                </el-button>\n              </el-tooltip>\n              </div>\n                </div>\n        </el-card>\n        \n        <!--  -->\n        <div class=\"doc-card new-doc-card\" @click=\"createNewDocument\">\n          <div class=\"new-doc-content\">\n            <el-icon><Plus /></el-icon>\n            <span></span>\n          </div>\n        </div>\n      </div>\n      \n      <div v-if=\"recentDocuments.length === 0\" class=\"empty-state\">\n        <!--  -->\n    </div>\n  </div>\n\n    <!--  -->\n  <el-dialog\n      v-model=\"newDocumentDialogVisible\"\n      title=\"\"\n      width=\"35%\"\n    >\n      <el-tabs v-model=\"documentCreateType\">\n        <el-tab-pane label=\"\" name=\"blank\">\n          <el-form \n            :model=\"newDocumentForm\" \n            label-width=\"80px\" \n            class=\"mt-4\"\n            :rules=\"blankFormRules\"\n            ref=\"blankFormRef\"\n          >\n            <el-form-item label=\"\" prop=\"title\">\n              <el-input v-model=\"newDocumentForm.title\" placeholder=\"\" />\n      </el-form-item>\n            <el-form-item label=\"\">\n              <el-input v-model=\"newDocumentForm.type\" placeholder=\"\" />\n              <div class=\"form-tip\"></div>\n            </el-form-item>\n          </el-form>\n        </el-tab-pane>\n        <el-tab-pane label=\"AI\" name=\"ai\">\n          <el-form \n            :model=\"aiDocumentForm\" \n            label-width=\"80px\" \n            class=\"mt-4\"\n            :rules=\"aiFormRules\"\n            ref=\"aiFormRef\"\n          >\n            <el-form-item label=\"\" prop=\"title\">\n              <el-input v-model=\"aiDocumentForm.title\" placeholder=\"\" />\n            </el-form-item>\n            <el-form-item label=\"\" prop=\"requirements\">\n        <el-input\n                v-model=\"aiDocumentForm.requirements\" \n          type=\"textarea\"\n                :rows=\"3\" \n                placeholder=\"\"\n        />\n              <div class=\"form-tip\"></div>\n      </el-form-item>\n    </el-form>\n        </el-tab-pane>\n      </el-tabs>\n    <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"newDocumentDialogVisible = false\"></el-button>\n          <el-button type=\"primary\" @click=\"submitNewDocument\" :loading=\"createLoading\">\n            \n          </el-button>\n        </span>\n      </template>\n    </el-dialog>\n    \n    <!--  -->\n    <el-dialog\n      v-model=\"shareDialogVisible\"\n      title=\"\"\n      width=\"30%\"\n    >\n      <div v-if=\"selectedDocument\">\n        <p>: <strong>{{ selectedDocument.title }}</strong></p>\n        <el-form label-width=\"120px\" class=\"mt-4\">\n          <el-form-item label=\"\">\n            <el-select\n              v-model=\"selectedUsers\"\n              multiple\n              placeholder=\"\"\n              style=\"width: 100%\"\n            >\n              <el-option\n                v-for=\"user in availableUsers\"\n                :key=\"user.id\"\n                :label=\"user.username\"\n                :value=\"user.id\"\n              />\n            </el-select>\n          </el-form-item>\n        </el-form>\n      </div>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"shareDialogVisible = false\"></el-button>\n          <el-button type=\"primary\" @click=\"confirmShare\" :loading=\"shareLoading\">\n            \n          </el-button>\n        </span>\n    </template>\n  </el-dialog>\n    \n    <!--  -->\n    <el-dialog\n      v-model=\"deleteDialogVisible\"\n      title=\"\"\n      width=\"30%\"\n    >\n      <div v-if=\"selectedDocument\">\n        <p> <strong>{{ selectedDocument.title }}</strong> ?</p>\n        <p class=\"warning-text\">!</p>\n  </div>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"deleteDialogVisible = false\"></el-button>\n          <el-button type=\"danger\" @click=\"confirmDelete\" :loading=\"deleteLoading\">\n            \n          </el-button>\n        </span>\n      </template>\n    </el-dialog>\n    \n    <!--  -->\n    <el-dialog\n      v-model=\"categoryDialogVisible\"\n      title=\"\"\n      width=\"40%\"\n    >\n      <div class=\"category-management\">\n        <div class=\"category-list\">\n          <h4></h4>\n          <el-table :data=\"documentCategories\" style=\"width: 100%\">\n            <el-table-column prop=\"name\" label=\"\" />\n            <el-table-column label=\"\" width=\"120\">\n              <template #default=\"scope\">\n                <div class=\"color-preview\" :style=\"{ backgroundColor: scope.row.color }\"></div>\n                {{ scope.row.color }}\n              </template>\n            </el-table-column>\n            <el-table-column label=\"\" width=\"100\">\n              <template #default=\"scope\">\n                {{ scope.row.document_count || 0 }}\n              </template>\n            </el-table-column>\n            <el-table-column label=\"\" width=\"150\">\n              <template #default=\"scope\">\n                <el-button type=\"primary\" link @click=\"editCategory(scope.row)\"></el-button>\n                <el-button \n                  type=\"danger\" \n                  link \n                  @click=\"deleteCategory(scope.row)\"\n                  :disabled=\"scope.row.document_count > 0\"\n                ></el-button>\n              </template>\n            </el-table-column>\n          </el-table>\n        </div>\n        \n        <el-divider />\n        \n        <div class=\"category-form\">\n          <h4>{{ editingCategory.id ? '' : '' }}</h4>\n          <el-form \n            :model=\"editingCategory\" \n            :rules=\"categoryFormRules\" \n            label-width=\"80px\"\n            ref=\"categoryFormRef\"\n          >\n            <el-form-item label=\"\" prop=\"name\">\n              <el-input v-model=\"editingCategory.name\" placeholder=\"\" />\n            </el-form-item>\n            <el-form-item label=\"\" prop=\"color\">\n              <el-color-picker v-model=\"editingCategory.color\" />\n              <span class=\"color-value\">{{ editingCategory.color }}</span>\n            </el-form-item>\n            <el-form-item label=\"\">\n              <el-input \n                v-model=\"editingCategory.description\" \n                type=\"textarea\" \n                :rows=\"3\" \n                placeholder=\"\" \n              />\n            </el-form-item>\n            <el-form-item>\n              <el-button type=\"primary\" @click=\"submitCategory\" :loading=\"categoryLoading\">\n                {{ editingCategory.id ? '' : '' }}\n              </el-button>\n              <el-button @click=\"resetCategoryForm\"></el-button>\n            </el-form-item>\n          </el-form>\n        </div>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { ref, computed, onMounted, nextTick, getCurrentInstance, provide, onActivated, watch } from 'vue'\nimport { useRouter, useRoute } from 'vue-router'\nimport { ElMessage, ElMessageBox } from 'element-plus'\nimport { Search, Plus, EditPen, Share, Folder, Close, More, Document } from '@element-plus/icons-vue'\nimport _ from 'lodash'\nimport { \n  getDocuments,\n  getRecentDocuments,\n  getSharedDocuments,\n  getDocumentCategories,\n  createDocument,\n  deleteDocument as apiDeleteDocument,\n  shareDocument as apiShareDocument,\n  createDocumentCategory,\n  updateDocumentCategory,\n  deleteDocumentCategory,\n  aiGenerateDocument\n} from '@/api/smartdoc'\n\nexport default {\n  name: 'SmartDocHome',\n  components: {\n    Search,\n    Plus,\n    EditPen,\n    Share,\n    Folder,\n    Close,\n    More,\n    Document\n  },\n  setup() {\n    const router = useRouter()\n    const route = useRoute()\n    const { proxy } = getCurrentInstance() // \n    \n    // \n    const refreshTrigger = ref(Date.now())\n    \n    // \n    const documents = ref([])\n    const recentDocuments = ref([])\n    const sharedDocuments = ref([])\n    const documentCategories = ref([])\n    const searchQuery = ref('')\n    const searchCategory = ref('all')\n    const newDocumentDialogVisible = ref(false)\n    const shareDialogVisible = ref(false)\n    const deleteDialogVisible = ref(false)\n    const documentCreateType = ref('blank')\n    const selectedDocument = ref(null)\n    const selectedUsers = ref([])\n    const availableUsers = ref([])\n    const createLoading = ref(false)\n    const shareLoading = ref(false)\n    const deleteLoading = ref(false)\n    const loadingMore = ref(false)\n    \n    // \n    const page = ref(1)\n    const pageSize = 10\n    const hasMore = ref(true)\n    const totalCount = ref(0)\n    \n    // \n    const newDocumentForm = ref({\n        title: '',\n        type: ''\n    })\n    \n    const aiDocumentForm = ref({\n        title: '',\n      requirements: ''\n    })\n    \n    // \n    const blankFormRules = {\n        title: [\n        { required: true, message: '', trigger: 'blur' },\n        { min: 2, max: 50, message: ' 2  50 ', trigger: 'blur' }\n        ]\n    }\n    \n    const aiFormRules = {\n        title: [\n        { required: true, message: '', trigger: 'blur' },\n        { min: 2, max: 50, message: ' 2  50 ', trigger: 'blur' }\n        ],\n        requirements: [\n        { required: true, message: '', trigger: 'blur' },\n        { min: 10, max: 500, message: ' 10  500 ', trigger: 'blur' }\n      ]\n    }\n    \n    const blankFormRef = ref(null)\n    const aiFormRef = ref(null)\n    \n    // \n    const totalDocuments = computed(() => {\n      return totalCount.value || documents.value.length || 0;\n    });\n    \n    const recentEditCount = computed(() => {\n      return recentDocuments.value.length || 0;\n    });\n    \n    // \n    const categoryDialogVisible = ref(false)\n    const editingCategory = ref({\n      name: '',\n      color: '#409EFF',\n      description: '',\n    })\n    const categoryFormRef = ref(null)\n    const categoryLoading = ref(false)\n    const categoryFormRules = {\n      name: [\n        { required: true, message: '', trigger: 'blur' },\n        { min: 2, max: 20, message: '220', trigger: 'blur' }\n      ],\n      color: [\n        { required: true, message: '', trigger: 'change' }\n      ]\n    }\n    \n    // \n    const forceUpdate = async () => {\n      // \n      documents.value = [...documents.value];\n      recentDocuments.value = [...recentDocuments.value]; \n      sharedDocuments.value = [...sharedDocuments.value];\n      \n      // Vue$forceUpdate\n      if (proxy && proxy.$forceUpdate) {\n        proxy.$forceUpdate();\n      }\n      \n      // DOM\n      await nextTick();\n    };\n    \n    // \n    const fetchDocuments = async (forceRefresh = false, append = false) => {\n      if (forceRefresh) {\n        page.value = 1\n        hasMore.value = true\n      }\n      if (!hasMore.value && !forceRefresh) return\n      \n      if (!append) {\n        createLoading.value = true\n      } else {\n        loadingMore.value = true\n      }\n      \n      try {\n        const params = {\n          page: page.value,\n          limit: 100, // 10\n          _t: new Date().getTime() // \n        }\n        \n        // searchCategory'all'category\n        if (searchCategory.value && searchCategory.value !== 'all') {\n          params.category = searchCategory.value\n          console.log(':', searchCategory.value);\n        } else {\n          console.log('');\n        }\n        \n        if (searchQuery.value) {\n          params.search = searchQuery.value\n        }\n        \n        console.log(':', JSON.stringify(params));\n        const res = await getDocuments(params)\n        console.log(':', res);\n        \n        if (res && res.data) {\n          // DRF\n          let list = [];\n          let total = 0;\n          let nextPage = false;\n          \n          // DRF\n          if (res.results && Array.isArray(res.results)) {\n            list = res.results;\n            total = res.count || 0;\n            nextPage = !!res.next;\n            console.log(`DRF${list.length}:${total}`);\n          }\n          // request.js\n          else if (Array.isArray(res.data)) {\n            list = res.data;\n            total = res.count || res.total || list.length;\n            nextPage = list.length > 0 && documents.value.length + list.length < total;\n            console.log(`${list.length}:${total}`);\n          }\n          // \n          else {\n            list = Array.isArray(res.data) ? res.data : [res.data];\n            total = res.count || res.total || list.length;\n            nextPage = list.length > 0 && documents.value.length + list.length < total;\n            console.log(`${list.length}:${total}`);\n          }\n\n          // \n          if (append && documents.value.length > 0) {\n            const existingIds = new Set(documents.value.map(doc => doc.id));\n            list = list.filter(doc => !existingIds.has(doc.id));\n            console.log(`${list.length}`);\n          }\n          \n          if (append) {\n            // \n            documents.value = [...documents.value, ...list]\n          } else {\n            // \n            documents.value = [...list]\n          }\n          \n          // \n          totalCount.value = total\n          \n          // \n          hasMore.value = nextPage || (documents.value.length < total && list.length > 0);\n          \n          // \n          console.log(`${documents.value.length}/${total}, :`, hasMore.value, '(nextPage:', nextPage, ')');\n          \n          // \n          if (hasMore.value && documents.value.length < 50 && !loadingMore.value) {\n            console.log(\"\");\n            page.value++;\n            // 100ms\n            await new Promise(resolve => setTimeout(resolve, 100));\n            await fetchDocuments(false, true);\n          }\n          \n        } else {\n          console.warn('API:', res);\n          if (!append) {\n            documents.value = []\n          }\n          hasMore.value = false\n        }\n      } catch (error) {\n        console.error(':', error);\n        ElMessage.error('');\n        if (!append) {\n          documents.value = []\n        }\n        hasMore.value = false\n      } finally {\n        createLoading.value = false\n        loadingMore.value = false\n      }\n    }\n    \n    const fetchRecentDocuments = async (forceRefresh = false) => {\n      console.log('...');\n      try {\n        // \n        const params = forceRefresh ? { _t: new Date().getTime() } : {};\n        \n        const res = await getRecentDocuments(params);\n        console.log('API:', res);\n        \n        if (res && res.data) {\n          // \n          recentDocuments.value = Array.isArray(res.data) ? [...res.data] : [];\n          console.log(`: ${recentDocuments.value.length}`);\n        } else {\n          console.warn('API:', res);\n          recentDocuments.value = [];\n        }\n      } catch (error) {\n        console.error(':', error);\n        ElMessage.error('');\n        recentDocuments.value = [];\n      }\n    }\n    \n    const fetchSharedDocuments = async () => {\n      try {\n        const response = await getSharedDocuments()\n        sharedDocuments.value = response.data\n      } catch (error) {\n        console.error('', error)\n        ElMessage.error('')\n      }\n    }\n    \n    const fetchDocumentCategories = async (retryCount = 0) => {\n      console.log('...');\n      try {\n        const res = await getDocumentCategories();\n        console.log('API:', res);\n        \n        if (res && res.data) {\n          documentCategories.value = res.data;\n          console.log(`: ${documentCategories.value.length}, :`, documentCategories.value);\n        } else {\n          console.warn('API:', res);\n          documentCategories.value = [];\n          \n          // \n          if (documentCategories.value.length === 0 && retryCount < 2) {\n            console.log(`${retryCount + 1}...`);\n            setTimeout(() => fetchDocumentCategories(retryCount + 1), (retryCount + 1) * 1000);\n          }\n        }\n      } catch (error) {\n        console.error(':', error);\n        \n        // \n        if (error.response && error.response.status >= 500 && retryCount < 2) {\n          console.log(`${retryCount + 1}...`);\n          setTimeout(() => fetchDocumentCategories(retryCount + 1), (retryCount + 1) * 1000);\n        } else {\n          ElMessage.error('');\n          // \n          documentCategories.value = [];\n        }\n      }\n    }\n    \n    // \n    const debouncedSearch = _.debounce(async () => {\n      page.value = 1\n      hasMore.value = true\n      await fetchDocuments(true)\n    }, 500)\n    \n    const createNewDocument = () => {\n      // \n      newDocumentForm.value = { title: '', type: '' }\n      aiDocumentForm.value = { title: '', requirements: '' }\n      documentCreateType.value = 'blank'\n      newDocumentDialogVisible.value = true\n      \n      // \n      nextTick(() => {\n        try {\n          const dialog = document.querySelector('.el-dialog');\n          if (dialog) {\n            dialog.addEventListener('closed', () => {\n              try {\n                if (blankFormRef.value) {\n                  blankFormRef.value.clearValidate();\n                }\n                if (aiFormRef.value) {\n                  aiFormRef.value.clearValidate();\n                }\n              } catch (err) {\n                console.error('Error clearing form validation:', err);\n              }\n            }, { once: true });\n          }\n        } catch (err) {\n          console.error('Error setting up dialog event listener:', err);\n        }\n      });\n    }\n    \n    const submitNewDocument = async () => {\n      if (documentCreateType.value === 'blank') {\n        if (!blankFormRef.value) {\n          console.warn('');\n          return;\n        }\n        \n        try {\n          const valid = await blankFormRef.value.validate()\n            .catch(err => {\n              console.error(':', err);\n              return false;\n            });\n          \n          if (valid) {\n            createLoading.value = true;\n            try {\n              console.log(':', {\n                title: newDocumentForm.value.title,\n                type: newDocumentForm.value.type || ''\n              });\n              \n              const response = await createDocument({ \n                title: newDocumentForm.value.title,\n                type: newDocumentForm.value.type || '',\n                content: ''\n              });\n              \n              console.log('', JSON.stringify(response));\n              \n              // \n              newDocumentDialogVisible.value = false;\n              ElMessage.success('');\n              \n              // ID\n              let docId = null;\n              if (response && response.data) {\n                if (response.data.id) {\n                  docId = response.data.id;\n                } else if (Array.isArray(response.data) && response.data.length > 0) {\n                  docId = response.data[0].id;\n                } else if (response.data.results && Array.isArray(response.data.results) && response.data.results.length > 0) {\n                  docId = response.data.results[0].id;\n                }\n              }\n              \n              // DOM\n              setTimeout(() => {\n                if (docId) {\n                  console.log(`ID: ${docId}`);\n                  \n                  // \n                  fetchDocuments();\n                  fetchRecentDocuments();\n                  \n                  // \n                  setTimeout(() => {\n                    router.push({\n                      name: 'SmartDocDetail',\n                      params: { id: docId }\n                    }).then(() => {\n                      createLoading.value = false;\n                    }).catch(err => {\n                      console.error(':', err);\n                      ElMessage.error('');\n                      // \n                      router.push(`/smartdoc/${docId}`).catch(navErr => {\n                        console.error(':', navErr);\n                        ElMessage.error('');\n                      });\n                      createLoading.value = false;\n                    });\n                  }, 300);\n                } else {\n                  console.warn('', response);\n                  // \n                  fetchDocuments();\n                  fetchRecentDocuments();\n                }\n              }, 100);\n            } catch (error) {\n              console.error('', error);\n              ElMessage.error('');\n            } finally {\n              createLoading.value = false;\n            }\n          }\n        } catch (error) {\n          console.error(':', error);\n          ElMessage.error('');\n          createLoading.value = false;\n        }\n      } else if (documentCreateType.value === 'ai') {\n        if (!aiFormRef.value) {\n          console.warn('AI');\n          return;\n        }\n        \n        try {\n          const valid = await aiFormRef.value.validate()\n            .catch(err => {\n              console.error('AI:', err);\n              return false;\n            });\n          \n          if (valid) {\n            createLoading.value = true;\n            try {\n              // AIAPI\n              const categoryId = searchCategory.value !== 'all' ? searchCategory.value : null;\n              const response = await aiGenerateDocument({\n                title: aiDocumentForm.value.title,\n                requirement: aiDocumentForm.value.requirements,\n                category_id: categoryId,\n                doc_type: 'AI'\n              });\n              console.log('AI', response);\n              // \n              if (response && response.status === 504) {\n                ElMessage.error(response.data?.detail || 'AI');\n                createLoading.value = false;\n                return;\n              }\n              if (response && response.data && typeof response.data.detail === 'string' && response.data.detail.includes('')) {\n                ElMessage.error(response.data.detail);\n                createLoading.value = false;\n                return;\n              }\n              newDocumentDialogVisible.value = false;\n              ElMessage.success('AI');\n              let docId = null;\n              if (response && response.data && response.data.id) {\n                docId = response.data.id;\n              }\n              if (docId) {\n                // \n                console.log(': SmartDocDetail, id:', docId);\n                router.push({\n                  name: 'SmartDocDetail',\n                  params: { id: String(docId) }\n                }).then(() => {\n                  createLoading.value = false;\n                }).catch(err => {\n                  console.error(':', err);\n                  ElMessage.error('');\n                  // \n                  router.push(`/smartdoc/${docId}`).catch(navErr => {\n                    console.error(':', navErr);\n                    ElMessage.error('');\n                  });\n                  createLoading.value = false;\n                });\n                // \n                fetchDocuments();\n                fetchRecentDocuments();\n              } else {\n                fetchDocuments();\n                fetchRecentDocuments();\n                createLoading.value = false;\n              }\n            } catch (error) {\n              console.error('AI', error);\n              ElMessage.error('AI');\n            } finally {\n              createLoading.value = false;\n            }\n          }\n        } catch (error) {\n          console.error('AI:', error);\n          ElMessage.error('');\n          createLoading.value = false;\n        }\n      }\n    }\n    \n    const openDocument = (doc) => {\n      router.push({ name: 'SmartDocDetail', params: { id: doc.id } })\n    }\n    \n    const renameDocument = (doc) => {\n      ElMessageBox.prompt('', '', {\n        confirmButtonText: '',\n        cancelButtonText: '',\n        inputValue: doc.title,\n        inputValidator: (value) => {\n          if (!value) {\n            return ''\n          }\n          return true\n        }\n      }).then(({ value }) => {\n        // API\n        ElMessage.info(`: ${value}`)\n      }).catch(() => {})\n    }\n    \n    const duplicateDocument = (doc) => {\n      ElMessage.info(`: ${doc.title}`)\n    }\n    \n    const shareDocument = (doc) => {\n      selectedDocument.value = doc\n      // API\n      availableUsers.value = [\n        { id: 1, username: '' },\n        { id: 2, username: '' },\n        { id: 3, username: '' }\n      ]\n      selectedUsers.value = []\n      shareDialogVisible.value = true\n    }\n    \n    const confirmShare = async () => {\n      if (!selectedDocument.value || selectedUsers.value.length === 0) {\n        ElMessage.warning('')\n        return\n      }\n      \n      shareLoading.value = true\n      try {\n        await apiShareDocument(selectedDocument.value.id, selectedUsers.value)\n        ElMessage.success('')\n        shareDialogVisible.value = false\n        fetchSharedDocuments()\n      } catch (error) {\n        console.error('', error)\n        ElMessage.error('')\n      } finally {\n        shareLoading.value = false\n      }\n    }\n    \n    const deleteDocument = (doc) => {\n      selectedDocument.value = doc\n      deleteDialogVisible.value = true\n    }\n    \n    const confirmDelete = async () => {\n      if (!selectedDocument.value) return\n      \n      deleteLoading.value = true\n      try {\n        // ID\n        const deletedDocId = selectedDocument.value.id;\n        const deletedDocCategoryId = selectedDocument.value.category?.id;\n        \n        // \n        deleteDialogVisible.value = false;\n        \n        // \n        await apiDeleteDocument(deletedDocId)\n        ElMessage.success('')\n        \n        // \n        selectedDocument.value = null;\n        \n        // \n        if (window.localStorage) {\n          try {\n            // \n            localStorage.removeItem(`doc_cache_${deletedDocId}`);\n            localStorage.removeItem(`recent_docs_cache`);\n            localStorage.removeItem(`doc_list_cache`);\n          } catch (e) {\n            console.error(':', e);\n          }\n        }\n        \n        // \n        refreshTrigger.value = Date.now();\n        \n        // Vue \n        documents.value = [...documents.value.filter(doc => doc.id !== deletedDocId)];\n        recentDocuments.value = [...recentDocuments.value.filter(doc => doc.id !== deletedDocId)];\n        sharedDocuments.value = [...sharedDocuments.value.filter(doc => doc.id !== deletedDocId)];\n        \n        // \n        await forceUpdate();\n        \n        // \n        if (deletedDocCategoryId) {\n          const category = documentCategories.value.find(c => c.id === deletedDocCategoryId);\n          if (category && category.document_count > 0) {\n            category.document_count--;\n          }\n        }\n        \n        // DOM\n        await nextTick();\n        \n        // \n        if (router.currentRoute.value.name === 'SmartDocDetail') {\n          console.log('');\n          \n          // \n          await reloadAllData();\n          \n          // replace\n          router.replace({ \n            name: 'SmartDoc',\n            query: { _refresh: Date.now() } // \n          });\n        } else {\n          // \n          await refreshData();\n        }\n      } catch (error) {\n        console.error('', error);\n        ElMessage.error('');\n        // \n        deleteDialogVisible.value = false;\n      } finally {\n        deleteLoading.value = false;\n      }\n    }\n    \n    const viewAllDocuments = (type) => {\n      if (type === 'recent') {\n        // SmartDocList\n        router.push({ name: 'SmartDoc' }).then(() => {\n          setTimeout(() => {\n            const docSection = document.querySelector('.section');\n            if (docSection) {\n              docSection.scrollIntoView({ behavior: 'smooth' });\n            }\n          }, 300);\n        });\n      }\n    }\n    \n    const selectCategory = (category) => {\n      console.log(':', category);\n      \n      // category\n      let categoryId;\n      if (category === 'all') {\n        categoryId = 'all';\n      } else if (typeof category === 'string') {\n        categoryId = category;\n      } else if (typeof category === 'object' && category !== null) {\n        categoryId = category.id.toString();\n      }\n      \n      console.log('ID:', categoryId);\n      \n      // ID\n      searchCategory.value = categoryId;\n      \n      // \n      documents.value = [];\n      createLoading.value = true;\n      \n      // \n      page.value = 1;\n      hasMore.value = true;\n      \n      // \n      setTimeout(async () => {\n        try {\n          // \n          await fetchDocuments(true);\n        } catch (error) {\n          console.error(':', error);\n          ElMessage.error('');\n        } finally {\n          createLoading.value = false;\n        }\n        \n        // \n        const docCards = document.querySelectorAll('.doc-card');\n        if (docCards && docCards.length > 0) {\n          docCards.forEach((card, index) => {\n            if (card) {\n              card.style.animationDelay = `${index * 50}ms`;\n              card.classList.remove('fadeIn');\n              setTimeout(() => {\n                if (card) {\n                  card.classList.add('fadeIn');\n                }\n              }, 10);\n            }\n          });\n        }\n      }, 300);\n    };\n\n    // \n    const getSelectedCategoryColor = () => {\n      if (searchCategory.value === 'all') return '#409EFF';\n      const selectedCategory = documentCategories.value.find(c => c.id.toString() === searchCategory.value);\n      return selectedCategory?.color || '#67C23A';\n    };\n\n    // \n    const getSelectedCategoryName = () => {\n      if (searchCategory.value === 'all') return '';\n      const selectedCategory = documentCategories.value.find(c => c.id.toString() === searchCategory.value);\n      return selectedCategory?.name || '';\n    };\n    \n    const manageCategories = () => {\n      categoryDialogVisible.value = true\n      resetCategoryForm()\n    }\n    \n    const editCategory = (category) => {\n      editingCategory.value = { ...category }\n    }\n    \n    const resetCategoryForm = () => {\n      editingCategory.value = {\n        id: '',\n        name: '',\n        color: '#409EFF',\n        description: ''\n      }\n      if (categoryFormRef.value) {\n        categoryFormRef.value.resetFields()\n      }\n    }\n    \n    const submitCategory = async () => {\n      if (!categoryFormRef.value) return\n      \n      await categoryFormRef.value.validate(async (valid) => {\n        if (valid) {\n          categoryLoading.value = true\n          try {\n            const categoryData = {\n              name: editingCategory.value.name,\n              color: editingCategory.value.color,\n              description: editingCategory.value.description || ''\n            }\n            \n            if (editingCategory.value.id) {\n              // \n              await updateDocumentCategory(editingCategory.value.id, categoryData)\n              ElMessage.success('')\n            } else {\n              // \n              await createDocumentCategory(categoryData)\n              ElMessage.success('')\n            }\n            \n            // \n            fetchDocumentCategories()\n            resetCategoryForm()\n          } catch (error) {\n            console.error(':', error)\n            ElMessage.error('')\n          } finally {\n            categoryLoading.value = false\n          }\n        }\n      })\n    }\n    \n    const deleteCategory = (category) => {\n      if (category.document_count > 0) {\n        ElMessage.warning('')\n        return\n      }\n      \n      ElMessageBox.confirm(\n        `\"${category.name}\"`,\n        '',\n        {\n          confirmButtonText: '',\n          cancelButtonText: '',\n          type: 'warning'\n        }\n      ).then(async () => {\n        try {\n          await deleteDocumentCategory(category.id)\n          ElMessage.success('')\n          fetchDocumentCategories()\n        } catch (error) {\n          console.error(':', error)\n          ElMessage.error('')\n        }\n      }).catch(() => {})\n    }\n    \n    const formatDate = (dateString) => {\n      const date = new Date(dateString)\n      const now = new Date()\n      \n      // \n      if (date.toDateString() === now.toDateString()) {\n        return date.toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' })\n      }\n      \n      // \n      const yesterday = new Date(now)\n      yesterday.setDate(now.getDate() - 1)\n      if (date.toDateString() === yesterday.toDateString()) {\n        return ''\n      }\n      \n      // \n      const weekDays = ['', '', '', '', '', '', '']\n      const diffDays = Math.round((now - date) / (1000 * 60 * 60 * 24))\n      if (diffDays < 7) {\n        return weekDays[date.getDay()]\n      }\n      \n      // \n      return date.toLocaleDateString('zh-CN', { month: 'numeric', day: 'numeric' })\n    }\n    \n    const resetCategoryFilter = () => {\n      searchCategory.value = 'all'\n      page.value = 1\n      hasMore.value = true\n      fetchDocuments(true)\n    }\n    \n    // \n    onActivated(() => {\n      console.log('SmartDoc');\n      reloadAllData();\n    });\n\n    // \n    const reloadAllData = async () => {\n      page.value = 1\n      hasMore.value = true\n      try {\n        console.log('...')\n        createLoading.value = true\n        \n        // \n        await fetchDocumentCategories()\n        \n        // \n        await Promise.all([\n          fetchDocuments(true),\n          fetchRecentDocuments(true),\n          fetchSharedDocuments()\n        ])\n        \n        console.log('', {\n          : documentCategories.value.length,\n          : documents.value.length,\n          : recentDocuments.value.length,\n          : sharedDocuments.value.length,\n          : totalCount.value,\n        })\n        \n        // \n        await forceUpdate()\n        \n        // \n        if (documents.value.length > 0 && \n            documents.value.length < totalCount.value && \n            documents.value.length < pageSize) {\n          console.log('...')\n          await loadMoreDocuments()\n        }\n      } catch (error) {\n        console.error(':', error)\n        ElMessage.error('')\n      } finally {\n        createLoading.value = false\n      }\n    }\n\n    // \n    provide('reloadDocuments', reloadAllData);\n    \n    // \n    watch(() => route.query._refresh, (newVal) => {\n      if (newVal) {\n        console.log(':', newVal);\n        refreshTrigger.value = Date.now();\n        reloadAllData();\n      }\n    });\n\n    // \n    watch(() => route.path, (newPath, oldPath) => {\n      console.log(':', oldPath, '->', newPath);\n      if (newPath === '/smartdoc' && oldPath && oldPath.startsWith('/smartdoc/')) {\n        // \n        console.log('');\n        refreshTrigger.value = Date.now();\n        reloadAllData();\n      }\n    });\n\n    // \n    const refreshData = async () => {\n      page.value = 1\n      hasMore.value = true\n      await reloadAllData()\n      if (proxy && proxy.$forceUpdate) {\n        proxy.$forceUpdate()\n      }\n    }\n\n    // \n    const loadMoreDocuments = async () => {\n      if (!hasMore.value) {\n        console.log('');\n        return;\n      }\n      \n      console.log(`: ${page.value} -> ${page.value + 1}`);\n      loadingMore.value = true;\n      try {\n        page.value += 1;\n        await fetchDocuments(false, true);\n      } finally {\n        loadingMore.value = false;\n      }\n    }\n\n    // \n    onMounted(() => {\n      console.log('SmartDocmounted');\n      reloadAllData(); // \n    })\n    \n    return {\n      documents,\n      recentDocuments,\n      sharedDocuments,\n      documentCategories,\n      searchQuery,\n      searchCategory,\n      debouncedSearch,\n      totalDocuments,\n      recentEditCount,\n      newDocumentDialogVisible,\n      shareDialogVisible,\n      deleteDialogVisible,\n      documentCreateType,\n      newDocumentForm,\n      aiDocumentForm,\n      blankFormRules,\n      aiFormRules,\n      blankFormRef,\n      aiFormRef,\n      selectedDocument,\n      selectedUsers,\n      availableUsers,\n      createLoading,\n      shareLoading,\n      deleteLoading,\n      createNewDocument,\n      submitNewDocument,\n      openDocument,\n      renameDocument,\n      duplicateDocument,\n      shareDocument,\n      confirmShare,\n      deleteDocument,\n      confirmDelete,\n      viewAllDocuments,\n      formatDate,\n      categoryDialogVisible,\n      editingCategory,\n      categoryFormRef,\n      categoryLoading,\n      categoryFormRules,\n      editCategory,\n      resetCategoryForm,\n      submitCategory,\n      deleteCategory,\n      resetCategoryFilter,\n      selectCategory,\n      getSelectedCategoryColor,\n      getSelectedCategoryName,\n      manageCategories,\n      reloadAllData,\n      refreshData,\n      refreshTrigger,\n      hasMore,\n      loadingMore,\n      loadMoreDocuments\n    }\n  }\n}\n</script>\n\n<style scoped>\n.smartdoc-home-container {\n  padding: 24px;\n  max-width: 1280px;\n  margin: 0 auto;\n}\n\n/*  */\n.page-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 24px;\n}\n\n.page-title {\n  font-size: 24px;\n  font-weight: 600;\n  margin: 0;\n  color: #303133;\n}\n\n.page-description {\n  margin: 4px 0 0 0;\n  color: #606266;\n  font-size: 14px;\n}\n\n.right-section {\n  display: flex;\n  gap: 16px;\n  align-items: center;\n}\n\n.search-controls {\n  display: flex;\n  gap: 16px;\n  align-items: center;\n}\n\n.search-input {\n  width: 240px;\n}\n\n/*  */\n.stats-cards {\n  display: flex;\n  gap: 16px;\n  margin-bottom: 24px;\n}\n\n.stat-card {\n  flex: 1;\n  min-width: 0;\n}\n\n.stat-content {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n}\n\n.stat-icon {\n  width: 48px;\n  height: 48px;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 24px;\n  color: white;\n}\n\n.doc-icon {\n  background-color: #409EFF;\n}\n\n.edit-icon {\n  background-color: #67C23A;\n}\n\n.share-icon {\n  background-color: #E6A23C;\n}\n\n.stat-info {\n  display: flex;\n  flex-direction: column;\n}\n\n.stat-value {\n  font-size: 24px;\n  font-weight: 600;\n  color: #303133;\n}\n\n.stat-label {\n  font-size: 14px;\n  color: #909399;\n}\n\n/*  */\n.section {\n  margin-bottom: 32px;\n}\n\n/*  */\n.category-section {\n  margin-bottom: 16px;\n}\n\n.section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n}\n\n.section-header h3 {\n  font-size: 18px;\n  font-weight: 600;\n  margin: 0;\n  color: #303133;\n}\n\n.section-actions {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.filter-tag {\n  background-color: #f0f2f5;\n  padding: 4px 8px;\n  border-radius: 4px;\n  font-size: 13px;\n  color: #606266;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n/*  */\n.document-cards {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n  gap: 20px;\n  margin-bottom: 30px;\n}\n\n.doc-card {\n  height: 240px;\n  display: flex;\n  flex-direction: column;\n  cursor: pointer;\n  transition: all 0.3s;\n  position: relative;\n  overflow: hidden;\n}\n\n.doc-card:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n\n.doc-card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 12px;\n}\n\n.doc-info {\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  gap: 8px;\n}\n\n.doc-type-tag {\n  font-size: 12px;\n  color: #606266;\n  background-color: #f5f7fa;\n  padding: 2px 8px;\n  border-radius: 4px;\n  white-space: nowrap;\n}\n\n.doc-category-tag {\n  font-size: 12px;\n  color: white;\n  padding: 2px 8px;\n  border-radius: 4px;\n  white-space: nowrap;\n  display: inline-flex;\n  align-items: center;\n}\n\n.doc-title {\n  font-size: 16px;\n  font-weight: 500;\n  margin: 0 0 10px 0;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  color: #303133;\n}\n\n.doc-preview {\n  flex: 1;\n  font-size: 13px;\n  color: #606266;\n  overflow: hidden;\n  display: -webkit-box;\n  -webkit-line-clamp: 4;\n  -webkit-box-orient: vertical;\n  line-height: 1.5;\n  margin-bottom: 10px;\n}\n\n.doc-footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-top: 8px;\n  border-top: 1px solid #ebeef5;\n  margin-top: auto;\n}\n\n.doc-time {\n  font-size: 12px;\n  color: #909399;\n}\n\n.doc-actions {\n  display: flex;\n  gap: 4px;\n}\n\n.new-doc-card {\n  border: 1px dashed #dcdfe6;\n  background-color: #f8f9fb;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s;\n}\n\n.new-doc-card:hover {\n  border-color: #409EFF;\n  color: #409EFF;\n  background-color: #ecf5ff;\n}\n\n.new-doc-content {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  color: #909399;\n}\n\n.new-doc-content .el-icon {\n  font-size: 32px;\n}\n\n/*  */\n.category-cards {\n  display: flex;\n  gap: 16px;\n  overflow-x: auto;\n  padding-bottom: 8px;\n}\n\n.category-card {\n  min-width: 180px;\n  height: 80px;\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  transition: all 0.3s;\n  border-radius: 8px;\n  padding: 12px 16px;\n  border: 2px solid transparent;\n  position: relative;\n  overflow: hidden;\n  background-color: #f5f7fa;\n}\n\n.category-card:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.08);\n  background-color: #f0f5ff;\n}\n\n.category-active {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  border-color: #409EFF;\n  background-color: #ecf5ff;\n}\n\n.category-selected-indicator {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 3px;\n  background-color: #409EFF;\n  transition: all 0.3s;\n}\n\n.category-icon {\n  width: 36px;\n  height: 36px;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 18px;\n  color: white;\n  margin-right: 12px;\n  transition: all 0.3s;\n}\n\n.category-active .category-icon {\n  transform: scale(1.1);\n}\n\n.category-info {\n  display: flex;\n  flex-direction: column;\n}\n\n.category-info h4 {\n  margin: 0 0 4px 0;\n  font-size: 15px;\n  font-weight: 500;\n  color: #303133;\n  transition: all 0.3s;\n}\n\n.category-active .category-info h4 {\n  color: #409EFF;\n  font-weight: 600;\n}\n\n.category-count {\n  font-size: 12px;\n  color: #909399;\n}\n\n.mt-4 {\n  margin-top: 16px;\n}\n\n.form-tip {\n  font-size: 12px;\n  color: #909399;\n  margin-top: 4px;\n}\n\n.category-management {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.category-list {\n  margin-bottom: 20px;\n}\n\n.category-form {\n  margin-top: 20px;\n}\n\n.color-preview {\n  display: inline-block;\n  width: 20px;\n  height: 20px;\n  border-radius: 4px;\n  margin-right: 8px;\n  vertical-align: middle;\n}\n\n.color-value {\n  margin-left: 12px;\n  color: #606266;\n}\n\n.category-select {\n  width: 200px;\n}\n\n.doc-menu {\n  color: #909399;\n  cursor: pointer;\n}\n\n.filter-controls {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.empty-state {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 200px;\n}\n\n.loading-state {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 200px;\n}\n\n/*  */\n.filter-status-bar {\n  background-color: #ecf5ff;\n  padding: 12px 20px;\n  margin-bottom: 20px;\n  border-radius: 8px;\n  transition: all 0.3s ease;\n  animation: slideDown 0.3s ease-in-out;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);\n  border-left: 4px solid #409EFF;\n  position: relative;\n  overflow: hidden;\n}\n\n.filter-status-bar::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(135deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.3) 50%, rgba(255,255,255,0) 100%);\n  animation: shimmer 2s infinite;\n}\n\n.filter-bar-content {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: relative;\n  z-index: 1;\n}\n\n.filter-title {\n  font-size: 14px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.filter-category {\n  padding: 4px 12px;\n  border-radius: 16px;\n  color: white;\n  font-weight: 500;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.filter-actions {\n  display: flex;\n  align-items: center;\n}\n\n/*  */\n.document-cards {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n  gap: 20px;\n  margin-bottom: 30px;\n  transition: all 0.3s;\n}\n\n.doc-card {\n  animation: fadeIn 0.4s ease-in-out;\n}\n\n.fadeIn {\n  animation: fadeIn 0.4s ease-in-out;\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes slideDown {\n  from {\n    opacity: 0;\n    transform: translateY(-10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes shimmer {\n  0% {\n    transform: translateX(-100%);\n  }\n  100% {\n    transform: translateX(100%);\n  }\n}\n</style> "],"mappings":";;;;;;;;;;;;;AAkfA,SAASA,GAAG,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,QAAQ,EAAEC,kBAAkB,EAAEC,OAAO,EAAEC,WAAW,EAAEC,KAAI,QAAS,KAAI;AACxG,SAASC,SAAS,EAAEC,QAAO,QAAS,YAAW;AAC/C,SAASC,SAAS,EAAEC,YAAW,QAAS,cAAa;AACrD,SAASC,MAAM,EAAEC,IAAI,EAAEC,OAAO,EAAEC,KAAK,EAAEC,MAAM,EAAEC,KAAK,EAAEC,IAAI,EAAEC,QAAO,QAAS,yBAAwB;AACpG,OAAOC,CAAA,MAAO,QAAO;AACrB,SACEC,YAAY,EACZC,kBAAkB,EAClBC,kBAAkB,EAClBC,qBAAqB,EACrBC,cAAc,EACdC,cAAa,IAAKC,iBAAiB,EACnCC,aAAY,IAAKC,gBAAgB,EACjCC,sBAAsB,EACtBC,sBAAsB,EACtBC,sBAAsB,EACtBC,kBAAiB,QACZ,gBAAe;AAEtB,eAAe;EACbC,IAAI,EAAE,cAAc;EACpBC,UAAU,EAAE;IACVvB,MAAM;IACNC,IAAI;IACJC,OAAO;IACPC,KAAK;IACLC,MAAM;IACNC,KAAK;IACLC,IAAI;IACJC;EACF,CAAC;EACDiB,KAAKA,CAAA,EAAG;IACN,MAAMC,MAAK,GAAI7B,SAAS,CAAC;IACzB,MAAM8B,KAAI,GAAI7B,QAAQ,CAAC;IACvB,MAAM;MAAE8B;IAAM,IAAInC,kBAAkB,CAAC,GAAE;;IAEvC;IACA,MAAMoC,cAAa,GAAIxC,GAAG,CAACyC,IAAI,CAACC,GAAG,CAAC,CAAC;;IAErC;IACA,MAAMC,SAAQ,GAAI3C,GAAG,CAAC,EAAE;IACxB,MAAM4C,eAAc,GAAI5C,GAAG,CAAC,EAAE;IAC9B,MAAM6C,eAAc,GAAI7C,GAAG,CAAC,EAAE;IAC9B,MAAM8C,kBAAiB,GAAI9C,GAAG,CAAC,EAAE;IACjC,MAAM+C,WAAU,GAAI/C,GAAG,CAAC,EAAE;IAC1B,MAAMgD,cAAa,GAAIhD,GAAG,CAAC,KAAK;IAChC,MAAMiD,wBAAuB,GAAIjD,GAAG,CAAC,KAAK;IAC1C,MAAMkD,kBAAiB,GAAIlD,GAAG,CAAC,KAAK;IACpC,MAAMmD,mBAAkB,GAAInD,GAAG,CAAC,KAAK;IACrC,MAAMoD,kBAAiB,GAAIpD,GAAG,CAAC,OAAO;IACtC,MAAMqD,gBAAe,GAAIrD,GAAG,CAAC,IAAI;IACjC,MAAMsD,aAAY,GAAItD,GAAG,CAAC,EAAE;IAC5B,MAAMuD,cAAa,GAAIvD,GAAG,CAAC,EAAE;IAC7B,MAAMwD,aAAY,GAAIxD,GAAG,CAAC,KAAK;IAC/B,MAAMyD,YAAW,GAAIzD,GAAG,CAAC,KAAK;IAC9B,MAAM0D,aAAY,GAAI1D,GAAG,CAAC,KAAK;IAC/B,MAAM2D,WAAU,GAAI3D,GAAG,CAAC,KAAK;;IAE7B;IACA,MAAM4D,IAAG,GAAI5D,GAAG,CAAC,CAAC;IAClB,MAAM6D,QAAO,GAAI,EAAC;IAClB,MAAMC,OAAM,GAAI9D,GAAG,CAAC,IAAI;IACxB,MAAM+D,UAAS,GAAI/D,GAAG,CAAC,CAAC;;IAExB;IACA,MAAMgE,eAAc,GAAIhE,GAAG,CAAC;MACxBiE,KAAK,EAAE,EAAE;MACTC,IAAI,EAAE;IACV,CAAC;IAED,MAAMC,cAAa,GAAInE,GAAG,CAAC;MACvBiE,KAAK,EAAE,EAAE;MACXG,YAAY,EAAE;IAChB,CAAC;;IAED;IACA,MAAMC,cAAa,GAAI;MACnBJ,KAAK,EAAE,CACP;QAAEK,QAAQ,EAAE,IAAI;QAAEC,OAAO,EAAE,SAAS;QAAEC,OAAO,EAAE;MAAO,CAAC,EACvD;QAAEC,GAAG,EAAE,CAAC;QAAEC,GAAG,EAAE,EAAE;QAAEH,OAAO,EAAE,gBAAgB;QAAEC,OAAO,EAAE;MAAO;IAElE;IAEA,MAAMG,WAAU,GAAI;MAChBV,KAAK,EAAE,CACP;QAAEK,QAAQ,EAAE,IAAI;QAAEC,OAAO,EAAE,SAAS;QAAEC,OAAO,EAAE;MAAO,CAAC,EACvD;QAAEC,GAAG,EAAE,CAAC;QAAEC,GAAG,EAAE,EAAE;QAAEH,OAAO,EAAE,gBAAgB;QAAEC,OAAO,EAAE;MAAO,EAC7D;MACDJ,YAAY,EAAE,CACd;QAAEE,QAAQ,EAAE,IAAI;QAAEC,OAAO,EAAE,SAAS;QAAEC,OAAO,EAAE;MAAO,CAAC,EACvD;QAAEC,GAAG,EAAE,EAAE;QAAEC,GAAG,EAAE,GAAG;QAAEH,OAAO,EAAE,kBAAkB;QAAEC,OAAO,EAAE;MAAO;IAEtE;IAEA,MAAMI,YAAW,GAAI5E,GAAG,CAAC,IAAI;IAC7B,MAAM6E,SAAQ,GAAI7E,GAAG,CAAC,IAAI;;IAE1B;IACA,MAAM8E,cAAa,GAAI7E,QAAQ,CAAC,MAAM;MACpC,OAAO8D,UAAU,CAACgB,KAAI,IAAKpC,SAAS,CAACoC,KAAK,CAACC,MAAK,IAAK,CAAC;IACxD,CAAC,CAAC;IAEF,MAAMC,eAAc,GAAIhF,QAAQ,CAAC,MAAM;MACrC,OAAO2C,eAAe,CAACmC,KAAK,CAACC,MAAK,IAAK,CAAC;IAC1C,CAAC,CAAC;;IAEF;IACA,MAAME,qBAAoB,GAAIlF,GAAG,CAAC,KAAK;IACvC,MAAMmF,eAAc,GAAInF,GAAG,CAAC;MAC1BkC,IAAI,EAAE,EAAE;MACRkD,KAAK,EAAE,SAAS;MAChBC,WAAW,EAAE;IACf,CAAC;IACD,MAAMC,eAAc,GAAItF,GAAG,CAAC,IAAI;IAChC,MAAMuF,eAAc,GAAIvF,GAAG,CAAC,KAAK;IACjC,MAAMwF,iBAAgB,GAAI;MACxBtD,IAAI,EAAE,CACJ;QAAEoC,QAAQ,EAAE,IAAI;QAAEC,OAAO,EAAE,SAAS;QAAEC,OAAO,EAAE;MAAO,CAAC,EACvD;QAAEC,GAAG,EAAE,CAAC;QAAEC,GAAG,EAAE,EAAE;QAAEH,OAAO,EAAE,YAAY;QAAEC,OAAO,EAAE;MAAO,EAC3D;MACDY,KAAK,EAAE,CACL;QAAEd,QAAQ,EAAE,IAAI;QAAEC,OAAO,EAAE,OAAO;QAAEC,OAAO,EAAE;MAAS;IAE1D;;IAEA;IACA,MAAMiB,WAAU,GAAI,MAAAA,CAAA,KAAY;MAC9B;MACA9C,SAAS,CAACoC,KAAI,GAAI,CAAC,GAAGpC,SAAS,CAACoC,KAAK,CAAC;MACtCnC,eAAe,CAACmC,KAAI,GAAI,CAAC,GAAGnC,eAAe,CAACmC,KAAK,CAAC;MAClDlC,eAAe,CAACkC,KAAI,GAAI,CAAC,GAAGlC,eAAe,CAACkC,KAAK,CAAC;;MAElD;MACA,IAAIxC,KAAI,IAAKA,KAAK,CAACmD,YAAY,EAAE;QAC/BnD,KAAK,CAACmD,YAAY,CAAC,CAAC;MACtB;;MAEA;MACA,MAAMvF,QAAQ,CAAC,CAAC;IAClB,CAAC;;IAED;IACA,MAAMwF,cAAa,GAAI,MAAAA,CAAOC,YAAW,GAAI,KAAK,EAAEC,MAAK,GAAI,KAAK,KAAK;MACrE,IAAID,YAAY,EAAE;QAChBhC,IAAI,CAACmB,KAAI,GAAI;QACbjB,OAAO,CAACiB,KAAI,GAAI,IAAG;MACrB;MACA,IAAI,CAACjB,OAAO,CAACiB,KAAI,IAAK,CAACa,YAAY,EAAE;MAErC,IAAI,CAACC,MAAM,EAAE;QACXrC,aAAa,CAACuB,KAAI,GAAI,IAAG;MAC3B,OAAO;QACLpB,WAAW,CAACoB,KAAI,GAAI,IAAG;MACzB;MAEA,IAAI;QACF,MAAMe,MAAK,GAAI;UACblC,IAAI,EAAEA,IAAI,CAACmB,KAAK;UAChBgB,KAAK,EAAE,GAAG;UAAE;UACZC,EAAE,EAAE,IAAIvD,IAAI,CAAC,CAAC,CAACwD,OAAO,CAAC,EAAE;QAC3B;;QAEA;QACA,IAAIjD,cAAc,CAAC+B,KAAI,IAAK/B,cAAc,CAAC+B,KAAI,KAAM,KAAK,EAAE;UAC1De,MAAM,CAACI,QAAO,GAAIlD,cAAc,CAAC+B,KAAI;UACrCoB,OAAO,CAACC,GAAG,CAAC,WAAW,EAAEpD,cAAc,CAAC+B,KAAK,CAAC;QAChD,OAAO;UACLoB,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;QAC/B;QAEA,IAAIrD,WAAW,CAACgC,KAAK,EAAE;UACrBe,MAAM,CAACO,MAAK,GAAItD,WAAW,CAACgC,KAAI;QAClC;QAEAoB,OAAO,CAACC,GAAG,CAAC,cAAc,EAAEE,IAAI,CAACC,SAAS,CAACT,MAAM,CAAC,CAAC;QACnD,MAAMU,GAAE,GAAI,MAAMnF,YAAY,CAACyE,MAAM;QACrCK,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEI,GAAG,CAAC;QAE3B,IAAIA,GAAE,IAAKA,GAAG,CAACC,IAAI,EAAE;UACnB;UACA,IAAIC,IAAG,GAAI,EAAE;UACb,IAAIC,KAAI,GAAI,CAAC;UACb,IAAIC,QAAO,GAAI,KAAK;;UAEpB;UACA,IAAIJ,GAAG,CAACK,OAAM,IAAKC,KAAK,CAACC,OAAO,CAACP,GAAG,CAACK,OAAO,CAAC,EAAE;YAC7CH,IAAG,GAAIF,GAAG,CAACK,OAAO;YAClBF,KAAI,GAAIH,GAAG,CAACQ,KAAI,IAAK,CAAC;YACtBJ,QAAO,GAAI,CAAC,CAACJ,GAAG,CAACS,IAAI;YACrBd,OAAO,CAACC,GAAG,CAAC,cAAcM,IAAI,CAAC1B,MAAM,UAAU2B,KAAK,EAAE,CAAC;UACzD;UACA;UAAA,KACK,IAAIG,KAAK,CAACC,OAAO,CAACP,GAAG,CAACC,IAAI,CAAC,EAAE;YAChCC,IAAG,GAAIF,GAAG,CAACC,IAAI;YACfE,KAAI,GAAIH,GAAG,CAACQ,KAAI,IAAKR,GAAG,CAACG,KAAI,IAAKD,IAAI,CAAC1B,MAAM;YAC7C4B,QAAO,GAAIF,IAAI,CAAC1B,MAAK,GAAI,KAAKrC,SAAS,CAACoC,KAAK,CAACC,MAAK,GAAI0B,IAAI,CAAC1B,MAAK,GAAI2B,KAAK;YAC1ER,OAAO,CAACC,GAAG,CAAC,WAAWM,IAAI,CAAC1B,MAAM,UAAU2B,KAAK,EAAE,CAAC;UACtD;UACA;UAAA,KACK;YACHD,IAAG,GAAII,KAAK,CAACC,OAAO,CAACP,GAAG,CAACC,IAAI,IAAID,GAAG,CAACC,IAAG,GAAI,CAACD,GAAG,CAACC,IAAI,CAAC;YACtDE,KAAI,GAAIH,GAAG,CAACQ,KAAI,IAAKR,GAAG,CAACG,KAAI,IAAKD,IAAI,CAAC1B,MAAM;YAC7C4B,QAAO,GAAIF,IAAI,CAAC1B,MAAK,GAAI,KAAKrC,SAAS,CAACoC,KAAK,CAACC,MAAK,GAAI0B,IAAI,CAAC1B,MAAK,GAAI2B,KAAK;YAC1ER,OAAO,CAACC,GAAG,CAAC,WAAWM,IAAI,CAAC1B,MAAM,UAAU2B,KAAK,EAAE,CAAC;UACtD;;UAEA;UACA,IAAId,MAAK,IAAKlD,SAAS,CAACoC,KAAK,CAACC,MAAK,GAAI,CAAC,EAAE;YACxC,MAAMkC,WAAU,GAAI,IAAIC,GAAG,CAACxE,SAAS,CAACoC,KAAK,CAACqC,GAAG,CAACC,GAAE,IAAKA,GAAG,CAACC,EAAE,CAAC,CAAC;YAC/DZ,IAAG,GAAIA,IAAI,CAACa,MAAM,CAACF,GAAE,IAAK,CAACH,WAAW,CAACM,GAAG,CAACH,GAAG,CAACC,EAAE,CAAC,CAAC;YACnDnB,OAAO,CAACC,GAAG,CAAC,WAAWM,IAAI,CAAC1B,MAAM,MAAM,CAAC;UAC3C;UAEA,IAAIa,MAAM,EAAE;YACV;YACAlD,SAAS,CAACoC,KAAI,GAAI,CAAC,GAAGpC,SAAS,CAACoC,KAAK,EAAE,GAAG2B,IAAI;UAChD,OAAO;YACL;YACA/D,SAAS,CAACoC,KAAI,GAAI,CAAC,GAAG2B,IAAI;UAC5B;;UAEA;UACA3C,UAAU,CAACgB,KAAI,GAAI4B,KAAI;;UAEvB;UACA7C,OAAO,CAACiB,KAAI,GAAI6B,QAAO,IAAMjE,SAAS,CAACoC,KAAK,CAACC,MAAK,GAAI2B,KAAI,IAAKD,IAAI,CAAC1B,MAAK,GAAI,CAAE;;UAE/E;UACAmB,OAAO,CAACC,GAAG,CAAC,MAAMzD,SAAS,CAACoC,KAAK,CAACC,MAAM,IAAI2B,KAAK,aAAa,EAAE7C,OAAO,CAACiB,KAAK,EAAE,YAAY,EAAE6B,QAAQ,EAAE,GAAG,CAAC;;UAE3G;UACA,IAAI9C,OAAO,CAACiB,KAAI,IAAKpC,SAAS,CAACoC,KAAK,CAACC,MAAK,GAAI,EAAC,IAAK,CAACrB,WAAW,CAACoB,KAAK,EAAE;YACtEoB,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC;YAC3BxC,IAAI,CAACmB,KAAK,EAAE;YACZ;YACA,MAAM,IAAI0C,OAAO,CAACC,OAAM,IAAKC,UAAU,CAACD,OAAO,EAAE,GAAG,CAAC,CAAC;YACtD,MAAM/B,cAAc,CAAC,KAAK,EAAE,IAAI,CAAC;UACnC;QAEF,OAAO;UACLQ,OAAO,CAACyB,IAAI,CAAC,eAAe,EAAEpB,GAAG,CAAC;UAClC,IAAI,CAACX,MAAM,EAAE;YACXlD,SAAS,CAACoC,KAAI,GAAI,EAAC;UACrB;UACAjB,OAAO,CAACiB,KAAI,GAAI,KAAI;QACtB;MACF,EAAE,OAAO8C,KAAK,EAAE;QACd1B,OAAO,CAAC0B,KAAK,CAAC,WAAW,EAAEA,KAAK,CAAC;QACjCnH,SAAS,CAACmH,KAAK,CAAC,kBAAkB,CAAC;QACnC,IAAI,CAAChC,MAAM,EAAE;UACXlD,SAAS,CAACoC,KAAI,GAAI,EAAC;QACrB;QACAjB,OAAO,CAACiB,KAAI,GAAI,KAAI;MACtB,UAAU;QACRvB,aAAa,CAACuB,KAAI,GAAI,KAAI;QAC1BpB,WAAW,CAACoB,KAAI,GAAI,KAAI;MAC1B;IACF;IAEA,MAAM+C,oBAAmB,GAAI,MAAAA,CAAOlC,YAAW,GAAI,KAAK,KAAK;MAC3DO,OAAO,CAACC,GAAG,CAAC,aAAa,CAAC;MAC1B,IAAI;QACF;QACA,MAAMN,MAAK,GAAIF,YAAW,GAAI;UAAEI,EAAE,EAAE,IAAIvD,IAAI,CAAC,CAAC,CAACwD,OAAO,CAAC;QAAE,IAAI,CAAC,CAAC;QAE/D,MAAMO,GAAE,GAAI,MAAMlF,kBAAkB,CAACwE,MAAM,CAAC;QAC5CK,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEI,GAAG,CAAC;QAE9B,IAAIA,GAAE,IAAKA,GAAG,CAACC,IAAI,EAAE;UACnB;UACA7D,eAAe,CAACmC,KAAI,GAAI+B,KAAK,CAACC,OAAO,CAACP,GAAG,CAACC,IAAI,IAAI,CAAC,GAAGD,GAAG,CAACC,IAAI,IAAI,EAAE;UACpEN,OAAO,CAACC,GAAG,CAAC,WAAWxD,eAAe,CAACmC,KAAK,CAACC,MAAM,KAAK,CAAC;QAC3D,OAAO;UACLmB,OAAO,CAACyB,IAAI,CAAC,iBAAiB,EAAEpB,GAAG,CAAC;UACpC5D,eAAe,CAACmC,KAAI,GAAI,EAAE;QAC5B;MACF,EAAE,OAAO8C,KAAK,EAAE;QACd1B,OAAO,CAAC0B,KAAK,CAAC,WAAW,EAAEA,KAAK,CAAC;QACjCnH,SAAS,CAACmH,KAAK,CAAC,UAAU,CAAC;QAC3BjF,eAAe,CAACmC,KAAI,GAAI,EAAE;MAC5B;IACF;IAEA,MAAMgD,oBAAmB,GAAI,MAAAA,CAAA,KAAY;MACvC,IAAI;QACF,MAAMC,QAAO,GAAI,MAAMzG,kBAAkB,CAAC;QAC1CsB,eAAe,CAACkC,KAAI,GAAIiD,QAAQ,CAACvB,IAAG;MACtC,EAAE,OAAOoB,KAAK,EAAE;QACd1B,OAAO,CAAC0B,KAAK,CAAC,UAAU,EAAEA,KAAK;QAC/BnH,SAAS,CAACmH,KAAK,CAAC,UAAU;MAC5B;IACF;IAEA,MAAMI,uBAAsB,GAAI,MAAAA,CAAOC,UAAS,GAAI,CAAC,KAAK;MACxD/B,OAAO,CAACC,GAAG,CAAC,aAAa,CAAC;MAC1B,IAAI;QACF,MAAMI,GAAE,GAAI,MAAMhF,qBAAqB,CAAC,CAAC;QACzC2E,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEI,GAAG,CAAC;QAE9B,IAAIA,GAAE,IAAKA,GAAG,CAACC,IAAI,EAAE;UACnB3D,kBAAkB,CAACiC,KAAI,GAAIyB,GAAG,CAACC,IAAI;UACnCN,OAAO,CAACC,GAAG,CAAC,WAAWtD,kBAAkB,CAACiC,KAAK,CAACC,MAAM,UAAU,EAAElC,kBAAkB,CAACiC,KAAK,CAAC;QAC7F,OAAO;UACLoB,OAAO,CAACyB,IAAI,CAAC,iBAAiB,EAAEpB,GAAG,CAAC;UACpC1D,kBAAkB,CAACiC,KAAI,GAAI,EAAE;;UAE7B;UACA,IAAIjC,kBAAkB,CAACiC,KAAK,CAACC,MAAK,KAAM,KAAKkD,UAAS,GAAI,CAAC,EAAE;YAC3D/B,OAAO,CAACC,GAAG,CAAC,YAAY8B,UAAS,GAAI,CAAC,SAAS,CAAC;YAChDP,UAAU,CAAC,MAAMM,uBAAuB,CAACC,UAAS,GAAI,CAAC,CAAC,EAAE,CAACA,UAAS,GAAI,CAAC,IAAI,IAAI,CAAC;UACpF;QACF;MACF,EAAE,OAAOL,KAAK,EAAE;QACd1B,OAAO,CAAC0B,KAAK,CAAC,WAAW,EAAEA,KAAK,CAAC;;QAEjC;QACA,IAAIA,KAAK,CAACG,QAAO,IAAKH,KAAK,CAACG,QAAQ,CAACG,MAAK,IAAK,GAAE,IAAKD,UAAS,GAAI,CAAC,EAAE;UACpE/B,OAAO,CAACC,GAAG,CAAC,SAAS8B,UAAS,GAAI,CAAC,SAAS,CAAC;UAC7CP,UAAU,CAAC,MAAMM,uBAAuB,CAACC,UAAS,GAAI,CAAC,CAAC,EAAE,CAACA,UAAS,GAAI,CAAC,IAAI,IAAI,CAAC;QACpF,OAAO;UACLxH,SAAS,CAACmH,KAAK,CAAC,kBAAkB,CAAC;UACnC;UACA/E,kBAAkB,CAACiC,KAAI,GAAI,EAAE;QAC/B;MACF;IACF;;IAEA;IACA,MAAMqD,eAAc,GAAIhH,CAAC,CAACiH,QAAQ,CAAC,YAAY;MAC7CzE,IAAI,CAACmB,KAAI,GAAI;MACbjB,OAAO,CAACiB,KAAI,GAAI,IAAG;MACnB,MAAMY,cAAc,CAAC,IAAI;IAC3B,CAAC,EAAE,GAAG;IAEN,MAAM2C,iBAAgB,GAAIA,CAAA,KAAM;MAC9B;MACAtE,eAAe,CAACe,KAAI,GAAI;QAAEd,KAAK,EAAE,EAAE;QAAEC,IAAI,EAAE;MAAG;MAC9CC,cAAc,CAACY,KAAI,GAAI;QAAEd,KAAK,EAAE,EAAE;QAAEG,YAAY,EAAE;MAAG;MACrDhB,kBAAkB,CAAC2B,KAAI,GAAI,OAAM;MACjC9B,wBAAwB,CAAC8B,KAAI,GAAI,IAAG;;MAEpC;MACA5E,QAAQ,CAAC,MAAM;QACb,IAAI;UACF,MAAMoI,MAAK,GAAIC,QAAQ,CAACC,aAAa,CAAC,YAAY,CAAC;UACnD,IAAIF,MAAM,EAAE;YACVA,MAAM,CAACG,gBAAgB,CAAC,QAAQ,EAAE,MAAM;cACtC,IAAI;gBACF,IAAI9D,YAAY,CAACG,KAAK,EAAE;kBACtBH,YAAY,CAACG,KAAK,CAAC4D,aAAa,CAAC,CAAC;gBACpC;gBACA,IAAI9D,SAAS,CAACE,KAAK,EAAE;kBACnBF,SAAS,CAACE,KAAK,CAAC4D,aAAa,CAAC,CAAC;gBACjC;cACF,EAAE,OAAOC,GAAG,EAAE;gBACZzC,OAAO,CAAC0B,KAAK,CAAC,iCAAiC,EAAEe,GAAG,CAAC;cACvD;YACF,CAAC,EAAE;cAAEC,IAAI,EAAE;YAAK,CAAC,CAAC;UACpB;QACF,EAAE,OAAOD,GAAG,EAAE;UACZzC,OAAO,CAAC0B,KAAK,CAAC,yCAAyC,EAAEe,GAAG,CAAC;QAC/D;MACF,CAAC,CAAC;IACJ;IAEA,MAAME,iBAAgB,GAAI,MAAAA,CAAA,KAAY;MACpC,IAAI1F,kBAAkB,CAAC2B,KAAI,KAAM,OAAO,EAAE;QACxC,IAAI,CAACH,YAAY,CAACG,KAAK,EAAE;UACvBoB,OAAO,CAACyB,IAAI,CAAC,SAAS,CAAC;UACvB;QACF;QAEA,IAAI;UACF,MAAMmB,KAAI,GAAI,MAAMnE,YAAY,CAACG,KAAK,CAACiE,QAAQ,CAAC,EAC7CC,KAAK,CAACL,GAAE,IAAK;YACZzC,OAAO,CAAC0B,KAAK,CAAC,SAAS,EAAEe,GAAG,CAAC;YAC7B,OAAO,KAAK;UACd,CAAC,CAAC;UAEJ,IAAIG,KAAK,EAAE;YACTvF,aAAa,CAACuB,KAAI,GAAI,IAAI;YAC1B,IAAI;cACFoB,OAAO,CAACC,GAAG,CAAC,SAAS,EAAE;gBACrBnC,KAAK,EAAED,eAAe,CAACe,KAAK,CAACd,KAAK;gBAClCC,IAAI,EAAEF,eAAe,CAACe,KAAK,CAACb,IAAG,IAAK;cACtC,CAAC,CAAC;cAEF,MAAM8D,QAAO,GAAI,MAAMvG,cAAc,CAAC;gBACpCwC,KAAK,EAAED,eAAe,CAACe,KAAK,CAACd,KAAK;gBAClCC,IAAI,EAAEF,eAAe,CAACe,KAAK,CAACb,IAAG,IAAK,IAAI;gBACxCgF,OAAO,EAAE;cACX,CAAC,CAAC;cAEF/C,OAAO,CAACC,GAAG,CAAC,WAAW,EAAEE,IAAI,CAACC,SAAS,CAACyB,QAAQ,CAAC,CAAC;;cAElD;cACA/E,wBAAwB,CAAC8B,KAAI,GAAI,KAAK;cACtCrE,SAAS,CAACyI,OAAO,CAAC,QAAQ,CAAC;;cAE3B;cACA,IAAIC,KAAI,GAAI,IAAI;cAChB,IAAIpB,QAAO,IAAKA,QAAQ,CAACvB,IAAI,EAAE;gBAC7B,IAAIuB,QAAQ,CAACvB,IAAI,CAACa,EAAE,EAAE;kBACpB8B,KAAI,GAAIpB,QAAQ,CAACvB,IAAI,CAACa,EAAE;gBAC1B,OAAO,IAAIR,KAAK,CAACC,OAAO,CAACiB,QAAQ,CAACvB,IAAI,KAAKuB,QAAQ,CAACvB,IAAI,CAACzB,MAAK,GAAI,CAAC,EAAE;kBACnEoE,KAAI,GAAIpB,QAAQ,CAACvB,IAAI,CAAC,CAAC,CAAC,CAACa,EAAE;gBAC7B,OAAO,IAAIU,QAAQ,CAACvB,IAAI,CAACI,OAAM,IAAKC,KAAK,CAACC,OAAO,CAACiB,QAAQ,CAACvB,IAAI,CAACI,OAAO,KAAKmB,QAAQ,CAACvB,IAAI,CAACI,OAAO,CAAC7B,MAAK,GAAI,CAAC,EAAE;kBAC5GoE,KAAI,GAAIpB,QAAQ,CAACvB,IAAI,CAACI,OAAO,CAAC,CAAC,CAAC,CAACS,EAAE;gBACrC;cACF;;cAEA;cACAK,UAAU,CAAC,MAAM;gBACf,IAAIyB,KAAK,EAAE;kBACTjD,OAAO,CAACC,GAAG,CAAC,kBAAkBgD,KAAK,EAAE,CAAC;;kBAEtC;kBACAzD,cAAc,CAAC,CAAC;kBAChBmC,oBAAoB,CAAC,CAAC;;kBAEtB;kBACAH,UAAU,CAAC,MAAM;oBACftF,MAAM,CAACgH,IAAI,CAAC;sBACVnH,IAAI,EAAE,gBAAgB;sBACtB4D,MAAM,EAAE;wBAAEwB,EAAE,EAAE8B;sBAAM;oBACtB,CAAC,CAAC,CAACE,IAAI,CAAC,MAAM;sBACZ9F,aAAa,CAACuB,KAAI,GAAI,KAAK;oBAC7B,CAAC,CAAC,CAACkE,KAAK,CAACL,GAAE,IAAK;sBACdzC,OAAO,CAAC0B,KAAK,CAAC,SAAS,EAAEe,GAAG,CAAC;sBAC7BlI,SAAS,CAACmH,KAAK,CAAC,mBAAmB,CAAC;sBACpC;sBACAxF,MAAM,CAACgH,IAAI,CAAC,aAAaD,KAAK,EAAE,CAAC,CAACH,KAAK,CAACM,MAAK,IAAK;wBAChDpD,OAAO,CAAC0B,KAAK,CAAC,UAAU,EAAE0B,MAAM,CAAC;wBACjC7I,SAAS,CAACmH,KAAK,CAAC,YAAY,CAAC;sBAC/B,CAAC,CAAC;sBACFrE,aAAa,CAACuB,KAAI,GAAI,KAAK;oBAC7B,CAAC,CAAC;kBACJ,CAAC,EAAE,GAAG,CAAC;gBACT,OAAO;kBACLoB,OAAO,CAACyB,IAAI,CAAC,oBAAoB,EAAEI,QAAQ,CAAC;kBAC5C;kBACArC,cAAc,CAAC,CAAC;kBAChBmC,oBAAoB,CAAC,CAAC;gBACxB;cACF,CAAC,EAAE,GAAG,CAAC;YACT,EAAE,OAAOD,KAAK,EAAE;cACd1B,OAAO,CAAC0B,KAAK,CAAC,QAAQ,EAAEA,KAAK,CAAC;cAC9BnH,SAAS,CAACmH,KAAK,CAAC,QAAQ,CAAC;YAC3B,UAAU;cACRrE,aAAa,CAACuB,KAAI,GAAI,KAAK;YAC7B;UACF;QACF,EAAE,OAAO8C,KAAK,EAAE;UACd1B,OAAO,CAAC0B,KAAK,CAAC,YAAY,EAAEA,KAAK,CAAC;UAClCnH,SAAS,CAACmH,KAAK,CAAC,QAAQ,CAAC;UACzBrE,aAAa,CAACuB,KAAI,GAAI,KAAK;QAC7B;MACF,OAAO,IAAI3B,kBAAkB,CAAC2B,KAAI,KAAM,IAAI,EAAE;QAC5C,IAAI,CAACF,SAAS,CAACE,KAAK,EAAE;UACpBoB,OAAO,CAACyB,IAAI,CAAC,WAAW,CAAC;UACzB;QACF;QAEA,IAAI;UACF,MAAMmB,KAAI,GAAI,MAAMlE,SAAS,CAACE,KAAK,CAACiE,QAAQ,CAAC,EAC1CC,KAAK,CAACL,GAAE,IAAK;YACZzC,OAAO,CAAC0B,KAAK,CAAC,WAAW,EAAEe,GAAG,CAAC;YAC/B,OAAO,KAAK;UACd,CAAC,CAAC;UAEJ,IAAIG,KAAK,EAAE;YACTvF,aAAa,CAACuB,KAAI,GAAI,IAAI;YAC1B,IAAI;cACF;cACA,MAAMyE,UAAS,GAAIxG,cAAc,CAAC+B,KAAI,KAAM,KAAI,GAAI/B,cAAc,CAAC+B,KAAI,GAAI,IAAI;cAC/E,MAAMiD,QAAO,GAAI,MAAM/F,kBAAkB,CAAC;gBACxCgC,KAAK,EAAEE,cAAc,CAACY,KAAK,CAACd,KAAK;gBACjCwF,WAAW,EAAEtF,cAAc,CAACY,KAAK,CAACX,YAAY;gBAC9CsF,WAAW,EAAEF,UAAU;gBACvBG,QAAQ,EAAE;cACZ,CAAC,CAAC;cACFxD,OAAO,CAACC,GAAG,CAAC,aAAa,EAAE4B,QAAQ,CAAC;cACpC;cACA,IAAIA,QAAO,IAAKA,QAAQ,CAACG,MAAK,KAAM,GAAG,EAAE;gBAAA,IAAAyB,cAAA;gBACvClJ,SAAS,CAACmH,KAAK,CAAC,EAAA+B,cAAA,GAAA5B,QAAQ,CAACvB,IAAI,cAAAmD,cAAA,uBAAbA,cAAA,CAAeC,MAAK,KAAK,mBAAmB,CAAC;gBAC7DrG,aAAa,CAACuB,KAAI,GAAI,KAAK;gBAC3B;cACF;cACA,IAAIiD,QAAO,IAAKA,QAAQ,CAACvB,IAAG,IAAK,OAAOuB,QAAQ,CAACvB,IAAI,CAACoD,MAAK,KAAM,QAAO,IAAK7B,QAAQ,CAACvB,IAAI,CAACoD,MAAM,CAACC,QAAQ,CAAC,IAAI,CAAC,EAAE;gBAChHpJ,SAAS,CAACmH,KAAK,CAACG,QAAQ,CAACvB,IAAI,CAACoD,MAAM,CAAC;gBACrCrG,aAAa,CAACuB,KAAI,GAAI,KAAK;gBAC3B;cACF;cACA9B,wBAAwB,CAAC8B,KAAI,GAAI,KAAK;cACtCrE,SAAS,CAACyI,OAAO,CAAC,UAAU,CAAC;cAC7B,IAAIC,KAAI,GAAI,IAAI;cAChB,IAAIpB,QAAO,IAAKA,QAAQ,CAACvB,IAAG,IAAKuB,QAAQ,CAACvB,IAAI,CAACa,EAAE,EAAE;gBACjD8B,KAAI,GAAIpB,QAAQ,CAACvB,IAAI,CAACa,EAAE;cAC1B;cACA,IAAI8B,KAAK,EAAE;gBACT;gBACAjD,OAAO,CAACC,GAAG,CAAC,qCAAqC,EAAEgD,KAAK,CAAC;gBACzD/G,MAAM,CAACgH,IAAI,CAAC;kBACVnH,IAAI,EAAE,gBAAgB;kBACtB4D,MAAM,EAAE;oBAAEwB,EAAE,EAAEyC,MAAM,CAACX,KAAK;kBAAE;gBAC9B,CAAC,CAAC,CAACE,IAAI,CAAC,MAAM;kBACZ9F,aAAa,CAACuB,KAAI,GAAI,KAAK;gBAC7B,CAAC,CAAC,CAACkE,KAAK,CAACL,GAAE,IAAK;kBACdzC,OAAO,CAAC0B,KAAK,CAAC,SAAS,EAAEe,GAAG,CAAC;kBAC7BlI,SAAS,CAACmH,KAAK,CAAC,mBAAmB,CAAC;kBACpC;kBACAxF,MAAM,CAACgH,IAAI,CAAC,aAAaD,KAAK,EAAE,CAAC,CAACH,KAAK,CAACM,MAAK,IAAK;oBAChDpD,OAAO,CAAC0B,KAAK,CAAC,UAAU,EAAE0B,MAAM,CAAC;oBACjC7I,SAAS,CAACmH,KAAK,CAAC,YAAY,CAAC;kBAC/B,CAAC,CAAC;kBACFrE,aAAa,CAACuB,KAAI,GAAI,KAAK;gBAC7B,CAAC,CAAC;gBACF;gBACAY,cAAc,CAAC,CAAC;gBAChBmC,oBAAoB,CAAC,CAAC;cACxB,OAAO;gBACLnC,cAAc,CAAC,CAAC;gBAChBmC,oBAAoB,CAAC,CAAC;gBACtBtE,aAAa,CAACuB,KAAI,GAAI,KAAK;cAC7B;YACF,EAAE,OAAO8C,KAAK,EAAE;cACd1B,OAAO,CAAC0B,KAAK,CAAC,UAAU,EAAEA,KAAK,CAAC;cAChCnH,SAAS,CAACmH,KAAK,CAAC,UAAU,CAAC;YAC7B,UAAU;cACRrE,aAAa,CAACuB,KAAI,GAAI,KAAK;YAC7B;UACF;QACF,EAAE,OAAO8C,KAAK,EAAE;UACd1B,OAAO,CAAC0B,KAAK,CAAC,cAAc,EAAEA,KAAK,CAAC;UACpCnH,SAAS,CAACmH,KAAK,CAAC,QAAQ,CAAC;UACzBrE,aAAa,CAACuB,KAAI,GAAI,KAAK;QAC7B;MACF;IACF;IAEA,MAAMiF,YAAW,GAAK3C,GAAG,IAAK;MAC5BhF,MAAM,CAACgH,IAAI,CAAC;QAAEnH,IAAI,EAAE,gBAAgB;QAAE4D,MAAM,EAAE;UAAEwB,EAAE,EAAED,GAAG,CAACC;QAAG;MAAE,CAAC;IAChE;IAEA,MAAM2C,cAAa,GAAK5C,GAAG,IAAK;MAC9B1G,YAAY,CAACuJ,MAAM,CAAC,UAAU,EAAE,OAAO,EAAE;QACvCC,iBAAiB,EAAE,IAAI;QACvBC,gBAAgB,EAAE,IAAI;QACtBC,UAAU,EAAEhD,GAAG,CAACpD,KAAK;QACrBqG,cAAc,EAAGvF,KAAK,IAAK;UACzB,IAAI,CAACA,KAAK,EAAE;YACV,OAAO,UAAS;UAClB;UACA,OAAO,IAAG;QACZ;MACF,CAAC,CAAC,CAACuE,IAAI,CAAC,CAAC;QAAEvE;MAAM,CAAC,KAAK;QACrB;QACArE,SAAS,CAAC6J,IAAI,CAAC,WAAWxF,KAAK,EAAE;MACnC,CAAC,CAAC,CAACkE,KAAK,CAAC,MAAM,CAAC,CAAC;IACnB;IAEA,MAAMuB,iBAAgB,GAAKnD,GAAG,IAAK;MACjC3G,SAAS,CAAC6J,IAAI,CAAC,SAASlD,GAAG,CAACpD,KAAK,EAAE;IACrC;IAEA,MAAMrC,aAAY,GAAKyF,GAAG,IAAK;MAC7BhE,gBAAgB,CAAC0B,KAAI,GAAIsC,GAAE;MAC3B;MACA9D,cAAc,CAACwB,KAAI,GAAI,CACrB;QAAEuC,EAAE,EAAE,CAAC;QAAEmD,QAAQ,EAAE;MAAK,CAAC,EACzB;QAAEnD,EAAE,EAAE,CAAC;QAAEmD,QAAQ,EAAE;MAAK,CAAC,EACzB;QAAEnD,EAAE,EAAE,CAAC;QAAEmD,QAAQ,EAAE;MAAK,EAC1B;MACAnH,aAAa,CAACyB,KAAI,GAAI,EAAC;MACvB7B,kBAAkB,CAAC6B,KAAI,GAAI,IAAG;IAChC;IAEA,MAAM2F,YAAW,GAAI,MAAAA,CAAA,KAAY;MAC/B,IAAI,CAACrH,gBAAgB,CAAC0B,KAAI,IAAKzB,aAAa,CAACyB,KAAK,CAACC,MAAK,KAAM,CAAC,EAAE;QAC/DtE,SAAS,CAACiK,OAAO,CAAC,WAAW;QAC7B;MACF;MAEAlH,YAAY,CAACsB,KAAI,GAAI,IAAG;MACxB,IAAI;QACF,MAAMlD,gBAAgB,CAACwB,gBAAgB,CAAC0B,KAAK,CAACuC,EAAE,EAAEhE,aAAa,CAACyB,KAAK;QACrErE,SAAS,CAACyI,OAAO,CAAC,QAAQ;QAC1BjG,kBAAkB,CAAC6B,KAAI,GAAI,KAAI;QAC/BgD,oBAAoB,CAAC;MACvB,EAAE,OAAOF,KAAK,EAAE;QACd1B,OAAO,CAAC0B,KAAK,CAAC,QAAQ,EAAEA,KAAK;QAC7BnH,SAAS,CAACmH,KAAK,CAAC,QAAQ;MAC1B,UAAU;QACRpE,YAAY,CAACsB,KAAI,GAAI,KAAI;MAC3B;IACF;IAEA,MAAMrD,cAAa,GAAK2F,GAAG,IAAK;MAC9BhE,gBAAgB,CAAC0B,KAAI,GAAIsC,GAAE;MAC3BlE,mBAAmB,CAAC4B,KAAI,GAAI,IAAG;IACjC;IAEA,MAAM6F,aAAY,GAAI,MAAAA,CAAA,KAAY;MAChC,IAAI,CAACvH,gBAAgB,CAAC0B,KAAK,EAAE;MAE7BrB,aAAa,CAACqB,KAAI,GAAI,IAAG;MACzB,IAAI;QAAA,IAAA8F,qBAAA;QACF;QACA,MAAMC,YAAW,GAAIzH,gBAAgB,CAAC0B,KAAK,CAACuC,EAAE;QAC9C,MAAMyD,oBAAmB,IAAAF,qBAAA,GAAIxH,gBAAgB,CAAC0B,KAAK,CAACmB,QAAQ,cAAA2E,qBAAA,uBAA/BA,qBAAA,CAAiCvD,EAAE;;QAEhE;QACAnE,mBAAmB,CAAC4B,KAAI,GAAI,KAAK;;QAEjC;QACA,MAAMpD,iBAAiB,CAACmJ,YAAY;QACpCpK,SAAS,CAACyI,OAAO,CAAC,QAAQ;;QAE1B;QACA9F,gBAAgB,CAAC0B,KAAI,GAAI,IAAI;;QAE7B;QACA,IAAIiG,MAAM,CAACC,YAAY,EAAE;UACvB,IAAI;YACF;YACAA,YAAY,CAACC,UAAU,CAAC,aAAaJ,YAAY,EAAE,CAAC;YACpDG,YAAY,CAACC,UAAU,CAAC,mBAAmB,CAAC;YAC5CD,YAAY,CAACC,UAAU,CAAC,gBAAgB,CAAC;UAC3C,EAAE,OAAOC,CAAC,EAAE;YACVhF,OAAO,CAAC0B,KAAK,CAAC,WAAW,EAAEsD,CAAC,CAAC;UAC/B;QACF;;QAEA;QACA3I,cAAc,CAACuC,KAAI,GAAItC,IAAI,CAACC,GAAG,CAAC,CAAC;;QAEjC;QACAC,SAAS,CAACoC,KAAI,GAAI,CAAC,GAAGpC,SAAS,CAACoC,KAAK,CAACwC,MAAM,CAACF,GAAE,IAAKA,GAAG,CAACC,EAAC,KAAMwD,YAAY,CAAC,CAAC;QAC7ElI,eAAe,CAACmC,KAAI,GAAI,CAAC,GAAGnC,eAAe,CAACmC,KAAK,CAACwC,MAAM,CAACF,GAAE,IAAKA,GAAG,CAACC,EAAC,KAAMwD,YAAY,CAAC,CAAC;QACzFjI,eAAe,CAACkC,KAAI,GAAI,CAAC,GAAGlC,eAAe,CAACkC,KAAK,CAACwC,MAAM,CAACF,GAAE,IAAKA,GAAG,CAACC,EAAC,KAAMwD,YAAY,CAAC,CAAC;;QAEzF;QACA,MAAMrF,WAAW,CAAC,CAAC;;QAEnB;QACA,IAAIsF,oBAAoB,EAAE;UACxB,MAAM7E,QAAO,GAAIpD,kBAAkB,CAACiC,KAAK,CAACqG,IAAI,CAACC,CAAA,IAAKA,CAAC,CAAC/D,EAAC,KAAMyD,oBAAoB,CAAC;UAClF,IAAI7E,QAAO,IAAKA,QAAQ,CAACoF,cAAa,GAAI,CAAC,EAAE;YAC3CpF,QAAQ,CAACoF,cAAc,EAAE;UAC3B;QACF;;QAEA;QACA,MAAMnL,QAAQ,CAAC,CAAC;;QAEhB;QACA,IAAIkC,MAAM,CAACkJ,YAAY,CAACxG,KAAK,CAAC7C,IAAG,KAAM,gBAAgB,EAAE;UACvDiE,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC;;UAEjC;UACA,MAAMoF,aAAa,CAAC,CAAC;;UAErB;UACAnJ,MAAM,CAACoJ,OAAO,CAAC;YACbvJ,IAAI,EAAE,UAAU;YAChBwJ,KAAK,EAAE;cAAEC,QAAQ,EAAElJ,IAAI,CAACC,GAAG,CAAC;YAAE,EAAE;UAClC,CAAC,CAAC;QACJ,OAAO;UACL;UACA,MAAMkJ,WAAW,CAAC,CAAC;QACrB;MACF,EAAE,OAAO/D,KAAK,EAAE;QACd1B,OAAO,CAAC0B,KAAK,CAAC,QAAQ,EAAEA,KAAK,CAAC;QAC9BnH,SAAS,CAACmH,KAAK,CAAC,QAAQ,CAAC;QACzB;QACA1E,mBAAmB,CAAC4B,KAAI,GAAI,KAAK;MACnC,UAAU;QACRrB,aAAa,CAACqB,KAAI,GAAI,KAAK;MAC7B;IACF;IAEA,MAAM8G,gBAAe,GAAK3H,IAAI,IAAK;MACjC,IAAIA,IAAG,KAAM,QAAQ,EAAE;QACrB;QACA7B,MAAM,CAACgH,IAAI,CAAC;UAAEnH,IAAI,EAAE;QAAW,CAAC,CAAC,CAACoH,IAAI,CAAC,MAAM;UAC3C3B,UAAU,CAAC,MAAM;YACf,MAAMmE,UAAS,GAAItD,QAAQ,CAACC,aAAa,CAAC,UAAU,CAAC;YACrD,IAAIqD,UAAU,EAAE;cACdA,UAAU,CAACC,cAAc,CAAC;gBAAEC,QAAQ,EAAE;cAAS,CAAC,CAAC;YACnD;UACF,CAAC,EAAE,GAAG,CAAC;QACT,CAAC,CAAC;MACJ;IACF;IAEA,MAAMC,cAAa,GAAK/F,QAAQ,IAAK;MACnCC,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEF,QAAQ,CAAC;;MAE9B;MACA,IAAIsD,UAAU;MACd,IAAItD,QAAO,KAAM,KAAK,EAAE;QACtBsD,UAAS,GAAI,KAAK;MACpB,OAAO,IAAI,OAAOtD,QAAO,KAAM,QAAQ,EAAE;QACvCsD,UAAS,GAAItD,QAAQ;MACvB,OAAO,IAAI,OAAOA,QAAO,KAAM,QAAO,IAAKA,QAAO,KAAM,IAAI,EAAE;QAC5DsD,UAAS,GAAItD,QAAQ,CAACoB,EAAE,CAAC4E,QAAQ,CAAC,CAAC;MACrC;MAEA/F,OAAO,CAACC,GAAG,CAAC,WAAW,EAAEoD,UAAU,CAAC;;MAEpC;MACAxG,cAAc,CAAC+B,KAAI,GAAIyE,UAAU;;MAEjC;MACA7G,SAAS,CAACoC,KAAI,GAAI,EAAE;MACpBvB,aAAa,CAACuB,KAAI,GAAI,IAAI;;MAE1B;MACAnB,IAAI,CAACmB,KAAI,GAAI,CAAC;MACdjB,OAAO,CAACiB,KAAI,GAAI,IAAI;;MAEpB;MACA4C,UAAU,CAAC,YAAY;QACrB,IAAI;UACF;UACA,MAAMhC,cAAc,CAAC,IAAI,CAAC;QAC5B,EAAE,OAAOkC,KAAK,EAAE;UACd1B,OAAO,CAAC0B,KAAK,CAAC,SAAS,EAAEA,KAAK,CAAC;UAC/BnH,SAAS,CAACmH,KAAK,CAAC,kBAAkB,CAAC;QACrC,UAAU;UACRrE,aAAa,CAACuB,KAAI,GAAI,KAAK;QAC7B;;QAEA;QACA,MAAMoH,QAAO,GAAI3D,QAAQ,CAAC4D,gBAAgB,CAAC,WAAW,CAAC;QACvD,IAAID,QAAO,IAAKA,QAAQ,CAACnH,MAAK,GAAI,CAAC,EAAE;UACnCmH,QAAQ,CAACE,OAAO,CAAC,CAACC,IAAI,EAAEC,KAAK,KAAK;YAChC,IAAID,IAAI,EAAE;cACRA,IAAI,CAACE,KAAK,CAACC,cAAa,GAAI,GAAGF,KAAI,GAAI,EAAE,IAAI;cAC7CD,IAAI,CAACI,SAAS,CAACC,MAAM,CAAC,QAAQ,CAAC;cAC/BhF,UAAU,CAAC,MAAM;gBACf,IAAI2E,IAAI,EAAE;kBACRA,IAAI,CAACI,SAAS,CAACE,GAAG,CAAC,QAAQ,CAAC;gBAC9B;cACF,CAAC,EAAE,EAAE,CAAC;YACR;UACF,CAAC,CAAC;QACJ;MACF,CAAC,EAAE,GAAG,CAAC;IACT,CAAC;;IAED;IACA,MAAMC,wBAAuB,GAAIA,CAAA,KAAM;MACrC,IAAI7J,cAAc,CAAC+B,KAAI,KAAM,KAAK,EAAE,OAAO,SAAS;MACpD,MAAM+H,gBAAe,GAAIhK,kBAAkB,CAACiC,KAAK,CAACqG,IAAI,CAACC,CAAA,IAAKA,CAAC,CAAC/D,EAAE,CAAC4E,QAAQ,CAAC,MAAMlJ,cAAc,CAAC+B,KAAK,CAAC;MACrG,OAAO,CAAA+H,gBAAgB,aAAhBA,gBAAgB,uBAAhBA,gBAAgB,CAAE1H,KAAI,KAAK,SAAS;IAC7C,CAAC;;IAED;IACA,MAAM2H,uBAAsB,GAAIA,CAAA,KAAM;MACpC,IAAI/J,cAAc,CAAC+B,KAAI,KAAM,KAAK,EAAE,OAAO,MAAM;MACjD,MAAM+H,gBAAe,GAAIhK,kBAAkB,CAACiC,KAAK,CAACqG,IAAI,CAACC,CAAA,IAAKA,CAAC,CAAC/D,EAAE,CAAC4E,QAAQ,CAAC,MAAMlJ,cAAc,CAAC+B,KAAK,CAAC;MACrG,OAAO,CAAA+H,gBAAgB,aAAhBA,gBAAgB,uBAAhBA,gBAAgB,CAAE5K,IAAG,KAAK,MAAM;IACzC,CAAC;IAED,MAAM8K,gBAAe,GAAIA,CAAA,KAAM;MAC7B9H,qBAAqB,CAACH,KAAI,GAAI,IAAG;MACjCkI,iBAAiB,CAAC;IACpB;IAEA,MAAMC,YAAW,GAAKhH,QAAQ,IAAK;MACjCf,eAAe,CAACJ,KAAI,GAAI;QAAE,GAAGmB;MAAS;IACxC;IAEA,MAAM+G,iBAAgB,GAAIA,CAAA,KAAM;MAC9B9H,eAAe,CAACJ,KAAI,GAAI;QACtBuC,EAAE,EAAE,EAAE;QACNpF,IAAI,EAAE,EAAE;QACRkD,KAAK,EAAE,SAAS;QAChBC,WAAW,EAAE;MACf;MACA,IAAIC,eAAe,CAACP,KAAK,EAAE;QACzBO,eAAe,CAACP,KAAK,CAACoI,WAAW,CAAC;MACpC;IACF;IAEA,MAAMC,cAAa,GAAI,MAAAA,CAAA,KAAY;MACjC,IAAI,CAAC9H,eAAe,CAACP,KAAK,EAAE;MAE5B,MAAMO,eAAe,CAACP,KAAK,CAACiE,QAAQ,CAAC,MAAOD,KAAK,IAAK;QACpD,IAAIA,KAAK,EAAE;UACTxD,eAAe,CAACR,KAAI,GAAI,IAAG;UAC3B,IAAI;YACF,MAAMsI,YAAW,GAAI;cACnBnL,IAAI,EAAEiD,eAAe,CAACJ,KAAK,CAAC7C,IAAI;cAChCkD,KAAK,EAAED,eAAe,CAACJ,KAAK,CAACK,KAAK;cAClCC,WAAW,EAAEF,eAAe,CAACJ,KAAK,CAACM,WAAU,IAAK;YACpD;YAEA,IAAIF,eAAe,CAACJ,KAAK,CAACuC,EAAE,EAAE;cAC5B;cACA,MAAMvF,sBAAsB,CAACoD,eAAe,CAACJ,KAAK,CAACuC,EAAE,EAAE+F,YAAY;cACnE3M,SAAS,CAACyI,OAAO,CAAC,QAAQ;YAC5B,OAAO;cACL;cACA,MAAMrH,sBAAsB,CAACuL,YAAY;cACzC3M,SAAS,CAACyI,OAAO,CAAC,QAAQ;YAC5B;;YAEA;YACAlB,uBAAuB,CAAC;YACxBgF,iBAAiB,CAAC;UACpB,EAAE,OAAOpF,KAAK,EAAE;YACd1B,OAAO,CAAC0B,KAAK,CAAC,SAAS,EAAEA,KAAK;YAC9BnH,SAAS,CAACmH,KAAK,CAAC,QAAQ;UAC1B,UAAU;YACRtC,eAAe,CAACR,KAAI,GAAI,KAAI;UAC9B;QACF;MACF,CAAC;IACH;IAEA,MAAMuI,cAAa,GAAKpH,QAAQ,IAAK;MACnC,IAAIA,QAAQ,CAACoF,cAAa,GAAI,CAAC,EAAE;QAC/B5K,SAAS,CAACiK,OAAO,CAAC,cAAc;QAChC;MACF;MAEAhK,YAAY,CAAC4M,OAAO,CAClB,WAAWrH,QAAQ,CAAChE,IAAI,KAAK,EAC7B,MAAM,EACN;QACEiI,iBAAiB,EAAE,IAAI;QACvBC,gBAAgB,EAAE,IAAI;QACtBlG,IAAI,EAAE;MACR,CACF,CAAC,CAACoF,IAAI,CAAC,YAAY;QACjB,IAAI;UACF,MAAMtH,sBAAsB,CAACkE,QAAQ,CAACoB,EAAE;UACxC5G,SAAS,CAACyI,OAAO,CAAC,QAAQ;UAC1BlB,uBAAuB,CAAC;QAC1B,EAAE,OAAOJ,KAAK,EAAE;UACd1B,OAAO,CAAC0B,KAAK,CAAC,SAAS,EAAEA,KAAK;UAC9BnH,SAAS,CAACmH,KAAK,CAAC,QAAQ;QAC1B;MACF,CAAC,CAAC,CAACoB,KAAK,CAAC,MAAM,CAAC,CAAC;IACnB;IAEA,MAAMuE,UAAS,GAAKC,UAAU,IAAK;MACjC,MAAMC,IAAG,GAAI,IAAIjL,IAAI,CAACgL,UAAU;MAChC,MAAM/K,GAAE,GAAI,IAAID,IAAI,CAAC;;MAErB;MACA,IAAIiL,IAAI,CAACC,YAAY,CAAC,MAAMjL,GAAG,CAACiL,YAAY,CAAC,CAAC,EAAE;QAC9C,OAAOD,IAAI,CAACE,kBAAkB,CAAC,OAAO,EAAE;UAAEC,IAAI,EAAE,SAAS;UAAEC,MAAM,EAAE;QAAU,CAAC;MAChF;;MAEA;MACA,MAAMC,SAAQ,GAAI,IAAItL,IAAI,CAACC,GAAG;MAC9BqL,SAAS,CAACC,OAAO,CAACtL,GAAG,CAACuL,OAAO,CAAC,IAAI,CAAC;MACnC,IAAIP,IAAI,CAACC,YAAY,CAAC,MAAMI,SAAS,CAACJ,YAAY,CAAC,CAAC,EAAE;QACpD,OAAO,IAAG;MACZ;;MAEA;MACA,MAAMO,QAAO,GAAI,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI;MAC1D,MAAMC,QAAO,GAAIC,IAAI,CAACC,KAAK,CAAC,CAAC3L,GAAE,GAAIgL,IAAI,KAAK,IAAG,GAAI,EAAC,GAAI,EAAC,GAAI,EAAE,CAAC;MAChE,IAAIS,QAAO,GAAI,CAAC,EAAE;QAChB,OAAOD,QAAQ,CAACR,IAAI,CAACY,MAAM,CAAC,CAAC;MAC/B;;MAEA;MACA,OAAOZ,IAAI,CAACa,kBAAkB,CAAC,OAAO,EAAE;QAAEC,KAAK,EAAE,SAAS;QAAEC,GAAG,EAAE;MAAU,CAAC;IAC9E;IAEA,MAAMC,mBAAkB,GAAIA,CAAA,KAAM;MAChC1L,cAAc,CAAC+B,KAAI,GAAI,KAAI;MAC3BnB,IAAI,CAACmB,KAAI,GAAI;MACbjB,OAAO,CAACiB,KAAI,GAAI,IAAG;MACnBY,cAAc,CAAC,IAAI;IACrB;;IAEA;IACArF,WAAW,CAAC,MAAM;MAChB6F,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;MACnCoF,aAAa,CAAC,CAAC;IACjB,CAAC,CAAC;;IAEF;IACA,MAAMA,aAAY,GAAI,MAAAA,CAAA,KAAY;MAChC5H,IAAI,CAACmB,KAAI,GAAI;MACbjB,OAAO,CAACiB,KAAI,GAAI,IAAG;MACnB,IAAI;QACFoB,OAAO,CAACC,GAAG,CAAC,eAAe;QAC3B5C,aAAa,CAACuB,KAAI,GAAI,IAAG;;QAEzB;QACA,MAAMkD,uBAAuB,CAAC;;QAE9B;QACA,MAAMR,OAAO,CAACkH,GAAG,CAAC,CAChBhJ,cAAc,CAAC,IAAI,CAAC,EACpBmC,oBAAoB,CAAC,IAAI,CAAC,EAC1BC,oBAAoB,CAAC,EACtB;QAED5B,OAAO,CAACC,GAAG,CAAC,UAAU,EAAE;UACtBwI,IAAI,EAAE9L,kBAAkB,CAACiC,KAAK,CAACC,MAAM;UACrC6J,IAAI,EAAElM,SAAS,CAACoC,KAAK,CAACC,MAAM;UAC5B8J,IAAI,EAAElM,eAAe,CAACmC,KAAK,CAACC,MAAM;UAClC+J,IAAI,EAAElM,eAAe,CAACkC,KAAK,CAACC,MAAM;UAClCgK,GAAG,EAAEjL,UAAU,CAACgB;QAClB,CAAC;;QAED;QACA,MAAMU,WAAW,CAAC;;QAElB;QACA,IAAI9C,SAAS,CAACoC,KAAK,CAACC,MAAK,GAAI,KACzBrC,SAAS,CAACoC,KAAK,CAACC,MAAK,GAAIjB,UAAU,CAACgB,KAAI,IACxCpC,SAAS,CAACoC,KAAK,CAACC,MAAK,GAAInB,QAAQ,EAAE;UACrCsC,OAAO,CAACC,GAAG,CAAC,oBAAoB;UAChC,MAAM6I,iBAAiB,CAAC;QAC1B;MACF,EAAE,OAAOpH,KAAK,EAAE;QACd1B,OAAO,CAAC0B,KAAK,CAAC,WAAW,EAAEA,KAAK;QAChCnH,SAAS,CAACmH,KAAK,CAAC,cAAc;MAChC,UAAU;QACRrE,aAAa,CAACuB,KAAI,GAAI,KAAI;MAC5B;IACF;;IAEA;IACA1E,OAAO,CAAC,iBAAiB,EAAEmL,aAAa,CAAC;;IAEzC;IACAjL,KAAK,CAAC,MAAM+B,KAAK,CAACoJ,KAAK,CAACC,QAAQ,EAAGuD,MAAM,IAAK;MAC5C,IAAIA,MAAM,EAAE;QACV/I,OAAO,CAACC,GAAG,CAAC,YAAY,EAAE8I,MAAM,CAAC;QACjC1M,cAAc,CAACuC,KAAI,GAAItC,IAAI,CAACC,GAAG,CAAC,CAAC;QACjC8I,aAAa,CAAC,CAAC;MACjB;IACF,CAAC,CAAC;;IAEF;IACAjL,KAAK,CAAC,MAAM+B,KAAK,CAAC6M,IAAI,EAAE,CAACC,OAAO,EAAEC,OAAO,KAAK;MAC5ClJ,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEiJ,OAAO,EAAE,IAAI,EAAED,OAAO,CAAC;MAC5C,IAAIA,OAAM,KAAM,WAAU,IAAKC,OAAM,IAAKA,OAAO,CAACC,UAAU,CAAC,YAAY,CAAC,EAAE;QAC1E;QACAnJ,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC;QAC/B5D,cAAc,CAACuC,KAAI,GAAItC,IAAI,CAACC,GAAG,CAAC,CAAC;QACjC8I,aAAa,CAAC,CAAC;MACjB;IACF,CAAC,CAAC;;IAEF;IACA,MAAMI,WAAU,GAAI,MAAAA,CAAA,KAAY;MAC9BhI,IAAI,CAACmB,KAAI,GAAI;MACbjB,OAAO,CAACiB,KAAI,GAAI,IAAG;MACnB,MAAMyG,aAAa,CAAC;MACpB,IAAIjJ,KAAI,IAAKA,KAAK,CAACmD,YAAY,EAAE;QAC/BnD,KAAK,CAACmD,YAAY,CAAC;MACrB;IACF;;IAEA;IACA,MAAMuJ,iBAAgB,GAAI,MAAAA,CAAA,KAAY;MACpC,IAAI,CAACnL,OAAO,CAACiB,KAAK,EAAE;QAClBoB,OAAO,CAACC,GAAG,CAAC,SAAS,CAAC;QACtB;MACF;MAEAD,OAAO,CAACC,GAAG,CAAC,gBAAgBxC,IAAI,CAACmB,KAAK,OAAOnB,IAAI,CAACmB,KAAI,GAAI,CAAC,EAAE,CAAC;MAC9DpB,WAAW,CAACoB,KAAI,GAAI,IAAI;MACxB,IAAI;QACFnB,IAAI,CAACmB,KAAI,IAAK,CAAC;QACf,MAAMY,cAAc,CAAC,KAAK,EAAE,IAAI,CAAC;MACnC,UAAU;QACRhC,WAAW,CAACoB,KAAI,GAAI,KAAK;MAC3B;IACF;;IAEA;IACA7E,SAAS,CAAC,MAAM;MACdiG,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC;MACrCoF,aAAa,CAAC,CAAC,EAAE;IACnB,CAAC;IAED,OAAO;MACL7I,SAAS;MACTC,eAAe;MACfC,eAAe;MACfC,kBAAkB;MAClBC,WAAW;MACXC,cAAc;MACdoF,eAAe;MACftD,cAAc;MACdG,eAAe;MACfhC,wBAAwB;MACxBC,kBAAkB;MAClBC,mBAAmB;MACnBC,kBAAkB;MAClBY,eAAe;MACfG,cAAc;MACdE,cAAc;MACdM,WAAW;MACXC,YAAY;MACZC,SAAS;MACTxB,gBAAgB;MAChBC,aAAa;MACbC,cAAc;MACdC,aAAa;MACbC,YAAY;MACZC,aAAa;MACb4E,iBAAiB;MACjBQ,iBAAiB;MACjBkB,YAAY;MACZC,cAAc;MACdO,iBAAiB;MACjB5I,aAAa;MACb8I,YAAY;MACZhJ,cAAc;MACdkJ,aAAa;MACbiB,gBAAgB;MAChB2B,UAAU;MACVtI,qBAAqB;MACrBC,eAAe;MACfG,eAAe;MACfC,eAAe;MACfC,iBAAiB;MACjB0H,YAAY;MACZD,iBAAiB;MACjBG,cAAc;MACdE,cAAc;MACdoB,mBAAmB;MACnBzC,cAAc;MACdY,wBAAwB;MACxBE,uBAAuB;MACvBC,gBAAgB;MAChBxB,aAAa;MACbI,WAAW;MACXpJ,cAAc;MACdsB,OAAO;MACPH,WAAW;MACXsL;IACF;EACF;AACF","ignoreList":[]}]}