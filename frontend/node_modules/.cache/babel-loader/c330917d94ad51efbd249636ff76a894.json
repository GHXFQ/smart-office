{"remainingRequest":"C:\\Users\\18083\\Desktop\\CCIT\\office\\o\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\o\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\18083\\Desktop\\CCIT\\office\\o\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\18083\\Desktop\\CCIT\\office\\o\\smart-office\\frontend\\src\\views\\project\\components\\DashboardView.vue?vue&type=script&setup=true&lang=js","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\o\\smart-office\\frontend\\src\\views\\project\\components\\DashboardView.vue","mtime":1751958699898},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\o\\smart-office\\frontend\\babel.config.js","mtime":1748077811200},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\o\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\o\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\o\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\o\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1746431218000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZm9yLWVhY2guanMiOwppbXBvcnQgeyByZWYsIGNvbXB1dGVkLCBvbk1vdW50ZWQsIHdhdGNoIH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgZm9ybWF0UmVsYXRpdmVUaW1lIGFzIGZvcm1hdFRpbWUgfSBmcm9tICdAL3V0aWxzL2RhdGUnOwppbXBvcnQgeyBtYXJrZWQgfSBmcm9tICdtYXJrZWQnOwppbXBvcnQgcmVxdWVzdCBmcm9tICdAL3V0aWxzL3JlcXVlc3QnOwpleHBvcnQgZGVmYXVsdCB7CiAgX19uYW1lOiAnRGFzaGJvYXJkVmlldycsCiAgcHJvcHM6IHsKICAgIHByb2plY3Q6IE9iamVjdCwKICAgIHRhc2tzOiBBcnJheSwKICAgIGRvY3VtZW50czogQXJyYXksCiAgICByZXF1aXJlbWVudHM6IEFycmF5CiAgfSwKICBzZXR1cChfX3Byb3BzLCB7CiAgICBleHBvc2U6IF9fZXhwb3NlCiAgfSkgewogICAgX19leHBvc2UoKTsKICAgIGNvbnN0IHByb3BzID0gX19wcm9wczsKCiAgICAvLyDliqDovb3nirbmgIEKICAgIGNvbnN0IGlzTG9hZGluZyA9IHJlZihmYWxzZSk7CgogICAgLy8g6aG555uu5YGl5bq35bqm5pWw5o2uCiAgICBjb25zdCBwcm9qZWN0SGVhbHRoID0gcmVmKDY1KTsKICAgIGNvbnN0IHByb2plY3RIZWFsdGhEZXNjID0gcmVmKCfpobnnm67lpITkuo7lip/og73pmLbmrrXvvIzlkITpobnlt6XkvZzmnInluo/lvIDlsZXvvIzlrZjlnKjkuIDlrprkuI3noa7lrprmgKfjgIInKTsKICAgIGNvbnN0IHByb2plY3RSaXNrcyA9IHJlZihbXSk7CgogICAgLy8g6K6h566X57uf6K6h5pWw5o2uCiAgICBjb25zdCBjb21wbGV0ZWRUYXNrQ291bnQgPSBjb21wdXRlZCgoKSA9PiB7CiAgICAgIHZhciBfcHJvcHMkdGFza3M7CiAgICAgIHJldHVybiAoKF9wcm9wcyR0YXNrcyA9IHByb3BzLnRhc2tzKSA9PT0gbnVsbCB8fCBfcHJvcHMkdGFza3MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wcm9wcyR0YXNrcy5maWx0ZXIodGFzayA9PiB0YXNrLnN0YXR1cyA9PT0gJ2RvbmUnKS5sZW5ndGgpIHx8IDA7CiAgICB9KTsKICAgIGNvbnN0IHBlbmRpbmdUYXNrQ291bnQgPSBjb21wdXRlZCgoKSA9PiB7CiAgICAgIHZhciBfcHJvcHMkdGFza3MyOwogICAgICByZXR1cm4gKChfcHJvcHMkdGFza3MyID0gcHJvcHMudGFza3MpID09PSBudWxsIHx8IF9wcm9wcyR0YXNrczIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wcm9wcyR0YXNrczIuZmlsdGVyKHRhc2sgPT4gdGFzay5zdGF0dXMgIT09ICdkb25lJykubGVuZ3RoKSB8fCAwOwogICAgfSk7CiAgICBjb25zdCBkb2N1bWVudENvdW50ID0gY29tcHV0ZWQoKCkgPT4gewogICAgICB2YXIgX3Byb3BzJGRvY3VtZW50czsKICAgICAgcmV0dXJuICgoX3Byb3BzJGRvY3VtZW50cyA9IHByb3BzLmRvY3VtZW50cykgPT09IG51bGwgfHwgX3Byb3BzJGRvY3VtZW50cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Byb3BzJGRvY3VtZW50cy5sZW5ndGgpIHx8IDA7CiAgICB9KTsKICAgIGNvbnN0IHJlcXVpcmVtZW50Q291bnQgPSBjb21wdXRlZCgoKSA9PiB7CiAgICAgIHZhciBfcHJvcHMkcmVxdWlyZW1lbnRzOwogICAgICByZXR1cm4gKChfcHJvcHMkcmVxdWlyZW1lbnRzID0gcHJvcHMucmVxdWlyZW1lbnRzKSA9PT0gbnVsbCB8fCBfcHJvcHMkcmVxdWlyZW1lbnRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcHJvcHMkcmVxdWlyZW1lbnRzLmxlbmd0aCkgfHwgMDsKICAgIH0pOwoKICAgIC8vIOWBpeW6t+W6pui/m+W6puadoeminOiJsgogICAgY29uc3QgaGVhbHRoQmFyQ2xhc3MgPSBjb21wdXRlZCgoKSA9PiB7CiAgICAgIGlmIChwcm9qZWN0SGVhbHRoLnZhbHVlID49IDgwKSByZXR1cm4gJ2JnLXN1Y2Nlc3MnOwogICAgICBpZiAocHJvamVjdEhlYWx0aC52YWx1ZSA+PSA2MCkgcmV0dXJuICdiZy13YXJuaW5nJzsKICAgICAgcmV0dXJuICdiZy1kYW5nZXInOwogICAgfSk7CgogICAgLy8g6I635Y+W6aOO6Zmp5Zu+5qCH5qC35byPCiAgICBmdW5jdGlvbiBnZXRSaXNrSWNvbkNsYXNzKGluZGV4KSB7CiAgICAgIC8vIOesrOS4gOS4qumjjumZqeS9v+eUqOaIkOWKn+agt+W8j++8iOe7v+iJsu+8ie+8jOWFtuS7luS9v+eUqOitpuWRiuagt+W8j++8iOm7hOiJsu+8iQogICAgICByZXR1cm4gaW5kZXggPT09IDAgPyAnc3VjY2VzcycgOiAnd2FybmluZyc7CiAgICB9CgogICAgLy8g6I635Y+W6aOO6Zmp5Zu+5qCH5ZCN56ewCiAgICBmdW5jdGlvbiBnZXRSaXNrSWNvbk5hbWUoaW5kZXgpIHsKICAgICAgLy8g56ys5LiA5Liq6aOO6Zmp5L2/55So5oiQ5Yqf5Zu+5qCH77yM5YW25LuW5L2/55So6K2m5ZGK5Zu+5qCHCiAgICAgIHJldHVybiBpbmRleCA9PT0gMCA/ICdiaS1jaGVjay1jaXJjbGUtZmlsbCcgOiAnYmktZXhjbGFtYXRpb24tdHJpYW5nbGUtZmlsbCc7CiAgICB9CgogICAgLy8g5Yqg6L296aG555uu5YiG5p6Q5pWw5o2uCiAgICBhc3luYyBmdW5jdGlvbiBsb2FkUHJvamVjdEFuYWx5c2lzKCkgewogICAgICB2YXIgX3Byb3BzJHByb2plY3Q7CiAgICAgIGlmICghKChfcHJvcHMkcHJvamVjdCA9IHByb3BzLnByb2plY3QpICE9PSBudWxsICYmIF9wcm9wcyRwcm9qZWN0ICE9PSB2b2lkIDAgJiYgX3Byb3BzJHByb2plY3QuaWQpKSByZXR1cm47CiAgICAgIGlzTG9hZGluZy52YWx1ZSA9IHRydWU7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdC5nZXQoYC9hcGkvcHJvamVjdHMvJHtwcm9wcy5wcm9qZWN0LmlkfS9haV9kYXNoYm9hcmQvYCk7CiAgICAgICAgY29uc29sZS5sb2coJ+mhueebruWIhuaekOaVsOaNrjonLCByZXMuZGF0YSk7CgogICAgICAgIC8vIOabtOaWsOWBpeW6t+W6puaVsOaNrgogICAgICAgIHByb2plY3RIZWFsdGgudmFsdWUgPSByZXMuZGF0YS5oZWFsdGggfHwgMDsKICAgICAgICBwcm9qZWN0SGVhbHRoRGVzYy52YWx1ZSA9IHJlcy5kYXRhLmhlYWx0aF9kZXNjIHx8ICfml6Dms5Xojrflj5bpobnnm67lgaXlurfluqbmlbDmja4nOwoKICAgICAgICAvLyDmm7TmlrDpo47pmanmlbDmja4KICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyZXMuZGF0YS5yaXNrcykpIHsKICAgICAgICAgIHByb2plY3RSaXNrcy52YWx1ZSA9IHJlcy5kYXRhLnJpc2tzOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBwcm9qZWN0Umlza3MudmFsdWUgPSBbXTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WKoOi9vemhueebruWIhuaekOaVsOaNruWksei0pTonLCBlcnIpOwogICAgICAgIC8vIOiuvue9rum7mOiupOWAvO+8jOS9huS4jeS9v+eUqOehrOe8lueggeeahOaVsOaNrgogICAgICAgIHByb2plY3RIZWFsdGgudmFsdWUgPSAwOwogICAgICAgIHByb2plY3RIZWFsdGhEZXNjLnZhbHVlID0gJ+aXoOazleiOt+WPlumhueebruWBpeW6t+W6puaVsOaNric7CiAgICAgICAgcHJvamVjdFJpc2tzLnZhbHVlID0gW107CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgaXNMb2FkaW5nLnZhbHVlID0gZmFsc2U7CiAgICAgIH0KICAgIH0KCiAgICAvLyDnlJ/miJDmnIDov5HmtLvliqjliJfooajvvIzln7rkuo7ku7vliqHjgIHmlofmoaPlkozpnIDmsYLmlbDmja4KICAgIGNvbnN0IHJlY2VudEFjdGl2aXRpZXMgPSBjb21wdXRlZCgoKSA9PiB7CiAgICAgIHZhciBfcHJvcHMkdGFza3MzLCBfcHJvcHMkZG9jdW1lbnRzMiwgX3Byb3BzJHJlcXVpcmVtZW50czI7CiAgICAgIGNvbnN0IGFjdGl2aXRpZXMgPSBbXTsKCiAgICAgIC8vIOS7u+WKoea0u+WKqAogICAgICAoX3Byb3BzJHRhc2tzMyA9IHByb3BzLnRhc2tzKSA9PT0gbnVsbCB8fCBfcHJvcHMkdGFza3MzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcHJvcHMkdGFza3MzLmZvckVhY2godGFzayA9PiB7CiAgICAgICAgYWN0aXZpdGllcy5wdXNoKHsKICAgICAgICAgIGlkOiBgdGFzay1jcmVhdGUtJHt0YXNrLmlkfWAsCiAgICAgICAgICB0ZXh0OiBgJHt0YXNrLmNyZWF0b3JfbmFtZSB8fCAn5pyq55+l55So5oi3J30g5Yib5bu65LqG5Lu75YqhICIke3Rhc2sudGl0bGV9ImAsCiAgICAgICAgICB0aW1lOiB0YXNrLmNyZWF0ZWRfYXQsCiAgICAgICAgICBhaV9hbmFseXNpczogYOS7u+WKoeW3suWIm+W7uu+8jOS8mOWFiOe6pyR7dGFzay5wcmlvcml0eSB8fCAn5pyq5a6aJ31gCiAgICAgICAgfSk7CiAgICAgICAgaWYgKHRhc2suc3RhdHVzID09PSAnaW4tcHJvZ3Jlc3MnICYmIHRhc2sudXBkYXRlZF9hdCkgewogICAgICAgICAgYWN0aXZpdGllcy5wdXNoKHsKICAgICAgICAgICAgaWQ6IGB0YXNrLXVwZGF0ZS0ke3Rhc2suaWR9YCwKICAgICAgICAgICAgdGV4dDogYCR7dGFzay5hc3NpZ25lZV9uYW1lIHx8ICfotJ/otKPkuronfSDmraPlnKjlpITnkIbku7vliqEgIiR7dGFzay50aXRsZX0iYCwKICAgICAgICAgICAgdGltZTogdGFzay51cGRhdGVkX2F0LAogICAgICAgICAgICBhaV9hbmFseXNpczogJ+S7u+WKoeato+WcqOi/m+ihjOS4re+8jOivt+WFs+azqOi/m+W6picKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICAvLyDmlofmoaPmtLvliqgKICAgICAgKF9wcm9wcyRkb2N1bWVudHMyID0gcHJvcHMuZG9jdW1lbnRzKSA9PT0gbnVsbCB8fCBfcHJvcHMkZG9jdW1lbnRzMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Byb3BzJGRvY3VtZW50czIuZm9yRWFjaChkb2MgPT4gewogICAgICAgIGFjdGl2aXRpZXMucHVzaCh7CiAgICAgICAgICBpZDogYGRvYy0ke2RvYy5pZH1gLAogICAgICAgICAgdGV4dDogYCR7ZG9jLnVwbG9hZGVyX25hbWUgfHwgJ+acquefpeeUqOaItyd9IOS4iuS8oOS6huaWh+ahoyAiJHtkb2MubmFtZX0iYCwKICAgICAgICAgIHRpbWU6IGRvYy51cGxvYWRlZF9hdCwKICAgICAgICAgIGFpX2FuYWx5c2lzOiBkb2MuYW5hbHlzaXMKICAgICAgICB9KTsKICAgICAgfSk7CgogICAgICAvLyDpnIDmsYLmtLvliqgKICAgICAgKF9wcm9wcyRyZXF1aXJlbWVudHMyID0gcHJvcHMucmVxdWlyZW1lbnRzKSA9PT0gbnVsbCB8fCBfcHJvcHMkcmVxdWlyZW1lbnRzMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Byb3BzJHJlcXVpcmVtZW50czIuZm9yRWFjaChyZXEgPT4gewogICAgICAgIGFjdGl2aXRpZXMucHVzaCh7CiAgICAgICAgICBpZDogYHJlcS0ke3JlcS5pZH1gLAogICAgICAgICAgdGV4dDogYCR7cmVxLmNyZWF0b3JfbmFtZSB8fCAn5pyq55+l55So5oi3J30g5Yib5bu65LqG6ZyA5rGCICIke3JlcS5uYW1lfSJgLAogICAgICAgICAgdGltZTogcmVxLmNyZWF0ZWRfYXQsCiAgICAgICAgICBhaV9hbmFseXNpczogYOmcgOaxguS8mOWFiOe6p+S4uiR7cmVxLnByaW9yaXR5IHx8ICfmnKrlrponfWAKICAgICAgICB9KTsKICAgICAgfSk7CgogICAgICAvLyDmjInml7bpl7TlgJLluo/mjpLluo8KICAgICAgcmV0dXJuIGFjdGl2aXRpZXMuc29ydCgoYSwgYikgPT4gbmV3IERhdGUoYi50aW1lKSAtIG5ldyBEYXRlKGEudGltZSkpLnNsaWNlKDAsIDEwKTsgLy8g5Y+q5pi+56S65pyA6L+RMTDmnaEKICAgIH0pOwoKICAgIC8vIOWcqOe7hOS7tuaMgui9veaXtuWKoOi9vemhueebruWIhuaekOaVsOaNrgogICAgb25Nb3VudGVkKCgpID0+IHsKICAgICAgbG9hZFByb2plY3RBbmFseXNpcygpOwogICAgfSk7CgogICAgLy8g5b2T6aG555uuSUTlj5jljJbml7bph43mlrDliqDovb3mlbDmja4KICAgIHdhdGNoKCgpID0+IHsKICAgICAgdmFyIF9wcm9wcyRwcm9qZWN0MjsKICAgICAgcmV0dXJuIChfcHJvcHMkcHJvamVjdDIgPSBwcm9wcy5wcm9qZWN0KSA9PT0gbnVsbCB8fCBfcHJvcHMkcHJvamVjdDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wcm9wcyRwcm9qZWN0Mi5pZDsKICAgIH0sIG5ld0lkID0+IHsKICAgICAgaWYgKG5ld0lkKSB7CiAgICAgICAgbG9hZFByb2plY3RBbmFseXNpcygpOwogICAgICB9CiAgICB9KTsKCiAgICAvLyDlvZPku7vliqHjgIHmlofmoaPmiJbpnIDmsYLmlbDmja7lj5jljJbml7bvvIzph43mlrDliqDovb3pobnnm67liIbmnpAKICAgIHdhdGNoKFsoKSA9PiBwcm9wcy50YXNrcywgKCkgPT4gcHJvcHMuZG9jdW1lbnRzLCAoKSA9PiBwcm9wcy5yZXF1aXJlbWVudHNdLCAoKSA9PiB7CiAgICAgIGxvYWRQcm9qZWN0QW5hbHlzaXMoKTsKICAgIH0sIHsKICAgICAgZGVlcDogdHJ1ZQogICAgfSk7CiAgICBjb25zdCBfX3JldHVybmVkX18gPSB7CiAgICAgIHByb3BzLAogICAgICBpc0xvYWRpbmcsCiAgICAgIHByb2plY3RIZWFsdGgsCiAgICAgIHByb2plY3RIZWFsdGhEZXNjLAogICAgICBwcm9qZWN0Umlza3MsCiAgICAgIGNvbXBsZXRlZFRhc2tDb3VudCwKICAgICAgcGVuZGluZ1Rhc2tDb3VudCwKICAgICAgZG9jdW1lbnRDb3VudCwKICAgICAgcmVxdWlyZW1lbnRDb3VudCwKICAgICAgaGVhbHRoQmFyQ2xhc3MsCiAgICAgIGdldFJpc2tJY29uQ2xhc3MsCiAgICAgIGdldFJpc2tJY29uTmFtZSwKICAgICAgbG9hZFByb2plY3RBbmFseXNpcywKICAgICAgcmVjZW50QWN0aXZpdGllcywKICAgICAgcmVmLAogICAgICBjb21wdXRlZCwKICAgICAgb25Nb3VudGVkLAogICAgICB3YXRjaCwKICAgICAgZ2V0IGZvcm1hdFRpbWUoKSB7CiAgICAgICAgcmV0dXJuIGZvcm1hdFRpbWU7CiAgICAgIH0sCiAgICAgIGdldCBtYXJrZWQoKSB7CiAgICAgICAgcmV0dXJuIG1hcmtlZDsKICAgICAgfSwKICAgICAgZ2V0IHJlcXVlc3QoKSB7CiAgICAgICAgcmV0dXJuIHJlcXVlc3Q7CiAgICAgIH0KICAgIH07CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX19yZXR1cm5lZF9fLCAnX19pc1NjcmlwdFNldHVwJywgewogICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgdmFsdWU6IHRydWUKICAgIH0pOwogICAgcmV0dXJuIF9fcmV0dXJuZWRfXzsKICB9Cn07"},{"version":3,"names":["ref","computed","onMounted","watch","formatRelativeTime","formatTime","marked","request","props","__props","isLoading","projectHealth","projectHealthDesc","projectRisks","completedTaskCount","_props$tasks","tasks","filter","task","status","length","pendingTaskCount","_props$tasks2","documentCount","_props$documents","documents","requirementCount","_props$requirements","requirements","healthBarClass","value","getRiskIconClass","index","getRiskIconName","loadProjectAnalysis","_props$project","project","id","res","get","console","log","data","health","health_desc","Array","isArray","risks","err","error","recentActivities","_props$tasks3","_props$documents2","_props$requirements2","activities","forEach","push","text","creator_name","title","time","created_at","ai_analysis","priority","updated_at","assignee_name","doc","uploader_name","name","uploaded_at","analysis","req","sort","a","b","Date","slice","_props$project2","newId","deep"],"sources":["C:/Users/18083/Desktop/CCIT/office/o/smart-office/frontend/src/views/project/components/DashboardView.vue"],"sourcesContent":["<template>\n  <div class=\"dashboard-view\">\n    <!-- 项目健康度和风险预警 -->\n    <div class=\"row mb-4\">\n      <div class=\"col-md-6\">\n        <div class=\"module-card\">\n          <div class=\"module-header\">\n            <h5 class=\"module-title\">项目健康度</h5>\n          </div>\n          <div class=\"health-content\">\n            <div v-if=\"isLoading\" class=\"d-flex justify-content-center py-3\">\n              <div class=\"spinner-border text-primary\" role=\"status\">\n                <span class=\"visually-hidden\">加载中...</span>\n              </div>\n            </div>\n            <template v-else>\n              <div class=\"progress mb-2\">\n                <div class=\"progress-bar\" :class=\"healthBarClass\" role=\"progressbar\" :style=\"{ width: `${projectHealth}%` }\"></div>\n              </div>\n              <div class=\"health-desc\">\n                <p>{{ projectHealthDesc }}</p>\n              </div>\n            </template>\n          </div>\n        </div>\n      </div>\n      <div class=\"col-md-6\">\n        <div class=\"module-card\">\n          <div class=\"module-header\">\n            <h5 class=\"module-title\">风险预警</h5>\n          </div>\n          <div class=\"risk-content\">\n            <div v-if=\"isLoading\" class=\"d-flex justify-content-center py-3\">\n              <div class=\"spinner-border text-primary\" role=\"status\">\n                <span class=\"visually-hidden\">加载中...</span>\n              </div>\n            </div>\n            <template v-else>\n              <div v-for=\"(risk, index) in projectRisks\" :key=\"index\" class=\"risk-item\">\n                <div class=\"risk-icon\" :class=\"getRiskIconClass(index)\">\n                  <i class=\"bi\" :class=\"getRiskIconName(index)\"></i>\n                </div>\n                <div class=\"risk-text\">{{ risk }}</div>\n              </div>\n              <div v-if=\"projectRisks.length === 0\" class=\"text-center text-muted py-3\">\n                暂无风险预警\n              </div>\n            </template>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 统计卡片 -->\n    <div class=\"row mb-4\">\n      <div class=\"col-md-3\">\n        <div class=\"stats-card bg-success\">\n          <div class=\"stats-content\">\n            <div class=\"stats-title\">已完成任务</div>\n            <div class=\"stats-number\">{{ completedTaskCount }}</div>\n          </div>\n        </div>\n      </div>\n      <div class=\"col-md-3\">\n        <div class=\"stats-card bg-warning\">\n          <div class=\"stats-content\">\n            <div class=\"stats-title\">待处理任务</div>\n            <div class=\"stats-number\">{{ pendingTaskCount }}</div>\n          </div>\n        </div>\n      </div>\n      <div class=\"col-md-3\">\n        <div class=\"stats-card bg-primary\">\n          <div class=\"stats-content\">\n            <div class=\"stats-title\">文档数量</div>\n            <div class=\"stats-number\">{{ documentCount }}</div>\n          </div>\n        </div>\n      </div>\n      <div class=\"col-md-3\">\n        <div class=\"stats-card bg-info\">\n          <div class=\"stats-content\">\n            <div class=\"stats-title\">需求数量</div>\n            <div class=\"stats-number\">{{ requirementCount }}</div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 最近活动 -->\n    <div class=\"module-card\">\n      <div class=\"module-header\">\n        <h5 class=\"module-title\">最近活动</h5>\n      </div>\n      <div class=\"activity-list\">\n        <div v-if=\"isLoading\" class=\"d-flex justify-content-center py-3\">\n          <div class=\"spinner-border text-primary\" role=\"status\">\n            <span class=\"visually-hidden\">加载中...</span>\n          </div>\n        </div>\n        <template v-else>\n          <div v-for=\"item in recentActivities\" :key=\"item.id\" class=\"activity-item\">\n            <div class=\"activity-main\">\n              <p class=\"activity-title\">{{ item.text }}</p>\n              <div v-if=\"item.ai_analysis\" class=\"activity-desc\" v-html=\"marked(item.ai_analysis)\"></div>\n            </div>\n            <div class=\"activity-time\">\n              {{ formatTime(item.time) }}\n            </div>\n          </div>\n          <div v-if=\"recentActivities.length === 0\" class=\"no-activity\">\n            暂无最近活动\n          </div>\n        </template>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { formatRelativeTime as formatTime } from '@/utils/date'\nimport { marked } from 'marked'\nimport request from '@/utils/request'\n\nconst props = defineProps({\n  project: Object,\n  tasks: Array,\n  documents: Array,\n  requirements: Array\n})\n\n// 加载状态\nconst isLoading = ref(false)\n\n// 项目健康度数据\nconst projectHealth = ref(65)\nconst projectHealthDesc = ref('项目处于功能阶段，各项工作有序开展，存在一定不确定性。')\nconst projectRisks = ref([])\n\n// 计算统计数据\nconst completedTaskCount = computed(() => {\n  return props.tasks?.filter(task => task.status === 'done').length || 0\n})\n\nconst pendingTaskCount = computed(() => {\n  return props.tasks?.filter(task => task.status !== 'done').length || 0\n})\n\nconst documentCount = computed(() => {\n  return props.documents?.length || 0\n})\n\nconst requirementCount = computed(() => {\n  return props.requirements?.length || 0\n})\n\n// 健康度进度条颜色\nconst healthBarClass = computed(() => {\n  if (projectHealth.value >= 80) return 'bg-success'\n  if (projectHealth.value >= 60) return 'bg-warning'\n  return 'bg-danger'\n})\n\n// 获取风险图标样式\nfunction getRiskIconClass(index) {\n  // 第一个风险使用成功样式（绿色），其他使用警告样式（黄色）\n  return index === 0 ? 'success' : 'warning'\n}\n\n// 获取风险图标名称\nfunction getRiskIconName(index) {\n  // 第一个风险使用成功图标，其他使用警告图标\n  return index === 0 ? 'bi-check-circle-fill' : 'bi-exclamation-triangle-fill'\n}\n\n// 加载项目分析数据\nasync function loadProjectAnalysis() {\n  if (!props.project?.id) return\n  \n  isLoading.value = true\n  \n  try {\n    const res = await request.get(`/api/projects/${props.project.id}/ai_dashboard/`)\n    console.log('项目分析数据:', res.data)\n    \n    // 更新健康度数据\n    projectHealth.value = res.data.health || 0\n    projectHealthDesc.value = res.data.health_desc || '无法获取项目健康度数据'\n    \n    // 更新风险数据\n    if (Array.isArray(res.data.risks)) {\n      projectRisks.value = res.data.risks\n    } else {\n      projectRisks.value = []\n    }\n    \n  } catch (err) {\n    console.error('加载项目分析数据失败:', err)\n    // 设置默认值，但不使用硬编码的数据\n    projectHealth.value = 0\n    projectHealthDesc.value = '无法获取项目健康度数据'\n    projectRisks.value = []\n  } finally {\n    isLoading.value = false\n  }\n}\n\n// 生成最近活动列表，基于任务、文档和需求数据\nconst recentActivities = computed(() => {\n  const activities = []\n\n  // 任务活动\n  props.tasks?.forEach(task => {\n    activities.push({\n      id: `task-create-${task.id}`,\n      text: `${task.creator_name || '未知用户'} 创建了任务 \"${task.title}\"`,\n      time: task.created_at,\n      ai_analysis: `任务已创建，优先级${task.priority || '未定'}`\n    })\n    if (task.status === 'in-progress' && task.updated_at) {\n      activities.push({\n        id: `task-update-${task.id}`,\n        text: `${task.assignee_name || '负责人'} 正在处理任务 \"${task.title}\"`,\n        time: task.updated_at,\n        ai_analysis: '任务正在进行中，请关注进度'\n      })\n    }\n  })\n\n  // 文档活动\n  props.documents?.forEach(doc => {\n    activities.push({\n      id: `doc-${doc.id}`,\n      text: `${doc.uploader_name || '未知用户'} 上传了文档 \"${doc.name}\"`,\n      time: doc.uploaded_at,\n      ai_analysis: doc.analysis\n    })\n  })\n\n  // 需求活动\n  props.requirements?.forEach(req => {\n    activities.push({\n      id: `req-${req.id}`,\n      text: `${req.creator_name || '未知用户'} 创建了需求 \"${req.name}\"`,\n      time: req.created_at,\n      ai_analysis: `需求优先级为${req.priority || '未定'}`\n    })\n  })\n  \n  // 按时间倒序排序\n  return activities.sort((a, b) => new Date(b.time) - new Date(a.time)).slice(0, 10) // 只显示最近10条\n})\n\n// 在组件挂载时加载项目分析数据\nonMounted(() => {\n  loadProjectAnalysis()\n})\n\n// 当项目ID变化时重新加载数据\nwatch(() => props.project?.id, (newId) => {\n  if (newId) {\n    loadProjectAnalysis()\n  }\n})\n\n// 当任务、文档或需求数据变化时，重新加载项目分析\nwatch([\n  () => props.tasks, \n  () => props.documents, \n  () => props.requirements\n], () => {\n  loadProjectAnalysis()\n}, { deep: true })\n\n</script>\n\n<style lang=\"scss\" scoped>\n.dashboard-view {\n  padding: 10px;\n}\n\n.module-card {\n  background: #fff;\n  border-radius: 8px;\n  padding: 20px;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.06);\n  height: 100%;\n}\n\n.module-header {\n  margin-bottom: 20px;\n}\n\n.module-title {\n  font-size: 18px;\n  font-weight: 600;\n  color: #303133;\n}\n\n.health-content {\n  .progress {\n    height: 10px;\n    background-color: #e9ecef;\n    border-radius: 5px;\n  }\n  .health-desc {\n    margin-top: 10px;\n    color: #606266;\n    font-size: 14px;\n  }\n}\n\n.risk-content {\n  .risk-item {\n    display: flex;\n    align-items: flex-start;\n    margin-bottom: 15px;\n    \n    &:last-child {\n      margin-bottom: 0;\n    }\n    \n    .risk-icon {\n      margin-right: 10px;\n      margin-top: 2px;\n      \n      &.success {\n        color: #67C23A;\n      }\n      \n      &.warning {\n        color: #E6A23C;\n      }\n    }\n    \n    .risk-text {\n      flex: 1;\n      font-size: 14px;\n      color: #606266;\n    }\n  }\n}\n\n.stats-card {\n  border-radius: 8px;\n  padding: 20px;\n  height: 100%;\n  color: white;\n  \n  .stats-content {\n    .stats-title {\n      font-size: 14px;\n      opacity: 0.9;\n      margin-bottom: 10px;\n    }\n    \n    .stats-number {\n      font-size: 32px;\n      font-weight: bold;\n    }\n  }\n}\n\n.activity-list {\n  .activity-item {\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    padding: 15px 0;\n    border-bottom: 1px solid #EBEEF5;\n\n    &:last-child {\n      border-bottom: none;\n    }\n  }\n\n  .activity-main {\n    flex: 1;\n    .activity-title {\n      font-size: 15px;\n      color: #303133;\n      margin: 0 0 5px 0;\n    }\n    .activity-desc {\n      font-size: 14px;\n      color: #888;\n      line-height: 1.6;\n\n      :deep(p) {\n        margin: 0 0 8px 0;\n      }\n      :deep(strong) {\n        font-weight: bold;\n        color: #555;\n      }\n      :deep(ul) {\n        padding-left: 20px;\n        margin: 0;\n      }\n      :deep(li) {\n        margin-bottom: 4px;\n      }\n    }\n  }\n\n  .activity-time {\n    font-size: 13px;\n    color: #909399;\n    width: 100px;\n    text-align: right;\n  }\n\n  .no-activity {\n    text-align: center;\n    color: #909399;\n    padding: 20px;\n  }\n}\n\n.row {\n  display: flex;\n  flex-wrap: wrap;\n  margin-right: -15px;\n  margin-left: -15px;\n}\n\n.col-md-3 {\n  flex: 0 0 25%;\n  max-width: 25%;\n  padding-right: 15px;\n  padding-left: 15px;\n}\n\n.col-md-6 {\n  flex: 0 0 50%;\n  max-width: 50%;\n  padding-right: 15px;\n  padding-left: 15px;\n}\n\n.mb-4 {\n  margin-bottom: 1.5rem;\n}\n\n.mb-2 {\n  margin-bottom: 0.5rem;\n}\n\n.spinner-border {\n  display: inline-block;\n  width: 2rem;\n  height: 2rem;\n  border: 0.25em solid currentColor;\n  border-right-color: transparent;\n  border-radius: 50%;\n  animation: spinner-border .75s linear infinite;\n}\n\n.visually-hidden {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border: 0;\n}\n\n@keyframes spinner-border {\n  to { transform: rotate(360deg); }\n}\n\n/* 响应式调整 */\n@media (max-width: 768px) {\n  .col-md-3, .col-md-6 {\n    flex: 0 0 100%;\n    max-width: 100%;\n    margin-bottom: 15px;\n  }\n}\n</style>\n\n<style lang=\"scss\" scoped>\n[data-theme=\"dark\"] {\n  .dashboard-view, .module-card {\n    background-color: var(--el-bg-color-page) !important;\n    color: var(--el-text-color-primary) !important;\n    border: 1px solid var(--el-border-color-light);\n  }\n\n  .module-title, .health-desc p {\n    color: var(--el-text-color-primary) !important;\n  }\n\n  .risk-item, .activity-item {\n    border-bottom-color: var(--el-border-color-light) !important;\n  }\n  \n  .risk-text, .activity-main .activity-title, .activity-time {\n    color: var(--el-text-color-secondary) !important;\n  }\n  \n  .no-activity {\n    color: var(--el-text-color-secondary);\n  }\n\n  /* 覆盖统计卡片的背景色 */\n  .stats-card {\n    &.bg-success { background-color: #28a745 !important; }\n    &.bg-warning { background-color: #ffc107 !important; }\n    &.bg-primary { background-color: #007bff !important; }\n    &.bg-info { background-color: #17a2b8 !important; }\n    \n    .stats-title, .stats-number {\n      color: #fff !important;\n    }\n  }\n\n  .progress {\n    background-color: var(--el-fill-color-light);\n  }\n}\n</style>"],"mappings":";;;;AAwHA,SAASA,GAAG,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,KAAK,QAAQ,KAAI;AACpD,SAASC,kBAAkB,IAAIC,UAAU,QAAQ,cAAa;AAC9D,SAASC,MAAM,QAAQ,QAAO;AAC9B,OAAOC,OAAO,MAAM,iBAAgB;;;;;;;;;;;;;IAEpC,MAAMC,KAAK,GAAGC,OAAA;;IAOd;IACA,MAAMC,SAAS,GAAGV,GAAG,CAAC,KAAK;;IAE3B;IACA,MAAMW,aAAa,GAAGX,GAAG,CAAC,EAAE;IAC5B,MAAMY,iBAAiB,GAAGZ,GAAG,CAAC,6BAA6B;IAC3D,MAAMa,YAAY,GAAGb,GAAG,CAAC,EAAE;;IAE3B;IACA,MAAMc,kBAAkB,GAAGb,QAAQ,CAAC,MAAM;MAAA,IAAAc,YAAA;MACxC,OAAO,EAAAA,YAAA,GAAAP,KAAK,CAACQ,KAAK,cAAAD,YAAA,uBAAXA,YAAA,CAAaE,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACC,MAAM,KAAK,MAAM,CAAC,CAACC,MAAM,KAAI;IACvE,CAAC;IAED,MAAMC,gBAAgB,GAAGpB,QAAQ,CAAC,MAAM;MAAA,IAAAqB,aAAA;MACtC,OAAO,EAAAA,aAAA,GAAAd,KAAK,CAACQ,KAAK,cAAAM,aAAA,uBAAXA,aAAA,CAAaL,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACC,MAAM,KAAK,MAAM,CAAC,CAACC,MAAM,KAAI;IACvE,CAAC;IAED,MAAMG,aAAa,GAAGtB,QAAQ,CAAC,MAAM;MAAA,IAAAuB,gBAAA;MACnC,OAAO,EAAAA,gBAAA,GAAAhB,KAAK,CAACiB,SAAS,cAAAD,gBAAA,uBAAfA,gBAAA,CAAiBJ,MAAM,KAAI;IACpC,CAAC;IAED,MAAMM,gBAAgB,GAAGzB,QAAQ,CAAC,MAAM;MAAA,IAAA0B,mBAAA;MACtC,OAAO,EAAAA,mBAAA,GAAAnB,KAAK,CAACoB,YAAY,cAAAD,mBAAA,uBAAlBA,mBAAA,CAAoBP,MAAM,KAAI;IACvC,CAAC;;IAED;IACA,MAAMS,cAAc,GAAG5B,QAAQ,CAAC,MAAM;MACpC,IAAIU,aAAa,CAACmB,KAAK,IAAI,EAAE,EAAE,OAAO,YAAW;MACjD,IAAInB,aAAa,CAACmB,KAAK,IAAI,EAAE,EAAE,OAAO,YAAW;MACjD,OAAO,WAAU;IACnB,CAAC;;IAED;IACA,SAASC,gBAAgBA,CAACC,KAAK,EAAE;MAC/B;MACA,OAAOA,KAAK,KAAK,CAAC,GAAG,SAAS,GAAG,SAAQ;IAC3C;;IAEA;IACA,SAASC,eAAeA,CAACD,KAAK,EAAE;MAC9B;MACA,OAAOA,KAAK,KAAK,CAAC,GAAG,sBAAsB,GAAG,8BAA6B;IAC7E;;IAEA;IACA,eAAeE,mBAAmBA,CAAA,EAAG;MAAA,IAAAC,cAAA;MACnC,IAAI,GAAAA,cAAA,GAAC3B,KAAK,CAAC4B,OAAO,cAAAD,cAAA,eAAbA,cAAA,CAAeE,EAAE,GAAE;MAExB3B,SAAS,CAACoB,KAAK,GAAG,IAAG;MAErB,IAAI;QACF,MAAMQ,GAAG,GAAG,MAAM/B,OAAO,CAACgC,GAAG,CAAC,iBAAiB/B,KAAK,CAAC4B,OAAO,CAACC,EAAE,gBAAgB;QAC/EG,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEH,GAAG,CAACI,IAAI;;QAE/B;QACA/B,aAAa,CAACmB,KAAK,GAAGQ,GAAG,CAACI,IAAI,CAACC,MAAM,IAAI;QACzC/B,iBAAiB,CAACkB,KAAK,GAAGQ,GAAG,CAACI,IAAI,CAACE,WAAW,IAAI,aAAY;;QAE9D;QACA,IAAIC,KAAK,CAACC,OAAO,CAACR,GAAG,CAACI,IAAI,CAACK,KAAK,CAAC,EAAE;UACjClC,YAAY,CAACiB,KAAK,GAAGQ,GAAG,CAACI,IAAI,CAACK,KAAI;QACpC,CAAC,MAAM;UACLlC,YAAY,CAACiB,KAAK,GAAG,EAAC;QACxB;MAEF,CAAC,CAAC,OAAOkB,GAAG,EAAE;QACZR,OAAO,CAACS,KAAK,CAAC,aAAa,EAAED,GAAG;QAChC;QACArC,aAAa,CAACmB,KAAK,GAAG;QACtBlB,iBAAiB,CAACkB,KAAK,GAAG,aAAY;QACtCjB,YAAY,CAACiB,KAAK,GAAG,EAAC;MACxB,CAAC,SAAS;QACRpB,SAAS,CAACoB,KAAK,GAAG,KAAI;MACxB;IACF;;IAEA;IACA,MAAMoB,gBAAgB,GAAGjD,QAAQ,CAAC,MAAM;MAAA,IAAAkD,aAAA,EAAAC,iBAAA,EAAAC,oBAAA;MACtC,MAAMC,UAAU,GAAG,EAAC;;MAEpB;MACA,CAAAH,aAAA,GAAA3C,KAAK,CAACQ,KAAK,cAAAmC,aAAA,uBAAXA,aAAA,CAAaI,OAAO,CAACrC,IAAI,IAAI;QAC3BoC,UAAU,CAACE,IAAI,CAAC;UACdnB,EAAE,EAAE,eAAenB,IAAI,CAACmB,EAAE,EAAE;UAC5BoB,IAAI,EAAE,GAAGvC,IAAI,CAACwC,YAAY,IAAI,MAAM,WAAWxC,IAAI,CAACyC,KAAK,GAAG;UAC5DC,IAAI,EAAE1C,IAAI,CAAC2C,UAAU;UACrBC,WAAW,EAAE,YAAY5C,IAAI,CAAC6C,QAAQ,IAAI,IAAI;QAChD,CAAC;QACD,IAAI7C,IAAI,CAACC,MAAM,KAAK,aAAa,IAAID,IAAI,CAAC8C,UAAU,EAAE;UACpDV,UAAU,CAACE,IAAI,CAAC;YACdnB,EAAE,EAAE,eAAenB,IAAI,CAACmB,EAAE,EAAE;YAC5BoB,IAAI,EAAE,GAAGvC,IAAI,CAAC+C,aAAa,IAAI,KAAK,YAAY/C,IAAI,CAACyC,KAAK,GAAG;YAC7DC,IAAI,EAAE1C,IAAI,CAAC8C,UAAU;YACrBF,WAAW,EAAE;UACf,CAAC;QACH;MACF,CAAC;;MAED;MACA,CAAAV,iBAAA,GAAA5C,KAAK,CAACiB,SAAS,cAAA2B,iBAAA,uBAAfA,iBAAA,CAAiBG,OAAO,CAACW,GAAG,IAAI;QAC9BZ,UAAU,CAACE,IAAI,CAAC;UACdnB,EAAE,EAAE,OAAO6B,GAAG,CAAC7B,EAAE,EAAE;UACnBoB,IAAI,EAAE,GAAGS,GAAG,CAACC,aAAa,IAAI,MAAM,WAAWD,GAAG,CAACE,IAAI,GAAG;UAC1DR,IAAI,EAAEM,GAAG,CAACG,WAAW;UACrBP,WAAW,EAAEI,GAAG,CAACI;QACnB,CAAC;MACH,CAAC;;MAED;MACA,CAAAjB,oBAAA,GAAA7C,KAAK,CAACoB,YAAY,cAAAyB,oBAAA,uBAAlBA,oBAAA,CAAoBE,OAAO,CAACgB,GAAG,IAAI;QACjCjB,UAAU,CAACE,IAAI,CAAC;UACdnB,EAAE,EAAE,OAAOkC,GAAG,CAAClC,EAAE,EAAE;UACnBoB,IAAI,EAAE,GAAGc,GAAG,CAACb,YAAY,IAAI,MAAM,WAAWa,GAAG,CAACH,IAAI,GAAG;UACzDR,IAAI,EAAEW,GAAG,CAACV,UAAU;UACpBC,WAAW,EAAE,SAASS,GAAG,CAACR,QAAQ,IAAI,IAAI;QAC5C,CAAC;MACH,CAAC;;MAED;MACA,OAAOT,UAAU,CAACkB,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK,IAAIC,IAAI,CAACD,CAAC,CAACd,IAAI,CAAC,GAAG,IAAIe,IAAI,CAACF,CAAC,CAACb,IAAI,CAAC,CAAC,CAACgB,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,EAAC;IACrF,CAAC;;IAED;IACA1E,SAAS,CAAC,MAAM;MACdgC,mBAAmB,CAAC;IACtB,CAAC;;IAED;IACA/B,KAAK,CAAC;MAAA,IAAA0E,eAAA;MAAA,QAAAA,eAAA,GAAMrE,KAAK,CAAC4B,OAAO,cAAAyC,eAAA,uBAAbA,eAAA,CAAexC,EAAE;IAAA,GAAGyC,KAAK,IAAK;MACxC,IAAIA,KAAK,EAAE;QACT5C,mBAAmB,CAAC;MACtB;IACF,CAAC;;IAED;IACA/B,KAAK,CAAC,CACJ,MAAMK,KAAK,CAACQ,KAAK,EACjB,MAAMR,KAAK,CAACiB,SAAS,EACrB,MAAMjB,KAAK,CAACoB,YAAW,CACxB,EAAE,MAAM;MACPM,mBAAmB,CAAC;IACtB,CAAC,EAAE;MAAE6C,IAAI,EAAE;IAAK,CAAC","ignoreList":[]}]}