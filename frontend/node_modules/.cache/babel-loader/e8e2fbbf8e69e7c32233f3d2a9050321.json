{"remainingRequest":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\layout\\Index.vue?vue&type=template&id=f7161396&scoped=true","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\layout\\Index.vue","mtime":1749472361221},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\babel.config.js","mtime":1748077811200},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1746431219000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1746431218000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVzb2x2ZUNvbXBvbmVudCBhcyBfcmVzb2x2ZUNvbXBvbmVudCwgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlLCByZXNvbHZlRHluYW1pY0NvbXBvbmVudCBhcyBfcmVzb2x2ZUR5bmFtaWNDb21wb25lbnQsIG9wZW5CbG9jayBhcyBfb3BlbkJsb2NrLCBjcmVhdGVCbG9jayBhcyBfY3JlYXRlQmxvY2ssIEtlZXBBbGl2ZSBhcyBfS2VlcEFsaXZlLCBUcmFuc2l0aW9uIGFzIF9UcmFuc2l0aW9uLCB3aXRoQ3R4IGFzIF93aXRoQ3R4LCBjcmVhdGVFbGVtZW50Vk5vZGUgYXMgX2NyZWF0ZUVsZW1lbnRWTm9kZSwgbm9ybWFsaXplU3R5bGUgYXMgX25vcm1hbGl6ZVN0eWxlLCBub3JtYWxpemVDbGFzcyBhcyBfbm9ybWFsaXplQ2xhc3MsIGNyZWF0ZUVsZW1lbnRCbG9jayBhcyBfY3JlYXRlRWxlbWVudEJsb2NrIH0gZnJvbSAidnVlIjsKY29uc3QgX2hvaXN0ZWRfMSA9IHsKICBjbGFzczogImFwcC1tYWluIgp9OwpleHBvcnQgZnVuY3Rpb24gcmVuZGVyKF9jdHgsIF9jYWNoZSwgJHByb3BzLCAkc2V0dXAsICRkYXRhLCAkb3B0aW9ucykgewogIGNvbnN0IF9jb21wb25lbnRfU2lkZWJhciA9IF9yZXNvbHZlQ29tcG9uZW50KCJTaWRlYmFyIik7CiAgY29uc3QgX2NvbXBvbmVudF9OYXZiYXIgPSBfcmVzb2x2ZUNvbXBvbmVudCgiTmF2YmFyIik7CiAgY29uc3QgX2NvbXBvbmVudF9yb3V0ZXJfdmlldyA9IF9yZXNvbHZlQ29tcG9uZW50KCJyb3V0ZXItdmlldyIpOwogIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soImRpdiIsIHsKICAgIGNsYXNzOiBfbm9ybWFsaXplQ2xhc3MoWyJhcHAtd3JhcHBlciIsIHsKICAgICAgJ21vYmlsZSc6ICRzZXR1cC5kZXZpY2UgPT09ICdtb2JpbGUnCiAgICB9XSkKICB9LCBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfU2lkZWJhciwgewogICAgY2xhc3M6ICJzaWRlYmFyLWNvbnRhaW5lciIKICB9KSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgewogICAgY2xhc3M6ICJtYWluLWNvbnRhaW5lciIsCiAgICBzdHlsZTogX25vcm1hbGl6ZVN0eWxlKCRzZXR1cC5tYWluQ29udGFpbmVyU3R5bGUpCiAgfSwgW19jcmVhdGVWTm9kZShfY29tcG9uZW50X05hdmJhciksIF9jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzEsIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9yb3V0ZXJfdmlldywgbnVsbCwgewogICAgZGVmYXVsdDogX3dpdGhDdHgoKHsKICAgICAgQ29tcG9uZW50CiAgICB9KSA9PiBbX2NyZWF0ZVZOb2RlKF9UcmFuc2l0aW9uLCB7CiAgICAgIG5hbWU6ICJmYWRlLXRyYW5zZm9ybSIsCiAgICAgIG1vZGU6ICJvdXQtaW4iLAogICAgICBvbkJlZm9yZUxlYXZlOiAkc2V0dXAuYmVmb3JlUm91dGVMZWF2ZQogICAgfSwgewogICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKF9LZWVwQWxpdmUsIHsKICAgICAgICBpbmNsdWRlOiAkc2V0dXAuY2FjaGVkUm91dGVzCiAgICAgIH0sIFsoX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soX3Jlc29sdmVEeW5hbWljQ29tcG9uZW50KENvbXBvbmVudCksIHsKICAgICAgICBrZXk6IF9jdHguJHJvdXRlLmZ1bGxQYXRoICsgJHNldHVwLnJlZnJlc2hLZXkKICAgICAgfSkpXSwgMTAzMiwgWyJpbmNsdWRlIl0pKV0pLAogICAgICBfOiAyCiAgICB9LCAxMDMyLCBbIm9uQmVmb3JlTGVhdmUiXSldKSwKICAgIF86IDEKICB9KV0pXSwgNCldLCAyKTsKfQ=="},{"version":3,"names":["class","_createElementBlock","_normalizeClass","$setup","device","_createVNode","_component_Sidebar","_createElementVNode","style","_normalizeStyle","mainContainerStyle","_component_Navbar","_hoisted_1","_component_router_view","Component","_Transition","name","mode","onBeforeLeave","beforeRouteLeave","_createBlock","_KeepAlive","include","cachedRoutes","_resolveDynamicComponent","key","_ctx","$route","fullPath","refreshKey"],"sources":["C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\layout\\Index.vue"],"sourcesContent":["<template>\n  <div class=\"app-wrapper\" :class=\"{ 'mobile': device === 'mobile' }\">\n    <!-- 侧边栏 -->\n    <Sidebar class=\"sidebar-container\" />\n    \n    <!-- 主要内容区域 -->\n    <div class=\"main-container\" :style=\"mainContainerStyle\">\n      <!-- 顶部导航栏 -->\n      <Navbar />\n      \n      <!-- 内容区域 -->\n      <div class=\"app-main\">\n        <router-view v-slot=\"{ Component }\">\n          <transition name=\"fade-transform\" mode=\"out-in\" @before-leave=\"beforeRouteLeave\">\n            <keep-alive :include=\"cachedRoutes\">\n              <component :is=\"Component\" :key=\"$route.fullPath + refreshKey\" />\n          </keep-alive>\n          </transition>\n        </router-view>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { computed, onMounted, onBeforeUnmount, watch, ref } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRoute } from 'vue-router'\nimport Sidebar from '@/components/layout/Sidebar.vue'\nimport Navbar from '@/components/layout/Navbar.vue'\n\nexport default {\n  name: 'Layout',\n  components: {\n    Sidebar,\n    Navbar\n  },\n  setup() {\n    const store = useStore()\n    const route = useRoute()\n    \n    // 设备类型\n    const device = computed(() => store.getters.device)\n    \n    // 侧边栏状态\n    const sidebarOpened = computed(() => store.getters.sidebar.opened)\n    \n    // 刷新页面时使用的key\n    const refreshKey = ref(0)\n    \n    // 需要缓存的路由，缓存小组件页面提高切换性能\n    const cachedRoutes = ref([\n      'Dashboard',\n      'Calendar',\n      'Chat',\n      'Contact',\n      'Company',\n      'Project',\n      'Profile',\n      'Knowledge'\n    ])\n    \n    // 动态计算主容器样式\n    const mainContainerStyle = computed(() => {\n      // 侧边栏展开宽度为160px，收起宽度为64px\n      const sidebarWidth = sidebarOpened.value ? '160px' : '64px'\n      return {\n        marginLeft: sidebarWidth,\n        width: `calc(100% - ${sidebarWidth})`\n      }\n    })\n    \n    // 路由离开前的清理工作\n    const beforeRouteLeave = () => {\n      // 清理可能存在的DOM副作用\n      cleanupDOMElements();\n    }\n    \n    // 清理DOM元素的集中处理函数\n    const cleanupDOMElements = () => {\n      try {\n        // 移除可能的事件拦截器和遮罩\n        document.querySelectorAll('.el-overlay, .el-popup-parent--hidden, .el-message, .el-message-box').forEach(el => {\n            if (el && el.parentNode) {\n              try {\n                el.parentNode.removeChild(el);\n              } catch (e) {\n                console.error('清理DOM元素失败:', e);\n              }\n            }\n          });\n          \n          // 恢复body样式\n          if (document && document.body && document.body.style) {\n          document.body.style.overflow = '';\n          document.body.classList.remove('el-popup-parent--hidden');\n          }\n          \n          // 确保导航菜单可点击\n          document.querySelectorAll('.el-menu-item, .el-submenu').forEach(el => {\n            if (el && el.style) {\n            el.style.pointerEvents = 'auto';\n            }\n          });\n        \n        // 如果当前是智能文档页面，额外清理相关资源\n        if (route.path === '/smartdoc' || route.path.startsWith('/smartdoc/')) {\n          document.querySelectorAll('.ql-container, .ql-toolbar, .ql-editor').forEach(el => {\n            if (el && el.parentNode) {\n              el.parentNode.removeChild(el);\n            }\n          });\n        }\n      } catch (error) {\n        console.error('清理DOM资源失败:', error);\n      }\n    }\n    \n    // 监视路由变化，刷新页面时更新key值\n    watch(() => route.fullPath, (newPath, oldPath) => {\n      if (newPath === oldPath && oldPath !== undefined) {\n        // 相同路径刷新页面时，更新key值触发组件重新渲染\n        refreshKey.value = Date.now();\n      }\n    });\n    \n    // 响应式布局 - 窗口尺寸变化监听\n    const handleResize = () => {\n      if (document && document.body) {\n        if (document.body.clientWidth < 992) {\n          store.dispatch('setDevice', 'mobile')\n          store.dispatch('toggleSidebar', false)\n        } else {\n          store.dispatch('setDevice', 'desktop')\n        }\n      }\n    }\n    \n    onMounted(() => {\n      handleResize()\n      window.addEventListener('resize', handleResize)\n    })\n    \n    onBeforeUnmount(() => {\n      window.removeEventListener('resize', handleResize)\n    })\n    \n    return {\n      device,\n      mainContainerStyle,\n      cachedRoutes,\n      refreshKey,\n      beforeRouteLeave\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.app-wrapper {\n  position: relative;\n  height: 100%;\n  width: 100%;\n  display: flex;\n  background-color: var(--bg-color);\n  color: var(--text-color);\n}\n\n.sidebar-container {\n  transition: width 0.28s;\n  height: 100%;\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 1001;\n}\n\n.main-container {\n  min-height: 100%;\n  transition: margin-left 0.28s;\n  position: relative;\n  padding-top: 60px; /* 为固定导航栏腾出空间 */\n  overflow: auto; /* 允许主内容区出现滚动条 */\n  display: flex;\n  flex-direction: column;\n  background-color: var(--bg-color);\n  color: var(--text-color);\n}\n\n.app-main {\n  flex: 1;\n  width: 100%;\n  position: relative;\n  overflow: auto;\n  padding: 0;\n  height: 100%;\n  background-color: var(--bg-color);\n}\n\n/* 增强过渡动画效果 */\n.fade-transform-enter-active,\n.fade-transform-leave-active {\n  transition: all 0.3s;\n}\n\n.fade-transform-enter-from {\n  opacity: 0;\n  transform: translateX(30px);\n}\n\n.fade-transform-leave-to {\n  opacity: 0;\n  transform: translateX(-30px);\n}\n\n/* 备用过渡动画，确保动画效果一定生效 */\n.v-enter-active,\n.v-leave-active {\n  transition: opacity 0.3s ease;\n}\n\n.v-enter-from,\n.v-leave-to {\n  opacity: 0;\n}\n\n.app-wrapper.mobile .sidebar-container {\n  transition: transform .28s;\n  width: 180px !important;\n}\n\n.app-wrapper.mobile .main-container {\n  margin-left: 0 !important;\n  width: 100% !important;\n}\n\n.app-wrapper.mobile .sidebar-container.is-collapsed {\n  transform: translateX(-200px);\n}\n</style> "],"mappings":";;EAWWA,KAAK,EAAC;AAAU;;;;;uBAVzBC,mBAAA,CAoBM;IApBDD,KAAK,EAAAE,eAAA,EAAC,aAAa;MAAA,UAAqBC,MAAA,CAAAC,MAAM;IAAA;MAEjDC,YAAA,CAAqCC,kBAAA;IAA5BN,KAAK,EAAC;EAAmB,IAGlCO,mBAAA,CAcM;IAdDP,KAAK,EAAC,gBAAgB;IAAEQ,KAAK,EAAAC,eAAA,CAAEN,MAAA,CAAAO,kBAAkB;MAEpDL,YAAA,CAAUM,iBAAA,GAGVJ,mBAAA,CAQM,OARNK,UAQM,GAPJP,YAAA,CAMcQ,sBAAA;sBALZ,CAIa;MALQC;IAAS,OAC9BT,YAAA,CAIaU,WAAA;MAJDC,IAAI,EAAC,gBAAgB;MAACC,IAAI,EAAC,QAAQ;MAAEC,aAAY,EAAEf,MAAA,CAAAgB;;wBAC7D,MAEW,E,cAFXC,YAAA,CAEWC,UAAA;QAFEC,OAAO,EAAEnB,MAAA,CAAAoB;MAAY,K,cAChCH,YAAA,CAAiEI,wBAAA,CAAjDV,SAAS;QAAGW,GAAG,EAAEC,IAAA,CAAAC,MAAM,CAACC,QAAQ,GAAGzB,MAAA,CAAA0B","ignoreList":[]}]}