{"remainingRequest":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\smartdoc\\Index.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\smartdoc\\Index.vue","mtime":1748852702734},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\babel.config.js","mtime":1748077811200},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1746431218000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmZvci1lYWNoLmpzIjsKaW1wb3J0IHsgcmVmLCBjb21wdXRlZCwgb25Nb3VudGVkLCBuZXh0VGljaywgZ2V0Q3VycmVudEluc3RhbmNlLCBwcm92aWRlLCBvbkFjdGl2YXRlZCwgd2F0Y2ggfSBmcm9tICd2dWUnOwppbXBvcnQgeyB1c2VSb3V0ZXIsIHVzZVJvdXRlIH0gZnJvbSAndnVlLXJvdXRlcic7CmltcG9ydCB7IEVsTWVzc2FnZSwgRWxNZXNzYWdlQm94IH0gZnJvbSAnZWxlbWVudC1wbHVzJzsKaW1wb3J0IHsgU2VhcmNoLCBQbHVzLCBFZGl0UGVuLCBTaGFyZSwgRm9sZGVyLCBDbG9zZSwgTW9yZSwgRG9jdW1lbnQgfSBmcm9tICdAZWxlbWVudC1wbHVzL2ljb25zLXZ1ZSc7CmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7CmltcG9ydCB7IGdldERvY3VtZW50cywgZ2V0UmVjZW50RG9jdW1lbnRzLCBnZXRTaGFyZWREb2N1bWVudHMsIGdldERvY3VtZW50Q2F0ZWdvcmllcywgY3JlYXRlRG9jdW1lbnQsIGRlbGV0ZURvY3VtZW50IGFzIGFwaURlbGV0ZURvY3VtZW50LCBzaGFyZURvY3VtZW50IGFzIGFwaVNoYXJlRG9jdW1lbnQsIGNyZWF0ZURvY3VtZW50Q2F0ZWdvcnksIHVwZGF0ZURvY3VtZW50Q2F0ZWdvcnksIGRlbGV0ZURvY3VtZW50Q2F0ZWdvcnksIGFpR2VuZXJhdGVEb2N1bWVudCB9IGZyb20gJ0AvYXBpL3NtYXJ0ZG9jJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdTbWFydERvY0hvbWUnLAogIGNvbXBvbmVudHM6IHsKICAgIFNlYXJjaCwKICAgIFBsdXMsCiAgICBFZGl0UGVuLAogICAgU2hhcmUsCiAgICBGb2xkZXIsCiAgICBDbG9zZSwKICAgIE1vcmUsCiAgICBEb2N1bWVudAogIH0sCiAgc2V0dXAoKSB7CiAgICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTsKICAgIGNvbnN0IHJvdXRlID0gdXNlUm91dGUoKTsKICAgIGNvbnN0IHsKICAgICAgcHJveHkKICAgIH0gPSBnZXRDdXJyZW50SW5zdGFuY2UoKTsgLy8g6I635Y+W57uE5Lu25a6e5L6LCgogICAgLy8g5Yi35paw6Kem5Y+R5Zmo77yM55So5LqO5by65Yi257uE5Lu25Yi35pawCiAgICBjb25zdCByZWZyZXNoVHJpZ2dlciA9IHJlZihEYXRlLm5vdygpKTsKCiAgICAvLyDnirbmgIHmlbDmja4KICAgIGNvbnN0IGRvY3VtZW50cyA9IHJlZihbXSk7CiAgICBjb25zdCByZWNlbnREb2N1bWVudHMgPSByZWYoW10pOwogICAgY29uc3Qgc2hhcmVkRG9jdW1lbnRzID0gcmVmKFtdKTsKICAgIGNvbnN0IGRvY3VtZW50Q2F0ZWdvcmllcyA9IHJlZihbXSk7CiAgICBjb25zdCBzZWFyY2hRdWVyeSA9IHJlZignJyk7CiAgICBjb25zdCBzZWFyY2hDYXRlZ29yeSA9IHJlZignYWxsJyk7CiAgICBjb25zdCBuZXdEb2N1bWVudERpYWxvZ1Zpc2libGUgPSByZWYoZmFsc2UpOwogICAgY29uc3Qgc2hhcmVEaWFsb2dWaXNpYmxlID0gcmVmKGZhbHNlKTsKICAgIGNvbnN0IGRlbGV0ZURpYWxvZ1Zpc2libGUgPSByZWYoZmFsc2UpOwogICAgY29uc3QgZG9jdW1lbnRDcmVhdGVUeXBlID0gcmVmKCdibGFuaycpOwogICAgY29uc3Qgc2VsZWN0ZWREb2N1bWVudCA9IHJlZihudWxsKTsKICAgIGNvbnN0IHNlbGVjdGVkVXNlcnMgPSByZWYoW10pOwogICAgY29uc3QgYXZhaWxhYmxlVXNlcnMgPSByZWYoW10pOwogICAgY29uc3QgY3JlYXRlTG9hZGluZyA9IHJlZihmYWxzZSk7CiAgICBjb25zdCBzaGFyZUxvYWRpbmcgPSByZWYoZmFsc2UpOwogICAgY29uc3QgZGVsZXRlTG9hZGluZyA9IHJlZihmYWxzZSk7CgogICAgLy8g5paw5aKe5YiG6aG155u45YWz54q25oCBCiAgICBjb25zdCBwYWdlID0gcmVmKDEpOwogICAgY29uc3QgcGFnZVNpemUgPSAxMDsKICAgIGNvbnN0IGhhc01vcmUgPSByZWYodHJ1ZSk7CiAgICBjb25zdCB0b3RhbENvdW50ID0gcmVmKDApOwoKICAgIC8vIOihqOWNleaVsOaNrgogICAgY29uc3QgbmV3RG9jdW1lbnRGb3JtID0gcmVmKHsKICAgICAgdGl0bGU6ICcnLAogICAgICB0eXBlOiAnJwogICAgfSk7CiAgICBjb25zdCBhaURvY3VtZW50Rm9ybSA9IHJlZih7CiAgICAgIHRpdGxlOiAnJywKICAgICAgcmVxdWlyZW1lbnRzOiAnJwogICAgfSk7CgogICAgLy8g6KGo5Y2V5qCh6aqM6KeE5YiZCiAgICBjb25zdCBibGFua0Zvcm1SdWxlcyA9IHsKICAgICAgdGl0bGU6IFt7CiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeaWh+aho+agh+mimCcsCiAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgIH0sIHsKICAgICAgICBtaW46IDIsCiAgICAgICAgbWF4OiA1MCwKICAgICAgICBtZXNzYWdlOiAn6ZW/5bqm5ZyoIDIg5YiwIDUwIOS4quWtl+espicsCiAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgIH1dCiAgICB9OwogICAgY29uc3QgYWlGb3JtUnVsZXMgPSB7CiAgICAgIHRpdGxlOiBbewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXmlofmoaPkuLvpopgnLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9LCB7CiAgICAgICAgbWluOiAyLAogICAgICAgIG1heDogNTAsCiAgICAgICAgbWVzc2FnZTogJ+mVv+W6puWcqCAyIOWIsCA1MCDkuKrlrZfnrKYnLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9XSwKICAgICAgcmVxdWlyZW1lbnRzOiBbewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXmlofmoaPopoHmsYInLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9LCB7CiAgICAgICAgbWluOiAxMCwKICAgICAgICBtYXg6IDUwMCwKICAgICAgICBtZXNzYWdlOiAn6ZW/5bqm5ZyoIDEwIOWIsCA1MDAg5Liq5a2X56ymJywKICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgfV0KICAgIH07CiAgICBjb25zdCBibGFua0Zvcm1SZWYgPSByZWYobnVsbCk7CiAgICBjb25zdCBhaUZvcm1SZWYgPSByZWYobnVsbCk7CgogICAgLy8g6K6h566X5bGe5oCnCiAgICBjb25zdCB0b3RhbERvY3VtZW50cyA9IGNvbXB1dGVkKCgpID0+IGRvY3VtZW50cy52YWx1ZS5sZW5ndGgpOwogICAgY29uc3QgcmVjZW50RWRpdENvdW50ID0gY29tcHV0ZWQoKCkgPT4gcmVjZW50RG9jdW1lbnRzLnZhbHVlLmxlbmd0aCk7CgogICAgLy8g5YiG57G7566h55CG55u45YWz54q25oCBCiAgICBjb25zdCBjYXRlZ29yeURpYWxvZ1Zpc2libGUgPSByZWYoZmFsc2UpOwogICAgY29uc3QgZWRpdGluZ0NhdGVnb3J5ID0gcmVmKHsKICAgICAgbmFtZTogJycsCiAgICAgIGNvbG9yOiAnIzQwOUVGRicsCiAgICAgIGRlc2NyaXB0aW9uOiAnJwogICAgfSk7CiAgICBjb25zdCBjYXRlZ29yeUZvcm1SZWYgPSByZWYobnVsbCk7CiAgICBjb25zdCBjYXRlZ29yeUxvYWRpbmcgPSByZWYoZmFsc2UpOwogICAgY29uc3QgY2F0ZWdvcnlGb3JtUnVsZXMgPSB7CiAgICAgIG5hbWU6IFt7CiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeexu+Wei+WQjeensCcsCiAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgIH0sIHsKICAgICAgICBtaW46IDIsCiAgICAgICAgbWF4OiAyMCwKICAgICAgICBtZXNzYWdlOiAn6ZW/5bqm5ZyoMuWIsDIw5Liq5a2X56ymJywKICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgfV0sCiAgICAgIGNvbG9yOiBbewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIG1lc3NhZ2U6ICfor7fpgInmi6npopzoibInLAogICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgIH1dCiAgICB9OwoKICAgIC8vIOi+heWKqeaWueazle+8muW8uuWItuWIt+aWsOinhuWbvgogICAgY29uc3QgZm9yY2VVcGRhdGUgPSBhc3luYyAoKSA9PiB7CiAgICAgIC8vIOWIm+W7uuS4tOaXtuaVsOaNru+8jOinpuWPkea3seW6puWTjeW6lOW8j+abtOaWsAogICAgICBkb2N1bWVudHMudmFsdWUgPSBbLi4uZG9jdW1lbnRzLnZhbHVlXTsKICAgICAgcmVjZW50RG9jdW1lbnRzLnZhbHVlID0gWy4uLnJlY2VudERvY3VtZW50cy52YWx1ZV07CiAgICAgIHNoYXJlZERvY3VtZW50cy52YWx1ZSA9IFsuLi5zaGFyZWREb2N1bWVudHMudmFsdWVdOwoKICAgICAgLy8g5L2/55SoVnVl5a6e5L6L55qEJGZvcmNlVXBkYXRl5pa55rOVCiAgICAgIGlmIChwcm94eSAmJiBwcm94eS4kZm9yY2VVcGRhdGUpIHsKICAgICAgICBwcm94eS4kZm9yY2VVcGRhdGUoKTsKICAgICAgfQoKICAgICAgLy8g562J5b6FRE9N5pu05pawCiAgICAgIGF3YWl0IG5leHRUaWNrKCk7CiAgICB9OwoKICAgIC8vIOaWueazlQogICAgY29uc3QgZmV0Y2hEb2N1bWVudHMgPSBhc3luYyAoZm9yY2VSZWZyZXNoID0gZmFsc2UsIGFwcGVuZCA9IGZhbHNlKSA9PiB7CiAgICAgIGlmIChmb3JjZVJlZnJlc2gpIHsKICAgICAgICBwYWdlLnZhbHVlID0gMTsKICAgICAgICBoYXNNb3JlLnZhbHVlID0gdHJ1ZTsKICAgICAgfQogICAgICBpZiAoIWhhc01vcmUudmFsdWUgJiYgIWZvcmNlUmVmcmVzaCkgcmV0dXJuOwogICAgICBjcmVhdGVMb2FkaW5nLnZhbHVlID0gdHJ1ZTsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBwYXJhbXMgPSB7CiAgICAgICAgICBwYWdlOiBwYWdlLnZhbHVlLAogICAgICAgICAgbGltaXQ6IHBhZ2VTaXplCiAgICAgICAgfTsKICAgICAgICBpZiAoc2VhcmNoQ2F0ZWdvcnkudmFsdWUgJiYgc2VhcmNoQ2F0ZWdvcnkudmFsdWUgIT09ICdhbGwnKSB7CiAgICAgICAgICBwYXJhbXMuY2F0ZWdvcnkgPSBzZWFyY2hDYXRlZ29yeS52YWx1ZTsKICAgICAgICB9CiAgICAgICAgaWYgKHNlYXJjaFF1ZXJ5LnZhbHVlKSB7CiAgICAgICAgICBwYXJhbXMuc2VhcmNoID0gc2VhcmNoUXVlcnkudmFsdWU7CiAgICAgICAgfQogICAgICAgIGlmIChmb3JjZVJlZnJlc2gpIHsKICAgICAgICAgIHBhcmFtcy5fdCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICAgIH0KICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBnZXREb2N1bWVudHMocGFyYW1zKTsKICAgICAgICBpZiAocmVzICYmIHJlcy5kYXRhKSB7CiAgICAgICAgICAvLyDlhbzlrrnliIbpobXlkozpnZ7liIbpobXmoLzlvI8KICAgICAgICAgIGxldCBsaXN0ID0gQXJyYXkuaXNBcnJheShyZXMuZGF0YSkgPyByZXMuZGF0YSA6IHJlcy5kYXRhLnJlc3VsdHMgfHwgcmVzLmRhdGE7CiAgICAgICAgICBsZXQgdG90YWwgPSByZXMuZGF0YS50b3RhbCB8fCByZXMuZGF0YS5jb3VudCB8fCBsaXN0Lmxlbmd0aDsKICAgICAgICAgIGlmIChhcHBlbmQpIHsKICAgICAgICAgICAgZG9jdW1lbnRzLnZhbHVlID0gWy4uLmRvY3VtZW50cy52YWx1ZSwgLi4ubGlzdF07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkb2N1bWVudHMudmFsdWUgPSBbLi4ubGlzdF07CiAgICAgICAgICB9CiAgICAgICAgICB0b3RhbENvdW50LnZhbHVlID0gdG90YWw7CiAgICAgICAgICAvLyDliKTmlq3mmK/lkKbov5jmnInmm7TlpJoKICAgICAgICAgIGlmIChkb2N1bWVudHMudmFsdWUubGVuZ3RoID49IHRvdGFsKSB7CiAgICAgICAgICAgIGhhc01vcmUudmFsdWUgPSBmYWxzZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGhhc01vcmUudmFsdWUgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBkb2N1bWVudHMudmFsdWUgPSBbXTsKICAgICAgICAgIGhhc01vcmUudmFsdWUgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgZG9jdW1lbnRzLnZhbHVlID0gW107CiAgICAgICAgaGFzTW9yZS52YWx1ZSA9IGZhbHNlOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIGNyZWF0ZUxvYWRpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IGZldGNoUmVjZW50RG9jdW1lbnRzID0gYXN5bmMgKGZvcmNlUmVmcmVzaCA9IGZhbHNlKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKCflvIDlp4vojrflj5bmnIDov5HmlofmoaMuLi4nKTsKICAgICAgdHJ5IHsKICAgICAgICAvLyDlh4blpIflj4LmlbDvvIzlpoLmnpzlvLrliLbliLfmlrDmt7vliqDml7bpl7TmiLMKICAgICAgICBjb25zdCBwYXJhbXMgPSBmb3JjZVJlZnJlc2ggPyB7CiAgICAgICAgICBfdDogbmV3IERhdGUoKS5nZXRUaW1lKCkKICAgICAgICB9IDoge307CiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZ2V0UmVjZW50RG9jdW1lbnRzKHBhcmFtcyk7CiAgICAgICAgY29uc29sZS5sb2coJ+acgOi/keaWh+aho0FQSeWTjeW6lDonLCByZXMpOwogICAgICAgIGlmIChyZXMgJiYgcmVzLmRhdGEpIHsKICAgICAgICAgIC8vIOWujOWFqOabv+aNouaVsOe7hOiAjOS4jeaYr+S/ruaUueW8leeUqAogICAgICAgICAgcmVjZW50RG9jdW1lbnRzLnZhbHVlID0gQXJyYXkuaXNBcnJheShyZXMuZGF0YSkgPyBbLi4ucmVzLmRhdGFdIDogW107CiAgICAgICAgICBjb25zb2xlLmxvZyhg6K6+572u5pyA6L+R5paH5qGjOiAke3JlY2VudERvY3VtZW50cy52YWx1ZS5sZW5ndGh95p2h6K6w5b2VYCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUud2FybignQVBJ6L+U5Zue55qE5pyA6L+R5paH5qGj5pWw5o2u5peg5pWIOicsIHJlcyk7CiAgICAgICAgICByZWNlbnREb2N1bWVudHMudmFsdWUgPSBbXTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign6I635Y+W5pyA6L+R5paH5qGj5aSx6LSlOicsIGVycm9yKTsKICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+iOt+WPluacgOi/keaWh+aho+Wksei0pScpOwogICAgICAgIHJlY2VudERvY3VtZW50cy52YWx1ZSA9IFtdOwogICAgICB9CiAgICB9OwogICAgY29uc3QgZmV0Y2hTaGFyZWREb2N1bWVudHMgPSBhc3luYyAoKSA9PiB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZXRTaGFyZWREb2N1bWVudHMoKTsKICAgICAgICBzaGFyZWREb2N1bWVudHMudmFsdWUgPSByZXNwb25zZS5kYXRhOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+iOt+WPluWFseS6q+aWh+aho+Wksei0pScsIGVycm9yKTsKICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+iOt+WPluWFseS6q+aWh+aho+Wksei0pScpOwogICAgICB9CiAgICB9OwogICAgY29uc3QgZmV0Y2hEb2N1bWVudENhdGVnb3JpZXMgPSBhc3luYyAocmV0cnlDb3VudCA9IDApID0+IHsKICAgICAgY29uc29sZS5sb2coJ+W8gOWni+iOt+WPluaWh+aho+WIhuexuy4uLicpOwogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGdldERvY3VtZW50Q2F0ZWdvcmllcygpOwogICAgICAgIGNvbnNvbGUubG9nKCfmlofmoaPliIbnsbtBUEnlk43lupQ6JywgcmVzKTsKICAgICAgICBpZiAocmVzICYmIHJlcy5kYXRhKSB7CiAgICAgICAgICBkb2N1bWVudENhdGVnb3JpZXMudmFsdWUgPSByZXMuZGF0YTsKICAgICAgICAgIGNvbnNvbGUubG9nKGDorr7nva7mlofmoaPliIbnsbs6ICR7ZG9jdW1lbnRDYXRlZ29yaWVzLnZhbHVlLmxlbmd0aH3mnaHorrDlvZUsIOaVsOaNrjpgLCBkb2N1bWVudENhdGVnb3JpZXMudmFsdWUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLndhcm4oJ0FQSei/lOWbnueahOaWh+aho+WIhuexu+aVsOaNruaXoOaViDonLCByZXMpOwogICAgICAgICAgZG9jdW1lbnRDYXRlZ29yaWVzLnZhbHVlID0gW107CgogICAgICAgICAgLy8g5aaC5p6c6L+U5Zue56m65pWw5o2u5LiU5pyq6L6+5Yiw5pyA5aSn6YeN6K+V5qyh5pWw77yM5bCd6K+V6YeN6K+VCiAgICAgICAgICBpZiAoZG9jdW1lbnRDYXRlZ29yaWVzLnZhbHVlLmxlbmd0aCA9PT0gMCAmJiByZXRyeUNvdW50IDwgMikgewogICAgICAgICAgICBjb25zb2xlLmxvZyhg5paH5qGj5YiG57G75pWw5o2u5Li656m677yMJHtyZXRyeUNvdW50ICsgMX3np5LlkI7ph43or5UuLi5gKTsKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBmZXRjaERvY3VtZW50Q2F0ZWdvcmllcyhyZXRyeUNvdW50ICsgMSksIChyZXRyeUNvdW50ICsgMSkgKiAxMDAwKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign6I635Y+W5paH5qGj5YiG57G75aSx6LSlOicsIGVycm9yKTsKCiAgICAgICAgLy8g5aaC5p6c5piv5pyN5Yqh5Zmo6ZSZ6K+v5LiU5pyq6L6+5Yiw5pyA5aSn6YeN6K+V5qyh5pWw77yM5bCd6K+V6YeN6K+VCiAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlICYmIGVycm9yLnJlc3BvbnNlLnN0YXR1cyA+PSA1MDAgJiYgcmV0cnlDb3VudCA8IDIpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGDmnI3liqHlmajplJnor6/vvIwke3JldHJ5Q291bnQgKyAxfeenkuWQjumHjeivlS4uLmApOwogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBmZXRjaERvY3VtZW50Q2F0ZWdvcmllcyhyZXRyeUNvdW50ICsgMSksIChyZXRyeUNvdW50ICsgMSkgKiAxMDAwKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfojrflj5bmlofmoaPliIbnsbvlpLHotKXvvIzor7fliLfmlrDpobXpnaLph43or5UnKTsKICAgICAgICAgIC8vIOWIneWni+WMluepuuaVsOe7hAogICAgICAgICAgZG9jdW1lbnRDYXRlZ29yaWVzLnZhbHVlID0gW107CiAgICAgICAgfQogICAgICB9CiAgICB9OwoKICAgIC8vIOmYsuaKluaQnOe0ogogICAgY29uc3QgZGVib3VuY2VkU2VhcmNoID0gXy5kZWJvdW5jZShhc3luYyAoKSA9PiB7CiAgICAgIHBhZ2UudmFsdWUgPSAxOwogICAgICBoYXNNb3JlLnZhbHVlID0gdHJ1ZTsKICAgICAgYXdhaXQgZmV0Y2hEb2N1bWVudHModHJ1ZSk7CiAgICB9LCA1MDApOwogICAgY29uc3QgY3JlYXRlTmV3RG9jdW1lbnQgPSAoKSA9PiB7CiAgICAgIC8vIOmHjee9ruihqOWNlQogICAgICBuZXdEb2N1bWVudEZvcm0udmFsdWUgPSB7CiAgICAgICAgdGl0bGU6ICcnLAogICAgICAgIHR5cGU6ICcnCiAgICAgIH07CiAgICAgIGFpRG9jdW1lbnRGb3JtLnZhbHVlID0gewogICAgICAgIHRpdGxlOiAnJywKICAgICAgICByZXF1aXJlbWVudHM6ICcnCiAgICAgIH07CiAgICAgIGRvY3VtZW50Q3JlYXRlVHlwZS52YWx1ZSA9ICdibGFuayc7CiAgICAgIG5ld0RvY3VtZW50RGlhbG9nVmlzaWJsZS52YWx1ZSA9IHRydWU7CgogICAgICAvLyDnm5HlkKzlr7nor53moYblhbPpl63kuovku7bvvIzmuIXnkIbooajljZUKICAgICAgbmV4dFRpY2soKCkgPT4gewogICAgICAgIHRyeSB7CiAgICAgICAgICBjb25zdCBkaWFsb2cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWwtZGlhbG9nJyk7CiAgICAgICAgICBpZiAoZGlhbG9nKSB7CiAgICAgICAgICAgIGRpYWxvZy5hZGRFdmVudExpc3RlbmVyKCdjbG9zZWQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGlmIChibGFua0Zvcm1SZWYudmFsdWUpIHsKICAgICAgICAgICAgICAgICAgYmxhbmtGb3JtUmVmLnZhbHVlLmNsZWFyVmFsaWRhdGUoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChhaUZvcm1SZWYudmFsdWUpIHsKICAgICAgICAgICAgICAgICAgYWlGb3JtUmVmLnZhbHVlLmNsZWFyVmFsaWRhdGUoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNsZWFyaW5nIGZvcm0gdmFsaWRhdGlvbjonLCBlcnIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgIG9uY2U6IHRydWUKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZXR0aW5nIHVwIGRpYWxvZyBldmVudCBsaXN0ZW5lcjonLCBlcnIpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9OwogICAgY29uc3Qgc3VibWl0TmV3RG9jdW1lbnQgPSBhc3luYyAoKSA9PiB7CiAgICAgIGlmIChkb2N1bWVudENyZWF0ZVR5cGUudmFsdWUgPT09ICdibGFuaycpIHsKICAgICAgICBpZiAoIWJsYW5rRm9ybVJlZi52YWx1ZSkgewogICAgICAgICAgY29uc29sZS53YXJuKCfooajljZXlvJXnlKjkuI3lrZjlnKgnKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGNvbnN0IHZhbGlkID0gYXdhaXQgYmxhbmtGb3JtUmVmLnZhbHVlLnZhbGlkYXRlKCkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcign6KGo5Y2V6aqM6K+B5aSx6LSlOicsIGVycik7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0pOwogICAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICAgIGNyZWF0ZUxvYWRpbmcudmFsdWUgPSB0cnVlOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCflvIDlp4vliJvlu7rmlofmoaM6JywgewogICAgICAgICAgICAgICAgdGl0bGU6IG5ld0RvY3VtZW50Rm9ybS52YWx1ZS50aXRsZSwKICAgICAgICAgICAgICAgIHR5cGU6IG5ld0RvY3VtZW50Rm9ybS52YWx1ZS50eXBlIHx8ICfpgJrnlKgnCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjcmVhdGVEb2N1bWVudCh7CiAgICAgICAgICAgICAgICB0aXRsZTogbmV3RG9jdW1lbnRGb3JtLnZhbHVlLnRpdGxlLAogICAgICAgICAgICAgICAgdHlwZTogbmV3RG9jdW1lbnRGb3JtLnZhbHVlLnR5cGUgfHwgJ+mAmueUqCcsCiAgICAgICAgICAgICAgICBjb250ZW50OiAnJwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfliJvlu7rmlofmoaPlk43lupTmlbDmja7vvJonLCBKU09OLnN0cmluZ2lmeShyZXNwb25zZSkpOwoKICAgICAgICAgICAgICAvLyDlhbPpl63lr7nor53moYYKICAgICAgICAgICAgICBuZXdEb2N1bWVudERpYWxvZ1Zpc2libGUudmFsdWUgPSBmYWxzZTsKICAgICAgICAgICAgICBFbE1lc3NhZ2Uuc3VjY2Vzcygn5paH5qGj5Yib5bu65oiQ5YqfJyk7CgogICAgICAgICAgICAgIC8vIOino+aekOi/lOWbnueahOaWh+aho0lECiAgICAgICAgICAgICAgbGV0IGRvY0lkID0gbnVsbDsKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuZGF0YSkgewogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuaWQpIHsKICAgICAgICAgICAgICAgICAgZG9jSWQgPSByZXNwb25zZS5kYXRhLmlkOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHJlc3BvbnNlLmRhdGEpICYmIHJlc3BvbnNlLmRhdGEubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICBkb2NJZCA9IHJlc3BvbnNlLmRhdGFbMF0uaWQ7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEucmVzdWx0cyAmJiBBcnJheS5pc0FycmF5KHJlc3BvbnNlLmRhdGEucmVzdWx0cykgJiYgcmVzcG9uc2UuZGF0YS5yZXN1bHRzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgZG9jSWQgPSByZXNwb25zZS5kYXRhLnJlc3VsdHNbMF0uaWQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAvLyDnrYnlvoXlr7nor53moYblhbPpl63lrozmiJDlkI7lho3miafooYzot7PovazvvIzpgb/lhY1ET03plJnor68KICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgIGlmIChkb2NJZCkgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg5YeG5aSH6Lez6L2s5Yiw5paH5qGj6K+m5oOF6aG177yMSUQ6ICR7ZG9jSWR9YCk7CgogICAgICAgICAgICAgICAgICAvLyDlhYjliLfmlrDmlofmoaPliJfooajvvIznoa7kv53mlbDmja7mmK/mnIDmlrDnmoQKICAgICAgICAgICAgICAgICAgZmV0Y2hEb2N1bWVudHMoKTsKICAgICAgICAgICAgICAgICAgZmV0Y2hSZWNlbnREb2N1bWVudHMoKTsKCiAgICAgICAgICAgICAgICAgIC8vIOeEtuWQjuWGjeaJp+ihjOWvvOiIqgogICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnU21hcnREb2NEZXRhaWwnLAogICAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkb2NJZAogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgY3JlYXRlTG9hZGluZy52YWx1ZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCfot6/nlLHlr7zoiKrlpLHotKU6JywgZXJyKTsKICAgICAgICAgICAgICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcign6Lez6L2s5paH5qGj6K+m5oOF6aG15aSx6LSl77yM6K+35omL5Yqo5Yi35paw6aG16Z2iJyk7CiAgICAgICAgICAgICAgICAgICAgICAvLyDlsJ3or5Xot6/lvoTot7PovawKICAgICAgICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKGAvc21hcnRkb2MvJHtkb2NJZH1gKS5jYXRjaChuYXZFcnIgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCfot6/lvoTlr7zoiKrkuZ/lpLHotKU6JywgbmF2RXJyKTsKICAgICAgICAgICAgICAgICAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfot6/lvoTot7Povazor6bmg4XpobXkuZ/lpLHotKUnKTsKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgY3JlYXRlTG9hZGluZy52YWx1ZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCfliJvlu7rmlofmoaPmiJDlip/vvIzkvYbov5Tlm57nmoTmlbDmja7moLzlvI/kuI3mraPnoa4nLCByZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgIC8vIOWIt+aWsOaWh+aho+WIl+ihqAogICAgICAgICAgICAgICAgICBmZXRjaERvY3VtZW50cygpOwogICAgICAgICAgICAgICAgICBmZXRjaFJlY2VudERvY3VtZW50cygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sIDEwMCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcign5Yib5bu65paH5qGj5aSx6LSlJywgZXJyb3IpOwogICAgICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcign5Yib5bu65paH5qGj5aSx6LSlJyk7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgY3JlYXRlTG9hZGluZy52YWx1ZSA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+aPkOS6pOihqOWNleaXtuWPkeeUn+mUmeivrzonLCBlcnJvcik7CiAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+ihqOWNleaPkOS6pOWksei0pScpOwogICAgICAgICAgY3JlYXRlTG9hZGluZy52YWx1ZSA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChkb2N1bWVudENyZWF0ZVR5cGUudmFsdWUgPT09ICdhaScpIHsKICAgICAgICBpZiAoIWFpRm9ybVJlZi52YWx1ZSkgewogICAgICAgICAgY29uc29sZS53YXJuKCdBSeihqOWNleW8leeUqOS4jeWtmOWcqCcpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgY29uc3QgdmFsaWQgPSBhd2FpdCBhaUZvcm1SZWYudmFsdWUudmFsaWRhdGUoKS5jYXRjaChlcnIgPT4gewogICAgICAgICAgICBjb25zb2xlLmVycm9yKCdBSeihqOWNlemqjOivgeWksei0pTonLCBlcnIpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9KTsKICAgICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgICBjcmVhdGVMb2FkaW5nLnZhbHVlID0gdHJ1ZTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAvLyDosIPnlKhBSeeUn+aIkOaWh+aho0FQSQogICAgICAgICAgICAgIGNvbnN0IGNhdGVnb3J5SWQgPSBzZWFyY2hDYXRlZ29yeS52YWx1ZSAhPT0gJ2FsbCcgPyBzZWFyY2hDYXRlZ29yeS52YWx1ZSA6IG51bGw7CiAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhaUdlbmVyYXRlRG9jdW1lbnQoewogICAgICAgICAgICAgICAgdGl0bGU6IGFpRG9jdW1lbnRGb3JtLnZhbHVlLnRpdGxlLAogICAgICAgICAgICAgICAgcmVxdWlyZW1lbnQ6IGFpRG9jdW1lbnRGb3JtLnZhbHVlLnJlcXVpcmVtZW50cywKICAgICAgICAgICAgICAgIGNhdGVnb3J5X2lkOiBjYXRlZ29yeUlkLAogICAgICAgICAgICAgICAgZG9jX3R5cGU6ICdBSScKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQUnnlJ/miJDmlofmoaPlk43lupTmlbDmja7vvJonLCByZXNwb25zZSk7CiAgICAgICAgICAgICAgLy8g5qOA5p+l6LaF5pe2CiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLnN0YXR1cyA9PT0gNTA0KSB7CiAgICAgICAgICAgICAgICB2YXIgX3Jlc3BvbnNlJGRhdGE7CiAgICAgICAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoKChfcmVzcG9uc2UkZGF0YSA9IHJlc3BvbnNlLmRhdGEpID09PSBudWxsIHx8IF9yZXNwb25zZSRkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVzcG9uc2UkZGF0YS5kZXRhaWwpIHx8ICdBSeeUn+aIkOi2heaXtu+8jOivt+eugOWMlumcgOaxguaIlueojeWQjumHjeivlScpOwogICAgICAgICAgICAgICAgY3JlYXRlTG9hZGluZy52YWx1ZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuZGF0YSAmJiB0eXBlb2YgcmVzcG9uc2UuZGF0YS5kZXRhaWwgPT09ICdzdHJpbmcnICYmIHJlc3BvbnNlLmRhdGEuZGV0YWlsLmluY2x1ZGVzKCfotoXml7YnKSkgewogICAgICAgICAgICAgICAgRWxNZXNzYWdlLmVycm9yKHJlc3BvbnNlLmRhdGEuZGV0YWlsKTsKICAgICAgICAgICAgICAgIGNyZWF0ZUxvYWRpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgbmV3RG9jdW1lbnREaWFsb2dWaXNpYmxlLnZhbHVlID0gZmFsc2U7CiAgICAgICAgICAgICAgRWxNZXNzYWdlLnN1Y2Nlc3MoJ0FJ55Sf5oiQ5paH5qGj5oiQ5YqfJyk7CiAgICAgICAgICAgICAgbGV0IGRvY0lkID0gbnVsbDsKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuZGF0YSAmJiByZXNwb25zZS5kYXRhLmlkKSB7CiAgICAgICAgICAgICAgICBkb2NJZCA9IHJlc3BvbnNlLmRhdGEuaWQ7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChkb2NJZCkgewogICAgICAgICAgICAgICAgLy8g6Lez6L2s5YmN5omT5Y2w5pel5b+XCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5YeG5aSH6Lez6L2s5Yiw5paH5qGj6K+m5oOF6aG177yM6Lev55Sx5ZCNOiBTbWFydERvY0RldGFpbCwgaWQ6JywgZG9jSWQpOwogICAgICAgICAgICAgICAgcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgICBuYW1lOiAnU21hcnREb2NEZXRhaWwnLAogICAgICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogU3RyaW5nKGRvY0lkKQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgY3JlYXRlTG9hZGluZy52YWx1ZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcign6Lev55Sx5a+86Iiq5aSx6LSlOicsIGVycik7CiAgICAgICAgICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcign6Lez6L2s5paH5qGj6K+m5oOF6aG15aSx6LSl77yM6K+35omL5Yqo5Yi35paw6aG16Z2iJyk7CiAgICAgICAgICAgICAgICAgIC8vIOWwneivlei3r+W+hOi3s+i9rAogICAgICAgICAgICAgICAgICByb3V0ZXIucHVzaChgL3NtYXJ0ZG9jLyR7ZG9jSWR9YCkuY2F0Y2gobmF2RXJyID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCfot6/lvoTlr7zoiKrkuZ/lpLHotKU6JywgbmF2RXJyKTsKICAgICAgICAgICAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+i3r+W+hOi3s+i9rOivpuaDhemhteS5n+Wksei0pScpOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgY3JlYXRlTG9hZGluZy52YWx1ZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAvLyDlvILmraXliLfmlrDmlbDmja4KICAgICAgICAgICAgICAgIGZldGNoRG9jdW1lbnRzKCk7CiAgICAgICAgICAgICAgICBmZXRjaFJlY2VudERvY3VtZW50cygpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBmZXRjaERvY3VtZW50cygpOwogICAgICAgICAgICAgICAgZmV0Y2hSZWNlbnREb2N1bWVudHMoKTsKICAgICAgICAgICAgICAgIGNyZWF0ZUxvYWRpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignQUnnlJ/miJDmlofmoaPlpLHotKUnLCBlcnJvcik7CiAgICAgICAgICAgICAgRWxNZXNzYWdlLmVycm9yKCdBSeeUn+aIkOaWh+aho+Wksei0pScpOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgIGNyZWF0ZUxvYWRpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCfmj5DkuqRBSeihqOWNleaXtuWPkeeUn+mUmeivrzonLCBlcnJvcik7CiAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+ihqOWNleaPkOS6pOWksei0pScpOwogICAgICAgICAgY3JlYXRlTG9hZGluZy52YWx1ZSA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgfTsKICAgIGNvbnN0IG9wZW5Eb2N1bWVudCA9IGRvYyA9PiB7CiAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAnU21hcnREb2NEZXRhaWwnLAogICAgICAgIHBhcmFtczogewogICAgICAgICAgaWQ6IGRvYy5pZAogICAgICAgIH0KICAgICAgfSk7CiAgICB9OwogICAgY29uc3QgcmVuYW1lRG9jdW1lbnQgPSBkb2MgPT4gewogICAgICBFbE1lc3NhZ2VCb3gucHJvbXB0KCfor7fovpPlhaXmlrDmlofmoaPlkI3np7AnLCAn6YeN5ZG95ZCN5paH5qGjJywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICBpbnB1dFZhbHVlOiBkb2MudGl0bGUsCiAgICAgICAgaW5wdXRWYWxpZGF0b3I6IHZhbHVlID0+IHsKICAgICAgICAgIGlmICghdmFsdWUpIHsKICAgICAgICAgICAgcmV0dXJuICfmlofmoaPlkI3np7DkuI3og73kuLrnqbonOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9KS50aGVuKCh7CiAgICAgICAgdmFsdWUKICAgICAgfSkgPT4gewogICAgICAgIC8vIOatpOWkhOW6lOivpeiwg+eUqOabtOaWsOaWh+aho0FQSQogICAgICAgIEVsTWVzc2FnZS5pbmZvKGDph43lkb3lkI3mlofmoaPkuLo6ICR7dmFsdWV9YCk7CiAgICAgIH0pLmNhdGNoKCgpID0+IHt9KTsKICAgIH07CiAgICBjb25zdCBkdXBsaWNhdGVEb2N1bWVudCA9IGRvYyA9PiB7CiAgICAgIEVsTWVzc2FnZS5pbmZvKGDlpI3liLbmlofmoaM6ICR7ZG9jLnRpdGxlfWApOwogICAgfTsKICAgIGNvbnN0IHNoYXJlRG9jdW1lbnQgPSBkb2MgPT4gewogICAgICBzZWxlY3RlZERvY3VtZW50LnZhbHVlID0gZG9jOwogICAgICAvLyDlnKjlrp7pmYXpobnnm67kuK3vvIzov5nph4zlupTor6Xku45BUEnojrflj5blj6/nlKjnlKjmiLfliJfooagKICAgICAgYXZhaWxhYmxlVXNlcnMudmFsdWUgPSBbewogICAgICAgIGlkOiAxLAogICAgICAgIHVzZXJuYW1lOiAn5byg5LiJJwogICAgICB9LCB7CiAgICAgICAgaWQ6IDIsCiAgICAgICAgdXNlcm5hbWU6ICfmnY7lm5snCiAgICAgIH0sIHsKICAgICAgICBpZDogMywKICAgICAgICB1c2VybmFtZTogJ+eOi+S6lCcKICAgICAgfV07CiAgICAgIHNlbGVjdGVkVXNlcnMudmFsdWUgPSBbXTsKICAgICAgc2hhcmVEaWFsb2dWaXNpYmxlLnZhbHVlID0gdHJ1ZTsKICAgIH07CiAgICBjb25zdCBjb25maXJtU2hhcmUgPSBhc3luYyAoKSA9PiB7CiAgICAgIGlmICghc2VsZWN0ZWREb2N1bWVudC52YWx1ZSB8fCBzZWxlY3RlZFVzZXJzLnZhbHVlLmxlbmd0aCA9PT0gMCkgewogICAgICAgIEVsTWVzc2FnZS53YXJuaW5nKCfor7fpgInmi6noh7PlsJHkuIDkuKrnlKjmiLcnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgc2hhcmVMb2FkaW5nLnZhbHVlID0gdHJ1ZTsKICAgICAgdHJ5IHsKICAgICAgICBhd2FpdCBhcGlTaGFyZURvY3VtZW50KHNlbGVjdGVkRG9jdW1lbnQudmFsdWUuaWQsIHNlbGVjdGVkVXNlcnMudmFsdWUpOwogICAgICAgIEVsTWVzc2FnZS5zdWNjZXNzKCfmlofmoaPliIbkuqvmiJDlip8nKTsKICAgICAgICBzaGFyZURpYWxvZ1Zpc2libGUudmFsdWUgPSBmYWxzZTsKICAgICAgICBmZXRjaFNoYXJlZERvY3VtZW50cygpOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WIhuS6q+aWh+aho+Wksei0pScsIGVycm9yKTsKICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+WIhuS6q+aWh+aho+Wksei0pScpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIHNoYXJlTG9hZGluZy52YWx1ZSA9IGZhbHNlOwogICAgICB9CiAgICB9OwogICAgY29uc3QgZGVsZXRlRG9jdW1lbnQgPSBkb2MgPT4gewogICAgICBzZWxlY3RlZERvY3VtZW50LnZhbHVlID0gZG9jOwogICAgICBkZWxldGVEaWFsb2dWaXNpYmxlLnZhbHVlID0gdHJ1ZTsKICAgIH07CiAgICBjb25zdCBjb25maXJtRGVsZXRlID0gYXN5bmMgKCkgPT4gewogICAgICBpZiAoIXNlbGVjdGVkRG9jdW1lbnQudmFsdWUpIHJldHVybjsKICAgICAgZGVsZXRlTG9hZGluZy52YWx1ZSA9IHRydWU7CiAgICAgIHRyeSB7CiAgICAgICAgdmFyIF9zZWxlY3RlZERvY3VtZW50JHZhbDsKICAgICAgICAvLyDorrDlvZXopoHliKDpmaTnmoTmlofmoaNJROWSjOexu+WIqwogICAgICAgIGNvbnN0IGRlbGV0ZWREb2NJZCA9IHNlbGVjdGVkRG9jdW1lbnQudmFsdWUuaWQ7CiAgICAgICAgY29uc3QgZGVsZXRlZERvY0NhdGVnb3J5SWQgPSAoX3NlbGVjdGVkRG9jdW1lbnQkdmFsID0gc2VsZWN0ZWREb2N1bWVudC52YWx1ZS5jYXRlZ29yeSkgPT09IG51bGwgfHwgX3NlbGVjdGVkRG9jdW1lbnQkdmFsID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc2VsZWN0ZWREb2N1bWVudCR2YWwuaWQ7CgogICAgICAgIC8vIOWFiOWFs+mXreWvueivneahhu+8jOaPkOmrmOeUqOaIt+S9k+mqjAogICAgICAgIGRlbGV0ZURpYWxvZ1Zpc2libGUudmFsdWUgPSBmYWxzZTsKCiAgICAgICAgLy8g5omn6KGM5Yig6Zmk5pON5L2cCiAgICAgICAgYXdhaXQgYXBpRGVsZXRlRG9jdW1lbnQoZGVsZXRlZERvY0lkKTsKICAgICAgICBFbE1lc3NhZ2Uuc3VjY2Vzcygn5paH5qGj5Yig6Zmk5oiQ5YqfJyk7CgogICAgICAgIC8vIOW8uuWItua4hemZpOmAieS4reeahOaWh+ahowogICAgICAgIHNlbGVjdGVkRG9jdW1lbnQudmFsdWUgPSBudWxsOwoKICAgICAgICAvLyDmuIXpmaTlj6/og73nmoTnvJPlrZjmlbDmja4KICAgICAgICBpZiAod2luZG93LmxvY2FsU3RvcmFnZSkgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgLy8g56e76Zmk5Y+v6IO95a2Y5Zyo55qE55u45YWz57yT5a2YCiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGBkb2NfY2FjaGVfJHtkZWxldGVkRG9jSWR9YCk7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGByZWNlbnRfZG9jc19jYWNoZWApOwogICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShgZG9jX2xpc3RfY2FjaGVgKTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcign5riF6Zmk5pys5Zyw57yT5a2Y5aSx6LSlOicsIGUpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8g5pu05paw5Yi35paw6Kem5Y+R5ZmoCiAgICAgICAgcmVmcmVzaFRyaWdnZXIudmFsdWUgPSBEYXRlLm5vdygpOwoKICAgICAgICAvLyDkvb/nlKjmlrDmlbDnu4Tmm7/mjaLljp/mlbDnu4TvvIznoa7kv51WdWXog73mo4DmtYvliLDlj5jljJYgCiAgICAgICAgZG9jdW1lbnRzLnZhbHVlID0gWy4uLmRvY3VtZW50cy52YWx1ZS5maWx0ZXIoZG9jID0+IGRvYy5pZCAhPT0gZGVsZXRlZERvY0lkKV07CiAgICAgICAgcmVjZW50RG9jdW1lbnRzLnZhbHVlID0gWy4uLnJlY2VudERvY3VtZW50cy52YWx1ZS5maWx0ZXIoZG9jID0+IGRvYy5pZCAhPT0gZGVsZXRlZERvY0lkKV07CiAgICAgICAgc2hhcmVkRG9jdW1lbnRzLnZhbHVlID0gWy4uLnNoYXJlZERvY3VtZW50cy52YWx1ZS5maWx0ZXIoZG9jID0+IGRvYy5pZCAhPT0gZGVsZXRlZERvY0lkKV07CgogICAgICAgIC8vIOW8uuWItuabtOaWsOinhuWbvgogICAgICAgIGF3YWl0IGZvcmNlVXBkYXRlKCk7CgogICAgICAgIC8vIOabtOaWsOWIhuexu+S4reeahOaWh+aho+iuoeaVsAogICAgICAgIGlmIChkZWxldGVkRG9jQ2F0ZWdvcnlJZCkgewogICAgICAgICAgY29uc3QgY2F0ZWdvcnkgPSBkb2N1bWVudENhdGVnb3JpZXMudmFsdWUuZmluZChjID0+IGMuaWQgPT09IGRlbGV0ZWREb2NDYXRlZ29yeUlkKTsKICAgICAgICAgIGlmIChjYXRlZ29yeSAmJiBjYXRlZ29yeS5kb2N1bWVudF9jb3VudCA+IDApIHsKICAgICAgICAgICAgY2F0ZWdvcnkuZG9jdW1lbnRfY291bnQtLTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIOetieW+hURPTeabtOaWsAogICAgICAgIGF3YWl0IG5leHRUaWNrKCk7CgogICAgICAgIC8vIOmHjeaWsOWvvOiIquWIsOaWh+aho+mmlumhte+8jOehruS/neeKtuaAgeWFqOmDqOWIt+aWsAogICAgICAgIGlmIChyb3V0ZXIuY3VycmVudFJvdXRlLnZhbHVlLm5hbWUgPT09ICdTbWFydERvY0RldGFpbCcpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCfku47or6bmg4XpobXliKDpmaTmlofmoaPvvIzph43mlrDlr7zoiKrliLDmlofmoaPpppbpobUnKTsKCiAgICAgICAgICAvLyDlhYjlvLrliLbliLfmlrDmlbDmja7vvIznoa7kv53lr7zoiKrlkI7mlbDmja7mmK/mnIDmlrDnmoQKICAgICAgICAgIGF3YWl0IHJlbG9hZEFsbERhdGEoKTsKCiAgICAgICAgICAvLyDkvb/nlKhyZXBsYWNl5qih5byP6Lez6L2s77yM5LiN55WZ5LiL5Y6G5Y+y6K6w5b2V77yM5bm25re75Yqg5by65Yi25Yi35paw5Y+C5pWwCiAgICAgICAgICByb3V0ZXIucmVwbGFjZSh7CiAgICAgICAgICAgIG5hbWU6ICdTbWFydERvYycsCiAgICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgICAgX3JlZnJlc2g6IERhdGUubm93KCkKICAgICAgICAgICAgfSAvLyDmt7vliqDml7bpl7TmiLPlj4LmlbDpmLLmraLnvJPlrZgKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyDlpoLmnpzlt7Lnu4/lnKjmlofmoaPpppbpobXvvIznq4vljbPph43ovb3mlbDmja7lubblvLrliLbliLfmlrDpobXpnaIKICAgICAgICAgIGF3YWl0IHJlZnJlc2hEYXRhKCk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WIoOmZpOaWh+aho+Wksei0pScsIGVycm9yKTsKICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+WIoOmZpOaWh+aho+Wksei0pScpOwogICAgICAgIC8vIOWmguaenOWIoOmZpOWksei0pe+8jOWFs+mXreWvueivneahhgogICAgICAgIGRlbGV0ZURpYWxvZ1Zpc2libGUudmFsdWUgPSBmYWxzZTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBkZWxldGVMb2FkaW5nLnZhbHVlID0gZmFsc2U7CiAgICAgIH0KICAgIH07CiAgICBjb25zdCB2aWV3QWxsRG9jdW1lbnRzID0gdHlwZSA9PiB7CiAgICAgIGlmICh0eXBlID09PSAncmVjZW50JykgewogICAgICAgIC8vIOi3r+eUseS4reayoeaciVNtYXJ0RG9jTGlzdO+8jOebtOaOpei3s+i9rOWIsOaZuuiDveaWh+aho+mmlumhteW5tua7muWKqOWIsOaWh+aho+WIl+ihqAogICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICdTbWFydERvYycKICAgICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICBjb25zdCBkb2NTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlY3Rpb24nKTsKICAgICAgICAgICAgaWYgKGRvY1NlY3Rpb24pIHsKICAgICAgICAgICAgICBkb2NTZWN0aW9uLnNjcm9sbEludG9WaWV3KHsKICAgICAgICAgICAgICAgIGJlaGF2aW9yOiAnc21vb3RoJwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9LCAzMDApOwogICAgICAgIH0pOwogICAgICB9CiAgICB9OwogICAgY29uc3Qgc2VsZWN0Q2F0ZWdvcnkgPSBjYXRlZ29yeSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKCfpgInmi6nliIbnsbs6JywgY2F0ZWdvcnkpOwoKICAgICAgLy8g5aaC5p6c6YCJ5oup5b2T5YmN5bey5r+A5rS755qE5YiG57G777yM5LiN5YGa5pON5L2cCiAgICAgIGxldCBjYXRlZ29yeUlkOwogICAgICBpZiAodHlwZW9mIGNhdGVnb3J5ID09PSAnc3RyaW5nJykgewogICAgICAgIGNhdGVnb3J5SWQgPSBjYXRlZ29yeTsKICAgICAgfSBlbHNlIGlmICh0eXBlb2YgY2F0ZWdvcnkgPT09ICdvYmplY3QnICYmIGNhdGVnb3J5ICE9PSBudWxsKSB7CiAgICAgICAgY2F0ZWdvcnlJZCA9IGNhdGVnb3J5LmlkLnRvU3RyaW5nKCk7CiAgICAgIH0KCiAgICAgIC8vIOWmguaenOeCueWHu+W9k+WJjeW3sumAieS4reeahOWIhuexu++8jOWImemHjee9ruS4uiLlhajpg6giCiAgICAgIGlmIChzZWFyY2hDYXRlZ29yeS52YWx1ZSA9PT0gY2F0ZWdvcnlJZCAmJiBjYXRlZ29yeUlkICE9PSAnYWxsJykgewogICAgICAgIHNlYXJjaENhdGVnb3J5LnZhbHVlID0gJ2FsbCc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2VhcmNoQ2F0ZWdvcnkudmFsdWUgPSBjYXRlZ29yeUlkOwogICAgICB9CgogICAgICAvLyDmt7vliqDliqjnlLvmlYjmnpwKICAgICAgZG9jdW1lbnRzLnZhbHVlID0gW107CiAgICAgIGNyZWF0ZUxvYWRpbmcudmFsdWUgPSB0cnVlOwoKICAgICAgLy8g5bu26L+f6I635Y+W77yM5a6e546w6L+H5rih5pWI5p6cCiAgICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4gewogICAgICAgIGF3YWl0IGZldGNoRG9jdW1lbnRzKCk7CiAgICAgICAgY3JlYXRlTG9hZGluZy52YWx1ZSA9IGZhbHNlOwoKICAgICAgICAvLyDliKDpmaToh6rliqjmu5rliqjpgLvovpHvvIzpgb/lhY3pobXpnaLoh6rliqjot7PovawKCiAgICAgICAgLy8g6Kem5Y+R5LiA5Liq566A5Y2V55qE5Yqo55S75pWI5p6c77yM56qB5Ye65pi+56S65bey562b6YCJ55qE5paH5qGjCiAgICAgICAgY29uc3QgZG9jQ2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZG9jLWNhcmQnKTsKICAgICAgICBpZiAoZG9jQ2FyZHMgJiYgZG9jQ2FyZHMubGVuZ3RoID4gMCkgewogICAgICAgICAgZG9jQ2FyZHMuZm9yRWFjaCgoY2FyZCwgaW5kZXgpID0+IHsKICAgICAgICAgICAgaWYgKGNhcmQpIHsKICAgICAgICAgICAgICBjYXJkLnN0eWxlLmFuaW1hdGlvbkRlbGF5ID0gYCR7aW5kZXggKiA1MH1tc2A7CiAgICAgICAgICAgICAgY2FyZC5jbGFzc0xpc3QucmVtb3ZlKCdmYWRlSW4nKTsKICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgIGlmIChjYXJkKSB7CiAgICAgICAgICAgICAgICAgIGNhcmQuY2xhc3NMaXN0LmFkZCgnZmFkZUluJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwgMTApOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sIDMwMCk7CiAgICB9OwoKICAgIC8vIOiOt+WPlumAieS4reWIhuexu+eahOminOiJsgogICAgY29uc3QgZ2V0U2VsZWN0ZWRDYXRlZ29yeUNvbG9yID0gKCkgPT4gewogICAgICBpZiAoc2VhcmNoQ2F0ZWdvcnkudmFsdWUgPT09ICdhbGwnKSByZXR1cm4gJyM0MDlFRkYnOwogICAgICBjb25zdCBzZWxlY3RlZENhdGVnb3J5ID0gZG9jdW1lbnRDYXRlZ29yaWVzLnZhbHVlLmZpbmQoYyA9PiBjLmlkLnRvU3RyaW5nKCkgPT09IHNlYXJjaENhdGVnb3J5LnZhbHVlKTsKICAgICAgcmV0dXJuIChzZWxlY3RlZENhdGVnb3J5ID09PSBudWxsIHx8IHNlbGVjdGVkQ2F0ZWdvcnkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNlbGVjdGVkQ2F0ZWdvcnkuY29sb3IpIHx8ICcjNjdDMjNBJzsKICAgIH07CgogICAgLy8g6I635Y+W6YCJ5Lit5YiG57G755qE5ZCN56ewCiAgICBjb25zdCBnZXRTZWxlY3RlZENhdGVnb3J5TmFtZSA9ICgpID0+IHsKICAgICAgaWYgKHNlYXJjaENhdGVnb3J5LnZhbHVlID09PSAnYWxsJykgcmV0dXJuICflhajpg6jmlofmoaMnOwogICAgICBjb25zdCBzZWxlY3RlZENhdGVnb3J5ID0gZG9jdW1lbnRDYXRlZ29yaWVzLnZhbHVlLmZpbmQoYyA9PiBjLmlkLnRvU3RyaW5nKCkgPT09IHNlYXJjaENhdGVnb3J5LnZhbHVlKTsKICAgICAgcmV0dXJuIChzZWxlY3RlZENhdGVnb3J5ID09PSBudWxsIHx8IHNlbGVjdGVkQ2F0ZWdvcnkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNlbGVjdGVkQ2F0ZWdvcnkubmFtZSkgfHwgJ+acquefpeWIhuexuyc7CiAgICB9OwogICAgY29uc3QgbWFuYWdlQ2F0ZWdvcmllcyA9ICgpID0+IHsKICAgICAgY2F0ZWdvcnlEaWFsb2dWaXNpYmxlLnZhbHVlID0gdHJ1ZTsKICAgICAgcmVzZXRDYXRlZ29yeUZvcm0oKTsKICAgIH07CiAgICBjb25zdCBlZGl0Q2F0ZWdvcnkgPSBjYXRlZ29yeSA9PiB7CiAgICAgIGVkaXRpbmdDYXRlZ29yeS52YWx1ZSA9IHsKICAgICAgICAuLi5jYXRlZ29yeQogICAgICB9OwogICAgfTsKICAgIGNvbnN0IHJlc2V0Q2F0ZWdvcnlGb3JtID0gKCkgPT4gewogICAgICBlZGl0aW5nQ2F0ZWdvcnkudmFsdWUgPSB7CiAgICAgICAgaWQ6ICcnLAogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGNvbG9yOiAnIzQwOUVGRicsCiAgICAgICAgZGVzY3JpcHRpb246ICcnCiAgICAgIH07CiAgICAgIGlmIChjYXRlZ29yeUZvcm1SZWYudmFsdWUpIHsKICAgICAgICBjYXRlZ29yeUZvcm1SZWYudmFsdWUucmVzZXRGaWVsZHMoKTsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IHN1Ym1pdENhdGVnb3J5ID0gYXN5bmMgKCkgPT4gewogICAgICBpZiAoIWNhdGVnb3J5Rm9ybVJlZi52YWx1ZSkgcmV0dXJuOwogICAgICBhd2FpdCBjYXRlZ29yeUZvcm1SZWYudmFsdWUudmFsaWRhdGUoYXN5bmMgdmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgY2F0ZWdvcnlMb2FkaW5nLnZhbHVlID0gdHJ1ZTsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNvbnN0IGNhdGVnb3J5RGF0YSA9IHsKICAgICAgICAgICAgICBuYW1lOiBlZGl0aW5nQ2F0ZWdvcnkudmFsdWUubmFtZSwKICAgICAgICAgICAgICBjb2xvcjogZWRpdGluZ0NhdGVnb3J5LnZhbHVlLmNvbG9yLAogICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBlZGl0aW5nQ2F0ZWdvcnkudmFsdWUuZGVzY3JpcHRpb24gfHwgJycKICAgICAgICAgICAgfTsKICAgICAgICAgICAgaWYgKGVkaXRpbmdDYXRlZ29yeS52YWx1ZS5pZCkgewogICAgICAgICAgICAgIC8vIOabtOaWsOWIhuexuwogICAgICAgICAgICAgIGF3YWl0IHVwZGF0ZURvY3VtZW50Q2F0ZWdvcnkoZWRpdGluZ0NhdGVnb3J5LnZhbHVlLmlkLCBjYXRlZ29yeURhdGEpOwogICAgICAgICAgICAgIEVsTWVzc2FnZS5zdWNjZXNzKCfliIbnsbvmm7TmlrDmiJDlip8nKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvLyDliJvlu7rliIbnsbsKICAgICAgICAgICAgICBhd2FpdCBjcmVhdGVEb2N1bWVudENhdGVnb3J5KGNhdGVnb3J5RGF0YSk7CiAgICAgICAgICAgICAgRWxNZXNzYWdlLnN1Y2Nlc3MoJ+WIhuexu+WIm+W7uuaIkOWKnycpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyDph43mlrDojrflj5bliIbnsbvliJfooagKICAgICAgICAgICAgZmV0Y2hEb2N1bWVudENhdGVnb3JpZXMoKTsKICAgICAgICAgICAgcmVzZXRDYXRlZ29yeUZvcm0oKTsKICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+S/neWtmOWIhuexu+Wksei0pTonLCBlcnJvcik7CiAgICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcign5L+d5a2Y5YiG57G75aSx6LSlJyk7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBjYXRlZ29yeUxvYWRpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfTsKICAgIGNvbnN0IGRlbGV0ZUNhdGVnb3J5ID0gY2F0ZWdvcnkgPT4gewogICAgICBpZiAoY2F0ZWdvcnkuZG9jdW1lbnRfY291bnQgPiAwKSB7CiAgICAgICAgRWxNZXNzYWdlLndhcm5pbmcoJ+ivpeWIhuexu+S4i+acieaWh+aho++8jOaXoOazleWIoOmZpCcpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBFbE1lc3NhZ2VCb3guY29uZmlybShg56Gu5a6a6KaB5Yig6Zmk5YiG57G7IiR7Y2F0ZWdvcnkubmFtZX0i5ZCX77yfYCwgJ+WIoOmZpOWIhuexuycsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oYXN5bmMgKCkgPT4gewogICAgICAgIHRyeSB7CiAgICAgICAgICBhd2FpdCBkZWxldGVEb2N1bWVudENhdGVnb3J5KGNhdGVnb3J5LmlkKTsKICAgICAgICAgIEVsTWVzc2FnZS5zdWNjZXNzKCfliIbnsbvliKDpmaTmiJDlip8nKTsKICAgICAgICAgIGZldGNoRG9jdW1lbnRDYXRlZ29yaWVzKCk7CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WIoOmZpOWIhuexu+Wksei0pTonLCBlcnJvcik7CiAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+WIoOmZpOWIhuexu+Wksei0pScpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goKCkgPT4ge30pOwogICAgfTsKICAgIGNvbnN0IGZvcm1hdERhdGUgPSBkYXRlU3RyaW5nID0+IHsKICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHJpbmcpOwogICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOwoKICAgICAgLy8g5ZCM5LiA5aSp5pi+56S65pe26Ze0CiAgICAgIGlmIChkYXRlLnRvRGF0ZVN0cmluZygpID09PSBub3cudG9EYXRlU3RyaW5nKCkpIHsKICAgICAgICByZXR1cm4gZGF0ZS50b0xvY2FsZVRpbWVTdHJpbmcoJ3poLUNOJywgewogICAgICAgICAgaG91cjogJzItZGlnaXQnLAogICAgICAgICAgbWludXRlOiAnMi1kaWdpdCcKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgLy8g5pio5aSpCiAgICAgIGNvbnN0IHllc3RlcmRheSA9IG5ldyBEYXRlKG5vdyk7CiAgICAgIHllc3RlcmRheS5zZXREYXRlKG5vdy5nZXREYXRlKCkgLSAxKTsKICAgICAgaWYgKGRhdGUudG9EYXRlU3RyaW5nKCkgPT09IHllc3RlcmRheS50b0RhdGVTdHJpbmcoKSkgewogICAgICAgIHJldHVybiAn5pio5aSpJzsKICAgICAgfQoKICAgICAgLy8g5LiA5ZGo5YaF5pi+56S65pif5pyfCiAgICAgIGNvbnN0IHdlZWtEYXlzID0gWyflkajml6UnLCAn5ZGo5LiAJywgJ+WRqOS6jCcsICflkajkuIknLCAn5ZGo5ZubJywgJ+WRqOS6lCcsICflkajlha0nXTsKICAgICAgY29uc3QgZGlmZkRheXMgPSBNYXRoLnJvdW5kKChub3cgLSBkYXRlKSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSk7CiAgICAgIGlmIChkaWZmRGF5cyA8IDcpIHsKICAgICAgICByZXR1cm4gd2Vla0RheXNbZGF0ZS5nZXREYXkoKV07CiAgICAgIH0KCiAgICAgIC8vIOWFtuS7luaDheWGteaYvuekuuaXpeacnwogICAgICByZXR1cm4gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoJ3poLUNOJywgewogICAgICAgIG1vbnRoOiAnbnVtZXJpYycsCiAgICAgICAgZGF5OiAnbnVtZXJpYycKICAgICAgfSk7CiAgICB9OwogICAgY29uc3QgcmVzZXRDYXRlZ29yeUZpbHRlciA9ICgpID0+IHsKICAgICAgc2VhcmNoQ2F0ZWdvcnkudmFsdWUgPSAnYWxsJzsKICAgICAgcGFnZS52YWx1ZSA9IDE7CiAgICAgIGhhc01vcmUudmFsdWUgPSB0cnVlOwogICAgICBmZXRjaERvY3VtZW50cyh0cnVlKTsKICAgIH07CgogICAgLy8g5re75Yqg6aG16Z2i5r+A5rS76ZKp5a2Q77yM56Gu5L+d5LuO5YW25LuW6aG16Z2i6L+U5Zue5pe26YeN5paw6I635Y+W5pWw5o2uCiAgICBvbkFjdGl2YXRlZCgoKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKCdTbWFydERvY+e7hOS7tuiiq+a/gOa0u++8jOmHjeaWsOiOt+WPluaVsOaNricpOwogICAgICByZWxvYWRBbGxEYXRhKCk7CiAgICB9KTsKCiAgICAvLyDpobXpnaLmv4DmtLvlkI7ph43mlrDliqDovb3miYDmnInmlbDmja7nmoTlh73mlbAKICAgIGNvbnN0IHJlbG9hZEFsbERhdGEgPSBhc3luYyAoKSA9PiB7CiAgICAgIHBhZ2UudmFsdWUgPSAxOwogICAgICBoYXNNb3JlLnZhbHVlID0gdHJ1ZTsKICAgICAgdHJ5IHsKICAgICAgICBjb25zb2xlLmxvZygn6YeN5paw5Yqg6L295omA5pyJ5paH5qGj5pWw5o2uLi4uJyk7CiAgICAgICAgY3JlYXRlTG9hZGluZy52YWx1ZSA9IHRydWU7CiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoW2ZldGNoRG9jdW1lbnRzKHRydWUpLCBmZXRjaFJlY2VudERvY3VtZW50cyh0cnVlKSwgZmV0Y2hTaGFyZWREb2N1bWVudHMoKSwgZmV0Y2hEb2N1bWVudENhdGVnb3JpZXMoKV0pOwogICAgICAgIGNvbnNvbGUubG9nKCfmlbDmja7ph43mlrDliqDovb3lrozmiJAnKTsKICAgICAgICBhd2FpdCBmb3JjZVVwZGF0ZSgpOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+aVsOaNrumHjeaWsOWKoOi9veWksei0pTonLCBlcnJvcik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgY3JlYXRlTG9hZGluZy52YWx1ZSA9IGZhbHNlOwogICAgICB9CiAgICB9OwoKICAgIC8vIOaPkOS+m+mHjei9veWHveaVsOe7meWtkOe7hOS7tuaIlueItue7hOS7tuS9v+eUqAogICAgcHJvdmlkZSgncmVsb2FkRG9jdW1lbnRzJywgcmVsb2FkQWxsRGF0YSk7CgogICAgLy8g55uR5ZCs6Lev55Sx5Y+Y5YyW77yM5by65Yi25Yi35paw5pWw5o2uCiAgICB3YXRjaCgoKSA9PiByb3V0ZS5xdWVyeS5fcmVmcmVzaCwgbmV3VmFsID0+IHsKICAgICAgaWYgKG5ld1ZhbCkgewogICAgICAgIGNvbnNvbGUubG9nKCfmo4DmtYvliLDot6/nlLHliLfmlrDlj4LmlbA6JywgbmV3VmFsKTsKICAgICAgICByZWZyZXNoVHJpZ2dlci52YWx1ZSA9IERhdGUubm93KCk7CiAgICAgICAgcmVsb2FkQWxsRGF0YSgpOwogICAgICB9CiAgICB9KTsKCiAgICAvLyDnm5HlkKzot6/nlLHlj4LmlbDvvIzlpITnkIbkuI3lkIzmg4XlhrUKICAgIHdhdGNoKCgpID0+IHJvdXRlLnBhdGgsIChuZXdQYXRoLCBvbGRQYXRoKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKCfot6/nlLHlj5jljJY6Jywgb2xkUGF0aCwgJy0+JywgbmV3UGF0aCk7CiAgICAgIGlmIChuZXdQYXRoID09PSAnL3NtYXJ0ZG9jJyAmJiBvbGRQYXRoICYmIG9sZFBhdGguc3RhcnRzV2l0aCgnL3NtYXJ0ZG9jLycpKSB7CiAgICAgICAgLy8g5LuO5paH5qGj6K+m5oOF6aG16L+U5Zue5paH5qGj5YiX6KGo6aG177yM5by65Yi25Yi35pawCiAgICAgICAgY29uc29sZS5sb2coJ+S7juivpuaDhemhtei/lOWbnuWIl+ihqOmhte+8jOW8uuWItuWIt+aWsOaVsOaNricpOwogICAgICAgIHJlZnJlc2hUcmlnZ2VyLnZhbHVlID0gRGF0ZS5ub3coKTsKICAgICAgICByZWxvYWRBbGxEYXRhKCk7CiAgICAgIH0KICAgIH0pOwoKICAgIC8vIOaJi+WKqOW8uuWItuWIt+aWsOaWueazlQogICAgY29uc3QgcmVmcmVzaERhdGEgPSBhc3luYyAoKSA9PiB7CiAgICAgIHBhZ2UudmFsdWUgPSAxOwogICAgICBoYXNNb3JlLnZhbHVlID0gdHJ1ZTsKICAgICAgYXdhaXQgcmVsb2FkQWxsRGF0YSgpOwogICAgICBpZiAocHJveHkgJiYgcHJveHkuJGZvcmNlVXBkYXRlKSB7CiAgICAgICAgcHJveHkuJGZvcmNlVXBkYXRlKCk7CiAgICAgIH0KICAgIH07CgogICAgLy8g5paw5aKe5p+l55yL5pu05aSa5pa55rOVCiAgICBjb25zdCBsb2FkTW9yZURvY3VtZW50cyA9IGFzeW5jICgpID0+IHsKICAgICAgcGFnZS52YWx1ZSArPSAxOwogICAgICBhd2FpdCBmZXRjaERvY3VtZW50cyhmYWxzZSwgdHJ1ZSk7CiAgICB9OwoKICAgIC8vIOeUn+WRveWRqOacn+mSqeWtkAogICAgb25Nb3VudGVkKCgpID0+IHsKICAgICAgY29uc29sZS5sb2coJ1NtYXJ0RG9j57uE5Lu2bW91bnRlZO+8jOWKoOi9veaVsOaNricpOwogICAgICByZWxvYWRBbGxEYXRhKCk7IC8vIOS9v+eUqOe7n+S4gOeahOaVsOaNruWKoOi9veWHveaVsAogICAgfSk7CiAgICByZXR1cm4gewogICAgICBkb2N1bWVudHMsCiAgICAgIHJlY2VudERvY3VtZW50cywKICAgICAgc2hhcmVkRG9jdW1lbnRzLAogICAgICBkb2N1bWVudENhdGVnb3JpZXMsCiAgICAgIHNlYXJjaFF1ZXJ5LAogICAgICBzZWFyY2hDYXRlZ29yeSwKICAgICAgZGVib3VuY2VkU2VhcmNoLAogICAgICB0b3RhbERvY3VtZW50cywKICAgICAgcmVjZW50RWRpdENvdW50LAogICAgICBuZXdEb2N1bWVudERpYWxvZ1Zpc2libGUsCiAgICAgIHNoYXJlRGlhbG9nVmlzaWJsZSwKICAgICAgZGVsZXRlRGlhbG9nVmlzaWJsZSwKICAgICAgZG9jdW1lbnRDcmVhdGVUeXBlLAogICAgICBuZXdEb2N1bWVudEZvcm0sCiAgICAgIGFpRG9jdW1lbnRGb3JtLAogICAgICBibGFua0Zvcm1SdWxlcywKICAgICAgYWlGb3JtUnVsZXMsCiAgICAgIGJsYW5rRm9ybVJlZiwKICAgICAgYWlGb3JtUmVmLAogICAgICBzZWxlY3RlZERvY3VtZW50LAogICAgICBzZWxlY3RlZFVzZXJzLAogICAgICBhdmFpbGFibGVVc2VycywKICAgICAgY3JlYXRlTG9hZGluZywKICAgICAgc2hhcmVMb2FkaW5nLAogICAgICBkZWxldGVMb2FkaW5nLAogICAgICBjcmVhdGVOZXdEb2N1bWVudCwKICAgICAgc3VibWl0TmV3RG9jdW1lbnQsCiAgICAgIG9wZW5Eb2N1bWVudCwKICAgICAgcmVuYW1lRG9jdW1lbnQsCiAgICAgIGR1cGxpY2F0ZURvY3VtZW50LAogICAgICBzaGFyZURvY3VtZW50LAogICAgICBjb25maXJtU2hhcmUsCiAgICAgIGRlbGV0ZURvY3VtZW50LAogICAgICBjb25maXJtRGVsZXRlLAogICAgICB2aWV3QWxsRG9jdW1lbnRzLAogICAgICBmb3JtYXREYXRlLAogICAgICBjYXRlZ29yeURpYWxvZ1Zpc2libGUsCiAgICAgIGVkaXRpbmdDYXRlZ29yeSwKICAgICAgY2F0ZWdvcnlGb3JtUmVmLAogICAgICBjYXRlZ29yeUxvYWRpbmcsCiAgICAgIGNhdGVnb3J5Rm9ybVJ1bGVzLAogICAgICBlZGl0Q2F0ZWdvcnksCiAgICAgIHJlc2V0Q2F0ZWdvcnlGb3JtLAogICAgICBzdWJtaXRDYXRlZ29yeSwKICAgICAgZGVsZXRlQ2F0ZWdvcnksCiAgICAgIHJlc2V0Q2F0ZWdvcnlGaWx0ZXIsCiAgICAgIHNlbGVjdENhdGVnb3J5LAogICAgICBnZXRTZWxlY3RlZENhdGVnb3J5Q29sb3IsCiAgICAgIGdldFNlbGVjdGVkQ2F0ZWdvcnlOYW1lLAogICAgICBtYW5hZ2VDYXRlZ29yaWVzLAogICAgICByZWxvYWRBbGxEYXRhLAogICAgICByZWZyZXNoRGF0YSwKICAgICAgcmVmcmVzaFRyaWdnZXIsCiAgICAgIGhhc01vcmUsCiAgICAgIGxvYWRNb3JlRG9jdW1lbnRzCiAgICB9OwogIH0KfTs="},{"version":3,"names":["ref","computed","onMounted","nextTick","getCurrentInstance","provide","onActivated","watch","useRouter","useRoute","ElMessage","ElMessageBox","Search","Plus","EditPen","Share","Folder","Close","More","Document","_","getDocuments","getRecentDocuments","getSharedDocuments","getDocumentCategories","createDocument","deleteDocument","apiDeleteDocument","shareDocument","apiShareDocument","createDocumentCategory","updateDocumentCategory","deleteDocumentCategory","aiGenerateDocument","name","components","setup","router","route","proxy","refreshTrigger","Date","now","documents","recentDocuments","sharedDocuments","documentCategories","searchQuery","searchCategory","newDocumentDialogVisible","shareDialogVisible","deleteDialogVisible","documentCreateType","selectedDocument","selectedUsers","availableUsers","createLoading","shareLoading","deleteLoading","page","pageSize","hasMore","totalCount","newDocumentForm","title","type","aiDocumentForm","requirements","blankFormRules","required","message","trigger","min","max","aiFormRules","blankFormRef","aiFormRef","totalDocuments","value","length","recentEditCount","categoryDialogVisible","editingCategory","color","description","categoryFormRef","categoryLoading","categoryFormRules","forceUpdate","$forceUpdate","fetchDocuments","forceRefresh","append","params","limit","category","search","_t","getTime","res","data","list","Array","isArray","results","total","count","error","fetchRecentDocuments","console","log","warn","fetchSharedDocuments","response","fetchDocumentCategories","retryCount","setTimeout","status","debouncedSearch","debounce","createNewDocument","dialog","document","querySelector","addEventListener","clearValidate","err","once","submitNewDocument","valid","validate","catch","content","JSON","stringify","success","docId","id","push","then","navErr","categoryId","requirement","category_id","doc_type","_response$data","detail","includes","String","openDocument","doc","renameDocument","prompt","confirmButtonText","cancelButtonText","inputValue","inputValidator","info","duplicateDocument","username","confirmShare","warning","confirmDelete","_selectedDocument$val","deletedDocId","deletedDocCategoryId","window","localStorage","removeItem","e","filter","find","c","document_count","currentRoute","reloadAllData","replace","query","_refresh","refreshData","viewAllDocuments","docSection","scrollIntoView","behavior","selectCategory","toString","docCards","querySelectorAll","forEach","card","index","style","animationDelay","classList","remove","add","getSelectedCategoryColor","selectedCategory","getSelectedCategoryName","manageCategories","resetCategoryForm","editCategory","resetFields","submitCategory","categoryData","deleteCategory","confirm","formatDate","dateString","date","toDateString","toLocaleTimeString","hour","minute","yesterday","setDate","getDate","weekDays","diffDays","Math","round","getDay","toLocaleDateString","month","day","resetCategoryFilter","Promise","all","newVal","path","newPath","oldPath","startsWith","loadMoreDocuments"],"sources":["C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\smartdoc\\Index.vue"],"sourcesContent":["<template>\n  <div class=\"smartdoc-home-container\">\n    <!-- 添加隐藏的刷新触发元素，用于强制组件刷新 -->\n    <div style=\"display: none;\">{{ refreshTrigger }}</div>\n    \n    <!-- 页面标题和操作区 -->\n    <div class=\"page-header\">\n      <div class=\"left-section\">\n        <h2 class=\"page-title\">智能文档</h2>\n        <p class=\"page-description\">创建、编辑和管理您的智能文档</p>\n        </div>\n      <div class=\"right-section\">\n        <div class=\"search-controls\">\n          <el-select \n            v-model=\"searchCategory\" \n            placeholder=\"选择分类\" \n            @change=\"selectCategory(searchCategory)\" \n            class=\"category-select\"\n          >\n            <el-option label=\"全部分类\" value=\"all\" />\n            <el-option \n              v-for=\"category in documentCategories\" \n              :key=\"category.id\" \n              :label=\"category.name\" \n              :value=\"category.id.toString()\"\n            />\n          </el-select>\n          \n          <el-input\n            placeholder=\"搜索文档...\"\n            v-model=\"searchQuery\"\n          class=\"search-input\"\n            clearable\n            @input=\"debouncedSearch\"\n          >\n            <template #prefix>\n              <el-icon><Search /></el-icon>\n            </template>\n          </el-input>\n        </div>\n        \n        <el-button type=\"primary\" @click=\"createNewDocument\">\n          <el-icon><Plus /></el-icon> 新建文档\n        </el-button>\n          </div>\n        </div>\n\n    <!-- 文档概览统计卡片 -->\n    <div class=\"stats-cards\">\n      <el-card class=\"stat-card\" shadow=\"hover\">\n        <div class=\"stat-content\">\n          <div class=\"stat-icon doc-icon\">\n                <el-icon><Document /></el-icon>\n              </div>\n          <div class=\"stat-info\">\n            <div class=\"stat-value\">{{ totalDocuments }}</div>\n            <div class=\"stat-label\">全部文档</div>\n                </div>\n              </div>\n      </el-card>\n      \n      <el-card class=\"stat-card\" shadow=\"hover\">\n        <div class=\"stat-content\">\n          <div class=\"stat-icon edit-icon\">\n            <el-icon><EditPen /></el-icon>\n            </div>\n          <div class=\"stat-info\">\n            <div class=\"stat-value\">{{ recentEditCount }}</div>\n            <div class=\"stat-label\">近期编辑</div>\n          </div>\n        </div>\n      </el-card>\n      \n      <el-card class=\"stat-card\" shadow=\"hover\">\n        <div class=\"stat-content\">\n          <div class=\"stat-icon share-icon\">\n            <el-icon><Share /></el-icon>\n          </div>\n          <div class=\"stat-info\">\n            <div class=\"stat-value\">{{ sharedDocuments.length }}</div>\n            <div class=\"stat-label\">共享文档</div>\n            </div>\n        </div>\n      </el-card>\n    </div>\n\n    <!-- 添加筛选活动状态提示栏 -->\n    <div v-if=\"searchCategory !== 'all'\" class=\"filter-status-bar\">\n      <div class=\"filter-bar-content\">\n        <div class=\"filter-title\">\n          <span>当前筛选: </span>\n          <span class=\"filter-category\" :style=\"{ backgroundColor: getSelectedCategoryColor() }\">\n            {{ getSelectedCategoryName() }}\n          </span>\n        </div>\n        <div class=\"filter-actions\">\n          <el-button type=\"primary\" link @click=\"resetCategoryFilter\">\n            <el-icon><Close /></el-icon> 清除筛选\n          </el-button>\n        </div>\n      </div>\n    </div>\n\n    <!-- 文档分类区域 - 移至文档列表上方 -->\n    <div class=\"section category-section\">\n      <div class=\"section-header\">\n        <h3>文档分类</h3>\n        <div class=\"section-actions\">\n          <el-button text @click=\"manageCategories\">管理分类</el-button>\n        </div>\n      </div>\n      \n      <div class=\"category-cards\">\n        <!-- 全部分类选项 -->\n        <div \n          class=\"category-card\" \n          :class=\"{ 'category-active': searchCategory === 'all' }\"\n          @click=\"selectCategory('all')\"\n        >\n          <div class=\"category-icon\" :style=\"{ backgroundColor: '#409EFF' }\">\n            <el-icon><Document /></el-icon>\n          </div>\n          <div class=\"category-info\">\n            <h4>全部文档</h4>\n            <div class=\"category-count\">{{ documents.length }} 个文档</div>\n          </div>\n          <div v-if=\"searchCategory === 'all'\" class=\"category-selected-indicator\"></div>\n        </div>\n        \n        <!-- 分类卡片 -->\n        <div \n          v-for=\"category in documentCategories\" \n          :key=\"category.id\" \n          class=\"category-card\" \n          :class=\"{ 'category-active': searchCategory === category.id.toString() }\"\n          @click=\"selectCategory(category)\"\n        >\n          <div class=\"category-icon\" :style=\"{ backgroundColor: category.color }\">\n            <el-icon><Folder /></el-icon>\n          </div>\n          <div class=\"category-info\">\n            <h4>{{ category.name }}</h4>\n            <div class=\"category-count\">{{ category.document_count }} 个文档</div>\n          </div>\n          <div v-if=\"searchCategory === category.id.toString()\" class=\"category-selected-indicator\"></div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 添加文档列表区域 -->\n    <div class=\"section\">\n      <div class=\"section-header\">\n        <h3>我的文档</h3>\n        <div class=\"filter-controls\">\n          <el-button text @click=\"fetchDocuments\">刷新</el-button>\n        </div>\n              </div>\n      \n      <div class=\"document-cards\">\n        <el-card \n          v-for=\"doc in documents\" \n          :key=\"doc.id\" \n          class=\"doc-card\" \n          shadow=\"hover\"\n          @click=\"openDocument(doc)\"\n        >\n          <div class=\"doc-card-header\">\n            <div class=\"doc-info\">\n            <div class=\"doc-type-tag\">{{ doc.type }}</div>\n              <div v-if=\"doc.category\" \n                   class=\"doc-category-tag\" \n                   :style=\"{ backgroundColor: doc.category.color || '#67C23A' }\"\n              >\n                {{ doc.category.name }}\n              </div>\n            </div>\n            <div class=\"doc-menu\">\n              <el-dropdown trigger=\"click\" @click.stop>\n                <el-icon><More /></el-icon>\n                  <template #dropdown>\n                    <el-dropdown-menu>\n                    <el-dropdown-item @click.stop=\"openDocument(doc)\">打开</el-dropdown-item>\n                    <el-dropdown-item @click.stop=\"renameDocument(doc)\">重命名</el-dropdown-item>\n                    <el-dropdown-item @click.stop=\"duplicateDocument(doc)\">复制</el-dropdown-item>\n                    <el-dropdown-item @click.stop=\"shareDocument(doc)\">分享</el-dropdown-item>\n                    <el-dropdown-item divided @click.stop=\"deleteDocument(doc)\" type=\"danger\">删除</el-dropdown-item>\n                    </el-dropdown-menu>\n                  </template>\n                </el-dropdown>\n            </div>\n          </div>\n          \n          <h4 class=\"doc-title\" :title=\"doc.title\">{{ doc.title }}</h4>\n          \n          <div class=\"doc-preview\" v-html=\"doc.preview || '无预览内容'\"></div>\n          \n          <div class=\"doc-footer\">\n            <div class=\"doc-time\">{{ formatDate(doc.update_time) }}</div>\n            <div class=\"doc-actions\">\n              <el-tooltip content=\"编辑\" placement=\"top\">\n                <el-button link circle size=\"small\" @click.stop=\"openDocument(doc)\">\n                  <el-icon><EditPen /></el-icon>\n                </el-button>\n              </el-tooltip>\n              <el-tooltip content=\"分享\" placement=\"top\">\n                <el-button link circle size=\"small\" @click.stop=\"shareDocument(doc)\">\n                  <el-icon><Share /></el-icon>\n                </el-button>\n              </el-tooltip>\n              </div>\n            </div>\n        </el-card>\n        \n        <!-- 创建新文档卡片 -->\n        <div class=\"doc-card new-doc-card\" @click=\"createNewDocument\">\n          <div class=\"new-doc-content\">\n            <el-icon><Plus /></el-icon>\n            <span>新建文档</span>\n                  </div>\n                    </div>\n                  </div>\n      \n      <div v-if=\"hasMore && documents.length > 0\" style=\"text-align:center;margin:16px 0;\">\n        <el-button type=\"primary\" @click=\"loadMoreDocuments\" :loading=\"createLoading\" plain round>\n          查看更多\n        </el-button>\n      </div>\n      <div v-if=\"!hasMore && documents.length > 0\" style=\"text-align:center;color:#909399;font-size:13px;margin-bottom:16px;\">\n        已加载全部文档\n      </div>\n    </div>\n\n    <!-- 最近编辑文档区域 -->\n    <div class=\"section\">\n      <div class=\"section-header\">\n        <h3>最近编辑</h3>\n        <div class=\"section-actions\">\n        <el-button text @click=\"viewAllDocuments('recent')\">查看全部</el-button>\n        </div>\n                </div>\n      \n      <div class=\"document-cards\">\n        <el-card \n          v-for=\"doc in recentDocuments\" \n          :key=\"doc.id\" \n          class=\"doc-card\" \n          shadow=\"hover\"\n          @click=\"openDocument(doc)\"\n        >\n          <div class=\"doc-card-header\">\n            <div class=\"doc-info\">\n            <div class=\"doc-type-tag\">{{ doc.type }}</div>\n              <div v-if=\"doc.category\" \n                   class=\"doc-category-tag\" \n                   :style=\"{ backgroundColor: doc.category.color || '#67C23A' }\"\n              >\n                {{ doc.category.name }}\n                  </div>\n            </div>\n            <div class=\"doc-menu\">\n              <el-dropdown trigger=\"click\" @click.stop>\n                <el-icon><More /></el-icon>\n                  <template #dropdown>\n                    <el-dropdown-menu>\n                    <el-dropdown-item @click.stop=\"openDocument(doc)\">打开</el-dropdown-item>\n                    <el-dropdown-item @click.stop=\"renameDocument(doc)\">重命名</el-dropdown-item>\n                    <el-dropdown-item @click.stop=\"duplicateDocument(doc)\">复制</el-dropdown-item>\n                    <el-dropdown-item @click.stop=\"shareDocument(doc)\">分享</el-dropdown-item>\n                    <el-dropdown-item divided @click.stop=\"deleteDocument(doc)\" type=\"danger\">删除</el-dropdown-item>\n                    </el-dropdown-menu>\n                  </template>\n                </el-dropdown>\n            </div>\n          </div>\n          \n          <h4 class=\"doc-title\" :title=\"doc.title\">{{ doc.title }}</h4>\n          \n          <div class=\"doc-preview\" v-html=\"doc.preview || '无预览内容'\"></div>\n          \n          <div class=\"doc-footer\">\n            <div class=\"doc-time\">{{ formatDate(doc.update_time) }}</div>\n            <div class=\"doc-actions\">\n              <el-tooltip content=\"编辑\" placement=\"top\">\n                <el-button link circle size=\"small\" @click.stop=\"openDocument(doc)\">\n                  <el-icon><EditPen /></el-icon>\n                </el-button>\n              </el-tooltip>\n              <el-tooltip content=\"分享\" placement=\"top\">\n                <el-button link circle size=\"small\" @click.stop=\"shareDocument(doc)\">\n                  <el-icon><Share /></el-icon>\n                </el-button>\n              </el-tooltip>\n              </div>\n                </div>\n        </el-card>\n        \n        <!-- 创建新文档卡片 -->\n        <div class=\"doc-card new-doc-card\" @click=\"createNewDocument\">\n          <div class=\"new-doc-content\">\n            <el-icon><Plus /></el-icon>\n            <span>新建文档</span>\n          </div>\n        </div>\n      </div>\n      \n      <div v-if=\"recentDocuments.length === 0\" class=\"empty-state\">\n        <!-- 移除暂无最近编辑文档的显示 -->\n    </div>\n  </div>\n\n    <!-- 创建新文档对话框 -->\n  <el-dialog\n      v-model=\"newDocumentDialogVisible\"\n      title=\"新建智能文档\"\n      width=\"35%\"\n    >\n      <el-tabs v-model=\"documentCreateType\">\n        <el-tab-pane label=\"空白文档\" name=\"blank\">\n          <el-form \n            :model=\"newDocumentForm\" \n            label-width=\"80px\" \n            class=\"mt-4\"\n            :rules=\"blankFormRules\"\n            ref=\"blankFormRef\"\n          >\n            <el-form-item label=\"文档标题\" prop=\"title\">\n              <el-input v-model=\"newDocumentForm.title\" placeholder=\"请输入文档标题\" />\n      </el-form-item>\n            <el-form-item label=\"文档类型\">\n              <el-input v-model=\"newDocumentForm.type\" placeholder=\"请输入文档类型\" />\n              <div class=\"form-tip\">如果未填写，默认为通用类型</div>\n            </el-form-item>\n          </el-form>\n        </el-tab-pane>\n        <el-tab-pane label=\"AI生成文档\" name=\"ai\">\n          <el-form \n            :model=\"aiDocumentForm\" \n            label-width=\"80px\" \n            class=\"mt-4\"\n            :rules=\"aiFormRules\"\n            ref=\"aiFormRef\"\n          >\n            <el-form-item label=\"文档主题\" prop=\"title\">\n              <el-input v-model=\"aiDocumentForm.title\" placeholder=\"简短描述文档主题，如：项目周报\" />\n            </el-form-item>\n            <el-form-item label=\"文档要求\" prop=\"requirements\">\n        <el-input\n                v-model=\"aiDocumentForm.requirements\" \n          type=\"textarea\"\n                :rows=\"3\" \n                placeholder=\"详细描述您需要的文档内容和要求\"\n        />\n              <div class=\"form-tip\">人工智能会根据您的描述生成文档内容</div>\n      </el-form-item>\n    </el-form>\n        </el-tab-pane>\n      </el-tabs>\n    <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"newDocumentDialogVisible = false\">取消</el-button>\n          <el-button type=\"primary\" @click=\"submitNewDocument\" :loading=\"createLoading\">\n            创建\n          </el-button>\n        </span>\n      </template>\n    </el-dialog>\n    \n    <!-- 分享文档对话框 -->\n    <el-dialog\n      v-model=\"shareDialogVisible\"\n      title=\"分享文档\"\n      width=\"30%\"\n    >\n      <div v-if=\"selectedDocument\">\n        <p>您即将分享文档: <strong>{{ selectedDocument.title }}</strong></p>\n        <el-form label-width=\"120px\" class=\"mt-4\">\n          <el-form-item label=\"选择用户\">\n            <el-select\n              v-model=\"selectedUsers\"\n              multiple\n              placeholder=\"请选择用户\"\n              style=\"width: 100%\"\n            >\n              <el-option\n                v-for=\"user in availableUsers\"\n                :key=\"user.id\"\n                :label=\"user.username\"\n                :value=\"user.id\"\n              />\n            </el-select>\n          </el-form-item>\n        </el-form>\n      </div>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"shareDialogVisible = false\">取消</el-button>\n          <el-button type=\"primary\" @click=\"confirmShare\" :loading=\"shareLoading\">\n            分享\n          </el-button>\n        </span>\n    </template>\n  </el-dialog>\n    \n    <!-- 删除确认对话框 -->\n    <el-dialog\n      v-model=\"deleteDialogVisible\"\n      title=\"删除文档\"\n      width=\"30%\"\n    >\n      <div v-if=\"selectedDocument\">\n        <p>您确定要删除文档 <strong>{{ selectedDocument.title }}</strong> 吗?</p>\n        <p class=\"warning-text\">此操作不可撤销!</p>\n  </div>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"deleteDialogVisible = false\">取消</el-button>\n          <el-button type=\"danger\" @click=\"confirmDelete\" :loading=\"deleteLoading\">\n            删除\n          </el-button>\n        </span>\n      </template>\n    </el-dialog>\n    \n    <!-- 分类管理对话框 -->\n    <el-dialog\n      v-model=\"categoryDialogVisible\"\n      title=\"管理文档分类\"\n      width=\"40%\"\n    >\n      <div class=\"category-management\">\n        <div class=\"category-list\">\n          <h4>当前类型</h4>\n          <el-table :data=\"documentCategories\" style=\"width: 100%\">\n            <el-table-column prop=\"name\" label=\"类型名称\" />\n            <el-table-column label=\"颜色\" width=\"120\">\n              <template #default=\"scope\">\n                <div class=\"color-preview\" :style=\"{ backgroundColor: scope.row.color }\"></div>\n                {{ scope.row.color }}\n              </template>\n            </el-table-column>\n            <el-table-column label=\"文档数\" width=\"100\">\n              <template #default=\"scope\">\n                {{ scope.row.document_count || 0 }}\n              </template>\n            </el-table-column>\n            <el-table-column label=\"操作\" width=\"150\">\n              <template #default=\"scope\">\n                <el-button type=\"primary\" link @click=\"editCategory(scope.row)\">编辑</el-button>\n                <el-button \n                  type=\"danger\" \n                  link \n                  @click=\"deleteCategory(scope.row)\"\n                  :disabled=\"scope.row.document_count > 0\"\n                >删除</el-button>\n              </template>\n            </el-table-column>\n          </el-table>\n        </div>\n        \n        <el-divider />\n        \n        <div class=\"category-form\">\n          <h4>{{ editingCategory.id ? '编辑分类' : '新增分类' }}</h4>\n          <el-form \n            :model=\"editingCategory\" \n            :rules=\"categoryFormRules\" \n            label-width=\"80px\"\n            ref=\"categoryFormRef\"\n          >\n            <el-form-item label=\"分类名称\" prop=\"name\">\n              <el-input v-model=\"editingCategory.name\" placeholder=\"输入分类名称\" />\n            </el-form-item>\n            <el-form-item label=\"分类颜色\" prop=\"color\">\n              <el-color-picker v-model=\"editingCategory.color\" />\n              <span class=\"color-value\">{{ editingCategory.color }}</span>\n            </el-form-item>\n            <el-form-item label=\"描述\">\n              <el-input \n                v-model=\"editingCategory.description\" \n                type=\"textarea\" \n                :rows=\"3\" \n                placeholder=\"输入分类描述（可选）\" \n              />\n            </el-form-item>\n            <el-form-item>\n              <el-button type=\"primary\" @click=\"submitCategory\" :loading=\"categoryLoading\">\n                {{ editingCategory.id ? '更新' : '创建' }}\n              </el-button>\n              <el-button @click=\"resetCategoryForm\">重置</el-button>\n            </el-form-item>\n          </el-form>\n        </div>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { ref, computed, onMounted, nextTick, getCurrentInstance, provide, onActivated, watch } from 'vue'\nimport { useRouter, useRoute } from 'vue-router'\nimport { ElMessage, ElMessageBox } from 'element-plus'\nimport { Search, Plus, EditPen, Share, Folder, Close, More, Document } from '@element-plus/icons-vue'\nimport _ from 'lodash'\nimport { \n  getDocuments,\n  getRecentDocuments,\n  getSharedDocuments,\n  getDocumentCategories,\n  createDocument,\n  deleteDocument as apiDeleteDocument,\n  shareDocument as apiShareDocument,\n  createDocumentCategory,\n  updateDocumentCategory,\n  deleteDocumentCategory,\n  aiGenerateDocument\n} from '@/api/smartdoc'\n\nexport default {\n  name: 'SmartDocHome',\n  components: {\n    Search,\n    Plus,\n    EditPen,\n    Share,\n    Folder,\n    Close,\n    More,\n    Document\n  },\n  setup() {\n    const router = useRouter()\n    const route = useRoute()\n    const { proxy } = getCurrentInstance() // 获取组件实例\n    \n    // 刷新触发器，用于强制组件刷新\n    const refreshTrigger = ref(Date.now())\n    \n    // 状态数据\n    const documents = ref([])\n    const recentDocuments = ref([])\n    const sharedDocuments = ref([])\n    const documentCategories = ref([])\n    const searchQuery = ref('')\n    const searchCategory = ref('all')\n    const newDocumentDialogVisible = ref(false)\n    const shareDialogVisible = ref(false)\n    const deleteDialogVisible = ref(false)\n    const documentCreateType = ref('blank')\n    const selectedDocument = ref(null)\n    const selectedUsers = ref([])\n    const availableUsers = ref([])\n    const createLoading = ref(false)\n    const shareLoading = ref(false)\n    const deleteLoading = ref(false)\n    \n    // 新增分页相关状态\n    const page = ref(1)\n    const pageSize = 10\n    const hasMore = ref(true)\n    const totalCount = ref(0)\n    \n    // 表单数据\n    const newDocumentForm = ref({\n        title: '',\n        type: ''\n    })\n    \n    const aiDocumentForm = ref({\n        title: '',\n      requirements: ''\n    })\n    \n    // 表单校验规则\n    const blankFormRules = {\n        title: [\n        { required: true, message: '请输入文档标题', trigger: 'blur' },\n        { min: 2, max: 50, message: '长度在 2 到 50 个字符', trigger: 'blur' }\n        ]\n    }\n    \n    const aiFormRules = {\n        title: [\n        { required: true, message: '请输入文档主题', trigger: 'blur' },\n        { min: 2, max: 50, message: '长度在 2 到 50 个字符', trigger: 'blur' }\n        ],\n        requirements: [\n        { required: true, message: '请输入文档要求', trigger: 'blur' },\n        { min: 10, max: 500, message: '长度在 10 到 500 个字符', trigger: 'blur' }\n      ]\n    }\n    \n    const blankFormRef = ref(null)\n    const aiFormRef = ref(null)\n    \n    // 计算属性\n    const totalDocuments = computed(() => documents.value.length)\n    const recentEditCount = computed(() => recentDocuments.value.length)\n    \n    // 分类管理相关状态\n    const categoryDialogVisible = ref(false)\n    const editingCategory = ref({\n      name: '',\n      color: '#409EFF',\n      description: '',\n    })\n    const categoryFormRef = ref(null)\n    const categoryLoading = ref(false)\n    const categoryFormRules = {\n      name: [\n        { required: true, message: '请输入类型名称', trigger: 'blur' },\n        { min: 2, max: 20, message: '长度在2到20个字符', trigger: 'blur' }\n      ],\n      color: [\n        { required: true, message: '请选择颜色', trigger: 'change' }\n      ]\n    }\n    \n    // 辅助方法：强制刷新视图\n    const forceUpdate = async () => {\n      // 创建临时数据，触发深度响应式更新\n      documents.value = [...documents.value];\n      recentDocuments.value = [...recentDocuments.value]; \n      sharedDocuments.value = [...sharedDocuments.value];\n      \n      // 使用Vue实例的$forceUpdate方法\n      if (proxy && proxy.$forceUpdate) {\n        proxy.$forceUpdate();\n      }\n      \n      // 等待DOM更新\n      await nextTick();\n    };\n    \n    // 方法\n    const fetchDocuments = async (forceRefresh = false, append = false) => {\n      if (forceRefresh) {\n        page.value = 1\n        hasMore.value = true\n      }\n      if (!hasMore.value && !forceRefresh) return\n      createLoading.value = true\n      try {\n        const params = {\n          page: page.value,\n          limit: pageSize\n        }\n        if (searchCategory.value && searchCategory.value !== 'all') {\n          params.category = searchCategory.value\n        }\n        if (searchQuery.value) {\n          params.search = searchQuery.value\n        }\n        if (forceRefresh) {\n          params._t = new Date().getTime()\n        }\n        const res = await getDocuments(params)\n        if (res && res.data) {\n          // 兼容分页和非分页格式\n          let list = Array.isArray(res.data) ? res.data : (res.data.results || res.data)\n          let total = res.data.total || res.data.count || list.length\n          if (append) {\n            documents.value = [...documents.value, ...list]\n          } else {\n            documents.value = [...list]\n          }\n          totalCount.value = total\n          // 判断是否还有更多\n          if (documents.value.length >= total) {\n            hasMore.value = false\n          } else {\n            hasMore.value = true\n          }\n        } else {\n          documents.value = []\n          hasMore.value = false\n        }\n      } catch (error) {\n        documents.value = []\n        hasMore.value = false\n      } finally {\n        createLoading.value = false\n      }\n    }\n    \n    const fetchRecentDocuments = async (forceRefresh = false) => {\n      console.log('开始获取最近文档...');\n      try {\n        // 准备参数，如果强制刷新添加时间戳\n        const params = forceRefresh ? { _t: new Date().getTime() } : {};\n        \n        const res = await getRecentDocuments(params);\n        console.log('最近文档API响应:', res);\n        \n        if (res && res.data) {\n          // 完全替换数组而不是修改引用\n          recentDocuments.value = Array.isArray(res.data) ? [...res.data] : [];\n          console.log(`设置最近文档: ${recentDocuments.value.length}条记录`);\n        } else {\n          console.warn('API返回的最近文档数据无效:', res);\n          recentDocuments.value = [];\n        }\n      } catch (error) {\n        console.error('获取最近文档失败:', error);\n        ElMessage.error('获取最近文档失败');\n        recentDocuments.value = [];\n      }\n    }\n    \n    const fetchSharedDocuments = async () => {\n      try {\n        const response = await getSharedDocuments()\n        sharedDocuments.value = response.data\n      } catch (error) {\n        console.error('获取共享文档失败', error)\n        ElMessage.error('获取共享文档失败')\n      }\n    }\n    \n    const fetchDocumentCategories = async (retryCount = 0) => {\n      console.log('开始获取文档分类...');\n      try {\n        const res = await getDocumentCategories();\n        console.log('文档分类API响应:', res);\n        \n        if (res && res.data) {\n          documentCategories.value = res.data;\n          console.log(`设置文档分类: ${documentCategories.value.length}条记录, 数据:`, documentCategories.value);\n        } else {\n          console.warn('API返回的文档分类数据无效:', res);\n          documentCategories.value = [];\n          \n          // 如果返回空数据且未达到最大重试次数，尝试重试\n          if (documentCategories.value.length === 0 && retryCount < 2) {\n            console.log(`文档分类数据为空，${retryCount + 1}秒后重试...`);\n            setTimeout(() => fetchDocumentCategories(retryCount + 1), (retryCount + 1) * 1000);\n          }\n        }\n      } catch (error) {\n        console.error('获取文档分类失败:', error);\n        \n        // 如果是服务器错误且未达到最大重试次数，尝试重试\n        if (error.response && error.response.status >= 500 && retryCount < 2) {\n          console.log(`服务器错误，${retryCount + 1}秒后重试...`);\n          setTimeout(() => fetchDocumentCategories(retryCount + 1), (retryCount + 1) * 1000);\n        } else {\n          ElMessage.error('获取文档分类失败，请刷新页面重试');\n          // 初始化空数组\n          documentCategories.value = [];\n        }\n      }\n    }\n    \n    // 防抖搜索\n    const debouncedSearch = _.debounce(async () => {\n      page.value = 1\n      hasMore.value = true\n      await fetchDocuments(true)\n    }, 500)\n    \n    const createNewDocument = () => {\n      // 重置表单\n      newDocumentForm.value = { title: '', type: '' }\n      aiDocumentForm.value = { title: '', requirements: '' }\n      documentCreateType.value = 'blank'\n      newDocumentDialogVisible.value = true\n      \n      // 监听对话框关闭事件，清理表单\n      nextTick(() => {\n        try {\n          const dialog = document.querySelector('.el-dialog');\n          if (dialog) {\n            dialog.addEventListener('closed', () => {\n              try {\n                if (blankFormRef.value) {\n                  blankFormRef.value.clearValidate();\n                }\n                if (aiFormRef.value) {\n                  aiFormRef.value.clearValidate();\n                }\n              } catch (err) {\n                console.error('Error clearing form validation:', err);\n              }\n            }, { once: true });\n          }\n        } catch (err) {\n          console.error('Error setting up dialog event listener:', err);\n        }\n      });\n    }\n    \n    const submitNewDocument = async () => {\n      if (documentCreateType.value === 'blank') {\n        if (!blankFormRef.value) {\n          console.warn('表单引用不存在');\n          return;\n        }\n        \n        try {\n          const valid = await blankFormRef.value.validate()\n            .catch(err => {\n              console.error('表单验证失败:', err);\n              return false;\n            });\n          \n          if (valid) {\n            createLoading.value = true;\n            try {\n              console.log('开始创建文档:', {\n                title: newDocumentForm.value.title,\n                type: newDocumentForm.value.type || '通用'\n              });\n              \n              const response = await createDocument({ \n                title: newDocumentForm.value.title,\n                type: newDocumentForm.value.type || '通用',\n                content: ''\n              });\n              \n              console.log('创建文档响应数据：', JSON.stringify(response));\n              \n              // 关闭对话框\n              newDocumentDialogVisible.value = false;\n              ElMessage.success('文档创建成功');\n              \n              // 解析返回的文档ID\n              let docId = null;\n              if (response && response.data) {\n                if (response.data.id) {\n                  docId = response.data.id;\n                } else if (Array.isArray(response.data) && response.data.length > 0) {\n                  docId = response.data[0].id;\n                } else if (response.data.results && Array.isArray(response.data.results) && response.data.results.length > 0) {\n                  docId = response.data.results[0].id;\n                }\n              }\n              \n              // 等待对话框关闭完成后再执行跳转，避免DOM错误\n              setTimeout(() => {\n                if (docId) {\n                  console.log(`准备跳转到文档详情页，ID: ${docId}`);\n                  \n                  // 先刷新文档列表，确保数据是最新的\n                  fetchDocuments();\n                  fetchRecentDocuments();\n                  \n                  // 然后再执行导航\n                  setTimeout(() => {\n                    router.push({\n                      name: 'SmartDocDetail',\n                      params: { id: docId }\n                    }).then(() => {\n                      createLoading.value = false;\n                    }).catch(err => {\n                      console.error('路由导航失败:', err);\n                      ElMessage.error('跳转文档详情页失败，请手动刷新页面');\n                      // 尝试路径跳转\n                      router.push(`/smartdoc/${docId}`).catch(navErr => {\n                        console.error('路径导航也失败:', navErr);\n                        ElMessage.error('路径跳转详情页也失败');\n                      });\n                      createLoading.value = false;\n                    });\n                  }, 300);\n                } else {\n                  console.warn('创建文档成功，但返回的数据格式不正确', response);\n                  // 刷新文档列表\n                  fetchDocuments();\n                  fetchRecentDocuments();\n                }\n              }, 100);\n            } catch (error) {\n              console.error('创建文档失败', error);\n              ElMessage.error('创建文档失败');\n            } finally {\n              createLoading.value = false;\n            }\n          }\n        } catch (error) {\n          console.error('提交表单时发生错误:', error);\n          ElMessage.error('表单提交失败');\n          createLoading.value = false;\n        }\n      } else if (documentCreateType.value === 'ai') {\n        if (!aiFormRef.value) {\n          console.warn('AI表单引用不存在');\n          return;\n        }\n        \n        try {\n          const valid = await aiFormRef.value.validate()\n            .catch(err => {\n              console.error('AI表单验证失败:', err);\n              return false;\n            });\n          \n          if (valid) {\n            createLoading.value = true;\n            try {\n              // 调用AI生成文档API\n              const categoryId = searchCategory.value !== 'all' ? searchCategory.value : null;\n              const response = await aiGenerateDocument({\n                title: aiDocumentForm.value.title,\n                requirement: aiDocumentForm.value.requirements,\n                category_id: categoryId,\n                doc_type: 'AI'\n              });\n              console.log('AI生成文档响应数据：', response);\n              // 检查超时\n              if (response && response.status === 504) {\n                ElMessage.error(response.data?.detail || 'AI生成超时，请简化需求或稍后重试');\n                createLoading.value = false;\n                return;\n              }\n              if (response && response.data && typeof response.data.detail === 'string' && response.data.detail.includes('超时')) {\n                ElMessage.error(response.data.detail);\n                createLoading.value = false;\n                return;\n              }\n              newDocumentDialogVisible.value = false;\n              ElMessage.success('AI生成文档成功');\n              let docId = null;\n              if (response && response.data && response.data.id) {\n                docId = response.data.id;\n              }\n              if (docId) {\n                // 跳转前打印日志\n                console.log('准备跳转到文档详情页，路由名: SmartDocDetail, id:', docId);\n                router.push({\n                  name: 'SmartDocDetail',\n                  params: { id: String(docId) }\n                }).then(() => {\n                  createLoading.value = false;\n                }).catch(err => {\n                  console.error('路由导航失败:', err);\n                  ElMessage.error('跳转文档详情页失败，请手动刷新页面');\n                  // 尝试路径跳转\n                  router.push(`/smartdoc/${docId}`).catch(navErr => {\n                    console.error('路径导航也失败:', navErr);\n                    ElMessage.error('路径跳转详情页也失败');\n                  });\n                  createLoading.value = false;\n                });\n                // 异步刷新数据\n                fetchDocuments();\n                fetchRecentDocuments();\n              } else {\n                fetchDocuments();\n                fetchRecentDocuments();\n                createLoading.value = false;\n              }\n            } catch (error) {\n              console.error('AI生成文档失败', error);\n              ElMessage.error('AI生成文档失败');\n            } finally {\n              createLoading.value = false;\n            }\n          }\n        } catch (error) {\n          console.error('提交AI表单时发生错误:', error);\n          ElMessage.error('表单提交失败');\n          createLoading.value = false;\n        }\n      }\n    }\n    \n    const openDocument = (doc) => {\n      router.push({ name: 'SmartDocDetail', params: { id: doc.id } })\n    }\n    \n    const renameDocument = (doc) => {\n      ElMessageBox.prompt('请输入新文档名称', '重命名文档', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        inputValue: doc.title,\n        inputValidator: (value) => {\n          if (!value) {\n            return '文档名称不能为空'\n          }\n          return true\n        }\n      }).then(({ value }) => {\n        // 此处应该调用更新文档API\n        ElMessage.info(`重命名文档为: ${value}`)\n      }).catch(() => {})\n    }\n    \n    const duplicateDocument = (doc) => {\n      ElMessage.info(`复制文档: ${doc.title}`)\n    }\n    \n    const shareDocument = (doc) => {\n      selectedDocument.value = doc\n      // 在实际项目中，这里应该从API获取可用用户列表\n      availableUsers.value = [\n        { id: 1, username: '张三' },\n        { id: 2, username: '李四' },\n        { id: 3, username: '王五' }\n      ]\n      selectedUsers.value = []\n      shareDialogVisible.value = true\n    }\n    \n    const confirmShare = async () => {\n      if (!selectedDocument.value || selectedUsers.value.length === 0) {\n        ElMessage.warning('请选择至少一个用户')\n        return\n      }\n      \n      shareLoading.value = true\n      try {\n        await apiShareDocument(selectedDocument.value.id, selectedUsers.value)\n        ElMessage.success('文档分享成功')\n        shareDialogVisible.value = false\n        fetchSharedDocuments()\n      } catch (error) {\n        console.error('分享文档失败', error)\n        ElMessage.error('分享文档失败')\n      } finally {\n        shareLoading.value = false\n      }\n    }\n    \n    const deleteDocument = (doc) => {\n      selectedDocument.value = doc\n      deleteDialogVisible.value = true\n    }\n    \n    const confirmDelete = async () => {\n      if (!selectedDocument.value) return\n      \n      deleteLoading.value = true\n      try {\n        // 记录要删除的文档ID和类别\n        const deletedDocId = selectedDocument.value.id;\n        const deletedDocCategoryId = selectedDocument.value.category?.id;\n        \n        // 先关闭对话框，提高用户体验\n        deleteDialogVisible.value = false;\n        \n        // 执行删除操作\n        await apiDeleteDocument(deletedDocId)\n        ElMessage.success('文档删除成功')\n        \n        // 强制清除选中的文档\n        selectedDocument.value = null;\n        \n        // 清除可能的缓存数据\n        if (window.localStorage) {\n          try {\n            // 移除可能存在的相关缓存\n            localStorage.removeItem(`doc_cache_${deletedDocId}`);\n            localStorage.removeItem(`recent_docs_cache`);\n            localStorage.removeItem(`doc_list_cache`);\n          } catch (e) {\n            console.error('清除本地缓存失败:', e);\n          }\n        }\n        \n        // 更新刷新触发器\n        refreshTrigger.value = Date.now();\n        \n        // 使用新数组替换原数组，确保Vue能检测到变化 \n        documents.value = [...documents.value.filter(doc => doc.id !== deletedDocId)];\n        recentDocuments.value = [...recentDocuments.value.filter(doc => doc.id !== deletedDocId)];\n        sharedDocuments.value = [...sharedDocuments.value.filter(doc => doc.id !== deletedDocId)];\n        \n        // 强制更新视图\n        await forceUpdate();\n        \n        // 更新分类中的文档计数\n        if (deletedDocCategoryId) {\n          const category = documentCategories.value.find(c => c.id === deletedDocCategoryId);\n          if (category && category.document_count > 0) {\n            category.document_count--;\n          }\n        }\n        \n        // 等待DOM更新\n        await nextTick();\n        \n        // 重新导航到文档首页，确保状态全部刷新\n        if (router.currentRoute.value.name === 'SmartDocDetail') {\n          console.log('从详情页删除文档，重新导航到文档首页');\n          \n          // 先强制刷新数据，确保导航后数据是最新的\n          await reloadAllData();\n          \n          // 使用replace模式跳转，不留下历史记录，并添加强制刷新参数\n          router.replace({ \n            name: 'SmartDoc',\n            query: { _refresh: Date.now() } // 添加时间戳参数防止缓存\n          });\n        } else {\n          // 如果已经在文档首页，立即重载数据并强制刷新页面\n          await refreshData();\n        }\n      } catch (error) {\n        console.error('删除文档失败', error);\n        ElMessage.error('删除文档失败');\n        // 如果删除失败，关闭对话框\n        deleteDialogVisible.value = false;\n      } finally {\n        deleteLoading.value = false;\n      }\n    }\n    \n    const viewAllDocuments = (type) => {\n      if (type === 'recent') {\n        // 路由中没有SmartDocList，直接跳转到智能文档首页并滚动到文档列表\n        router.push({ name: 'SmartDoc' }).then(() => {\n          setTimeout(() => {\n            const docSection = document.querySelector('.section');\n            if (docSection) {\n              docSection.scrollIntoView({ behavior: 'smooth' });\n            }\n          }, 300);\n        });\n      }\n    }\n    \n    const selectCategory = (category) => {\n      console.log('选择分类:', category);\n      \n      // 如果选择当前已激活的分类，不做操作\n      let categoryId;\n      if (typeof category === 'string') {\n        categoryId = category;\n      } else if (typeof category === 'object' && category !== null) {\n        categoryId = category.id.toString();\n      }\n      \n      // 如果点击当前已选中的分类，则重置为\"全部\"\n      if (searchCategory.value === categoryId && categoryId !== 'all') {\n        searchCategory.value = 'all';\n      } else {\n        searchCategory.value = categoryId;\n      }\n      \n      // 添加动画效果\n      documents.value = [];\n      createLoading.value = true;\n      \n      // 延迟获取，实现过渡效果\n      setTimeout(async () => {\n        await fetchDocuments();\n        createLoading.value = false;\n        \n        // 删除自动滚动逻辑，避免页面自动跳转\n        \n        // 触发一个简单的动画效果，突出显示已筛选的文档\n        const docCards = document.querySelectorAll('.doc-card');\n        if (docCards && docCards.length > 0) {\n          docCards.forEach((card, index) => {\n            if (card) {\n              card.style.animationDelay = `${index * 50}ms`;\n              card.classList.remove('fadeIn');\n              setTimeout(() => {\n                if (card) {\n                  card.classList.add('fadeIn');\n                }\n              }, 10);\n            }\n          });\n        }\n      }, 300);\n    };\n\n    // 获取选中分类的颜色\n    const getSelectedCategoryColor = () => {\n      if (searchCategory.value === 'all') return '#409EFF';\n      const selectedCategory = documentCategories.value.find(c => c.id.toString() === searchCategory.value);\n      return selectedCategory?.color || '#67C23A';\n    };\n\n    // 获取选中分类的名称\n    const getSelectedCategoryName = () => {\n      if (searchCategory.value === 'all') return '全部文档';\n      const selectedCategory = documentCategories.value.find(c => c.id.toString() === searchCategory.value);\n      return selectedCategory?.name || '未知分类';\n    };\n    \n    const manageCategories = () => {\n      categoryDialogVisible.value = true\n      resetCategoryForm()\n    }\n    \n    const editCategory = (category) => {\n      editingCategory.value = { ...category }\n    }\n    \n    const resetCategoryForm = () => {\n      editingCategory.value = {\n        id: '',\n        name: '',\n        color: '#409EFF',\n        description: ''\n      }\n      if (categoryFormRef.value) {\n        categoryFormRef.value.resetFields()\n      }\n    }\n    \n    const submitCategory = async () => {\n      if (!categoryFormRef.value) return\n      \n      await categoryFormRef.value.validate(async (valid) => {\n        if (valid) {\n          categoryLoading.value = true\n          try {\n            const categoryData = {\n              name: editingCategory.value.name,\n              color: editingCategory.value.color,\n              description: editingCategory.value.description || ''\n            }\n            \n            if (editingCategory.value.id) {\n              // 更新分类\n              await updateDocumentCategory(editingCategory.value.id, categoryData)\n              ElMessage.success('分类更新成功')\n            } else {\n              // 创建分类\n              await createDocumentCategory(categoryData)\n              ElMessage.success('分类创建成功')\n            }\n            \n            // 重新获取分类列表\n            fetchDocumentCategories()\n            resetCategoryForm()\n          } catch (error) {\n            console.error('保存分类失败:', error)\n            ElMessage.error('保存分类失败')\n          } finally {\n            categoryLoading.value = false\n          }\n        }\n      })\n    }\n    \n    const deleteCategory = (category) => {\n      if (category.document_count > 0) {\n        ElMessage.warning('该分类下有文档，无法删除')\n        return\n      }\n      \n      ElMessageBox.confirm(\n        `确定要删除分类\"${category.name}\"吗？`,\n        '删除分类',\n        {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }\n      ).then(async () => {\n        try {\n          await deleteDocumentCategory(category.id)\n          ElMessage.success('分类删除成功')\n          fetchDocumentCategories()\n        } catch (error) {\n          console.error('删除分类失败:', error)\n          ElMessage.error('删除分类失败')\n        }\n      }).catch(() => {})\n    }\n    \n    const formatDate = (dateString) => {\n      const date = new Date(dateString)\n      const now = new Date()\n      \n      // 同一天显示时间\n      if (date.toDateString() === now.toDateString()) {\n        return date.toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' })\n      }\n      \n      // 昨天\n      const yesterday = new Date(now)\n      yesterday.setDate(now.getDate() - 1)\n      if (date.toDateString() === yesterday.toDateString()) {\n        return '昨天'\n      }\n      \n      // 一周内显示星期\n      const weekDays = ['周日', '周一', '周二', '周三', '周四', '周五', '周六']\n      const diffDays = Math.round((now - date) / (1000 * 60 * 60 * 24))\n      if (diffDays < 7) {\n        return weekDays[date.getDay()]\n      }\n      \n      // 其他情况显示日期\n      return date.toLocaleDateString('zh-CN', { month: 'numeric', day: 'numeric' })\n    }\n    \n    const resetCategoryFilter = () => {\n      searchCategory.value = 'all'\n      page.value = 1\n      hasMore.value = true\n      fetchDocuments(true)\n    }\n    \n    // 添加页面激活钩子，确保从其他页面返回时重新获取数据\n    onActivated(() => {\n      console.log('SmartDoc组件被激活，重新获取数据');\n      reloadAllData();\n    });\n\n    // 页面激活后重新加载所有数据的函数\n    const reloadAllData = async () => {\n      page.value = 1\n      hasMore.value = true\n      try {\n        console.log('重新加载所有文档数据...');\n        createLoading.value = true;\n        await Promise.all([\n          fetchDocuments(true),\n          fetchRecentDocuments(true),\n          fetchSharedDocuments(),\n          fetchDocumentCategories()\n        ]);\n        console.log('数据重新加载完成');\n        await forceUpdate();\n      } catch (error) {\n        console.error('数据重新加载失败:', error);\n      } finally {\n        createLoading.value = false;\n      }\n    };\n\n    // 提供重载函数给子组件或父组件使用\n    provide('reloadDocuments', reloadAllData);\n    \n    // 监听路由变化，强制刷新数据\n    watch(() => route.query._refresh, (newVal) => {\n      if (newVal) {\n        console.log('检测到路由刷新参数:', newVal);\n        refreshTrigger.value = Date.now();\n        reloadAllData();\n      }\n    });\n\n    // 监听路由参数，处理不同情况\n    watch(() => route.path, (newPath, oldPath) => {\n      console.log('路由变化:', oldPath, '->', newPath);\n      if (newPath === '/smartdoc' && oldPath && oldPath.startsWith('/smartdoc/')) {\n        // 从文档详情页返回文档列表页，强制刷新\n        console.log('从详情页返回列表页，强制刷新数据');\n        refreshTrigger.value = Date.now();\n        reloadAllData();\n      }\n    });\n\n    // 手动强制刷新方法\n    const refreshData = async () => {\n      page.value = 1\n      hasMore.value = true\n      await reloadAllData()\n      if (proxy && proxy.$forceUpdate) {\n        proxy.$forceUpdate()\n      }\n    }\n\n    // 新增查看更多方法\n    const loadMoreDocuments = async () => {\n      page.value += 1\n      await fetchDocuments(false, true)\n    }\n\n    // 生命周期钩子\n    onMounted(() => {\n      console.log('SmartDoc组件mounted，加载数据');\n      reloadAllData(); // 使用统一的数据加载函数\n    })\n    \n    return {\n      documents,\n      recentDocuments,\n      sharedDocuments,\n      documentCategories,\n      searchQuery,\n      searchCategory,\n      debouncedSearch,\n      totalDocuments,\n      recentEditCount,\n      newDocumentDialogVisible,\n      shareDialogVisible,\n      deleteDialogVisible,\n      documentCreateType,\n      newDocumentForm,\n      aiDocumentForm,\n      blankFormRules,\n      aiFormRules,\n      blankFormRef,\n      aiFormRef,\n      selectedDocument,\n      selectedUsers,\n      availableUsers,\n      createLoading,\n      shareLoading,\n      deleteLoading,\n      createNewDocument,\n      submitNewDocument,\n      openDocument,\n      renameDocument,\n      duplicateDocument,\n      shareDocument,\n      confirmShare,\n      deleteDocument,\n      confirmDelete,\n      viewAllDocuments,\n      formatDate,\n      categoryDialogVisible,\n      editingCategory,\n      categoryFormRef,\n      categoryLoading,\n      categoryFormRules,\n      editCategory,\n      resetCategoryForm,\n      submitCategory,\n      deleteCategory,\n      resetCategoryFilter,\n      selectCategory,\n      getSelectedCategoryColor,\n      getSelectedCategoryName,\n      manageCategories,\n      reloadAllData,\n      refreshData,\n      refreshTrigger,\n      hasMore,\n      loadMoreDocuments\n    }\n  }\n}\n</script>\n\n<style scoped>\n.smartdoc-home-container {\n  padding: 24px;\n  max-width: 1280px;\n  margin: 0 auto;\n}\n\n/* 页面标题和操作区 */\n.page-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 24px;\n}\n\n.page-title {\n  font-size: 24px;\n  font-weight: 600;\n  margin: 0;\n  color: #303133;\n}\n\n.page-description {\n  margin: 4px 0 0 0;\n  color: #606266;\n  font-size: 14px;\n}\n\n.right-section {\n  display: flex;\n  gap: 16px;\n  align-items: center;\n}\n\n.search-controls {\n  display: flex;\n  gap: 16px;\n  align-items: center;\n}\n\n.search-input {\n  width: 240px;\n}\n\n/* 统计卡片 */\n.stats-cards {\n  display: flex;\n  gap: 16px;\n  margin-bottom: 24px;\n}\n\n.stat-card {\n  flex: 1;\n  min-width: 0;\n}\n\n.stat-content {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n}\n\n.stat-icon {\n  width: 48px;\n  height: 48px;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 24px;\n  color: white;\n}\n\n.doc-icon {\n  background-color: #409EFF;\n}\n\n.edit-icon {\n  background-color: #67C23A;\n}\n\n.share-icon {\n  background-color: #E6A23C;\n}\n\n.stat-info {\n  display: flex;\n  flex-direction: column;\n}\n\n.stat-value {\n  font-size: 24px;\n  font-weight: 600;\n  color: #303133;\n}\n\n.stat-label {\n  font-size: 14px;\n  color: #909399;\n}\n\n/* 区域通用样式 */\n.section {\n  margin-bottom: 32px;\n}\n\n/* 分类区域特殊样式 */\n.category-section {\n  margin-bottom: 16px;\n}\n\n.section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n}\n\n.section-header h3 {\n  font-size: 18px;\n  font-weight: 600;\n  margin: 0;\n  color: #303133;\n}\n\n.section-actions {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.filter-tag {\n  background-color: #f0f2f5;\n  padding: 4px 8px;\n  border-radius: 4px;\n  font-size: 13px;\n  color: #606266;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n/* 文档卡片 */\n.document-cards {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n  gap: 20px;\n  margin-bottom: 30px;\n}\n\n.doc-card {\n  height: 240px;\n  display: flex;\n  flex-direction: column;\n  cursor: pointer;\n  transition: all 0.3s;\n  position: relative;\n  overflow: hidden;\n}\n\n.doc-card:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n\n.doc-card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 12px;\n}\n\n.doc-info {\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  gap: 8px;\n}\n\n.doc-type-tag {\n  font-size: 12px;\n  color: #606266;\n  background-color: #f5f7fa;\n  padding: 2px 8px;\n  border-radius: 4px;\n  white-space: nowrap;\n}\n\n.doc-category-tag {\n  font-size: 12px;\n  color: white;\n  padding: 2px 8px;\n  border-radius: 4px;\n  white-space: nowrap;\n  display: inline-flex;\n  align-items: center;\n}\n\n.doc-title {\n  font-size: 16px;\n  font-weight: 500;\n  margin: 0 0 10px 0;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  color: #303133;\n}\n\n.doc-preview {\n  flex: 1;\n  font-size: 13px;\n  color: #606266;\n  overflow: hidden;\n  display: -webkit-box;\n  -webkit-line-clamp: 4;\n  -webkit-box-orient: vertical;\n  line-height: 1.5;\n  margin-bottom: 10px;\n}\n\n.doc-footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-top: 8px;\n  border-top: 1px solid #ebeef5;\n  margin-top: auto;\n}\n\n.doc-time {\n  font-size: 12px;\n  color: #909399;\n}\n\n.doc-actions {\n  display: flex;\n  gap: 4px;\n}\n\n.new-doc-card {\n  border: 1px dashed #dcdfe6;\n  background-color: #f8f9fb;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s;\n}\n\n.new-doc-card:hover {\n  border-color: #409EFF;\n  color: #409EFF;\n  background-color: #ecf5ff;\n}\n\n.new-doc-content {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  color: #909399;\n}\n\n.new-doc-content .el-icon {\n  font-size: 32px;\n}\n\n/* 分类卡片 */\n.category-cards {\n  display: flex;\n  gap: 16px;\n  overflow-x: auto;\n  padding-bottom: 8px;\n}\n\n.category-card {\n  min-width: 180px;\n  height: 80px;\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  transition: all 0.3s;\n  border-radius: 8px;\n  padding: 12px 16px;\n  border: 2px solid transparent;\n  position: relative;\n  overflow: hidden;\n  background-color: #f5f7fa;\n}\n\n.category-card:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.08);\n  background-color: #f0f5ff;\n}\n\n.category-active {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  border-color: #409EFF;\n  background-color: #ecf5ff;\n}\n\n.category-selected-indicator {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 3px;\n  background-color: #409EFF;\n  transition: all 0.3s;\n}\n\n.category-icon {\n  width: 36px;\n  height: 36px;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 18px;\n  color: white;\n  margin-right: 12px;\n  transition: all 0.3s;\n}\n\n.category-active .category-icon {\n  transform: scale(1.1);\n}\n\n.category-info {\n  display: flex;\n  flex-direction: column;\n}\n\n.category-info h4 {\n  margin: 0 0 4px 0;\n  font-size: 15px;\n  font-weight: 500;\n  color: #303133;\n  transition: all 0.3s;\n}\n\n.category-active .category-info h4 {\n  color: #409EFF;\n  font-weight: 600;\n}\n\n.category-count {\n  font-size: 12px;\n  color: #909399;\n}\n\n.mt-4 {\n  margin-top: 16px;\n}\n\n.form-tip {\n  font-size: 12px;\n  color: #909399;\n  margin-top: 4px;\n}\n\n.category-management {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.category-list {\n  margin-bottom: 20px;\n}\n\n.category-form {\n  margin-top: 20px;\n}\n\n.color-preview {\n  display: inline-block;\n  width: 20px;\n  height: 20px;\n  border-radius: 4px;\n  margin-right: 8px;\n  vertical-align: middle;\n}\n\n.color-value {\n  margin-left: 12px;\n  color: #606266;\n}\n\n.category-select {\n  width: 200px;\n}\n\n.doc-menu {\n  color: #909399;\n  cursor: pointer;\n}\n\n.filter-controls {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.empty-state {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 200px;\n}\n\n.loading-state {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 200px;\n}\n\n/* 筛选状态栏样式 */\n.filter-status-bar {\n  background-color: #ecf5ff;\n  padding: 12px 20px;\n  margin-bottom: 20px;\n  border-radius: 8px;\n  transition: all 0.3s ease;\n  animation: slideDown 0.3s ease-in-out;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);\n  border-left: 4px solid #409EFF;\n  position: relative;\n  overflow: hidden;\n}\n\n.filter-status-bar::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(135deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.3) 50%, rgba(255,255,255,0) 100%);\n  animation: shimmer 2s infinite;\n}\n\n.filter-bar-content {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: relative;\n  z-index: 1;\n}\n\n.filter-title {\n  font-size: 14px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.filter-category {\n  padding: 4px 12px;\n  border-radius: 16px;\n  color: white;\n  font-weight: 500;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.filter-actions {\n  display: flex;\n  align-items: center;\n}\n\n/* 添加文档卡片的动画效果 */\n.document-cards {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n  gap: 20px;\n  margin-bottom: 30px;\n  transition: all 0.3s;\n}\n\n.doc-card {\n  animation: fadeIn 0.4s ease-in-out;\n}\n\n.fadeIn {\n  animation: fadeIn 0.4s ease-in-out;\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes slideDown {\n  from {\n    opacity: 0;\n    transform: translateY(-10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes shimmer {\n  0% {\n    transform: translateX(-100%);\n  }\n  100% {\n    transform: translateX(100%);\n  }\n}\n</style> "],"mappings":"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","ignoreList":[]}]}