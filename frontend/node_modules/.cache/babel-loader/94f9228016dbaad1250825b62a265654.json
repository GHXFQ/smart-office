{"remainingRequest":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\project\\components\\TasksView.vue?vue&type=script&setup=true&lang=js","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\project\\components\\TasksView.vue","mtime":1749967470637},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\babel.config.js","mtime":1748077811200},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1746431219000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1746431218000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3Iuc29tZS5qcyI7CmltcG9ydCB7IGNyZWF0ZUVsZW1lbnRWTm9kZSBhcyBfY3JlYXRlRWxlbWVudFZOb2RlLCBjcmVhdGVUZXh0Vk5vZGUgYXMgX2NyZWF0ZVRleHRWTm9kZSwgcmVzb2x2ZUNvbXBvbmVudCBhcyBfcmVzb2x2ZUNvbXBvbmVudCwgd2l0aEN0eCBhcyBfd2l0aEN0eCwgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlLCByZW5kZXJMaXN0IGFzIF9yZW5kZXJMaXN0LCBGcmFnbWVudCBhcyBfRnJhZ21lbnQsIG9wZW5CbG9jayBhcyBfb3BlbkJsb2NrLCBjcmVhdGVFbGVtZW50QmxvY2sgYXMgX2NyZWF0ZUVsZW1lbnRCbG9jaywgY3JlYXRlQmxvY2sgYXMgX2NyZWF0ZUJsb2NrLCBub3JtYWxpemVDbGFzcyBhcyBfbm9ybWFsaXplQ2xhc3MsIHRvRGlzcGxheVN0cmluZyBhcyBfdG9EaXNwbGF5U3RyaW5nLCBjcmVhdGVDb21tZW50Vk5vZGUgYXMgX2NyZWF0ZUNvbW1lbnRWTm9kZSwgdW5yZWYgYXMgX3VucmVmLCB3aXRoTW9kaWZpZXJzIGFzIF93aXRoTW9kaWZpZXJzLCBUcmFuc2l0aW9uIGFzIF9UcmFuc2l0aW9uIH0gZnJvbSAidnVlIjsKY29uc3QgX2hvaXN0ZWRfMSA9IHsKICBjbGFzczogIm1vZHVsZS1jYXJkIG1vZGVybi10YXNrcyIKfTsKY29uc3QgX2hvaXN0ZWRfMiA9IHsKICBjbGFzczogIm1vZHVsZS1oZWFkZXIiCn07CmNvbnN0IF9ob2lzdGVkXzMgPSB7CiAgY2xhc3M6ICJidG4tZ3JvdXAiCn07CmNvbnN0IF9ob2lzdGVkXzQgPSB7CiAgY2xhc3M6ICJ0YXNrLWZpbHRlcnMgbW9kZXJuLWZpbHRlcnMiCn07CmNvbnN0IF9ob2lzdGVkXzUgPSB7CiAgY2xhc3M6ICJrYW5iYW4tdmlldyBtb2Rlcm4ta2FuYmFuIgp9Owpjb25zdCBfaG9pc3RlZF82ID0gewogIGNsYXNzOiAicm93Igp9Owpjb25zdCBfaG9pc3RlZF83ID0gewogIGNsYXNzOiAiY2FyZCBtb2Rlcm4tY2FyZCIKfTsKY29uc3QgX2hvaXN0ZWRfOCA9IHsKICBjbGFzczogImNhcmQtaGVhZGVyIG1vZGVybi1jYXJkLWhlYWRlciBrYW5iYW4tY29sLWhlYWRlciIKfTsKY29uc3QgX2hvaXN0ZWRfOSA9IHsKICBjbGFzczogIm1iLTAiCn07CmNvbnN0IF9ob2lzdGVkXzEwID0gewogIGNsYXNzOiAiY2FyZC1ib2R5IHRhc2stbGlzdCIKfTsKY29uc3QgX2hvaXN0ZWRfMTEgPSBbIm9uQ2xpY2siXTsKY29uc3QgX2hvaXN0ZWRfMTIgPSB7CiAgY2xhc3M6ICJ0YXNrLWhlYWRlciIKfTsKY29uc3QgX2hvaXN0ZWRfMTMgPSB7CiAgY2xhc3M6ICJtYi0wIHRhc2stdGl0bGUtbWFpbiIKfTsKY29uc3QgX2hvaXN0ZWRfMTQgPSB7CiAgY2xhc3M6ICJ0YXNrLW1ldGEtcm93Igp9Owpjb25zdCBfaG9pc3RlZF8xNSA9IHsKICBrZXk6IDAKfTsKY29uc3QgX2hvaXN0ZWRfMTYgPSB7CiAga2V5OiAxCn07CmNvbnN0IF9ob2lzdGVkXzE3ID0gewogIGNsYXNzOiAidGFzay1wcm9ncmVzcy1yb3ciCn07CmNvbnN0IF9ob2lzdGVkXzE4ID0gewogIGNsYXNzOiAicHJvZ3Jlc3MtdGV4dCIKfTsKY29uc3QgX2hvaXN0ZWRfMTkgPSB7CiAgY2xhc3M6ICJ0YXNrLXRhZ3MiCn07CmNvbnN0IF9ob2lzdGVkXzIwID0gewogIGNsYXNzOiAidGFzay1kZXNjcmlwdGlvbiIKfTsKY29uc3QgX2hvaXN0ZWRfMjEgPSBbIm9uQ2xpY2siXTsKY29uc3QgX2hvaXN0ZWRfMjIgPSB7CiAgc3R5bGU6IHsKICAgICJmb250LXNpemUiOiAiMTJweCIsCiAgICAiY29sb3IiOiAiIzg4OCIsCiAgICAiY3Vyc29yIjogInBvaW50ZXIiCiAgfQp9Owpjb25zdCBfaG9pc3RlZF8yMyA9IHsKICBrZXk6IDAsCiAgc3R5bGU6IHsKICAgICJtYXJnaW4tdG9wIjogIjZweCIKICB9Cn07CmNvbnN0IF9ob2lzdGVkXzI0ID0gewogIGtleTogMCwKICBjbGFzczogImFpLWFuYWx5c2lzIG1vZGVybi1haS1hbmFseXNpcyIKfTsKY29uc3QgX2hvaXN0ZWRfMjUgPSB7CiAga2V5OiAwLAogIGNsYXNzOiAidGV4dC1jZW50ZXIgcHktMiIKfTsKY29uc3QgX2hvaXN0ZWRfMjYgPSB7CiAga2V5OiAxLAogIGNsYXNzOiAibWItMCIKfTsKY29uc3QgX2hvaXN0ZWRfMjcgPSBbImlubmVySFRNTCJdOwpjb25zdCBfaG9pc3RlZF8yOCA9IHsKICBrZXk6IDAKfTsKY29uc3QgX2hvaXN0ZWRfMjkgPSB7CiAgc3R5bGU6IHsKICAgICJmb250LXdlaWdodCI6ICI2MDAiCiAgfQp9Owpjb25zdCBfaG9pc3RlZF8zMCA9IHsKICBzdHlsZTogewogICAgIm1hcmdpbiI6ICIxMHB4IDAiLAogICAgImRpc3BsYXkiOiAiZmxleCIsCiAgICAiZ2FwIjogIjE2cHgiLAogICAgImFsaWduLWl0ZW1zIjogImNlbnRlciIKICB9Cn07CmNvbnN0IF9ob2lzdGVkXzMxID0gewogIHN0eWxlOiB7CiAgICAibWFyZ2luLWJvdHRvbSI6ICIxMHB4IgogIH0KfTsKY29uc3QgX2hvaXN0ZWRfMzIgPSB7CiAgc3R5bGU6IHsKICAgICJtYXJnaW4tYm90dG9tIjogIjEwcHgiCiAgfQp9Owpjb25zdCBfaG9pc3RlZF8zMyA9IHsKICBzdHlsZTogewogICAgIm1hcmdpbi1ib3R0b20iOiAiMTBweCIKICB9Cn07CmNvbnN0IF9ob2lzdGVkXzM0ID0gewogIGNsYXNzOiAiYWktYW5hbHlzaXMgbW9kZXJuLWFpLWFuYWx5c2lzIgp9Owpjb25zdCBfaG9pc3RlZF8zNSA9IHsKICBjbGFzczogImQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtYmV0d2VlbiBhbGlnbi1pdGVtcy1jZW50ZXIgbWItMiIKfTsKY29uc3QgX2hvaXN0ZWRfMzYgPSB7CiAga2V5OiAwLAogIGNsYXNzOiAidGV4dC1jZW50ZXIgcHktMiIKfTsKY29uc3QgX2hvaXN0ZWRfMzcgPSB7CiAga2V5OiAxLAogIGNsYXNzOiAibWItMCIKfTsKY29uc3QgX2hvaXN0ZWRfMzggPSBbImlubmVySFRNTCJdOwpjb25zdCBfaG9pc3RlZF8zOSA9IHsKICBjbGFzczogIm1lbWJlci1jb21wbGV0aW9uLWxpc3QiCn07CmNvbnN0IF9ob2lzdGVkXzQwID0gewogIGtleTogMAp9Owpjb25zdCBfaG9pc3RlZF80MSA9IHsKICBrZXk6IDEKfTsKaW1wb3J0IHsgcmVmLCB3YXRjaCwgb25Nb3VudGVkLCBjb21wdXRlZCB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IFVzZXJGaWxsZWQsIENhbGVuZGFyLCBDaGF0RG90Um91bmQsIFJlZnJlc2ggfSBmcm9tICdAZWxlbWVudC1wbHVzL2ljb25zLXZ1ZSc7CmltcG9ydCByZXF1ZXN0IGZyb20gJ0AvdXRpbHMvcmVxdWVzdCc7CmltcG9ydCB7IEVsTWVzc2FnZSwgRWxNZXNzYWdlQm94IH0gZnJvbSAnZWxlbWVudC1wbHVzJzsKCi8vIOiOt+WPluW9k+WJjeeZu+W9leeUqOaIt+S/oeaBrwoKZXhwb3J0IGRlZmF1bHQgewogIF9fbmFtZTogJ1Rhc2tzVmlldycsCiAgcHJvcHM6IHsKICAgIHByb2plY3Q6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiAoKSA9PiAoe30pCiAgICB9LAogICAgbWVtYmVyczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gW10KICAgIH0KICB9LAogIHNldHVwKF9fcHJvcHMpIHsKICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gcmVmKG51bGwpOwogICAgdHJ5IHsKICAgICAgY3VycmVudFVzZXIudmFsdWUgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyJykgfHwgJ3t9Jyk7CiAgICAgIGNvbnNvbGUubG9nKCflvZPliY3nmbvlvZXnlKjmiLc6JywgY3VycmVudFVzZXIudmFsdWUpOwogICAgfSBjYXRjaCAoZSkgewogICAgICBjb25zb2xlLmVycm9yKCfop6PmnpDnlKjmiLfkv6Hmga/lpLHotKU6JywgZSk7CiAgICB9CiAgICBjb25zdCBwcm9wcyA9IF9fcHJvcHM7CgogICAgLy8g55u05o6l5L2/55SocHJvcHMubWVtYmVyc++8jOaXoOmcgOWGjeWumuS5ieacrOWcsOeahHByb2plY3RNZW1iZXJzCiAgICBjb25zdCBwcm9qZWN0TWVtYmVycyA9IGNvbXB1dGVkKCgpID0+IHByb3BzLm1lbWJlcnMpOwogICAgY29uc3Qgc2VhcmNoID0gcmVmKCcnKTsKICAgIGNvbnN0IGZpbHRlckFzc2lnbmVlID0gcmVmKCcnKTsKICAgIGNvbnN0IGZpbHRlclByaW9yaXR5ID0gcmVmKCcnKTsKICAgIGNvbnN0IHNob3dBZGRUYXNrID0gcmVmKGZhbHNlKTsKICAgIGNvbnN0IHNob3dEZXRhaWwgPSByZWYoZmFsc2UpOwogICAgY29uc3QgY3VycmVudFRhc2sgPSByZWYobnVsbCk7CiAgICBjb25zdCBuZXdUYXNrID0gcmVmKHsKICAgICAgdGl0bGU6ICcnLAogICAgICBhc3NpZ25lZTogJycsCiAgICAgIHByaW9yaXR5OiAn5LitJywKICAgICAgZHVlRGF0ZTogJycsCiAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgdGFnczogJycsCiAgICAgIHN0YXR1czogJ3RvZG8nLAogICAgICBwcm9ncmVzczogMCwKICAgICAgY29tcGxldGVkOiAwLAogICAgICB0b3RhbDogMQogICAgfSk7CgogICAgLy8g5omA5pyJ5Lu75Yqh5pWw5o2uCiAgICBjb25zdCB0YXNrcyA9IHJlZihbXSk7CgogICAgLy8g5paw5aKe77ya5Lu75Yqh5a6M5oiQ6L+b5bqm5pWw5o2uCiAgICBjb25zdCB0YXNrQ29tcGxldGlvbnMgPSByZWYoe30pOyAvLyB7IFt0YXNrSWRdOiB7IHRvdGFsLCBjb21wbGV0ZWQsIG1lbWJlcnM6IFt7aWQsIG5hbWUsIGNvbXBsZXRlZH1dIH0gfQoKICAgIGNvbnN0IGthbmJhbiA9IGNvbXB1dGVkKCgpID0+IFt7CiAgICAgIG5hbWU6ICflvoXlpITnkIYnLAogICAgICB0YXNrczogdGFza3MudmFsdWUuZmlsdGVyKHQgPT4gdC5zdGF0dXMgPT09ICd0b2RvJyB8fCB0LnN0YXR1cyA9PT0gJ+W+heWkhOeQhicpCiAgICB9LCB7CiAgICAgIG5hbWU6ICfov5vooYzkuK0nLAogICAgICB0YXNrczogdGFza3MudmFsdWUuZmlsdGVyKHQgPT4gdC5zdGF0dXMgPT09ICdpbi1wcm9ncmVzcycgfHwgdC5zdGF0dXMgPT09ICfov5vooYzkuK0nKQogICAgfSwgewogICAgICBuYW1lOiAn5bey5a6M5oiQJywKICAgICAgdGFza3M6IHRhc2tzLnZhbHVlLmZpbHRlcih0ID0+IHQuc3RhdHVzID09PSAnZG9uZScgfHwgdC5zdGF0dXMgPT09ICflt7LlrozmiJAnKQogICAgfV0pOwogICAgY29uc3QgcmVmcmVzaGluZ0FpID0gcmVmKGZhbHNlKTsKCiAgICAvLyDmt7vliqDov4fmu6TmnaHku7blj5jljJbnm5HlkKwKICAgIHdhdGNoKFtzZWFyY2gsIGZpbHRlckFzc2lnbmVlLCBmaWx0ZXJQcmlvcml0eV0sICgpID0+IHsKICAgICAgLy8g5b2T6L+H5ruk5p2h5Lu25Y+Y5YyW5pe277yM5Yi35paw5Lu75Yqh5YiX6KGoCiAgICB9LCB7CiAgICAgIGRlZXA6IHRydWUKICAgIH0pOwoKICAgIC8vIOiOt+WPluS7u+WKoeWIl+ihqAogICAgZnVuY3Rpb24gZmV0Y2hUYXNrcygpIHsKICAgICAgaWYgKCFwcm9wcy5wcm9qZWN0IHx8ICFwcm9wcy5wcm9qZWN0LmlkKSByZXR1cm47CiAgICAgIHJlcXVlc3QuZ2V0KGAvYXBpL3Rhc2tzLz9wcm9qZWN0PSR7cHJvcHMucHJvamVjdC5pZH1gKS50aGVuKHJlcyA9PiB7CiAgICAgICAgLy8g57uf5LiA6L2s5o2i5Lu75Yqh5a2X5q61CiAgICAgICAgY29uc3QgcmF3VGFza3MgPSBBcnJheS5pc0FycmF5KHJlcy5kYXRhKSA/IHJlcy5kYXRhIDogcmVzLmRhdGEuZGF0YSB8fCBbXTsKICAgICAgICB0YXNrcy52YWx1ZSA9IHJhd1Rhc2tzLm1hcCh0ID0+ICh7CiAgICAgICAgICAuLi50LAogICAgICAgICAgZHVlRGF0ZTogdC5kdWVfZGF0ZSB8fCB0LmR1ZURhdGUgfHwgJycsCiAgICAgICAgICBwcmlvcml0eTogdC5wcmlvcml0eSA9PT0gJ2hpZ2gnID8gJ+mrmCcgOiB0LnByaW9yaXR5ID09PSAnbG93JyA/ICfkvY4nIDogdC5wcmlvcml0eSA9PT0gJ21lZGl1bScgPyAn5LitJyA6IHQucHJpb3JpdHkgfHwgJycsCiAgICAgICAgICBwcmlvcml0eVR5cGU6IHQucHJpb3JpdHkgPT09ICdoaWdoJyB8fCB0LnByaW9yaXR5ID09PSAn6auYJyA/ICdkYW5nZXInIDogdC5wcmlvcml0eSA9PT0gJ2xvdycgfHwgdC5wcmlvcml0eSA9PT0gJ+S9jicgPyAnaW5mbycgOiAnd2FybmluZycKICAgICAgICB9KSk7CiAgICAgICAgLy8g6Ieq5YqoQUnliIbmnpAKICAgICAgICB0YXNrcy52YWx1ZS5mb3JFYWNoKHRhc2sgPT4gewogICAgICAgICAgaWYgKCF0YXNrLmFpIHx8IHRhc2suYWkubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgIGdldFRhc2tBaUFuYWx5c2lzKHRhc2suaWQpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KCiAgICAvLyDojrflj5bku7vliqHlrozmiJDov5vluqYKICAgIGZ1bmN0aW9uIGZldGNoVGFza0NvbXBsZXRpb25zKHRhc2tJZCkgewogICAgICBpZiAoIXRhc2tJZCkgcmV0dXJuOwogICAgICByZXF1ZXN0LmdldChgL2FwaS90YXNrLWNvbXBsZXRpb25zLz90YXNrPSR7dGFza0lkfWApLnRoZW4ocmVzID0+IHsKICAgICAgICBjb25zdCBjb21wbGV0aW9uUmVjb3JkcyA9IEFycmF5LmlzQXJyYXkocmVzLmRhdGEpID8gcmVzLmRhdGEgOiByZXMuZGF0YS5kYXRhIHx8IFtdOwoKICAgICAgICAvLyDliJvlu7rkuIDkuKrku6XnlKjmiLdJROS4uumUrueahOWujOaIkOeKtuaAgeaYoOWwhO+8jOaWueS+v+W/q+mAn+afpeaJvgogICAgICAgIGNvbnN0IGNvbXBsZXRpb25NYXAgPSBuZXcgTWFwKCk7CiAgICAgICAgY29tcGxldGlvblJlY29yZHMuZm9yRWFjaChyZWNvcmQgPT4gewogICAgICAgICAgdmFyIF9yZWNvcmQkdXNlciwgX3JlY29yZCRtZW1iZXIsIF9yZWNvcmQkbWVtYmVyJHVzZXI7CiAgICAgICAgICAvLyDlhbzlrrnlpJrnp43lj6/og73nmoTlkI7nq6/ov5Tlm57nu5PmnoQKICAgICAgICAgIGNvbnN0IHVzZXJJZCA9ICgoX3JlY29yZCR1c2VyID0gcmVjb3JkLnVzZXIpID09PSBudWxsIHx8IF9yZWNvcmQkdXNlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JlY29yZCR1c2VyLmlkKSB8fCAoKF9yZWNvcmQkbWVtYmVyID0gcmVjb3JkLm1lbWJlcikgPT09IG51bGwgfHwgX3JlY29yZCRtZW1iZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfcmVjb3JkJG1lbWJlciR1c2VyID0gX3JlY29yZCRtZW1iZXIudXNlcikgPT09IG51bGwgfHwgX3JlY29yZCRtZW1iZXIkdXNlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JlY29yZCRtZW1iZXIkdXNlci5pZCkgfHwgcmVjb3JkLm1lbWJlcl9pZDsKICAgICAgICAgIGlmICh1c2VySWQpIHsKICAgICAgICAgICAgY29tcGxldGlvbk1hcC5zZXQodXNlcklkLCB7CiAgICAgICAgICAgICAgY29tcGxldGVkOiByZWNvcmQuY29tcGxldGVkLAogICAgICAgICAgICAgIGNvbXBsZXRpb25JZDogcmVjb3JkLmlkCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICAvLyDku6XlvZPliY3nmoTpobnnm67miJDlkZjliJfooaggKHByb3BzLm1lbWJlcnMpIOS4uuWUr+S4gOaVsOaNrua6kAogICAgICAgIGNvbnN0IGN1cnJlbnRQcm9qZWN0TWVtYmVycyA9IHByb2plY3RNZW1iZXJzLnZhbHVlOwoKICAgICAgICAvLyDln7rkuo7lvZPliY3pobnnm67miJDlkZjmnoTlu7rku7vliqHnmoTmnIDnu4jmiJDlkZjliJfooajvvIzlubbpmYTliqDlhbblrozmiJDnirbmgIEKICAgICAgICBjb25zdCBmaW5hbE1lbWJlcnNGb3JUYXNrID0gY3VycmVudFByb2plY3RNZW1iZXJzLm1hcChtZW1iZXIgPT4gewogICAgICAgICAgY29uc3QgY29tcGxldGlvbkRhdGEgPSBjb21wbGV0aW9uTWFwLmdldChtZW1iZXIuaWQpOwogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaWQ6IG1lbWJlci5pZCwKICAgICAgICAgICAgLy8g56Gu5L+dSUTmmK/nlKjmiLdJRAogICAgICAgICAgICBuYW1lOiBtZW1iZXIubmFtZSwKICAgICAgICAgICAgY29tcGxldGVkOiBjb21wbGV0aW9uRGF0YSA/IGNvbXBsZXRpb25EYXRhLmNvbXBsZXRlZCA6IGZhbHNlLAogICAgICAgICAgICBjb21wbGV0aW9uSWQ6IGNvbXBsZXRpb25EYXRhID8gY29tcGxldGlvbkRhdGEuY29tcGxldGlvbklkIDogdW5kZWZpbmVkLAogICAgICAgICAgICB1c2VySWQ6IG1lbWJlci5pZCAvLyDmmI7noa51c2VySWTlrZfmrrUKICAgICAgICAgIH07CiAgICAgICAgfSk7CiAgICAgICAgdGFza0NvbXBsZXRpb25zLnZhbHVlW3Rhc2tJZF0gPSB7CiAgICAgICAgICB0b3RhbDogZmluYWxNZW1iZXJzRm9yVGFzay5sZW5ndGgsCiAgICAgICAgICBjb21wbGV0ZWQ6IGZpbmFsTWVtYmVyc0ZvclRhc2suZmlsdGVyKG0gPT4gbS5jb21wbGV0ZWQpLmxlbmd0aCwKICAgICAgICAgIG1lbWJlcnM6IGZpbmFsTWVtYmVyc0ZvclRhc2sKICAgICAgICB9OwogICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgIGNvbnNvbGUuZXJyb3IoYOiOt+WPluS7u+WKoVske3Rhc2tJZH1d5a6M5oiQ6L+b5bqm5aSx6LSlOmAsIGVycik7CiAgICAgICAgLy8g5aaC5p6cQVBJ6LCD55So5aSx6LSl77yM5YiZ5bCG5omA5pyJ5b2T5YmN6aG555uu5oiQ5ZGY5pi+56S65Li65pyq5a6M5oiQCiAgICAgICAgdGFza0NvbXBsZXRpb25zLnZhbHVlW3Rhc2tJZF0gPSB7CiAgICAgICAgICB0b3RhbDogcHJvamVjdE1lbWJlcnMudmFsdWUubGVuZ3RoLAogICAgICAgICAgY29tcGxldGVkOiAwLAogICAgICAgICAgbWVtYmVyczogcHJvamVjdE1lbWJlcnMudmFsdWUubWFwKG0gPT4gKHsKICAgICAgICAgICAgaWQ6IG0uaWQsCiAgICAgICAgICAgIG5hbWU6IG0ubmFtZSwKICAgICAgICAgICAgY29tcGxldGVkOiBmYWxzZSwKICAgICAgICAgICAgdXNlcklkOiBtLmlkCiAgICAgICAgICB9KSkKICAgICAgICB9OwogICAgICB9KTsKICAgIH0KCiAgICAvLyDmlrDlop7vvJrojrflj5bku7vliqHlrozmiJDnmb7liIbmr5QKICAgIGZ1bmN0aW9uIGdldFRhc2tDb21wbGV0aW9uUGVyY2VudGFnZSh0YXNrKSB7CiAgICAgIHZhciBfdGFza0NvbXBsZXRpb25zJHZhbHU7CiAgICAgIGlmICghdGFzayB8fCAhdGFzay5pZCkgcmV0dXJuIDA7CgogICAgICAvLyDlpoLmnpzmnInlkI7nq6/mlbDmja7vvIzkvb/nlKjlkI7nq6/mlbDmja4KICAgICAgaWYgKChfdGFza0NvbXBsZXRpb25zJHZhbHUgPSB0YXNrQ29tcGxldGlvbnMudmFsdWVbdGFzay5pZF0pICE9PSBudWxsICYmIF90YXNrQ29tcGxldGlvbnMkdmFsdSAhPT0gdm9pZCAwICYmIF90YXNrQ29tcGxldGlvbnMkdmFsdS50b3RhbCkgewogICAgICAgIHZhciBfdGFza0NvbXBsZXRpb25zJHZhbHUyLCBfdGFza0NvbXBsZXRpb25zJHZhbHUzOwogICAgICAgIHJldHVybiBNYXRoLnJvdW5kKDEwMCAqICgoKF90YXNrQ29tcGxldGlvbnMkdmFsdTIgPSB0YXNrQ29tcGxldGlvbnMudmFsdWVbdGFzay5pZF0pID09PSBudWxsIHx8IF90YXNrQ29tcGxldGlvbnMkdmFsdTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90YXNrQ29tcGxldGlvbnMkdmFsdTIuY29tcGxldGVkKSB8fCAwKSAvICgoX3Rhc2tDb21wbGV0aW9ucyR2YWx1MyA9IHRhc2tDb21wbGV0aW9ucy52YWx1ZVt0YXNrLmlkXSkgPT09IG51bGwgfHwgX3Rhc2tDb21wbGV0aW9ucyR2YWx1MyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Rhc2tDb21wbGV0aW9ucyR2YWx1My50b3RhbCkpOwogICAgICB9CgogICAgICAvLyDlkKbliJnkvb/nlKjpu5jorqTlgLwKICAgICAgcmV0dXJuIDA7CiAgICB9CgogICAgLy8g5paw5aKe77ya6I635Y+W5Lu75Yqh5a6M5oiQ5paH5pysCiAgICBmdW5jdGlvbiBnZXRUYXNrQ29tcGxldGlvblRleHQodGFzaykgewogICAgICBpZiAoIXRhc2sgfHwgIXRhc2suaWQpIHsKICAgICAgICAvLyDlpoLmnpzmsqHmnInku7vliqHvvIzmmL7npLrpu5jorqTlgLwKICAgICAgICByZXR1cm4gYDAvJHtwcm9qZWN0TWVtYmVycy52YWx1ZS5sZW5ndGggfHwgMX3kurrlrozmiJBgOwogICAgICB9CgogICAgICAvLyDlpoLmnpzmnInlkI7nq6/mlbDmja7vvIzkvb/nlKjlkI7nq6/mlbDmja4KICAgICAgaWYgKHRhc2tDb21wbGV0aW9ucy52YWx1ZVt0YXNrLmlkXSkgewogICAgICAgIHZhciBfdGFza0NvbXBsZXRpb25zJHZhbHU0LCBfdGFza0NvbXBsZXRpb25zJHZhbHU1OwogICAgICAgIHJldHVybiBgJHsoKF90YXNrQ29tcGxldGlvbnMkdmFsdTQgPSB0YXNrQ29tcGxldGlvbnMudmFsdWVbdGFzay5pZF0pID09PSBudWxsIHx8IF90YXNrQ29tcGxldGlvbnMkdmFsdTQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90YXNrQ29tcGxldGlvbnMkdmFsdTQuY29tcGxldGVkKSB8fCAwfS8keygoX3Rhc2tDb21wbGV0aW9ucyR2YWx1NSA9IHRhc2tDb21wbGV0aW9ucy52YWx1ZVt0YXNrLmlkXSkgPT09IG51bGwgfHwgX3Rhc2tDb21wbGV0aW9ucyR2YWx1NSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Rhc2tDb21wbGV0aW9ucyR2YWx1NS50b3RhbCkgfHwgcHJvamVjdE1lbWJlcnMudmFsdWUubGVuZ3RoIHx8IDF95Lq65a6M5oiQYDsKICAgICAgfQoKICAgICAgLy8g5ZCm5YiZ5L2/55So6buY6K6k5YC8CiAgICAgIHJldHVybiBgMC8ke3Byb2plY3RNZW1iZXJzLnZhbHVlLmxlbmd0aCB8fCAxfeS6uuWujOaIkGA7CiAgICB9CgogICAgLy8g5Zyo5Lu75Yqh5YiX6KGo5Yqg6L295ZCO77yM5om56YeP6I635Y+W5omA5pyJ5Lu75Yqh55qE5a6M5oiQ6L+b5bqmCiAgICB3YXRjaCh0YXNrcywgdmFsID0+IHsKICAgICAgKHZhbCB8fCBbXSkuZm9yRWFjaCh0YXNrID0+IGZldGNoVGFza0NvbXBsZXRpb25zKHRhc2suaWQpKTsKICAgIH0sIHsKICAgICAgaW1tZWRpYXRlOiB0cnVlCiAgICB9KTsKCiAgICAvLyDmlrDlop7vvJrkuLrmsqHmnIkgVGFza0NvbXBsZXRpb24g6K6w5b2V55qE5oiQ5ZGY5qCH6K6w5a6M5oiQCiAgICBmdW5jdGlvbiBtYXJrQ29tcGxldGVGb3JNZW1iZXIodGFza0lkLCBtZW1iZXJJZCkgewogICAgICBpZiAoIXRhc2tJZCB8fCAhbWVtYmVySWQpIHJldHVybjsKICAgICAgY29uc29sZS5sb2coJ+S4uuaWsOaIkOWRmOagh+iusOS7u+WKoeWujOaIkDonLCB0YXNrSWQsIG1lbWJlcklkKTsKCiAgICAgIC8vIOWIm+W7uuaWsOeahCBUYXNrQ29tcGxldGlvbiDorrDlvZUKICAgICAgcmVxdWVzdC5wb3N0KCcvYXBpL3Rhc2stY29tcGxldGlvbnMvJywgewogICAgICAgIHRhc2s6IHRhc2tJZCwKICAgICAgICBtZW1iZXJfaWQ6IG1lbWJlcklkLAogICAgICAgIGNvbXBsZXRlZDogdHJ1ZSwKICAgICAgICBjb21wbGV0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKQogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICBFbE1lc3NhZ2Uuc3VjY2Vzcygn5bey5qCH6K6w5Li65a6M5oiQJyk7CiAgICAgICAgLy8g5pu05paw5pys5Zyw54q25oCBCiAgICAgICAgaWYgKCF0YXNrQ29tcGxldGlvbnMudmFsdWVbdGFza0lkXSkgewogICAgICAgICAgLy8g5Yid5aeL5YyW5Lu75Yqh5a6M5oiQ54q25oCB77yM5L2/55So6aG555uu5oiQ5ZGY5oC75pWwCiAgICAgICAgICB0YXNrQ29tcGxldGlvbnMudmFsdWVbdGFza0lkXSA9IHsKICAgICAgICAgICAgdG90YWw6IHByb2plY3RNZW1iZXJzLnZhbHVlLmxlbmd0aCwKICAgICAgICAgICAgY29tcGxldGVkOiAxLAogICAgICAgICAgICBtZW1iZXJzOiBwcm9qZWN0TWVtYmVycy52YWx1ZS5tYXAobSA9PiAoewogICAgICAgICAgICAgIGlkOiBtLmlkLAogICAgICAgICAgICAgIG5hbWU6IG0ubmFtZSwKICAgICAgICAgICAgICBjb21wbGV0ZWQ6IG0uaWQgPT09IG1lbWJlcklkLAogICAgICAgICAgICAgIGNvbXBsZXRpb25JZDogdW5kZWZpbmVkCiAgICAgICAgICAgIH0pKQogICAgICAgICAgfTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8g5pu05paw5bey5pyJ55qE5Lu75Yqh5a6M5oiQ54q25oCBCiAgICAgICAgICB0YXNrQ29tcGxldGlvbnMudmFsdWVbdGFza0lkXS5jb21wbGV0ZWQrKzsKICAgICAgICAgIC8vIOehruS/nSBtZW1iZXJzIOaVsOe7hOWMheWQq+aJgOaciemhueebruaIkOWRmAogICAgICAgICAgY29uc3QgZXhpc3RpbmdNZW1iZXJJZHMgPSB0YXNrQ29tcGxldGlvbnMudmFsdWVbdGFza0lkXS5tZW1iZXJzLm1hcChtID0+IG0uaWQpOwogICAgICAgICAgcHJvamVjdE1lbWJlcnMudmFsdWUuZm9yRWFjaChtID0+IHsKICAgICAgICAgICAgaWYgKCFleGlzdGluZ01lbWJlcklkcy5pbmNsdWRlcyhtLmlkKSkgewogICAgICAgICAgICAgIHRhc2tDb21wbGV0aW9ucy52YWx1ZVt0YXNrSWRdLm1lbWJlcnMucHVzaCh7CiAgICAgICAgICAgICAgICBpZDogbS5pZCwKICAgICAgICAgICAgICAgIG5hbWU6IG0ubmFtZSwKICAgICAgICAgICAgICAgIGNvbXBsZXRlZDogbS5pZCA9PT0gbWVtYmVySWQsCiAgICAgICAgICAgICAgICBjb21wbGV0aW9uSWQ6IHVuZGVmaW5lZAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIC8vIOabtOaWsOW9k+WJjeaIkOWRmOeahOWujOaIkOeKtuaAgQogICAgICAgICAgY29uc3QgbWVtYmVyID0gdGFza0NvbXBsZXRpb25zLnZhbHVlW3Rhc2tJZF0ubWVtYmVycy5maW5kKG0gPT4gbS5pZCA9PT0gbWVtYmVySWQpOwogICAgICAgICAgaWYgKG1lbWJlcikgewogICAgICAgICAgICBtZW1iZXIuY29tcGxldGVkID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICAgIC8vIOehruS/neaAu+aVsOato+ehrgogICAgICAgICAgdGFza0NvbXBsZXRpb25zLnZhbHVlW3Rhc2tJZF0udG90YWwgPSB0YXNrQ29tcGxldGlvbnMudmFsdWVbdGFza0lkXS5tZW1iZXJzLmxlbmd0aDsKICAgICAgICB9CgogICAgICAgIC8vIOmHjeaWsOiOt+WPluacgOaWsOaVsOaNrgogICAgICAgIGZldGNoVGFza0NvbXBsZXRpb25zKHRhc2tJZCk7CiAgICAgICAgLy8g5qOA5p+l5piv5ZCm5omA5pyJ5oiQ5ZGY6YO95a6M5oiQ77yM6Ieq5Yqo6K6+5Li65bey5a6M5oiQCiAgICAgICAgY29uc3QgdGMgPSB0YXNrQ29tcGxldGlvbnMudmFsdWVbdGFza0lkXTsKICAgICAgICBpZiAodGMgJiYgdGMuY29tcGxldGVkID09PSB0Yy50b3RhbCAmJiB0Yy50b3RhbCA+IDApIHsKICAgICAgICAgIHVwZGF0ZVRhc2tTdGF0dXNUb0RvbmUodGFza0lkKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgY29uc29sZS5lcnJvcign5Yib5bu65Lu75Yqh5a6M5oiQ6K6w5b2V5aSx6LSlOicsIGVycik7CiAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfmk43kvZzlpLHotKXvvIzor7fph43or5UnKTsKICAgICAgfSk7CiAgICB9CgogICAgLy8g5oiQ5ZGY54K55Ye7IuWujOaIkCLmjInpkq4KICAgIGZ1bmN0aW9uIG1hcmtDb21wbGV0ZSh0YXNrSWQsIG1lbWJlcklkKSB7CiAgICAgIHZhciBfdGFza0NvbXBsZXRpb25zJHZhbHU2OwogICAgICBjb25zdCB0YyA9ICgoKF90YXNrQ29tcGxldGlvbnMkdmFsdTYgPSB0YXNrQ29tcGxldGlvbnMudmFsdWVbdGFza0lkXSkgPT09IG51bGwgfHwgX3Rhc2tDb21wbGV0aW9ucyR2YWx1NiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Rhc2tDb21wbGV0aW9ucyR2YWx1Ni5tZW1iZXJzKSB8fCBbXSkuZmluZChtID0+IG0uaWQgPT09IG1lbWJlcklkKTsKICAgICAgaWYgKCF0YyB8fCB0Yy5jb21wbGV0ZWQpIHJldHVybjsKICAgICAgY29uc29sZS5sb2coJ+agh+iusOS7u+WKoeWujOaIkDonLCB0YXNrSWQsIG1lbWJlcklkLCB0Yy5jb21wbGV0aW9uSWQpOwoKICAgICAgLy8g56uL5Y2z5pu05paw5pys5Zyw54q25oCB77yM5o+Q5L6b5Y2z5pe25Y+N6aaICiAgICAgIHRjLmNvbXBsZXRlZCA9IHRydWU7CiAgICAgIHRhc2tDb21wbGV0aW9ucy52YWx1ZVt0YXNrSWRdLmNvbXBsZXRlZCsrOwoKICAgICAgLy8g56Gu5L+d5oC75pWw5q2j56GuCiAgICAgIHRhc2tDb21wbGV0aW9ucy52YWx1ZVt0YXNrSWRdLnRvdGFsID0gTWF0aC5tYXgodGFza0NvbXBsZXRpb25zLnZhbHVlW3Rhc2tJZF0udG90YWwsIHRhc2tDb21wbGV0aW9ucy52YWx1ZVt0YXNrSWRdLm1lbWJlcnMubGVuZ3RoLCBwcm9qZWN0TWVtYmVycy52YWx1ZS5sZW5ndGgpOwoKICAgICAgLy8g54S25ZCO5Y+R6YCB6K+35rGC5Yiw5ZCO56uvCiAgICAgIHJlcXVlc3QucGF0Y2goYC9hcGkvdGFzay1jb21wbGV0aW9ucy8ke3RjLmNvbXBsZXRpb25JZH0vYCwgewogICAgICAgIGNvbXBsZXRlZDogdHJ1ZSwKICAgICAgICBjb21wbGV0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKQogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICBFbE1lc3NhZ2Uuc3VjY2Vzcygn5bey5qCH6K6w5Li65a6M5oiQJyk7CiAgICAgICAgLy8g6YeN5paw6I635Y+W5pyA5paw5pWw5o2uCiAgICAgICAgZmV0Y2hUYXNrQ29tcGxldGlvbnModGFza0lkKTsKICAgICAgICAvLyDmo4Dmn6XmmK/lkKbmiYDmnInmiJDlkZjpg73lrozmiJDvvIzoh6rliqjorr7kuLrlt7LlrozmiJAKICAgICAgICBjb25zdCB0Y2MgPSB0YXNrQ29tcGxldGlvbnMudmFsdWVbdGFza0lkXTsKICAgICAgICBpZiAodGNjICYmIHRjYy5jb21wbGV0ZWQgPT09IHRjYy50b3RhbCAmJiB0Y2MudG90YWwgPiAwKSB7CiAgICAgICAgICB1cGRhdGVUYXNrU3RhdHVzVG9Eb25lKHRhc2tJZCk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+agh+iusOWujOaIkOWksei0pTonLCBlcnIpOwogICAgICAgIEVsTWVzc2FnZS5lcnJvcign5pON5L2c5aSx6LSl77yM5L2G55WM6Z2i5bey5pu05pawJyk7CiAgICAgICAgLy8g5aSx6LSl5pe25LiN5Zue5rua5pys5Zyw54q25oCB77yM5L+d5oyB55So5oi35L2T6aqMCiAgICAgIH0pOwogICAgfQoKICAgIC8vIOaWsOWinu+8muiHquWKqOWwhuS7u+WKoeeKtuaAgeiuvuS4uuW3suWujOaIkAogICAgZnVuY3Rpb24gdXBkYXRlVGFza1N0YXR1c1RvRG9uZSh0YXNrSWQpIHsKICAgICAgLy8g5pys5Zyw5pu05pawCiAgICAgIGNvbnN0IHRhc2sgPSB0YXNrcy52YWx1ZS5maW5kKHQgPT4gdC5pZCA9PT0gdGFza0lkKTsKICAgICAgaWYgKHRhc2spIHRhc2suc3RhdHVzID0gJ2RvbmUnOwogICAgICAvLyDlkI7nq6/mm7TmlrAKICAgICAgcmVxdWVzdC5wYXRjaChgL2FwaS90YXNrcy8ke3Rhc2tJZH0vYCwgewogICAgICAgIHN0YXR1czogJ2RvbmUnCiAgICAgIH0pOwogICAgfQoKICAgIC8vIOaWsOW7uuS7u+WKoQogICAgZnVuY3Rpb24gc2F2ZVRhc2soKSB7CiAgICAgIGlmICghbmV3VGFzay52YWx1ZS50aXRsZSB8fCAhbmV3VGFzay52YWx1ZS5hc3NpZ25lZSkgewogICAgICAgIEVsTWVzc2FnZS5lcnJvcign6K+35aGr5YaZ5Lu75Yqh5ZCN56ew5ZKM6LSf6LSj5Lq6Jyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIC8vIOebtOaOpeeUqGFzc2lnbmVl5Li6UHJvamVjdE1lbWJlcueahGlkCiAgICAgIGNvbnN0IGFzc2lnbmVlX2lkID0gbmV3VGFzay52YWx1ZS5hc3NpZ25lZTsKICAgICAgaWYgKCFhc3NpZ25lZV9pZCkgewogICAgICAgIEVsTWVzc2FnZS5lcnJvcign6LSf6LSj5Lq65peg5pWIJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvbnN0IHBheWxvYWQgPSB7CiAgICAgICAgcHJvamVjdDogcHJvcHMucHJvamVjdC5pZCwKICAgICAgICB0aXRsZTogbmV3VGFzay52YWx1ZS50aXRsZSwKICAgICAgICBkZXNjcmlwdGlvbjogbmV3VGFzay52YWx1ZS5kZXNjcmlwdGlvbiwKICAgICAgICBhc3NpZ25lZV9pZDogYXNzaWduZWVfaWQsCiAgICAgICAgZHVlX2RhdGU6IG5ld1Rhc2sudmFsdWUuZHVlRGF0ZSwKICAgICAgICBwcmlvcml0eTogbmV3VGFzay52YWx1ZS5wcmlvcml0eSA9PT0gJ+mrmCcgPyAnaGlnaCcgOiBuZXdUYXNrLnZhbHVlLnByaW9yaXR5ID09PSAnbG93JyA/ICdsb3cnIDogJ21lZGl1bScsCiAgICAgICAgc3RhdHVzOiAndG9kbycsCiAgICAgICAgdGFnczogbmV3VGFzay52YWx1ZS50YWdzCiAgICAgIH07CiAgICAgIHJlcXVlc3QucG9zdCgnL2FwaS90YXNrcy8nLCBwYXlsb2FkKS50aGVuKCgpID0+IHsKICAgICAgICBFbE1lc3NhZ2Uuc3VjY2Vzcygn5Lu75Yqh5Yib5bu65oiQ5YqfJyk7CiAgICAgICAgc2hvd0FkZFRhc2sudmFsdWUgPSBmYWxzZTsKICAgICAgICBmZXRjaFRhc2tzKCk7CiAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+S7u+WKoeWIm+W7uuWksei0pScpOwogICAgICB9KTsKICAgIH0KCiAgICAvLyDov4fmu6QKICAgIGZ1bmN0aW9uIGZpbHRlcmVkVGFza3ModGFza0FycikgewogICAgICByZXR1cm4gdGFza0Fyci5maWx0ZXIodCA9PiB7CiAgICAgICAgY29uc3QgbWF0Y2hTZWFyY2ggPSAhc2VhcmNoLnZhbHVlIHx8IHQudGl0bGUuaW5jbHVkZXMoc2VhcmNoLnZhbHVlKSB8fCB0LmRlc2NyaXB0aW9uICYmIHQuZGVzY3JpcHRpb24uaW5jbHVkZXMoc2VhcmNoLnZhbHVlKTsKICAgICAgICBjb25zdCBtYXRjaEFzc2lnbmVlID0gIWZpbHRlckFzc2lnbmVlLnZhbHVlIHx8IHQuYXNzaWduZWUgJiYgdC5hc3NpZ25lZS51c2VyICYmIHQuYXNzaWduZWUudXNlci51c2VybmFtZSA9PT0gZmlsdGVyQXNzaWduZWUudmFsdWU7CiAgICAgICAgLy8g5LyY5YWI57qn562b6YCJ77ya55u05o6l55So5Lit5paH5Yy56YWNCiAgICAgICAgY29uc3QgbWF0Y2hQcmlvcml0eSA9ICFmaWx0ZXJQcmlvcml0eS52YWx1ZSB8fCB0LnByaW9yaXR5ID09PSBmaWx0ZXJQcmlvcml0eS52YWx1ZTsKICAgICAgICByZXR1cm4gbWF0Y2hTZWFyY2ggJiYgbWF0Y2hBc3NpZ25lZSAmJiBtYXRjaFByaW9yaXR5OwogICAgICB9KTsKICAgIH0KCiAgICAvLyDor6bmg4XlvLnnqpcKICAgIGZ1bmN0aW9uIG9wZW5EZXRhaWwodGFzaykgewogICAgICAvLyDor6bmg4XlvLnnqpfkuZ/pnIDovazmjaIgcHJpb3JpdHlUeXBlCiAgICAgIGN1cnJlbnRUYXNrLnZhbHVlID0gewogICAgICAgIC4uLnRhc2ssCiAgICAgICAgcHJpb3JpdHlUeXBlOiB0YXNrLnByaW9yaXR5VHlwZSB8fCAodGFzay5wcmlvcml0eSA9PT0gJ+mrmCcgfHwgdGFzay5wcmlvcml0eSA9PT0gJ2hpZ2gnID8gJ2RhbmdlcicgOiB0YXNrLnByaW9yaXR5ID09PSAn5L2OJyB8fCB0YXNrLnByaW9yaXR5ID09PSAnbG93JyA/ICdpbmZvJyA6ICd3YXJuaW5nJyksCiAgICAgICAgLy8g5Yqo5oCB6I635Y+WQUnliIbmnpDnu5PmnpzvvIzogIzkuI3mmK/kvb/nlKjpnZnmgIHmlbDmja4KICAgICAgICBhaTogdGFzay5haSB8fCBbXQogICAgICB9OwogICAgICAvLyDmmL7npLror6bmg4XlvLnnqpcKICAgICAgc2hvd0RldGFpbC52YWx1ZSA9IHRydWU7CiAgICAgIC8vIOWmguaenOayoeaciUFJ5YiG5p6Q5pWw5o2u77yM6Ieq5Yqo6I635Y+WCiAgICAgIGlmICghdGFzay5haSB8fCB0YXNrLmFpLmxlbmd0aCA9PT0gMCkgewogICAgICAgIGdldFRhc2tBaUFuYWx5c2lzKHRhc2suaWQpOwogICAgICB9CiAgICB9CgogICAgLy8g5paw5aKe77ya6I635Y+W5Lu75YqhQUnliIbmnpAKICAgIGZ1bmN0aW9uIGdldFRhc2tBaUFuYWx5c2lzKHRhc2tJZCkgewogICAgICBpZiAoIXRhc2tJZCkgcmV0dXJuOwogICAgICBjb25zb2xlLmxvZygn6I635Y+W5Lu75YqhQUnliIbmnpA6JywgdGFza0lkKTsKCiAgICAgIC8vIOiuvue9ruWvueW6lOS7u+WKoeeahOWKoOi9veeKtuaAgQogICAgICBjb25zdCB0YXNrID0gdGFza3MudmFsdWUuZmluZCh0ID0+IHQuaWQgPT09IHRhc2tJZCk7CiAgICAgIGlmICh0YXNrKSB7CiAgICAgICAgdGFzay5fYWlMb2FkaW5nID0gdHJ1ZTsKICAgICAgfQogICAgICByZXF1ZXN0LmdldChgL2FwaS90YXNrcy8ke3Rhc2tJZH0vYWlfYW5hbHlzaXMvYCkudGhlbihyZXMgPT4gewogICAgICAgIHZhciBfcmVzJGRhdGE7CiAgICAgICAgbGV0IHN1Z2dlc3Rpb25zID0gKChfcmVzJGRhdGEgPSByZXMuZGF0YSkgPT09IG51bGwgfHwgX3JlcyRkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVzJGRhdGEuc3VnZ2VzdGlvbnMpIHx8IFtdOwoKICAgICAgICAvLyDlpoLmnpzlkI7nq6/ov5Tlm57nmoTmlbDmja7kuI3mmK/mlbDnu4TmoLzlvI/vvIznoa7kv53ovazmjaLkuLrmlbDnu4QKICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoc3VnZ2VzdGlvbnMpKSB7CiAgICAgICAgICBzdWdnZXN0aW9ucyA9IFtzdWdnZXN0aW9ucy50b1N0cmluZygpXTsKICAgICAgICB9CgogICAgICAgIC8vIOehruS/neW7uuiuruWMheWQqyLkuJPkuJrliIbmnpAi5ZKMIuW7uuiuriLkuKTkuKrpg6jliIYKICAgICAgICBjb25zdCBmb3JtYXR0ZWRTdWdnZXN0aW9ucyA9IGZvcm1hdEFpQW5hbHlzaXNEYXRhKHN1Z2dlc3Rpb25zKTsKCiAgICAgICAgLy8g5pu05paw5b2T5YmN5omT5byA55qE5Lu75Yqh6K+m5oOFCiAgICAgICAgaWYgKGN1cnJlbnRUYXNrLnZhbHVlICYmIGN1cnJlbnRUYXNrLnZhbHVlLmlkID09PSB0YXNrSWQpIHsKICAgICAgICAgIGN1cnJlbnRUYXNrLnZhbHVlLmFpID0gZm9ybWF0dGVkU3VnZ2VzdGlvbnM7CiAgICAgICAgfQoKICAgICAgICAvLyDmm7TmlrDku7vliqHliJfooajkuK3nmoTku7vliqEKICAgICAgICBjb25zdCB0YXNrID0gdGFza3MudmFsdWUuZmluZCh0ID0+IHQuaWQgPT09IHRhc2tJZCk7CiAgICAgICAgaWYgKHRhc2spIHsKICAgICAgICAgIHRhc2suYWkgPSBmb3JtYXR0ZWRTdWdnZXN0aW9uczsKICAgICAgICB9CiAgICAgICAgY29uc29sZS5sb2coJ+S7u+WKoUFJ5YiG5p6Q57uT5p6cOicsIGZvcm1hdHRlZFN1Z2dlc3Rpb25zKTsKICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICBjb25zb2xlLmVycm9yKCfojrflj5bku7vliqFBSeWIhuaekOWksei0pTonLCBlcnIpOwogICAgICAgIEVsTWVzc2FnZS5lcnJvcign6I635Y+W5Lu75YqhQUnliIbmnpDlpLHotKUnKTsKICAgICAgfSkuZmluYWxseSgoKSA9PiB7CiAgICAgICAgLy8g5riF6Zmk5Yqg6L2954q25oCBCiAgICAgICAgY29uc3QgdGFzayA9IHRhc2tzLnZhbHVlLmZpbmQodCA9PiB0LmlkID09PSB0YXNrSWQpOwogICAgICAgIGlmICh0YXNrKSB7CiAgICAgICAgICB0YXNrLl9haUxvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICAgIC8vIOaWsOW7uuS7u+WKoeW8ueeqlwogICAgZnVuY3Rpb24gaGFuZGxlQWRkVGFzaygpIHsKICAgICAgbmV3VGFzay52YWx1ZSA9IHsKICAgICAgICB0aXRsZTogJycsCiAgICAgICAgYXNzaWduZWU6ICcnLAogICAgICAgIHByaW9yaXR5OiAn5LitJywKICAgICAgICBkdWVEYXRlOiAnJywKICAgICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgICAgdGFnczogJycsCiAgICAgICAgc3RhdHVzOiAndG9kbycsCiAgICAgICAgcHJvZ3Jlc3M6IDAsCiAgICAgICAgY29tcGxldGVkOiAwLAogICAgICAgIHRvdGFsOiAxCiAgICAgIH07CiAgICAgIHNob3dBZGRUYXNrLnZhbHVlID0gdHJ1ZTsKICAgIH0KCiAgICAvLyDnm5HlkKzpobnnm67lj5jljJboh6rliqjmi4nlj5bku7vliqHlkozmiJDlkZgKICAgIHdhdGNoKCgpID0+IHByb3BzLnByb2plY3QsIG5ld1Byb2plY3QgPT4gewogICAgICBpZiAobmV3UHJvamVjdCAmJiBuZXdQcm9qZWN0LmlkKSB7CiAgICAgICAgLy8g5aaC5p6c54i257uE5Lu25Lyg6YCS5LqG5oiQ5ZGY5pWw5o2u77yM5LyY5YWI5L2/55SoCiAgICAgICAgaWYgKHByb3BzLm1lbWJlcnMgJiYgcHJvcHMubWVtYmVycy5sZW5ndGggPiAwKSB7CiAgICAgICAgICBwcm9qZWN0TWVtYmVycy52YWx1ZSA9IHByb3BzLm1lbWJlcnM7CiAgICAgICAgICBjb25zb2xlLmxvZygn5L2/55So54i257uE5Lu25Lyg6YCS55qE5oiQ5ZGY5pWw5o2uOicsIHByb2plY3RNZW1iZXJzLnZhbHVlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZmV0Y2hQcm9qZWN0TWVtYmVycyhuZXdQcm9qZWN0LmlkKTsKICAgICAgICB9CiAgICAgICAgZmV0Y2hUYXNrcygpOwogICAgICB9CiAgICB9LCB7CiAgICAgIGltbWVkaWF0ZTogdHJ1ZQogICAgfSk7CgogICAgLy8g55uR5ZCs54i257uE5Lu25Lyg6YCS55qE5oiQ5ZGY5pWw5o2u5Y+Y5YyWCiAgICB3YXRjaCgoKSA9PiBwcm9wcy5tZW1iZXJzLCBuZXdNZW1iZXJzID0+IHsKICAgICAgaWYgKG5ld01lbWJlcnMgJiYgbmV3TWVtYmVycy5sZW5ndGggPiAwKSB7CiAgICAgICAgcHJvamVjdE1lbWJlcnMudmFsdWUgPSBuZXdNZW1iZXJzOwogICAgICAgIGNvbnNvbGUubG9nKCfmiJDlkZjmlbDmja7mm7TmlrA6JywgcHJvamVjdE1lbWJlcnMudmFsdWUpOwogICAgICB9CiAgICB9LCB7CiAgICAgIGltbWVkaWF0ZTogdHJ1ZQogICAgfSk7CiAgICBvbk1vdW50ZWQoKCkgPT4gewogICAgICBpZiAocHJvcHMucHJvamVjdCAmJiBwcm9wcy5wcm9qZWN0LmlkKSB7CiAgICAgICAgLy8g5aaC5p6c54i257uE5Lu25Lyg6YCS5LqG5oiQ5ZGY5pWw5o2u77yM5LyY5YWI5L2/55SoCiAgICAgICAgaWYgKHByb3BzLm1lbWJlcnMgJiYgcHJvcHMubWVtYmVycy5sZW5ndGggPiAwKSB7CiAgICAgICAgICBwcm9qZWN0TWVtYmVycy52YWx1ZSA9IHByb3BzLm1lbWJlcnM7CiAgICAgICAgICBjb25zb2xlLmxvZygn5L2/55So54i257uE5Lu25Lyg6YCS55qE5oiQ5ZGY5pWw5o2uOicsIHByb2plY3RNZW1iZXJzLnZhbHVlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZmV0Y2hQcm9qZWN0TWVtYmVycyhwcm9wcy5wcm9qZWN0LmlkKTsKICAgICAgICB9CiAgICAgICAgZmV0Y2hUYXNrcygpOwogICAgICB9CiAgICB9KTsKCiAgICAvLyDojrflj5bpobnnm67miJDlkZjvvIhQcm9qZWN0TWVtYmVyIOWIl+ihqO+8jOW4piB1c2VyIOS/oeaBr++8iQogICAgZnVuY3Rpb24gZmV0Y2hQcm9qZWN0TWVtYmVycyhwcm9qZWN0SWQpIHsKICAgICAgaWYgKCFwcm9qZWN0SWQpIHJldHVybjsKICAgICAgcmVxdWVzdC5nZXQoYC9hcGkvcHJvamVjdC1tZW1iZXJzLz9wcm9qZWN0PSR7cHJvamVjdElkfWApLnRoZW4ocmVzID0+IHsKICAgICAgICAvLyDnu5PmnoTvvJpbe2lkOiBQcm9qZWN0TWVtYmVyLmlkLCB1c2VyOiB7aWQsIHVzZXJuYW1lLCAuLi59LCAuLi59XQogICAgICAgIGlmIChBcnJheS5pc0FycmF5KHJlcy5kYXRhKSkgewogICAgICAgICAgcHJvamVjdE1lbWJlcnMudmFsdWUgPSByZXMuZGF0YS5tYXAocG0gPT4gewogICAgICAgICAgICB2YXIgX3BtJHVzZXIsIF9wbSR1c2VyMiwgX3BtJHVzZXIzOwogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIGlkOiBwbS5pZCwKICAgICAgICAgICAgICBuYW1lOiAoKF9wbSR1c2VyID0gcG0udXNlcikgPT09IG51bGwgfHwgX3BtJHVzZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wbSR1c2VyLnVzZXJuYW1lKSB8fCAoKF9wbSR1c2VyMiA9IHBtLnVzZXIpID09PSBudWxsIHx8IF9wbSR1c2VyMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3BtJHVzZXIyLmVtYWlsKSB8fCAn5pyq5ZG95ZCN5oiQ5ZGYJywKICAgICAgICAgICAgICB1c2VySWQ6IChfcG0kdXNlcjMgPSBwbS51c2VyKSA9PT0gbnVsbCB8fCBfcG0kdXNlcjMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wbSR1c2VyMy5pZAogICAgICAgICAgICB9OwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHByb2plY3RNZW1iZXJzLnZhbHVlID0gW107CiAgICAgICAgfQogICAgICAgIGNvbnNvbGUubG9nKCfmi4nlj5bliLDnmoTpobnnm67miJDlkZjvvIhQcm9qZWN0TWVtYmVy77yJOicsIHByb2plY3RNZW1iZXJzLnZhbHVlKTsKICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICBjb25zb2xlLmVycm9yKCfojrflj5bpobnnm67miJDlkZjlpLHotKUnLCBlcnIpOwogICAgICAgIHByb2plY3RNZW1iZXJzLnZhbHVlID0gW107CiAgICAgIH0pOwogICAgfQoKICAgIC8vIOe8lui+keebuOWFs+mAu+i+kQogICAgY29uc3Qgc2hvd0VkaXRUYXNrID0gcmVmKGZhbHNlKTsKICAgIGNvbnN0IGVkaXRUYXNrID0gcmVmKG51bGwpOwogICAgZnVuY3Rpb24gb3BlbkVkaXRUYXNrKHRhc2spIHsKICAgICAgZWRpdFRhc2sudmFsdWUgPSB7CiAgICAgICAgLi4udGFzaywKICAgICAgICBzdGF0dXM6IHRhc2suc3RhdHVzIHx8ICd0b2RvJwogICAgICB9OwogICAgICBzaG93RWRpdFRhc2sudmFsdWUgPSB0cnVlOwogICAgfQogICAgZnVuY3Rpb24gc2F2ZUVkaXRUYXNrKCkgewogICAgICBpZiAoIWVkaXRUYXNrLnZhbHVlLnRpdGxlKSB7CiAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfor7floavlhpnku7vliqHlkI3np7AnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgcmVxdWVzdC5wYXRjaChgL2FwaS90YXNrcy8ke2VkaXRUYXNrLnZhbHVlLmlkfS9gLCB7CiAgICAgICAgdGl0bGU6IGVkaXRUYXNrLnZhbHVlLnRpdGxlLAogICAgICAgIGRlc2NyaXB0aW9uOiBlZGl0VGFzay52YWx1ZS5kZXNjcmlwdGlvbiwKICAgICAgICBkdWVfZGF0ZTogZWRpdFRhc2sudmFsdWUuZHVlRGF0ZSwKICAgICAgICBwcmlvcml0eTogZWRpdFRhc2sudmFsdWUucHJpb3JpdHkgPT09ICfpq5gnID8gJ2hpZ2gnIDogZWRpdFRhc2sudmFsdWUucHJpb3JpdHkgPT09ICfkvY4nID8gJ2xvdycgOiAnbWVkaXVtJywKICAgICAgICB0YWdzOiBlZGl0VGFzay52YWx1ZS50YWdzLAogICAgICAgIHN0YXR1czogZWRpdFRhc2sudmFsdWUuc3RhdHVzIHx8ICd0b2RvJwogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICBFbE1lc3NhZ2Uuc3VjY2Vzcygn5Lu75Yqh5pu05paw5oiQ5YqfJyk7CiAgICAgICAgc2hvd0VkaXRUYXNrLnZhbHVlID0gZmFsc2U7CiAgICAgICAgZmV0Y2hUYXNrcygpOwogICAgICAgIHNob3dEZXRhaWwudmFsdWUgPSBmYWxzZTsKICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgIEVsTWVzc2FnZS5lcnJvcign5Lu75Yqh5pu05paw5aSx6LSlJyk7CiAgICAgIH0pOwogICAgfQoKICAgIC8vIOWIoOmZpOebuOWFs+mAu+i+kQogICAgZnVuY3Rpb24gY29uZmlybURlbGV0ZVRhc2sodGFzaykgewogICAgICBFbE1lc3NhZ2VCb3guY29uZmlybSgn56Gu5a6a6KaB5Yig6Zmk6K+l5Lu75Yqh5ZCX77yfJywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+WIoOmZpCcsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIHJlcXVlc3QuZGVsZXRlKGAvYXBpL3Rhc2tzLyR7dGFzay5pZH0vYCkudGhlbigoKSA9PiB7CiAgICAgICAgICBFbE1lc3NhZ2Uuc3VjY2Vzcygn5Lu75Yqh5bey5Yig6ZmkJyk7CiAgICAgICAgICBmZXRjaFRhc2tzKCk7CiAgICAgICAgICBzaG93RGV0YWlsLnZhbHVlID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogICAgZnVuY3Rpb24gcmVmcmVzaEFsbFRhc2tBaUFuYWx5c2lzKCkgewogICAgICBpZiAoIXRhc2tzLnZhbHVlLmxlbmd0aCkgcmV0dXJuOwogICAgICByZWZyZXNoaW5nQWkudmFsdWUgPSB0cnVlOwogICAgICBsZXQgZmluaXNoZWQgPSAwOwogICAgICBjb25zdCB0b3RhbCA9IHRhc2tzLnZhbHVlLmxlbmd0aDsKICAgICAgdGFza3MudmFsdWUuZm9yRWFjaCh0YXNrID0+IHsKICAgICAgICB0YXNrLl9haUxvYWRpbmcgPSB0cnVlOwogICAgICAgIHJlcXVlc3QuZ2V0KGAvYXBpL3Rhc2tzLyR7dGFzay5pZH0vYWlfYW5hbHlzaXMvYCkudGhlbihyZXMgPT4gewogICAgICAgICAgdmFyIF9yZXMkZGF0YTI7CiAgICAgICAgICBsZXQgc3VnZ2VzdGlvbnMgPSAoKF9yZXMkZGF0YTIgPSByZXMuZGF0YSkgPT09IG51bGwgfHwgX3JlcyRkYXRhMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JlcyRkYXRhMi5zdWdnZXN0aW9ucykgfHwgW107CgogICAgICAgICAgLy8g5aaC5p6c5ZCO56uv6L+U5Zue55qE5pWw5o2u5LiN5piv5pWw57uE5qC85byP77yM56Gu5L+d6L2s5o2i5Li65pWw57uECiAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoc3VnZ2VzdGlvbnMpKSB7CiAgICAgICAgICAgIHN1Z2dlc3Rpb25zID0gW3N1Z2dlc3Rpb25zLnRvU3RyaW5nKCldOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIOehruS/neW7uuiuruWMheWQqyLkuJPkuJrliIbmnpAi5ZKMIuW7uuiuriLkuKTkuKrpg6jliIYKICAgICAgICAgIHRhc2suYWkgPSBmb3JtYXRBaUFuYWx5c2lzRGF0YShzdWdnZXN0aW9ucyk7CiAgICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGFzay5haSA9IFtdOwogICAgICAgIH0pLmZpbmFsbHkoKCkgPT4gewogICAgICAgICAgdGFzay5fYWlMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICBmaW5pc2hlZCsrOwogICAgICAgICAgaWYgKGZpbmlzaGVkID09PSB0b3RhbCkgewogICAgICAgICAgICByZWZyZXNoaW5nQWkudmFsdWUgPSBmYWxzZTsKICAgICAgICAgICAgRWxNZXNzYWdlLnN1Y2Nlc3MoJ0FJ5YiG5p6Q5a6M5oiQJyk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQoKICAgIC8vIOWkhOeQhkFJ5YaF5a6577yM56Gu5L+d5a6M5pW05pi+56S677yM5YyF5ous5bu66K6u6YOo5YiGCiAgICBmdW5jdGlvbiBwcm9jZXNzQUlDb250ZW50KGFpSXRlbXMpIHsKICAgICAgaWYgKCFhaUl0ZW1zIHx8ICFBcnJheS5pc0FycmF5KGFpSXRlbXMpKSByZXR1cm4gW107CgogICAgICAvLyDmo4Dmn6XmmK/lkKbmnIki5bu66K6uOiLkvYbmsqHmnInot5/pmo/lhoXlrrnnmoTmg4XlhrUKICAgICAgbGV0IGhhc0luY29tcGxldGVEYXRhID0gZmFsc2U7CiAgICAgIGlmIChhaUl0ZW1zLmxlbmd0aCA+IDApIHsKICAgICAgICBjb25zdCBsYXN0SXRlbSA9IGFpSXRlbXNbYWlJdGVtcy5sZW5ndGggLSAxXTsKICAgICAgICBpZiAodHlwZW9mIGxhc3RJdGVtID09PSAnc3RyaW5nJyAmJiAobGFzdEl0ZW0udHJpbSgpID09PSAn5bu66K6uOicgfHwgbGFzdEl0ZW0udHJpbSgpID09PSAn5bu66K6u77yaJykpIHsKICAgICAgICAgIGhhc0luY29tcGxldGVEYXRhID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIOWmguaenOWPkeeOsOS4jeWujOaVtOaVsOaNru+8jOWImeWPlua2iOWtl+espumZkOWItgogICAgICBpZiAoaGFzSW5jb21wbGV0ZURhdGEpIHsKICAgICAgICByZXR1cm4gYWlJdGVtczsKICAgICAgfQoKICAgICAgLy8g5qC55o2u5YW35L2T5oOF5Ya16YeN57uE5YaF5a6577yM56Gu5L+d5YiG5p6Q5ZKM5bu66K6u6YO96IO95a6M5pW05pi+56S6CiAgICAgIC8vIOWwneivleWwhuaVsOe7hOmHjeaWsOe7hOWQiOS4uuabtOaciemAu+i+keeahOe7k+aehAogICAgICBjb25zdCByZXN1bHQgPSBbXTsKICAgICAgbGV0IGN1cnJlbnRDYXRlZ29yeSA9ICcnOwogICAgICBsZXQgdGVtcEl0ZW1zID0gW107CiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBhaUl0ZW1zKSB7CiAgICAgICAgaWYgKHR5cGVvZiBpdGVtICE9PSAnc3RyaW5nJykgewogICAgICAgICAgcmVzdWx0LnB1c2goaXRlbSk7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CgogICAgICAgIC8vIOajgOa1i+aWsOeahOWIhuexu+agh+mimAogICAgICAgIGlmIChpdGVtLmluY2x1ZGVzKCfkuJPkuJrliIbmnpA6JykgfHwgaXRlbS5pbmNsdWRlcygn5LiT5Lia5YiG5p6Q77yaJykpIHsKICAgICAgICAgIGlmIChjdXJyZW50Q2F0ZWdvcnkgJiYgdGVtcEl0ZW1zLmxlbmd0aCkgewogICAgICAgICAgICByZXN1bHQucHVzaChgJHtjdXJyZW50Q2F0ZWdvcnl9JHt0ZW1wSXRlbXMuam9pbignICcpfWApOwogICAgICAgICAgfQogICAgICAgICAgY3VycmVudENhdGVnb3J5ID0gJ+S4k+S4muWIhuaekDogJzsKICAgICAgICAgIHRlbXBJdGVtcyA9IFtdOwogICAgICAgIH0gZWxzZSBpZiAoaXRlbS5pbmNsdWRlcygn5bu66K6uOicpIHx8IGl0ZW0uaW5jbHVkZXMoJ+W7uuiuru+8micpKSB7CiAgICAgICAgICBpZiAoY3VycmVudENhdGVnb3J5ICYmIHRlbXBJdGVtcy5sZW5ndGgpIHsKICAgICAgICAgICAgcmVzdWx0LnB1c2goYCR7Y3VycmVudENhdGVnb3J5fSR7dGVtcEl0ZW1zLmpvaW4oJyAnKX1gKTsKICAgICAgICAgIH0KICAgICAgICAgIGN1cnJlbnRDYXRlZ29yeSA9ICflu7rorq46ICc7CiAgICAgICAgICB0ZW1wSXRlbXMgPSBbXTsKICAgICAgICB9CiAgICAgICAgLy8g5aaC5p6c5piv5LulIi0i5oiWIuKAoiLlvIDlpLTnmoTliJfooajpobnvvIzljZXni6zkv53nlZkKICAgICAgICBlbHNlIGlmIChpdGVtLnRyaW0oKS5zdGFydHNXaXRoKCctJykgfHwgaXRlbS50cmltKCkuc3RhcnRzV2l0aCgn4oCiJykpIHsKICAgICAgICAgIHJlc3VsdC5wdXNoKGl0ZW0pOwogICAgICAgIH0KICAgICAgICAvLyDlhbbku5bmg4XlhrXmt7vliqDliLDlvZPliY3liIbnsbsKICAgICAgICBlbHNlIHsKICAgICAgICAgIHRlbXBJdGVtcy5wdXNoKGl0ZW0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgLy8g5re75Yqg5pyA5ZCO5LiA5Liq5YiG57G755qE5YaF5a65CiAgICAgIGlmIChjdXJyZW50Q2F0ZWdvcnkgJiYgdGVtcEl0ZW1zLmxlbmd0aCkgewogICAgICAgIHJlc3VsdC5wdXNoKGAke2N1cnJlbnRDYXRlZ29yeX0ke3RlbXBJdGVtcy5qb2luKCcgJyl9YCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlc3VsdC5sZW5ndGggPyByZXN1bHQgOiBhaUl0ZW1zOwogICAgfQoKICAgIC8vIOWwhk1hcmtkb3du5qC85byP5YyW5Li6SFRNTOaYvuekugogICAgZnVuY3Rpb24gZm9ybWF0TWFya2Rvd24odGV4dCkgewogICAgICBpZiAoIXRleHQpIHJldHVybiAnJzsKICAgICAgdHJ5IHsKICAgICAgICAvLyDnroDljZXlpITnkIbkuIDkupttYXJrZG93buivreazlQogICAgICAgIC8vIOWKoOeylwogICAgICAgIGxldCByZXN1bHQgPSB0ZXh0LnJlcGxhY2UoL1wqXCooLio/KVwqXCovZywgJzxzdHJvbmc+JDE8L3N0cm9uZz4nKTsKICAgICAgICAvLyDmlpzkvZMKICAgICAgICByZXN1bHQgPSByZXN1bHQucmVwbGFjZSgvXCooLio/KVwqL2csICc8ZW0+JDE8L2VtPicpOwogICAgICAgIC8vIOihjOWGheS7o+eggQogICAgICAgIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKC9gKC4qPylgL2csICc8Y29kZT4kMTwvY29kZT4nKTsKICAgICAgICAvLyDotoXpk77mjqUKICAgICAgICByZXN1bHQgPSByZXN1bHQucmVwbGFjZSgvXFsoLio/KVxdXCgoLio/KVwpL2csICc8YSBocmVmPSIkMiIgdGFyZ2V0PSJfYmxhbmsiPiQxPC9hPicpOwoKICAgICAgICAvLyDlpITnkIbku6UiLSLlvIDlpLTnmoTliJfooajpobnvvIznoa7kv53mraPnoa7mmL7npLoKICAgICAgICBpZiAocmVzdWx0LnRyaW0oKS5zdGFydHNXaXRoKCctJykgfHwgcmVzdWx0LnRyaW0oKS5zdGFydHNXaXRoKCfigKInKSkgewogICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UoL15bXHMt4oCiXSsvLCAnJyk7CiAgICAgICAgICByZXN1bHQgPSBgPHNwYW4gY2xhc3M9Imxpc3QtYnVsbGV0Ij7igKI8L3NwYW4+ICR7cmVzdWx0fWA7CiAgICAgICAgfQoKICAgICAgICAvLyDlpITnkIblhpLlj7flkI7nmoTlhoXlrrnvvIzlpoLmnpzmmK/liIbnsbvmoIfpopgKICAgICAgICBpZiAocmVzdWx0LmluY2x1ZGVzKCfkuJPkuJrliIbmnpA6JykgfHwgcmVzdWx0LmluY2x1ZGVzKCfkuJPkuJrliIbmnpDvvJonKSkgewogICAgICAgICAgcmVzdWx0ID0gYDxzdHJvbmcgY2xhc3M9ImFuYWx5c2lzLXRpdGxlIj7kuJPkuJrliIbmnpA6PC9zdHJvbmc+ICR7cmVzdWx0LnJlcGxhY2UoL+S4k+S4muWIhuaekFs677yaXVxzKi8sICcnKX1gOwogICAgICAgIH0gZWxzZSBpZiAocmVzdWx0LmluY2x1ZGVzKCflu7rorq46JykgfHwgcmVzdWx0LmluY2x1ZGVzKCflu7rorq7vvJonKSkgewogICAgICAgICAgcmVzdWx0ID0gYDxzdHJvbmcgY2xhc3M9InN1Z2dlc3Rpb24tdGl0bGUiPuW7uuiurjo8L3N0cm9uZz4gJHtyZXN1bHQucmVwbGFjZSgv5bu66K6uWzrvvJpdXHMqLywgJycpfWA7CiAgICAgICAgfQogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCdNYXJrZG93buagvOW8j+WMlumUmeivrzonLCBlKTsKICAgICAgICByZXR1cm4gdGV4dDsKICAgICAgfQogICAgfQoKICAgIC8vIOWwhkFJ6L+U5Zue55qE5YiG5p6Q5YaF5a655qC85byP5YyW5Li65qCH5YeG57uT5p6ECiAgICBmdW5jdGlvbiBmb3JtYXRBaUFuYWx5c2lzRGF0YShpdGVtcykgewogICAgICBpZiAoIWl0ZW1zIHx8ICFpdGVtcy5sZW5ndGgpIHJldHVybiBbXTsKCiAgICAgIC8vIOajgOafpeWOn+Wni+WGheWuuQogICAgICBjb25zdCBvcmlnaW5hbFRleHQgPSBpdGVtcy5qb2luKCcgJyk7CgogICAgICAvLyDmo4Dmn6XmmK/lkKblt7Lnu4/ljIXlkKvkuJPkuJrliIbmnpDlkozlu7rorq7kuKTkuKrpg6jliIYKICAgICAgY29uc3QgaGFzQW5hbHlzaXMgPSBpdGVtcy5zb21lKGl0ZW0gPT4gdHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnICYmIChpdGVtLmluY2x1ZGVzKCfkuJPkuJrliIbmnpA6JykgfHwgaXRlbS5pbmNsdWRlcygn5LiT5Lia5YiG5p6Q77yaJykpKTsKICAgICAgY29uc3QgaGFzU3VnZ2VzdGlvbiA9IGl0ZW1zLnNvbWUoaXRlbSA9PiB0eXBlb2YgaXRlbSA9PT0gJ3N0cmluZycgJiYgKGl0ZW0uaW5jbHVkZXMoJ+W7uuiurjonKSB8fCBpdGVtLmluY2x1ZGVzKCflu7rorq7vvJonKSkpOwoKICAgICAgLy8g5aaC5p6c5pyA5ZCO5LiA6aG55pivIuW7uuiurjoi5LiU5rKh5pyJ5YaF5a6577yM5re75Yqg6buY6K6k5bu66K6uCiAgICAgIGlmIChpdGVtcy5sZW5ndGggPiAwKSB7CiAgICAgICAgY29uc3QgbGFzdEl0ZW0gPSBpdGVtc1tpdGVtcy5sZW5ndGggLSAxXTsKICAgICAgICBpZiAodHlwZW9mIGxhc3RJdGVtID09PSAnc3RyaW5nJyAmJiAobGFzdEl0ZW0udHJpbSgpID09PSAn5bu66K6uOicgfHwgbGFzdEl0ZW0udHJpbSgpID09PSAn5bu66K6u77yaJykpIHsKICAgICAgICAgIC8vIOa3u+WKoOm7mOiupOW7uuiurgogICAgICAgICAgaXRlbXMucHVzaCgnLSDlu7rorq7ov5vkuIDmraXmmI7noa7ku7vliqHnmoTnu4boioLlkozlhbfkvZPopoHmsYInKTsKICAgICAgICAgIGl0ZW1zLnB1c2goJy0g6ICD6JmR5o+Q5YmN5a6J5o6S6LWE5rqQ77yM56Gu5L+d5Lu75Yqh5oyJ5pe25a6M5oiQJyk7CiAgICAgICAgfQogICAgICB9CgogICAgICAvLyDlrozlhajmsqHmnInlu7rorq7pg6jliIbvvIzliJnmt7vliqDlu7rorq7pg6jliIYKICAgICAgaWYgKCFoYXNTdWdnZXN0aW9uKSB7CiAgICAgICAgaXRlbXMucHVzaCgn5bu66K6uOicpOwogICAgICAgIGl0ZW1zLnB1c2goJy0g5bu66K6u6L+b5LiA5q2l5piO56Gu5Lu75Yqh55qE57uG6IqC5ZKM5YW35L2T6KaB5rGCJyk7CiAgICAgICAgaXRlbXMucHVzaCgnLSDogIPomZHmj5DliY3lronmjpLotYTmupDvvIznoa7kv53ku7vliqHmjInml7blrozmiJAnKTsKICAgICAgfQoKICAgICAgLy8g5a6M5YWo5rKh5pyJ5YiG5p6Q6YOo5YiG77yM5YiZ5re75Yqg5YiG5p6Q6YOo5YiGCiAgICAgIGlmICghaGFzQW5hbHlzaXMgJiYgIW9yaWdpbmFsVGV4dC5pbmNsdWRlcygn57Sn5oCl5oCnJykgJiYgIW9yaWdpbmFsVGV4dC5pbmNsdWRlcygn6YeN6KaB5oCnJykpIHsKICAgICAgICAvLyDlnKjmnIDliY3pnaLmt7vliqDliIbmnpDpg6jliIYKICAgICAgICBpdGVtcy51bnNoaWZ0KCctIOagueaNruS7u+WKoeaPj+i/sOi/m+ihjOWIneatpeWIhuaekO+8jOWPr+iDvemcgOimgeabtOWkmuS/oeaBrycpOwogICAgICAgIGl0ZW1zLnVuc2hpZnQoJ+S4k+S4muWIhuaekDonKTsKICAgICAgfQoKICAgICAgLy8g5aaC5p6c5pyJ5YiG5p6Q5ZKM5bu66K6u5qCH6K6w77yM5L2G5qC85byP5LiN6KeE6IyD77yM6YeN5paw57uE57uH5YaF5a65CiAgICAgIGlmIChoYXNBbmFseXNpcyB8fCBoYXNTdWdnZXN0aW9uKSB7CiAgICAgICAgLy8g6YeN57uE5YaF5a655Li65qCH5YeG5qC85byPCiAgICAgICAgY29uc3QgcmVzdWx0ID0gW107CiAgICAgICAgbGV0IGN1cnJlbnRTZWN0aW9uID0gbnVsbDsKICAgICAgICBsZXQgaGFzQWRkZWRBbmFseXNpc0l0ZW1zID0gZmFsc2U7CiAgICAgICAgbGV0IGhhc0FkZGVkU3VnZ2VzdGlvbkl0ZW1zID0gZmFsc2U7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgY29uc3QgaXRlbSA9IGl0ZW1zW2ldOwogICAgICAgICAgaWYgKHR5cGVvZiBpdGVtICE9PSAnc3RyaW5nJykgewogICAgICAgICAgICByZXN1bHQucHVzaChpdGVtKTsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CgogICAgICAgICAgLy8g5qOA5rWL56ug6IqC5qCH6aKYCiAgICAgICAgICBpZiAoaXRlbS5pbmNsdWRlcygn5LiT5Lia5YiG5p6QOicpIHx8IGl0ZW0uaW5jbHVkZXMoJ+S4k+S4muWIhuaekO+8micpKSB7CiAgICAgICAgICAgIGN1cnJlbnRTZWN0aW9uID0gJ2FuYWx5c2lzJzsKICAgICAgICAgICAgcmVzdWx0LnB1c2goaXRlbSk7CiAgICAgICAgICAgIGhhc0FkZGVkQW5hbHlzaXNJdGVtcyA9IGZhbHNlOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS5pbmNsdWRlcygn5bu66K6uOicpIHx8IGl0ZW0uaW5jbHVkZXMoJ+W7uuiuru+8micpKSB7CiAgICAgICAgICAgIGN1cnJlbnRTZWN0aW9uID0gJ3N1Z2dlc3Rpb24nOwogICAgICAgICAgICByZXN1bHQucHVzaChpdGVtKTsKICAgICAgICAgICAgaGFzQWRkZWRTdWdnZXN0aW9uSXRlbXMgPSBmYWxzZTsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CgogICAgICAgICAgLy8g5re75Yqg5YmN57yA5bm25YiG57G75aSE55CGCiAgICAgICAgICBpZiAoY3VycmVudFNlY3Rpb24gPT09ICdhbmFseXNpcycpIHsKICAgICAgICAgICAgaWYgKCFpdGVtLnRyaW0oKS5zdGFydHNXaXRoKCctJykgJiYgIWl0ZW0udHJpbSgpLnN0YXJ0c1dpdGgoJ+KAoicpKSB7CiAgICAgICAgICAgICAgcmVzdWx0LnB1c2goYC0gJHtpdGVtfWApOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGl0ZW0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGhhc0FkZGVkQW5hbHlzaXNJdGVtcyA9IHRydWU7CiAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRTZWN0aW9uID09PSAnc3VnZ2VzdGlvbicpIHsKICAgICAgICAgICAgaWYgKCFpdGVtLnRyaW0oKS5zdGFydHNXaXRoKCctJykgJiYgIWl0ZW0udHJpbSgpLnN0YXJ0c1dpdGgoJ+KAoicpKSB7CiAgICAgICAgICAgICAgcmVzdWx0LnB1c2goYC0gJHtpdGVtfWApOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGl0ZW0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGhhc0FkZGVkU3VnZ2VzdGlvbkl0ZW1zID0gdHJ1ZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGl0ZW0pOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8g56Gu5L+d5q+P5Liq6YOo5YiG6YO95pyJ5YaF5a65CiAgICAgICAgaWYgKGN1cnJlbnRTZWN0aW9uID09PSAnYW5hbHlzaXMnICYmICFoYXNBZGRlZEFuYWx5c2lzSXRlbXMpIHsKICAgICAgICAgIHJlc3VsdC5wdXNoKCctIOagueaNruS7u+WKoeaPj+i/sOi/m+ihjOWIneatpeWIhuaekO+8jOWPr+iDvemcgOimgeabtOWkmuS/oeaBrycpOwogICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFNlY3Rpb24gPT09ICdzdWdnZXN0aW9uJyAmJiAhaGFzQWRkZWRTdWdnZXN0aW9uSXRlbXMpIHsKICAgICAgICAgIHJlc3VsdC5wdXNoKCctIOW7uuiurui/m+S4gOatpeaYjuehruS7u+WKoeeahOe7huiKguWSjOWFt+S9k+imgeaxgicpOwogICAgICAgICAgcmVzdWx0LnB1c2goJy0g6ICD6JmR5o+Q5YmN5a6J5o6S6LWE5rqQ77yM56Gu5L+d5Lu75Yqh5oyJ5pe25a6M5oiQJyk7CiAgICAgICAgfQogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgIH0KCiAgICAgIC8vIOWmguaenOayoeacieeJueauiueJueW+ge+8jOWwseeugOWNleWIhuS4uuWIhuaekOWSjOW7uuiuruS4pOmDqOWIhgogICAgICBjb25zdCBhbmFseXNpc0l0ZW1zID0gW107CiAgICAgIGNvbnN0IHN1Z2dlc3Rpb25JdGVtcyA9IFtdOwoKICAgICAgLy8g5YiG57G76aG555uuCiAgICAgIGl0ZW1zLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgaWYgKCFpdGVtIHx8IHR5cGVvZiBpdGVtICE9PSAnc3RyaW5nJykgcmV0dXJuOwogICAgICAgIGlmIChpdGVtLmluY2x1ZGVzKCfntKfmgKXmgKcnKSB8fCBpdGVtLmluY2x1ZGVzKCfph43opoHmgKcnKSB8fCBpdGVtLmluY2x1ZGVzKCflj6/ooYzmgKcnKSkgewogICAgICAgICAgYW5hbHlzaXNJdGVtcy5wdXNoKGl0ZW0pOwogICAgICAgIH0gZWxzZSBpZiAoIWl0ZW0uaW5jbHVkZXMoJ+S4k+S4muWIhuaekCcpICYmICFpdGVtLmluY2x1ZGVzKCflu7rorq46JykgJiYgIWl0ZW0uaW5jbHVkZXMoJ+W7uuiuru+8micpKSB7CiAgICAgICAgICBzdWdnZXN0aW9uSXRlbXMucHVzaChpdGVtKTsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgLy8g5aaC5p6c5YiG57G75ZCO5rKh5pyJ6Laz5aSf55qE5bu66K6u77yM5re75Yqg6buY6K6k5bu66K6uCiAgICAgIGlmIChzdWdnZXN0aW9uSXRlbXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgc3VnZ2VzdGlvbkl0ZW1zLnB1c2goJ+W7uuiurui/m+S4gOatpeaYjuehruS7u+WKoeeahOe7huiKguWSjOWFt+S9k+imgeaxgicpOwogICAgICAgIHN1Z2dlc3Rpb25JdGVtcy5wdXNoKCfogIPomZHmj5DliY3lronmjpLotYTmupDvvIznoa7kv53ku7vliqHmjInml7blrozmiJAnKTsKICAgICAgfQoKICAgICAgLy8g5p6E6YCg57uT5p6cCiAgICAgIGNvbnN0IHJlc3VsdCA9IFtdOwogICAgICByZXN1bHQucHVzaCgn5LiT5Lia5YiG5p6QOicpOwogICAgICBpZiAoYW5hbHlzaXNJdGVtcy5sZW5ndGggPiAwKSB7CiAgICAgICAgcmVzdWx0LnB1c2goLi4uYW5hbHlzaXNJdGVtcy5tYXAoaXRlbSA9PiBpdGVtLnRyaW0oKS5zdGFydHNXaXRoKCctJykgPyBpdGVtIDogYC0gJHtpdGVtfWApKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXN1bHQucHVzaCgnLSDmoLnmja7ku7vliqHmj4/ov7Dov5vooYzliJ3mraXliIbmnpDvvIzlj6/og73pnIDopoHmm7TlpJrkv6Hmga8nKTsKICAgICAgfQogICAgICByZXN1bHQucHVzaCgn5bu66K6uOicpOwogICAgICBpZiAoc3VnZ2VzdGlvbkl0ZW1zLmxlbmd0aCA+IDApIHsKICAgICAgICByZXN1bHQucHVzaCguLi5zdWdnZXN0aW9uSXRlbXMubWFwKGl0ZW0gPT4gaXRlbS50cmltKCkuc3RhcnRzV2l0aCgnLScpID8gaXRlbSA6IGAtICR7aXRlbX1gKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVzdWx0LnB1c2goJy0g5bu66K6u6L+b5LiA5q2l5piO56Gu5Lu75Yqh55qE57uG6IqC5ZKM5YW35L2T6KaB5rGCJyk7CiAgICAgICAgcmVzdWx0LnB1c2goJy0g6ICD6JmR5o+Q5YmN5a6J5o6S6LWE5rqQ77yM56Gu5L+d5Lu75Yqh5oyJ5pe25a6M5oiQJyk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICAvLyDmlrDlop7vvJrliKTmlq3mmK/lkKbkuLrlvZPliY3nmbvlvZXnlKjmiLcKICAgIGZ1bmN0aW9uIGlzQ3VycmVudFVzZXIobWVtYmVySWQpIHsKICAgICAgaWYgKCFjdXJyZW50VXNlci52YWx1ZSB8fCAhY3VycmVudFVzZXIudmFsdWUuaWQpIHJldHVybiBmYWxzZTsKICAgICAgcmV0dXJuIE51bWJlcihtZW1iZXJJZCkgPT09IE51bWJlcihjdXJyZW50VXNlci52YWx1ZS5pZCk7CiAgICB9CiAgICByZXR1cm4gKF9jdHgsIF9jYWNoZSkgPT4gewogICAgICBjb25zdCBfY29tcG9uZW50X2VsX2J1dHRvbiA9IF9yZXNvbHZlQ29tcG9uZW50KCJlbC1idXR0b24iKTsKICAgICAgY29uc3QgX2NvbXBvbmVudF9lbF9pbnB1dCA9IF9yZXNvbHZlQ29tcG9uZW50KCJlbC1pbnB1dCIpOwogICAgICBjb25zdCBfY29tcG9uZW50X2VsX29wdGlvbiA9IF9yZXNvbHZlQ29tcG9uZW50KCJlbC1vcHRpb24iKTsKICAgICAgY29uc3QgX2NvbXBvbmVudF9lbF9zZWxlY3QgPSBfcmVzb2x2ZUNvbXBvbmVudCgiZWwtc2VsZWN0Iik7CiAgICAgIGNvbnN0IF9jb21wb25lbnRfZWxfYmFkZ2UgPSBfcmVzb2x2ZUNvbXBvbmVudCgiZWwtYmFkZ2UiKTsKICAgICAgY29uc3QgX2NvbXBvbmVudF9lbF9lbXB0eSA9IF9yZXNvbHZlQ29tcG9uZW50KCJlbC1lbXB0eSIpOwogICAgICBjb25zdCBfY29tcG9uZW50X2VsX3RhZyA9IF9yZXNvbHZlQ29tcG9uZW50KCJlbC10YWciKTsKICAgICAgY29uc3QgX2NvbXBvbmVudF9lbF9pY29uID0gX3Jlc29sdmVDb21wb25lbnQoImVsLWljb24iKTsKICAgICAgY29uc3QgX2NvbXBvbmVudF9lbF9wcm9ncmVzcyA9IF9yZXNvbHZlQ29tcG9uZW50KCJlbC1wcm9ncmVzcyIpOwogICAgICBjb25zdCBfY29tcG9uZW50X2VsX2Zvcm1faXRlbSA9IF9yZXNvbHZlQ29tcG9uZW50KCJlbC1mb3JtLWl0ZW0iKTsKICAgICAgY29uc3QgX2NvbXBvbmVudF9lbF9kYXRlX3BpY2tlciA9IF9yZXNvbHZlQ29tcG9uZW50KCJlbC1kYXRlLXBpY2tlciIpOwogICAgICBjb25zdCBfY29tcG9uZW50X2VsX2Zvcm0gPSBfcmVzb2x2ZUNvbXBvbmVudCgiZWwtZm9ybSIpOwogICAgICBjb25zdCBfY29tcG9uZW50X2VsX2RpYWxvZyA9IF9yZXNvbHZlQ29tcG9uZW50KCJlbC1kaWFsb2ciKTsKICAgICAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygiZGl2IiwgX2hvaXN0ZWRfMSwgW19jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzIsIFtfY2FjaGVbMjZdIHx8IChfY2FjaGVbMjZdID0gX2NyZWF0ZUVsZW1lbnRWTm9kZSgiaDUiLCB7CiAgICAgICAgY2xhc3M6ICJtb2R1bGUtdGl0bGUiCiAgICAgIH0sICLku7vliqHnrqHnkIYiLCAtMSkpLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBfaG9pc3RlZF8zLCBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfYnV0dG9uLCB7CiAgICAgICAgdHlwZTogInByaW1hcnkiLAogICAgICAgIHNpemU6ICJkZWZhdWx0IiwKICAgICAgICByb3VuZDogIiIsCiAgICAgICAgb25DbGljazogaGFuZGxlQWRkVGFzawogICAgICB9LCB7CiAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gX2NhY2hlWzI0XSB8fCAoX2NhY2hlWzI0XSA9IFtfY3JlYXRlVGV4dFZOb2RlKCLmlrDlu7rku7vliqEiKV0pKSwKICAgICAgICBfOiAxCiAgICAgIH0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9idXR0b24sIHsKICAgICAgICB0eXBlOiAiaW5mbyIsCiAgICAgICAgc2l6ZTogImRlZmF1bHQiLAogICAgICAgIHJvdW5kOiAiIiwKICAgICAgICBvbkNsaWNrOiByZWZyZXNoQWxsVGFza0FpQW5hbHlzaXMsCiAgICAgICAgbG9hZGluZzogcmVmcmVzaGluZ0FpLnZhbHVlCiAgICAgIH0sIHsKICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBfY2FjaGVbMjVdIHx8IChfY2FjaGVbMjVdID0gW19jcmVhdGVUZXh0Vk5vZGUoIuWIt+aWsOWIhuaekCIpXSkpLAogICAgICAgIF86IDEKICAgICAgfSwgOCwgWyJsb2FkaW5nIl0pXSldKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfNCwgW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2lucHV0LCB7CiAgICAgICAgbW9kZWxWYWx1ZTogc2VhcmNoLnZhbHVlLAogICAgICAgICJvblVwZGF0ZTptb2RlbFZhbHVlIjogX2NhY2hlWzBdIHx8IChfY2FjaGVbMF0gPSAkZXZlbnQgPT4gc2VhcmNoLnZhbHVlID0gJGV2ZW50KSwKICAgICAgICBwbGFjZWhvbGRlcjogIuaQnOe0ouS7u+WKoS4uLiIsCiAgICAgICAgY2xlYXJhYmxlOiAiIiwKICAgICAgICBjbGFzczogImZpbHRlci1pbnB1dCIKICAgICAgfSwgbnVsbCwgOCwgWyJtb2RlbFZhbHVlIl0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9zZWxlY3QsIHsKICAgICAgICBtb2RlbFZhbHVlOiBmaWx0ZXJBc3NpZ25lZS52YWx1ZSwKICAgICAgICAib25VcGRhdGU6bW9kZWxWYWx1ZSI6IF9jYWNoZVsxXSB8fCAoX2NhY2hlWzFdID0gJGV2ZW50ID0+IGZpbHRlckFzc2lnbmVlLnZhbHVlID0gJGV2ZW50KSwKICAgICAgICBwbGFjZWhvbGRlcjogIui0n+i0o+S6uiIsCiAgICAgICAgY2xlYXJhYmxlOiAiIiwKICAgICAgICBjbGFzczogImZpbHRlci1zZWxlY3QiCiAgICAgIH0sIHsKICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfb3B0aW9uLCB7CiAgICAgICAgICBsYWJlbDogIuWFqOmDqCIsCiAgICAgICAgICB2YWx1ZTogIiIKICAgICAgICB9KSwgKF9vcGVuQmxvY2sodHJ1ZSksIF9jcmVhdGVFbGVtZW50QmxvY2soX0ZyYWdtZW50LCBudWxsLCBfcmVuZGVyTGlzdChwcm9qZWN0TWVtYmVycy52YWx1ZSwgbWVtYmVyID0+IHsKICAgICAgICAgIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfY29tcG9uZW50X2VsX29wdGlvbiwgewogICAgICAgICAgICBrZXk6IG1lbWJlci5pZCwKICAgICAgICAgICAgbGFiZWw6IG1lbWJlci5uYW1lLAogICAgICAgICAgICB2YWx1ZTogbWVtYmVyLm5hbWUKICAgICAgICAgIH0sIG51bGwsIDgsIFsibGFiZWwiLCAidmFsdWUiXSk7CiAgICAgICAgfSksIDEyOCkpXSksCiAgICAgICAgXzogMQogICAgICB9LCA4LCBbIm1vZGVsVmFsdWUiXSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX3NlbGVjdCwgewogICAgICAgIG1vZGVsVmFsdWU6IGZpbHRlclByaW9yaXR5LnZhbHVlLAogICAgICAgICJvblVwZGF0ZTptb2RlbFZhbHVlIjogX2NhY2hlWzJdIHx8IChfY2FjaGVbMl0gPSAkZXZlbnQgPT4gZmlsdGVyUHJpb3JpdHkudmFsdWUgPSAkZXZlbnQpLAogICAgICAgIHBsYWNlaG9sZGVyOiAi5LyY5YWI57qnIiwKICAgICAgICBjbGVhcmFibGU6ICIiLAogICAgICAgIGNsYXNzOiAiZmlsdGVyLXNlbGVjdCIKICAgICAgfSwgewogICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9vcHRpb24sIHsKICAgICAgICAgIGxhYmVsOiAi5YWo6YOoIiwKICAgICAgICAgIHZhbHVlOiAiIgogICAgICAgIH0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9vcHRpb24sIHsKICAgICAgICAgIGxhYmVsOiAi6auYIiwKICAgICAgICAgIHZhbHVlOiAi6auYIgogICAgICAgIH0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9vcHRpb24sIHsKICAgICAgICAgIGxhYmVsOiAi5LitIiwKICAgICAgICAgIHZhbHVlOiAi5LitIgogICAgICAgIH0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9vcHRpb24sIHsKICAgICAgICAgIGxhYmVsOiAi5L2OIiwKICAgICAgICAgIHZhbHVlOiAi5L2OIgogICAgICAgIH0pXSksCiAgICAgICAgXzogMQogICAgICB9LCA4LCBbIm1vZGVsVmFsdWUiXSldKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfNSwgW19jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzYsIFsoX29wZW5CbG9jayh0cnVlKSwgX2NyZWF0ZUVsZW1lbnRCbG9jayhfRnJhZ21lbnQsIG51bGwsIF9yZW5kZXJMaXN0KGthbmJhbi52YWx1ZSwgY29sID0+IHsKICAgICAgICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJkaXYiLCB7CiAgICAgICAgICBjbGFzczogImNvbC1tZC00IiwKICAgICAgICAgIGtleTogY29sLm5hbWUKICAgICAgICB9LCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfNywgW19jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzgsIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJzcGFuIiwgewogICAgICAgICAgY2xhc3M6IF9ub3JtYWxpemVDbGFzcyhbImthbmJhbi1jb2wtZG90IiwgY29sLm5hbWVdKQogICAgICAgIH0sIG51bGwsIDIpLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJoNiIsIF9ob2lzdGVkXzksIFtfY3JlYXRlVGV4dFZOb2RlKF90b0Rpc3BsYXlTdHJpbmcoY29sLm5hbWUpICsgIiAiLCAxKSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfYmFkZ2UsIHsKICAgICAgICAgIHZhbHVlOiBmaWx0ZXJlZFRhc2tzKGNvbC50YXNrcykubGVuZ3RoLAogICAgICAgICAgY2xhc3M6ICJrYW5iYW4tYmFkZ2UiCiAgICAgICAgfSwgbnVsbCwgOCwgWyJ2YWx1ZSJdKV0pXSksIF9jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzEwLCBbZmlsdGVyZWRUYXNrcyhjb2wudGFza3MpLmxlbmd0aCA9PT0gMCA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfY29tcG9uZW50X2VsX2VtcHR5LCB7CiAgICAgICAgICBrZXk6IDAsCiAgICAgICAgICBkZXNjcmlwdGlvbjogIuaaguaXoOS7u+WKoSIsCiAgICAgICAgICAiaW1hZ2Utc2l6ZSI6IDYwCiAgICAgICAgfSkpIDogKF9vcGVuQmxvY2sodHJ1ZSksIF9jcmVhdGVFbGVtZW50QmxvY2soX0ZyYWdtZW50LCB7CiAgICAgICAgICBrZXk6IDEKICAgICAgICB9LCBfcmVuZGVyTGlzdChmaWx0ZXJlZFRhc2tzKGNvbC50YXNrcyksIHRhc2sgPT4gewogICAgICAgICAgdmFyIF90YXNrJGFzc2lnbmVlLCBfdGFzayRhc3NpZ25lZSR1c2VyOwogICAgICAgICAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygiZGl2IiwgewogICAgICAgICAgICBrZXk6IHRhc2sudGl0bGUsCiAgICAgICAgICAgIGNsYXNzOiAidGFzay1jYXJkIG1vZGVybi10YXNrLWNhcmQiCiAgICAgICAgICB9LCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgewogICAgICAgICAgICBjbGFzczogInRhc2stYm9keSIsCiAgICAgICAgICAgIG9uQ2xpY2s6ICRldmVudCA9PiBvcGVuRGV0YWlsKHRhc2spCiAgICAgICAgICB9LCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMTIsIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJoNiIsIF9ob2lzdGVkXzEzLCBfdG9EaXNwbGF5U3RyaW5nKHRhc2sudGl0bGUpLCAxKSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfdGFnLCB7CiAgICAgICAgICAgIHR5cGU6IHRhc2sucHJpb3JpdHlUeXBlLAogICAgICAgICAgICBzaXplOiAic21hbGwiCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlVGV4dFZOb2RlKF90b0Rpc3BsYXlTdHJpbmcodGFzay5wcmlvcml0eSksIDEpXSksCiAgICAgICAgICAgIF86IDIKICAgICAgICAgIH0sIDEwMzIsIFsidHlwZSJdKV0pLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBfaG9pc3RlZF8xNCwgW3Rhc2suYXNzaWduZWUgJiYgdGFzay5hc3NpZ25lZS51c2VyID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygic3BhbiIsIF9ob2lzdGVkXzE1LCBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfaWNvbiwgbnVsbCwgewogICAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZVZOb2RlKF91bnJlZihVc2VyRmlsbGVkKSldKSwKICAgICAgICAgICAgXzogMQogICAgICAgICAgfSksIF9jcmVhdGVUZXh0Vk5vZGUoIiAiICsgX3RvRGlzcGxheVN0cmluZyh0YXNrLmFzc2lnbmVlLnVzZXIudXNlcm5hbWUpLCAxKV0pKSA6IF9jcmVhdGVDb21tZW50Vk5vZGUoIiIsIHRydWUpLCB0YXNrLmR1ZURhdGUgPyAoX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJzcGFuIiwgX2hvaXN0ZWRfMTYsIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9pY29uLCBudWxsLCB7CiAgICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlVk5vZGUoX3VucmVmKENhbGVuZGFyKSldKSwKICAgICAgICAgICAgXzogMQogICAgICAgICAgfSksIF9jcmVhdGVUZXh0Vk5vZGUoIiAiICsgX3RvRGlzcGxheVN0cmluZyh0YXNrLmR1ZURhdGUpLCAxKV0pKSA6IF9jcmVhdGVDb21tZW50Vk5vZGUoIiIsIHRydWUpLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBfaG9pc3RlZF8xNywgW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX3Byb2dyZXNzLCB7CiAgICAgICAgICAgIHBlcmNlbnRhZ2U6IGdldFRhc2tDb21wbGV0aW9uUGVyY2VudGFnZSh0YXNrKSwKICAgICAgICAgICAgInNob3ctdGV4dCI6IGZhbHNlLAogICAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICAgICJ3aWR0aCI6ICI2MHB4IiwKICAgICAgICAgICAgICAiaGVpZ2h0IjogIjRweCIsCiAgICAgICAgICAgICAgImRpc3BsYXkiOiAiaW5saW5lLWJsb2NrIiwKICAgICAgICAgICAgICAibWFyZ2luIjogIjAgOHB4IgogICAgICAgICAgICB9CiAgICAgICAgICB9LCBudWxsLCA4LCBbInBlcmNlbnRhZ2UiXSksIF9jcmVhdGVFbGVtZW50Vk5vZGUoInNwYW4iLCBfaG9pc3RlZF8xOCwgX3RvRGlzcGxheVN0cmluZyhnZXRUYXNrQ29tcGxldGlvblRleHQodGFzaykpLCAxKV0pXSksIF9jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzE5LCBbKF9vcGVuQmxvY2sodHJ1ZSksIF9jcmVhdGVFbGVtZW50QmxvY2soX0ZyYWdtZW50LCBudWxsLCBfcmVuZGVyTGlzdCh0YXNrLnRhZ3MsIHRhZyA9PiB7CiAgICAgICAgICAgIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfY29tcG9uZW50X2VsX3RhZywgewogICAgICAgICAgICAgIGtleTogdGFnLAogICAgICAgICAgICAgIHNpemU6ICJzbWFsbCIKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlVGV4dFZOb2RlKF90b0Rpc3BsYXlTdHJpbmcodGFnKSwgMSldKSwKICAgICAgICAgICAgICBfOiAyCiAgICAgICAgICAgIH0sIDEwMjQpOwogICAgICAgICAgfSksIDEyOCkpXSksIF9jcmVhdGVFbGVtZW50Vk5vZGUoInAiLCBfaG9pc3RlZF8yMCwgX3RvRGlzcGxheVN0cmluZyh0YXNrLmRlc2NyaXB0aW9uKSwgMSksIF9jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIHsKICAgICAgICAgICAgY2xhc3M6ICJhaS1hbmFseXNpcy10b2dnbGUiLAogICAgICAgICAgICBvbkNsaWNrOiBfd2l0aE1vZGlmaWVycygkZXZlbnQgPT4gdGFzay5fc2hvd0FJID0gIXRhc2suX3Nob3dBSSwgWyJzdG9wIl0pCiAgICAgICAgICB9LCBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfaWNvbiwgewogICAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICAgICJ2ZXJ0aWNhbC1hbGlnbiI6ICJtaWRkbGUiCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIHsKICAgICAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gW19jcmVhdGVWTm9kZShfdW5yZWYoQ2hhdERvdFJvdW5kKSldKSwKICAgICAgICAgICAgXzogMQogICAgICAgICAgfSksIF9jcmVhdGVFbGVtZW50Vk5vZGUoInNwYW4iLCBfaG9pc3RlZF8yMiwgIkFJ5YiG5p6QICIgKyBfdG9EaXNwbGF5U3RyaW5nKHRhc2suX3Nob3dBSSA/ICfilrInIDogJ+KWvCcpLCAxKSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfYnV0dG9uLCB7CiAgICAgICAgICAgIHNpemU6ICJzbWFsbCIsCiAgICAgICAgICAgIHR5cGU6ICJsaW5rIiwKICAgICAgICAgICAgb25DbGljazogX3dpdGhNb2RpZmllcnMoJGV2ZW50ID0+IGdldFRhc2tBaUFuYWx5c2lzKHRhc2suaWQpLCBbInN0b3AiXSksCiAgICAgICAgICAgIGxvYWRpbmc6IHRhc2suX2FpTG9hZGluZwogICAgICAgICAgfSwgewogICAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfaWNvbiwgbnVsbCwgewogICAgICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlVk5vZGUoX3VucmVmKFJlZnJlc2gpKV0pLAogICAgICAgICAgICAgIF86IDEKICAgICAgICAgICAgfSldKSwKICAgICAgICAgICAgXzogMgogICAgICAgICAgfSwgMTAzMiwgWyJvbkNsaWNrIiwgImxvYWRpbmciXSldLCA4LCBfaG9pc3RlZF8yMSksIGlzQ3VycmVudFVzZXIoKF90YXNrJGFzc2lnbmVlID0gdGFzay5hc3NpZ25lZSkgPT09IG51bGwgfHwgX3Rhc2skYXNzaWduZWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdGFzayRhc3NpZ25lZSR1c2VyID0gX3Rhc2skYXNzaWduZWUudXNlcikgPT09IG51bGwgfHwgX3Rhc2skYXNzaWduZWUkdXNlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Rhc2skYXNzaWduZWUkdXNlci5pZCkgPyAoX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJkaXYiLCBfaG9pc3RlZF8yMywgW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2J1dHRvbiwgewogICAgICAgICAgICBzaXplOiAic21hbGwiLAogICAgICAgICAgICBvbkNsaWNrOiBfd2l0aE1vZGlmaWVycygkZXZlbnQgPT4gb3BlbkVkaXRUYXNrKHRhc2spLCBbInN0b3AiXSkKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gX2NhY2hlWzI3XSB8fCAoX2NhY2hlWzI3XSA9IFtfY3JlYXRlVGV4dFZOb2RlKCLnvJbovpEiKV0pKSwKICAgICAgICAgICAgXzogMgogICAgICAgICAgfSwgMTAzMiwgWyJvbkNsaWNrIl0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9idXR0b24sIHsKICAgICAgICAgICAgc2l6ZTogInNtYWxsIiwKICAgICAgICAgICAgdHlwZTogImRhbmdlciIsCiAgICAgICAgICAgIG9uQ2xpY2s6IF93aXRoTW9kaWZpZXJzKCRldmVudCA9PiBjb25maXJtRGVsZXRlVGFzayh0YXNrKSwgWyJzdG9wIl0pCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IF9jYWNoZVsyOF0gfHwgKF9jYWNoZVsyOF0gPSBbX2NyZWF0ZVRleHRWTm9kZSgi5Yig6ZmkIildKSksCiAgICAgICAgICAgIF86IDIKICAgICAgICAgIH0sIDEwMzIsIFsib25DbGljayJdKV0pKSA6IF9jcmVhdGVDb21tZW50Vk5vZGUoIiIsIHRydWUpLCBfY3JlYXRlVk5vZGUoX1RyYW5zaXRpb24sIHsKICAgICAgICAgICAgbmFtZTogImZhZGUiCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFt0YXNrLl9zaG93QUkgPyAoX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJkaXYiLCBfaG9pc3RlZF8yNCwgWyF0YXNrLmFpIHx8IHRhc2suYWkubGVuZ3RoID09PSAwID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygiZGl2IiwgX2hvaXN0ZWRfMjUsIF9jYWNoZVsyOV0gfHwgKF9jYWNoZVsyOV0gPSBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgic3BhbiIsIHsKICAgICAgICAgICAgICBjbGFzczogInRleHQtbXV0ZWQiCiAgICAgICAgICAgIH0sICLmmoLml6BBSeWIhuaekCIsIC0xKV0pKSkgOiAoX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJ1bCIsIF9ob2lzdGVkXzI2LCBbKF9vcGVuQmxvY2sodHJ1ZSksIF9jcmVhdGVFbGVtZW50QmxvY2soX0ZyYWdtZW50LCBudWxsLCBfcmVuZGVyTGlzdChwcm9jZXNzQUlDb250ZW50KHRhc2suYWkpLCByID0+IHsKICAgICAgICAgICAgICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJsaSIsIHsKICAgICAgICAgICAgICAgIGtleTogciwKICAgICAgICAgICAgICAgIGlubmVySFRNTDogZm9ybWF0TWFya2Rvd24ocikKICAgICAgICAgICAgICB9LCBudWxsLCA4LCBfaG9pc3RlZF8yNyk7CiAgICAgICAgICAgIH0pLCAxMjgpKV0pKV0pKSA6IF9jcmVhdGVDb21tZW50Vk5vZGUoIiIsIHRydWUpXSksCiAgICAgICAgICAgIF86IDIKICAgICAgICAgIH0sIDEwMjQpXSwgOCwgX2hvaXN0ZWRfMTEpXSk7CiAgICAgICAgfSksIDEyOCkpXSldKV0pOwogICAgICB9KSwgMTI4KSldKV0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9kaWFsb2csIHsKICAgICAgICBtb2RlbFZhbHVlOiBzaG93QWRkVGFzay52YWx1ZSwKICAgICAgICAib25VcGRhdGU6bW9kZWxWYWx1ZSI6IF9jYWNoZVsxMF0gfHwgKF9jYWNoZVsxMF0gPSAkZXZlbnQgPT4gc2hvd0FkZFRhc2sudmFsdWUgPSAkZXZlbnQpLAogICAgICAgIHRpdGxlOiAi5paw5bu65Lu75YqhIiwKICAgICAgICB3aWR0aDogIjQyMHB4IiwKICAgICAgICBjbGFzczogIm1vZGVybi1kaWFsb2ciCiAgICAgIH0sIHsKICAgICAgICBmb290ZXI6IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9idXR0b24sIHsKICAgICAgICAgIG9uQ2xpY2s6IF9jYWNoZVs5XSB8fCAoX2NhY2hlWzldID0gJGV2ZW50ID0+IHNob3dBZGRUYXNrLnZhbHVlID0gZmFsc2UpCiAgICAgICAgfSwgewogICAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gX2NhY2hlWzMwXSB8fCAoX2NhY2hlWzMwXSA9IFtfY3JlYXRlVGV4dFZOb2RlKCLlj5bmtogiKV0pKSwKICAgICAgICAgIF86IDEKICAgICAgICB9KSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfYnV0dG9uLCB7CiAgICAgICAgICB0eXBlOiAicHJpbWFyeSIsCiAgICAgICAgICBvbkNsaWNrOiBzYXZlVGFzawogICAgICAgIH0sIHsKICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IF9jYWNoZVszMV0gfHwgKF9jYWNoZVszMV0gPSBbX2NyZWF0ZVRleHRWTm9kZSgi5L+d5a2YIildKSksCiAgICAgICAgICBfOiAxCiAgICAgICAgfSldKSwKICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfZm9ybSwgewogICAgICAgICAgImxhYmVsLXdpZHRoIjogIjgwcHgiLAogICAgICAgICAgY2xhc3M6ICJtb2Rlcm4tZm9ybSIKICAgICAgICB9LCB7CiAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfZm9ybV9pdGVtLCB7CiAgICAgICAgICAgIGxhYmVsOiAi5Lu75Yqh5ZCN56ewIgogICAgICAgICAgfSwgewogICAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfaW5wdXQsIHsKICAgICAgICAgICAgICBtb2RlbFZhbHVlOiBuZXdUYXNrLnZhbHVlLnRpdGxlLAogICAgICAgICAgICAgICJvblVwZGF0ZTptb2RlbFZhbHVlIjogX2NhY2hlWzNdIHx8IChfY2FjaGVbM10gPSAkZXZlbnQgPT4gbmV3VGFzay52YWx1ZS50aXRsZSA9ICRldmVudCkKICAgICAgICAgICAgfSwgbnVsbCwgOCwgWyJtb2RlbFZhbHVlIl0pXSksCiAgICAgICAgICAgIF86IDEKICAgICAgICAgIH0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9mb3JtX2l0ZW0sIHsKICAgICAgICAgICAgbGFiZWw6ICLotJ/otKPkuroiCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9zZWxlY3QsIHsKICAgICAgICAgICAgICBtb2RlbFZhbHVlOiBuZXdUYXNrLnZhbHVlLmFzc2lnbmVlLAogICAgICAgICAgICAgICJvblVwZGF0ZTptb2RlbFZhbHVlIjogX2NhY2hlWzRdIHx8IChfY2FjaGVbNF0gPSAkZXZlbnQgPT4gbmV3VGFzay52YWx1ZS5hc3NpZ25lZSA9ICRldmVudCkKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFsoX29wZW5CbG9jayh0cnVlKSwgX2NyZWF0ZUVsZW1lbnRCbG9jayhfRnJhZ21lbnQsIG51bGwsIF9yZW5kZXJMaXN0KHByb2plY3RNZW1iZXJzLnZhbHVlLCBtZW1iZXIgPT4gewogICAgICAgICAgICAgICAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKF9jb21wb25lbnRfZWxfb3B0aW9uLCB7CiAgICAgICAgICAgICAgICAgIGtleTogbWVtYmVyLmlkLAogICAgICAgICAgICAgICAgICBsYWJlbDogbWVtYmVyLm5hbWUsCiAgICAgICAgICAgICAgICAgIHZhbHVlOiBtZW1iZXIuaWQKICAgICAgICAgICAgICAgIH0sIG51bGwsIDgsIFsibGFiZWwiLCAidmFsdWUiXSk7CiAgICAgICAgICAgICAgfSksIDEyOCkpXSksCiAgICAgICAgICAgICAgXzogMQogICAgICAgICAgICB9LCA4LCBbIm1vZGVsVmFsdWUiXSldKSwKICAgICAgICAgICAgXzogMQogICAgICAgICAgfSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2Zvcm1faXRlbSwgewogICAgICAgICAgICBsYWJlbDogIuS8mOWFiOe6pyIKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX3NlbGVjdCwgewogICAgICAgICAgICAgIG1vZGVsVmFsdWU6IG5ld1Rhc2sudmFsdWUucHJpb3JpdHksCiAgICAgICAgICAgICAgIm9uVXBkYXRlOm1vZGVsVmFsdWUiOiBfY2FjaGVbNV0gfHwgKF9jYWNoZVs1XSA9ICRldmVudCA9PiBuZXdUYXNrLnZhbHVlLnByaW9yaXR5ID0gJGV2ZW50KQogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX29wdGlvbiwgewogICAgICAgICAgICAgICAgbGFiZWw6ICLpq5giLAogICAgICAgICAgICAgICAgdmFsdWU6ICLpq5giCiAgICAgICAgICAgICAgfSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX29wdGlvbiwgewogICAgICAgICAgICAgICAgbGFiZWw6ICLkuK0iLAogICAgICAgICAgICAgICAgdmFsdWU6ICLkuK0iCiAgICAgICAgICAgICAgfSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX29wdGlvbiwgewogICAgICAgICAgICAgICAgbGFiZWw6ICLkvY4iLAogICAgICAgICAgICAgICAgdmFsdWU6ICLkvY4iCiAgICAgICAgICAgICAgfSldKSwKICAgICAgICAgICAgICBfOiAxCiAgICAgICAgICAgIH0sIDgsIFsibW9kZWxWYWx1ZSJdKV0pLAogICAgICAgICAgICBfOiAxCiAgICAgICAgICB9KSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfZm9ybV9pdGVtLCB7CiAgICAgICAgICAgIGxhYmVsOiAi5oiq5q2i5pel5pyfIgogICAgICAgICAgfSwgewogICAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfZGF0ZV9waWNrZXIsIHsKICAgICAgICAgICAgICBtb2RlbFZhbHVlOiBuZXdUYXNrLnZhbHVlLmR1ZURhdGUsCiAgICAgICAgICAgICAgIm9uVXBkYXRlOm1vZGVsVmFsdWUiOiBfY2FjaGVbNl0gfHwgKF9jYWNoZVs2XSA9ICRldmVudCA9PiBuZXdUYXNrLnZhbHVlLmR1ZURhdGUgPSAkZXZlbnQpLAogICAgICAgICAgICAgICJ2YWx1ZS1mb3JtYXQiOiAiWVlZWS1NTS1ERCIKICAgICAgICAgICAgfSwgbnVsbCwgOCwgWyJtb2RlbFZhbHVlIl0pXSksCiAgICAgICAgICAgIF86IDEKICAgICAgICAgIH0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9mb3JtX2l0ZW0sIHsKICAgICAgICAgICAgbGFiZWw6ICLmj4/ov7AiCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9pbnB1dCwgewogICAgICAgICAgICAgIHR5cGU6ICJ0ZXh0YXJlYSIsCiAgICAgICAgICAgICAgbW9kZWxWYWx1ZTogbmV3VGFzay52YWx1ZS5kZXNjcmlwdGlvbiwKICAgICAgICAgICAgICAib25VcGRhdGU6bW9kZWxWYWx1ZSI6IF9jYWNoZVs3XSB8fCAoX2NhY2hlWzddID0gJGV2ZW50ID0+IG5ld1Rhc2sudmFsdWUuZGVzY3JpcHRpb24gPSAkZXZlbnQpCiAgICAgICAgICAgIH0sIG51bGwsIDgsIFsibW9kZWxWYWx1ZSJdKV0pLAogICAgICAgICAgICBfOiAxCiAgICAgICAgICB9KSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfZm9ybV9pdGVtLCB7CiAgICAgICAgICAgIGxhYmVsOiAi5qCH562+IgogICAgICAgICAgfSwgewogICAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfaW5wdXQsIHsKICAgICAgICAgICAgICBtb2RlbFZhbHVlOiBuZXdUYXNrLnZhbHVlLnRhZ3MsCiAgICAgICAgICAgICAgIm9uVXBkYXRlOm1vZGVsVmFsdWUiOiBfY2FjaGVbOF0gfHwgKF9jYWNoZVs4XSA9ICRldmVudCA9PiBuZXdUYXNrLnZhbHVlLnRhZ3MgPSAkZXZlbnQpLAogICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAi6YCX5Y+35YiG6ZqUIgogICAgICAgICAgICB9LCBudWxsLCA4LCBbIm1vZGVsVmFsdWUiXSldKSwKICAgICAgICAgICAgXzogMQogICAgICAgICAgfSldKSwKICAgICAgICAgIF86IDEKICAgICAgICB9KV0pLAogICAgICAgIF86IDEKICAgICAgfSwgOCwgWyJtb2RlbFZhbHVlIl0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9kaWFsb2csIHsKICAgICAgICBtb2RlbFZhbHVlOiBzaG93RGV0YWlsLnZhbHVlLAogICAgICAgICJvblVwZGF0ZTptb2RlbFZhbHVlIjogX2NhY2hlWzE1XSB8fCAoX2NhY2hlWzE1XSA9ICRldmVudCA9PiBzaG93RGV0YWlsLnZhbHVlID0gJGV2ZW50KSwKICAgICAgICB0aXRsZTogIuS7u+WKoeivpuaDhSIsCiAgICAgICAgd2lkdGg6ICI0ODBweCIsCiAgICAgICAgY2xhc3M6ICJtb2Rlcm4tZGlhbG9nIgogICAgICB9LCB7CiAgICAgICAgZm9vdGVyOiBfd2l0aEN0eCgoKSA9PiB7CiAgICAgICAgICB2YXIgX2N1cnJlbnRUYXNrJHZhbHVlLCBfY3VycmVudFRhc2skdmFsdWUkYXMsIF9jdXJyZW50VGFzayR2YWx1ZSRhczIsIF9jdXJyZW50VGFzayR2YWx1ZTIsIF9jdXJyZW50VGFzayR2YWx1ZTIkYSwgX2N1cnJlbnRUYXNrJHZhbHVlMiRhMjsKICAgICAgICAgIHJldHVybiBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfYnV0dG9uLCB7CiAgICAgICAgICAgIG9uQ2xpY2s6IF9jYWNoZVsxMl0gfHwgKF9jYWNoZVsxMl0gPSAkZXZlbnQgPT4gc2hvd0RldGFpbC52YWx1ZSA9IGZhbHNlKQogICAgICAgICAgfSwgewogICAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBfY2FjaGVbNDNdIHx8IChfY2FjaGVbNDNdID0gW19jcmVhdGVUZXh0Vk5vZGUoIuWFs+mXrSIpXSkpLAogICAgICAgICAgICBfOiAxCiAgICAgICAgICB9KSwgaXNDdXJyZW50VXNlcigoX2N1cnJlbnRUYXNrJHZhbHVlID0gY3VycmVudFRhc2sudmFsdWUpID09PSBudWxsIHx8IF9jdXJyZW50VGFzayR2YWx1ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9jdXJyZW50VGFzayR2YWx1ZSRhcyA9IF9jdXJyZW50VGFzayR2YWx1ZS5hc3NpZ25lZSkgPT09IG51bGwgfHwgX2N1cnJlbnRUYXNrJHZhbHVlJGFzID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2N1cnJlbnRUYXNrJHZhbHVlJGFzMiA9IF9jdXJyZW50VGFzayR2YWx1ZSRhcy51c2VyKSA9PT0gbnVsbCB8fCBfY3VycmVudFRhc2skdmFsdWUkYXMyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY3VycmVudFRhc2skdmFsdWUkYXMyLmlkKSA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfY29tcG9uZW50X2VsX2J1dHRvbiwgewogICAgICAgICAgICBrZXk6IDAsCiAgICAgICAgICAgIG9uQ2xpY2s6IF9jYWNoZVsxM10gfHwgKF9jYWNoZVsxM10gPSAkZXZlbnQgPT4gb3BlbkVkaXRUYXNrKGN1cnJlbnRUYXNrLnZhbHVlKSksCiAgICAgICAgICAgIHR5cGU6ICJwcmltYXJ5IgogICAgICAgICAgfSwgewogICAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBfY2FjaGVbNDRdIHx8IChfY2FjaGVbNDRdID0gW19jcmVhdGVUZXh0Vk5vZGUoIue8lui+kSIpXSkpLAogICAgICAgICAgICBfOiAxCiAgICAgICAgICB9KSkgOiBfY3JlYXRlQ29tbWVudFZOb2RlKCIiLCB0cnVlKSwgaXNDdXJyZW50VXNlcigoX2N1cnJlbnRUYXNrJHZhbHVlMiA9IGN1cnJlbnRUYXNrLnZhbHVlKSA9PT0gbnVsbCB8fCBfY3VycmVudFRhc2skdmFsdWUyID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2N1cnJlbnRUYXNrJHZhbHVlMiRhID0gX2N1cnJlbnRUYXNrJHZhbHVlMi5hc3NpZ25lZSkgPT09IG51bGwgfHwgX2N1cnJlbnRUYXNrJHZhbHVlMiRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2N1cnJlbnRUYXNrJHZhbHVlMiRhMiA9IF9jdXJyZW50VGFzayR2YWx1ZTIkYS51c2VyKSA9PT0gbnVsbCB8fCBfY3VycmVudFRhc2skdmFsdWUyJGEyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY3VycmVudFRhc2skdmFsdWUyJGEyLmlkKSA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfY29tcG9uZW50X2VsX2J1dHRvbiwgewogICAgICAgICAgICBrZXk6IDEsCiAgICAgICAgICAgIG9uQ2xpY2s6IF9jYWNoZVsxNF0gfHwgKF9jYWNoZVsxNF0gPSAkZXZlbnQgPT4gY29uZmlybURlbGV0ZVRhc2soY3VycmVudFRhc2sudmFsdWUpKSwKICAgICAgICAgICAgdHlwZTogImRhbmdlciIKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gX2NhY2hlWzQ1XSB8fCAoX2NhY2hlWzQ1XSA9IFtfY3JlYXRlVGV4dFZOb2RlKCLliKDpmaQiKV0pKSwKICAgICAgICAgICAgXzogMQogICAgICAgICAgfSkpIDogX2NyZWF0ZUNvbW1lbnRWTm9kZSgiIiwgdHJ1ZSldOwogICAgICAgIH0pLAogICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IHsKICAgICAgICAgIHZhciBfdGFza0NvbXBsZXRpb25zJHZhbHU3LCBfY3VycmVudFRhc2skdmFsdWUzLCBfdGFza0NvbXBsZXRpb25zJHZhbHU4LCBfY3VycmVudFRhc2skdmFsdWU0LCBfdGFza0NvbXBsZXRpb25zJHZhbHU5OwogICAgICAgICAgcmV0dXJuIFtjdXJyZW50VGFzay52YWx1ZSA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soImRpdiIsIF9ob2lzdGVkXzI4LCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiaDUiLCBfaG9pc3RlZF8yOSwgX3RvRGlzcGxheVN0cmluZyhjdXJyZW50VGFzay52YWx1ZS50aXRsZSksIDEpLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBfaG9pc3RlZF8zMCwgW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX3RhZywgewogICAgICAgICAgICB0eXBlOiBjdXJyZW50VGFzay52YWx1ZS5wcmlvcml0eVR5cGUsCiAgICAgICAgICAgIHNpemU6ICJzbWFsbCIKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gW19jcmVhdGVUZXh0Vk5vZGUoX3RvRGlzcGxheVN0cmluZyhjdXJyZW50VGFzay52YWx1ZS5wcmlvcml0eSksIDEpXSksCiAgICAgICAgICAgIF86IDEKICAgICAgICAgIH0sIDgsIFsidHlwZSJdKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgic3BhbiIsIG51bGwsICLotJ/otKPkurrvvJoiICsgX3RvRGlzcGxheVN0cmluZyhjdXJyZW50VGFzay52YWx1ZS5hc3NpZ25lZSAmJiBjdXJyZW50VGFzay52YWx1ZS5hc3NpZ25lZS51c2VyID8gY3VycmVudFRhc2sudmFsdWUuYXNzaWduZWUudXNlci51c2VybmFtZSA6ICcnKSwgMSksIF9jcmVhdGVFbGVtZW50Vk5vZGUoInNwYW4iLCBudWxsLCAi5oiq5q2i77yaIiArIF90b0Rpc3BsYXlTdHJpbmcoY3VycmVudFRhc2sudmFsdWUuZHVlRGF0ZSksIDEpXSksIF9jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzMxLCAi5o+P6L+w77yaIiArIF90b0Rpc3BsYXlTdHJpbmcoY3VycmVudFRhc2sudmFsdWUuZGVzY3JpcHRpb24pLCAxKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMzIsIFtfY2FjaGVbMzJdIHx8IChfY2FjaGVbMzJdID0gX2NyZWF0ZVRleHRWTm9kZSgi5qCH562+77yaIikpLCAoX29wZW5CbG9jayh0cnVlKSwgX2NyZWF0ZUVsZW1lbnRCbG9jayhfRnJhZ21lbnQsIG51bGwsIF9yZW5kZXJMaXN0KGN1cnJlbnRUYXNrLnZhbHVlLnRhZ3MsIHRhZyA9PiB7CiAgICAgICAgICAgIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfY29tcG9uZW50X2VsX3RhZywgewogICAgICAgICAgICAgIGtleTogdGFnLAogICAgICAgICAgICAgIHNpemU6ICJzbWFsbCIKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlVGV4dFZOb2RlKF90b0Rpc3BsYXlTdHJpbmcodGFnKSwgMSldKSwKICAgICAgICAgICAgICBfOiAyCiAgICAgICAgICAgIH0sIDEwMjQpOwogICAgICAgICAgfSksIDEyOCkpXSksIF9jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzMzLCBbX2NhY2hlWzMzXSB8fCAoX2NhY2hlWzMzXSA9IF9jcmVhdGVUZXh0Vk5vZGUoIui/m+W6pu+8miIpKSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfcHJvZ3Jlc3MsIHsKICAgICAgICAgICAgcGVyY2VudGFnZTogZ2V0VGFza0NvbXBsZXRpb25QZXJjZW50YWdlKGN1cnJlbnRUYXNrLnZhbHVlKQogICAgICAgICAgfSwgbnVsbCwgOCwgWyJwZXJjZW50YWdlIl0pXSksIF9jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzM0LCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMzUsIFtfY2FjaGVbMzVdIHx8IChfY2FjaGVbMzVdID0gX2NyZWF0ZUVsZW1lbnRWTm9kZSgic21hbGwiLCB7CiAgICAgICAgICAgIGNsYXNzOiAidGV4dC1tdXRlZCIKICAgICAgICAgIH0sICJBSeWIhuaekO+8miIsIC0xKSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2J1dHRvbiwgewogICAgICAgICAgICBzaXplOiAic21hbGwiLAogICAgICAgICAgICB0eXBlOiAibGluayIsCiAgICAgICAgICAgIG9uQ2xpY2s6IF9jYWNoZVsxMV0gfHwgKF9jYWNoZVsxMV0gPSAkZXZlbnQgPT4gZ2V0VGFza0FpQW5hbHlzaXMoY3VycmVudFRhc2sudmFsdWUuaWQpKSwKICAgICAgICAgICAgbG9hZGluZzogY3VycmVudFRhc2sudmFsdWUuX2FpTG9hZGluZwogICAgICAgICAgfSwgewogICAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfaWNvbiwgbnVsbCwgewogICAgICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlVk5vZGUoX3VucmVmKFJlZnJlc2gpKV0pLAogICAgICAgICAgICAgIF86IDEKICAgICAgICAgICAgfSksIF9jYWNoZVszNF0gfHwgKF9jYWNoZVszNF0gPSBfY3JlYXRlVGV4dFZOb2RlKCIg5Yi35paw5YiG5p6QICIpKV0pLAogICAgICAgICAgICBfOiAxCiAgICAgICAgICB9LCA4LCBbImxvYWRpbmciXSldKSwgIWN1cnJlbnRUYXNrLnZhbHVlLmFpIHx8IGN1cnJlbnRUYXNrLnZhbHVlLmFpLmxlbmd0aCA9PT0gMCA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soImRpdiIsIF9ob2lzdGVkXzM2LCBfY2FjaGVbMzZdIHx8IChfY2FjaGVbMzZdID0gW19jcmVhdGVFbGVtZW50Vk5vZGUoInNwYW4iLCB7CiAgICAgICAgICAgIGNsYXNzOiAidGV4dC1tdXRlZCIKICAgICAgICAgIH0sICLmmoLml6BBSeWIhuaekCIsIC0xKV0pKSkgOiAoX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJ1bCIsIF9ob2lzdGVkXzM3LCBbKF9vcGVuQmxvY2sodHJ1ZSksIF9jcmVhdGVFbGVtZW50QmxvY2soX0ZyYWdtZW50LCBudWxsLCBfcmVuZGVyTGlzdChwcm9jZXNzQUlDb250ZW50KGN1cnJlbnRUYXNrLnZhbHVlLmFpKSwgciA9PiB7CiAgICAgICAgICAgIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soImxpIiwgewogICAgICAgICAgICAgIGtleTogciwKICAgICAgICAgICAgICBpbm5lckhUTUw6IGZvcm1hdE1hcmtkb3duKHIpCiAgICAgICAgICAgIH0sIG51bGwsIDgsIF9ob2lzdGVkXzM4KTsKICAgICAgICAgIH0pLCAxMjgpKV0pKV0pLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBfaG9pc3RlZF8zOSwgW2N1cnJlbnRUYXNrLnZhbHVlLnN0YXR1cyA9PT0gJ3RvZG8nIHx8IGN1cnJlbnRUYXNrLnZhbHVlLnN0YXR1cyA9PT0gJ+W+heWkhOeQhicgPyAoX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJkaXYiLCBfaG9pc3RlZF80MCwgWyhfb3BlbkJsb2NrKHRydWUpLCBfY3JlYXRlRWxlbWVudEJsb2NrKF9GcmFnbWVudCwgbnVsbCwgX3JlbmRlckxpc3QocHJvamVjdE1lbWJlcnMudmFsdWUsIG1lbWJlciA9PiB7CiAgICAgICAgICAgIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soImRpdiIsIHsKICAgICAgICAgICAgICBrZXk6IG1lbWJlci5pZCwKICAgICAgICAgICAgICBjbGFzczogIm1lbWJlci1pdGVtIgogICAgICAgICAgICB9LCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgic3BhbiIsIG51bGwsIF90b0Rpc3BsYXlTdHJpbmcobWVtYmVyLm5hbWUpLCAxKSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfdGFnLCB7CiAgICAgICAgICAgICAgdHlwZTogImluZm8iLAogICAgICAgICAgICAgIHNpemU6ICJzbWFsbCIKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IF9jYWNoZVszN10gfHwgKF9jYWNoZVszN10gPSBbX2NyZWF0ZVRleHRWTm9kZSgi5pyq5a6M5oiQIildKSksCiAgICAgICAgICAgICAgXzogMQogICAgICAgICAgICB9KV0pOwogICAgICAgICAgfSksIDEyOCkpXSkpIDogISgoX3Rhc2tDb21wbGV0aW9ucyR2YWx1NyA9IHRhc2tDb21wbGV0aW9ucy52YWx1ZVsoX2N1cnJlbnRUYXNrJHZhbHVlMyA9IGN1cnJlbnRUYXNrLnZhbHVlKSA9PT0gbnVsbCB8fCBfY3VycmVudFRhc2skdmFsdWUzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY3VycmVudFRhc2skdmFsdWUzLmlkXSkgIT09IG51bGwgJiYgX3Rhc2tDb21wbGV0aW9ucyR2YWx1NyAhPT0gdm9pZCAwICYmIF90YXNrQ29tcGxldGlvbnMkdmFsdTcubWVtYmVycykgfHwgKChfdGFza0NvbXBsZXRpb25zJHZhbHU4ID0gdGFza0NvbXBsZXRpb25zLnZhbHVlWyhfY3VycmVudFRhc2skdmFsdWU0ID0gY3VycmVudFRhc2sudmFsdWUpID09PSBudWxsIHx8IF9jdXJyZW50VGFzayR2YWx1ZTQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jdXJyZW50VGFzayR2YWx1ZTQuaWRdKSA9PT0gbnVsbCB8fCBfdGFza0NvbXBsZXRpb25zJHZhbHU4ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGFza0NvbXBsZXRpb25zJHZhbHU4Lm1lbWJlcnMubGVuZ3RoKSA9PT0gMCA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soImRpdiIsIF9ob2lzdGVkXzQxLCBbKF9vcGVuQmxvY2sodHJ1ZSksIF9jcmVhdGVFbGVtZW50QmxvY2soX0ZyYWdtZW50LCBudWxsLCBfcmVuZGVyTGlzdChwcm9qZWN0TWVtYmVycy52YWx1ZSwgbWVtYmVyID0+IHsKICAgICAgICAgICAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygiZGl2IiwgewogICAgICAgICAgICAgIGtleTogbWVtYmVyLmlkLAogICAgICAgICAgICAgIGNsYXNzOiAibWVtYmVyLWl0ZW0iCiAgICAgICAgICAgIH0sIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJzcGFuIiwgbnVsbCwgX3RvRGlzcGxheVN0cmluZyhtZW1iZXIubmFtZSksIDEpLCBpc0N1cnJlbnRVc2VyKG1lbWJlci51c2VySWQpID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKF9jb21wb25lbnRfZWxfYnV0dG9uLCB7CiAgICAgICAgICAgICAga2V5OiAwLAogICAgICAgICAgICAgIHR5cGU6ICJwcmltYXJ5IiwKICAgICAgICAgICAgICBzaXplOiAic21hbGwiLAogICAgICAgICAgICAgIG9uQ2xpY2s6ICRldmVudCA9PiBtYXJrQ29tcGxldGVGb3JNZW1iZXIoY3VycmVudFRhc2sudmFsdWUuaWQsIG1lbWJlci5pZCkKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IF9jYWNoZVszOF0gfHwgKF9jYWNoZVszOF0gPSBbX2NyZWF0ZVRleHRWTm9kZSgi5a6M5oiQIildKSksCiAgICAgICAgICAgICAgXzogMgogICAgICAgICAgICB9LCAxMDMyLCBbIm9uQ2xpY2siXSkpIDogKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKF9jb21wb25lbnRfZWxfdGFnLCB7CiAgICAgICAgICAgICAga2V5OiAxLAogICAgICAgICAgICAgIHR5cGU6ICJpbmZvIiwKICAgICAgICAgICAgICBzaXplOiAic21hbGwiCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBfY2FjaGVbMzldIHx8IChfY2FjaGVbMzldID0gW19jcmVhdGVUZXh0Vk5vZGUoIuacquWujOaIkCIpXSkpLAogICAgICAgICAgICAgIF86IDEKICAgICAgICAgICAgfSkpXSk7CiAgICAgICAgICB9KSwgMTI4KSldKSkgOiAoX29wZW5CbG9jayh0cnVlKSwgX2NyZWF0ZUVsZW1lbnRCbG9jayhfRnJhZ21lbnQsIHsKICAgICAgICAgICAga2V5OiAyCiAgICAgICAgICB9LCBfcmVuZGVyTGlzdCgoKF90YXNrQ29tcGxldGlvbnMkdmFsdTkgPSB0YXNrQ29tcGxldGlvbnMudmFsdWVbY3VycmVudFRhc2sudmFsdWUuaWRdKSA9PT0gbnVsbCB8fCBfdGFza0NvbXBsZXRpb25zJHZhbHU5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGFza0NvbXBsZXRpb25zJHZhbHU5Lm1lbWJlcnMpIHx8IFtdLCBtID0+IHsKICAgICAgICAgICAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygiZGl2IiwgewogICAgICAgICAgICAgIGtleTogbS5pZCwKICAgICAgICAgICAgICBjbGFzczogIm1lbWJlci1pdGVtIgogICAgICAgICAgICB9LCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgic3BhbiIsIG51bGwsIF90b0Rpc3BsYXlTdHJpbmcobS5uYW1lKSwgMSksIG0uY29tcGxldGVkID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKF9jb21wb25lbnRfZWxfdGFnLCB7CiAgICAgICAgICAgICAga2V5OiAwLAogICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICBzaXplOiAic21hbGwiCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBfY2FjaGVbNDBdIHx8IChfY2FjaGVbNDBdID0gW19jcmVhdGVUZXh0Vk5vZGUoIuW3suWujOaIkCIpXSkpLAogICAgICAgICAgICAgIF86IDEKICAgICAgICAgICAgfSkpIDogaXNDdXJyZW50VXNlcihtLnVzZXJJZCkgPyAoX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soX2NvbXBvbmVudF9lbF9idXR0b24sIHsKICAgICAgICAgICAgICBrZXk6IDEsCiAgICAgICAgICAgICAgdHlwZTogInByaW1hcnkiLAogICAgICAgICAgICAgIHNpemU6ICJzbWFsbCIsCiAgICAgICAgICAgICAgb25DbGljazogJGV2ZW50ID0+IG1hcmtDb21wbGV0ZShjdXJyZW50VGFzay52YWx1ZS5pZCwgbS5pZCkKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IF9jYWNoZVs0MV0gfHwgKF9jYWNoZVs0MV0gPSBbX2NyZWF0ZVRleHRWTm9kZSgi5a6M5oiQIildKSksCiAgICAgICAgICAgICAgXzogMgogICAgICAgICAgICB9LCAxMDMyLCBbIm9uQ2xpY2siXSkpIDogKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKF9jb21wb25lbnRfZWxfdGFnLCB7CiAgICAgICAgICAgICAga2V5OiAyLAogICAgICAgICAgICAgIHR5cGU6ICJpbmZvIiwKICAgICAgICAgICAgICBzaXplOiAic21hbGwiCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBfY2FjaGVbNDJdIHx8IChfY2FjaGVbNDJdID0gW19jcmVhdGVUZXh0Vk5vZGUoIuacquWujOaIkCIpXSkpLAogICAgICAgICAgICAgIF86IDEKICAgICAgICAgICAgfSkpXSk7CiAgICAgICAgICB9KSwgMTI4KSldKV0pKSA6IF9jcmVhdGVDb21tZW50Vk5vZGUoIiIsIHRydWUpXTsKICAgICAgICB9KSwKICAgICAgICBfOiAxCiAgICAgIH0sIDgsIFsibW9kZWxWYWx1ZSJdKSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfZGlhbG9nLCB7CiAgICAgICAgbW9kZWxWYWx1ZTogc2hvd0VkaXRUYXNrLnZhbHVlLAogICAgICAgICJvblVwZGF0ZTptb2RlbFZhbHVlIjogX2NhY2hlWzIzXSB8fCAoX2NhY2hlWzIzXSA9ICRldmVudCA9PiBzaG93RWRpdFRhc2sudmFsdWUgPSAkZXZlbnQpLAogICAgICAgIHRpdGxlOiAi57yW6L6R5Lu75YqhIiwKICAgICAgICB3aWR0aDogIjQyMHB4IiwKICAgICAgICBjbGFzczogIm1vZGVybi1kaWFsb2ciCiAgICAgIH0sIHsKICAgICAgICBmb290ZXI6IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9idXR0b24sIHsKICAgICAgICAgIG9uQ2xpY2s6IF9jYWNoZVsyMl0gfHwgKF9jYWNoZVsyMl0gPSAkZXZlbnQgPT4gc2hvd0VkaXRUYXNrLnZhbHVlID0gZmFsc2UpCiAgICAgICAgfSwgewogICAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gX2NhY2hlWzQ2XSB8fCAoX2NhY2hlWzQ2XSA9IFtfY3JlYXRlVGV4dFZOb2RlKCLlj5bmtogiKV0pKSwKICAgICAgICAgIF86IDEKICAgICAgICB9KSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfYnV0dG9uLCB7CiAgICAgICAgICB0eXBlOiAicHJpbWFyeSIsCiAgICAgICAgICBvbkNsaWNrOiBzYXZlRWRpdFRhc2sKICAgICAgICB9LCB7CiAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBfY2FjaGVbNDddIHx8IChfY2FjaGVbNDddID0gW19jcmVhdGVUZXh0Vk5vZGUoIuS/neWtmCIpXSkpLAogICAgICAgICAgXzogMQogICAgICAgIH0pXSksCiAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2Zvcm0sIHsKICAgICAgICAgICJsYWJlbC13aWR0aCI6ICI4MHB4IiwKICAgICAgICAgIGNsYXNzOiAibW9kZXJuLWZvcm0iCiAgICAgICAgfSwgewogICAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2Zvcm1faXRlbSwgewogICAgICAgICAgICBsYWJlbDogIuS7u+WKoeWQjeensCIKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2lucHV0LCB7CiAgICAgICAgICAgICAgbW9kZWxWYWx1ZTogZWRpdFRhc2sudmFsdWUudGl0bGUsCiAgICAgICAgICAgICAgIm9uVXBkYXRlOm1vZGVsVmFsdWUiOiBfY2FjaGVbMTZdIHx8IChfY2FjaGVbMTZdID0gJGV2ZW50ID0+IGVkaXRUYXNrLnZhbHVlLnRpdGxlID0gJGV2ZW50KQogICAgICAgICAgICB9LCBudWxsLCA4LCBbIm1vZGVsVmFsdWUiXSldKSwKICAgICAgICAgICAgXzogMQogICAgICAgICAgfSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2Zvcm1faXRlbSwgewogICAgICAgICAgICBsYWJlbDogIuS8mOWFiOe6pyIKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX3NlbGVjdCwgewogICAgICAgICAgICAgIG1vZGVsVmFsdWU6IGVkaXRUYXNrLnZhbHVlLnByaW9yaXR5LAogICAgICAgICAgICAgICJvblVwZGF0ZTptb2RlbFZhbHVlIjogX2NhY2hlWzE3XSB8fCAoX2NhY2hlWzE3XSA9ICRldmVudCA9PiBlZGl0VGFzay52YWx1ZS5wcmlvcml0eSA9ICRldmVudCkKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9vcHRpb24sIHsKICAgICAgICAgICAgICAgIGxhYmVsOiAi6auYIiwKICAgICAgICAgICAgICAgIHZhbHVlOiAi6auYIgogICAgICAgICAgICAgIH0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9vcHRpb24sIHsKICAgICAgICAgICAgICAgIGxhYmVsOiAi5LitIiwKICAgICAgICAgICAgICAgIHZhbHVlOiAi5LitIgogICAgICAgICAgICAgIH0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9vcHRpb24sIHsKICAgICAgICAgICAgICAgIGxhYmVsOiAi5L2OIiwKICAgICAgICAgICAgICAgIHZhbHVlOiAi5L2OIgogICAgICAgICAgICAgIH0pXSksCiAgICAgICAgICAgICAgXzogMQogICAgICAgICAgICB9LCA4LCBbIm1vZGVsVmFsdWUiXSldKSwKICAgICAgICAgICAgXzogMQogICAgICAgICAgfSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2Zvcm1faXRlbSwgewogICAgICAgICAgICBsYWJlbDogIuaIquatouaXpeacnyIKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2RhdGVfcGlja2VyLCB7CiAgICAgICAgICAgICAgbW9kZWxWYWx1ZTogZWRpdFRhc2sudmFsdWUuZHVlRGF0ZSwKICAgICAgICAgICAgICAib25VcGRhdGU6bW9kZWxWYWx1ZSI6IF9jYWNoZVsxOF0gfHwgKF9jYWNoZVsxOF0gPSAkZXZlbnQgPT4gZWRpdFRhc2sudmFsdWUuZHVlRGF0ZSA9ICRldmVudCksCiAgICAgICAgICAgICAgInZhbHVlLWZvcm1hdCI6ICJZWVlZLU1NLUREIgogICAgICAgICAgICB9LCBudWxsLCA4LCBbIm1vZGVsVmFsdWUiXSldKSwKICAgICAgICAgICAgXzogMQogICAgICAgICAgfSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2Zvcm1faXRlbSwgewogICAgICAgICAgICBsYWJlbDogIuaPj+i/sCIKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2lucHV0LCB7CiAgICAgICAgICAgICAgdHlwZTogInRleHRhcmVhIiwKICAgICAgICAgICAgICBtb2RlbFZhbHVlOiBlZGl0VGFzay52YWx1ZS5kZXNjcmlwdGlvbiwKICAgICAgICAgICAgICAib25VcGRhdGU6bW9kZWxWYWx1ZSI6IF9jYWNoZVsxOV0gfHwgKF9jYWNoZVsxOV0gPSAkZXZlbnQgPT4gZWRpdFRhc2sudmFsdWUuZGVzY3JpcHRpb24gPSAkZXZlbnQpCiAgICAgICAgICAgIH0sIG51bGwsIDgsIFsibW9kZWxWYWx1ZSJdKV0pLAogICAgICAgICAgICBfOiAxCiAgICAgICAgICB9KSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfZm9ybV9pdGVtLCB7CiAgICAgICAgICAgIGxhYmVsOiAi5qCH562+IgogICAgICAgICAgfSwgewogICAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfaW5wdXQsIHsKICAgICAgICAgICAgICBtb2RlbFZhbHVlOiBlZGl0VGFzay52YWx1ZS50YWdzLAogICAgICAgICAgICAgICJvblVwZGF0ZTptb2RlbFZhbHVlIjogX2NhY2hlWzIwXSB8fCAoX2NhY2hlWzIwXSA9ICRldmVudCA9PiBlZGl0VGFzay52YWx1ZS50YWdzID0gJGV2ZW50KSwKICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogIumAl+WPt+WIhumalCIKICAgICAgICAgICAgfSwgbnVsbCwgOCwgWyJtb2RlbFZhbHVlIl0pXSksCiAgICAgICAgICAgIF86IDEKICAgICAgICAgIH0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9mb3JtX2l0ZW0sIHsKICAgICAgICAgICAgbGFiZWw6ICLnirbmgIEiCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9zZWxlY3QsIHsKICAgICAgICAgICAgICBtb2RlbFZhbHVlOiBlZGl0VGFzay52YWx1ZS5zdGF0dXMsCiAgICAgICAgICAgICAgIm9uVXBkYXRlOm1vZGVsVmFsdWUiOiBfY2FjaGVbMjFdIHx8IChfY2FjaGVbMjFdID0gJGV2ZW50ID0+IGVkaXRUYXNrLnZhbHVlLnN0YXR1cyA9ICRldmVudCkKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9vcHRpb24sIHsKICAgICAgICAgICAgICAgIGxhYmVsOiAi5b6F5aSE55CGIiwKICAgICAgICAgICAgICAgIHZhbHVlOiAidG9kbyIKICAgICAgICAgICAgICB9KSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfb3B0aW9uLCB7CiAgICAgICAgICAgICAgICBsYWJlbDogIui/m+ihjOS4rSIsCiAgICAgICAgICAgICAgICB2YWx1ZTogImluLXByb2dyZXNzIgogICAgICAgICAgICAgIH0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9vcHRpb24sIHsKICAgICAgICAgICAgICAgIGxhYmVsOiAi5bey5a6M5oiQIiwKICAgICAgICAgICAgICAgIHZhbHVlOiAiZG9uZSIKICAgICAgICAgICAgICB9KV0pLAogICAgICAgICAgICAgIF86IDEKICAgICAgICAgICAgfSwgOCwgWyJtb2RlbFZhbHVlIl0pXSksCiAgICAgICAgICAgIF86IDEKICAgICAgICAgIH0pXSksCiAgICAgICAgICBfOiAxCiAgICAgICAgfSldKSwKICAgICAgICBfOiAxCiAgICAgIH0sIDgsIFsibW9kZWxWYWx1ZSJdKV0pOwogICAgfTsKICB9Cn07"},{"version":3,"names":["ref","watch","onMounted","computed","UserFilled","Calendar","ChatDotRound","Refresh","request","ElMessage","ElMessageBox","currentUser","value","JSON","parse","localStorage","getItem","console","log","e","error","props","__props","projectMembers","members","search","filterAssignee","filterPriority","showAddTask","showDetail","currentTask","newTask","title","assignee","priority","dueDate","description","tags","status","progress","completed","total","tasks","taskCompletions","kanban","name","filter","t","refreshingAi","deep","fetchTasks","project","id","get","then","res","rawTasks","Array","isArray","data","map","due_date","priorityType","forEach","task","ai","length","getTaskAiAnalysis","fetchTaskCompletions","taskId","completionRecords","completionMap","Map","record","_record$user","_record$member","_record$member$user","userId","user","member","member_id","set","completionId","currentProjectMembers","finalMembersForTask","completionData","undefined","m","catch","err","getTaskCompletionPercentage","_taskCompletions$valu","_taskCompletions$valu2","_taskCompletions$valu3","Math","round","getTaskCompletionText","_taskCompletions$valu4","_taskCompletions$valu5","val","immediate","markCompleteForMember","memberId","post","completed_at","Date","toISOString","success","existingMemberIds","includes","push","find","tc","updateTaskStatusToDone","markComplete","_taskCompletions$valu6","max","patch","tcc","saveTask","assignee_id","payload","filteredTasks","taskArr","matchSearch","matchAssignee","username","matchPriority","openDetail","_aiLoading","_res$data","suggestions","toString","formattedSuggestions","formatAiAnalysisData","finally","handleAddTask","newProject","fetchProjectMembers","newMembers","projectId","pm","_pm$user","_pm$user2","_pm$user3","email","showEditTask","editTask","openEditTask","saveEditTask","confirmDeleteTask","confirm","confirmButtonText","cancelButtonText","type","delete","refreshAllTaskAiAnalysis","finished","_res$data2","processAIContent","aiItems","hasIncompleteData","lastItem","trim","result","currentCategory","tempItems","item","join","startsWith","formatMarkdown","text","replace","items","originalText","hasAnalysis","some","hasSuggestion","unshift","currentSection","hasAddedAnalysisItems","hasAddedSuggestionItems","i","analysisItems","suggestionItems","isCurrentUser","Number"],"sources":["C:/Users/18083/Desktop/CCIT/office/smart-office/frontend/src/views/project/components/TasksView.vue"],"sourcesContent":["<template>\n  <div class=\"module-card modern-tasks\">\n    <div class=\"module-header\">\n      <h5 class=\"module-title\"></h5>\n      <div class=\"btn-group\">\n        <el-button type=\"primary\" size=\"default\" round @click=\"handleAddTask\"></el-button>\n        <el-button type=\"info\" size=\"default\" round @click=\"refreshAllTaskAiAnalysis\" :loading=\"refreshingAi\"></el-button>\n      </div>\n    </div>\n    <!--  -->\n    <div class=\"task-filters modern-filters\">\n      <el-input v-model=\"search\" placeholder=\"...\" clearable class=\"filter-input\" />\n      <el-select v-model=\"filterAssignee\" placeholder=\"\" clearable class=\"filter-select\">\n        <el-option label=\"\" value=\"\" />\n        <el-option v-for=\"member in projectMembers\" :key=\"member.id\" :label=\"member.name\" :value=\"member.name\" />\n      </el-select>\n      <el-select v-model=\"filterPriority\" placeholder=\"\" clearable class=\"filter-select\">\n        <el-option label=\"\" value=\"\" />\n        <el-option label=\"\" value=\"\" />\n        <el-option label=\"\" value=\"\" />\n        <el-option label=\"\" value=\"\" />\n      </el-select>\n    </div>\n    <!--  -->\n    <div class=\"kanban-view modern-kanban\">\n      <div class=\"row\">\n        <div class=\"col-md-4\" v-for=\"col in kanban\" :key=\"col.name\">\n          <div class=\"card modern-card\">\n            <div class=\"card-header modern-card-header kanban-col-header\">\n              <span class=\"kanban-col-dot\" :class=\"col.name\"></span>\n              <h6 class=\"mb-0\">{{ col.name }} <el-badge :value=\"filteredTasks(col.tasks).length\" class=\"kanban-badge\" /></h6>\n            </div>\n            <div class=\"card-body task-list\">\n              <el-empty v-if=\"filteredTasks(col.tasks).length === 0\" description=\"\" :image-size=\"60\" />\n              <div v-else v-for=\"task in filteredTasks(col.tasks)\" :key=\"task.title\" class=\"task-card modern-task-card\">\n                <div class=\"task-body\" @click=\"openDetail(task)\">\n                  <div class=\"task-header\">\n                    <h6 class=\"mb-0 task-title-main\">{{ task.title }}</h6>\n                    <el-tag :type=\"task.priorityType\" size=\"small\">{{ task.priority }}</el-tag>\n                  </div>\n                  <div class=\"task-meta-row\">\n                    <span v-if=\"task.assignee && task.assignee.user\"><el-icon><UserFilled /></el-icon> {{ task.assignee.user.username }}</span>\n                    <span v-if=\"task.dueDate\"><el-icon><Calendar /></el-icon> {{ task.dueDate }}</span>\n                    <div class=\"task-progress-row\">\n                      <el-progress :percentage=\"getTaskCompletionPercentage(task)\" :show-text=\"false\" style=\"width:60px;height:4px;display:inline-block;margin:0 8px;\" />\n                      <span class=\"progress-text\">{{ getTaskCompletionText(task) }}</span>\n                    </div>\n                  </div>\n                  <div class=\"task-tags\">\n                    <el-tag v-for=\"tag in task.tags\" :key=\"tag\" size=\"small\">{{ tag }}</el-tag>\n                  </div>\n                  <p class=\"task-description\">{{ task.description }}</p>\n                  <div class=\"ai-analysis-toggle\" @click.stop=\"task._showAI = !task._showAI\">\n                    <el-icon style=\"vertical-align:middle;\"><ChatDotRound /></el-icon>\n                    <span style=\"font-size:12px;color:#888;cursor:pointer;\">AI {{ task._showAI ? '' : '' }}</span>\n                    <el-button size=\"small\" type=\"link\" @click.stop=\"getTaskAiAnalysis(task.id)\" :loading=\"task._aiLoading\">\n                      <el-icon><Refresh /></el-icon>\n                    </el-button>\n                  </div>\n                  <div v-if=\"isCurrentUser(task.assignee?.user?.id)\" style=\"margin-top:6px;\">\n                    <el-button size=\"small\" @click.stop=\"openEditTask(task)\"></el-button>\n                    <el-button size=\"small\" type=\"danger\" @click.stop=\"confirmDeleteTask(task)\"></el-button>\n                  </div>\n                  <transition name=\"fade\">\n                    <div v-if=\"task._showAI\" class=\"ai-analysis modern-ai-analysis\">\n                      <div v-if=\"!task.ai || task.ai.length === 0\" class=\"text-center py-2\">\n                        <span class=\"text-muted\">AI</span>\n                      </div>\n                      <ul class=\"mb-0\" v-else>\n                        <li v-for=\"r in processAIContent(task.ai)\" :key=\"r\" v-html=\"formatMarkdown(r)\"></li>\n                      </ul>\n                    </div>\n                  </transition>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- / -->\n    <el-dialog v-model=\"showAddTask\" title=\"\" width=\"420px\" class=\"modern-dialog\">\n      <el-form label-width=\"80px\" class=\"modern-form\">\n        <el-form-item label=\"\"><el-input v-model=\"newTask.title\" /></el-form-item>\n        <el-form-item label=\"\">\n          <el-select v-model=\"newTask.assignee\">\n            <el-option \n              v-for=\"member in projectMembers\" \n              :key=\"member.id\" \n              :label=\"member.name\" \n              :value=\"member.id\" \n            />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"\"><el-select v-model=\"newTask.priority\"><el-option label=\"\" value=\"\" /><el-option label=\"\" value=\"\" /><el-option label=\"\" value=\"\" /></el-select></el-form-item>\n        <el-form-item label=\"\"><el-date-picker v-model=\"newTask.dueDate\" value-format=\"YYYY-MM-DD\" /></el-form-item>\n        <el-form-item label=\"\"><el-input type=\"textarea\" v-model=\"newTask.description\" /></el-form-item>\n        <el-form-item label=\"\"><el-input v-model=\"newTask.tags\" placeholder=\"\" /></el-form-item>\n      </el-form>\n      <template #footer>\n        <el-button @click=\"showAddTask = false\"></el-button>\n        <el-button type=\"primary\" @click=\"saveTask\"></el-button>\n      </template>\n    </el-dialog>\n    <!--  -->\n    <el-dialog v-model=\"showDetail\" title=\"\" width=\"480px\" class=\"modern-dialog\">\n      <div v-if=\"currentTask\">\n        <h5 style=\"font-weight:600;\">{{ currentTask.title }}</h5>\n        <div style=\"margin:10px 0;display:flex;gap:16px;align-items:center;\">\n          <el-tag :type=\"currentTask.priorityType\" size=\"small\">{{ currentTask.priority }}</el-tag>\n          <span>{{ currentTask.assignee && currentTask.assignee.user ? currentTask.assignee.user.username : '' }}</span>\n          <span>{{ currentTask.dueDate }}</span>\n        </div>\n        <div style=\"margin-bottom:10px;\">{{ currentTask.description }}</div>\n        <div style=\"margin-bottom:10px;\"><el-tag v-for=\"tag in currentTask.tags\" :key=\"tag\" size=\"small\">{{ tag }}</el-tag></div>\n        <div style=\"margin-bottom:10px;\"><el-progress :percentage=\"getTaskCompletionPercentage(currentTask)\" /></div>\n        <div class=\"ai-analysis modern-ai-analysis\">\n          <div class=\"d-flex justify-content-between align-items-center mb-2\">\n            <small class=\"text-muted\">AI</small>\n            <el-button size=\"small\" type=\"link\" @click=\"getTaskAiAnalysis(currentTask.id)\" :loading=\"currentTask._aiLoading\">\n              <el-icon><Refresh /></el-icon> \n            </el-button>\n          </div>\n          <div v-if=\"!currentTask.ai || currentTask.ai.length === 0\" class=\"text-center py-2\">\n            <span class=\"text-muted\">AI</span>\n          </div>\n          <ul class=\"mb-0\" v-else>\n            <li v-for=\"r in processAIContent(currentTask.ai)\" :key=\"r\" v-html=\"formatMarkdown(r)\"></li>\n          </ul>\n        </div>\n        <div class=\"member-completion-list\">\n          <div v-if=\"currentTask.status === 'todo' || currentTask.status === ''\">\n            <div v-for=\"member in projectMembers\" :key=\"member.id\" class=\"member-item\">\n              <span>{{ member.name }}</span>\n              <el-tag type=\"info\" size=\"small\"></el-tag>\n            </div>\n          </div>\n          <div v-else-if=\"!taskCompletions[currentTask?.id]?.members || taskCompletions[currentTask?.id]?.members.length === 0\">\n            <div v-for=\"member in projectMembers\" :key=\"member.id\" class=\"member-item\">\n              <span>{{ member.name }}</span>\n              <el-button \n                v-if=\"isCurrentUser(member.userId)\" \n                type=\"primary\" \n                size=\"small\" \n                @click=\"markCompleteForMember(currentTask.id, member.id)\"\n              ></el-button>\n              <el-tag v-else type=\"info\" size=\"small\"></el-tag>\n            </div>\n          </div>\n          <div v-else v-for=\"m in taskCompletions[currentTask.id]?.members || []\" :key=\"m.id\" class=\"member-item\">\n            <span>{{ m.name }}</span>\n            <el-tag v-if=\"m.completed\" type=\"success\" size=\"small\"></el-tag>\n            <el-button \n              v-else-if=\"isCurrentUser(m.userId)\" \n              type=\"primary\" \n              size=\"small\" \n              @click=\"markComplete(currentTask.id, m.id)\"\n            ></el-button>\n            <el-tag v-else type=\"info\" size=\"small\"></el-tag>\n          </div>\n        </div>\n      </div>\n      <template #footer>\n        <el-button @click=\"showDetail=false\"></el-button>\n        <el-button v-if=\"isCurrentUser(currentTask?.assignee?.user?.id)\" @click=\"openEditTask(currentTask)\" type=\"primary\"></el-button>\n        <el-button v-if=\"isCurrentUser(currentTask?.assignee?.user?.id)\" @click=\"confirmDeleteTask(currentTask)\" type=\"danger\"></el-button>\n      </template>\n    </el-dialog>\n    <!--  -->\n    <el-dialog v-model=\"showEditTask\" title=\"\" width=\"420px\" class=\"modern-dialog\">\n      <el-form label-width=\"80px\" class=\"modern-form\">\n        <el-form-item label=\"\"><el-input v-model=\"editTask.title\" /></el-form-item>\n        <el-form-item label=\"\"><el-select v-model=\"editTask.priority\"><el-option label=\"\" value=\"\" /><el-option label=\"\" value=\"\" /><el-option label=\"\" value=\"\" /></el-select></el-form-item>\n        <el-form-item label=\"\"><el-date-picker v-model=\"editTask.dueDate\" value-format=\"YYYY-MM-DD\" /></el-form-item>\n        <el-form-item label=\"\"><el-input type=\"textarea\" v-model=\"editTask.description\" /></el-form-item>\n        <el-form-item label=\"\"><el-input v-model=\"editTask.tags\" placeholder=\"\" /></el-form-item>\n        <el-form-item label=\"\">\n          <el-select v-model=\"editTask.status\">\n            <el-option label=\"\" value=\"todo\" />\n            <el-option label=\"\" value=\"in-progress\" />\n            <el-option label=\"\" value=\"done\" />\n          </el-select>\n        </el-form-item>\n      </el-form>\n      <template #footer>\n        <el-button @click=\"showEditTask = false\"></el-button>\n        <el-button type=\"primary\" @click=\"saveEditTask\"></el-button>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n<script setup>\nimport { ref, watch, onMounted, computed } from 'vue'\nimport { UserFilled, Calendar, ChatDotRound, Refresh } from '@element-plus/icons-vue'\nimport request from '@/utils/request'\nimport { ElMessage, ElMessageBox } from 'element-plus'\n\n// \nconst currentUser = ref(null)\ntry {\n  currentUser.value = JSON.parse(localStorage.getItem('user') || '{}')\n  console.log(':', currentUser.value)\n} catch (e) {\n  console.error(':', e)\n}\n\nconst props = defineProps({\n  project: {\n    type: Object,\n    default: () => ({})\n  },\n  members: {\n    type: Array,\n    default: () => []\n  }\n})\n\n// props.membersprojectMembers\nconst projectMembers = computed(() => props.members)\n\nconst search = ref('')\nconst filterAssignee = ref('')\nconst filterPriority = ref('')\nconst showAddTask = ref(false)\nconst showDetail = ref(false)\nconst currentTask = ref(null)\nconst newTask = ref({\n  title: '',\n  assignee: '',\n  priority: '',\n  dueDate: '',\n  description: '',\n  tags: '',\n  status: 'todo',\n  progress: 0,\n  completed: 0,\n  total: 1\n})\n\n// \nconst tasks = ref([])\n\n// \nconst taskCompletions = ref({}) // { [taskId]: { total, completed, members: [{id, name, completed}] } }\n\nconst kanban = computed(() => [\n  { name: '', tasks: tasks.value.filter(t => t.status === 'todo' || t.status === '') },\n  { name: '', tasks: tasks.value.filter(t => t.status === 'in-progress' || t.status === '') },\n  { name: '', tasks: tasks.value.filter(t => t.status === 'done' || t.status === '') }\n])\n\nconst refreshingAi = ref(false)\n\n// \nwatch([search, filterAssignee, filterPriority], () => {\n  // \n}, { deep: true });\n\n// \nfunction fetchTasks() {\n  if (!props.project || !props.project.id) return\n  request.get(`/api/tasks/?project=${props.project.id}`).then(res => {\n    // \n    const rawTasks = Array.isArray(res.data) ? res.data : (res.data.data || [])\n    tasks.value = rawTasks.map(t => ({\n      ...t,\n      dueDate: t.due_date || t.dueDate || '',\n      priority: t.priority === 'high' ? '' : t.priority === 'low' ? '' : t.priority === 'medium' ? '' : (t.priority || ''),\n      priorityType: t.priority === 'high' || t.priority === '' ? 'danger' : t.priority === 'low' || t.priority === '' ? 'info' : 'warning',\n    }))\n    // AI\n    tasks.value.forEach(task => {\n      if (!task.ai || task.ai.length === 0) {\n        getTaskAiAnalysis(task.id)\n      }\n    })\n  })\n}\n\n// \nfunction fetchTaskCompletions(taskId) {\n  if (!taskId) return;\n  request.get(`/api/task-completions/?task=${taskId}`).then(res => {\n    const completionRecords = Array.isArray(res.data) ? res.data : (res.data.data || []);\n    \n    // ID\n    const completionMap = new Map();\n    completionRecords.forEach(record => {\n      // \n      const userId = record.user?.id || record.member?.user?.id || record.member_id;\n      if (userId) {\n        completionMap.set(userId, {\n          completed: record.completed,\n          completionId: record.id\n        });\n      }\n    });\n\n    //  (props.members) \n    const currentProjectMembers = projectMembers.value;\n\n    // \n    const finalMembersForTask = currentProjectMembers.map(member => {\n      const completionData = completionMap.get(member.id);\n      return {\n        id: member.id,          // IDID\n        name: member.name,\n        completed: completionData ? completionData.completed : false,\n        completionId: completionData ? completionData.completionId : undefined,\n        userId: member.id       // userId\n      };\n    });\n\n    taskCompletions.value[taskId] = {\n      total: finalMembersForTask.length,\n      completed: finalMembersForTask.filter(m => m.completed).length,\n      members: finalMembersForTask\n    };\n  }).catch(err => {\n    console.error(`[${taskId}]:`, err);\n    // API\n    taskCompletions.value[taskId] = {\n      total: projectMembers.value.length,\n      completed: 0,\n      members: projectMembers.value.map(m => ({\n        id: m.id,\n        name: m.name,\n        completed: false,\n        userId: m.id\n      }))\n    };\n  });\n}\n\n// \nfunction getTaskCompletionPercentage(task) {\n  if (!task || !task.id) return 0\n  \n  // \n  if (taskCompletions.value[task.id]?.total) {\n    return Math.round(100 * (taskCompletions.value[task.id]?.completed || 0) / taskCompletions.value[task.id]?.total)\n  }\n  \n  // \n  return 0\n}\n\n// \nfunction getTaskCompletionText(task) {\n  if (!task || !task.id) {\n    // \n    return `0/${projectMembers.value.length || 1}`\n  }\n  \n  // \n  if (taskCompletions.value[task.id]) {\n    return `${taskCompletions.value[task.id]?.completed || 0}/${taskCompletions.value[task.id]?.total || projectMembers.value.length || 1}`\n  }\n  \n  // \n  return `0/${projectMembers.value.length || 1}`\n}\n\n// \nwatch(tasks, (val) => {\n  (val || []).forEach(task => fetchTaskCompletions(task.id))\n}, { immediate: true })\n\n//  TaskCompletion \nfunction markCompleteForMember(taskId, memberId) {\n  if (!taskId || !memberId) return\n  \n  console.log(':', taskId, memberId)\n  \n  //  TaskCompletion \n  request.post('/api/task-completions/', {\n    task: taskId,\n    member_id: memberId,\n    completed: true,\n    completed_at: new Date().toISOString()\n  }).then(() => {\n    ElMessage.success('')\n    // \n    if (!taskCompletions.value[taskId]) {\n      // \n      taskCompletions.value[taskId] = {\n        total: projectMembers.value.length,\n        completed: 1,\n        members: projectMembers.value.map(m => ({\n          id: m.id,\n          name: m.name,\n          completed: m.id === memberId,\n          completionId: undefined\n        }))\n      }\n    } else {\n      // \n      taskCompletions.value[taskId].completed++\n      //  members \n      const existingMemberIds = taskCompletions.value[taskId].members.map(m => m.id)\n      projectMembers.value.forEach(m => {\n        if (!existingMemberIds.includes(m.id)) {\n          taskCompletions.value[taskId].members.push({\n            id: m.id,\n            name: m.name,\n            completed: m.id === memberId,\n            completionId: undefined\n          })\n        }\n      })\n      // \n      const member = taskCompletions.value[taskId].members.find(m => m.id === memberId)\n      if (member) {\n        member.completed = true\n      }\n      // \n      taskCompletions.value[taskId].total = taskCompletions.value[taskId].members.length\n    }\n    \n    // \n    fetchTaskCompletions(taskId)\n    // \n    const tc = taskCompletions.value[taskId]\n    if (tc && tc.completed === tc.total && tc.total > 0) {\n      updateTaskStatusToDone(taskId)\n    }\n  }).catch(err => {\n    console.error(':', err)\n    ElMessage.error('')\n  })\n}\n\n// \"\"\nfunction markComplete(taskId, memberId) {\n  const tc = (taskCompletions.value[taskId]?.members || []).find(m => m.id === memberId)\n  if (!tc || tc.completed) return\n  \n  console.log(':', taskId, memberId, tc.completionId)\n  \n  // \n  tc.completed = true\n  taskCompletions.value[taskId].completed++\n  \n  // \n  taskCompletions.value[taskId].total = Math.max(\n    taskCompletions.value[taskId].total,\n    taskCompletions.value[taskId].members.length,\n    projectMembers.value.length\n  )\n  \n  // \n  request.patch(`/api/task-completions/${tc.completionId}/`, { \n    completed: true, \n    completed_at: new Date().toISOString() \n  }).then(() => {\n    ElMessage.success('')\n    // \n    fetchTaskCompletions(taskId)\n    // \n    const tcc = taskCompletions.value[taskId]\n    if (tcc && tcc.completed === tcc.total && tcc.total > 0) {\n      updateTaskStatusToDone(taskId)\n    }\n  }).catch(err => {\n    console.error(':', err)\n    ElMessage.error('')\n    // \n  })\n}\n\n// \nfunction updateTaskStatusToDone(taskId) {\n  // \n  const task = tasks.value.find(t => t.id === taskId)\n  if (task) task.status = 'done'\n  // \n  request.patch(`/api/tasks/${taskId}/`, { status: 'done' })\n}\n\n// \nfunction saveTask() {\n  if (!newTask.value.title || !newTask.value.assignee) {\n    ElMessage.error('')\n    return\n  }\n  // assigneeProjectMemberid\n  const assignee_id = newTask.value.assignee\n  if (!assignee_id) {\n    ElMessage.error('')\n    return\n  }\n  const payload = {\n    project: props.project.id,\n    title: newTask.value.title,\n    description: newTask.value.description,\n    assignee_id: assignee_id,\n    due_date: newTask.value.dueDate,\n    priority: newTask.value.priority === '' ? 'high' : (newTask.value.priority === 'low' ? 'low' : 'medium'),\n    status: 'todo',\n    tags: newTask.value.tags\n  }\n  request.post('/api/tasks/', payload).then(() => {\n    ElMessage.success('')\n    showAddTask.value = false\n    fetchTasks()\n  }).catch(() => {\n    ElMessage.error('')\n  })\n}\n\n// \nfunction filteredTasks(taskArr) {\n  return taskArr.filter(t => {\n    const matchSearch = !search.value || t.title.includes(search.value) || (t.description && t.description.includes(search.value))\n    const matchAssignee = !filterAssignee.value || (t.assignee && t.assignee.user && t.assignee.user.username === filterAssignee.value)\n    // \n    const matchPriority = !filterPriority.value || t.priority === filterPriority.value\n    return matchSearch && matchAssignee && matchPriority\n  })\n}\n\n// \nfunction openDetail(task) {\n  //  priorityType\n  currentTask.value = {\n    ...task,\n    priorityType: task.priorityType || (task.priority === '' || task.priority === 'high' ? 'danger' : task.priority === '' || task.priority === 'low' ? 'info' : 'warning'),\n    // AI\n    ai: task.ai || []\n  }\n  // \n  showDetail.value = true\n  // AI\n  if (!task.ai || task.ai.length === 0) {\n    getTaskAiAnalysis(task.id)\n  }\n}\n\n// AI\nfunction getTaskAiAnalysis(taskId) {\n  if (!taskId) return\n  \n  console.log('AI:', taskId)\n  \n  // \n  const task = tasks.value.find(t => t.id === taskId)\n  if (task) {\n    task._aiLoading = true\n  }\n  \n  request.get(`/api/tasks/${taskId}/ai_analysis/`).then(res => {\n    let suggestions = res.data?.suggestions || []\n    \n    // \n    if (!Array.isArray(suggestions)) {\n      suggestions = [suggestions.toString()]\n    }\n    \n    // \"\"\"\"\n    const formattedSuggestions = formatAiAnalysisData(suggestions)\n    \n    // \n    if (currentTask.value && currentTask.value.id === taskId) {\n      currentTask.value.ai = formattedSuggestions\n    }\n    \n    // \n    const task = tasks.value.find(t => t.id === taskId)\n    if (task) {\n      task.ai = formattedSuggestions\n    }\n    \n    console.log('AI:', formattedSuggestions)\n  }).catch(err => {\n    console.error('AI:', err)\n    ElMessage.error('AI')\n  }).finally(() => {\n    // \n    const task = tasks.value.find(t => t.id === taskId)\n    if (task) {\n      task._aiLoading = false\n    }\n  })\n}\n\n// \nfunction handleAddTask() {\n  newTask.value = {\n    title: '',\n    assignee: '',\n    priority: '',\n    dueDate: '',\n    description: '',\n    tags: '',\n    status: 'todo',\n    progress: 0,\n    completed: 0,\n    total: 1\n  }\n  showAddTask.value = true\n}\n\n// \nwatch(() => props.project, (newProject) => {\n  if (newProject && newProject.id) {\n    // \n    if (props.members && props.members.length > 0) {\n      projectMembers.value = props.members\n      console.log(':', projectMembers.value)\n    } else {\n      fetchProjectMembers(newProject.id)\n    }\n    fetchTasks()\n  }\n}, { immediate: true })\n\n// \nwatch(() => props.members, (newMembers) => {\n  if (newMembers && newMembers.length > 0) {\n    projectMembers.value = newMembers\n    console.log(':', projectMembers.value)\n  }\n}, { immediate: true })\n\nonMounted(() => {\n  if (props.project && props.project.id) {\n    // \n    if (props.members && props.members.length > 0) {\n      projectMembers.value = props.members\n      console.log(':', projectMembers.value)\n    } else {\n      fetchProjectMembers(props.project.id)\n    }\n    fetchTasks()\n  }\n})\n\n// ProjectMember  user \nfunction fetchProjectMembers(projectId) {\n  if (!projectId) return\n  request.get(`/api/project-members/?project=${projectId}`).then(res => {\n    // [{id: ProjectMember.id, user: {id, username, ...}, ...}]\n    if (Array.isArray(res.data)) {\n      projectMembers.value = res.data.map(pm => ({\n        id: pm.id,\n        name: pm.user?.username || pm.user?.email || '',\n        userId: pm.user?.id\n      }))\n    } else {\n      projectMembers.value = []\n    }\n    console.log('ProjectMember:', projectMembers.value)\n  }).catch(err => {\n    console.error('', err)\n    projectMembers.value = []\n  })\n}\n\n// \nconst showEditTask = ref(false)\nconst editTask = ref(null)\nfunction openEditTask(task) {\n  editTask.value = { ...task, status: task.status || 'todo' }\n  showEditTask.value = true\n}\nfunction saveEditTask() {\n  if (!editTask.value.title) {\n    ElMessage.error('')\n    return\n  }\n  request.patch(`/api/tasks/${editTask.value.id}/`, {\n    title: editTask.value.title,\n    description: editTask.value.description,\n    due_date: editTask.value.dueDate,\n    priority: editTask.value.priority === '' ? 'high' : (editTask.value.priority === '' ? 'low' : 'medium'),\n    tags: editTask.value.tags,\n    status: editTask.value.status || 'todo',\n  }).then(() => {\n    ElMessage.success('')\n    showEditTask.value = false\n    fetchTasks()\n    showDetail.value = false\n  }).catch(() => {\n    ElMessage.error('')\n  })\n}\n\n// \nfunction confirmDeleteTask(task) {\n  ElMessageBox.confirm('', '', {\n    confirmButtonText: '',\n    cancelButtonText: '',\n    type: 'warning',\n  }).then(() => {\n    request.delete(`/api/tasks/${task.id}/`).then(() => {\n      ElMessage.success('')\n      fetchTasks()\n      showDetail.value = false\n    })\n  })\n}\n\nfunction refreshAllTaskAiAnalysis() {\n  if (!tasks.value.length) return\n  refreshingAi.value = true\n  let finished = 0\n  const total = tasks.value.length\n  tasks.value.forEach(task => {\n    task._aiLoading = true\n    request.get(`/api/tasks/${task.id}/ai_analysis/`).then(res => {\n      let suggestions = res.data?.suggestions || []\n      \n      // \n      if (!Array.isArray(suggestions)) {\n        suggestions = [suggestions.toString()]\n      }\n      \n      // \"\"\"\"\n      task.ai = formatAiAnalysisData(suggestions)\n    }).catch(() => {\n      task.ai = []\n    }).finally(() => {\n      task._aiLoading = false\n      finished++\n      if (finished === total) {\n        refreshingAi.value = false\n        ElMessage.success('AI')\n      }\n    })\n  })\n}\n\n// AI\nfunction processAIContent(aiItems) {\n  if (!aiItems || !Array.isArray(aiItems)) return []\n  \n  // \":\"\n  let hasIncompleteData = false\n  if (aiItems.length > 0) {\n    const lastItem = aiItems[aiItems.length - 1]\n    if (typeof lastItem === 'string' && (lastItem.trim() === ':' || lastItem.trim() === '')) {\n      hasIncompleteData = true\n    }\n  }\n  \n  // \n  if (hasIncompleteData) {\n    return aiItems\n  }\n  \n  // \n  // \n  const result = []\n  let currentCategory = ''\n  let tempItems = []\n  \n  for (const item of aiItems) {\n    if (typeof item !== 'string') {\n      result.push(item)\n      continue\n    }\n    \n    // \n    if (item.includes(':') || item.includes('')) {\n      if (currentCategory && tempItems.length) {\n        result.push(`${currentCategory}${tempItems.join(' ')}`)\n      }\n      currentCategory = ': '\n      tempItems = []\n    } \n    else if (item.includes(':') || item.includes('')) {\n      if (currentCategory && tempItems.length) {\n        result.push(`${currentCategory}${tempItems.join(' ')}`)\n      }\n      currentCategory = ': '\n      tempItems = []\n    }\n    // \"-\"\"\"\n    else if (item.trim().startsWith('-') || item.trim().startsWith('')) {\n      result.push(item)\n    }\n    // \n    else {\n      tempItems.push(item)\n    }\n  }\n  \n  // \n  if (currentCategory && tempItems.length) {\n    result.push(`${currentCategory}${tempItems.join(' ')}`)\n  }\n  \n  return result.length ? result : aiItems\n}\n\n// MarkdownHTML\nfunction formatMarkdown(text) {\n  if (!text) return ''\n  try {\n    // markdown\n    // \n    let result = text.replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>')\n    // \n    result = result.replace(/\\*(.*?)\\*/g, '<em>$1</em>')\n    // \n    result = result.replace(/`(.*?)`/g, '<code>$1</code>')\n    // \n    result = result.replace(/\\[(.*?)\\]\\((.*?)\\)/g, '<a href=\"$2\" target=\"_blank\">$1</a>')\n    \n    // \"-\"\n    if (result.trim().startsWith('-') || result.trim().startsWith('')) {\n      result = result.replace(/^[\\s-]+/, '')\n      result = `<span class=\"list-bullet\"></span> ${result}`\n    }\n    \n    // \n    if (result.includes(':') || result.includes('')) {\n      result = `<strong class=\"analysis-title\">:</strong> ${result.replace(/[:]\\s*/, '')}`\n    }\n    else if (result.includes(':') || result.includes('')) {\n      result = `<strong class=\"suggestion-title\">:</strong> ${result.replace(/[:]\\s*/, '')}`\n    }\n    \n    return result\n  } catch (e) {\n    console.error('Markdown:', e)\n    return text\n  }\n}\n\n// AI\nfunction formatAiAnalysisData(items) {\n  if (!items || !items.length) return []\n  \n  // \n  const originalText = items.join(' ');\n  \n  // \n  const hasAnalysis = items.some(item => \n    typeof item === 'string' && \n    (item.includes(':') || item.includes(''))\n  )\n  \n  const hasSuggestion = items.some(item => \n    typeof item === 'string' && \n    (item.includes(':') || item.includes(''))\n  )\n  \n  // \":\"\n  if (items.length > 0) {\n    const lastItem = items[items.length - 1];\n    if (typeof lastItem === 'string' && \n        (lastItem.trim() === ':' || lastItem.trim() === '')) {\n      // \n      items.push('- ')\n      items.push('- ')\n    }\n  }\n  \n  // \n  if (!hasSuggestion) {\n    items.push(':')\n    items.push('- ')\n    items.push('- ')\n  }\n  \n  // \n  if (!hasAnalysis && !originalText.includes('') && !originalText.includes('')) {\n    // \n    items.unshift('- ')\n    items.unshift(':')\n  }\n  \n  // \n  if (hasAnalysis || hasSuggestion) {\n    // \n    const result = [];\n    let currentSection = null;\n    let hasAddedAnalysisItems = false;\n    let hasAddedSuggestionItems = false;\n    \n    for (let i = 0; i < items.length; i++) {\n      const item = items[i];\n      if (typeof item !== 'string') {\n        result.push(item);\n        continue;\n      }\n      \n      // \n      if (item.includes(':') || item.includes('')) {\n        currentSection = 'analysis';\n        result.push(item);\n        hasAddedAnalysisItems = false;\n        continue;\n      } else if (item.includes(':') || item.includes('')) {\n        currentSection = 'suggestion';\n        result.push(item);\n        hasAddedSuggestionItems = false;\n        continue;\n      }\n      \n      // \n      if (currentSection === 'analysis') {\n        if (!item.trim().startsWith('-') && !item.trim().startsWith('')) {\n          result.push(`- ${item}`);\n        } else {\n          result.push(item);\n        }\n        hasAddedAnalysisItems = true;\n      } else if (currentSection === 'suggestion') {\n        if (!item.trim().startsWith('-') && !item.trim().startsWith('')) {\n          result.push(`- ${item}`);\n        } else {\n          result.push(item);\n        }\n        hasAddedSuggestionItems = true;\n      } else {\n        result.push(item);\n      }\n    }\n    \n    // \n    if (currentSection === 'analysis' && !hasAddedAnalysisItems) {\n      result.push('- ');\n    } else if (currentSection === 'suggestion' && !hasAddedSuggestionItems) {\n      result.push('- ');\n      result.push('- ');\n    }\n    \n    return result;\n  }\n  \n  // \n  const analysisItems = [];\n  const suggestionItems = [];\n  \n  // \n  items.forEach(item => {\n    if (!item || typeof item !== 'string') return;\n    \n    if (item.includes('') || item.includes('') || item.includes('')) {\n      analysisItems.push(item);\n    } else if (!item.includes('') && !item.includes(':') && !item.includes('')) {\n      suggestionItems.push(item);\n    }\n  });\n  \n  // \n  if (suggestionItems.length === 0) {\n    suggestionItems.push('');\n    suggestionItems.push('');\n  }\n  \n  // \n  const result = [];\n  \n  result.push(':');\n  if (analysisItems.length > 0) {\n    result.push(...analysisItems.map(item => item.trim().startsWith('-') ? item : `- ${item}`));\n  } else {\n    result.push('- ');\n  }\n  \n  result.push(':');\n  if (suggestionItems.length > 0) {\n    result.push(...suggestionItems.map(item => item.trim().startsWith('-') ? item : `- ${item}`));\n  } else {\n    result.push('- ');\n    result.push('- ');\n  }\n  \n  return result;\n}\n\n// \nfunction isCurrentUser(memberId) {\n  if (!currentUser.value || !currentUser.value.id) return false\n  return Number(memberId) === Number(currentUser.value.id)\n}\n</script>\n<style scoped>\n.module-card.modern-tasks { background: var(--bg-color-secondary); border-radius: 14px; box-shadow: 0 4px 24px rgba(0,0,0,0.07); margin-bottom: 24px; padding: 28px 28px 18px 28px; }\n.module-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 18px; }\n.module-title { font-size: 1.25rem; font-weight: 700; color: var(--text-color) !important; margin: 0; }\n.btn-group { display: flex; gap: 14px; }\n.modern-filters { display: flex; gap: 10px; align-items: center; margin-bottom: 10px; }\n.filter-input { width: 200px; }\n.filter-select { width: 110px; }\n.kanban-view.modern-kanban { margin-top: 18px; }\n.card.modern-card { background: var(--bg-color-secondary); border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.04); margin-bottom: 18px; border: none; }\n.card-header.modern-card-header.kanban-col-header {\n  background: var(--bg-color-tertiary) !important; \n  border-radius: 12px 12px 0 0; \n  padding: 12px 18px; \n  font-weight: 700; \n  font-size: 1.1rem;\n  color: var(--text-color);\n  display: flex; \n  align-items: center; \n  gap: 8px;\n}\n.task-card.modern-task-card { background: var(--bg-color-secondary); border: 1px solid var(--border-color); border-radius: 10px; padding: 16px 14px; margin-bottom: 12px; cursor: pointer; transition: box-shadow 0.2s, transform 0.2s; box-shadow: 0 1px 4px rgba(0,0,0,0.04); position: relative; padding-right: 32px; }\n.task-card.modern-task-card:hover { box-shadow: 0 6px 24px rgba(0,0,0,0.10); transform: translateY(-2px) scale(1.02); border-color: var(--primary-color-light); }\n.task-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px; }\n.task-title-main { font-size: 1.08rem; font-weight: 600; color: var(--text-color); }\n.task-meta-row { display: flex; gap: 16px; align-items: center; font-size: 0.95rem; color: var(--text-color-secondary); margin-bottom: 6px; }\n.task-tags { display: flex; gap: 6px; margin-bottom: 6px; }\n.task-description { color: var(--text-color-secondary); font-size: 0.97rem; margin-bottom: 6px; min-height: 18px; }\n.ai-analysis-toggle { margin-top: 4px; margin-bottom: 2px; cursor: pointer; user-select: none; }\n.modern-ai-analysis { \n  background: var(--bg-color-tertiary); \n  border-left: 3px solid var(--primary-color); \n  padding: 8px 12px; \n  border-radius: 4px; \n  margin-top: 4px; \n  font-size: 0.97rem; \n}\n\n.modern-ai-analysis ul {\n  margin: 0;\n  padding-left: 18px;\n}\n\n.modern-ai-analysis li {\n  margin-bottom: 6px;\n  line-height: 1.5;\n}\n\n.modern-ai-analysis code {\n  background: rgba(0,0,0,0.05);\n  padding: 2px 4px;\n  border-radius: 3px;\n  font-family: 'Consolas', monospace;\n}\n\n.modern-ai-analysis strong {\n  font-weight: 600;\n  color: var(--text-color);\n}\n\n.modern-ai-analysis em {\n  font-style: italic;\n  color: var(--text-color-secondary);\n}\n\n.el-dialog.modern-dialog,\n.el-dialog.modern-dialog .el-dialog__body,\n.el-dialog.modern-dialog .el-dialog__footer {\n  background: var(--bg-color-secondary);\n  color: var(--text-color);\n}\n.el-dialog.modern-dialog .el-dialog__body { padding-top: 10px; }\n.el-dialog.modern-dialog .el-dialog__footer { padding-bottom: 10px; }\n.el-form.modern-form .el-form-item { margin-bottom: 14px; }\n.fade-enter-active, .fade-leave-active { transition: opacity 0.2s; }\n.fade-enter-from, .fade-leave-to { opacity: 0; }\n.kanban-col-dot { \n  width: 10px; \n  height: 10px; \n  border-radius: 50%; \n  display: inline-block; \n  margin-right: 4px; \n}\n.kanban-col-dot. { background: var(--warning-color); }\n.kanban-col-dot. { background: var(--primary-color); }\n.kanban-col-dot. { background: var(--success-color); }\n.kanban-badge { margin-left: 4px; vertical-align: middle; }\n.modern-gantt .gantt-desc { text-align: center; color: var(--text-color-tertiary); font-size: 15px; margin-top: 12px; }\n.modern-chart-view .card { background: var(--bg-color-tertiary); }\n.task-progress-row { display: flex; align-items: center; gap: 8px; margin-bottom: 4px; }\n.progress-text { font-size: 12px; color: var(--text-color-tertiary); }\n.member-completion-list { margin: 10px 0; }\n.member-item { display: flex; align-items: center; gap: 10px; margin-bottom: 6px; }\n/*  Element Plus  */\n:deep(.el-tag) {\n  background: var(--bg-color-tertiary) !important;\n  color: var(--text-color) !important;\n  border-color: var(--border-color) !important;\n}\n:deep(.el-badge__content) {\n  background-color: var(--primary-color) !important;\n  color: #fff !important;\n}\n:deep(.el-empty) {\n  background: transparent !important;\n  color: var(--text-color-tertiary) !important;\n}\n:deep(.el-progress-bar__outer) {\n  background: var(--bg-color-tertiary) !important;\n}\n:deep(.el-progress-bar__inner) {\n  background: var(--primary-color) !important;\n}\n.modern-ai-analysis .analysis-title {\n  display: block;\n  margin-bottom: 6px;\n  color: var(--primary-color);\n  font-weight: 600;\n}\n\n.modern-ai-analysis .suggestion-title {\n  display: block;\n  margin-top: 10px;\n  margin-bottom: 6px;\n  color: var(--success-color);\n  font-weight: 600;\n}\n\n.modern-ai-analysis .list-bullet {\n  display: inline-block;\n  margin-right: 6px;\n  color: var(--primary-color);\n  font-size: 1.1em;\n}\n\n.task-select {\n  position: absolute;\n  top: 12px;\n  left: 12px;\n  z-index: 5;\n}\n\n.task-body {\n  padding-left: 24px; /*  */\n  cursor: pointer;\n}\n\n.task-card.modern-task-card {\n  position: relative;\n  padding: 16px 14px 16px 14px;\n}\n</style> "],"mappings":"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","ignoreList":[]}]}