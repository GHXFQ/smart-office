{"remainingRequest":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\project\\components\\TasksView.vue?vue&type=script&setup=true&lang=js","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\project\\components\\TasksView.vue","mtime":1752054961594},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\babel.config.js","mtime":1748077811200},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1746431218000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3Iuc29tZS5qcyI7CmltcG9ydCB7IHJlZiwgd2F0Y2gsIG9uTW91bnRlZCwgY29tcHV0ZWQgfSBmcm9tICd2dWUnOwppbXBvcnQgeyBVc2VyRmlsbGVkLCBDYWxlbmRhciwgQ2hhdERvdFJvdW5kLCBSZWZyZXNoIH0gZnJvbSAnQGVsZW1lbnQtcGx1cy9pY29ucy12dWUnOwppbXBvcnQgcmVxdWVzdCBmcm9tICdAL3V0aWxzL3JlcXVlc3QnOwppbXBvcnQgeyBFbE1lc3NhZ2UsIEVsTWVzc2FnZUJveCB9IGZyb20gJ2VsZW1lbnQtcGx1cyc7CgovLyDojrflj5blvZPliY3nmbvlvZXnlKjmiLfkv6Hmga8KCmV4cG9ydCBkZWZhdWx0IHsKICBfX25hbWU6ICdUYXNrc1ZpZXcnLAogIHByb3BzOiB7CiAgICBwcm9qZWN0OiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogKCkgPT4gKHt9KQogICAgfSwKICAgIG1lbWJlcnM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6ICgpID0+IFtdCiAgICB9CiAgfSwKICBzZXR1cChfX3Byb3BzLCB7CiAgICBleHBvc2U6IF9fZXhwb3NlCiAgfSkgewogICAgX19leHBvc2UoKTsKICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gcmVmKG51bGwpOwogICAgdHJ5IHsKICAgICAgY3VycmVudFVzZXIudmFsdWUgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyJykgfHwgJ3t9Jyk7CiAgICAgIGNvbnNvbGUubG9nKCflvZPliY3nmbvlvZXnlKjmiLc6JywgY3VycmVudFVzZXIudmFsdWUpOwogICAgfSBjYXRjaCAoZSkgewogICAgICBjb25zb2xlLmVycm9yKCfop6PmnpDnlKjmiLfkv6Hmga/lpLHotKU6JywgZSk7CiAgICB9CiAgICBjb25zdCBwcm9wcyA9IF9fcHJvcHM7CgogICAgLy8g55u05o6l5L2/55SocHJvcHMubWVtYmVyc++8jOaXoOmcgOWGjeWumuS5ieacrOWcsOeahHByb2plY3RNZW1iZXJzCiAgICBjb25zdCBwcm9qZWN0TWVtYmVycyA9IGNvbXB1dGVkKCgpID0+IHByb3BzLm1lbWJlcnMpOwogICAgY29uc3Qgc2VhcmNoID0gcmVmKCcnKTsKICAgIGNvbnN0IGZpbHRlckFzc2lnbmVlID0gcmVmKCcnKTsKICAgIGNvbnN0IGZpbHRlclByaW9yaXR5ID0gcmVmKCcnKTsKICAgIGNvbnN0IHNob3dBZGRUYXNrID0gcmVmKGZhbHNlKTsKICAgIGNvbnN0IHNob3dEZXRhaWwgPSByZWYoZmFsc2UpOwogICAgY29uc3QgY3VycmVudFRhc2sgPSByZWYobnVsbCk7CiAgICBjb25zdCBuZXdUYXNrID0gcmVmKHsKICAgICAgdGl0bGU6ICcnLAogICAgICBhc3NpZ25lZTogJycsCiAgICAgIHByaW9yaXR5OiAn5LitJywKICAgICAgZHVlRGF0ZTogJycsCiAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgdGFnczogJycsCiAgICAgIHN0YXR1czogJ3RvZG8nLAogICAgICBwcm9ncmVzczogMCwKICAgICAgY29tcGxldGVkOiAwLAogICAgICB0b3RhbDogMQogICAgfSk7CgogICAgLy8g5omA5pyJ5Lu75Yqh5pWw5o2uCiAgICBjb25zdCB0YXNrcyA9IHJlZihbXSk7CgogICAgLy8g5paw5aKe77ya5Lu75Yqh5a6M5oiQ6L+b5bqm5pWw5o2uCiAgICBjb25zdCB0YXNrQ29tcGxldGlvbnMgPSByZWYoe30pOyAvLyB7IFt0YXNrSWRdOiB7IHRvdGFsLCBjb21wbGV0ZWQsIG1lbWJlcnM6IFt7aWQsIG5hbWUsIGNvbXBsZXRlZH1dIH0gfQoKICAgIGNvbnN0IGthbmJhbiA9IGNvbXB1dGVkKCgpID0+IFt7CiAgICAgIG5hbWU6ICflvoXlpITnkIYnLAogICAgICB0YXNrczogdGFza3MudmFsdWUuZmlsdGVyKHQgPT4gdC5zdGF0dXMgPT09ICd0b2RvJyB8fCB0LnN0YXR1cyA9PT0gJ+W+heWkhOeQhicpCiAgICB9LCB7CiAgICAgIG5hbWU6ICfov5vooYzkuK0nLAogICAgICB0YXNrczogdGFza3MudmFsdWUuZmlsdGVyKHQgPT4gdC5zdGF0dXMgPT09ICdpbi1wcm9ncmVzcycgfHwgdC5zdGF0dXMgPT09ICfov5vooYzkuK0nKQogICAgfSwgewogICAgICBuYW1lOiAn5bey5a6M5oiQJywKICAgICAgdGFza3M6IHRhc2tzLnZhbHVlLmZpbHRlcih0ID0+IHQuc3RhdHVzID09PSAnZG9uZScgfHwgdC5zdGF0dXMgPT09ICflt7LlrozmiJAnKQogICAgfV0pOwogICAgY29uc3QgcmVmcmVzaGluZ0FpID0gcmVmKGZhbHNlKTsKCiAgICAvLyDooajljZXlvJXnlKgKICAgIGNvbnN0IGFkZFRhc2tGb3JtUmVmID0gcmVmKG51bGwpOwogICAgY29uc3QgZWRpdFRhc2tGb3JtUmVmID0gcmVmKG51bGwpOwoKICAgIC8vIOihqOWNlemqjOivgeinhOWImQogICAgY29uc3QgZm9ybVJ1bGVzID0gewogICAgICB0aXRsZTogW3sKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5Lu75Yqh5ZCN56ewJywKICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgfV0sCiAgICAgIGFzc2lnbmVlOiBbewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIG1lc3NhZ2U6ICfor7fpgInmi6notJ/otKPkuronLAogICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgIH1dLAogICAgICBwcmlvcml0eTogW3sKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oup5LyY5YWI57qnJywKICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJwogICAgICB9XSwKICAgICAgZHVlRGF0ZTogW3sKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oup5oiq5q2i5pel5pyfJywKICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJwogICAgICB9XSwKICAgICAgZGVzY3JpcHRpb246IFt7CiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeS7u+WKoeaPj+i/sCcsCiAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgIH1dLAogICAgICB0YWdzOiBbewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXmoIfnrb4nLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9XSwKICAgICAgc3RhdHVzOiBbewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIG1lc3NhZ2U6ICfor7fpgInmi6nnirbmgIEnLAogICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgIH1dCiAgICB9OwoKICAgIC8vIOa3u+WKoOi/h+a7pOadoeS7tuWPmOWMluebkeWQrAogICAgd2F0Y2goW3NlYXJjaCwgZmlsdGVyQXNzaWduZWUsIGZpbHRlclByaW9yaXR5XSwgKCkgPT4gewogICAgICAvLyDlvZPov4fmu6TmnaHku7blj5jljJbml7bvvIzliLfmlrDku7vliqHliJfooagKICAgIH0sIHsKICAgICAgZGVlcDogdHJ1ZQogICAgfSk7CgogICAgLy8g6I635Y+W5Lu75Yqh5YiX6KGoCiAgICBmdW5jdGlvbiBmZXRjaFRhc2tzKCkgewogICAgICBpZiAoIXByb3BzLnByb2plY3QgfHwgIXByb3BzLnByb2plY3QuaWQpIHJldHVybjsKICAgICAgcmVxdWVzdC5nZXQoYC9hcGkvdGFza3MvP3Byb2plY3Q9JHtwcm9wcy5wcm9qZWN0LmlkfWApLnRoZW4ocmVzID0+IHsKICAgICAgICAvLyDnu5/kuIDovazmjaLku7vliqHlrZfmrrUKICAgICAgICBjb25zdCByYXdUYXNrcyA9IEFycmF5LmlzQXJyYXkocmVzLmRhdGEpID8gcmVzLmRhdGEgOiByZXMuZGF0YS5kYXRhIHx8IFtdOwogICAgICAgIHRhc2tzLnZhbHVlID0gcmF3VGFza3MubWFwKHQgPT4gKHsKICAgICAgICAgIC4uLnQsCiAgICAgICAgICBkdWVEYXRlOiB0LmR1ZV9kYXRlIHx8IHQuZHVlRGF0ZSB8fCAnJywKICAgICAgICAgIHByaW9yaXR5OiB0LnByaW9yaXR5ID09PSAnaGlnaCcgPyAn6auYJyA6IHQucHJpb3JpdHkgPT09ICdsb3cnID8gJ+S9jicgOiB0LnByaW9yaXR5ID09PSAnbWVkaXVtJyA/ICfkuK0nIDogdC5wcmlvcml0eSB8fCAnJywKICAgICAgICAgIHByaW9yaXR5VHlwZTogdC5wcmlvcml0eSA9PT0gJ2hpZ2gnIHx8IHQucHJpb3JpdHkgPT09ICfpq5gnID8gJ2RhbmdlcicgOiB0LnByaW9yaXR5ID09PSAnbG93JyB8fCB0LnByaW9yaXR5ID09PSAn5L2OJyA/ICdpbmZvJyA6ICd3YXJuaW5nJwogICAgICAgIH0pKTsKICAgICAgICAvLyDoh6rliqhBSeWIhuaekAogICAgICAgIHRhc2tzLnZhbHVlLmZvckVhY2godGFzayA9PiB7CiAgICAgICAgICBpZiAoIXRhc2suYWkgfHwgdGFzay5haS5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgZ2V0VGFza0FpQW5hbHlzaXModGFzay5pZCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQoKICAgIC8vIOiOt+WPluS7u+WKoeWujOaIkOi/m+W6pgogICAgZnVuY3Rpb24gZmV0Y2hUYXNrQ29tcGxldGlvbnModGFza0lkKSB7CiAgICAgIGlmICghdGFza0lkKSByZXR1cm47CiAgICAgIHJlcXVlc3QuZ2V0KGAvYXBpL3Rhc2stY29tcGxldGlvbnMvP3Rhc2s9JHt0YXNrSWR9YCkudGhlbihyZXMgPT4gewogICAgICAgIGNvbnN0IGNvbXBsZXRpb25SZWNvcmRzID0gQXJyYXkuaXNBcnJheShyZXMuZGF0YSkgPyByZXMuZGF0YSA6IHJlcy5kYXRhLmRhdGEgfHwgW107CgogICAgICAgIC8vIOWIm+W7uuS4gOS4quS7peeUqOaIt0lE5Li66ZSu55qE5a6M5oiQ54q25oCB5pig5bCE77yM5pa55L6/5b+r6YCf5p+l5om+CiAgICAgICAgY29uc3QgY29tcGxldGlvbk1hcCA9IG5ldyBNYXAoKTsKICAgICAgICBjb21wbGV0aW9uUmVjb3Jkcy5mb3JFYWNoKHJlY29yZCA9PiB7CiAgICAgICAgICB2YXIgX3JlY29yZCR1c2VyLCBfcmVjb3JkJG1lbWJlciwgX3JlY29yZCRtZW1iZXIkdXNlcjsKICAgICAgICAgIC8vIOWFvOWuueWkmuenjeWPr+iDveeahOWQjuerr+i/lOWbnue7k+aehAogICAgICAgICAgY29uc3QgdXNlcklkID0gKChfcmVjb3JkJHVzZXIgPSByZWNvcmQudXNlcikgPT09IG51bGwgfHwgX3JlY29yZCR1c2VyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVjb3JkJHVzZXIuaWQpIHx8ICgoX3JlY29yZCRtZW1iZXIgPSByZWNvcmQubWVtYmVyKSA9PT0gbnVsbCB8fCBfcmVjb3JkJG1lbWJlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9yZWNvcmQkbWVtYmVyJHVzZXIgPSBfcmVjb3JkJG1lbWJlci51c2VyKSA9PT0gbnVsbCB8fCBfcmVjb3JkJG1lbWJlciR1c2VyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVjb3JkJG1lbWJlciR1c2VyLmlkKSB8fCByZWNvcmQubWVtYmVyX2lkOwogICAgICAgICAgaWYgKHVzZXJJZCkgewogICAgICAgICAgICBjb21wbGV0aW9uTWFwLnNldCh1c2VySWQsIHsKICAgICAgICAgICAgICBjb21wbGV0ZWQ6IHJlY29yZC5jb21wbGV0ZWQsCiAgICAgICAgICAgICAgY29tcGxldGlvbklkOiByZWNvcmQuaWQKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIC8vIOS7peW9k+WJjeeahOmhueebruaIkOWRmOWIl+ihqCAocHJvcHMubWVtYmVycykg5Li65ZSv5LiA5pWw5o2u5rqQCiAgICAgICAgY29uc3QgY3VycmVudFByb2plY3RNZW1iZXJzID0gcHJvamVjdE1lbWJlcnMudmFsdWU7CgogICAgICAgIC8vIOWfuuS6juW9k+WJjemhueebruaIkOWRmOaehOW7uuS7u+WKoeeahOacgOe7iOaIkOWRmOWIl+ihqO+8jOW5tumZhOWKoOWFtuWujOaIkOeKtuaAgQogICAgICAgIGNvbnN0IGZpbmFsTWVtYmVyc0ZvclRhc2sgPSBjdXJyZW50UHJvamVjdE1lbWJlcnMubWFwKG1lbWJlciA9PiB7CiAgICAgICAgICBjb25zdCBjb21wbGV0aW9uRGF0YSA9IGNvbXBsZXRpb25NYXAuZ2V0KG1lbWJlci5pZCk7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBpZDogbWVtYmVyLmlkLAogICAgICAgICAgICAvLyDnoa7kv51JROaYr+eUqOaIt0lECiAgICAgICAgICAgIG5hbWU6IG1lbWJlci5uYW1lLAogICAgICAgICAgICBjb21wbGV0ZWQ6IGNvbXBsZXRpb25EYXRhID8gY29tcGxldGlvbkRhdGEuY29tcGxldGVkIDogZmFsc2UsCiAgICAgICAgICAgIGNvbXBsZXRpb25JZDogY29tcGxldGlvbkRhdGEgPyBjb21wbGV0aW9uRGF0YS5jb21wbGV0aW9uSWQgOiB1bmRlZmluZWQsCiAgICAgICAgICAgIHVzZXJJZDogbWVtYmVyLmlkIC8vIOaYjuehrnVzZXJJZOWtl+autQogICAgICAgICAgfTsKICAgICAgICB9KTsKICAgICAgICB0YXNrQ29tcGxldGlvbnMudmFsdWVbdGFza0lkXSA9IHsKICAgICAgICAgIHRvdGFsOiBmaW5hbE1lbWJlcnNGb3JUYXNrLmxlbmd0aCwKICAgICAgICAgIGNvbXBsZXRlZDogZmluYWxNZW1iZXJzRm9yVGFzay5maWx0ZXIobSA9PiBtLmNvbXBsZXRlZCkubGVuZ3RoLAogICAgICAgICAgbWVtYmVyczogZmluYWxNZW1iZXJzRm9yVGFzawogICAgICAgIH07CiAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgY29uc29sZS5lcnJvcihg6I635Y+W5Lu75YqhWyR7dGFza0lkfV3lrozmiJDov5vluqblpLHotKU6YCwgZXJyKTsKICAgICAgICAvLyDlpoLmnpxBUEnosIPnlKjlpLHotKXvvIzliJnlsIbmiYDmnInlvZPliY3pobnnm67miJDlkZjmmL7npLrkuLrmnKrlrozmiJAKICAgICAgICB0YXNrQ29tcGxldGlvbnMudmFsdWVbdGFza0lkXSA9IHsKICAgICAgICAgIHRvdGFsOiBwcm9qZWN0TWVtYmVycy52YWx1ZS5sZW5ndGgsCiAgICAgICAgICBjb21wbGV0ZWQ6IDAsCiAgICAgICAgICBtZW1iZXJzOiBwcm9qZWN0TWVtYmVycy52YWx1ZS5tYXAobSA9PiAoewogICAgICAgICAgICBpZDogbS5pZCwKICAgICAgICAgICAgbmFtZTogbS5uYW1lLAogICAgICAgICAgICBjb21wbGV0ZWQ6IGZhbHNlLAogICAgICAgICAgICB1c2VySWQ6IG0uaWQKICAgICAgICAgIH0pKQogICAgICAgIH07CiAgICAgIH0pOwogICAgfQoKICAgIC8vIOaWsOWinu+8muiOt+WPluS7u+WKoeWujOaIkOeZvuWIhuavlAogICAgZnVuY3Rpb24gZ2V0VGFza0NvbXBsZXRpb25QZXJjZW50YWdlKHRhc2spIHsKICAgICAgdmFyIF90YXNrQ29tcGxldGlvbnMkdmFsdTsKICAgICAgaWYgKCF0YXNrIHx8ICF0YXNrLmlkKSByZXR1cm4gMDsKCiAgICAgIC8vIOWmguaenOacieWQjuerr+aVsOaNru+8jOS9v+eUqOWQjuerr+aVsOaNrgogICAgICBpZiAoKF90YXNrQ29tcGxldGlvbnMkdmFsdSA9IHRhc2tDb21wbGV0aW9ucy52YWx1ZVt0YXNrLmlkXSkgIT09IG51bGwgJiYgX3Rhc2tDb21wbGV0aW9ucyR2YWx1ICE9PSB2b2lkIDAgJiYgX3Rhc2tDb21wbGV0aW9ucyR2YWx1LnRvdGFsKSB7CiAgICAgICAgdmFyIF90YXNrQ29tcGxldGlvbnMkdmFsdTIsIF90YXNrQ29tcGxldGlvbnMkdmFsdTM7CiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQoMTAwICogKCgoX3Rhc2tDb21wbGV0aW9ucyR2YWx1MiA9IHRhc2tDb21wbGV0aW9ucy52YWx1ZVt0YXNrLmlkXSkgPT09IG51bGwgfHwgX3Rhc2tDb21wbGV0aW9ucyR2YWx1MiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Rhc2tDb21wbGV0aW9ucyR2YWx1Mi5jb21wbGV0ZWQpIHx8IDApIC8gKChfdGFza0NvbXBsZXRpb25zJHZhbHUzID0gdGFza0NvbXBsZXRpb25zLnZhbHVlW3Rhc2suaWRdKSA9PT0gbnVsbCB8fCBfdGFza0NvbXBsZXRpb25zJHZhbHUzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGFza0NvbXBsZXRpb25zJHZhbHUzLnRvdGFsKSk7CiAgICAgIH0KCiAgICAgIC8vIOWQpuWImeS9v+eUqOm7mOiupOWAvAogICAgICByZXR1cm4gMDsKICAgIH0KCiAgICAvLyDmlrDlop7vvJrojrflj5bku7vliqHlrozmiJDmlofmnKwKICAgIGZ1bmN0aW9uIGdldFRhc2tDb21wbGV0aW9uVGV4dCh0YXNrKSB7CiAgICAgIGlmICghdGFzayB8fCAhdGFzay5pZCkgewogICAgICAgIC8vIOWmguaenOayoeacieS7u+WKoe+8jOaYvuekuum7mOiupOWAvAogICAgICAgIHJldHVybiBgMC8ke3Byb2plY3RNZW1iZXJzLnZhbHVlLmxlbmd0aCB8fCAxfeS6uuWujOaIkGA7CiAgICAgIH0KCiAgICAgIC8vIOWmguaenOacieWQjuerr+aVsOaNru+8jOS9v+eUqOWQjuerr+aVsOaNrgogICAgICBpZiAodGFza0NvbXBsZXRpb25zLnZhbHVlW3Rhc2suaWRdKSB7CiAgICAgICAgdmFyIF90YXNrQ29tcGxldGlvbnMkdmFsdTQsIF90YXNrQ29tcGxldGlvbnMkdmFsdTU7CiAgICAgICAgcmV0dXJuIGAkeygoX3Rhc2tDb21wbGV0aW9ucyR2YWx1NCA9IHRhc2tDb21wbGV0aW9ucy52YWx1ZVt0YXNrLmlkXSkgPT09IG51bGwgfHwgX3Rhc2tDb21wbGV0aW9ucyR2YWx1NCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Rhc2tDb21wbGV0aW9ucyR2YWx1NC5jb21wbGV0ZWQpIHx8IDB9LyR7KChfdGFza0NvbXBsZXRpb25zJHZhbHU1ID0gdGFza0NvbXBsZXRpb25zLnZhbHVlW3Rhc2suaWRdKSA9PT0gbnVsbCB8fCBfdGFza0NvbXBsZXRpb25zJHZhbHU1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGFza0NvbXBsZXRpb25zJHZhbHU1LnRvdGFsKSB8fCBwcm9qZWN0TWVtYmVycy52YWx1ZS5sZW5ndGggfHwgMX3kurrlrozmiJBgOwogICAgICB9CgogICAgICAvLyDlkKbliJnkvb/nlKjpu5jorqTlgLwKICAgICAgcmV0dXJuIGAwLyR7cHJvamVjdE1lbWJlcnMudmFsdWUubGVuZ3RoIHx8IDF95Lq65a6M5oiQYDsKICAgIH0KCiAgICAvLyDlnKjku7vliqHliJfooajliqDovb3lkI7vvIzmibnph4/ojrflj5bmiYDmnInku7vliqHnmoTlrozmiJDov5vluqYKICAgIHdhdGNoKHRhc2tzLCB2YWwgPT4gewogICAgICAodmFsIHx8IFtdKS5mb3JFYWNoKHRhc2sgPT4gZmV0Y2hUYXNrQ29tcGxldGlvbnModGFzay5pZCkpOwogICAgfSwgewogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0pOwoKICAgIC8vIOaWsOWinu+8muS4uuayoeaciSBUYXNrQ29tcGxldGlvbiDorrDlvZXnmoTmiJDlkZjmoIforrDlrozmiJAKICAgIGZ1bmN0aW9uIG1hcmtDb21wbGV0ZUZvck1lbWJlcih0YXNrSWQsIG1lbWJlcklkKSB7CiAgICAgIGlmICghdGFza0lkIHx8ICFtZW1iZXJJZCkgcmV0dXJuOwogICAgICBjb25zb2xlLmxvZygn5Li65paw5oiQ5ZGY5qCH6K6w5Lu75Yqh5a6M5oiQOicsIHRhc2tJZCwgbWVtYmVySWQpOwoKICAgICAgLy8g5Yib5bu65paw55qEIFRhc2tDb21wbGV0aW9uIOiusOW9lQogICAgICByZXF1ZXN0LnBvc3QoJy9hcGkvdGFzay1jb21wbGV0aW9ucy8nLCB7CiAgICAgICAgdGFzazogdGFza0lkLAogICAgICAgIG1lbWJlcl9pZDogbWVtYmVySWQsCiAgICAgICAgY29tcGxldGVkOiB0cnVlLAogICAgICAgIGNvbXBsZXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpCiAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIEVsTWVzc2FnZS5zdWNjZXNzKCflt7LmoIforrDkuLrlrozmiJAnKTsKICAgICAgICAvLyDmm7TmlrDmnKzlnLDnirbmgIEKICAgICAgICBpZiAoIXRhc2tDb21wbGV0aW9ucy52YWx1ZVt0YXNrSWRdKSB7CiAgICAgICAgICAvLyDliJ3lp4vljJbku7vliqHlrozmiJDnirbmgIHvvIzkvb/nlKjpobnnm67miJDlkZjmgLvmlbAKICAgICAgICAgIHRhc2tDb21wbGV0aW9ucy52YWx1ZVt0YXNrSWRdID0gewogICAgICAgICAgICB0b3RhbDogcHJvamVjdE1lbWJlcnMudmFsdWUubGVuZ3RoLAogICAgICAgICAgICBjb21wbGV0ZWQ6IDEsCiAgICAgICAgICAgIG1lbWJlcnM6IHByb2plY3RNZW1iZXJzLnZhbHVlLm1hcChtID0+ICh7CiAgICAgICAgICAgICAgaWQ6IG0uaWQsCiAgICAgICAgICAgICAgbmFtZTogbS5uYW1lLAogICAgICAgICAgICAgIGNvbXBsZXRlZDogbS5pZCA9PT0gbWVtYmVySWQsCiAgICAgICAgICAgICAgY29tcGxldGlvbklkOiB1bmRlZmluZWQKICAgICAgICAgICAgfSkpCiAgICAgICAgICB9OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyDmm7TmlrDlt7LmnInnmoTku7vliqHlrozmiJDnirbmgIEKICAgICAgICAgIHRhc2tDb21wbGV0aW9ucy52YWx1ZVt0YXNrSWRdLmNvbXBsZXRlZCsrOwogICAgICAgICAgLy8g56Gu5L+dIG1lbWJlcnMg5pWw57uE5YyF5ZCr5omA5pyJ6aG555uu5oiQ5ZGYCiAgICAgICAgICBjb25zdCBleGlzdGluZ01lbWJlcklkcyA9IHRhc2tDb21wbGV0aW9ucy52YWx1ZVt0YXNrSWRdLm1lbWJlcnMubWFwKG0gPT4gbS5pZCk7CiAgICAgICAgICBwcm9qZWN0TWVtYmVycy52YWx1ZS5mb3JFYWNoKG0gPT4gewogICAgICAgICAgICBpZiAoIWV4aXN0aW5nTWVtYmVySWRzLmluY2x1ZGVzKG0uaWQpKSB7CiAgICAgICAgICAgICAgdGFza0NvbXBsZXRpb25zLnZhbHVlW3Rhc2tJZF0ubWVtYmVycy5wdXNoKHsKICAgICAgICAgICAgICAgIGlkOiBtLmlkLAogICAgICAgICAgICAgICAgbmFtZTogbS5uYW1lLAogICAgICAgICAgICAgICAgY29tcGxldGVkOiBtLmlkID09PSBtZW1iZXJJZCwKICAgICAgICAgICAgICAgIGNvbXBsZXRpb25JZDogdW5kZWZpbmVkCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgLy8g5pu05paw5b2T5YmN5oiQ5ZGY55qE5a6M5oiQ54q25oCBCiAgICAgICAgICBjb25zdCBtZW1iZXIgPSB0YXNrQ29tcGxldGlvbnMudmFsdWVbdGFza0lkXS5tZW1iZXJzLmZpbmQobSA9PiBtLmlkID09PSBtZW1iZXJJZCk7CiAgICAgICAgICBpZiAobWVtYmVyKSB7CiAgICAgICAgICAgIG1lbWJlci5jb21wbGV0ZWQgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgICAgLy8g56Gu5L+d5oC75pWw5q2j56GuCiAgICAgICAgICB0YXNrQ29tcGxldGlvbnMudmFsdWVbdGFza0lkXS50b3RhbCA9IHRhc2tDb21wbGV0aW9ucy52YWx1ZVt0YXNrSWRdLm1lbWJlcnMubGVuZ3RoOwogICAgICAgIH0KCiAgICAgICAgLy8g6YeN5paw6I635Y+W5pyA5paw5pWw5o2uCiAgICAgICAgZmV0Y2hUYXNrQ29tcGxldGlvbnModGFza0lkKTsKICAgICAgICAvLyDmo4Dmn6XmmK/lkKbmiYDmnInmiJDlkZjpg73lrozmiJDvvIzoh6rliqjorr7kuLrlt7LlrozmiJAKICAgICAgICBjb25zdCB0YyA9IHRhc2tDb21wbGV0aW9ucy52YWx1ZVt0YXNrSWRdOwogICAgICAgIGlmICh0YyAmJiB0Yy5jb21wbGV0ZWQgPT09IHRjLnRvdGFsICYmIHRjLnRvdGFsID4gMCkgewogICAgICAgICAgdXBkYXRlVGFza1N0YXR1c1RvRG9uZSh0YXNrSWQpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICBjb25zb2xlLmVycm9yKCfliJvlu7rku7vliqHlrozmiJDorrDlvZXlpLHotKU6JywgZXJyKTsKICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+aTjeS9nOWksei0pe+8jOivt+mHjeivlScpOwogICAgICB9KTsKICAgIH0KCiAgICAvLyDmiJDlkZjngrnlh7si5a6M5oiQIuaMiemSrgogICAgZnVuY3Rpb24gbWFya0NvbXBsZXRlKHRhc2tJZCwgbWVtYmVySWQpIHsKICAgICAgdmFyIF90YXNrQ29tcGxldGlvbnMkdmFsdTY7CiAgICAgIGNvbnN0IHRjID0gKCgoX3Rhc2tDb21wbGV0aW9ucyR2YWx1NiA9IHRhc2tDb21wbGV0aW9ucy52YWx1ZVt0YXNrSWRdKSA9PT0gbnVsbCB8fCBfdGFza0NvbXBsZXRpb25zJHZhbHU2ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGFza0NvbXBsZXRpb25zJHZhbHU2Lm1lbWJlcnMpIHx8IFtdKS5maW5kKG0gPT4gbS5pZCA9PT0gbWVtYmVySWQpOwogICAgICBpZiAoIXRjIHx8IHRjLmNvbXBsZXRlZCkgcmV0dXJuOwogICAgICBjb25zb2xlLmxvZygn5qCH6K6w5Lu75Yqh5a6M5oiQOicsIHRhc2tJZCwgbWVtYmVySWQsIHRjLmNvbXBsZXRpb25JZCk7CgogICAgICAvLyDnq4vljbPmm7TmlrDmnKzlnLDnirbmgIHvvIzmj5DkvpvljbPml7blj43ppogKICAgICAgdGMuY29tcGxldGVkID0gdHJ1ZTsKICAgICAgdGFza0NvbXBsZXRpb25zLnZhbHVlW3Rhc2tJZF0uY29tcGxldGVkKys7CgogICAgICAvLyDnoa7kv53mgLvmlbDmraPnoa4KICAgICAgdGFza0NvbXBsZXRpb25zLnZhbHVlW3Rhc2tJZF0udG90YWwgPSBNYXRoLm1heCh0YXNrQ29tcGxldGlvbnMudmFsdWVbdGFza0lkXS50b3RhbCwgdGFza0NvbXBsZXRpb25zLnZhbHVlW3Rhc2tJZF0ubWVtYmVycy5sZW5ndGgsIHByb2plY3RNZW1iZXJzLnZhbHVlLmxlbmd0aCk7CgogICAgICAvLyDnhLblkI7lj5HpgIHor7fmsYLliLDlkI7nq68KICAgICAgcmVxdWVzdC5wYXRjaChgL2FwaS90YXNrLWNvbXBsZXRpb25zLyR7dGMuY29tcGxldGlvbklkfS9gLCB7CiAgICAgICAgY29tcGxldGVkOiB0cnVlLAogICAgICAgIGNvbXBsZXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpCiAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIEVsTWVzc2FnZS5zdWNjZXNzKCflt7LmoIforrDkuLrlrozmiJAnKTsKICAgICAgICAvLyDph43mlrDojrflj5bmnIDmlrDmlbDmja4KICAgICAgICBmZXRjaFRhc2tDb21wbGV0aW9ucyh0YXNrSWQpOwogICAgICAgIC8vIOajgOafpeaYr+WQpuaJgOacieaIkOWRmOmDveWujOaIkO+8jOiHquWKqOiuvuS4uuW3suWujOaIkAogICAgICAgIGNvbnN0IHRjYyA9IHRhc2tDb21wbGV0aW9ucy52YWx1ZVt0YXNrSWRdOwogICAgICAgIGlmICh0Y2MgJiYgdGNjLmNvbXBsZXRlZCA9PT0gdGNjLnRvdGFsICYmIHRjYy50b3RhbCA+IDApIHsKICAgICAgICAgIHVwZGF0ZVRhc2tTdGF0dXNUb0RvbmUodGFza0lkKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgY29uc29sZS5lcnJvcign5qCH6K6w5a6M5oiQ5aSx6LSlOicsIGVycik7CiAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfmk43kvZzlpLHotKXvvIzkvYbnlYzpnaLlt7Lmm7TmlrAnKTsKICAgICAgICAvLyDlpLHotKXml7bkuI3lm57mu5rmnKzlnLDnirbmgIHvvIzkv53mjIHnlKjmiLfkvZPpqowKICAgICAgfSk7CiAgICB9CgogICAgLy8g5paw5aKe77ya6Ieq5Yqo5bCG5Lu75Yqh54q25oCB6K6+5Li65bey5a6M5oiQCiAgICBmdW5jdGlvbiB1cGRhdGVUYXNrU3RhdHVzVG9Eb25lKHRhc2tJZCkgewogICAgICAvLyDmnKzlnLDmm7TmlrAKICAgICAgY29uc3QgdGFzayA9IHRhc2tzLnZhbHVlLmZpbmQodCA9PiB0LmlkID09PSB0YXNrSWQpOwogICAgICBpZiAodGFzaykgdGFzay5zdGF0dXMgPSAnZG9uZSc7CiAgICAgIC8vIOWQjuerr+abtOaWsAogICAgICByZXF1ZXN0LnBhdGNoKGAvYXBpL3Rhc2tzLyR7dGFza0lkfS9gLCB7CiAgICAgICAgc3RhdHVzOiAnZG9uZScKICAgICAgfSk7CiAgICB9CgogICAgLy8g5paw5bu65Lu75YqhCiAgICBmdW5jdGlvbiBzYXZlVGFzaygpIHsKICAgICAgaWYgKCFhZGRUYXNrRm9ybVJlZi52YWx1ZSkgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+ihqOWNleW8leeUqOS4jeWtmOWcqCcpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBhZGRUYXNrRm9ybVJlZi52YWx1ZS52YWxpZGF0ZSh2YWxpZCA9PiB7CiAgICAgICAgaWYgKCF2YWxpZCkgewogICAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfor7floavlhpnmiYDmnInlv4XloavpobknKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIC8vIOebtOaOpeeUqGFzc2lnbmVl5Li6UHJvamVjdE1lbWJlcueahGlkCiAgICAgICAgY29uc3QgYXNzaWduZWVfaWQgPSBuZXdUYXNrLnZhbHVlLmFzc2lnbmVlOwogICAgICAgIGlmICghYXNzaWduZWVfaWQpIHsKICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcign6LSf6LSj5Lq65peg5pWIJyk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIC8vIOehruS/nXRhZ3PmmK/lrZfnrKbkuLLogIzkuI3mmK/mlbDnu4QKICAgICAgICBjb25zdCB0YWdzVmFsdWUgPSB0eXBlb2YgbmV3VGFzay52YWx1ZS50YWdzID09PSAnc3RyaW5nJyA/IG5ld1Rhc2sudmFsdWUudGFncyA6IEFycmF5LmlzQXJyYXkobmV3VGFzay52YWx1ZS50YWdzKSA/IG5ld1Rhc2sudmFsdWUudGFncy5qb2luKCcsJykgOiAnJzsKICAgICAgICBjb25zdCBwYXlsb2FkID0gewogICAgICAgICAgcHJvamVjdDogcHJvcHMucHJvamVjdC5pZCwKICAgICAgICAgIHRpdGxlOiBuZXdUYXNrLnZhbHVlLnRpdGxlLAogICAgICAgICAgZGVzY3JpcHRpb246IG5ld1Rhc2sudmFsdWUuZGVzY3JpcHRpb24sCiAgICAgICAgICBhc3NpZ25lZV9pZDogYXNzaWduZWVfaWQsCiAgICAgICAgICBkdWVfZGF0ZTogbmV3VGFzay52YWx1ZS5kdWVEYXRlLAogICAgICAgICAgcHJpb3JpdHk6IG5ld1Rhc2sudmFsdWUucHJpb3JpdHkgPT09ICfpq5gnID8gJ2hpZ2gnIDogbmV3VGFzay52YWx1ZS5wcmlvcml0eSA9PT0gJ2xvdycgPyAnbG93JyA6ICdtZWRpdW0nLAogICAgICAgICAgc3RhdHVzOiAndG9kbycsCiAgICAgICAgICB0YWdzOiB0YWdzVmFsdWUKICAgICAgICB9OwogICAgICAgIHJlcXVlc3QucG9zdCgnL2FwaS90YXNrcy8nLCBwYXlsb2FkKS50aGVuKCgpID0+IHsKICAgICAgICAgIEVsTWVzc2FnZS5zdWNjZXNzKCfku7vliqHliJvlu7rmiJDlip8nKTsKICAgICAgICAgIHNob3dBZGRUYXNrLnZhbHVlID0gZmFsc2U7CiAgICAgICAgICBmZXRjaFRhc2tzKCk7CiAgICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfku7vliqHliJvlu7rlpLHotKUnKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CgogICAgLy8g6L+H5rukCiAgICBmdW5jdGlvbiBmaWx0ZXJlZFRhc2tzKHRhc2tBcnIpIHsKICAgICAgcmV0dXJuIHRhc2tBcnIuZmlsdGVyKHQgPT4gewogICAgICAgIGNvbnN0IG1hdGNoU2VhcmNoID0gIXNlYXJjaC52YWx1ZSB8fCB0LnRpdGxlLmluY2x1ZGVzKHNlYXJjaC52YWx1ZSkgfHwgdC5kZXNjcmlwdGlvbiAmJiB0LmRlc2NyaXB0aW9uLmluY2x1ZGVzKHNlYXJjaC52YWx1ZSk7CiAgICAgICAgY29uc3QgbWF0Y2hBc3NpZ25lZSA9ICFmaWx0ZXJBc3NpZ25lZS52YWx1ZSB8fCB0LmFzc2lnbmVlICYmIHQuYXNzaWduZWUudXNlciAmJiB0LmFzc2lnbmVlLnVzZXIudXNlcm5hbWUgPT09IGZpbHRlckFzc2lnbmVlLnZhbHVlOwogICAgICAgIC8vIOS8mOWFiOe6p+etm+mAie+8muebtOaOpeeUqOS4reaWh+WMuemFjQogICAgICAgIGNvbnN0IG1hdGNoUHJpb3JpdHkgPSAhZmlsdGVyUHJpb3JpdHkudmFsdWUgfHwgdC5wcmlvcml0eSA9PT0gZmlsdGVyUHJpb3JpdHkudmFsdWU7CiAgICAgICAgcmV0dXJuIG1hdGNoU2VhcmNoICYmIG1hdGNoQXNzaWduZWUgJiYgbWF0Y2hQcmlvcml0eTsKICAgICAgfSk7CiAgICB9CgogICAgLy8g6K+m5oOF5by556qXCiAgICBmdW5jdGlvbiBvcGVuRGV0YWlsKHRhc2spIHsKICAgICAgLy8g6K+m5oOF5by556qX5Lmf6ZyA6L2s5o2iIHByaW9yaXR5VHlwZQogICAgICBjdXJyZW50VGFzay52YWx1ZSA9IHsKICAgICAgICAuLi50YXNrLAogICAgICAgIHByaW9yaXR5VHlwZTogdGFzay5wcmlvcml0eVR5cGUgfHwgKHRhc2sucHJpb3JpdHkgPT09ICfpq5gnIHx8IHRhc2sucHJpb3JpdHkgPT09ICdoaWdoJyA/ICdkYW5nZXInIDogdGFzay5wcmlvcml0eSA9PT0gJ+S9jicgfHwgdGFzay5wcmlvcml0eSA9PT0gJ2xvdycgPyAnaW5mbycgOiAnd2FybmluZycpLAogICAgICAgIC8vIOWKqOaAgeiOt+WPlkFJ5YiG5p6Q57uT5p6c77yM6ICM5LiN5piv5L2/55So6Z2Z5oCB5pWw5o2uCiAgICAgICAgYWk6IHRhc2suYWkgfHwgW10KICAgICAgfTsKICAgICAgLy8g5pi+56S66K+m5oOF5by556qXCiAgICAgIHNob3dEZXRhaWwudmFsdWUgPSB0cnVlOwogICAgICAvLyDlpoLmnpzmsqHmnIlBSeWIhuaekOaVsOaNru+8jOiHquWKqOiOt+WPlgogICAgICBpZiAoIXRhc2suYWkgfHwgdGFzay5haS5sZW5ndGggPT09IDApIHsKICAgICAgICBnZXRUYXNrQWlBbmFseXNpcyh0YXNrLmlkKTsKICAgICAgfQogICAgfQoKICAgIC8vIOaWsOWinu+8muiOt+WPluS7u+WKoUFJ5YiG5p6QCiAgICBmdW5jdGlvbiBnZXRUYXNrQWlBbmFseXNpcyh0YXNrSWQpIHsKICAgICAgaWYgKCF0YXNrSWQpIHJldHVybjsKICAgICAgY29uc29sZS5sb2coJ+iOt+WPluS7u+WKoUFJ5YiG5p6QOicsIHRhc2tJZCk7CgogICAgICAvLyDorr7nva7lr7nlupTku7vliqHnmoTliqDovb3nirbmgIEKICAgICAgY29uc3QgdGFzayA9IHRhc2tzLnZhbHVlLmZpbmQodCA9PiB0LmlkID09PSB0YXNrSWQpOwogICAgICBpZiAodGFzaykgewogICAgICAgIHRhc2suX2FpTG9hZGluZyA9IHRydWU7CiAgICAgIH0KICAgICAgcmVxdWVzdC5nZXQoYC9hcGkvdGFza3MvJHt0YXNrSWR9L2FpX2FuYWx5c2lzL2ApLnRoZW4ocmVzID0+IHsKICAgICAgICB2YXIgX3JlcyRkYXRhOwogICAgICAgIGxldCBzdWdnZXN0aW9ucyA9ICgoX3JlcyRkYXRhID0gcmVzLmRhdGEpID09PSBudWxsIHx8IF9yZXMkZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JlcyRkYXRhLnN1Z2dlc3Rpb25zKSB8fCBbXTsKCiAgICAgICAgLy8g5aaC5p6c5ZCO56uv6L+U5Zue55qE5pWw5o2u5LiN5piv5pWw57uE5qC85byP77yM56Gu5L+d6L2s5o2i5Li65pWw57uECiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHN1Z2dlc3Rpb25zKSkgewogICAgICAgICAgc3VnZ2VzdGlvbnMgPSBbc3VnZ2VzdGlvbnMudG9TdHJpbmcoKV07CiAgICAgICAgfQoKICAgICAgICAvLyDnoa7kv53lu7rorq7ljIXlkKsi5LiT5Lia5YiG5p6QIuWSjCLlu7rorq4i5Lik5Liq6YOo5YiGCiAgICAgICAgY29uc3QgZm9ybWF0dGVkU3VnZ2VzdGlvbnMgPSBmb3JtYXRBaUFuYWx5c2lzRGF0YShzdWdnZXN0aW9ucyk7CgogICAgICAgIC8vIOabtOaWsOW9k+WJjeaJk+W8gOeahOS7u+WKoeivpuaDhQogICAgICAgIGlmIChjdXJyZW50VGFzay52YWx1ZSAmJiBjdXJyZW50VGFzay52YWx1ZS5pZCA9PT0gdGFza0lkKSB7CiAgICAgICAgICBjdXJyZW50VGFzay52YWx1ZS5haSA9IGZvcm1hdHRlZFN1Z2dlc3Rpb25zOwogICAgICAgIH0KCiAgICAgICAgLy8g5pu05paw5Lu75Yqh5YiX6KGo5Lit55qE5Lu75YqhCiAgICAgICAgY29uc3QgdGFzayA9IHRhc2tzLnZhbHVlLmZpbmQodCA9PiB0LmlkID09PSB0YXNrSWQpOwogICAgICAgIGlmICh0YXNrKSB7CiAgICAgICAgICB0YXNrLmFpID0gZm9ybWF0dGVkU3VnZ2VzdGlvbnM7CiAgICAgICAgfQogICAgICAgIGNvbnNvbGUubG9nKCfku7vliqFBSeWIhuaekOe7k+aenDonLCBmb3JtYXR0ZWRTdWdnZXN0aW9ucyk7CiAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgY29uc29sZS5lcnJvcign6I635Y+W5Lu75YqhQUnliIbmnpDlpLHotKU6JywgZXJyKTsKICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+iOt+WPluS7u+WKoUFJ5YiG5p6Q5aSx6LSlJyk7CiAgICAgIH0pLmZpbmFsbHkoKCkgPT4gewogICAgICAgIC8vIOa4hemZpOWKoOi9veeKtuaAgQogICAgICAgIGNvbnN0IHRhc2sgPSB0YXNrcy52YWx1ZS5maW5kKHQgPT4gdC5pZCA9PT0gdGFza0lkKTsKICAgICAgICBpZiAodGFzaykgewogICAgICAgICAgdGFzay5fYWlMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KCiAgICAvLyDmlrDlu7rku7vliqHlvLnnqpcKICAgIGZ1bmN0aW9uIGhhbmRsZUFkZFRhc2soKSB7CiAgICAgIG5ld1Rhc2sudmFsdWUgPSB7CiAgICAgICAgdGl0bGU6ICcnLAogICAgICAgIGFzc2lnbmVlOiAnJywKICAgICAgICBwcmlvcml0eTogJ+S4rScsCiAgICAgICAgZHVlRGF0ZTogJycsCiAgICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICAgIHRhZ3M6ICcnLAogICAgICAgIHN0YXR1czogJ3RvZG8nLAogICAgICAgIHByb2dyZXNzOiAwLAogICAgICAgIGNvbXBsZXRlZDogMCwKICAgICAgICB0b3RhbDogMQogICAgICB9OwogICAgICBzaG93QWRkVGFzay52YWx1ZSA9IHRydWU7CiAgICB9CgogICAgLy8g55uR5ZCs6aG555uu5Y+Y5YyW6Ieq5Yqo5ouJ5Y+W5Lu75Yqh5ZKM5oiQ5ZGYCiAgICB3YXRjaCgoKSA9PiBwcm9wcy5wcm9qZWN0LCBuZXdQcm9qZWN0ID0+IHsKICAgICAgaWYgKG5ld1Byb2plY3QgJiYgbmV3UHJvamVjdC5pZCkgewogICAgICAgIC8vIOWmguaenOeItue7hOS7tuS8oOmAkuS6huaIkOWRmOaVsOaNru+8jOS8mOWFiOS9v+eUqAogICAgICAgIGlmIChwcm9wcy5tZW1iZXJzICYmIHByb3BzLm1lbWJlcnMubGVuZ3RoID4gMCkgewogICAgICAgICAgcHJvamVjdE1lbWJlcnMudmFsdWUgPSBwcm9wcy5tZW1iZXJzOwogICAgICAgICAgY29uc29sZS5sb2coJ+S9v+eUqOeItue7hOS7tuS8oOmAkueahOaIkOWRmOaVsOaNrjonLCBwcm9qZWN0TWVtYmVycy52YWx1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGZldGNoUHJvamVjdE1lbWJlcnMobmV3UHJvamVjdC5pZCk7CiAgICAgICAgfQogICAgICAgIGZldGNoVGFza3MoKTsKICAgICAgfQogICAgfSwgewogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0pOwoKICAgIC8vIOebkeWQrOeItue7hOS7tuS8oOmAkueahOaIkOWRmOaVsOaNruWPmOWMlgogICAgd2F0Y2goKCkgPT4gcHJvcHMubWVtYmVycywgbmV3TWVtYmVycyA9PiB7CiAgICAgIGlmIChuZXdNZW1iZXJzICYmIG5ld01lbWJlcnMubGVuZ3RoID4gMCkgewogICAgICAgIHByb2plY3RNZW1iZXJzLnZhbHVlID0gbmV3TWVtYmVyczsKICAgICAgICBjb25zb2xlLmxvZygn5oiQ5ZGY5pWw5o2u5pu05pawOicsIHByb2plY3RNZW1iZXJzLnZhbHVlKTsKICAgICAgfQogICAgfSwgewogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0pOwogICAgb25Nb3VudGVkKCgpID0+IHsKICAgICAgaWYgKHByb3BzLnByb2plY3QgJiYgcHJvcHMucHJvamVjdC5pZCkgewogICAgICAgIC8vIOWmguaenOeItue7hOS7tuS8oOmAkuS6huaIkOWRmOaVsOaNru+8jOS8mOWFiOS9v+eUqAogICAgICAgIGlmIChwcm9wcy5tZW1iZXJzICYmIHByb3BzLm1lbWJlcnMubGVuZ3RoID4gMCkgewogICAgICAgICAgcHJvamVjdE1lbWJlcnMudmFsdWUgPSBwcm9wcy5tZW1iZXJzOwogICAgICAgICAgY29uc29sZS5sb2coJ+S9v+eUqOeItue7hOS7tuS8oOmAkueahOaIkOWRmOaVsOaNrjonLCBwcm9qZWN0TWVtYmVycy52YWx1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGZldGNoUHJvamVjdE1lbWJlcnMocHJvcHMucHJvamVjdC5pZCk7CiAgICAgICAgfQogICAgICAgIGZldGNoVGFza3MoKTsKICAgICAgfQogICAgfSk7CgogICAgLy8g6I635Y+W6aG555uu5oiQ5ZGY77yIUHJvamVjdE1lbWJlciDliJfooajvvIzluKYgdXNlciDkv6Hmga/vvIkKICAgIGZ1bmN0aW9uIGZldGNoUHJvamVjdE1lbWJlcnMocHJvamVjdElkKSB7CiAgICAgIGlmICghcHJvamVjdElkKSByZXR1cm47CiAgICAgIHJlcXVlc3QuZ2V0KGAvYXBpL3Byb2plY3QtbWVtYmVycy8/cHJvamVjdD0ke3Byb2plY3RJZH1gKS50aGVuKHJlcyA9PiB7CiAgICAgICAgLy8g57uT5p6E77yaW3tpZDogUHJvamVjdE1lbWJlci5pZCwgdXNlcjoge2lkLCB1c2VybmFtZSwgLi4ufSwgLi4ufV0KICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyZXMuZGF0YSkpIHsKICAgICAgICAgIHByb2plY3RNZW1iZXJzLnZhbHVlID0gcmVzLmRhdGEubWFwKHBtID0+IHsKICAgICAgICAgICAgdmFyIF9wbSR1c2VyLCBfcG0kdXNlcjIsIF9wbSR1c2VyMzsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICBpZDogcG0uaWQsCiAgICAgICAgICAgICAgbmFtZTogKChfcG0kdXNlciA9IHBtLnVzZXIpID09PSBudWxsIHx8IF9wbSR1c2VyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcG0kdXNlci51c2VybmFtZSkgfHwgKChfcG0kdXNlcjIgPSBwbS51c2VyKSA9PT0gbnVsbCB8fCBfcG0kdXNlcjIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wbSR1c2VyMi5lbWFpbCkgfHwgJ+acquWRveWQjeaIkOWRmCcsCiAgICAgICAgICAgICAgdXNlcklkOiAoX3BtJHVzZXIzID0gcG0udXNlcikgPT09IG51bGwgfHwgX3BtJHVzZXIzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcG0kdXNlcjMuaWQKICAgICAgICAgICAgfTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBwcm9qZWN0TWVtYmVycy52YWx1ZSA9IFtdOwogICAgICAgIH0KICAgICAgICBjb25zb2xlLmxvZygn5ouJ5Y+W5Yiw55qE6aG555uu5oiQ5ZGY77yIUHJvamVjdE1lbWJlcu+8iTonLCBwcm9qZWN0TWVtYmVycy52YWx1ZSk7CiAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgY29uc29sZS5lcnJvcign6I635Y+W6aG555uu5oiQ5ZGY5aSx6LSlJywgZXJyKTsKICAgICAgICBwcm9qZWN0TWVtYmVycy52YWx1ZSA9IFtdOwogICAgICB9KTsKICAgIH0KCiAgICAvLyDnvJbovpHnm7jlhbPpgLvovpEKICAgIGNvbnN0IHNob3dFZGl0VGFzayA9IHJlZihmYWxzZSk7CiAgICBjb25zdCBlZGl0VGFzayA9IHJlZihudWxsKTsKICAgIGZ1bmN0aW9uIG9wZW5FZGl0VGFzayh0YXNrKSB7CiAgICAgIGVkaXRUYXNrLnZhbHVlID0gewogICAgICAgIC4uLnRhc2ssCiAgICAgICAgc3RhdHVzOiB0YXNrLnN0YXR1cyB8fCAndG9kbycKICAgICAgfTsKICAgICAgc2hvd0VkaXRUYXNrLnZhbHVlID0gdHJ1ZTsKICAgIH0KICAgIGZ1bmN0aW9uIHNhdmVFZGl0VGFzaygpIHsKICAgICAgaWYgKCFlZGl0VGFza0Zvcm1SZWYudmFsdWUpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfooajljZXlvJXnlKjkuI3lrZjlnKgnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgZWRpdFRhc2tGb3JtUmVmLnZhbHVlLnZhbGlkYXRlKHZhbGlkID0+IHsKICAgICAgICBpZiAoIXZhbGlkKSB7CiAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+ivt+Whq+WGmeaJgOacieW/heWhq+mhuScpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgLy8g56Gu5L+ddGFnc+aYr+Wtl+espuS4suiAjOS4jeaYr+aVsOe7hAogICAgICAgIGxldCB0YWdzVmFsdWUgPSAnJzsKICAgICAgICBpZiAodHlwZW9mIGVkaXRUYXNrLnZhbHVlLnRhZ3MgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICB0YWdzVmFsdWUgPSBlZGl0VGFzay52YWx1ZS50YWdzOwogICAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShlZGl0VGFzay52YWx1ZS50YWdzKSkgewogICAgICAgICAgdGFnc1ZhbHVlID0gZWRpdFRhc2sudmFsdWUudGFncy5qb2luKCcsJyk7CiAgICAgICAgfQogICAgICAgIGNvbnN0IHBheWxvYWQgPSB7CiAgICAgICAgICBpZDogZWRpdFRhc2sudmFsdWUuaWQsCiAgICAgICAgICB0aXRsZTogZWRpdFRhc2sudmFsdWUudGl0bGUsCiAgICAgICAgICBkZXNjcmlwdGlvbjogZWRpdFRhc2sudmFsdWUuZGVzY3JpcHRpb24gfHwgJycsCiAgICAgICAgICBwcmlvcml0eTogZWRpdFRhc2sudmFsdWUucHJpb3JpdHkgPT09ICfpq5gnID8gJ2hpZ2gnIDogZWRpdFRhc2sudmFsdWUucHJpb3JpdHkgPT09ICfkvY4nID8gJ2xvdycgOiAnbWVkaXVtJywKICAgICAgICAgIGR1ZV9kYXRlOiBlZGl0VGFzay52YWx1ZS5kdWVEYXRlIHx8ICcnLAogICAgICAgICAgdGFnczogdGFnc1ZhbHVlLAogICAgICAgICAgc3RhdHVzOiBlZGl0VGFzay52YWx1ZS5zdGF0dXMgfHwgJ3RvZG8nCiAgICAgICAgfTsKICAgICAgICByZXF1ZXN0LnBhdGNoKGAvYXBpL3Rhc2tzLyR7ZWRpdFRhc2sudmFsdWUuaWR9L2AsIHBheWxvYWQpLnRoZW4oKCkgPT4gewogICAgICAgICAgRWxNZXNzYWdlLnN1Y2Nlc3MoJ+S7u+WKoeabtOaWsOaIkOWKnycpOwogICAgICAgICAgc2hvd0VkaXRUYXNrLnZhbHVlID0gZmFsc2U7CiAgICAgICAgICBmZXRjaFRhc2tzKCk7CiAgICAgICAgICBzaG93RGV0YWlsLnZhbHVlID0gZmFsc2U7CiAgICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfku7vliqHmm7TmlrDlpLHotKUnKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CgogICAgLy8g5Yig6Zmk55u45YWz6YC76L6RCiAgICBmdW5jdGlvbiBjb25maXJtRGVsZXRlVGFzayh0YXNrKSB7CiAgICAgIEVsTWVzc2FnZUJveC5jb25maXJtKCfnoa7lrpropoHliKDpmaTor6Xku7vliqHlkJfvvJ8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn5Yig6ZmkJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgcmVxdWVzdC5kZWxldGUoYC9hcGkvdGFza3MvJHt0YXNrLmlkfS9gKS50aGVuKCgpID0+IHsKICAgICAgICAgIEVsTWVzc2FnZS5zdWNjZXNzKCfku7vliqHlt7LliKDpmaQnKTsKICAgICAgICAgIGZldGNoVGFza3MoKTsKICAgICAgICAgIHNob3dEZXRhaWwudmFsdWUgPSBmYWxzZTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgICBmdW5jdGlvbiByZWZyZXNoQWxsVGFza0FpQW5hbHlzaXMoKSB7CiAgICAgIGlmICghdGFza3MudmFsdWUubGVuZ3RoKSByZXR1cm47CiAgICAgIHJlZnJlc2hpbmdBaS52YWx1ZSA9IHRydWU7CiAgICAgIGxldCBmaW5pc2hlZCA9IDA7CiAgICAgIGNvbnN0IHRvdGFsID0gdGFza3MudmFsdWUubGVuZ3RoOwogICAgICB0YXNrcy52YWx1ZS5mb3JFYWNoKHRhc2sgPT4gewogICAgICAgIHRhc2suX2FpTG9hZGluZyA9IHRydWU7CiAgICAgICAgcmVxdWVzdC5nZXQoYC9hcGkvdGFza3MvJHt0YXNrLmlkfS9haV9hbmFseXNpcy9gKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICB2YXIgX3JlcyRkYXRhMjsKICAgICAgICAgIGxldCBzdWdnZXN0aW9ucyA9ICgoX3JlcyRkYXRhMiA9IHJlcy5kYXRhKSA9PT0gbnVsbCB8fCBfcmVzJGRhdGEyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVzJGRhdGEyLnN1Z2dlc3Rpb25zKSB8fCBbXTsKCiAgICAgICAgICAvLyDlpoLmnpzlkI7nq6/ov5Tlm57nmoTmlbDmja7kuI3mmK/mlbDnu4TmoLzlvI/vvIznoa7kv53ovazmjaLkuLrmlbDnu4QKICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShzdWdnZXN0aW9ucykpIHsKICAgICAgICAgICAgc3VnZ2VzdGlvbnMgPSBbc3VnZ2VzdGlvbnMudG9TdHJpbmcoKV07CiAgICAgICAgICB9CgogICAgICAgICAgLy8g56Gu5L+d5bu66K6u5YyF5ZCrIuS4k+S4muWIhuaekCLlkowi5bu66K6uIuS4pOS4qumDqOWIhgogICAgICAgICAgdGFzay5haSA9IGZvcm1hdEFpQW5hbHlzaXNEYXRhKHN1Z2dlc3Rpb25zKTsKICAgICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgICB0YXNrLmFpID0gW107CiAgICAgICAgfSkuZmluYWxseSgoKSA9PiB7CiAgICAgICAgICB0YXNrLl9haUxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIGZpbmlzaGVkKys7CiAgICAgICAgICBpZiAoZmluaXNoZWQgPT09IHRvdGFsKSB7CiAgICAgICAgICAgIHJlZnJlc2hpbmdBaS52YWx1ZSA9IGZhbHNlOwogICAgICAgICAgICBFbE1lc3NhZ2Uuc3VjY2VzcygnQUnliIbmnpDlrozmiJAnKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CgogICAgLy8g5aSE55CGQUnlhoXlrrnvvIznoa7kv53lrozmlbTmmL7npLrvvIzljIXmi6zlu7rorq7pg6jliIYKICAgIGZ1bmN0aW9uIHByb2Nlc3NBSUNvbnRlbnQoYWlJdGVtcykgewogICAgICBpZiAoIWFpSXRlbXMgfHwgIUFycmF5LmlzQXJyYXkoYWlJdGVtcykpIHJldHVybiBbXTsKCiAgICAgIC8vIOajgOafpeaYr+WQpuaciSLlu7rorq46IuS9huayoeaciei3n+maj+WGheWuueeahOaDheWGtQogICAgICBsZXQgaGFzSW5jb21wbGV0ZURhdGEgPSBmYWxzZTsKICAgICAgaWYgKGFpSXRlbXMubGVuZ3RoID4gMCkgewogICAgICAgIGNvbnN0IGxhc3RJdGVtID0gYWlJdGVtc1thaUl0ZW1zLmxlbmd0aCAtIDFdOwogICAgICAgIGlmICh0eXBlb2YgbGFzdEl0ZW0gPT09ICdzdHJpbmcnICYmIChsYXN0SXRlbS50cmltKCkgPT09ICflu7rorq46JyB8fCBsYXN0SXRlbS50cmltKCkgPT09ICflu7rorq7vvJonKSkgewogICAgICAgICAgaGFzSW5jb21wbGV0ZURhdGEgPSB0cnVlOwogICAgICAgIH0KICAgICAgfQoKICAgICAgLy8g5aaC5p6c5Y+R546w5LiN5a6M5pW05pWw5o2u77yM5YiZ5Y+W5raI5a2X56ym6ZmQ5Yi2CiAgICAgIGlmIChoYXNJbmNvbXBsZXRlRGF0YSkgewogICAgICAgIHJldHVybiBhaUl0ZW1zOwogICAgICB9CgogICAgICAvLyDmoLnmja7lhbfkvZPmg4XlhrXph43nu4TlhoXlrrnvvIznoa7kv53liIbmnpDlkozlu7rorq7pg73og73lrozmlbTmmL7npLoKICAgICAgLy8g5bCd6K+V5bCG5pWw57uE6YeN5paw57uE5ZCI5Li65pu05pyJ6YC76L6R55qE57uT5p6ECiAgICAgIGNvbnN0IHJlc3VsdCA9IFtdOwogICAgICBsZXQgY3VycmVudENhdGVnb3J5ID0gJyc7CiAgICAgIGxldCB0ZW1wSXRlbXMgPSBbXTsKICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGFpSXRlbXMpIHsKICAgICAgICBpZiAodHlwZW9mIGl0ZW0gIT09ICdzdHJpbmcnKSB7CiAgICAgICAgICByZXN1bHQucHVzaChpdGVtKTsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KCiAgICAgICAgLy8g5qOA5rWL5paw55qE5YiG57G75qCH6aKYCiAgICAgICAgaWYgKGl0ZW0uaW5jbHVkZXMoJ+S4k+S4muWIhuaekDonKSB8fCBpdGVtLmluY2x1ZGVzKCfkuJPkuJrliIbmnpDvvJonKSkgewogICAgICAgICAgaWYgKGN1cnJlbnRDYXRlZ29yeSAmJiB0ZW1wSXRlbXMubGVuZ3RoKSB7CiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGAke2N1cnJlbnRDYXRlZ29yeX0ke3RlbXBJdGVtcy5qb2luKCcgJyl9YCk7CiAgICAgICAgICB9CiAgICAgICAgICBjdXJyZW50Q2F0ZWdvcnkgPSAn5LiT5Lia5YiG5p6QOiAnOwogICAgICAgICAgdGVtcEl0ZW1zID0gW107CiAgICAgICAgfSBlbHNlIGlmIChpdGVtLmluY2x1ZGVzKCflu7rorq46JykgfHwgaXRlbS5pbmNsdWRlcygn5bu66K6u77yaJykpIHsKICAgICAgICAgIGlmIChjdXJyZW50Q2F0ZWdvcnkgJiYgdGVtcEl0ZW1zLmxlbmd0aCkgewogICAgICAgICAgICByZXN1bHQucHVzaChgJHtjdXJyZW50Q2F0ZWdvcnl9JHt0ZW1wSXRlbXMuam9pbignICcpfWApOwogICAgICAgICAgfQogICAgICAgICAgY3VycmVudENhdGVnb3J5ID0gJ+W7uuiurjogJzsKICAgICAgICAgIHRlbXBJdGVtcyA9IFtdOwogICAgICAgIH0KICAgICAgICAvLyDlpoLmnpzmmK/ku6UiLSLmiJYi4oCiIuW8gOWktOeahOWIl+ihqOmhue+8jOWNleeLrOS/neeVmQogICAgICAgIGVsc2UgaWYgKGl0ZW0udHJpbSgpLnN0YXJ0c1dpdGgoJy0nKSB8fCBpdGVtLnRyaW0oKS5zdGFydHNXaXRoKCfigKInKSkgewogICAgICAgICAgcmVzdWx0LnB1c2goaXRlbSk7CiAgICAgICAgfQogICAgICAgIC8vIOWFtuS7luaDheWGtea3u+WKoOWIsOW9k+WJjeWIhuexuwogICAgICAgIGVsc2UgewogICAgICAgICAgdGVtcEl0ZW1zLnB1c2goaXRlbSk7CiAgICAgICAgfQogICAgICB9CgogICAgICAvLyDmt7vliqDmnIDlkI7kuIDkuKrliIbnsbvnmoTlhoXlrrkKICAgICAgaWYgKGN1cnJlbnRDYXRlZ29yeSAmJiB0ZW1wSXRlbXMubGVuZ3RoKSB7CiAgICAgICAgcmVzdWx0LnB1c2goYCR7Y3VycmVudENhdGVnb3J5fSR7dGVtcEl0ZW1zLmpvaW4oJyAnKX1gKTsKICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0Lmxlbmd0aCA/IHJlc3VsdCA6IGFpSXRlbXM7CiAgICB9CgogICAgLy8g5bCGTWFya2Rvd27moLzlvI/ljJbkuLpIVE1M5pi+56S6CiAgICBmdW5jdGlvbiBmb3JtYXRNYXJrZG93bih0ZXh0KSB7CiAgICAgIGlmICghdGV4dCkgcmV0dXJuICcnOwogICAgICB0cnkgewogICAgICAgIC8vIOeugOWNleWkhOeQhuS4gOS6m21hcmtkb3du6K+t5rOVCiAgICAgICAgLy8g5Yqg57KXCiAgICAgICAgbGV0IHJlc3VsdCA9IHRleHQucmVwbGFjZSgvXCpcKiguKj8pXCpcKi9nLCAnPHN0cm9uZz4kMTwvc3Ryb25nPicpOwogICAgICAgIC8vIOaWnOS9kwogICAgICAgIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKC9cKiguKj8pXCovZywgJzxlbT4kMTwvZW0+Jyk7CiAgICAgICAgLy8g6KGM5YaF5Luj56CBCiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UoL2AoLio/KWAvZywgJzxjb2RlPiQxPC9jb2RlPicpOwogICAgICAgIC8vIOi2hemTvuaOpQogICAgICAgIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKC9cWyguKj8pXF1cKCguKj8pXCkvZywgJzxhIGhyZWY9IiQyIiB0YXJnZXQ9Il9ibGFuayI+JDE8L2E+Jyk7CgogICAgICAgIC8vIOWkhOeQhuS7pSItIuW8gOWktOeahOWIl+ihqOmhue+8jOehruS/neato+ehruaYvuekugogICAgICAgIGlmIChyZXN1bHQudHJpbSgpLnN0YXJ0c1dpdGgoJy0nKSB8fCByZXN1bHQudHJpbSgpLnN0YXJ0c1dpdGgoJ+KAoicpKSB7CiAgICAgICAgICByZXN1bHQgPSByZXN1bHQucmVwbGFjZSgvXltccy3igKJdKy8sICcnKTsKICAgICAgICAgIHJlc3VsdCA9IGA8c3BhbiBjbGFzcz0ibGlzdC1idWxsZXQiPuKAojwvc3Bhbj4gJHtyZXN1bHR9YDsKICAgICAgICB9CgogICAgICAgIC8vIOWkhOeQhuWGkuWPt+WQjueahOWGheWuue+8jOWmguaenOaYr+WIhuexu+agh+mimAogICAgICAgIGlmIChyZXN1bHQuaW5jbHVkZXMoJ+S4k+S4muWIhuaekDonKSB8fCByZXN1bHQuaW5jbHVkZXMoJ+S4k+S4muWIhuaekO+8micpKSB7CiAgICAgICAgICByZXN1bHQgPSBgPHN0cm9uZyBjbGFzcz0iYW5hbHlzaXMtdGl0bGUiPuS4k+S4muWIhuaekDo8L3N0cm9uZz4gJHtyZXN1bHQucmVwbGFjZSgv5LiT5Lia5YiG5p6QWzrvvJpdXHMqLywgJycpfWA7CiAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQuaW5jbHVkZXMoJ+W7uuiurjonKSB8fCByZXN1bHQuaW5jbHVkZXMoJ+W7uuiuru+8micpKSB7CiAgICAgICAgICByZXN1bHQgPSBgPHN0cm9uZyBjbGFzcz0ic3VnZ2VzdGlvbi10aXRsZSI+5bu66K6uOjwvc3Ryb25nPiAke3Jlc3VsdC5yZXBsYWNlKC/lu7rorq5bOu+8ml1ccyovLCAnJyl9YDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ01hcmtkb3du5qC85byP5YyW6ZSZ6K+vOicsIGUpOwogICAgICAgIHJldHVybiB0ZXh0OwogICAgICB9CiAgICB9CgogICAgLy8g5bCGQUnov5Tlm57nmoTliIbmnpDlhoXlrrnmoLzlvI/ljJbkuLrmoIflh4bnu5PmnoQKICAgIGZ1bmN0aW9uIGZvcm1hdEFpQW5hbHlzaXNEYXRhKGl0ZW1zKSB7CiAgICAgIGlmICghaXRlbXMgfHwgIWl0ZW1zLmxlbmd0aCkgcmV0dXJuIFtdOwoKICAgICAgLy8g5qOA5p+l5Y6f5aeL5YaF5a65CiAgICAgIGNvbnN0IG9yaWdpbmFsVGV4dCA9IGl0ZW1zLmpvaW4oJyAnKTsKCiAgICAgIC8vIOajgOafpeaYr+WQpuW3sue7j+WMheWQq+S4k+S4muWIhuaekOWSjOW7uuiuruS4pOS4qumDqOWIhgogICAgICBjb25zdCBoYXNBbmFseXNpcyA9IGl0ZW1zLnNvbWUoaXRlbSA9PiB0eXBlb2YgaXRlbSA9PT0gJ3N0cmluZycgJiYgKGl0ZW0uaW5jbHVkZXMoJ+S4k+S4muWIhuaekDonKSB8fCBpdGVtLmluY2x1ZGVzKCfkuJPkuJrliIbmnpDvvJonKSkpOwogICAgICBjb25zdCBoYXNTdWdnZXN0aW9uID0gaXRlbXMuc29tZShpdGVtID0+IHR5cGVvZiBpdGVtID09PSAnc3RyaW5nJyAmJiAoaXRlbS5pbmNsdWRlcygn5bu66K6uOicpIHx8IGl0ZW0uaW5jbHVkZXMoJ+W7uuiuru+8micpKSk7CgogICAgICAvLyDlpoLmnpzmnIDlkI7kuIDpobnmmK8i5bu66K6uOiLkuJTmsqHmnInlhoXlrrnvvIzmt7vliqDpu5jorqTlu7rorq4KICAgICAgaWYgKGl0ZW1zLmxlbmd0aCA+IDApIHsKICAgICAgICBjb25zdCBsYXN0SXRlbSA9IGl0ZW1zW2l0ZW1zLmxlbmd0aCAtIDFdOwogICAgICAgIGlmICh0eXBlb2YgbGFzdEl0ZW0gPT09ICdzdHJpbmcnICYmIChsYXN0SXRlbS50cmltKCkgPT09ICflu7rorq46JyB8fCBsYXN0SXRlbS50cmltKCkgPT09ICflu7rorq7vvJonKSkgewogICAgICAgICAgLy8g5re75Yqg6buY6K6k5bu66K6uCiAgICAgICAgICBpdGVtcy5wdXNoKCctIOW7uuiurui/m+S4gOatpeaYjuehruS7u+WKoeeahOe7huiKguWSjOWFt+S9k+imgeaxgicpOwogICAgICAgICAgaXRlbXMucHVzaCgnLSDogIPomZHmj5DliY3lronmjpLotYTmupDvvIznoa7kv53ku7vliqHmjInml7blrozmiJAnKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIOWujOWFqOayoeacieW7uuiurumDqOWIhu+8jOWImea3u+WKoOW7uuiurumDqOWIhgogICAgICBpZiAoIWhhc1N1Z2dlc3Rpb24pIHsKICAgICAgICBpdGVtcy5wdXNoKCflu7rorq46Jyk7CiAgICAgICAgaXRlbXMucHVzaCgnLSDlu7rorq7ov5vkuIDmraXmmI7noa7ku7vliqHnmoTnu4boioLlkozlhbfkvZPopoHmsYInKTsKICAgICAgICBpdGVtcy5wdXNoKCctIOiAg+iZkeaPkOWJjeWuieaOkui1hOa6kO+8jOehruS/neS7u+WKoeaMieaXtuWujOaIkCcpOwogICAgICB9CgogICAgICAvLyDlrozlhajmsqHmnInliIbmnpDpg6jliIbvvIzliJnmt7vliqDliIbmnpDpg6jliIYKICAgICAgaWYgKCFoYXNBbmFseXNpcyAmJiAhb3JpZ2luYWxUZXh0LmluY2x1ZGVzKCfntKfmgKXmgKcnKSAmJiAhb3JpZ2luYWxUZXh0LmluY2x1ZGVzKCfph43opoHmgKcnKSkgewogICAgICAgIC8vIOWcqOacgOWJjemdoua3u+WKoOWIhuaekOmDqOWIhgogICAgICAgIGl0ZW1zLnVuc2hpZnQoJy0g5qC55o2u5Lu75Yqh5o+P6L+w6L+b6KGM5Yid5q2l5YiG5p6Q77yM5Y+v6IO96ZyA6KaB5pu05aSa5L+h5oGvJyk7CiAgICAgICAgaXRlbXMudW5zaGlmdCgn5LiT5Lia5YiG5p6QOicpOwogICAgICB9CgogICAgICAvLyDlpoLmnpzmnInliIbmnpDlkozlu7rorq7moIforrDvvIzkvYbmoLzlvI/kuI3op4TojIPvvIzph43mlrDnu4Tnu4flhoXlrrkKICAgICAgaWYgKGhhc0FuYWx5c2lzIHx8IGhhc1N1Z2dlc3Rpb24pIHsKICAgICAgICAvLyDph43nu4TlhoXlrrnkuLrmoIflh4bmoLzlvI8KICAgICAgICBjb25zdCByZXN1bHQgPSBbXTsKICAgICAgICBsZXQgY3VycmVudFNlY3Rpb24gPSBudWxsOwogICAgICAgIGxldCBoYXNBZGRlZEFuYWx5c2lzSXRlbXMgPSBmYWxzZTsKICAgICAgICBsZXQgaGFzQWRkZWRTdWdnZXN0aW9uSXRlbXMgPSBmYWxzZTsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBjb25zdCBpdGVtID0gaXRlbXNbaV07CiAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0gIT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGl0ZW0pOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyDmo4DmtYvnq6DoioLmoIfpopgKICAgICAgICAgIGlmIChpdGVtLmluY2x1ZGVzKCfkuJPkuJrliIbmnpA6JykgfHwgaXRlbS5pbmNsdWRlcygn5LiT5Lia5YiG5p6Q77yaJykpIHsKICAgICAgICAgICAgY3VycmVudFNlY3Rpb24gPSAnYW5hbHlzaXMnOwogICAgICAgICAgICByZXN1bHQucHVzaChpdGVtKTsKICAgICAgICAgICAgaGFzQWRkZWRBbmFseXNpc0l0ZW1zID0gZmFsc2U7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfSBlbHNlIGlmIChpdGVtLmluY2x1ZGVzKCflu7rorq46JykgfHwgaXRlbS5pbmNsdWRlcygn5bu66K6u77yaJykpIHsKICAgICAgICAgICAgY3VycmVudFNlY3Rpb24gPSAnc3VnZ2VzdGlvbic7CiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGl0ZW0pOwogICAgICAgICAgICBoYXNBZGRlZFN1Z2dlc3Rpb25JdGVtcyA9IGZhbHNlOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyDmt7vliqDliY3nvIDlubbliIbnsbvlpITnkIYKICAgICAgICAgIGlmIChjdXJyZW50U2VjdGlvbiA9PT0gJ2FuYWx5c2lzJykgewogICAgICAgICAgICBpZiAoIWl0ZW0udHJpbSgpLnN0YXJ0c1dpdGgoJy0nKSAmJiAhaXRlbS50cmltKCkuc3RhcnRzV2l0aCgn4oCiJykpIHsKICAgICAgICAgICAgICByZXN1bHQucHVzaChgLSAke2l0ZW19YCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmVzdWx0LnB1c2goaXRlbSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaGFzQWRkZWRBbmFseXNpc0l0ZW1zID0gdHJ1ZTsKICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFNlY3Rpb24gPT09ICdzdWdnZXN0aW9uJykgewogICAgICAgICAgICBpZiAoIWl0ZW0udHJpbSgpLnN0YXJ0c1dpdGgoJy0nKSAmJiAhaXRlbS50cmltKCkuc3RhcnRzV2l0aCgn4oCiJykpIHsKICAgICAgICAgICAgICByZXN1bHQucHVzaChgLSAke2l0ZW19YCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmVzdWx0LnB1c2goaXRlbSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaGFzQWRkZWRTdWdnZXN0aW9uSXRlbXMgPSB0cnVlOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVzdWx0LnB1c2goaXRlbSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyDnoa7kv53mr4/kuKrpg6jliIbpg73mnInlhoXlrrkKICAgICAgICBpZiAoY3VycmVudFNlY3Rpb24gPT09ICdhbmFseXNpcycgJiYgIWhhc0FkZGVkQW5hbHlzaXNJdGVtcykgewogICAgICAgICAgcmVzdWx0LnB1c2goJy0g5qC55o2u5Lu75Yqh5o+P6L+w6L+b6KGM5Yid5q2l5YiG5p6Q77yM5Y+v6IO96ZyA6KaB5pu05aSa5L+h5oGvJyk7CiAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50U2VjdGlvbiA9PT0gJ3N1Z2dlc3Rpb24nICYmICFoYXNBZGRlZFN1Z2dlc3Rpb25JdGVtcykgewogICAgICAgICAgcmVzdWx0LnB1c2goJy0g5bu66K6u6L+b5LiA5q2l5piO56Gu5Lu75Yqh55qE57uG6IqC5ZKM5YW35L2T6KaB5rGCJyk7CiAgICAgICAgICByZXN1bHQucHVzaCgnLSDogIPomZHmj5DliY3lronmjpLotYTmupDvvIznoa7kv53ku7vliqHmjInml7blrozmiJAnKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfQoKICAgICAgLy8g5aaC5p6c5rKh5pyJ54m55q6K54m55b6B77yM5bCx566A5Y2V5YiG5Li65YiG5p6Q5ZKM5bu66K6u5Lik6YOo5YiGCiAgICAgIGNvbnN0IGFuYWx5c2lzSXRlbXMgPSBbXTsKICAgICAgY29uc3Qgc3VnZ2VzdGlvbkl0ZW1zID0gW107CgogICAgICAvLyDliIbnsbvpobnnm64KICAgICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICBpZiAoIWl0ZW0gfHwgdHlwZW9mIGl0ZW0gIT09ICdzdHJpbmcnKSByZXR1cm47CiAgICAgICAgaWYgKGl0ZW0uaW5jbHVkZXMoJ+e0p+aApeaApycpIHx8IGl0ZW0uaW5jbHVkZXMoJ+mHjeimgeaApycpIHx8IGl0ZW0uaW5jbHVkZXMoJ+WPr+ihjOaApycpKSB7CiAgICAgICAgICBhbmFseXNpc0l0ZW1zLnB1c2goaXRlbSk7CiAgICAgICAgfSBlbHNlIGlmICghaXRlbS5pbmNsdWRlcygn5LiT5Lia5YiG5p6QJykgJiYgIWl0ZW0uaW5jbHVkZXMoJ+W7uuiurjonKSAmJiAhaXRlbS5pbmNsdWRlcygn5bu66K6u77yaJykpIHsKICAgICAgICAgIHN1Z2dlc3Rpb25JdGVtcy5wdXNoKGl0ZW0pOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICAvLyDlpoLmnpzliIbnsbvlkI7msqHmnInotrPlpJ/nmoTlu7rorq7vvIzmt7vliqDpu5jorqTlu7rorq4KICAgICAgaWYgKHN1Z2dlc3Rpb25JdGVtcy5sZW5ndGggPT09IDApIHsKICAgICAgICBzdWdnZXN0aW9uSXRlbXMucHVzaCgn5bu66K6u6L+b5LiA5q2l5piO56Gu5Lu75Yqh55qE57uG6IqC5ZKM5YW35L2T6KaB5rGCJyk7CiAgICAgICAgc3VnZ2VzdGlvbkl0ZW1zLnB1c2goJ+iAg+iZkeaPkOWJjeWuieaOkui1hOa6kO+8jOehruS/neS7u+WKoeaMieaXtuWujOaIkCcpOwogICAgICB9CgogICAgICAvLyDmnoTpgKDnu5PmnpwKICAgICAgY29uc3QgcmVzdWx0ID0gW107CiAgICAgIHJlc3VsdC5wdXNoKCfkuJPkuJrliIbmnpA6Jyk7CiAgICAgIGlmIChhbmFseXNpc0l0ZW1zLmxlbmd0aCA+IDApIHsKICAgICAgICByZXN1bHQucHVzaCguLi5hbmFseXNpc0l0ZW1zLm1hcChpdGVtID0+IGl0ZW0udHJpbSgpLnN0YXJ0c1dpdGgoJy0nKSA/IGl0ZW0gOiBgLSAke2l0ZW19YCkpOwogICAgICB9IGVsc2UgewogICAgICAgIHJlc3VsdC5wdXNoKCctIOagueaNruS7u+WKoeaPj+i/sOi/m+ihjOWIneatpeWIhuaekO+8jOWPr+iDvemcgOimgeabtOWkmuS/oeaBrycpOwogICAgICB9CiAgICAgIHJlc3VsdC5wdXNoKCflu7rorq46Jyk7CiAgICAgIGlmIChzdWdnZXN0aW9uSXRlbXMubGVuZ3RoID4gMCkgewogICAgICAgIHJlc3VsdC5wdXNoKC4uLnN1Z2dlc3Rpb25JdGVtcy5tYXAoaXRlbSA9PiBpdGVtLnRyaW0oKS5zdGFydHNXaXRoKCctJykgPyBpdGVtIDogYC0gJHtpdGVtfWApKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXN1bHQucHVzaCgnLSDlu7rorq7ov5vkuIDmraXmmI7noa7ku7vliqHnmoTnu4boioLlkozlhbfkvZPopoHmsYInKTsKICAgICAgICByZXN1bHQucHVzaCgnLSDogIPomZHmj5DliY3lronmjpLotYTmupDvvIznoa7kv53ku7vliqHmjInml7blrozmiJAnKTsKICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICAgIC8vIOaWsOWinu+8muWIpOaWreaYr+WQpuS4uuW9k+WJjeeZu+W9leeUqOaItwogICAgZnVuY3Rpb24gaXNDdXJyZW50VXNlcihtZW1iZXJJZCkgewogICAgICBpZiAoIWN1cnJlbnRVc2VyLnZhbHVlIHx8ICFjdXJyZW50VXNlci52YWx1ZS5pZCkgcmV0dXJuIGZhbHNlOwogICAgICByZXR1cm4gTnVtYmVyKG1lbWJlcklkKSA9PT0gTnVtYmVyKGN1cnJlbnRVc2VyLnZhbHVlLmlkKTsKICAgIH0KICAgIGNvbnN0IF9fcmV0dXJuZWRfXyA9IHsKICAgICAgY3VycmVudFVzZXIsCiAgICAgIHByb3BzLAogICAgICBwcm9qZWN0TWVtYmVycywKICAgICAgc2VhcmNoLAogICAgICBmaWx0ZXJBc3NpZ25lZSwKICAgICAgZmlsdGVyUHJpb3JpdHksCiAgICAgIHNob3dBZGRUYXNrLAogICAgICBzaG93RGV0YWlsLAogICAgICBjdXJyZW50VGFzaywKICAgICAgbmV3VGFzaywKICAgICAgdGFza3MsCiAgICAgIHRhc2tDb21wbGV0aW9ucywKICAgICAga2FuYmFuLAogICAgICByZWZyZXNoaW5nQWksCiAgICAgIGFkZFRhc2tGb3JtUmVmLAogICAgICBlZGl0VGFza0Zvcm1SZWYsCiAgICAgIGZvcm1SdWxlcywKICAgICAgZmV0Y2hUYXNrcywKICAgICAgZmV0Y2hUYXNrQ29tcGxldGlvbnMsCiAgICAgIGdldFRhc2tDb21wbGV0aW9uUGVyY2VudGFnZSwKICAgICAgZ2V0VGFza0NvbXBsZXRpb25UZXh0LAogICAgICBtYXJrQ29tcGxldGVGb3JNZW1iZXIsCiAgICAgIG1hcmtDb21wbGV0ZSwKICAgICAgdXBkYXRlVGFza1N0YXR1c1RvRG9uZSwKICAgICAgc2F2ZVRhc2ssCiAgICAgIGZpbHRlcmVkVGFza3MsCiAgICAgIG9wZW5EZXRhaWwsCiAgICAgIGdldFRhc2tBaUFuYWx5c2lzLAogICAgICBoYW5kbGVBZGRUYXNrLAogICAgICBmZXRjaFByb2plY3RNZW1iZXJzLAogICAgICBzaG93RWRpdFRhc2ssCiAgICAgIGVkaXRUYXNrLAogICAgICBvcGVuRWRpdFRhc2ssCiAgICAgIHNhdmVFZGl0VGFzaywKICAgICAgY29uZmlybURlbGV0ZVRhc2ssCiAgICAgIHJlZnJlc2hBbGxUYXNrQWlBbmFseXNpcywKICAgICAgcHJvY2Vzc0FJQ29udGVudCwKICAgICAgZm9ybWF0TWFya2Rvd24sCiAgICAgIGZvcm1hdEFpQW5hbHlzaXNEYXRhLAogICAgICBpc0N1cnJlbnRVc2VyLAogICAgICByZWYsCiAgICAgIHdhdGNoLAogICAgICBvbk1vdW50ZWQsCiAgICAgIGNvbXB1dGVkLAogICAgICBnZXQgVXNlckZpbGxlZCgpIHsKICAgICAgICByZXR1cm4gVXNlckZpbGxlZDsKICAgICAgfSwKICAgICAgZ2V0IENhbGVuZGFyKCkgewogICAgICAgIHJldHVybiBDYWxlbmRhcjsKICAgICAgfSwKICAgICAgZ2V0IENoYXREb3RSb3VuZCgpIHsKICAgICAgICByZXR1cm4gQ2hhdERvdFJvdW5kOwogICAgICB9LAogICAgICBnZXQgUmVmcmVzaCgpIHsKICAgICAgICByZXR1cm4gUmVmcmVzaDsKICAgICAgfSwKICAgICAgZ2V0IHJlcXVlc3QoKSB7CiAgICAgICAgcmV0dXJuIHJlcXVlc3Q7CiAgICAgIH0sCiAgICAgIGdldCBFbE1lc3NhZ2UoKSB7CiAgICAgICAgcmV0dXJuIEVsTWVzc2FnZTsKICAgICAgfSwKICAgICAgZ2V0IEVsTWVzc2FnZUJveCgpIHsKICAgICAgICByZXR1cm4gRWxNZXNzYWdlQm94OwogICAgICB9CiAgICB9OwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9fcmV0dXJuZWRfXywgJ19faXNTY3JpcHRTZXR1cCcsIHsKICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgIHZhbHVlOiB0cnVlCiAgICB9KTsKICAgIHJldHVybiBfX3JldHVybmVkX187CiAgfQp9Ow=="},{"version":3,"names":["ref","watch","onMounted","computed","UserFilled","Calendar","ChatDotRound","Refresh","request","ElMessage","ElMessageBox","currentUser","value","JSON","parse","localStorage","getItem","console","log","e","error","props","__props","projectMembers","members","search","filterAssignee","filterPriority","showAddTask","showDetail","currentTask","newTask","title","assignee","priority","dueDate","description","tags","status","progress","completed","total","tasks","taskCompletions","kanban","name","filter","t","refreshingAi","addTaskFormRef","editTaskFormRef","formRules","required","message","trigger","deep","fetchTasks","project","id","get","then","res","rawTasks","Array","isArray","data","map","due_date","priorityType","forEach","task","ai","length","getTaskAiAnalysis","fetchTaskCompletions","taskId","completionRecords","completionMap","Map","record","_record$user","_record$member","_record$member$user","userId","user","member","member_id","set","completionId","currentProjectMembers","finalMembersForTask","completionData","undefined","m","catch","err","getTaskCompletionPercentage","_taskCompletions$valu","_taskCompletions$valu2","_taskCompletions$valu3","Math","round","getTaskCompletionText","_taskCompletions$valu4","_taskCompletions$valu5","val","immediate","markCompleteForMember","memberId","post","completed_at","Date","toISOString","success","existingMemberIds","includes","push","find","tc","updateTaskStatusToDone","markComplete","_taskCompletions$valu6","max","patch","tcc","saveTask","validate","valid","assignee_id","tagsValue","join","payload","filteredTasks","taskArr","matchSearch","matchAssignee","username","matchPriority","openDetail","_aiLoading","_res$data","suggestions","toString","formattedSuggestions","formatAiAnalysisData","finally","handleAddTask","newProject","fetchProjectMembers","newMembers","projectId","pm","_pm$user","_pm$user2","_pm$user3","email","showEditTask","editTask","openEditTask","saveEditTask","confirmDeleteTask","confirm","confirmButtonText","cancelButtonText","type","delete","refreshAllTaskAiAnalysis","finished","_res$data2","processAIContent","aiItems","hasIncompleteData","lastItem","trim","result","currentCategory","tempItems","item","startsWith","formatMarkdown","text","replace","items","originalText","hasAnalysis","some","hasSuggestion","unshift","currentSection","hasAddedAnalysisItems","hasAddedSuggestionItems","i","analysisItems","suggestionItems","isCurrentUser","Number"],"sources":["C:/Users/18083/Desktop/CCIT/office/smart-office/frontend/src/views/project/components/TasksView.vue"],"sourcesContent":["<template>\n  <div class=\"module-card modern-tasks\">\n    <div class=\"module-header\">\n      <h5 class=\"module-title\">任务管理</h5>\n      <div class=\"btn-group\">\n        <el-button type=\"primary\" size=\"default\" round @click=\"handleAddTask\">新建任务</el-button>\n        <el-button type=\"info\" size=\"default\" round @click=\"refreshAllTaskAiAnalysis\" :loading=\"refreshingAi\">刷新分析</el-button>\n      </div>\n    </div>\n    <!-- 顶部搜索和筛选 -->\n    <div class=\"task-filters modern-filters\">\n      <el-input v-model=\"search\" placeholder=\"搜索任务...\" clearable class=\"filter-input\" />\n      <el-select v-model=\"filterAssignee\" placeholder=\"负责人\" clearable class=\"filter-select\">\n        <el-option label=\"全部\" value=\"\" />\n        <el-option v-for=\"member in projectMembers\" :key=\"member.id\" :label=\"member.name\" :value=\"member.name\" />\n      </el-select>\n      <el-select v-model=\"filterPriority\" placeholder=\"优先级\" clearable class=\"filter-select\">\n        <el-option label=\"全部\" value=\"\" />\n        <el-option label=\"高\" value=\"高\" />\n        <el-option label=\"中\" value=\"中\" />\n        <el-option label=\"低\" value=\"低\" />\n      </el-select>\n    </div>\n    <!-- 只保留看板视图 -->\n    <div class=\"kanban-view modern-kanban\">\n      <div class=\"row\">\n        <div class=\"col-md-4\" v-for=\"col in kanban\" :key=\"col.name\">\n          <div class=\"card modern-card\">\n            <div class=\"card-header modern-card-header kanban-col-header\">\n              <span class=\"kanban-col-dot\" :class=\"col.name\"></span>\n              <h6 class=\"mb-0\">{{ col.name }} <el-badge :value=\"filteredTasks(col.tasks).length\" class=\"kanban-badge\" /></h6>\n            </div>\n            <div class=\"card-body task-list\">\n              <el-empty v-if=\"filteredTasks(col.tasks).length === 0\" description=\"暂无任务\" :image-size=\"60\" />\n              <div v-else v-for=\"task in filteredTasks(col.tasks)\" :key=\"task.title\" class=\"task-card modern-task-card\">\n                <div class=\"task-body\" @click=\"openDetail(task)\">\n                  <div class=\"task-header\">\n                    <h6 class=\"mb-0 task-title-main\">{{ task.title }}</h6>\n                    <el-tag :type=\"task.priorityType\" size=\"small\">{{ task.priority }}</el-tag>\n                  </div>\n                  <div class=\"task-meta-row\">\n                    <span v-if=\"task.assignee && task.assignee.user\"><el-icon><UserFilled /></el-icon> {{ task.assignee.user.username }}</span>\n                    <span v-if=\"task.dueDate\"><el-icon><Calendar /></el-icon> {{ task.dueDate }}</span>\n                    <div class=\"task-progress-row\">\n                      <el-progress :percentage=\"getTaskCompletionPercentage(task)\" :show-text=\"false\" style=\"width:60px;height:4px;display:inline-block;margin:0 8px;\" />\n                      <span class=\"progress-text\">{{ getTaskCompletionText(task) }}</span>\n                    </div>\n                  </div>\n                  <div class=\"task-tags\">\n                    <el-tag v-for=\"tag in task.tags\" :key=\"tag\" size=\"small\">{{ tag }}</el-tag>\n                  </div>\n                  <p class=\"task-description\">{{ task.description }}</p>\n                  <div class=\"ai-analysis-toggle\" @click.stop=\"task._showAI = !task._showAI\">\n                    <el-icon style=\"vertical-align:middle;\"><ChatDotRound /></el-icon>\n                    <span style=\"font-size:12px;color:#888;cursor:pointer;\">AI分析 {{ task._showAI ? '▲' : '▼' }}</span>\n                    <el-button size=\"small\" type=\"link\" @click.stop=\"getTaskAiAnalysis(task.id)\" :loading=\"task._aiLoading\">\n                      <el-icon><Refresh /></el-icon>\n                    </el-button>\n                  </div>\n                  <div v-if=\"isCurrentUser(task.assignee?.user?.id)\" style=\"margin-top:6px;\">\n                    <el-button size=\"small\" @click.stop=\"openEditTask(task)\">编辑</el-button>\n                    <el-button size=\"small\" type=\"danger\" @click.stop=\"confirmDeleteTask(task)\">删除</el-button>\n                  </div>\n                  <transition name=\"fade\">\n                    <div v-if=\"task._showAI\" class=\"ai-analysis modern-ai-analysis\">\n                      <div v-if=\"!task.ai || task.ai.length === 0\" class=\"text-center py-2\">\n                        <span class=\"text-muted\">暂无AI分析</span>\n                      </div>\n                      <ul class=\"mb-0\" v-else>\n                        <li v-for=\"r in processAIContent(task.ai)\" :key=\"r\" v-html=\"formatMarkdown(r)\"></li>\n                      </ul>\n                    </div>\n                  </transition>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- 新建/编辑任务弹窗 -->\n    <el-dialog v-model=\"showAddTask\" title=\"新建任务\" width=\"420px\" class=\"modern-dialog\">\n      <el-form :model=\"newTask\" :rules=\"formRules\" ref=\"addTaskFormRef\" label-width=\"80px\" class=\"modern-form\">\n        <el-form-item label=\"任务名称\" prop=\"title\" required>\n          <el-input v-model=\"newTask.title\" placeholder=\"请输入任务名称\" />\n        </el-form-item>\n        <el-form-item label=\"负责人\" prop=\"assignee\" required>\n          <el-select v-model=\"newTask.assignee\" placeholder=\"请选择负责人\">\n            <el-option \n              v-for=\"member in projectMembers\" \n              :key=\"member.id\" \n              :label=\"member.name\" \n              :value=\"member.id\" \n            />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"优先级\" prop=\"priority\" required>\n          <el-select v-model=\"newTask.priority\" placeholder=\"请选择优先级\">\n            <el-option label=\"高\" value=\"高\" />\n            <el-option label=\"中\" value=\"中\" />\n            <el-option label=\"低\" value=\"低\" />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"截止日期\" prop=\"dueDate\" required>\n          <el-date-picker v-model=\"newTask.dueDate\" value-format=\"YYYY-MM-DD\" placeholder=\"请选择截止日期\" />\n        </el-form-item>\n        <el-form-item label=\"描述\" prop=\"description\" required>\n          <el-input type=\"textarea\" v-model=\"newTask.description\" placeholder=\"请输入任务描述\" />\n        </el-form-item>\n        <el-form-item label=\"标签\" prop=\"tags\" required>\n          <el-input v-model=\"newTask.tags\" placeholder=\"逗号分隔\" />\n        </el-form-item>\n      </el-form>\n      <template #footer>\n        <el-button @click=\"showAddTask = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"saveTask\">保存</el-button>\n      </template>\n    </el-dialog>\n    <!-- 任务详情弹窗 -->\n    <el-dialog v-model=\"showDetail\" title=\"任务详情\" width=\"480px\" class=\"modern-dialog\">\n      <div v-if=\"currentTask\">\n        <h5 style=\"font-weight:600;\">{{ currentTask.title }}</h5>\n        <div style=\"margin:10px 0;display:flex;gap:16px;align-items:center;\">\n          <el-tag :type=\"currentTask.priorityType\" size=\"small\">{{ currentTask.priority }}</el-tag>\n          <span>负责人：{{ currentTask.assignee && currentTask.assignee.user ? currentTask.assignee.user.username : '' }}</span>\n          <span>截止：{{ currentTask.dueDate }}</span>\n        </div>\n        <div style=\"margin-bottom:10px;\">描述：{{ currentTask.description }}</div>\n        <div style=\"margin-bottom:10px;\">标签：<el-tag v-for=\"tag in currentTask.tags\" :key=\"tag\" size=\"small\">{{ tag }}</el-tag></div>\n        <div style=\"margin-bottom:10px;\">进度：<el-progress :percentage=\"getTaskCompletionPercentage(currentTask)\" /></div>\n        <div class=\"ai-analysis modern-ai-analysis\">\n          <div class=\"d-flex justify-content-between align-items-center mb-2\">\n            <small class=\"text-muted\">AI分析：</small>\n            <el-button size=\"small\" type=\"link\" @click=\"getTaskAiAnalysis(currentTask.id)\" :loading=\"currentTask._aiLoading\">\n              <el-icon><Refresh /></el-icon> 刷新分析\n            </el-button>\n          </div>\n          <div v-if=\"!currentTask.ai || currentTask.ai.length === 0\" class=\"text-center py-2\">\n            <span class=\"text-muted\">暂无AI分析</span>\n          </div>\n          <ul class=\"mb-0\" v-else>\n            <li v-for=\"r in processAIContent(currentTask.ai)\" :key=\"r\" v-html=\"formatMarkdown(r)\"></li>\n          </ul>\n        </div>\n        <div class=\"member-completion-list\">\n          <div v-if=\"currentTask.status === 'todo' || currentTask.status === '待处理'\">\n            <div v-for=\"member in projectMembers\" :key=\"member.id\" class=\"member-item\">\n              <span>{{ member.name }}</span>\n              <el-tag type=\"info\" size=\"small\">未完成</el-tag>\n            </div>\n          </div>\n          <div v-else-if=\"!taskCompletions[currentTask?.id]?.members || taskCompletions[currentTask?.id]?.members.length === 0\">\n            <div v-for=\"member in projectMembers\" :key=\"member.id\" class=\"member-item\">\n              <span>{{ member.name }}</span>\n              <el-button \n                v-if=\"isCurrentUser(member.userId)\" \n                type=\"primary\" \n                size=\"small\" \n                @click=\"markCompleteForMember(currentTask.id, member.id)\"\n              >完成</el-button>\n              <el-tag v-else type=\"info\" size=\"small\">未完成</el-tag>\n            </div>\n          </div>\n          <div v-else v-for=\"m in taskCompletions[currentTask.id]?.members || []\" :key=\"m.id\" class=\"member-item\">\n            <span>{{ m.name }}</span>\n            <el-tag v-if=\"m.completed\" type=\"success\" size=\"small\">已完成</el-tag>\n            <el-button \n              v-else-if=\"isCurrentUser(m.userId)\" \n              type=\"primary\" \n              size=\"small\" \n              @click=\"markComplete(currentTask.id, m.id)\"\n            >完成</el-button>\n            <el-tag v-else type=\"info\" size=\"small\">未完成</el-tag>\n          </div>\n        </div>\n      </div>\n      <template #footer>\n        <el-button @click=\"showDetail=false\">关闭</el-button>\n        <el-button v-if=\"isCurrentUser(currentTask?.assignee?.user?.id)\" @click=\"openEditTask(currentTask)\" type=\"primary\">编辑</el-button>\n        <el-button v-if=\"isCurrentUser(currentTask?.assignee?.user?.id)\" @click=\"confirmDeleteTask(currentTask)\" type=\"danger\">删除</el-button>\n      </template>\n    </el-dialog>\n    <!-- 编辑任务弹窗 -->\n    <el-dialog v-model=\"showEditTask\" title=\"编辑任务\" width=\"420px\" class=\"modern-dialog\">\n      <el-form :model=\"editTask\" :rules=\"formRules\" ref=\"editTaskFormRef\" label-width=\"80px\" class=\"modern-form\">\n        <el-form-item label=\"任务名称\" prop=\"title\" required>\n          <el-input v-model=\"editTask.title\" placeholder=\"请输入任务名称\" />\n        </el-form-item>\n        <el-form-item label=\"优先级\" prop=\"priority\" required>\n          <el-select v-model=\"editTask.priority\" placeholder=\"请选择优先级\">\n            <el-option label=\"高\" value=\"高\" />\n            <el-option label=\"中\" value=\"中\" />\n            <el-option label=\"低\" value=\"低\" />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"截止日期\" prop=\"dueDate\" required>\n          <el-date-picker v-model=\"editTask.dueDate\" value-format=\"YYYY-MM-DD\" placeholder=\"请选择截止日期\" />\n        </el-form-item>\n        <el-form-item label=\"描述\" prop=\"description\" required>\n          <el-input type=\"textarea\" v-model=\"editTask.description\" placeholder=\"请输入任务描述\" />\n        </el-form-item>\n        <el-form-item label=\"标签\" prop=\"tags\" required>\n          <el-input v-model=\"editTask.tags\" placeholder=\"逗号分隔\" />\n        </el-form-item>\n        <el-form-item label=\"状态\" prop=\"status\" required>\n          <el-select v-model=\"editTask.status\" placeholder=\"请选择状态\">\n            <el-option label=\"待处理\" value=\"todo\" />\n            <el-option label=\"进行中\" value=\"in-progress\" />\n            <el-option label=\"已完成\" value=\"done\" />\n          </el-select>\n        </el-form-item>\n      </el-form>\n      <template #footer>\n        <el-button @click=\"showEditTask = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"saveEditTask\">保存</el-button>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n<script setup>\nimport { ref, watch, onMounted, computed } from 'vue'\nimport { UserFilled, Calendar, ChatDotRound, Refresh } from '@element-plus/icons-vue'\nimport request from '@/utils/request'\nimport { ElMessage, ElMessageBox } from 'element-plus'\n\n// 获取当前登录用户信息\nconst currentUser = ref(null)\ntry {\n  currentUser.value = JSON.parse(localStorage.getItem('user') || '{}')\n  console.log('当前登录用户:', currentUser.value)\n} catch (e) {\n  console.error('解析用户信息失败:', e)\n}\n\nconst props = defineProps({\n  project: {\n    type: Object,\n    default: () => ({})\n  },\n  members: {\n    type: Array,\n    default: () => []\n  }\n})\n\n// 直接使用props.members，无需再定义本地的projectMembers\nconst projectMembers = computed(() => props.members)\n\nconst search = ref('')\nconst filterAssignee = ref('')\nconst filterPriority = ref('')\nconst showAddTask = ref(false)\nconst showDetail = ref(false)\nconst currentTask = ref(null)\nconst newTask = ref({\n  title: '',\n  assignee: '',\n  priority: '中',\n  dueDate: '',\n  description: '',\n  tags: '',\n  status: 'todo',\n  progress: 0,\n  completed: 0,\n  total: 1\n})\n\n// 所有任务数据\nconst tasks = ref([])\n\n// 新增：任务完成进度数据\nconst taskCompletions = ref({}) // { [taskId]: { total, completed, members: [{id, name, completed}] } }\n\nconst kanban = computed(() => [\n  { name: '待处理', tasks: tasks.value.filter(t => t.status === 'todo' || t.status === '待处理') },\n  { name: '进行中', tasks: tasks.value.filter(t => t.status === 'in-progress' || t.status === '进行中') },\n  { name: '已完成', tasks: tasks.value.filter(t => t.status === 'done' || t.status === '已完成') }\n])\n\nconst refreshingAi = ref(false)\n\n// 表单引用\nconst addTaskFormRef = ref(null)\nconst editTaskFormRef = ref(null)\n\n// 表单验证规则\nconst formRules = {\n  title: [{ required: true, message: '请输入任务名称', trigger: 'blur' }],\n  assignee: [{ required: true, message: '请选择负责人', trigger: 'change' }],\n  priority: [{ required: true, message: '请选择优先级', trigger: 'change' }],\n  dueDate: [{ required: true, message: '请选择截止日期', trigger: 'change' }],\n  description: [{ required: true, message: '请输入任务描述', trigger: 'blur' }],\n  tags: [{ required: true, message: '请输入标签', trigger: 'blur' }],\n  status: [{ required: true, message: '请选择状态', trigger: 'change' }]\n}\n\n// 添加过滤条件变化监听\nwatch([search, filterAssignee, filterPriority], () => {\n  // 当过滤条件变化时，刷新任务列表\n}, { deep: true });\n\n// 获取任务列表\nfunction fetchTasks() {\n  if (!props.project || !props.project.id) return\n  request.get(`/api/tasks/?project=${props.project.id}`).then(res => {\n    // 统一转换任务字段\n    const rawTasks = Array.isArray(res.data) ? res.data : (res.data.data || [])\n    tasks.value = rawTasks.map(t => ({\n      ...t,\n      dueDate: t.due_date || t.dueDate || '',\n      priority: t.priority === 'high' ? '高' : t.priority === 'low' ? '低' : t.priority === 'medium' ? '中' : (t.priority || ''),\n      priorityType: t.priority === 'high' || t.priority === '高' ? 'danger' : t.priority === 'low' || t.priority === '低' ? 'info' : 'warning',\n    }))\n    // 自动AI分析\n    tasks.value.forEach(task => {\n      if (!task.ai || task.ai.length === 0) {\n        getTaskAiAnalysis(task.id)\n      }\n    })\n  })\n}\n\n// 获取任务完成进度\nfunction fetchTaskCompletions(taskId) {\n  if (!taskId) return;\n  request.get(`/api/task-completions/?task=${taskId}`).then(res => {\n    const completionRecords = Array.isArray(res.data) ? res.data : (res.data.data || []);\n    \n    // 创建一个以用户ID为键的完成状态映射，方便快速查找\n    const completionMap = new Map();\n    completionRecords.forEach(record => {\n      // 兼容多种可能的后端返回结构\n      const userId = record.user?.id || record.member?.user?.id || record.member_id;\n      if (userId) {\n        completionMap.set(userId, {\n          completed: record.completed,\n          completionId: record.id\n        });\n      }\n    });\n\n    // 以当前的项目成员列表 (props.members) 为唯一数据源\n    const currentProjectMembers = projectMembers.value;\n\n    // 基于当前项目成员构建任务的最终成员列表，并附加其完成状态\n    const finalMembersForTask = currentProjectMembers.map(member => {\n      const completionData = completionMap.get(member.id);\n      return {\n        id: member.id,          // 确保ID是用户ID\n        name: member.name,\n        completed: completionData ? completionData.completed : false,\n        completionId: completionData ? completionData.completionId : undefined,\n        userId: member.id       // 明确userId字段\n      };\n    });\n\n    taskCompletions.value[taskId] = {\n      total: finalMembersForTask.length,\n      completed: finalMembersForTask.filter(m => m.completed).length,\n      members: finalMembersForTask\n    };\n  }).catch(err => {\n    console.error(`获取任务[${taskId}]完成进度失败:`, err);\n    // 如果API调用失败，则将所有当前项目成员显示为未完成\n    taskCompletions.value[taskId] = {\n      total: projectMembers.value.length,\n      completed: 0,\n      members: projectMembers.value.map(m => ({\n        id: m.id,\n        name: m.name,\n        completed: false,\n        userId: m.id\n      }))\n    };\n  });\n}\n\n// 新增：获取任务完成百分比\nfunction getTaskCompletionPercentage(task) {\n  if (!task || !task.id) return 0\n  \n  // 如果有后端数据，使用后端数据\n  if (taskCompletions.value[task.id]?.total) {\n    return Math.round(100 * (taskCompletions.value[task.id]?.completed || 0) / taskCompletions.value[task.id]?.total)\n  }\n  \n  // 否则使用默认值\n  return 0\n}\n\n// 新增：获取任务完成文本\nfunction getTaskCompletionText(task) {\n  if (!task || !task.id) {\n    // 如果没有任务，显示默认值\n    return `0/${projectMembers.value.length || 1}人完成`\n  }\n  \n  // 如果有后端数据，使用后端数据\n  if (taskCompletions.value[task.id]) {\n    return `${taskCompletions.value[task.id]?.completed || 0}/${taskCompletions.value[task.id]?.total || projectMembers.value.length || 1}人完成`\n  }\n  \n  // 否则使用默认值\n  return `0/${projectMembers.value.length || 1}人完成`\n}\n\n// 在任务列表加载后，批量获取所有任务的完成进度\nwatch(tasks, (val) => {\n  (val || []).forEach(task => fetchTaskCompletions(task.id))\n}, { immediate: true })\n\n// 新增：为没有 TaskCompletion 记录的成员标记完成\nfunction markCompleteForMember(taskId, memberId) {\n  if (!taskId || !memberId) return\n  \n  console.log('为新成员标记任务完成:', taskId, memberId)\n  \n  // 创建新的 TaskCompletion 记录\n  request.post('/api/task-completions/', {\n    task: taskId,\n    member_id: memberId,\n    completed: true,\n    completed_at: new Date().toISOString()\n  }).then(() => {\n    ElMessage.success('已标记为完成')\n    // 更新本地状态\n    if (!taskCompletions.value[taskId]) {\n      // 初始化任务完成状态，使用项目成员总数\n      taskCompletions.value[taskId] = {\n        total: projectMembers.value.length,\n        completed: 1,\n        members: projectMembers.value.map(m => ({\n          id: m.id,\n          name: m.name,\n          completed: m.id === memberId,\n          completionId: undefined\n        }))\n      }\n    } else {\n      // 更新已有的任务完成状态\n      taskCompletions.value[taskId].completed++\n      // 确保 members 数组包含所有项目成员\n      const existingMemberIds = taskCompletions.value[taskId].members.map(m => m.id)\n      projectMembers.value.forEach(m => {\n        if (!existingMemberIds.includes(m.id)) {\n          taskCompletions.value[taskId].members.push({\n            id: m.id,\n            name: m.name,\n            completed: m.id === memberId,\n            completionId: undefined\n          })\n        }\n      })\n      // 更新当前成员的完成状态\n      const member = taskCompletions.value[taskId].members.find(m => m.id === memberId)\n      if (member) {\n        member.completed = true\n      }\n      // 确保总数正确\n      taskCompletions.value[taskId].total = taskCompletions.value[taskId].members.length\n    }\n    \n    // 重新获取最新数据\n    fetchTaskCompletions(taskId)\n    // 检查是否所有成员都完成，自动设为已完成\n    const tc = taskCompletions.value[taskId]\n    if (tc && tc.completed === tc.total && tc.total > 0) {\n      updateTaskStatusToDone(taskId)\n    }\n  }).catch(err => {\n    console.error('创建任务完成记录失败:', err)\n    ElMessage.error('操作失败，请重试')\n  })\n}\n\n// 成员点击\"完成\"按钮\nfunction markComplete(taskId, memberId) {\n  const tc = (taskCompletions.value[taskId]?.members || []).find(m => m.id === memberId)\n  if (!tc || tc.completed) return\n  \n  console.log('标记任务完成:', taskId, memberId, tc.completionId)\n  \n  // 立即更新本地状态，提供即时反馈\n  tc.completed = true\n  taskCompletions.value[taskId].completed++\n  \n  // 确保总数正确\n  taskCompletions.value[taskId].total = Math.max(\n    taskCompletions.value[taskId].total,\n    taskCompletions.value[taskId].members.length,\n    projectMembers.value.length\n  )\n  \n  // 然后发送请求到后端\n  request.patch(`/api/task-completions/${tc.completionId}/`, { \n    completed: true, \n    completed_at: new Date().toISOString() \n  }).then(() => {\n    ElMessage.success('已标记为完成')\n    // 重新获取最新数据\n    fetchTaskCompletions(taskId)\n    // 检查是否所有成员都完成，自动设为已完成\n    const tcc = taskCompletions.value[taskId]\n    if (tcc && tcc.completed === tcc.total && tcc.total > 0) {\n      updateTaskStatusToDone(taskId)\n    }\n  }).catch(err => {\n    console.error('标记完成失败:', err)\n    ElMessage.error('操作失败，但界面已更新')\n    // 失败时不回滚本地状态，保持用户体验\n  })\n}\n\n// 新增：自动将任务状态设为已完成\nfunction updateTaskStatusToDone(taskId) {\n  // 本地更新\n  const task = tasks.value.find(t => t.id === taskId)\n  if (task) task.status = 'done'\n  // 后端更新\n  request.patch(`/api/tasks/${taskId}/`, { status: 'done' })\n}\n\n// 新建任务\nfunction saveTask() {\n  if (!addTaskFormRef.value) {\n    console.error('表单引用不存在')\n    return\n  }\n\n  addTaskFormRef.value.validate(valid => {\n    if (!valid) {\n      ElMessage.error('请填写所有必填项')\n      return\n    }\n\n    // 直接用assignee为ProjectMember的id\n    const assignee_id = newTask.value.assignee\n    if (!assignee_id) {\n      ElMessage.error('负责人无效')\n      return\n    }\n    // 确保tags是字符串而不是数组\n    const tagsValue = typeof newTask.value.tags === 'string' \n      ? newTask.value.tags \n      : (Array.isArray(newTask.value.tags) ? newTask.value.tags.join(',') : '');\n      \n    const payload = {\n      project: props.project.id,\n      title: newTask.value.title,\n      description: newTask.value.description,\n      assignee_id: assignee_id,\n      due_date: newTask.value.dueDate,\n      priority: newTask.value.priority === '高' ? 'high' : (newTask.value.priority === 'low' ? 'low' : 'medium'),\n      status: 'todo',\n      tags: tagsValue\n    }\n    request.post('/api/tasks/', payload).then(() => {\n      ElMessage.success('任务创建成功')\n      showAddTask.value = false\n      fetchTasks()\n    }).catch(() => {\n      ElMessage.error('任务创建失败')\n    })\n  })\n}\n\n// 过滤\nfunction filteredTasks(taskArr) {\n  return taskArr.filter(t => {\n    const matchSearch = !search.value || t.title.includes(search.value) || (t.description && t.description.includes(search.value))\n    const matchAssignee = !filterAssignee.value || (t.assignee && t.assignee.user && t.assignee.user.username === filterAssignee.value)\n    // 优先级筛选：直接用中文匹配\n    const matchPriority = !filterPriority.value || t.priority === filterPriority.value\n    return matchSearch && matchAssignee && matchPriority\n  })\n}\n\n// 详情弹窗\nfunction openDetail(task) {\n  // 详情弹窗也需转换 priorityType\n  currentTask.value = {\n    ...task,\n    priorityType: task.priorityType || (task.priority === '高' || task.priority === 'high' ? 'danger' : task.priority === '低' || task.priority === 'low' ? 'info' : 'warning'),\n    // 动态获取AI分析结果，而不是使用静态数据\n    ai: task.ai || []\n  }\n  // 显示详情弹窗\n  showDetail.value = true\n  // 如果没有AI分析数据，自动获取\n  if (!task.ai || task.ai.length === 0) {\n    getTaskAiAnalysis(task.id)\n  }\n}\n\n// 新增：获取任务AI分析\nfunction getTaskAiAnalysis(taskId) {\n  if (!taskId) return\n  \n  console.log('获取任务AI分析:', taskId)\n  \n  // 设置对应任务的加载状态\n  const task = tasks.value.find(t => t.id === taskId)\n  if (task) {\n    task._aiLoading = true\n  }\n  \n  request.get(`/api/tasks/${taskId}/ai_analysis/`).then(res => {\n    let suggestions = res.data?.suggestions || []\n    \n    // 如果后端返回的数据不是数组格式，确保转换为数组\n    if (!Array.isArray(suggestions)) {\n      suggestions = [suggestions.toString()]\n    }\n    \n    // 确保建议包含\"专业分析\"和\"建议\"两个部分\n    const formattedSuggestions = formatAiAnalysisData(suggestions)\n    \n    // 更新当前打开的任务详情\n    if (currentTask.value && currentTask.value.id === taskId) {\n      currentTask.value.ai = formattedSuggestions\n    }\n    \n    // 更新任务列表中的任务\n    const task = tasks.value.find(t => t.id === taskId)\n    if (task) {\n      task.ai = formattedSuggestions\n    }\n    \n    console.log('任务AI分析结果:', formattedSuggestions)\n  }).catch(err => {\n    console.error('获取任务AI分析失败:', err)\n    ElMessage.error('获取任务AI分析失败')\n  }).finally(() => {\n    // 清除加载状态\n    const task = tasks.value.find(t => t.id === taskId)\n    if (task) {\n      task._aiLoading = false\n    }\n  })\n}\n\n// 新建任务弹窗\nfunction handleAddTask() {\n  newTask.value = {\n    title: '',\n    assignee: '',\n    priority: '中',\n    dueDate: '',\n    description: '',\n    tags: '',\n    status: 'todo',\n    progress: 0,\n    completed: 0,\n    total: 1\n  }\n  showAddTask.value = true\n}\n\n// 监听项目变化自动拉取任务和成员\nwatch(() => props.project, (newProject) => {\n  if (newProject && newProject.id) {\n    // 如果父组件传递了成员数据，优先使用\n    if (props.members && props.members.length > 0) {\n      projectMembers.value = props.members\n      console.log('使用父组件传递的成员数据:', projectMembers.value)\n    } else {\n      fetchProjectMembers(newProject.id)\n    }\n    fetchTasks()\n  }\n}, { immediate: true })\n\n// 监听父组件传递的成员数据变化\nwatch(() => props.members, (newMembers) => {\n  if (newMembers && newMembers.length > 0) {\n    projectMembers.value = newMembers\n    console.log('成员数据更新:', projectMembers.value)\n  }\n}, { immediate: true })\n\nonMounted(() => {\n  if (props.project && props.project.id) {\n    // 如果父组件传递了成员数据，优先使用\n    if (props.members && props.members.length > 0) {\n      projectMembers.value = props.members\n      console.log('使用父组件传递的成员数据:', projectMembers.value)\n    } else {\n      fetchProjectMembers(props.project.id)\n    }\n    fetchTasks()\n  }\n})\n\n// 获取项目成员（ProjectMember 列表，带 user 信息）\nfunction fetchProjectMembers(projectId) {\n  if (!projectId) return\n  request.get(`/api/project-members/?project=${projectId}`).then(res => {\n    // 结构：[{id: ProjectMember.id, user: {id, username, ...}, ...}]\n    if (Array.isArray(res.data)) {\n      projectMembers.value = res.data.map(pm => ({\n        id: pm.id,\n        name: pm.user?.username || pm.user?.email || '未命名成员',\n        userId: pm.user?.id\n      }))\n    } else {\n      projectMembers.value = []\n    }\n    console.log('拉取到的项目成员（ProjectMember）:', projectMembers.value)\n  }).catch(err => {\n    console.error('获取项目成员失败', err)\n    projectMembers.value = []\n  })\n}\n\n// 编辑相关逻辑\nconst showEditTask = ref(false)\nconst editTask = ref(null)\nfunction openEditTask(task) {\n  editTask.value = { ...task, status: task.status || 'todo' }\n  showEditTask.value = true\n}\nfunction saveEditTask() {\n  if (!editTaskFormRef.value) {\n    console.error('表单引用不存在')\n    return\n  }\n\n  editTaskFormRef.value.validate(valid => {\n    if (!valid) {\n      ElMessage.error('请填写所有必填项')\n      return\n    }\n    \n    // 确保tags是字符串而不是数组\n    let tagsValue = '';\n    if (typeof editTask.value.tags === 'string') {\n      tagsValue = editTask.value.tags;\n    } else if (Array.isArray(editTask.value.tags)) {\n      tagsValue = editTask.value.tags.join(',');\n    }\n    \n    const payload = {\n      id: editTask.value.id,\n      title: editTask.value.title,\n      description: editTask.value.description || '',\n      priority: editTask.value.priority === '高' ? 'high' : (editTask.value.priority === '低' ? 'low' : 'medium'),\n      due_date: editTask.value.dueDate || '',\n      tags: tagsValue,\n      status: editTask.value.status || 'todo',\n    }\n    request.patch(`/api/tasks/${editTask.value.id}/`, payload).then(() => {\n      ElMessage.success('任务更新成功')\n      showEditTask.value = false\n      fetchTasks()\n      showDetail.value = false\n    }).catch(() => {\n      ElMessage.error('任务更新失败')\n    })\n  })\n}\n\n// 删除相关逻辑\nfunction confirmDeleteTask(task) {\n  ElMessageBox.confirm('确定要删除该任务吗？', '提示', {\n    confirmButtonText: '删除',\n    cancelButtonText: '取消',\n    type: 'warning',\n  }).then(() => {\n    request.delete(`/api/tasks/${task.id}/`).then(() => {\n      ElMessage.success('任务已删除')\n      fetchTasks()\n      showDetail.value = false\n    })\n  })\n}\n\nfunction refreshAllTaskAiAnalysis() {\n  if (!tasks.value.length) return\n  refreshingAi.value = true\n  let finished = 0\n  const total = tasks.value.length\n  tasks.value.forEach(task => {\n    task._aiLoading = true\n    request.get(`/api/tasks/${task.id}/ai_analysis/`).then(res => {\n      let suggestions = res.data?.suggestions || []\n      \n      // 如果后端返回的数据不是数组格式，确保转换为数组\n      if (!Array.isArray(suggestions)) {\n        suggestions = [suggestions.toString()]\n      }\n      \n      // 确保建议包含\"专业分析\"和\"建议\"两个部分\n      task.ai = formatAiAnalysisData(suggestions)\n    }).catch(() => {\n      task.ai = []\n    }).finally(() => {\n      task._aiLoading = false\n      finished++\n      if (finished === total) {\n        refreshingAi.value = false\n        ElMessage.success('AI分析完成')\n      }\n    })\n  })\n}\n\n// 处理AI内容，确保完整显示，包括建议部分\nfunction processAIContent(aiItems) {\n  if (!aiItems || !Array.isArray(aiItems)) return []\n  \n  // 检查是否有\"建议:\"但没有跟随内容的情况\n  let hasIncompleteData = false\n  if (aiItems.length > 0) {\n    const lastItem = aiItems[aiItems.length - 1]\n    if (typeof lastItem === 'string' && (lastItem.trim() === '建议:' || lastItem.trim() === '建议：')) {\n      hasIncompleteData = true\n    }\n  }\n  \n  // 如果发现不完整数据，则取消字符限制\n  if (hasIncompleteData) {\n    return aiItems\n  }\n  \n  // 根据具体情况重组内容，确保分析和建议都能完整显示\n  // 尝试将数组重新组合为更有逻辑的结构\n  const result = []\n  let currentCategory = ''\n  let tempItems = []\n  \n  for (const item of aiItems) {\n    if (typeof item !== 'string') {\n      result.push(item)\n      continue\n    }\n    \n    // 检测新的分类标题\n    if (item.includes('专业分析:') || item.includes('专业分析：')) {\n      if (currentCategory && tempItems.length) {\n        result.push(`${currentCategory}${tempItems.join(' ')}`)\n      }\n      currentCategory = '专业分析: '\n      tempItems = []\n    } \n    else if (item.includes('建议:') || item.includes('建议：')) {\n      if (currentCategory && tempItems.length) {\n        result.push(`${currentCategory}${tempItems.join(' ')}`)\n      }\n      currentCategory = '建议: '\n      tempItems = []\n    }\n    // 如果是以\"-\"或\"•\"开头的列表项，单独保留\n    else if (item.trim().startsWith('-') || item.trim().startsWith('•')) {\n      result.push(item)\n    }\n    // 其他情况添加到当前分类\n    else {\n      tempItems.push(item)\n    }\n  }\n  \n  // 添加最后一个分类的内容\n  if (currentCategory && tempItems.length) {\n    result.push(`${currentCategory}${tempItems.join(' ')}`)\n  }\n  \n  return result.length ? result : aiItems\n}\n\n// 将Markdown格式化为HTML显示\nfunction formatMarkdown(text) {\n  if (!text) return ''\n  try {\n    // 简单处理一些markdown语法\n    // 加粗\n    let result = text.replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>')\n    // 斜体\n    result = result.replace(/\\*(.*?)\\*/g, '<em>$1</em>')\n    // 行内代码\n    result = result.replace(/`(.*?)`/g, '<code>$1</code>')\n    // 超链接\n    result = result.replace(/\\[(.*?)\\]\\((.*?)\\)/g, '<a href=\"$2\" target=\"_blank\">$1</a>')\n    \n    // 处理以\"-\"开头的列表项，确保正确显示\n    if (result.trim().startsWith('-') || result.trim().startsWith('•')) {\n      result = result.replace(/^[\\s-•]+/, '')\n      result = `<span class=\"list-bullet\">•</span> ${result}`\n    }\n    \n    // 处理冒号后的内容，如果是分类标题\n    if (result.includes('专业分析:') || result.includes('专业分析：')) {\n      result = `<strong class=\"analysis-title\">专业分析:</strong> ${result.replace(/专业分析[:：]\\s*/, '')}`\n    }\n    else if (result.includes('建议:') || result.includes('建议：')) {\n      result = `<strong class=\"suggestion-title\">建议:</strong> ${result.replace(/建议[:：]\\s*/, '')}`\n    }\n    \n    return result\n  } catch (e) {\n    console.error('Markdown格式化错误:', e)\n    return text\n  }\n}\n\n// 将AI返回的分析内容格式化为标准结构\nfunction formatAiAnalysisData(items) {\n  if (!items || !items.length) return []\n  \n  // 检查原始内容\n  const originalText = items.join(' ');\n  \n  // 检查是否已经包含专业分析和建议两个部分\n  const hasAnalysis = items.some(item => \n    typeof item === 'string' && \n    (item.includes('专业分析:') || item.includes('专业分析：'))\n  )\n  \n  const hasSuggestion = items.some(item => \n    typeof item === 'string' && \n    (item.includes('建议:') || item.includes('建议：'))\n  )\n  \n  // 如果最后一项是\"建议:\"且没有内容，添加默认建议\n  if (items.length > 0) {\n    const lastItem = items[items.length - 1];\n    if (typeof lastItem === 'string' && \n        (lastItem.trim() === '建议:' || lastItem.trim() === '建议：')) {\n      // 添加默认建议\n      items.push('- 建议进一步明确任务的细节和具体要求')\n      items.push('- 考虑提前安排资源，确保任务按时完成')\n    }\n  }\n  \n  // 完全没有建议部分，则添加建议部分\n  if (!hasSuggestion) {\n    items.push('建议:')\n    items.push('- 建议进一步明确任务的细节和具体要求')\n    items.push('- 考虑提前安排资源，确保任务按时完成')\n  }\n  \n  // 完全没有分析部分，则添加分析部分\n  if (!hasAnalysis && !originalText.includes('紧急性') && !originalText.includes('重要性')) {\n    // 在最前面添加分析部分\n    items.unshift('- 根据任务描述进行初步分析，可能需要更多信息')\n    items.unshift('专业分析:')\n  }\n  \n  // 如果有分析和建议标记，但格式不规范，重新组织内容\n  if (hasAnalysis || hasSuggestion) {\n    // 重组内容为标准格式\n    const result = [];\n    let currentSection = null;\n    let hasAddedAnalysisItems = false;\n    let hasAddedSuggestionItems = false;\n    \n    for (let i = 0; i < items.length; i++) {\n      const item = items[i];\n      if (typeof item !== 'string') {\n        result.push(item);\n        continue;\n      }\n      \n      // 检测章节标题\n      if (item.includes('专业分析:') || item.includes('专业分析：')) {\n        currentSection = 'analysis';\n        result.push(item);\n        hasAddedAnalysisItems = false;\n        continue;\n      } else if (item.includes('建议:') || item.includes('建议：')) {\n        currentSection = 'suggestion';\n        result.push(item);\n        hasAddedSuggestionItems = false;\n        continue;\n      }\n      \n      // 添加前缀并分类处理\n      if (currentSection === 'analysis') {\n        if (!item.trim().startsWith('-') && !item.trim().startsWith('•')) {\n          result.push(`- ${item}`);\n        } else {\n          result.push(item);\n        }\n        hasAddedAnalysisItems = true;\n      } else if (currentSection === 'suggestion') {\n        if (!item.trim().startsWith('-') && !item.trim().startsWith('•')) {\n          result.push(`- ${item}`);\n        } else {\n          result.push(item);\n        }\n        hasAddedSuggestionItems = true;\n      } else {\n        result.push(item);\n      }\n    }\n    \n    // 确保每个部分都有内容\n    if (currentSection === 'analysis' && !hasAddedAnalysisItems) {\n      result.push('- 根据任务描述进行初步分析，可能需要更多信息');\n    } else if (currentSection === 'suggestion' && !hasAddedSuggestionItems) {\n      result.push('- 建议进一步明确任务的细节和具体要求');\n      result.push('- 考虑提前安排资源，确保任务按时完成');\n    }\n    \n    return result;\n  }\n  \n  // 如果没有特殊特征，就简单分为分析和建议两部分\n  const analysisItems = [];\n  const suggestionItems = [];\n  \n  // 分类项目\n  items.forEach(item => {\n    if (!item || typeof item !== 'string') return;\n    \n    if (item.includes('紧急性') || item.includes('重要性') || item.includes('可行性')) {\n      analysisItems.push(item);\n    } else if (!item.includes('专业分析') && !item.includes('建议:') && !item.includes('建议：')) {\n      suggestionItems.push(item);\n    }\n  });\n  \n  // 如果分类后没有足够的建议，添加默认建议\n  if (suggestionItems.length === 0) {\n    suggestionItems.push('建议进一步明确任务的细节和具体要求');\n    suggestionItems.push('考虑提前安排资源，确保任务按时完成');\n  }\n  \n  // 构造结果\n  const result = [];\n  \n  result.push('专业分析:');\n  if (analysisItems.length > 0) {\n    result.push(...analysisItems.map(item => item.trim().startsWith('-') ? item : `- ${item}`));\n  } else {\n    result.push('- 根据任务描述进行初步分析，可能需要更多信息');\n  }\n  \n  result.push('建议:');\n  if (suggestionItems.length > 0) {\n    result.push(...suggestionItems.map(item => item.trim().startsWith('-') ? item : `- ${item}`));\n  } else {\n    result.push('- 建议进一步明确任务的细节和具体要求');\n    result.push('- 考虑提前安排资源，确保任务按时完成');\n  }\n  \n  return result;\n}\n\n// 新增：判断是否为当前登录用户\nfunction isCurrentUser(memberId) {\n  if (!currentUser.value || !currentUser.value.id) return false\n  return Number(memberId) === Number(currentUser.value.id)\n}\n</script>\n<style scoped>\n.module-card.modern-tasks { background: var(--bg-color-secondary); border-radius: 14px; box-shadow: 0 4px 24px rgba(0,0,0,0.07); margin-bottom: 24px; padding: 28px 28px 18px 28px; }\n.module-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 18px; }\n.module-title { font-size: 1.25rem; font-weight: 700; color: var(--text-color) !important; margin: 0; }\n.btn-group { display: flex; gap: 14px; }\n.modern-filters { display: flex; gap: 10px; align-items: center; margin-bottom: 10px; }\n.filter-input { width: 200px; }\n.filter-select { width: 110px; }\n.kanban-view.modern-kanban { margin-top: 18px; }\n.card.modern-card { background: var(--bg-color-secondary); border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.04); margin-bottom: 18px; border: none; }\n.card-header.modern-card-header.kanban-col-header {\n  background: var(--bg-color-tertiary) !important; \n  border-radius: 12px 12px 0 0; \n  padding: 12px 18px; \n  font-weight: 700; \n  font-size: 1.1rem;\n  color: var(--text-color);\n  display: flex; \n  align-items: center; \n  gap: 8px;\n}\n.task-card.modern-task-card { background: var(--bg-color-secondary); border: 1px solid var(--border-color); border-radius: 10px; padding: 16px 14px; margin-bottom: 12px; cursor: pointer; transition: box-shadow 0.2s, transform 0.2s; box-shadow: 0 1px 4px rgba(0,0,0,0.04); position: relative; padding-right: 32px; }\n.task-card.modern-task-card:hover { box-shadow: 0 6px 24px rgba(0,0,0,0.10); transform: translateY(-2px) scale(1.02); border-color: var(--primary-color-light); }\n.task-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px; }\n.task-title-main { font-size: 1.08rem; font-weight: 600; color: var(--text-color); }\n.task-meta-row { display: flex; gap: 16px; align-items: center; font-size: 0.95rem; color: var(--text-color-secondary); margin-bottom: 6px; }\n.task-tags { display: flex; gap: 6px; margin-bottom: 6px; }\n.task-description { color: var(--text-color-secondary); font-size: 0.97rem; margin-bottom: 6px; min-height: 18px; }\n.ai-analysis-toggle { margin-top: 4px; margin-bottom: 2px; cursor: pointer; user-select: none; }\n.modern-ai-analysis { \n  background: var(--bg-color-tertiary); \n  border-left: 3px solid var(--primary-color); \n  padding: 8px 12px; \n  border-radius: 4px; \n  margin-top: 4px; \n  font-size: 0.97rem; \n}\n\n.modern-ai-analysis ul {\n  margin: 0;\n  padding-left: 18px;\n}\n\n.modern-ai-analysis li {\n  margin-bottom: 6px;\n  line-height: 1.5;\n}\n\n.modern-ai-analysis code {\n  background: rgba(0,0,0,0.05);\n  padding: 2px 4px;\n  border-radius: 3px;\n  font-family: 'Consolas', monospace;\n}\n\n.modern-ai-analysis strong {\n  font-weight: 600;\n  color: var(--text-color);\n}\n\n.modern-ai-analysis em {\n  font-style: italic;\n  color: var(--text-color-secondary);\n}\n\n.el-dialog.modern-dialog,\n.el-dialog.modern-dialog .el-dialog__body,\n.el-dialog.modern-dialog .el-dialog__footer {\n  background: var(--bg-color-secondary);\n  color: var(--text-color);\n}\n.el-dialog.modern-dialog .el-dialog__body { padding-top: 10px; }\n.el-dialog.modern-dialog .el-dialog__footer { padding-bottom: 10px; }\n.el-form.modern-form .el-form-item { margin-bottom: 14px; }\n.fade-enter-active, .fade-leave-active { transition: opacity 0.2s; }\n.fade-enter-from, .fade-leave-to { opacity: 0; }\n.kanban-col-dot { \n  width: 10px; \n  height: 10px; \n  border-radius: 50%; \n  display: inline-block; \n  margin-right: 4px; \n}\n.kanban-col-dot.待处理 { background: var(--warning-color); }\n.kanban-col-dot.进行中 { background: var(--primary-color); }\n.kanban-col-dot.已完成 { background: var(--success-color); }\n.kanban-badge { margin-left: 4px; vertical-align: middle; }\n.modern-gantt .gantt-desc { text-align: center; color: var(--text-color-tertiary); font-size: 15px; margin-top: 12px; }\n.modern-chart-view .card { background: var(--bg-color-tertiary); }\n.task-progress-row { display: flex; align-items: center; gap: 8px; margin-bottom: 4px; }\n.progress-text { font-size: 12px; color: var(--text-color-tertiary); }\n.member-completion-list { margin: 10px 0; }\n.member-item { display: flex; align-items: center; gap: 10px; margin-bottom: 6px; }\n/* 深色模式下 Element Plus 组件适配 */\n:deep(.el-tag) {\n  background: var(--bg-color-tertiary) !important;\n  color: var(--text-color) !important;\n  border-color: var(--border-color) !important;\n}\n:deep(.el-badge__content) {\n  background-color: var(--primary-color) !important;\n  color: #fff !important;\n}\n:deep(.el-empty) {\n  background: transparent !important;\n  color: var(--text-color-tertiary) !important;\n}\n:deep(.el-progress-bar__outer) {\n  background: var(--bg-color-tertiary) !important;\n}\n:deep(.el-progress-bar__inner) {\n  background: var(--primary-color) !important;\n}\n.modern-ai-analysis .analysis-title {\n  display: block;\n  margin-bottom: 6px;\n  color: var(--primary-color);\n  font-weight: 600;\n}\n\n.modern-ai-analysis .suggestion-title {\n  display: block;\n  margin-top: 10px;\n  margin-bottom: 6px;\n  color: var(--success-color);\n  font-weight: 600;\n}\n\n.modern-ai-analysis .list-bullet {\n  display: inline-block;\n  margin-right: 6px;\n  color: var(--primary-color);\n  font-size: 1.1em;\n}\n\n.task-select {\n  position: absolute;\n  top: 12px;\n  left: 12px;\n  z-index: 5;\n}\n\n.task-body {\n  padding-left: 24px; /* 为复选框留出空间 */\n  cursor: pointer;\n}\n\n.task-card.modern-task-card {\n  position: relative;\n  padding: 16px 14px 16px 14px;\n}\n</style>\n\n<style lang=\"scss\">\n/* 深色模式下的样式修复 */\n[data-theme=\"dark\"] {\n  .module-card, .modern-card, .modern-task-card, .el-dialog {\n    background-color: var(--el-bg-color-page) !important;\n    color: var(--el-text-color-primary) !important;\n    border: 1px solid var(--el-border-color-light) !important;\n  }\n\n  .module-title, .task-title-main, .el-dialog__title {\n    color: var(--el-text-color-primary) !important;\n  }\n  \n  .filter-input .el-input__wrapper, .filter-select .el-input__wrapper {\n    background-color: var(--el-fill-color-light) !important;\n    border-color: var(--el-border-color) !important;\n  }\n  \n  .kanban-col-header {\n    border-bottom-color: var(--el-border-color-light) !important;\n  }\n  \n  .task-meta-row, .task-description, .progress-text, .ai-analysis-toggle span {\n    color: var(--el-text-color-secondary) !important;\n  }\n\n  .modern-ai-analysis {\n    background-color: var(--el-bg-color) !important;\n    border-color: var(--el-border-color) !important;\n  }\n\n  .el-form-item__label {\n    color: var(--el-text-color-secondary) !important;\n  }\n}\n</style> "],"mappings":"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","ignoreList":[]}]}