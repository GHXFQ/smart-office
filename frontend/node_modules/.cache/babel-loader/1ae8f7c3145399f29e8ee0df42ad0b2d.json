{"remainingRequest":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\project\\components\\TasksView.vue?vue&type=script&setup=true&lang=js","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\project\\components\\TasksView.vue","mtime":1748432100435},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\babel.config.js","mtime":1748077811200},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1746431218000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc2V0LmRpZmZlcmVuY2UudjIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zZXQuaW50ZXJzZWN0aW9uLnYyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc2V0LmlzLWRpc2pvaW50LWZyb20udjIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zZXQuaXMtc3Vic2V0LW9mLnYyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc2V0LmlzLXN1cGVyc2V0LW9mLnYyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc2V0LnN5bW1ldHJpYy1kaWZmZXJlbmNlLnYyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc2V0LnVuaW9uLnYyLmpzIjsKaW1wb3J0IHsgcmVmLCB3YXRjaCwgb25Nb3VudGVkLCBjb21wdXRlZCB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IFVzZXJGaWxsZWQsIENhbGVuZGFyLCBDaGF0RG90Um91bmQgfSBmcm9tICdAZWxlbWVudC1wbHVzL2ljb25zLXZ1ZSc7CmltcG9ydCByZXF1ZXN0IGZyb20gJ0AvdXRpbHMvcmVxdWVzdCc7CmltcG9ydCB7IEVsTWVzc2FnZSwgRWxNZXNzYWdlQm94IH0gZnJvbSAnZWxlbWVudC1wbHVzJzsKCi8vIOiOt+WPluW9k+WJjeeZu+W9leeUqOaIt+S/oeaBrwoKZXhwb3J0IGRlZmF1bHQgewogIF9fbmFtZTogJ1Rhc2tzVmlldycsCiAgcHJvcHM6IHsKICAgIHByb2plY3Q6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiAoKSA9PiAoe30pCiAgICB9LAogICAgbWVtYmVyczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gW10KICAgIH0KICB9LAogIHNldHVwKF9fcHJvcHMsIHsKICAgIGV4cG9zZTogX19leHBvc2UKICB9KSB7CiAgICBfX2V4cG9zZSgpOwogICAgY29uc3QgY3VycmVudFVzZXIgPSByZWYobnVsbCk7CiAgICB0cnkgewogICAgICBjdXJyZW50VXNlci52YWx1ZSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKSB8fCAne30nKTsKICAgICAgY29uc29sZS5sb2coJ+W9k+WJjeeZu+W9leeUqOaItzonLCBjdXJyZW50VXNlci52YWx1ZSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoJ+ino+aekOeUqOaIt+S/oeaBr+Wksei0pTonLCBlKTsKICAgIH0KICAgIGNvbnN0IHByb3BzID0gX19wcm9wczsKICAgIGNvbnN0IHNlYXJjaCA9IHJlZignJyk7CiAgICBjb25zdCBmaWx0ZXJBc3NpZ25lZSA9IHJlZignJyk7CiAgICBjb25zdCBmaWx0ZXJQcmlvcml0eSA9IHJlZignJyk7CiAgICBjb25zdCBmaWx0ZXJTdGF0dXMgPSByZWYoJycpOwogICAgY29uc3Qgc2hvd0FkZFRhc2sgPSByZWYoZmFsc2UpOwogICAgY29uc3Qgc2hvd0RldGFpbCA9IHJlZihmYWxzZSk7CiAgICBjb25zdCBjdXJyZW50VGFzayA9IHJlZihudWxsKTsKICAgIGNvbnN0IHNlbGVjdGVkVGFza3MgPSByZWYoW10pOwogICAgY29uc3QgcHJvamVjdE1lbWJlcnMgPSByZWYoW10pOwogICAgY29uc3QgbmV3VGFzayA9IHJlZih7CiAgICAgIHRpdGxlOiAnJywKICAgICAgYXNzaWduZWU6ICcnLAogICAgICBwcmlvcml0eTogJ+S4rScsCiAgICAgIGR1ZURhdGU6ICcnLAogICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgIHRhZ3M6ICcnLAogICAgICBzdGF0dXM6ICd0b2RvJywKICAgICAgcHJvZ3Jlc3M6IDAsCiAgICAgIGNvbXBsZXRlZDogMCwKICAgICAgdG90YWw6IDEKICAgIH0pOwoKICAgIC8vIOaJgOacieS7u+WKoeaVsOaNrgogICAgY29uc3QgdGFza3MgPSByZWYoW10pOwoKICAgIC8vIOaWsOWinu+8muS7u+WKoeWujOaIkOi/m+W6puaVsOaNrgogICAgY29uc3QgdGFza0NvbXBsZXRpb25zID0gcmVmKHt9KTsgLy8geyBbdGFza0lkXTogeyB0b3RhbCwgY29tcGxldGVkLCBtZW1iZXJzOiBbe2lkLCBuYW1lLCBjb21wbGV0ZWR9XSB9IH0KCiAgICBjb25zdCBrYW5iYW4gPSBjb21wdXRlZCgoKSA9PiBbewogICAgICBuYW1lOiAn5b6F5aSE55CGJywKICAgICAgdGFza3M6IHRhc2tzLnZhbHVlLmZpbHRlcih0ID0+IHQuc3RhdHVzID09PSAndG9kbycgfHwgdC5zdGF0dXMgPT09ICflvoXlpITnkIYnKQogICAgfSwgewogICAgICBuYW1lOiAn6L+b6KGM5LitJywKICAgICAgdGFza3M6IHRhc2tzLnZhbHVlLmZpbHRlcih0ID0+IHQuc3RhdHVzID09PSAnaW4tcHJvZ3Jlc3MnIHx8IHQuc3RhdHVzID09PSAn6L+b6KGM5LitJykKICAgIH0sIHsKICAgICAgbmFtZTogJ+W3suWujOaIkCcsCiAgICAgIHRhc2tzOiB0YXNrcy52YWx1ZS5maWx0ZXIodCA9PiB0LnN0YXR1cyA9PT0gJ2RvbmUnIHx8IHQuc3RhdHVzID09PSAn5bey5a6M5oiQJykKICAgIH1dKTsKICAgIGNvbnN0IHJlZnJlc2hpbmdBaSA9IHJlZihmYWxzZSk7CgogICAgLy8g6I635Y+W5Lu75Yqh5YiX6KGoCiAgICBmdW5jdGlvbiBmZXRjaFRhc2tzKCkgewogICAgICBpZiAoIXByb3BzLnByb2plY3QgfHwgIXByb3BzLnByb2plY3QuaWQpIHJldHVybjsKICAgICAgcmVxdWVzdC5nZXQoYC9hcGkvdGFza3MvP3Byb2plY3Q9JHtwcm9wcy5wcm9qZWN0LmlkfWApLnRoZW4ocmVzID0+IHsKICAgICAgICAvLyDnu5/kuIDovazmjaLku7vliqHlrZfmrrUKICAgICAgICBjb25zdCByYXdUYXNrcyA9IEFycmF5LmlzQXJyYXkocmVzLmRhdGEpID8gcmVzLmRhdGEgOiByZXMuZGF0YS5kYXRhIHx8IFtdOwogICAgICAgIHRhc2tzLnZhbHVlID0gcmF3VGFza3MubWFwKHQgPT4gKHsKICAgICAgICAgIC4uLnQsCiAgICAgICAgICBkdWVEYXRlOiB0LmR1ZV9kYXRlIHx8IHQuZHVlRGF0ZSB8fCAnJywKICAgICAgICAgIHByaW9yaXR5OiB0LnByaW9yaXR5ID09PSAnaGlnaCcgPyAn6auYJyA6IHQucHJpb3JpdHkgPT09ICdsb3cnID8gJ+S9jicgOiB0LnByaW9yaXR5ID09PSAnbWVkaXVtJyA/ICfkuK0nIDogdC5wcmlvcml0eSB8fCAnJywKICAgICAgICAgIHByaW9yaXR5VHlwZTogdC5wcmlvcml0eSA9PT0gJ2hpZ2gnIHx8IHQucHJpb3JpdHkgPT09ICfpq5gnID8gJ2RhbmdlcicgOiB0LnByaW9yaXR5ID09PSAnbG93JyB8fCB0LnByaW9yaXR5ID09PSAn5L2OJyA/ICdpbmZvJyA6ICd3YXJuaW5nJwogICAgICAgIH0pKTsKICAgICAgICAvLyDoh6rliqhBSeWIhuaekAogICAgICAgIHRhc2tzLnZhbHVlLmZvckVhY2godGFzayA9PiB7CiAgICAgICAgICBpZiAoIXRhc2suYWkgfHwgdGFzay5haS5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgZ2V0VGFza0FpQW5hbHlzaXModGFzay5pZCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQoKICAgIC8vIOiOt+WPluS7u+WKoeWujOaIkOi/m+W6pgogICAgZnVuY3Rpb24gZmV0Y2hUYXNrQ29tcGxldGlvbnModGFza0lkKSB7CiAgICAgIGlmICghdGFza0lkKSByZXR1cm47CiAgICAgIHJlcXVlc3QuZ2V0KGAvYXBpL3Rhc2stY29tcGxldGlvbnMvP3Rhc2s9JHt0YXNrSWR9YCkudGhlbihyZXMgPT4gewogICAgICAgIGNvbnN0IG1lbWJlcnMgPSBBcnJheS5pc0FycmF5KHJlcy5kYXRhKSA/IHJlcy5kYXRhIDogcmVzLmRhdGEuZGF0YSB8fCBbXTsKCiAgICAgICAgLy8g5ZCI5bm25ZCO56uv5pWw5o2u5ZKM6aG555uu5oiQ5ZGY5pWw5o2u77yM56Gu5L+d5omA5pyJ5oiQ5ZGY6YO95Zyo5YiX6KGo5Lit5LiU5LiN6YeN5aSNCiAgICAgICAgY29uc3QgYWxsTWVtYmVycyA9IFsuLi5tZW1iZXJzXTsKICAgICAgICBwcm9qZWN0TWVtYmVycy52YWx1ZS5mb3JFYWNoKG0gPT4gewogICAgICAgICAgaWYgKCFhbGxNZW1iZXJzLnNvbWUoaXRlbSA9PiBpdGVtLmlkID09PSBtLmlkKSkgewogICAgICAgICAgICBhbGxNZW1iZXJzLnB1c2goewogICAgICAgICAgICAgIGlkOiBtLmlkLAogICAgICAgICAgICAgIG5hbWU6IG0ubmFtZSwKICAgICAgICAgICAgICBjb21wbGV0ZWQ6IGZhbHNlLAogICAgICAgICAgICAgIGNvbXBsZXRpb25JZDogdW5kZWZpbmVkIC8vIOaWsOWinu+8jOacquacieWQjuerr+iusOW9lQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICAvLyDljrvph43vvIjpmLLmraLlkI7nq6/mlbDmja7mnKzouqvmnInph43lpI3vvIkKICAgICAgICBjb25zdCB1bmlxdWVNZW1iZXJzID0gW107CiAgICAgICAgY29uc3Qgc2VlblVzZXJJZHMgPSBuZXcgU2V0KCk7CiAgICAgICAgZm9yIChjb25zdCBtIG9mIGFsbE1lbWJlcnMpIHsKICAgICAgICAgIHZhciBfbSR1c2VyOwogICAgICAgICAgLy8g5YW85a655ZCO56uv6L+U5Zue57uT5p6E77yM5LyY5YWI55SoIHVzZXIuaWQKICAgICAgICAgIGNvbnN0IHVzZXJJZCA9IG0udXNlcklkIHx8ICgoX20kdXNlciA9IG0udXNlcikgPT09IG51bGwgfHwgX20kdXNlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogX20kdXNlci5pZCkgfHwgbS5pZDsKICAgICAgICAgIGlmICghc2VlblVzZXJJZHMuaGFzKHVzZXJJZCkpIHsKICAgICAgICAgICAgdmFyIF9tJHVzZXIyLCBfbSR1c2VyMzsKICAgICAgICAgICAgdW5pcXVlTWVtYmVycy5wdXNoKHsKICAgICAgICAgICAgICBpZDogbS5pZCwKICAgICAgICAgICAgICAvLyBQcm9qZWN0TWVtYmVyIGlkCiAgICAgICAgICAgICAgbmFtZTogbS5uYW1lIHx8ICgoX20kdXNlcjIgPSBtLnVzZXIpID09PSBudWxsIHx8IF9tJHVzZXIyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfbSR1c2VyMi51c2VybmFtZSkgfHwgKChfbSR1c2VyMyA9IG0udXNlcikgPT09IG51bGwgfHwgX20kdXNlcjMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9tJHVzZXIzLmVtYWlsKSB8fCAnJywKICAgICAgICAgICAgICBjb21wbGV0ZWQ6IG0uY29tcGxldGVkLAogICAgICAgICAgICAgIGNvbXBsZXRpb25JZDogbS5jb21wbGV0aW9uSWQgfHwgbS5jb21wbGV0aW9uX2lkIHx8IG0uaWQsCiAgICAgICAgICAgICAgdXNlcklkOiB1c2VySWQKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHNlZW5Vc2VySWRzLmFkZCh1c2VySWQpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0YXNrQ29tcGxldGlvbnMudmFsdWVbdGFza0lkXSA9IHsKICAgICAgICAgIHRvdGFsOiB1bmlxdWVNZW1iZXJzLmxlbmd0aCwKICAgICAgICAgIGNvbXBsZXRlZDogdW5pcXVlTWVtYmVycy5maWx0ZXIobSA9PiBtLmNvbXBsZXRlZCkubGVuZ3RoLAogICAgICAgICAgbWVtYmVyczogdW5pcXVlTWVtYmVycwogICAgICAgIH07CiAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgY29uc29sZS5lcnJvcign6I635Y+W5Lu75Yqh5a6M5oiQ6L+b5bqm5aSx6LSlOicsIGVycik7CiAgICAgICAgLy8g5aaC5p6cQVBJ5aSx6LSl77yM5L2/55So6buY6K6k5YC8CiAgICAgICAgdGFza0NvbXBsZXRpb25zLnZhbHVlW3Rhc2tJZF0gPSB7CiAgICAgICAgICB0b3RhbDogcHJvamVjdE1lbWJlcnMudmFsdWUubGVuZ3RoIHx8IDEsCiAgICAgICAgICBjb21wbGV0ZWQ6IDAsCiAgICAgICAgICBtZW1iZXJzOiBwcm9qZWN0TWVtYmVycy52YWx1ZS5tYXAobSA9PiAoewogICAgICAgICAgICBpZDogbS5pZCwKICAgICAgICAgICAgbmFtZTogbS5uYW1lLAogICAgICAgICAgICBjb21wbGV0ZWQ6IGZhbHNlCiAgICAgICAgICB9KSkKICAgICAgICB9OwogICAgICB9KTsKICAgIH0KCiAgICAvLyDmlrDlop7vvJrojrflj5bku7vliqHlrozmiJDnmb7liIbmr5QKICAgIGZ1bmN0aW9uIGdldFRhc2tDb21wbGV0aW9uUGVyY2VudGFnZSh0YXNrKSB7CiAgICAgIHZhciBfdGFza0NvbXBsZXRpb25zJHZhbHU7CiAgICAgIGlmICghdGFzayB8fCAhdGFzay5pZCkgcmV0dXJuIDA7CgogICAgICAvLyDlpoLmnpzmnInlkI7nq6/mlbDmja7vvIzkvb/nlKjlkI7nq6/mlbDmja4KICAgICAgaWYgKChfdGFza0NvbXBsZXRpb25zJHZhbHUgPSB0YXNrQ29tcGxldGlvbnMudmFsdWVbdGFzay5pZF0pICE9PSBudWxsICYmIF90YXNrQ29tcGxldGlvbnMkdmFsdSAhPT0gdm9pZCAwICYmIF90YXNrQ29tcGxldGlvbnMkdmFsdS50b3RhbCkgewogICAgICAgIHZhciBfdGFza0NvbXBsZXRpb25zJHZhbHUyLCBfdGFza0NvbXBsZXRpb25zJHZhbHUzOwogICAgICAgIHJldHVybiBNYXRoLnJvdW5kKDEwMCAqICgoKF90YXNrQ29tcGxldGlvbnMkdmFsdTIgPSB0YXNrQ29tcGxldGlvbnMudmFsdWVbdGFzay5pZF0pID09PSBudWxsIHx8IF90YXNrQ29tcGxldGlvbnMkdmFsdTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90YXNrQ29tcGxldGlvbnMkdmFsdTIuY29tcGxldGVkKSB8fCAwKSAvICgoX3Rhc2tDb21wbGV0aW9ucyR2YWx1MyA9IHRhc2tDb21wbGV0aW9ucy52YWx1ZVt0YXNrLmlkXSkgPT09IG51bGwgfHwgX3Rhc2tDb21wbGV0aW9ucyR2YWx1MyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Rhc2tDb21wbGV0aW9ucyR2YWx1My50b3RhbCkpOwogICAgICB9CgogICAgICAvLyDlkKbliJnkvb/nlKjpu5jorqTlgLwKICAgICAgcmV0dXJuIDA7CiAgICB9CgogICAgLy8g5paw5aKe77ya6I635Y+W5Lu75Yqh5a6M5oiQ5paH5pysCiAgICBmdW5jdGlvbiBnZXRUYXNrQ29tcGxldGlvblRleHQodGFzaykgewogICAgICBpZiAoIXRhc2sgfHwgIXRhc2suaWQpIHsKICAgICAgICAvLyDlpoLmnpzmsqHmnInku7vliqHvvIzmmL7npLrpu5jorqTlgLwKICAgICAgICByZXR1cm4gYDAvJHtwcm9qZWN0TWVtYmVycy52YWx1ZS5sZW5ndGggfHwgMX3kurrlrozmiJBgOwogICAgICB9CgogICAgICAvLyDlpoLmnpzmnInlkI7nq6/mlbDmja7vvIzkvb/nlKjlkI7nq6/mlbDmja4KICAgICAgaWYgKHRhc2tDb21wbGV0aW9ucy52YWx1ZVt0YXNrLmlkXSkgewogICAgICAgIHZhciBfdGFza0NvbXBsZXRpb25zJHZhbHU0LCBfdGFza0NvbXBsZXRpb25zJHZhbHU1OwogICAgICAgIHJldHVybiBgJHsoKF90YXNrQ29tcGxldGlvbnMkdmFsdTQgPSB0YXNrQ29tcGxldGlvbnMudmFsdWVbdGFzay5pZF0pID09PSBudWxsIHx8IF90YXNrQ29tcGxldGlvbnMkdmFsdTQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90YXNrQ29tcGxldGlvbnMkdmFsdTQuY29tcGxldGVkKSB8fCAwfS8keygoX3Rhc2tDb21wbGV0aW9ucyR2YWx1NSA9IHRhc2tDb21wbGV0aW9ucy52YWx1ZVt0YXNrLmlkXSkgPT09IG51bGwgfHwgX3Rhc2tDb21wbGV0aW9ucyR2YWx1NSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Rhc2tDb21wbGV0aW9ucyR2YWx1NS50b3RhbCkgfHwgcHJvamVjdE1lbWJlcnMudmFsdWUubGVuZ3RoIHx8IDF95Lq65a6M5oiQYDsKICAgICAgfQoKICAgICAgLy8g5ZCm5YiZ5L2/55So6buY6K6k5YC8CiAgICAgIHJldHVybiBgMC8ke3Byb2plY3RNZW1iZXJzLnZhbHVlLmxlbmd0aCB8fCAxfeS6uuWujOaIkGA7CiAgICB9CgogICAgLy8g5Zyo5Lu75Yqh5YiX6KGo5Yqg6L295ZCO77yM5om56YeP6I635Y+W5omA5pyJ5Lu75Yqh55qE5a6M5oiQ6L+b5bqmCiAgICB3YXRjaCh0YXNrcywgdmFsID0+IHsKICAgICAgKHZhbCB8fCBbXSkuZm9yRWFjaCh0YXNrID0+IGZldGNoVGFza0NvbXBsZXRpb25zKHRhc2suaWQpKTsKICAgIH0sIHsKICAgICAgaW1tZWRpYXRlOiB0cnVlCiAgICB9KTsKCiAgICAvLyDmlrDlop7vvJrkuLrmsqHmnIkgVGFza0NvbXBsZXRpb24g6K6w5b2V55qE5oiQ5ZGY5qCH6K6w5a6M5oiQCiAgICBmdW5jdGlvbiBtYXJrQ29tcGxldGVGb3JNZW1iZXIodGFza0lkLCBtZW1iZXJJZCkgewogICAgICBpZiAoIXRhc2tJZCB8fCAhbWVtYmVySWQpIHJldHVybjsKICAgICAgY29uc29sZS5sb2coJ+S4uuaWsOaIkOWRmOagh+iusOS7u+WKoeWujOaIkDonLCB0YXNrSWQsIG1lbWJlcklkKTsKCiAgICAgIC8vIOWIm+W7uuaWsOeahCBUYXNrQ29tcGxldGlvbiDorrDlvZUKICAgICAgcmVxdWVzdC5wb3N0KCcvYXBpL3Rhc2stY29tcGxldGlvbnMvJywgewogICAgICAgIHRhc2s6IHRhc2tJZCwKICAgICAgICBtZW1iZXJfaWQ6IG1lbWJlcklkLAogICAgICAgIGNvbXBsZXRlZDogdHJ1ZSwKICAgICAgICBjb21wbGV0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKQogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICBFbE1lc3NhZ2Uuc3VjY2Vzcygn5bey5qCH6K6w5Li65a6M5oiQJyk7CiAgICAgICAgLy8g5pu05paw5pys5Zyw54q25oCBCiAgICAgICAgaWYgKCF0YXNrQ29tcGxldGlvbnMudmFsdWVbdGFza0lkXSkgewogICAgICAgICAgLy8g5Yid5aeL5YyW5Lu75Yqh5a6M5oiQ54q25oCB77yM5L2/55So6aG555uu5oiQ5ZGY5oC75pWwCiAgICAgICAgICB0YXNrQ29tcGxldGlvbnMudmFsdWVbdGFza0lkXSA9IHsKICAgICAgICAgICAgdG90YWw6IHByb2plY3RNZW1iZXJzLnZhbHVlLmxlbmd0aCwKICAgICAgICAgICAgY29tcGxldGVkOiAxLAogICAgICAgICAgICBtZW1iZXJzOiBwcm9qZWN0TWVtYmVycy52YWx1ZS5tYXAobSA9PiAoewogICAgICAgICAgICAgIGlkOiBtLmlkLAogICAgICAgICAgICAgIG5hbWU6IG0ubmFtZSwKICAgICAgICAgICAgICBjb21wbGV0ZWQ6IG0uaWQgPT09IG1lbWJlcklkLAogICAgICAgICAgICAgIGNvbXBsZXRpb25JZDogdW5kZWZpbmVkCiAgICAgICAgICAgIH0pKQogICAgICAgICAgfTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8g5pu05paw5bey5pyJ55qE5Lu75Yqh5a6M5oiQ54q25oCBCiAgICAgICAgICB0YXNrQ29tcGxldGlvbnMudmFsdWVbdGFza0lkXS5jb21wbGV0ZWQrKzsKICAgICAgICAgIC8vIOehruS/nSBtZW1iZXJzIOaVsOe7hOWMheWQq+aJgOaciemhueebruaIkOWRmAogICAgICAgICAgY29uc3QgZXhpc3RpbmdNZW1iZXJJZHMgPSB0YXNrQ29tcGxldGlvbnMudmFsdWVbdGFza0lkXS5tZW1iZXJzLm1hcChtID0+IG0uaWQpOwogICAgICAgICAgcHJvamVjdE1lbWJlcnMudmFsdWUuZm9yRWFjaChtID0+IHsKICAgICAgICAgICAgaWYgKCFleGlzdGluZ01lbWJlcklkcy5pbmNsdWRlcyhtLmlkKSkgewogICAgICAgICAgICAgIHRhc2tDb21wbGV0aW9ucy52YWx1ZVt0YXNrSWRdLm1lbWJlcnMucHVzaCh7CiAgICAgICAgICAgICAgICBpZDogbS5pZCwKICAgICAgICAgICAgICAgIG5hbWU6IG0ubmFtZSwKICAgICAgICAgICAgICAgIGNvbXBsZXRlZDogbS5pZCA9PT0gbWVtYmVySWQsCiAgICAgICAgICAgICAgICBjb21wbGV0aW9uSWQ6IHVuZGVmaW5lZAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIC8vIOabtOaWsOW9k+WJjeaIkOWRmOeahOWujOaIkOeKtuaAgQogICAgICAgICAgY29uc3QgbWVtYmVyID0gdGFza0NvbXBsZXRpb25zLnZhbHVlW3Rhc2tJZF0ubWVtYmVycy5maW5kKG0gPT4gbS5pZCA9PT0gbWVtYmVySWQpOwogICAgICAgICAgaWYgKG1lbWJlcikgewogICAgICAgICAgICBtZW1iZXIuY29tcGxldGVkID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICAgIC8vIOehruS/neaAu+aVsOato+ehrgogICAgICAgICAgdGFza0NvbXBsZXRpb25zLnZhbHVlW3Rhc2tJZF0udG90YWwgPSB0YXNrQ29tcGxldGlvbnMudmFsdWVbdGFza0lkXS5tZW1iZXJzLmxlbmd0aDsKICAgICAgICB9CgogICAgICAgIC8vIOmHjeaWsOiOt+WPluacgOaWsOaVsOaNrgogICAgICAgIGZldGNoVGFza0NvbXBsZXRpb25zKHRhc2tJZCk7CiAgICAgICAgLy8g5qOA5p+l5piv5ZCm5omA5pyJ5oiQ5ZGY6YO95a6M5oiQ77yM6Ieq5Yqo6K6+5Li65bey5a6M5oiQCiAgICAgICAgY29uc3QgdGMgPSB0YXNrQ29tcGxldGlvbnMudmFsdWVbdGFza0lkXTsKICAgICAgICBpZiAodGMgJiYgdGMuY29tcGxldGVkID09PSB0Yy50b3RhbCAmJiB0Yy50b3RhbCA+IDApIHsKICAgICAgICAgIHVwZGF0ZVRhc2tTdGF0dXNUb0RvbmUodGFza0lkKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgY29uc29sZS5lcnJvcign5Yib5bu65Lu75Yqh5a6M5oiQ6K6w5b2V5aSx6LSlOicsIGVycik7CiAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfmk43kvZzlpLHotKXvvIzor7fph43or5UnKTsKICAgICAgfSk7CiAgICB9CgogICAgLy8g5oiQ5ZGY54K55Ye7IuWujOaIkCLmjInpkq4KICAgIGZ1bmN0aW9uIG1hcmtDb21wbGV0ZSh0YXNrSWQsIG1lbWJlcklkKSB7CiAgICAgIHZhciBfdGFza0NvbXBsZXRpb25zJHZhbHU2OwogICAgICBjb25zdCB0YyA9ICgoKF90YXNrQ29tcGxldGlvbnMkdmFsdTYgPSB0YXNrQ29tcGxldGlvbnMudmFsdWVbdGFza0lkXSkgPT09IG51bGwgfHwgX3Rhc2tDb21wbGV0aW9ucyR2YWx1NiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Rhc2tDb21wbGV0aW9ucyR2YWx1Ni5tZW1iZXJzKSB8fCBbXSkuZmluZChtID0+IG0uaWQgPT09IG1lbWJlcklkKTsKICAgICAgaWYgKCF0YyB8fCB0Yy5jb21wbGV0ZWQpIHJldHVybjsKICAgICAgY29uc29sZS5sb2coJ+agh+iusOS7u+WKoeWujOaIkDonLCB0YXNrSWQsIG1lbWJlcklkLCB0Yy5jb21wbGV0aW9uSWQpOwoKICAgICAgLy8g56uL5Y2z5pu05paw5pys5Zyw54q25oCB77yM5o+Q5L6b5Y2z5pe25Y+N6aaICiAgICAgIHRjLmNvbXBsZXRlZCA9IHRydWU7CiAgICAgIHRhc2tDb21wbGV0aW9ucy52YWx1ZVt0YXNrSWRdLmNvbXBsZXRlZCsrOwoKICAgICAgLy8g56Gu5L+d5oC75pWw5q2j56GuCiAgICAgIHRhc2tDb21wbGV0aW9ucy52YWx1ZVt0YXNrSWRdLnRvdGFsID0gTWF0aC5tYXgodGFza0NvbXBsZXRpb25zLnZhbHVlW3Rhc2tJZF0udG90YWwsIHRhc2tDb21wbGV0aW9ucy52YWx1ZVt0YXNrSWRdLm1lbWJlcnMubGVuZ3RoLCBwcm9qZWN0TWVtYmVycy52YWx1ZS5sZW5ndGgpOwoKICAgICAgLy8g54S25ZCO5Y+R6YCB6K+35rGC5Yiw5ZCO56uvCiAgICAgIHJlcXVlc3QucGF0Y2goYC9hcGkvdGFzay1jb21wbGV0aW9ucy8ke3RjLmNvbXBsZXRpb25JZH0vYCwgewogICAgICAgIGNvbXBsZXRlZDogdHJ1ZSwKICAgICAgICBjb21wbGV0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKQogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICBFbE1lc3NhZ2Uuc3VjY2Vzcygn5bey5qCH6K6w5Li65a6M5oiQJyk7CiAgICAgICAgLy8g6YeN5paw6I635Y+W5pyA5paw5pWw5o2uCiAgICAgICAgZmV0Y2hUYXNrQ29tcGxldGlvbnModGFza0lkKTsKICAgICAgICAvLyDmo4Dmn6XmmK/lkKbmiYDmnInmiJDlkZjpg73lrozmiJDvvIzoh6rliqjorr7kuLrlt7LlrozmiJAKICAgICAgICBjb25zdCB0Y2MgPSB0YXNrQ29tcGxldGlvbnMudmFsdWVbdGFza0lkXTsKICAgICAgICBpZiAodGNjICYmIHRjYy5jb21wbGV0ZWQgPT09IHRjYy50b3RhbCAmJiB0Y2MudG90YWwgPiAwKSB7CiAgICAgICAgICB1cGRhdGVUYXNrU3RhdHVzVG9Eb25lKHRhc2tJZCk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+agh+iusOWujOaIkOWksei0pTonLCBlcnIpOwogICAgICAgIEVsTWVzc2FnZS5lcnJvcign5pON5L2c5aSx6LSl77yM5L2G55WM6Z2i5bey5pu05pawJyk7CiAgICAgICAgLy8g5aSx6LSl5pe25LiN5Zue5rua5pys5Zyw54q25oCB77yM5L+d5oyB55So5oi35L2T6aqMCiAgICAgIH0pOwogICAgfQoKICAgIC8vIOaWsOWinu+8muiHquWKqOWwhuS7u+WKoeeKtuaAgeiuvuS4uuW3suWujOaIkAogICAgZnVuY3Rpb24gdXBkYXRlVGFza1N0YXR1c1RvRG9uZSh0YXNrSWQpIHsKICAgICAgLy8g5pys5Zyw5pu05pawCiAgICAgIGNvbnN0IHRhc2sgPSB0YXNrcy52YWx1ZS5maW5kKHQgPT4gdC5pZCA9PT0gdGFza0lkKTsKICAgICAgaWYgKHRhc2spIHRhc2suc3RhdHVzID0gJ2RvbmUnOwogICAgICAvLyDlkI7nq6/mm7TmlrAKICAgICAgcmVxdWVzdC5wYXRjaChgL2FwaS90YXNrcy8ke3Rhc2tJZH0vYCwgewogICAgICAgIHN0YXR1czogJ2RvbmUnCiAgICAgIH0pOwogICAgfQoKICAgIC8vIOaWsOW7uuS7u+WKoQogICAgZnVuY3Rpb24gc2F2ZVRhc2soKSB7CiAgICAgIGlmICghbmV3VGFzay52YWx1ZS50aXRsZSB8fCAhbmV3VGFzay52YWx1ZS5hc3NpZ25lZSkgewogICAgICAgIEVsTWVzc2FnZS5lcnJvcign6K+35aGr5YaZ5Lu75Yqh5ZCN56ew5ZKM6LSf6LSj5Lq6Jyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIC8vIOebtOaOpeeUqGFzc2lnbmVl5Li6UHJvamVjdE1lbWJlcueahGlkCiAgICAgIGNvbnN0IGFzc2lnbmVlX2lkID0gbmV3VGFzay52YWx1ZS5hc3NpZ25lZTsKICAgICAgaWYgKCFhc3NpZ25lZV9pZCkgewogICAgICAgIEVsTWVzc2FnZS5lcnJvcign6LSf6LSj5Lq65peg5pWIJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvbnN0IHBheWxvYWQgPSB7CiAgICAgICAgcHJvamVjdDogcHJvcHMucHJvamVjdC5pZCwKICAgICAgICB0aXRsZTogbmV3VGFzay52YWx1ZS50aXRsZSwKICAgICAgICBkZXNjcmlwdGlvbjogbmV3VGFzay52YWx1ZS5kZXNjcmlwdGlvbiwKICAgICAgICBhc3NpZ25lZV9pZDogYXNzaWduZWVfaWQsCiAgICAgICAgZHVlX2RhdGU6IG5ld1Rhc2sudmFsdWUuZHVlRGF0ZSwKICAgICAgICBwcmlvcml0eTogbmV3VGFzay52YWx1ZS5wcmlvcml0eSA9PT0gJ+mrmCcgPyAnaGlnaCcgOiBuZXdUYXNrLnZhbHVlLnByaW9yaXR5ID09PSAnbG93JyA/ICdsb3cnIDogJ21lZGl1bScsCiAgICAgICAgc3RhdHVzOiAndG9kbycsCiAgICAgICAgdGFnczogbmV3VGFzay52YWx1ZS50YWdzCiAgICAgIH07CiAgICAgIHJlcXVlc3QucG9zdCgnL2FwaS90YXNrcy8nLCBwYXlsb2FkKS50aGVuKCgpID0+IHsKICAgICAgICBFbE1lc3NhZ2Uuc3VjY2Vzcygn5Lu75Yqh5Yib5bu65oiQ5YqfJyk7CiAgICAgICAgc2hvd0FkZFRhc2sudmFsdWUgPSBmYWxzZTsKICAgICAgICBmZXRjaFRhc2tzKCk7CiAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+S7u+WKoeWIm+W7uuWksei0pScpOwogICAgICB9KTsKICAgIH0KCiAgICAvLyDov4fmu6QKICAgIGZ1bmN0aW9uIGZpbHRlcmVkVGFza3ModGFza0FycikgewogICAgICByZXR1cm4gdGFza0Fyci5maWx0ZXIodCA9PiB7CiAgICAgICAgY29uc3QgbWF0Y2hTZWFyY2ggPSAhc2VhcmNoLnZhbHVlIHx8IHQudGl0bGUuaW5jbHVkZXMoc2VhcmNoLnZhbHVlKSB8fCB0LmRlc2NyaXB0aW9uICYmIHQuZGVzY3JpcHRpb24uaW5jbHVkZXMoc2VhcmNoLnZhbHVlKTsKICAgICAgICBjb25zdCBtYXRjaEFzc2lnbmVlID0gIWZpbHRlckFzc2lnbmVlLnZhbHVlIHx8IHQuYXNzaWduZWUgJiYgdC5hc3NpZ25lZS51c2VyICYmIHQuYXNzaWduZWUudXNlci51c2VybmFtZSA9PT0gZmlsdGVyQXNzaWduZWUudmFsdWU7CiAgICAgICAgLy8g5LyY5YWI57qn562b6YCJ77ya55u05o6l55So5Lit5paH5Yy56YWNCiAgICAgICAgY29uc3QgbWF0Y2hQcmlvcml0eSA9ICFmaWx0ZXJQcmlvcml0eS52YWx1ZSB8fCB0LnByaW9yaXR5ID09PSBmaWx0ZXJQcmlvcml0eS52YWx1ZTsKICAgICAgICAvLyDnirbmgIHnrZvpgInvvJrnm7TmjqXnlKjkuK3mlofljLnphY0KICAgICAgICBjb25zdCBtYXRjaFN0YXR1cyA9ICFmaWx0ZXJTdGF0dXMudmFsdWUgfHwgdC5zdGF0dXMgPT09IGZpbHRlclN0YXR1cy52YWx1ZTsKICAgICAgICByZXR1cm4gbWF0Y2hTZWFyY2ggJiYgbWF0Y2hBc3NpZ25lZSAmJiBtYXRjaFByaW9yaXR5ICYmIG1hdGNoU3RhdHVzOwogICAgICB9KTsKICAgIH0KCiAgICAvLyDor6bmg4XlvLnnqpcKICAgIGZ1bmN0aW9uIG9wZW5EZXRhaWwodGFzaykgewogICAgICAvLyDor6bmg4XlvLnnqpfkuZ/pnIDovazmjaIgcHJpb3JpdHlUeXBlCiAgICAgIGN1cnJlbnRUYXNrLnZhbHVlID0gewogICAgICAgIC4uLnRhc2ssCiAgICAgICAgcHJpb3JpdHlUeXBlOiB0YXNrLnByaW9yaXR5VHlwZSB8fCAodGFzay5wcmlvcml0eSA9PT0gJ+mrmCcgfHwgdGFzay5wcmlvcml0eSA9PT0gJ2hpZ2gnID8gJ2RhbmdlcicgOiB0YXNrLnByaW9yaXR5ID09PSAn5L2OJyB8fCB0YXNrLnByaW9yaXR5ID09PSAnbG93JyA/ICdpbmZvJyA6ICd3YXJuaW5nJyksCiAgICAgICAgLy8g5Yqo5oCB6I635Y+WQUnliIbmnpDnu5PmnpzvvIzogIzkuI3mmK/kvb/nlKjpnZnmgIHmlbDmja4KICAgICAgICBhaTogdGFzay5haSB8fCBbXQogICAgICB9OwogICAgICAvLyDmmL7npLror6bmg4XlvLnnqpcKICAgICAgc2hvd0RldGFpbC52YWx1ZSA9IHRydWU7CiAgICAgIC8vIOWmguaenOayoeaciUFJ5YiG5p6Q5pWw5o2u77yM6Ieq5Yqo6I635Y+WCiAgICAgIGlmICghdGFzay5haSB8fCB0YXNrLmFpLmxlbmd0aCA9PT0gMCkgewogICAgICAgIGdldFRhc2tBaUFuYWx5c2lzKHRhc2suaWQpOwogICAgICB9CiAgICB9CgogICAgLy8g5paw5aKe77ya6I635Y+W5Lu75YqhQUnliIbmnpAKICAgIGZ1bmN0aW9uIGdldFRhc2tBaUFuYWx5c2lzKHRhc2tJZCkgewogICAgICBpZiAoIXRhc2tJZCkgcmV0dXJuOwogICAgICBjb25zb2xlLmxvZygn6I635Y+W5Lu75YqhQUnliIbmnpA6JywgdGFza0lkKTsKCiAgICAgIC8vIOiuvue9ruWvueW6lOS7u+WKoeeahOWKoOi9veeKtuaAgQogICAgICBjb25zdCB0YXNrID0gdGFza3MudmFsdWUuZmluZCh0ID0+IHQuaWQgPT09IHRhc2tJZCk7CiAgICAgIGlmICh0YXNrKSB7CiAgICAgICAgdGFzay5fYWlMb2FkaW5nID0gdHJ1ZTsKICAgICAgfQogICAgICByZXF1ZXN0LmdldChgL2FwaS90YXNrcy8ke3Rhc2tJZH0vYWlfYW5hbHlzaXMvYCkudGhlbihyZXMgPT4gewogICAgICAgIHZhciBfcmVzJGRhdGE7CiAgICAgICAgY29uc3Qgc3VnZ2VzdGlvbnMgPSAoKF9yZXMkZGF0YSA9IHJlcy5kYXRhKSA9PT0gbnVsbCB8fCBfcmVzJGRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yZXMkZGF0YS5zdWdnZXN0aW9ucykgfHwgW107CgogICAgICAgIC8vIOabtOaWsOW9k+WJjeaJk+W8gOeahOS7u+WKoeivpuaDhQogICAgICAgIGlmIChjdXJyZW50VGFzay52YWx1ZSAmJiBjdXJyZW50VGFzay52YWx1ZS5pZCA9PT0gdGFza0lkKSB7CiAgICAgICAgICBjdXJyZW50VGFzay52YWx1ZS5haSA9IHN1Z2dlc3Rpb25zOwogICAgICAgIH0KCiAgICAgICAgLy8g5pu05paw5Lu75Yqh5YiX6KGo5Lit55qE5Lu75YqhCiAgICAgICAgY29uc3QgdGFzayA9IHRhc2tzLnZhbHVlLmZpbmQodCA9PiB0LmlkID09PSB0YXNrSWQpOwogICAgICAgIGlmICh0YXNrKSB7CiAgICAgICAgICB0YXNrLmFpID0gc3VnZ2VzdGlvbnM7CiAgICAgICAgfQogICAgICAgIGNvbnNvbGUubG9nKCfku7vliqFBSeWIhuaekOe7k+aenDonLCBzdWdnZXN0aW9ucyk7CiAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgY29uc29sZS5lcnJvcign6I635Y+W5Lu75YqhQUnliIbmnpDlpLHotKU6JywgZXJyKTsKICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+iOt+WPluS7u+WKoUFJ5YiG5p6Q5aSx6LSlJyk7CiAgICAgIH0pLmZpbmFsbHkoKCkgPT4gewogICAgICAgIC8vIOa4hemZpOWKoOi9veeKtuaAgQogICAgICAgIGNvbnN0IHRhc2sgPSB0YXNrcy52YWx1ZS5maW5kKHQgPT4gdC5pZCA9PT0gdGFza0lkKTsKICAgICAgICBpZiAodGFzaykgewogICAgICAgICAgdGFzay5fYWlMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KCiAgICAvLyDmlrDlu7rku7vliqHlvLnnqpcKICAgIGZ1bmN0aW9uIGhhbmRsZUFkZFRhc2soKSB7CiAgICAgIG5ld1Rhc2sudmFsdWUgPSB7CiAgICAgICAgdGl0bGU6ICcnLAogICAgICAgIGFzc2lnbmVlOiAnJywKICAgICAgICBwcmlvcml0eTogJ+S4rScsCiAgICAgICAgZHVlRGF0ZTogJycsCiAgICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICAgIHRhZ3M6ICcnLAogICAgICAgIHN0YXR1czogJ3RvZG8nLAogICAgICAgIHByb2dyZXNzOiAwLAogICAgICAgIGNvbXBsZXRlZDogMCwKICAgICAgICB0b3RhbDogMQogICAgICB9OwogICAgICBzaG93QWRkVGFzay52YWx1ZSA9IHRydWU7CiAgICB9CgogICAgLy8g55uR5ZCs6aG555uu5Y+Y5YyW6Ieq5Yqo5ouJ5Y+W5Lu75Yqh5ZKM5oiQ5ZGYCiAgICB3YXRjaCgoKSA9PiBwcm9wcy5wcm9qZWN0LCBuZXdQcm9qZWN0ID0+IHsKICAgICAgaWYgKG5ld1Byb2plY3QgJiYgbmV3UHJvamVjdC5pZCkgewogICAgICAgIC8vIOWmguaenOeItue7hOS7tuS8oOmAkuS6huaIkOWRmOaVsOaNru+8jOS8mOWFiOS9v+eUqAogICAgICAgIGlmIChwcm9wcy5tZW1iZXJzICYmIHByb3BzLm1lbWJlcnMubGVuZ3RoID4gMCkgewogICAgICAgICAgcHJvamVjdE1lbWJlcnMudmFsdWUgPSBwcm9wcy5tZW1iZXJzOwogICAgICAgICAgY29uc29sZS5sb2coJ+S9v+eUqOeItue7hOS7tuS8oOmAkueahOaIkOWRmOaVsOaNrjonLCBwcm9qZWN0TWVtYmVycy52YWx1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGZldGNoUHJvamVjdE1lbWJlcnMobmV3UHJvamVjdC5pZCk7CiAgICAgICAgfQogICAgICAgIGZldGNoVGFza3MoKTsKICAgICAgfQogICAgfSwgewogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0pOwoKICAgIC8vIOebkeWQrOeItue7hOS7tuS8oOmAkueahOaIkOWRmOaVsOaNruWPmOWMlgogICAgd2F0Y2goKCkgPT4gcHJvcHMubWVtYmVycywgbmV3TWVtYmVycyA9PiB7CiAgICAgIGlmIChuZXdNZW1iZXJzICYmIG5ld01lbWJlcnMubGVuZ3RoID4gMCkgewogICAgICAgIHByb2plY3RNZW1iZXJzLnZhbHVlID0gbmV3TWVtYmVyczsKICAgICAgICBjb25zb2xlLmxvZygn5oiQ5ZGY5pWw5o2u5pu05pawOicsIHByb2plY3RNZW1iZXJzLnZhbHVlKTsKICAgICAgfQogICAgfSwgewogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0pOwogICAgb25Nb3VudGVkKCgpID0+IHsKICAgICAgaWYgKHByb3BzLnByb2plY3QgJiYgcHJvcHMucHJvamVjdC5pZCkgewogICAgICAgIC8vIOWmguaenOeItue7hOS7tuS8oOmAkuS6huaIkOWRmOaVsOaNru+8jOS8mOWFiOS9v+eUqAogICAgICAgIGlmIChwcm9wcy5tZW1iZXJzICYmIHByb3BzLm1lbWJlcnMubGVuZ3RoID4gMCkgewogICAgICAgICAgcHJvamVjdE1lbWJlcnMudmFsdWUgPSBwcm9wcy5tZW1iZXJzOwogICAgICAgICAgY29uc29sZS5sb2coJ+S9v+eUqOeItue7hOS7tuS8oOmAkueahOaIkOWRmOaVsOaNrjonLCBwcm9qZWN0TWVtYmVycy52YWx1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGZldGNoUHJvamVjdE1lbWJlcnMocHJvcHMucHJvamVjdC5pZCk7CiAgICAgICAgfQogICAgICAgIGZldGNoVGFza3MoKTsKICAgICAgfQogICAgfSk7CgogICAgLy8g6I635Y+W6aG555uu5oiQ5ZGY77yIUHJvamVjdE1lbWJlciDliJfooajvvIzluKYgdXNlciDkv6Hmga/vvIkKICAgIGZ1bmN0aW9uIGZldGNoUHJvamVjdE1lbWJlcnMocHJvamVjdElkKSB7CiAgICAgIGlmICghcHJvamVjdElkKSByZXR1cm47CiAgICAgIHJlcXVlc3QuZ2V0KGAvYXBpL3Byb2plY3QtbWVtYmVycy8/cHJvamVjdD0ke3Byb2plY3RJZH1gKS50aGVuKHJlcyA9PiB7CiAgICAgICAgLy8g57uT5p6E77yaW3tpZDogUHJvamVjdE1lbWJlci5pZCwgdXNlcjoge2lkLCB1c2VybmFtZSwgLi4ufSwgLi4ufV0KICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyZXMuZGF0YSkpIHsKICAgICAgICAgIHByb2plY3RNZW1iZXJzLnZhbHVlID0gcmVzLmRhdGEubWFwKHBtID0+IHsKICAgICAgICAgICAgdmFyIF9wbSR1c2VyLCBfcG0kdXNlcjIsIF9wbSR1c2VyMzsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICBpZDogcG0uaWQsCiAgICAgICAgICAgICAgbmFtZTogKChfcG0kdXNlciA9IHBtLnVzZXIpID09PSBudWxsIHx8IF9wbSR1c2VyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcG0kdXNlci51c2VybmFtZSkgfHwgKChfcG0kdXNlcjIgPSBwbS51c2VyKSA9PT0gbnVsbCB8fCBfcG0kdXNlcjIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wbSR1c2VyMi5lbWFpbCkgfHwgJ+acquWRveWQjeaIkOWRmCcsCiAgICAgICAgICAgICAgdXNlcklkOiAoX3BtJHVzZXIzID0gcG0udXNlcikgPT09IG51bGwgfHwgX3BtJHVzZXIzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcG0kdXNlcjMuaWQKICAgICAgICAgICAgfTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBwcm9qZWN0TWVtYmVycy52YWx1ZSA9IFtdOwogICAgICAgIH0KICAgICAgICBjb25zb2xlLmxvZygn5ouJ5Y+W5Yiw55qE6aG555uu5oiQ5ZGY77yIUHJvamVjdE1lbWJlcu+8iTonLCBwcm9qZWN0TWVtYmVycy52YWx1ZSk7CiAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgY29uc29sZS5lcnJvcign6I635Y+W6aG555uu5oiQ5ZGY5aSx6LSlJywgZXJyKTsKICAgICAgICBwcm9qZWN0TWVtYmVycy52YWx1ZSA9IFtdOwogICAgICB9KTsKICAgIH0KICAgIGZ1bmN0aW9uIGJhdGNoQ29tcGxldGUoKSB7CiAgICAgIC8vIOmdmeaAgea8lOekuu+8jOWunumZheW6lOaJuemHj+S/ruaUueeKtuaAgQogICAgICBzZWxlY3RlZFRhc2tzLnZhbHVlID0gW107CiAgICB9CiAgICBmdW5jdGlvbiBiYXRjaERlbGV0ZSgpIHsKICAgICAgLy8g6Z2Z5oCB5ryU56S677yM5a6e6ZmF5bqU5om56YeP5Yig6ZmkCiAgICAgIHNlbGVjdGVkVGFza3MudmFsdWUgPSBbXTsKICAgIH0KCiAgICAvLyDmlrDlop7vvJrliKTmlq3mmK/lkKbkuLrlvZPliY3nmbvlvZXnlKjmiLcKICAgIGZ1bmN0aW9uIGlzQ3VycmVudFVzZXIobWVtYmVySWQpIHsKICAgICAgaWYgKCFjdXJyZW50VXNlci52YWx1ZSB8fCAhY3VycmVudFVzZXIudmFsdWUuaWQpIHJldHVybiBmYWxzZTsKICAgICAgcmV0dXJuIE51bWJlcihtZW1iZXJJZCkgPT09IE51bWJlcihjdXJyZW50VXNlci52YWx1ZS5pZCk7CiAgICB9CgogICAgLy8g57yW6L6R55u45YWz6YC76L6RCiAgICBjb25zdCBzaG93RWRpdFRhc2sgPSByZWYoZmFsc2UpOwogICAgY29uc3QgZWRpdFRhc2sgPSByZWYobnVsbCk7CiAgICBmdW5jdGlvbiBvcGVuRWRpdFRhc2sodGFzaykgewogICAgICBlZGl0VGFzay52YWx1ZSA9IHsKICAgICAgICAuLi50YXNrLAogICAgICAgIHN0YXR1czogdGFzay5zdGF0dXMgfHwgJ3RvZG8nCiAgICAgIH07CiAgICAgIHNob3dFZGl0VGFzay52YWx1ZSA9IHRydWU7CiAgICB9CiAgICBmdW5jdGlvbiBzYXZlRWRpdFRhc2soKSB7CiAgICAgIGlmICghZWRpdFRhc2sudmFsdWUudGl0bGUpIHsKICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+ivt+Whq+WGmeS7u+WKoeWQjeensCcpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICByZXF1ZXN0LnBhdGNoKGAvYXBpL3Rhc2tzLyR7ZWRpdFRhc2sudmFsdWUuaWR9L2AsIHsKICAgICAgICB0aXRsZTogZWRpdFRhc2sudmFsdWUudGl0bGUsCiAgICAgICAgZGVzY3JpcHRpb246IGVkaXRUYXNrLnZhbHVlLmRlc2NyaXB0aW9uLAogICAgICAgIGR1ZV9kYXRlOiBlZGl0VGFzay52YWx1ZS5kdWVEYXRlLAogICAgICAgIHByaW9yaXR5OiBlZGl0VGFzay52YWx1ZS5wcmlvcml0eSA9PT0gJ+mrmCcgPyAnaGlnaCcgOiBlZGl0VGFzay52YWx1ZS5wcmlvcml0eSA9PT0gJ+S9jicgPyAnbG93JyA6ICdtZWRpdW0nLAogICAgICAgIHRhZ3M6IGVkaXRUYXNrLnZhbHVlLnRhZ3MsCiAgICAgICAgc3RhdHVzOiBlZGl0VGFzay52YWx1ZS5zdGF0dXMgfHwgJ3RvZG8nCiAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIEVsTWVzc2FnZS5zdWNjZXNzKCfku7vliqHmm7TmlrDmiJDlip8nKTsKICAgICAgICBzaG93RWRpdFRhc2sudmFsdWUgPSBmYWxzZTsKICAgICAgICBmZXRjaFRhc2tzKCk7CiAgICAgICAgc2hvd0RldGFpbC52YWx1ZSA9IGZhbHNlOwogICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfku7vliqHmm7TmlrDlpLHotKUnKTsKICAgICAgfSk7CiAgICB9CgogICAgLy8g5Yig6Zmk55u45YWz6YC76L6RCiAgICBmdW5jdGlvbiBjb25maXJtRGVsZXRlVGFzayh0YXNrKSB7CiAgICAgIEVsTWVzc2FnZUJveC5jb25maXJtKCfnoa7lrpropoHliKDpmaTor6Xku7vliqHlkJfvvJ8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn5Yig6ZmkJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgcmVxdWVzdC5kZWxldGUoYC9hcGkvdGFza3MvJHt0YXNrLmlkfS9gKS50aGVuKCgpID0+IHsKICAgICAgICAgIEVsTWVzc2FnZS5zdWNjZXNzKCfku7vliqHlt7LliKDpmaQnKTsKICAgICAgICAgIGZldGNoVGFza3MoKTsKICAgICAgICAgIHNob3dEZXRhaWwudmFsdWUgPSBmYWxzZTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgICBmdW5jdGlvbiByZWZyZXNoQWxsVGFza0FpQW5hbHlzaXMoKSB7CiAgICAgIGlmICghdGFza3MudmFsdWUubGVuZ3RoKSByZXR1cm47CiAgICAgIHJlZnJlc2hpbmdBaS52YWx1ZSA9IHRydWU7CiAgICAgIGxldCBmaW5pc2hlZCA9IDA7CiAgICAgIGNvbnN0IHRvdGFsID0gdGFza3MudmFsdWUubGVuZ3RoOwogICAgICB0YXNrcy52YWx1ZS5mb3JFYWNoKHRhc2sgPT4gewogICAgICAgIHRhc2suX2FpTG9hZGluZyA9IHRydWU7CiAgICAgICAgcmVxdWVzdC5nZXQoYC9hcGkvdGFza3MvJHt0YXNrLmlkfS9haV9hbmFseXNpcy9gKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICB2YXIgX3JlcyRkYXRhMjsKICAgICAgICAgIGNvbnN0IHN1Z2dlc3Rpb25zID0gKChfcmVzJGRhdGEyID0gcmVzLmRhdGEpID09PSBudWxsIHx8IF9yZXMkZGF0YTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yZXMkZGF0YTIuc3VnZ2VzdGlvbnMpIHx8IFtdOwogICAgICAgICAgdGFzay5haSA9IHN1Z2dlc3Rpb25zOwogICAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRhc2suYWkgPSBbXTsKICAgICAgICB9KS5maW5hbGx5KCgpID0+IHsKICAgICAgICAgIHRhc2suX2FpTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgZmluaXNoZWQrKzsKICAgICAgICAgIGlmIChmaW5pc2hlZCA9PT0gdG90YWwpIHsKICAgICAgICAgICAgcmVmcmVzaGluZ0FpLnZhbHVlID0gZmFsc2U7CiAgICAgICAgICAgIEVsTWVzc2FnZS5zdWNjZXNzKCdBSeWIhuaekOWujOaIkCcpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICAgIGNvbnN0IF9fcmV0dXJuZWRfXyA9IHsKICAgICAgY3VycmVudFVzZXIsCiAgICAgIHByb3BzLAogICAgICBzZWFyY2gsCiAgICAgIGZpbHRlckFzc2lnbmVlLAogICAgICBmaWx0ZXJQcmlvcml0eSwKICAgICAgZmlsdGVyU3RhdHVzLAogICAgICBzaG93QWRkVGFzaywKICAgICAgc2hvd0RldGFpbCwKICAgICAgY3VycmVudFRhc2ssCiAgICAgIHNlbGVjdGVkVGFza3MsCiAgICAgIHByb2plY3RNZW1iZXJzLAogICAgICBuZXdUYXNrLAogICAgICB0YXNrcywKICAgICAgdGFza0NvbXBsZXRpb25zLAogICAgICBrYW5iYW4sCiAgICAgIHJlZnJlc2hpbmdBaSwKICAgICAgZmV0Y2hUYXNrcywKICAgICAgZmV0Y2hUYXNrQ29tcGxldGlvbnMsCiAgICAgIGdldFRhc2tDb21wbGV0aW9uUGVyY2VudGFnZSwKICAgICAgZ2V0VGFza0NvbXBsZXRpb25UZXh0LAogICAgICBtYXJrQ29tcGxldGVGb3JNZW1iZXIsCiAgICAgIG1hcmtDb21wbGV0ZSwKICAgICAgdXBkYXRlVGFza1N0YXR1c1RvRG9uZSwKICAgICAgc2F2ZVRhc2ssCiAgICAgIGZpbHRlcmVkVGFza3MsCiAgICAgIG9wZW5EZXRhaWwsCiAgICAgIGdldFRhc2tBaUFuYWx5c2lzLAogICAgICBoYW5kbGVBZGRUYXNrLAogICAgICBmZXRjaFByb2plY3RNZW1iZXJzLAogICAgICBiYXRjaENvbXBsZXRlLAogICAgICBiYXRjaERlbGV0ZSwKICAgICAgaXNDdXJyZW50VXNlciwKICAgICAgc2hvd0VkaXRUYXNrLAogICAgICBlZGl0VGFzaywKICAgICAgb3BlbkVkaXRUYXNrLAogICAgICBzYXZlRWRpdFRhc2ssCiAgICAgIGNvbmZpcm1EZWxldGVUYXNrLAogICAgICByZWZyZXNoQWxsVGFza0FpQW5hbHlzaXMsCiAgICAgIHJlZiwKICAgICAgd2F0Y2gsCiAgICAgIG9uTW91bnRlZCwKICAgICAgY29tcHV0ZWQsCiAgICAgIGdldCBVc2VyRmlsbGVkKCkgewogICAgICAgIHJldHVybiBVc2VyRmlsbGVkOwogICAgICB9LAogICAgICBnZXQgQ2FsZW5kYXIoKSB7CiAgICAgICAgcmV0dXJuIENhbGVuZGFyOwogICAgICB9LAogICAgICBnZXQgQ2hhdERvdFJvdW5kKCkgewogICAgICAgIHJldHVybiBDaGF0RG90Um91bmQ7CiAgICAgIH0sCiAgICAgIGdldCByZXF1ZXN0KCkgewogICAgICAgIHJldHVybiByZXF1ZXN0OwogICAgICB9LAogICAgICBnZXQgRWxNZXNzYWdlKCkgewogICAgICAgIHJldHVybiBFbE1lc3NhZ2U7CiAgICAgIH0sCiAgICAgIGdldCBFbE1lc3NhZ2VCb3goKSB7CiAgICAgICAgcmV0dXJuIEVsTWVzc2FnZUJveDsKICAgICAgfQogICAgfTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfX3JldHVybmVkX18sICdfX2lzU2NyaXB0U2V0dXAnLCB7CiAgICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgICB2YWx1ZTogdHJ1ZQogICAgfSk7CiAgICByZXR1cm4gX19yZXR1cm5lZF9fOwogIH0KfTs="},{"version":3,"names":["ref","watch","onMounted","computed","UserFilled","Calendar","ChatDotRound","request","ElMessage","ElMessageBox","currentUser","value","JSON","parse","localStorage","getItem","console","log","e","error","props","__props","search","filterAssignee","filterPriority","filterStatus","showAddTask","showDetail","currentTask","selectedTasks","projectMembers","newTask","title","assignee","priority","dueDate","description","tags","status","progress","completed","total","tasks","taskCompletions","kanban","name","filter","t","refreshingAi","fetchTasks","project","id","get","then","res","rawTasks","Array","isArray","data","map","due_date","priorityType","forEach","task","ai","length","getTaskAiAnalysis","fetchTaskCompletions","taskId","members","allMembers","m","some","item","push","completionId","undefined","uniqueMembers","seenUserIds","Set","_m$user","userId","user","has","_m$user2","_m$user3","username","email","completion_id","add","catch","err","getTaskCompletionPercentage","_taskCompletions$valu","_taskCompletions$valu2","_taskCompletions$valu3","Math","round","getTaskCompletionText","_taskCompletions$valu4","_taskCompletions$valu5","val","immediate","markCompleteForMember","memberId","post","member_id","completed_at","Date","toISOString","success","existingMemberIds","includes","member","find","tc","updateTaskStatusToDone","markComplete","_taskCompletions$valu6","max","patch","tcc","saveTask","assignee_id","payload","filteredTasks","taskArr","matchSearch","matchAssignee","matchPriority","matchStatus","openDetail","_aiLoading","_res$data","suggestions","finally","handleAddTask","newProject","fetchProjectMembers","newMembers","projectId","pm","_pm$user","_pm$user2","_pm$user3","batchComplete","batchDelete","isCurrentUser","Number","showEditTask","editTask","openEditTask","saveEditTask","confirmDeleteTask","confirm","confirmButtonText","cancelButtonText","type","delete","refreshAllTaskAiAnalysis","finished","_res$data2"],"sources":["C:/Users/18083/Desktop/CCIT/office/smart-office/frontend/src/views/project/components/TasksView.vue"],"sourcesContent":["<template>\n  <div class=\"module-card modern-tasks\">\n    <div class=\"module-header\">\n      <h5 class=\"module-title\">任务管理</h5>\n      <div class=\"btn-group\">\n        <el-button type=\"primary\" size=\"large\" round @click=\"handleAddTask\">新建任务</el-button>\n        <el-button type=\"info\" size=\"large\" round @click=\"refreshAllTaskAiAnalysis\" :loading=\"refreshingAi\">刷新分析</el-button>\n      </div>\n    </div>\n    <!-- 顶部搜索和筛选 -->\n    <div class=\"task-filters modern-filters\">\n      <el-input v-model=\"search\" placeholder=\"搜索任务...\" clearable class=\"filter-input\" />\n      <el-select v-model=\"filterAssignee\" placeholder=\"负责人\" clearable class=\"filter-select\">\n        <el-option label=\"全部\" value=\"\" />\n        <el-option v-for=\"member in projectMembers\" :key=\"member.id\" :label=\"member.name\" :value=\"member.name\" />\n      </el-select>\n      <el-select v-model=\"filterPriority\" placeholder=\"优先级\" clearable class=\"filter-select\">\n        <el-option label=\"全部\" value=\"\" />\n        <el-option label=\"高\" value=\"高\" />\n        <el-option label=\"中\" value=\"中\" />\n        <el-option label=\"低\" value=\"低\" />\n      </el-select>\n      <el-select v-model=\"filterStatus\" placeholder=\"状态\" clearable class=\"filter-select\">\n        <el-option label=\"全部\" value=\"\" />\n        <el-option label=\"待处理\" value=\"待处理\" />\n        <el-option label=\"进行中\" value=\"进行中\" />\n        <el-option label=\"已完成\" value=\"已完成\" />\n      </el-select>\n      <el-button size=\"default\" @click=\"batchComplete\" :disabled=\"!selectedTasks.length\">批量完成</el-button>\n      <el-button size=\"default\" type=\"danger\" @click=\"batchDelete\" :disabled=\"!selectedTasks.length\">批量删除</el-button>\n    </div>\n    <!-- 只保留看板视图 -->\n    <div class=\"kanban-view modern-kanban\">\n      <div class=\"row\">\n        <div class=\"col-md-4\" v-for=\"col in kanban\" :key=\"col.name\">\n          <div class=\"card modern-card\">\n            <div class=\"card-header bg-light modern-card-header kanban-col-header\">\n              <span class=\"kanban-col-dot\" :class=\"col.name\"></span>\n              <h6 class=\"mb-0\">{{ col.name }} <el-badge :value=\"filteredTasks(col.tasks).length\" class=\"kanban-badge\" /></h6>\n            </div>\n            <div class=\"card-body task-list\">\n              <el-empty v-if=\"filteredTasks(col.tasks).length === 0\" description=\"暂无任务\" :image-size=\"60\" />\n              <div v-else v-for=\"task in filteredTasks(col.tasks)\" :key=\"task.title\" class=\"task-card modern-task-card\" @click=\"openDetail(task)\">\n                <div class=\"task-header\">\n                  <h6 class=\"mb-0 task-title-main\">{{ task.title }}</h6>\n                  <el-tag :type=\"task.priorityType\" size=\"small\">{{ task.priority }}</el-tag>\n                </div>\n                <div class=\"task-meta-row\">\n                  <span v-if=\"task.assignee && task.assignee.user\"><el-icon><UserFilled /></el-icon> {{ task.assignee.user.username }}</span>\n                  <span v-if=\"task.dueDate\"><el-icon><Calendar /></el-icon> {{ task.dueDate }}</span>\n                  <div class=\"task-progress-row\">\n                    <el-progress :percentage=\"getTaskCompletionPercentage(task)\" :show-text=\"false\" style=\"width:60px;height:4px;display:inline-block;margin:0 8px;\" />\n                    <span class=\"progress-text\">{{ getTaskCompletionText(task) }}</span>\n                  </div>\n                </div>\n                <div class=\"task-tags\">\n                  <el-tag v-for=\"tag in task.tags\" :key=\"tag\" size=\"small\">{{ tag }}</el-tag>\n                </div>\n                <p class=\"task-description\">{{ task.description }}</p>\n                <div class=\"ai-analysis-toggle\" @click.stop=\"task._showAI = !task._showAI\">\n                  <el-icon style=\"vertical-align:middle;\"><ChatDotRound /></el-icon>\n                  <span style=\"font-size:12px;color:#888;cursor:pointer;\">AI分析 {{ task._showAI ? '▲' : '▼' }}</span>\n                  <el-button size=\"small\" type=\"text\" @click.stop=\"getTaskAiAnalysis(task.id)\" :loading=\"task._aiLoading\">\n                    <el-icon><Refresh /></el-icon>\n                  </el-button>\n                </div>\n                <div v-if=\"isCurrentUser(task.assignee?.user?.id)\" style=\"margin-top:6px;\">\n                  <el-button size=\"small\" @click.stop=\"openEditTask(task)\">编辑</el-button>\n                  <el-button size=\"small\" type=\"danger\" @click.stop=\"confirmDeleteTask(task)\">删除</el-button>\n                </div>\n                <transition name=\"fade\">\n                  <div v-if=\"task._showAI\" class=\"ai-analysis modern-ai-analysis\">\n                    <div v-if=\"!task.ai || task.ai.length === 0\" class=\"text-center py-2\">\n                      <span class=\"text-muted\">暂无AI分析</span>\n                    </div>\n                    <ul class=\"mb-0\" v-else>\n                      <li v-for=\"r in task.ai\" :key=\"r\">{{ r }}</li>\n                    </ul>\n                  </div>\n                </transition>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- 新建/编辑任务弹窗 -->\n    <el-dialog v-model=\"showAddTask\" title=\"新建任务\" width=\"420px\" class=\"modern-dialog\">\n      <el-form label-width=\"80px\" class=\"modern-form\">\n        <el-form-item label=\"任务名称\"><el-input v-model=\"newTask.title\" /></el-form-item>\n        <el-form-item label=\"负责人\">\n          <el-select v-model=\"newTask.assignee\">\n            <el-option \n              v-for=\"member in projectMembers\" \n              :key=\"member.id\" \n              :label=\"member.name\" \n              :value=\"member.id\" \n            />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"优先级\"><el-select v-model=\"newTask.priority\"><el-option label=\"高\" value=\"高\" /><el-option label=\"中\" value=\"中\" /><el-option label=\"低\" value=\"低\" /></el-select></el-form-item>\n        <el-form-item label=\"截止日期\"><el-date-picker v-model=\"newTask.dueDate\" /></el-form-item>\n        <el-form-item label=\"描述\"><el-input type=\"textarea\" v-model=\"newTask.description\" /></el-form-item>\n        <el-form-item label=\"标签\"><el-input v-model=\"newTask.tags\" placeholder=\"逗号分隔\" /></el-form-item>\n      </el-form>\n      <template #footer>\n        <el-button @click=\"showAddTask = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"saveTask\">保存</el-button>\n      </template>\n    </el-dialog>\n    <!-- 任务详情弹窗 -->\n    <el-dialog v-model=\"showDetail\" title=\"任务详情\" width=\"480px\" class=\"modern-dialog\">\n      <div v-if=\"currentTask\">\n        <h5 style=\"font-weight:600;\">{{ currentTask.title }}</h5>\n        <div style=\"margin:10px 0;display:flex;gap:16px;align-items:center;\">\n          <el-tag :type=\"currentTask.priorityType\" size=\"small\">{{ currentTask.priority }}</el-tag>\n          <span>负责人：{{ currentTask.assignee && currentTask.assignee.user ? currentTask.assignee.user.username : '' }}</span>\n          <span>截止：{{ currentTask.dueDate }}</span>\n        </div>\n        <div style=\"margin-bottom:10px;\">描述：{{ currentTask.description }}</div>\n        <div style=\"margin-bottom:10px;\">标签：<el-tag v-for=\"tag in currentTask.tags\" :key=\"tag\" size=\"small\">{{ tag }}</el-tag></div>\n        <div style=\"margin-bottom:10px;\">进度：<el-progress :percentage=\"getTaskCompletionPercentage(currentTask)\" /></div>\n        <div class=\"ai-analysis modern-ai-analysis\">\n          <div class=\"d-flex justify-content-between align-items-center mb-2\">\n            <small class=\"text-muted\">AI分析：</small>\n            <el-button size=\"small\" type=\"text\" @click=\"getTaskAiAnalysis(currentTask.id)\" :loading=\"currentTask._aiLoading\">\n              <el-icon><Refresh /></el-icon> 刷新分析\n            </el-button>\n          </div>\n          <div v-if=\"!currentTask.ai || currentTask.ai.length === 0\" class=\"text-center py-2\">\n            <span class=\"text-muted\">暂无AI分析</span>\n          </div>\n          <ul class=\"mb-0\" v-else>\n            <li v-for=\"r in currentTask.ai\" :key=\"r\">{{ r }}</li>\n          </ul>\n        </div>\n        <div class=\"member-completion-list\">\n          <div v-if=\"currentTask.status === 'todo' || currentTask.status === '待处理'\">\n            <div v-for=\"member in projectMembers\" :key=\"member.id\" class=\"member-item\">\n              <span>{{ member.name }}</span>\n              <el-tag type=\"info\" size=\"small\">未完成</el-tag>\n            </div>\n          </div>\n          <div v-else-if=\"!taskCompletions[currentTask?.id]?.members || taskCompletions[currentTask?.id]?.members.length === 0\">\n            <div v-for=\"member in projectMembers\" :key=\"member.id\" class=\"member-item\">\n              <span>{{ member.name }}</span>\n              <el-button \n                v-if=\"isCurrentUser(member.userId)\" \n                type=\"primary\" \n                size=\"small\" \n                @click=\"markCompleteForMember(currentTask.id, member.id)\"\n              >完成</el-button>\n              <el-tag v-else type=\"info\" size=\"small\">未完成</el-tag>\n            </div>\n          </div>\n          <div v-else v-for=\"m in taskCompletions[currentTask.id]?.members || []\" :key=\"m.id\" class=\"member-item\">\n            <span>{{ m.name }}</span>\n            <el-tag v-if=\"m.completed\" type=\"success\" size=\"small\">已完成</el-tag>\n            <el-button \n              v-else-if=\"isCurrentUser(m.userId)\" \n              type=\"primary\" \n              size=\"small\" \n              @click=\"markComplete(currentTask.id, m.id)\"\n            >完成</el-button>\n            <el-tag v-else type=\"info\" size=\"small\">未完成</el-tag>\n          </div>\n        </div>\n      </div>\n      <template #footer>\n        <el-button @click=\"showDetail=false\">关闭</el-button>\n        <el-button v-if=\"isCurrentUser(currentTask?.assignee?.user?.id)\" @click=\"openEditTask(currentTask)\" type=\"primary\">编辑</el-button>\n        <el-button v-if=\"isCurrentUser(currentTask?.assignee?.user?.id)\" @click=\"confirmDeleteTask(currentTask)\" type=\"danger\">删除</el-button>\n      </template>\n    </el-dialog>\n    <!-- 编辑任务弹窗 -->\n    <el-dialog v-model=\"showEditTask\" title=\"编辑任务\" width=\"420px\" class=\"modern-dialog\">\n      <el-form label-width=\"80px\" class=\"modern-form\">\n        <el-form-item label=\"任务名称\"><el-input v-model=\"editTask.title\" /></el-form-item>\n        <el-form-item label=\"优先级\"><el-select v-model=\"editTask.priority\"><el-option label=\"高\" value=\"高\" /><el-option label=\"中\" value=\"中\" /><el-option label=\"低\" value=\"低\" /></el-select></el-form-item>\n        <el-form-item label=\"截止日期\"><el-date-picker v-model=\"editTask.dueDate\" /></el-form-item>\n        <el-form-item label=\"描述\"><el-input type=\"textarea\" v-model=\"editTask.description\" /></el-form-item>\n        <el-form-item label=\"标签\"><el-input v-model=\"editTask.tags\" placeholder=\"逗号分隔\" /></el-form-item>\n        <el-form-item label=\"状态\">\n          <el-select v-model=\"editTask.status\">\n            <el-option label=\"待处理\" value=\"todo\" />\n            <el-option label=\"进行中\" value=\"in-progress\" />\n            <el-option label=\"已完成\" value=\"done\" />\n          </el-select>\n        </el-form-item>\n      </el-form>\n      <template #footer>\n        <el-button @click=\"showEditTask = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"saveEditTask\">保存</el-button>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n<script setup>\nimport { ref, watch, onMounted, computed } from 'vue'\nimport { UserFilled, Calendar, ChatDotRound } from '@element-plus/icons-vue'\nimport request from '@/utils/request'\nimport { ElMessage, ElMessageBox } from 'element-plus'\n\n// 获取当前登录用户信息\nconst currentUser = ref(null)\ntry {\n  currentUser.value = JSON.parse(localStorage.getItem('user') || '{}')\n  console.log('当前登录用户:', currentUser.value)\n} catch (e) {\n  console.error('解析用户信息失败:', e)\n}\n\nconst props = defineProps({\n  project: {\n    type: Object,\n    default: () => ({})\n  },\n  members: {\n    type: Array,\n    default: () => []\n  }\n})\n\nconst search = ref('')\nconst filterAssignee = ref('')\nconst filterPriority = ref('')\nconst filterStatus = ref('')\nconst showAddTask = ref(false)\nconst showDetail = ref(false)\nconst currentTask = ref(null)\nconst selectedTasks = ref([])\nconst projectMembers = ref([])\nconst newTask = ref({\n  title: '',\n  assignee: '',\n  priority: '中',\n  dueDate: '',\n  description: '',\n  tags: '',\n  status: 'todo',\n  progress: 0,\n  completed: 0,\n  total: 1\n})\n\n// 所有任务数据\nconst tasks = ref([])\n\n// 新增：任务完成进度数据\nconst taskCompletions = ref({}) // { [taskId]: { total, completed, members: [{id, name, completed}] } }\n\nconst kanban = computed(() => [\n  { name: '待处理', tasks: tasks.value.filter(t => t.status === 'todo' || t.status === '待处理') },\n  { name: '进行中', tasks: tasks.value.filter(t => t.status === 'in-progress' || t.status === '进行中') },\n  { name: '已完成', tasks: tasks.value.filter(t => t.status === 'done' || t.status === '已完成') }\n])\n\nconst refreshingAi = ref(false)\n\n// 获取任务列表\nfunction fetchTasks() {\n  if (!props.project || !props.project.id) return\n  request.get(`/api/tasks/?project=${props.project.id}`).then(res => {\n    // 统一转换任务字段\n    const rawTasks = Array.isArray(res.data) ? res.data : (res.data.data || [])\n    tasks.value = rawTasks.map(t => ({\n      ...t,\n      dueDate: t.due_date || t.dueDate || '',\n      priority: t.priority === 'high' ? '高' : t.priority === 'low' ? '低' : t.priority === 'medium' ? '中' : (t.priority || ''),\n      priorityType: t.priority === 'high' || t.priority === '高' ? 'danger' : t.priority === 'low' || t.priority === '低' ? 'info' : 'warning',\n    }))\n    // 自动AI分析\n    tasks.value.forEach(task => {\n      if (!task.ai || task.ai.length === 0) {\n        getTaskAiAnalysis(task.id)\n      }\n    })\n  })\n}\n\n// 获取任务完成进度\nfunction fetchTaskCompletions(taskId) {\n  if (!taskId) return\n  request.get(`/api/task-completions/?task=${taskId}`).then(res => {\n    const members = Array.isArray(res.data) ? res.data : (res.data.data || [])\n    \n    // 合并后端数据和项目成员数据，确保所有成员都在列表中且不重复\n    const allMembers = [...members]\n    projectMembers.value.forEach(m => {\n      if (!allMembers.some(item => item.id === m.id)) {\n        allMembers.push({\n          id: m.id,\n          name: m.name,\n          completed: false,\n          completionId: undefined // 新增，未有后端记录\n        })\n      }\n    })\n    // 去重（防止后端数据本身有重复）\n    const uniqueMembers = []\n    const seenUserIds = new Set()\n    for (const m of allMembers) {\n      // 兼容后端返回结构，优先用 user.id\n      const userId = m.userId || m.user?.id || m.id\n      if (!seenUserIds.has(userId)) {\n        uniqueMembers.push({\n          id: m.id, // ProjectMember id\n          name: m.name || m.user?.username || m.user?.email || '',\n          completed: m.completed,\n          completionId: m.completionId || m.completion_id || m.id,\n          userId: userId\n        })\n        seenUserIds.add(userId)\n      }\n    }\n    taskCompletions.value[taskId] = {\n      total: uniqueMembers.length,\n      completed: uniqueMembers.filter(m => m.completed).length,\n      members: uniqueMembers\n    }\n  }).catch(err => {\n    console.error('获取任务完成进度失败:', err)\n    // 如果API失败，使用默认值\n    taskCompletions.value[taskId] = {\n      total: projectMembers.value.length || 1,\n      completed: 0,\n      members: projectMembers.value.map(m => ({\n        id: m.id,\n        name: m.name,\n        completed: false\n      }))\n    }\n  })\n}\n\n// 新增：获取任务完成百分比\nfunction getTaskCompletionPercentage(task) {\n  if (!task || !task.id) return 0\n  \n  // 如果有后端数据，使用后端数据\n  if (taskCompletions.value[task.id]?.total) {\n    return Math.round(100 * (taskCompletions.value[task.id]?.completed || 0) / taskCompletions.value[task.id]?.total)\n  }\n  \n  // 否则使用默认值\n  return 0\n}\n\n// 新增：获取任务完成文本\nfunction getTaskCompletionText(task) {\n  if (!task || !task.id) {\n    // 如果没有任务，显示默认值\n    return `0/${projectMembers.value.length || 1}人完成`\n  }\n  \n  // 如果有后端数据，使用后端数据\n  if (taskCompletions.value[task.id]) {\n    return `${taskCompletions.value[task.id]?.completed || 0}/${taskCompletions.value[task.id]?.total || projectMembers.value.length || 1}人完成`\n  }\n  \n  // 否则使用默认值\n  return `0/${projectMembers.value.length || 1}人完成`\n}\n\n// 在任务列表加载后，批量获取所有任务的完成进度\nwatch(tasks, (val) => {\n  (val || []).forEach(task => fetchTaskCompletions(task.id))\n}, { immediate: true })\n\n// 新增：为没有 TaskCompletion 记录的成员标记完成\nfunction markCompleteForMember(taskId, memberId) {\n  if (!taskId || !memberId) return\n  \n  console.log('为新成员标记任务完成:', taskId, memberId)\n  \n  // 创建新的 TaskCompletion 记录\n  request.post('/api/task-completions/', {\n    task: taskId,\n    member_id: memberId,\n    completed: true,\n    completed_at: new Date().toISOString()\n  }).then(() => {\n    ElMessage.success('已标记为完成')\n    // 更新本地状态\n    if (!taskCompletions.value[taskId]) {\n      // 初始化任务完成状态，使用项目成员总数\n      taskCompletions.value[taskId] = {\n        total: projectMembers.value.length,\n        completed: 1,\n        members: projectMembers.value.map(m => ({\n          id: m.id,\n          name: m.name,\n          completed: m.id === memberId,\n          completionId: undefined\n        }))\n      }\n    } else {\n      // 更新已有的任务完成状态\n      taskCompletions.value[taskId].completed++\n      // 确保 members 数组包含所有项目成员\n      const existingMemberIds = taskCompletions.value[taskId].members.map(m => m.id)\n      projectMembers.value.forEach(m => {\n        if (!existingMemberIds.includes(m.id)) {\n          taskCompletions.value[taskId].members.push({\n            id: m.id,\n            name: m.name,\n            completed: m.id === memberId,\n            completionId: undefined\n          })\n        }\n      })\n      // 更新当前成员的完成状态\n      const member = taskCompletions.value[taskId].members.find(m => m.id === memberId)\n      if (member) {\n        member.completed = true\n      }\n      // 确保总数正确\n      taskCompletions.value[taskId].total = taskCompletions.value[taskId].members.length\n    }\n    \n    // 重新获取最新数据\n    fetchTaskCompletions(taskId)\n    // 检查是否所有成员都完成，自动设为已完成\n    const tc = taskCompletions.value[taskId]\n    if (tc && tc.completed === tc.total && tc.total > 0) {\n      updateTaskStatusToDone(taskId)\n    }\n  }).catch(err => {\n    console.error('创建任务完成记录失败:', err)\n    ElMessage.error('操作失败，请重试')\n  })\n}\n\n// 成员点击\"完成\"按钮\nfunction markComplete(taskId, memberId) {\n  const tc = (taskCompletions.value[taskId]?.members || []).find(m => m.id === memberId)\n  if (!tc || tc.completed) return\n  \n  console.log('标记任务完成:', taskId, memberId, tc.completionId)\n  \n  // 立即更新本地状态，提供即时反馈\n  tc.completed = true\n  taskCompletions.value[taskId].completed++\n  \n  // 确保总数正确\n  taskCompletions.value[taskId].total = Math.max(\n    taskCompletions.value[taskId].total,\n    taskCompletions.value[taskId].members.length,\n    projectMembers.value.length\n  )\n  \n  // 然后发送请求到后端\n  request.patch(`/api/task-completions/${tc.completionId}/`, { \n    completed: true, \n    completed_at: new Date().toISOString() \n  }).then(() => {\n    ElMessage.success('已标记为完成')\n    // 重新获取最新数据\n    fetchTaskCompletions(taskId)\n    // 检查是否所有成员都完成，自动设为已完成\n    const tcc = taskCompletions.value[taskId]\n    if (tcc && tcc.completed === tcc.total && tcc.total > 0) {\n      updateTaskStatusToDone(taskId)\n    }\n  }).catch(err => {\n    console.error('标记完成失败:', err)\n    ElMessage.error('操作失败，但界面已更新')\n    // 失败时不回滚本地状态，保持用户体验\n  })\n}\n\n// 新增：自动将任务状态设为已完成\nfunction updateTaskStatusToDone(taskId) {\n  // 本地更新\n  const task = tasks.value.find(t => t.id === taskId)\n  if (task) task.status = 'done'\n  // 后端更新\n  request.patch(`/api/tasks/${taskId}/`, { status: 'done' })\n}\n\n// 新建任务\nfunction saveTask() {\n  if (!newTask.value.title || !newTask.value.assignee) {\n    ElMessage.error('请填写任务名称和负责人')\n    return\n  }\n  // 直接用assignee为ProjectMember的id\n  const assignee_id = newTask.value.assignee\n  if (!assignee_id) {\n    ElMessage.error('负责人无效')\n    return\n  }\n  const payload = {\n    project: props.project.id,\n    title: newTask.value.title,\n    description: newTask.value.description,\n    assignee_id: assignee_id,\n    due_date: newTask.value.dueDate,\n    priority: newTask.value.priority === '高' ? 'high' : (newTask.value.priority === 'low' ? 'low' : 'medium'),\n    status: 'todo',\n    tags: newTask.value.tags\n  }\n  request.post('/api/tasks/', payload).then(() => {\n    ElMessage.success('任务创建成功')\n    showAddTask.value = false\n    fetchTasks()\n  }).catch(() => {\n    ElMessage.error('任务创建失败')\n  })\n}\n\n// 过滤\nfunction filteredTasks(taskArr) {\n  return taskArr.filter(t => {\n    const matchSearch = !search.value || t.title.includes(search.value) || (t.description && t.description.includes(search.value))\n    const matchAssignee = !filterAssignee.value || (t.assignee && t.assignee.user && t.assignee.user.username === filterAssignee.value)\n    // 优先级筛选：直接用中文匹配\n    const matchPriority = !filterPriority.value || t.priority === filterPriority.value\n    // 状态筛选：直接用中文匹配\n    const matchStatus = !filterStatus.value || t.status === filterStatus.value\n    return matchSearch && matchAssignee && matchPriority && matchStatus\n  })\n}\n\n// 详情弹窗\nfunction openDetail(task) {\n  // 详情弹窗也需转换 priorityType\n  currentTask.value = {\n    ...task,\n    priorityType: task.priorityType || (task.priority === '高' || task.priority === 'high' ? 'danger' : task.priority === '低' || task.priority === 'low' ? 'info' : 'warning'),\n    // 动态获取AI分析结果，而不是使用静态数据\n    ai: task.ai || []\n  }\n  // 显示详情弹窗\n  showDetail.value = true\n  // 如果没有AI分析数据，自动获取\n  if (!task.ai || task.ai.length === 0) {\n    getTaskAiAnalysis(task.id)\n  }\n}\n\n// 新增：获取任务AI分析\nfunction getTaskAiAnalysis(taskId) {\n  if (!taskId) return\n  \n  console.log('获取任务AI分析:', taskId)\n  \n  // 设置对应任务的加载状态\n  const task = tasks.value.find(t => t.id === taskId)\n  if (task) {\n    task._aiLoading = true\n  }\n  \n  request.get(`/api/tasks/${taskId}/ai_analysis/`).then(res => {\n    const suggestions = res.data?.suggestions || []\n    \n    // 更新当前打开的任务详情\n    if (currentTask.value && currentTask.value.id === taskId) {\n      currentTask.value.ai = suggestions\n    }\n    \n    // 更新任务列表中的任务\n    const task = tasks.value.find(t => t.id === taskId)\n    if (task) {\n      task.ai = suggestions\n    }\n    \n    console.log('任务AI分析结果:', suggestions)\n  }).catch(err => {\n    console.error('获取任务AI分析失败:', err)\n    ElMessage.error('获取任务AI分析失败')\n  }).finally(() => {\n    // 清除加载状态\n    const task = tasks.value.find(t => t.id === taskId)\n    if (task) {\n      task._aiLoading = false\n    }\n  })\n}\n\n// 新建任务弹窗\nfunction handleAddTask() {\n  newTask.value = {\n    title: '',\n    assignee: '',\n    priority: '中',\n    dueDate: '',\n    description: '',\n    tags: '',\n    status: 'todo',\n    progress: 0,\n    completed: 0,\n    total: 1\n  }\n  showAddTask.value = true\n}\n\n// 监听项目变化自动拉取任务和成员\nwatch(() => props.project, (newProject) => {\n  if (newProject && newProject.id) {\n    // 如果父组件传递了成员数据，优先使用\n    if (props.members && props.members.length > 0) {\n      projectMembers.value = props.members\n      console.log('使用父组件传递的成员数据:', projectMembers.value)\n    } else {\n      fetchProjectMembers(newProject.id)\n    }\n    fetchTasks()\n  }\n}, { immediate: true })\n\n// 监听父组件传递的成员数据变化\nwatch(() => props.members, (newMembers) => {\n  if (newMembers && newMembers.length > 0) {\n    projectMembers.value = newMembers\n    console.log('成员数据更新:', projectMembers.value)\n  }\n}, { immediate: true })\n\nonMounted(() => {\n  if (props.project && props.project.id) {\n    // 如果父组件传递了成员数据，优先使用\n    if (props.members && props.members.length > 0) {\n      projectMembers.value = props.members\n      console.log('使用父组件传递的成员数据:', projectMembers.value)\n    } else {\n      fetchProjectMembers(props.project.id)\n    }\n    fetchTasks()\n  }\n})\n\n// 获取项目成员（ProjectMember 列表，带 user 信息）\nfunction fetchProjectMembers(projectId) {\n  if (!projectId) return\n  request.get(`/api/project-members/?project=${projectId}`).then(res => {\n    // 结构：[{id: ProjectMember.id, user: {id, username, ...}, ...}]\n    if (Array.isArray(res.data)) {\n      projectMembers.value = res.data.map(pm => ({\n        id: pm.id,\n        name: pm.user?.username || pm.user?.email || '未命名成员',\n        userId: pm.user?.id\n      }))\n    } else {\n      projectMembers.value = []\n    }\n    console.log('拉取到的项目成员（ProjectMember）:', projectMembers.value)\n  }).catch(err => {\n    console.error('获取项目成员失败', err)\n    projectMembers.value = []\n  })\n}\n\nfunction batchComplete() {\n  // 静态演示，实际应批量修改状态\n  selectedTasks.value = []\n}\n\nfunction batchDelete() {\n  // 静态演示，实际应批量删除\n  selectedTasks.value = []\n}\n\n// 新增：判断是否为当前登录用户\nfunction isCurrentUser(memberId) {\n  if (!currentUser.value || !currentUser.value.id) return false\n  return Number(memberId) === Number(currentUser.value.id)\n}\n\n// 编辑相关逻辑\nconst showEditTask = ref(false)\nconst editTask = ref(null)\nfunction openEditTask(task) {\n  editTask.value = { ...task, status: task.status || 'todo' }\n  showEditTask.value = true\n}\nfunction saveEditTask() {\n  if (!editTask.value.title) {\n    ElMessage.error('请填写任务名称')\n    return\n  }\n  request.patch(`/api/tasks/${editTask.value.id}/`, {\n    title: editTask.value.title,\n    description: editTask.value.description,\n    due_date: editTask.value.dueDate,\n    priority: editTask.value.priority === '高' ? 'high' : (editTask.value.priority === '低' ? 'low' : 'medium'),\n    tags: editTask.value.tags,\n    status: editTask.value.status || 'todo',\n  }).then(() => {\n    ElMessage.success('任务更新成功')\n    showEditTask.value = false\n    fetchTasks()\n    showDetail.value = false\n  }).catch(() => {\n    ElMessage.error('任务更新失败')\n  })\n}\n\n// 删除相关逻辑\nfunction confirmDeleteTask(task) {\n  ElMessageBox.confirm('确定要删除该任务吗？', '提示', {\n    confirmButtonText: '删除',\n    cancelButtonText: '取消',\n    type: 'warning',\n  }).then(() => {\n    request.delete(`/api/tasks/${task.id}/`).then(() => {\n      ElMessage.success('任务已删除')\n      fetchTasks()\n      showDetail.value = false\n    })\n  })\n}\n\nfunction refreshAllTaskAiAnalysis() {\n  if (!tasks.value.length) return\n  refreshingAi.value = true\n  let finished = 0\n  const total = tasks.value.length\n  tasks.value.forEach(task => {\n    task._aiLoading = true\n    request.get(`/api/tasks/${task.id}/ai_analysis/`).then(res => {\n      const suggestions = res.data?.suggestions || []\n      task.ai = suggestions\n    }).catch(() => {\n      task.ai = []\n    }).finally(() => {\n      task._aiLoading = false\n      finished++\n      if (finished === total) {\n        refreshingAi.value = false\n        ElMessage.success('AI分析完成')\n      }\n    })\n  })\n}\n</script>\n<style scoped>\n.module-card.modern-tasks { background: #fff; border-radius: 14px; box-shadow: 0 4px 24px rgba(0,0,0,0.07); margin-bottom: 24px; padding: 28px 28px 18px 28px; }\n.module-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 18px; }\n.module-title { font-size: 1.25rem; font-weight: 700; color: #1a2233; margin: 0; }\n.btn-group { display: flex; gap: 14px; }\n.modern-filters { display: flex; gap: 10px; align-items: center; margin-bottom: 10px; }\n.filter-input { width: 200px; }\n.filter-select { width: 110px; }\n.kanban-view.modern-kanban { margin-top: 18px; }\n.card.modern-card { border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.04); margin-bottom: 18px; border: none; }\n.card-header.modern-card-header { background: #f4f6fa; border-radius: 12px 12px 0 0; padding: 12px 18px; font-weight: 700; font-size: 1.1rem; }\n.task-card.modern-task-card { background: #fff; border: 1px solid #e3e8f0; border-radius: 10px; padding: 16px 14px; margin-bottom: 12px; cursor: pointer; transition: box-shadow 0.2s, transform 0.2s; box-shadow: 0 1px 4px rgba(0,0,0,0.03); }\n.task-card.modern-task-card:hover { box-shadow: 0 6px 24px rgba(0,0,0,0.10); transform: translateY(-2px) scale(1.02); border-color: #a3c3f5; }\n.task-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px; }\n.task-title-main { font-size: 1.08rem; font-weight: 600; color: #223355; }\n.task-meta-row { display: flex; gap: 16px; align-items: center; font-size: 0.95rem; color: #6c7a89; margin-bottom: 6px; }\n.task-tags { display: flex; gap: 6px; margin-bottom: 6px; }\n.task-description { color: #7a869a; font-size: 0.97rem; margin-bottom: 6px; min-height: 18px; }\n.ai-analysis-toggle { margin-top: 4px; margin-bottom: 2px; cursor: pointer; user-select: none; }\n.modern-ai-analysis { background: #f6f8fa; border-left: 3px solid #409eff; padding: 8px 12px; border-radius: 4px; margin-top: 4px; font-size: 0.97rem; }\n.el-dialog.modern-dialog .el-dialog__body { padding-top: 10px; }\n.el-dialog.modern-dialog .el-dialog__footer { padding-bottom: 10px; }\n.el-form.modern-form .el-form-item { margin-bottom: 14px; }\n.fade-enter-active, .fade-leave-active { transition: opacity 0.2s; }\n.fade-enter-from, .fade-leave-to { opacity: 0; }\n.kanban-col-header { display: flex; align-items: center; gap: 8px; }\n.kanban-col-dot { width: 10px; height: 10px; border-radius: 50%; display: inline-block; margin-right: 4px; }\n.kanban-col-dot.待处理 { background: #ffb300; }\n.kanban-col-dot.进行中 { background: #42a5f5; }\n.kanban-col-dot.已完成 { background: #43d39e; }\n.kanban-badge { margin-left: 4px; vertical-align: middle; }\n.modern-gantt .gantt-desc { text-align: center; color: #888; font-size: 15px; margin-top: 12px; }\n.modern-chart-view .card { background: #f9fbfd; }\n.task-progress-row { display: flex; align-items: center; gap: 8px; margin-bottom: 4px; }\n.progress-text { font-size: 12px; color: #888; }\n.member-completion-list { margin: 10px 0; }\n.member-item { display: flex; align-items: center; gap: 10px; margin-bottom: 6px; }\n</style> "],"mappings":"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","ignoreList":[]}]}