{"remainingRequest":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\setting\\Index.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\setting\\Index.vue","mtime":1747653127236},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\babel.config.js","mtime":1746431728000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1746431218000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHJlcXVlc3QgZnJvbSAnQC91dGlscy9yZXF1ZXN0JzsKaW1wb3J0IHsgRWxNZXNzYWdlIH0gZnJvbSAnZWxlbWVudC1wbHVzJzsKaW1wb3J0IHsgSW5mb0ZpbGxlZCwgUmVmcmVzaExlZnQgYXMgUmVmcmVzaExlZnRJY29uLCBDaGVjayBhcyBDaGVja0ljb24gfSBmcm9tICdAZWxlbWVudC1wbHVzL2ljb25zLXZ1ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnU2V0dGluZycsCiAgY29tcG9uZW50czogewogICAgSW5mb0ZpbGxlZCwKICAgICdyZWZyZXNoLWxlZnQnOiBSZWZyZXNoTGVmdEljb24sCiAgICAnY2hlY2snOiBDaGVja0ljb24KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgYWN0aXZlVGFiOiAnYWknLAogICAgICBhaVNldHRpbmdzOiB7CiAgICAgICAgbmlja25hbWU6ICcnLAogICAgICAgIGpvYjogJycsCiAgICAgICAgdHJhaXRzVGV4dDogJycsCiAgICAgICAgb3RoZXJJbmZvOiAnJwogICAgICB9LAogICAgICB1aVNldHRpbmdzOiB7CiAgICAgICAgdGhlbWU6ICdsaWdodCcsCiAgICAgICAgY29udGVudERlbnNpdHk6ICdub3JtYWwnLAogICAgICAgIGZvbnRTaXplOiAxNAogICAgICB9CiAgICB9OwogIH0sCiAgbW91bnRlZCgpIHsKICAgIC8vIOWPquWcqOmcgOimgeaXtuiOt+WPluiuvue9rgogICAgaWYgKHRoaXMuZGlhbG9nVmlzaWJsZSkgewogICAgICB0aGlzLmZldGNoVWlTZXR0aW5ncygpOwogICAgICB0aGlzLmZldGNoQWlTZXR0aW5ncygpOwogICAgfQogICAgLy8g5re75Yqg5aSE55CG5by556qX5pi+56S655qE5LqL5Lu255uR5ZCsCiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5oYW5kbGVLZXlEb3duKTsKICB9LAogIGJlZm9yZVVubW91bnQoKSB7CiAgICAvLyDnu4Tku7bplIDmr4HliY3muIXnkIbkuovku7bnm5HlkKwKICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLmhhbmRsZUtleURvd24pOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g5raI5oGv5o+Q56S65bCB6KOF77yM6YG/5YWN55u05o6l5L6d6LWWdGhpcy4kbWVzc2FnZQogICAgc2hvd01lc3NhZ2UodHlwZSwgbWVzc2FnZSkgewogICAgICB0cnkgewogICAgICAgIC8vIOWwneivleS9v+eUqEVsZW1lbnQgUGx1c+eahOa2iOaBr+e7hOS7tgogICAgICAgIEVsTWVzc2FnZSh7CiAgICAgICAgICB0eXBlLAogICAgICAgICAgbWVzc2FnZQogICAgICAgIH0pOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIC8vIOWkh+eUqOaWueahiO+8muS9v+eUqGNvbnNvbGXorrDlvZXmtojmga8KICAgICAgICBjb25zb2xlLmxvZyhgWyR7dHlwZX1dICR7bWVzc2FnZX1gKTsKICAgICAgfQogICAgfSwKICAgIC8vIOaatOmcsue7meeItue7hOS7tueahOaWueazle+8jOeUqOS6juaJk+W8gOiuvue9ruW8ueeqlwogICAgb3BlblNldHRpbmdzKCkgewogICAgICB0cnkgewogICAgICAgIGNvbnNvbGUubG9nKCforr7nva7lvLnnqpfooqvmiZPlvIAnKTsKICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgICAgIC8vIOaJk+W8gOW8ueeql+aXtuiOt+WPluiuvue9rgogICAgICAgIHRoaXMuZmV0Y2hVaVNldHRpbmdzKCk7CiAgICAgICAgdGhpcy5mZXRjaEFpU2V0dGluZ3MoKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfmiZPlvIDorr7nva7lvLnnqpflpLHotKU6JywgZXJyb3IpOwogICAgICAgIC8vIOehruS/neWNs+S9v+WHuumUmeS5n+S4jeS8mumYu+WhnueUqOaIt+eVjOmdogogICAgICB9CiAgICB9LAogICAgaGFuZGxlS2V5RG93bihlKSB7CiAgICAgIC8vIEVTQ+mUruWFs+mXreW8ueeqlwogICAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnICYmIHRoaXMuZGlhbG9nVmlzaWJsZSkgewogICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlQ2xvc2UoKSB7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgfSwKICAgIGFzeW5jIGZldGNoVWlTZXR0aW5ncygpIHsKICAgICAgdHJ5IHsKICAgICAgICAvLyDkvb/nlKhyZXF1ZXN05a6e55So56iL5bqP6Ieq5Yqo5pC65bim6K6k6K+BCiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KHsKICAgICAgICAgIHVybDogJy9hcGkvc2V0dGluZ3MvdWktcHJlZmVyZW5jZXMnLAogICAgICAgICAgbWV0aG9kOiAnZ2V0JwogICAgICAgIH0pOwogICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5zdWNjZXNzKSB7CiAgICAgICAgICB0aGlzLnVpU2V0dGluZ3MgPSB7CiAgICAgICAgICAgIC4uLnRoaXMudWlTZXR0aW5ncywKICAgICAgICAgICAgLi4ucmVzcG9uc2UuZGF0YQogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign6I635Y+W55WM6Z2i5YGP5aW95aSx6LSlOicsIGVycm9yKTsKICAgICAgICAvLyDmm7Tlj4vlpb3nmoTplJnor6/mtojmga/vvIzkuI3opoHmmrTpnLI0MDPplJnor68KICAgICAgICB0aGlzLnNob3dNZXNzYWdlKCdpbmZvJywgJ+mmluasoeS9v+eUqOezu+e7n++8jOaaguaXoOWBj+Wlveiuvue9ricpOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgZmV0Y2hBaVNldHRpbmdzKCkgewogICAgICB0cnkgewogICAgICAgIC8vIOiOt+WPluS4quaAp+WMlkFJ6K6+572uCiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KHsKICAgICAgICAgIHVybDogJy9hcGkvc2V0dGluZ3MvYWktc2V0dGluZ3MnLAogICAgICAgICAgbWV0aG9kOiAnZ2V0JwogICAgICAgIH0pOwogICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5zdWNjZXNzKSB7CiAgICAgICAgICAvLyDlsIZBUEnov5Tlm57nmoTlrZfmrrXmmKDlsITliLDmnKzlnLDnirbmgIEKICAgICAgICAgIHRoaXMuYWlTZXR0aW5ncyA9IHsKICAgICAgICAgICAgbmlja25hbWU6IHJlc3BvbnNlLmRhdGEubmlja25hbWUgfHwgJycsCiAgICAgICAgICAgIGpvYjogcmVzcG9uc2UuZGF0YS5qb2IgfHwgJycsCiAgICAgICAgICAgIHRyYWl0c1RleHQ6IHJlc3BvbnNlLmRhdGEudHJhaXRzX3RleHQgfHwgJycsCiAgICAgICAgICAgIG90aGVySW5mbzogcmVzcG9uc2UuZGF0YS5vdGhlcl9pbmZvIHx8ICcnCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfojrflj5bkuKrmgKfljJZBSeiuvue9ruWksei0pTonLCBlcnJvcik7CiAgICAgICAgdGhpcy5zaG93TWVzc2FnZSgnaW5mbycsICfpppbmrKHkvb/nlKjns7vnu5/vvIzmmoLml6DkuKrmgKfljJZBSeiuvue9ricpOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgc2F2ZUFpU2V0dGluZ3MoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgLy8g5p6E5bu66K+35rGC5pWw5o2u77yM5bCG5pys5Zyw5a2X5q615pig5bCE5Li6QVBJ5omA6ZyA5qC85byPCiAgICAgICAgY29uc3QgcmVxdWVzdERhdGEgPSB7CiAgICAgICAgICBuaWNrbmFtZTogdGhpcy5haVNldHRpbmdzLm5pY2tuYW1lLAogICAgICAgICAgam9iOiB0aGlzLmFpU2V0dGluZ3Muam9iLAogICAgICAgICAgdHJhaXRzX3RleHQ6IHRoaXMuYWlTZXR0aW5ncy50cmFpdHNUZXh0LAogICAgICAgICAgb3RoZXJfaW5mbzogdGhpcy5haVNldHRpbmdzLm90aGVySW5mbwogICAgICAgIH07CgogICAgICAgIC8vIOS/neWtmOS4quaAp+WMlkFJ6K6+572uCiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KHsKICAgICAgICAgIHVybDogJy9hcGkvc2V0dGluZ3MvYWktc2V0dGluZ3MnLAogICAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgICBkYXRhOiByZXF1ZXN0RGF0YQogICAgICAgIH0pOwogICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5zdWNjZXNzKSB7CiAgICAgICAgICB0aGlzLnNob3dNZXNzYWdlKCdzdWNjZXNzJywgJ+S4quaAp+WMlkFJ6K6+572u5bey5L+d5a2YJyk7CiAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc3QgZXJyb3JNc2cgPSByZXNwb25zZSAmJiByZXNwb25zZS5tZXNzYWdlIHx8ICfkv53lrZjlpLHotKUnOwogICAgICAgICAgdGhpcy5zaG93TWVzc2FnZSgnZXJyb3InLCBlcnJvck1zZyk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+S/neWtmOS4quaAp+WMlkFJ6K6+572u5aSx6LSlOicsIGVycm9yKTsKICAgICAgICB0aGlzLnNob3dNZXNzYWdlKCdlcnJvcicsICfkv53lrZjorr7nva7kv6Hmga/lpLHotKUnKTsKICAgICAgfQogICAgfSwKICAgIHJlc2V0QWlTZXR0aW5ncygpIHsKICAgICAgdGhpcy5haVNldHRpbmdzID0gewogICAgICAgIG5pY2tuYW1lOiAnJywKICAgICAgICBqb2I6ICcnLAogICAgICAgIHRyYWl0c1RleHQ6ICcnLAogICAgICAgIG90aGVySW5mbzogJycKICAgICAgfTsKICAgICAgdGhpcy5zaG93TWVzc2FnZSgnaW5mbycsICflt7Lph43nva7kuKrmgKfljJZBSeiuvue9ricpOwogICAgfSwKICAgIGFzeW5jIHNhdmVVaVNldHRpbmdzKCkgewogICAgICB0cnkgewogICAgICAgIC8vIOS9v+eUqHJlcXVlc3Tlrp7nlKjnqIvluo/oh6rliqjmkLrluKborqTor4EKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoewogICAgICAgICAgdXJsOiAnL2FwaS9zZXR0aW5ncy91aS1wcmVmZXJlbmNlcycsCiAgICAgICAgICBtZXRob2Q6ICdwb3N0JywKICAgICAgICAgIGRhdGE6IHRoaXMudWlTZXR0aW5ncwogICAgICAgIH0pOwogICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5zdWNjZXNzKSB7CiAgICAgICAgICB0aGlzLnNob3dNZXNzYWdlKCdzdWNjZXNzJywgJ+eVjOmdouWBj+Wlveiuvue9ruW3suS/neWtmCcpOwogICAgICAgICAgLy8g5bqU55So5paw55qE5Li76aKY6K6+572uCiAgICAgICAgICB0aGlzLmFwcGx5VGhlbWUoKTsKICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zdCBlcnJvck1zZyA9IHJlc3BvbnNlICYmIHJlc3BvbnNlLm1lc3NhZ2UgfHwgJ+S/neWtmOWksei0pSc7CiAgICAgICAgICB0aGlzLnNob3dNZXNzYWdlKCdlcnJvcicsIGVycm9yTXNnKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign5L+d5a2Y55WM6Z2i5YGP5aW95aSx6LSlOicsIGVycm9yKTsKICAgICAgICB0aGlzLnNob3dNZXNzYWdlKCdlcnJvcicsICfkv53lrZjorr7nva7kv6Hmga/lpLHotKUnKTsKICAgICAgfQogICAgfSwKICAgIHJlc2V0VWlTZXR0aW5ncygpIHsKICAgICAgdGhpcy51aVNldHRpbmdzID0gewogICAgICAgIHRoZW1lOiAnbGlnaHQnLAogICAgICAgIGNvbnRlbnREZW5zaXR5OiAnbm9ybWFsJywKICAgICAgICBmb250U2l6ZTogMTQKICAgICAgfTsKICAgICAgdGhpcy5zaG93TWVzc2FnZSgnaW5mbycsICflt7LmgaLlpI3pu5jorqTorr7nva7vvIzor7fngrnlh7vkv53lrZjnlJ/mlYgnKTsKICAgIH0sCiAgICBhcHBseVRoZW1lKCkgewogICAgICAvLyDlrp7pmYXlupTnlKjkuLvpopjnmoTpgLvovpHvvIzlj6/ku6XpgJrov4fkv67mlLlDU1Plj5jph4/mnaXlrp7njrAKICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS10aGVtZScsIHRoaXMudWlTZXR0aW5ncy50aGVtZSk7CiAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1mb250LXNpemUtYmFzZScsIGAke3RoaXMudWlTZXR0aW5ncy5mb250U2l6ZX1weGApOwogICAgfSwKICAgIC8vIOagueaNruW9k+WJjea/gOa0u+eahOagh+etvumhtemHjee9ruiuvue9rgogICAgcmVzZXRDdXJyZW50U2V0dGluZ3MoKSB7CiAgICAgIGlmICh0aGlzLmFjdGl2ZVRhYiA9PT0gJ2FpJykgewogICAgICAgIHRoaXMucmVzZXRBaVNldHRpbmdzKCk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5hY3RpdmVUYWIgPT09ICd1aScpIHsKICAgICAgICB0aGlzLnJlc2V0VWlTZXR0aW5ncygpOwogICAgICB9CiAgICB9LAogICAgLy8g5qC55o2u5b2T5YmN5r+A5rS755qE5qCH562+6aG15L+d5a2Y6K6+572uCiAgICBzYXZlQ3VycmVudFNldHRpbmdzKCkgewogICAgICBpZiAodGhpcy5hY3RpdmVUYWIgPT09ICdhaScpIHsKICAgICAgICB0aGlzLnNhdmVBaVNldHRpbmdzKCk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5hY3RpdmVUYWIgPT09ICd1aScpIHsKICAgICAgICB0aGlzLnNhdmVVaVNldHRpbmdzKCk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"names":["request","ElMessage","InfoFilled","RefreshLeft","RefreshLeftIcon","Check","CheckIcon","name","components","data","dialogVisible","activeTab","aiSettings","nickname","job","traitsText","otherInfo","uiSettings","theme","contentDensity","fontSize","mounted","fetchUiSettings","fetchAiSettings","document","addEventListener","handleKeyDown","beforeUnmount","removeEventListener","methods","showMessage","type","message","error","console","log","openSettings","e","key","handleClose","response","url","method","success","traits_text","other_info","saveAiSettings","requestData","errorMsg","resetAiSettings","saveUiSettings","applyTheme","resetUiSettings","documentElement","setAttribute","style","setProperty","resetCurrentSettings","saveCurrentSettings"],"sources":["C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\setting\\Index.vue"],"sourcesContent":["<template>\n  <div>\n    <!-- 右上角设置按钮 -->\n    <el-popover\n      placement=\"bottom\"\n      :width=\"120\"\n      trigger=\"click\"\n    >\n      <template #reference>\n        <div class=\"settings-button\">\n          <i class=\"el-icon-setting\"></i>\n        </div>\n      </template>\n      <div class=\"settings-menu\">\n        <div class=\"menu-item\" @click=\"openSettings\">系统设置</div>\n        <div class=\"menu-item\">帮助中心</div>\n        <div class=\"menu-divider\"></div>\n        <div class=\"menu-item\">退出登录</div>\n      </div>\n    </el-popover>\n    \n    <!-- 设置弹窗 -->\n    <el-dialog\n      title=\"系统设置\"\n      v-model=\"dialogVisible\"\n      width=\"800px\"\n      :before-close=\"handleClose\"\n      :close-on-click-modal=\"false\"\n      custom-class=\"settings-dialog\"\n      destroy-on-close\n    >\n      <div class=\"settings-container\">\n        <!-- 左侧导航 -->\n        <div class=\"settings-nav\">\n          <div \n            class=\"nav-item\" \n            :class=\"{ active: activeTab === 'ai' }\" \n            @click=\"activeTab = 'ai'\"\n          >\n            <i class=\"el-icon-cpu\"></i>\n            <span>个性化AI设置</span>\n          </div>\n          <div \n            class=\"nav-item\" \n            :class=\"{ active: activeTab === 'ui' }\" \n            @click=\"activeTab = 'ui'\"\n          >\n            <i class=\"el-icon-brush\"></i>\n            <span>界面偏好</span>\n          </div>\n        </div>\n        \n        <!-- 右侧内容 -->\n        <div class=\"settings-content\">\n          <!-- 统一的操作按钮区 -->\n          <div class=\"global-action-bar\">\n            <el-popconfirm\n              :title=\"`确定要恢复${activeTab === 'ai' ? '个性化AI设置' : '界面偏好'}的默认设置吗？`\"\n              confirm-button-text=\"确定\"\n              cancel-button-text=\"取消\"\n              @confirm=\"resetCurrentSettings\"\n            >\n              <template #reference>\n                <el-button>\n                  <el-icon><refresh-left /></el-icon>\n                  恢复默认\n                </el-button>\n              </template>\n            </el-popconfirm>\n            <el-button type=\"primary\" @click=\"saveCurrentSettings\">\n              <el-icon><check /></el-icon>\n              保存设置\n            </el-button>\n          </div>\n          \n          <!-- 个性化AI设置 -->\n          <div v-if=\"activeTab === 'ai'\" class=\"setting-section\">\n            <h3>个性化设置</h3>\n            <el-form label-position=\"top\" :label-width=\"0\">\n              <el-form-item>\n                <template #label>\n                  <span class=\"label-with-icon\">\n                    AI称呼您\n                    <el-tooltip\n                      effect=\"light\"\n                      content=\"您希望AI助手如何称呼您，比如您的姓名或昵称\"\n                      placement=\"top\"\n                    >\n                      <el-icon class=\"info-icon\"><info-filled /></el-icon>\n                    </el-tooltip>\n                  </span>\n                </template>\n                <el-input v-model=\"aiSettings.nickname\" placeholder=\"小福清\" class=\"custom-input-aligned\"></el-input>\n              </el-form-item>\n              \n              <el-form-item>\n                <template #label>\n                  <span class=\"label-with-icon\">\n                    您的职业\n                    <el-tooltip\n                      effect=\"light\"\n                      content=\"您的职业信息，帮助AI更好地理解您的专业背景\"\n                      placement=\"top\"\n                    >\n                      <el-icon class=\"info-icon\"><info-filled /></el-icon>\n                    </el-tooltip>\n                  </span>\n                </template>\n                <el-input v-model=\"aiSettings.job\" placeholder=\"程序员\" class=\"custom-input-aligned\"></el-input>\n              </el-form-item>\n              \n              <el-form-item>\n                <template #label>\n                  <span class=\"label-with-icon\">\n                    AI特征\n                    <el-tooltip\n                      effect=\"light\"\n                      content=\"您希望AI具备的特征，如专业、简洁、详细等，多个特征可用逗号分隔\"\n                      placement=\"top\"\n                    >\n                      <el-icon class=\"info-icon\"><info-filled /></el-icon>\n                    </el-tooltip>\n                  </span>\n                </template>\n                <el-input \n                  type=\"textarea\" \n                  v-model=\"aiSettings.traitsText\" \n                  placeholder=\"例如：简洁、专业、直接\" \n                  :rows=\"3\"\n                  class=\"custom-input-aligned textarea-input\">\n                </el-input>\n              </el-form-item>\n              \n              <el-form-item>\n                <template #label>\n                  <span class=\"label-with-icon\">\n                    其它信息\n                    <el-tooltip\n                      effect=\"light\"\n                      content=\"任何您希望AI了解的其他信息，如您的兴趣爱好、工作重点等\"\n                      placement=\"top\"\n                    >\n                      <el-icon class=\"info-icon\"><info-filled /></el-icon>\n                    </el-tooltip>\n                  </span>\n                </template>\n                <el-input \n                  type=\"textarea\" \n                  v-model=\"aiSettings.otherInfo\" \n                  placeholder=\"请输入您希望AI了解的其它信息\" \n                  :rows=\"4\"\n                  class=\"custom-input-aligned textarea-input\">\n                </el-input>\n              </el-form-item>\n            </el-form>\n          </div>\n          \n          <!-- 界面偏好设置 -->\n          <div v-if=\"activeTab === 'ui'\" class=\"setting-section\">\n            <h3>主题设置</h3>\n            <el-form label-position=\"left\" label-width=\"120px\">\n              <el-form-item label=\"主题模式\">\n                <el-radio-group v-model=\"uiSettings.theme\">\n                  <el-radio label=\"light\">浅色</el-radio>\n                  <el-radio label=\"dark\">深色</el-radio>\n                </el-radio-group>\n              </el-form-item>\n            </el-form>\n            \n            <h3>布局设置</h3>\n            <el-form label-position=\"left\" label-width=\"120px\">\n              <el-form-item label=\"内容密度\">\n                <el-radio-group v-model=\"uiSettings.contentDensity\">\n                  <el-radio label=\"compact\">紧凑</el-radio>\n                  <el-radio label=\"normal\">标准</el-radio>\n                  <el-radio label=\"comfortable\">宽松</el-radio>\n                </el-radio-group>\n              </el-form-item>\n              \n              <el-form-item label=\"字体大小\">\n                <el-slider v-model=\"uiSettings.fontSize\" :min=\"12\" :max=\"20\" :step=\"1\" show-stops></el-slider>\n                <span class=\"description\">{{ uiSettings.fontSize }}px</span>\n              </el-form-item>\n            </el-form>\n          </div>\n        </div>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport request from '@/utils/request'\nimport { ElMessage } from 'element-plus'\nimport { InfoFilled, RefreshLeft as RefreshLeftIcon, Check as CheckIcon } from '@element-plus/icons-vue'\n\nexport default {\n  name: 'Setting',\n  components: {\n    InfoFilled,\n    'refresh-left': RefreshLeftIcon,\n    'check': CheckIcon\n  },\n  data() {\n    return {\n      dialogVisible: false,\n      activeTab: 'ai',\n      aiSettings: {\n        nickname: '',\n        job: '',\n        traitsText: '',\n        otherInfo: ''\n      },\n      uiSettings: {\n        theme: 'light',\n        contentDensity: 'normal',\n        fontSize: 14\n      }\n    }\n  },\n  mounted() {\n    // 只在需要时获取设置\n    if (this.dialogVisible) {\n      this.fetchUiSettings()\n      this.fetchAiSettings()\n    }\n    // 添加处理弹窗显示的事件监听\n    document.addEventListener('keydown', this.handleKeyDown)\n  },\n  beforeUnmount() {\n    // 组件销毁前清理事件监听\n    document.removeEventListener('keydown', this.handleKeyDown)\n  },\n  methods: {\n    // 消息提示封装，避免直接依赖this.$message\n    showMessage(type, message) {\n      try {\n        // 尝试使用Element Plus的消息组件\n        ElMessage({\n          type,\n          message\n        })\n      } catch (error) {\n        // 备用方案：使用console记录消息\n        console.log(`[${type}] ${message}`)\n      }\n    },\n    // 暴露给父组件的方法，用于打开设置弹窗\n    openSettings() {\n      try {\n        console.log('设置弹窗被打开')\n        this.dialogVisible = true\n        // 打开弹窗时获取设置\n        this.fetchUiSettings()\n        this.fetchAiSettings()\n      } catch (error) {\n        console.error('打开设置弹窗失败:', error)\n        // 确保即使出错也不会阻塞用户界面\n      }\n    },\n    handleKeyDown(e) {\n      // ESC键关闭弹窗\n      if (e.key === 'Escape' && this.dialogVisible) {\n        this.dialogVisible = false\n      }\n    },\n    handleClose() {\n      this.dialogVisible = false\n    },\n    async fetchUiSettings() {\n      try {\n        // 使用request实用程序自动携带认证\n        const response = await request({\n          url: '/api/settings/ui-preferences',\n          method: 'get'\n        })\n        \n        if (response && response.success) {\n          this.uiSettings = { ...this.uiSettings, ...response.data }\n        }\n      } catch (error) {\n        console.error('获取界面偏好失败:', error)\n        // 更友好的错误消息，不要暴露403错误\n        this.showMessage('info', '首次使用系统，暂无偏好设置')\n      }\n    },\n    async fetchAiSettings() {\n      try {\n        // 获取个性化AI设置\n        const response = await request({\n          url: '/api/settings/ai-settings',\n          method: 'get'\n        })\n        \n        if (response && response.success) {\n          // 将API返回的字段映射到本地状态\n          this.aiSettings = {\n            nickname: response.data.nickname || '',\n            job: response.data.job || '',\n            traitsText: response.data.traits_text || '',\n            otherInfo: response.data.other_info || ''\n          }\n        }\n      } catch (error) {\n        console.error('获取个性化AI设置失败:', error)\n        this.showMessage('info', '首次使用系统，暂无个性化AI设置')\n      }\n    },\n    async saveAiSettings() {\n      try {\n        // 构建请求数据，将本地字段映射为API所需格式\n        const requestData = {\n          nickname: this.aiSettings.nickname,\n          job: this.aiSettings.job,\n          traits_text: this.aiSettings.traitsText,\n          other_info: this.aiSettings.otherInfo\n        }\n        \n        // 保存个性化AI设置\n        const response = await request({\n          url: '/api/settings/ai-settings',\n          method: 'post',\n          data: requestData\n        })\n        \n        if (response && response.success) {\n          this.showMessage('success', '个性化AI设置已保存')\n          this.dialogVisible = false\n        } else {\n          const errorMsg = (response && response.message) || '保存失败'\n          this.showMessage('error', errorMsg)\n        }\n      } catch (error) {\n        console.error('保存个性化AI设置失败:', error)\n        this.showMessage('error', '保存设置信息失败')\n      }\n    },\n    resetAiSettings() {\n      this.aiSettings = {\n        nickname: '',\n        job: '',\n        traitsText: '',\n        otherInfo: ''\n      }\n      this.showMessage('info', '已重置个性化AI设置')\n    },\n    async saveUiSettings() {\n      try {\n        // 使用request实用程序自动携带认证\n        const response = await request({\n          url: '/api/settings/ui-preferences',\n          method: 'post',\n          data: this.uiSettings\n        })\n        \n        if (response && response.success) {\n          this.showMessage('success', '界面偏好设置已保存')\n          // 应用新的主题设置\n          this.applyTheme()\n          this.dialogVisible = false\n        } else {\n          const errorMsg = (response && response.message) || '保存失败'\n          this.showMessage('error', errorMsg)\n        }\n      } catch (error) {\n        console.error('保存界面偏好失败:', error)\n        this.showMessage('error', '保存设置信息失败')\n      }\n    },\n    resetUiSettings() {\n      this.uiSettings = {\n        theme: 'light',\n        contentDensity: 'normal',\n        fontSize: 14\n      }\n      this.showMessage('info', '已恢复默认设置，请点击保存生效')\n    },\n    applyTheme() {\n      // 实际应用主题的逻辑，可以通过修改CSS变量来实现\n      document.documentElement.setAttribute('data-theme', this.uiSettings.theme)\n      document.documentElement.style.setProperty('--font-size-base', `${this.uiSettings.fontSize}px`)\n    },\n    // 根据当前激活的标签页重置设置\n    resetCurrentSettings() {\n      if (this.activeTab === 'ai') {\n        this.resetAiSettings();\n      } else if (this.activeTab === 'ui') {\n        this.resetUiSettings();\n      }\n    },\n    \n    // 根据当前激活的标签页保存设置\n    saveCurrentSettings() {\n      if (this.activeTab === 'ai') {\n        this.saveAiSettings();\n      } else if (this.activeTab === 'ui') {\n        this.saveUiSettings();\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.settings-button {\n  position: fixed;\n  top: 15px;\n  right: 20px;\n  z-index: 999;\n  cursor: pointer;\n  color: #409EFF;\n  font-size: 20px;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  transition: all 0.3s;\n}\n\n.settings-button:hover {\n  background-color: rgba(64, 158, 255, 0.1);\n}\n\n.settings-menu {\n  padding: 5px 0;\n}\n\n.menu-item {\n  padding: 8px 16px;\n  cursor: pointer;\n  transition: all 0.3s;\n  font-size: 14px;\n}\n\n.menu-item:hover {\n  background-color: #f5f7fa;\n  color: #409EFF;\n}\n\n.menu-divider {\n  height: 1px;\n  background-color: #eee;\n  margin: 5px 0;\n}\n\n.settings-container {\n  display: flex;\n  height: 500px;\n}\n\n.settings-nav {\n  width: 200px;\n  border-right: 1px solid #eee;\n  padding: 20px 0;\n}\n\n.nav-item {\n  padding: 15px 20px;\n  cursor: pointer;\n  transition: all 0.3s;\n  display: flex;\n  align-items: center;\n}\n\n.nav-item i {\n  margin-right: 10px;\n  font-size: 18px;\n}\n\n.nav-item.active {\n  background-color: #ecf5ff;\n  color: #409EFF;\n  border-right: 2px solid #409EFF;\n}\n\n.nav-item:hover:not(.active) {\n  background-color: #f5f7fa;\n}\n\n.settings-content {\n  flex: 1;\n  padding: 20px 30px;\n  overflow-y: auto;\n}\n\n.settings-dialog :deep(.el-dialog__body) {\n  padding: 0;\n}\n\n.setting-section {\n  margin-bottom: 30px;\n}\n\n.setting-section h3 {\n  font-size: 16px;\n  font-weight: 500;\n  margin: 20px 0;\n  color: #333;\n  border-bottom: 1px solid #eee;\n  padding-bottom: 10px;\n}\n\n.description {\n  color: #909399;\n  font-size: 13px;\n  margin-left: 10px;\n}\n\n.setting-action {\n  display: none; /* 隐藏原有的按钮区 */\n}\n\n.global-action-bar {\n  display: flex;\n  justify-content: flex-end;\n  padding: 0 0 15px 0;\n  margin-bottom: 20px;\n  border-bottom: 1px solid #eee;\n}\n\n.global-action-bar :deep(.el-button) {\n  margin-left: 10px;\n  display: inline-flex;\n  align-items: center;\n}\n\n.global-action-bar :deep(.el-button .el-icon) {\n  margin-right: 5px;\n}\n\n.custom-input-aligned {\n  width: 400px;\n  max-width: 100%;\n  border-radius: 4px;\n}\n\n.input-label {\n  font-size: 16px;\n  margin-bottom: 10px;\n  color: #333;\n}\n\n.input-wrapper {\n  display: flex;\n}\n\n.textarea-input :deep(.el-textarea__inner) {\n  font-size: 14px;\n  line-height: 1.5;\n  padding: 10px 12px;\n}\n\n.label-with-icon {\n  display: flex;\n  align-items: center;\n  gap: 5px;\n}\n\n.info-icon {\n  font-size: 16px;\n  color: #909399;\n  cursor: pointer;\n}\n\n.info-icon:hover {\n  color: #409EFF;\n}\n</style> "],"mappings":"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","ignoreList":[]}]}