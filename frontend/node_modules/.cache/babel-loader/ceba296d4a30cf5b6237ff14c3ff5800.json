{"remainingRequest":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\quill\\modules\\toolbar.js","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\quill\\modules\\toolbar.js","mtime":1751792162345},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\babel.config.js","mtime":1748077811200},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1746431219000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmZvci1lYWNoLmpzIjsKaW1wb3J0IERlbHRhIGZyb20gJ3F1aWxsLWRlbHRhJzsKaW1wb3J0IHsgRW1iZWRCbG90LCBTY29wZSB9IGZyb20gJ3BhcmNobWVudCc7CmltcG9ydCBRdWlsbCBmcm9tICcuLi9jb3JlL3F1aWxsLmpzJzsKaW1wb3J0IGxvZ2dlciBmcm9tICcuLi9jb3JlL2xvZ2dlci5qcyc7CmltcG9ydCBNb2R1bGUgZnJvbSAnLi4vY29yZS9tb2R1bGUuanMnOwpjb25zdCBkZWJ1ZyA9IGxvZ2dlcigncXVpbGw6dG9vbGJhcicpOwpjbGFzcyBUb29sYmFyIGV4dGVuZHMgTW9kdWxlIHsKICBjb25zdHJ1Y3RvcihxdWlsbCwgb3B0aW9ucykgewogICAgc3VwZXIocXVpbGwsIG9wdGlvbnMpOwogICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5vcHRpb25zLmNvbnRhaW5lcikpIHsKICAgICAgdmFyIF9xdWlsbCRjb250YWluZXIsIF9xdWlsbCRjb250YWluZXIkcGFyZTsKICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgIGNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAndG9vbGJhcicpOwogICAgICBhZGRDb250cm9scyhjb250YWluZXIsIHRoaXMub3B0aW9ucy5jb250YWluZXIpOwogICAgICAoX3F1aWxsJGNvbnRhaW5lciA9IHF1aWxsLmNvbnRhaW5lcikgPT09IG51bGwgfHwgX3F1aWxsJGNvbnRhaW5lciA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9xdWlsbCRjb250YWluZXIkcGFyZSA9IF9xdWlsbCRjb250YWluZXIucGFyZW50Tm9kZSkgPT09IG51bGwgfHwgX3F1aWxsJGNvbnRhaW5lciRwYXJlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcXVpbGwkY29udGFpbmVyJHBhcmUuaW5zZXJ0QmVmb3JlKGNvbnRhaW5lciwgcXVpbGwuY29udGFpbmVyKTsKICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7CiAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMuY29udGFpbmVyID09PSAnc3RyaW5nJykgewogICAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5vcHRpb25zLmNvbnRhaW5lcik7CiAgICB9IGVsc2UgewogICAgICB0aGlzLmNvbnRhaW5lciA9IHRoaXMub3B0aW9ucy5jb250YWluZXI7CiAgICB9CiAgICBpZiAoISh0aGlzLmNvbnRhaW5lciBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSkgewogICAgICBkZWJ1Zy5lcnJvcignQ29udGFpbmVyIHJlcXVpcmVkIGZvciB0b29sYmFyJywgdGhpcy5vcHRpb25zKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZCgncWwtdG9vbGJhcicpOwogICAgdGhpcy5jb250cm9scyA9IFtdOwogICAgdGhpcy5oYW5kbGVycyA9IHt9OwogICAgaWYgKHRoaXMub3B0aW9ucy5oYW5kbGVycykgewogICAgICBPYmplY3Qua2V5cyh0aGlzLm9wdGlvbnMuaGFuZGxlcnMpLmZvckVhY2goZm9ybWF0ID0+IHsKICAgICAgICB2YXIgX3RoaXMkb3B0aW9ucyRoYW5kbGVyOwogICAgICAgIGNvbnN0IGhhbmRsZXIgPSAoX3RoaXMkb3B0aW9ucyRoYW5kbGVyID0gdGhpcy5vcHRpb25zLmhhbmRsZXJzKSA9PT0gbnVsbCB8fCBfdGhpcyRvcHRpb25zJGhhbmRsZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJG9wdGlvbnMkaGFuZGxlcltmb3JtYXRdOwogICAgICAgIGlmIChoYW5kbGVyKSB7CiAgICAgICAgICB0aGlzLmFkZEhhbmRsZXIoZm9ybWF0LCBoYW5kbGVyKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogICAgQXJyYXkuZnJvbSh0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24sIHNlbGVjdCcpKS5mb3JFYWNoKGlucHV0ID0+IHsKICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcgogICAgICB0aGlzLmF0dGFjaChpbnB1dCk7CiAgICB9KTsKICAgIHRoaXMucXVpbGwub24oUXVpbGwuZXZlbnRzLkVESVRPUl9DSEFOR0UsICgpID0+IHsKICAgICAgY29uc3QgW3JhbmdlXSA9IHRoaXMucXVpbGwuc2VsZWN0aW9uLmdldFJhbmdlKCk7IC8vIHF1aWxsLmdldFNlbGVjdGlvbiB0cmlnZ2VycyB1cGRhdGUKICAgICAgdGhpcy51cGRhdGUocmFuZ2UpOwogICAgfSk7CiAgfQogIGFkZEhhbmRsZXIoZm9ybWF0LCBoYW5kbGVyKSB7CiAgICB0aGlzLmhhbmRsZXJzW2Zvcm1hdF0gPSBoYW5kbGVyOwogIH0KICBhdHRhY2goaW5wdXQpIHsKICAgIGxldCBmb3JtYXQgPSBBcnJheS5mcm9tKGlucHV0LmNsYXNzTGlzdCkuZmluZChjbGFzc05hbWUgPT4gewogICAgICByZXR1cm4gY2xhc3NOYW1lLmluZGV4T2YoJ3FsLScpID09PSAwOwogICAgfSk7CiAgICBpZiAoIWZvcm1hdCkgcmV0dXJuOwogICAgZm9ybWF0ID0gZm9ybWF0LnNsaWNlKCdxbC0nLmxlbmd0aCk7CiAgICBpZiAoaW5wdXQudGFnTmFtZSA9PT0gJ0JVVFRPTicpIHsKICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpOwogICAgfQogICAgaWYgKHRoaXMuaGFuZGxlcnNbZm9ybWF0XSA9PSBudWxsICYmIHRoaXMucXVpbGwuc2Nyb2xsLnF1ZXJ5KGZvcm1hdCkgPT0gbnVsbCkgewogICAgICBkZWJ1Zy53YXJuKCdpZ25vcmluZyBhdHRhY2hpbmcgdG8gbm9uZXhpc3RlbnQgZm9ybWF0JywgZm9ybWF0LCBpbnB1dCk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGNvbnN0IGV2ZW50TmFtZSA9IGlucHV0LnRhZ05hbWUgPT09ICdTRUxFQ1QnID8gJ2NoYW5nZScgOiAnY2xpY2snOwogICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGUgPT4gewogICAgICBsZXQgdmFsdWU7CiAgICAgIGlmIChpbnB1dC50YWdOYW1lID09PSAnU0VMRUNUJykgewogICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IKICAgICAgICBpZiAoaW5wdXQuc2VsZWN0ZWRJbmRleCA8IDApIHJldHVybjsKICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yCiAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSBpbnB1dC5vcHRpb25zW2lucHV0LnNlbGVjdGVkSW5kZXhdOwogICAgICAgIGlmIChzZWxlY3RlZC5oYXNBdHRyaWJ1dGUoJ3NlbGVjdGVkJykpIHsKICAgICAgICAgIHZhbHVlID0gZmFsc2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhbHVlID0gc2VsZWN0ZWQudmFsdWUgfHwgZmFsc2U7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmIChpbnB1dC5jbGFzc0xpc3QuY29udGFpbnMoJ3FsLWFjdGl2ZScpKSB7CiAgICAgICAgICB2YWx1ZSA9IGZhbHNlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yCiAgICAgICAgICB2YWx1ZSA9IGlucHV0LnZhbHVlIHx8ICFpbnB1dC5oYXNBdHRyaWJ1dGUoJ3ZhbHVlJyk7CiAgICAgICAgfQogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgfQogICAgICB0aGlzLnF1aWxsLmZvY3VzKCk7CiAgICAgIGNvbnN0IFtyYW5nZV0gPSB0aGlzLnF1aWxsLnNlbGVjdGlvbi5nZXRSYW5nZSgpOwogICAgICBpZiAodGhpcy5oYW5kbGVyc1tmb3JtYXRdICE9IG51bGwpIHsKICAgICAgICB0aGlzLmhhbmRsZXJzW2Zvcm1hdF0uY2FsbCh0aGlzLCB2YWx1ZSk7CiAgICAgIH0gZWxzZSBpZiAoCiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IKICAgICAgdGhpcy5xdWlsbC5zY3JvbGwucXVlcnkoZm9ybWF0KS5wcm90b3R5cGUgaW5zdGFuY2VvZiBFbWJlZEJsb3QpIHsKICAgICAgICB2YWx1ZSA9IHByb21wdChgRW50ZXIgJHtmb3JtYXR9YCk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tYWxlcnQKICAgICAgICBpZiAoIXZhbHVlKSByZXR1cm47CiAgICAgICAgdGhpcy5xdWlsbC51cGRhdGVDb250ZW50cyhuZXcgRGVsdGEoKQogICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgRml4IG1lIGxhdGVyCiAgICAgICAgLnJldGFpbihyYW5nZS5pbmRleCkKICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIEZpeCBtZSBsYXRlcgogICAgICAgIC5kZWxldGUocmFuZ2UubGVuZ3RoKS5pbnNlcnQoewogICAgICAgICAgW2Zvcm1hdF06IHZhbHVlCiAgICAgICAgfSksIFF1aWxsLnNvdXJjZXMuVVNFUik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5xdWlsbC5mb3JtYXQoZm9ybWF0LCB2YWx1ZSwgUXVpbGwuc291cmNlcy5VU0VSKTsKICAgICAgfQogICAgICB0aGlzLnVwZGF0ZShyYW5nZSk7CiAgICB9KTsKICAgIHRoaXMuY29udHJvbHMucHVzaChbZm9ybWF0LCBpbnB1dF0pOwogIH0KICB1cGRhdGUocmFuZ2UpIHsKICAgIGNvbnN0IGZvcm1hdHMgPSByYW5nZSA9PSBudWxsID8ge30gOiB0aGlzLnF1aWxsLmdldEZvcm1hdChyYW5nZSk7CiAgICB0aGlzLmNvbnRyb2xzLmZvckVhY2gocGFpciA9PiB7CiAgICAgIGNvbnN0IFtmb3JtYXQsIGlucHV0XSA9IHBhaXI7CiAgICAgIGlmIChpbnB1dC50YWdOYW1lID09PSAnU0VMRUNUJykgewogICAgICAgIGxldCBvcHRpb24gPSBudWxsOwogICAgICAgIGlmIChyYW5nZSA9PSBudWxsKSB7CiAgICAgICAgICBvcHRpb24gPSBudWxsOwogICAgICAgIH0gZWxzZSBpZiAoZm9ybWF0c1tmb3JtYXRdID09IG51bGwpIHsKICAgICAgICAgIG9wdGlvbiA9IGlucHV0LnF1ZXJ5U2VsZWN0b3IoJ29wdGlvbltzZWxlY3RlZF0nKTsKICAgICAgICB9IGVsc2UgaWYgKCFBcnJheS5pc0FycmF5KGZvcm1hdHNbZm9ybWF0XSkpIHsKICAgICAgICAgIGxldCB2YWx1ZSA9IGZvcm1hdHNbZm9ybWF0XTsKICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvIi9nLCAnXFwiJyk7CiAgICAgICAgICB9CiAgICAgICAgICBvcHRpb24gPSBpbnB1dC5xdWVyeVNlbGVjdG9yKGBvcHRpb25bdmFsdWU9IiR7dmFsdWV9Il1gKTsKICAgICAgICB9CiAgICAgICAgaWYgKG9wdGlvbiA9PSBudWxsKSB7CiAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRPRE8gZml4IG1lIGxhdGVyCiAgICAgICAgICBpbnB1dC52YWx1ZSA9ICcnOyAvLyBUT0RPIG1ha2UgY29uZmlndXJhYmxlPwogICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUT0RPIGZpeCBtZSBsYXRlcgogICAgICAgICAgaW5wdXQuc2VsZWN0ZWRJbmRleCA9IC0xOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSB0cnVlOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChyYW5nZSA9PSBudWxsKSB7CiAgICAgICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSgncWwtYWN0aXZlJyk7CiAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCdhcmlhLXByZXNzZWQnLCAnZmFsc2UnKTsKICAgICAgfSBlbHNlIGlmIChpbnB1dC5oYXNBdHRyaWJ1dGUoJ3ZhbHVlJykpIHsKICAgICAgICAvLyBib3RoIGJlaW5nIG51bGwgc2hvdWxkIG1hdGNoIChkZWZhdWx0IHZhbHVlcykKICAgICAgICAvLyAnMScgc2hvdWxkIG1hdGNoIHdpdGggMSAoaGVhZGVycykKICAgICAgICBjb25zdCB2YWx1ZSA9IGZvcm1hdHNbZm9ybWF0XTsKICAgICAgICBjb25zdCBpc0FjdGl2ZSA9IHZhbHVlID09PSBpbnB1dC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykgfHwgdmFsdWUgIT0gbnVsbCAmJiB2YWx1ZS50b1N0cmluZygpID09PSBpbnB1dC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykgfHwgdmFsdWUgPT0gbnVsbCAmJiAhaW5wdXQuZ2V0QXR0cmlidXRlKCd2YWx1ZScpOwogICAgICAgIGlucHV0LmNsYXNzTGlzdC50b2dnbGUoJ3FsLWFjdGl2ZScsIGlzQWN0aXZlKTsKICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ2FyaWEtcHJlc3NlZCcsIGlzQWN0aXZlLnRvU3RyaW5nKCkpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IGlzQWN0aXZlID0gZm9ybWF0c1tmb3JtYXRdICE9IG51bGw7CiAgICAgICAgaW5wdXQuY2xhc3NMaXN0LnRvZ2dsZSgncWwtYWN0aXZlJywgaXNBY3RpdmUpOwogICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZSgnYXJpYS1wcmVzc2VkJywgaXNBY3RpdmUudG9TdHJpbmcoKSk7CiAgICAgIH0KICAgIH0pOwogIH0KfQpUb29sYmFyLkRFRkFVTFRTID0ge307CmZ1bmN0aW9uIGFkZEJ1dHRvbihjb250YWluZXIsIGZvcm1hdCwgdmFsdWUpIHsKICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogIGlucHV0LnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKTsKICBpbnB1dC5jbGFzc0xpc3QuYWRkKGBxbC0ke2Zvcm1hdH1gKTsKICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ2FyaWEtcHJlc3NlZCcsICdmYWxzZScpOwogIGlmICh2YWx1ZSAhPSBudWxsKSB7CiAgICBpbnB1dC52YWx1ZSA9IHZhbHVlOwogICAgaW5wdXQuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgYCR7Zm9ybWF0fTogJHt2YWx1ZX1gKTsKICB9IGVsc2UgewogICAgaW5wdXQuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgZm9ybWF0KTsKICB9CiAgY29udGFpbmVyLmFwcGVuZENoaWxkKGlucHV0KTsKfQpmdW5jdGlvbiBhZGRDb250cm9scyhjb250YWluZXIsIGdyb3VwcykgewogIGlmICghQXJyYXkuaXNBcnJheShncm91cHNbMF0pKSB7CiAgICAvLyBAdHMtZXhwZWN0LWVycm9yCiAgICBncm91cHMgPSBbZ3JvdXBzXTsKICB9CiAgZ3JvdXBzLmZvckVhY2goY29udHJvbHMgPT4gewogICAgY29uc3QgZ3JvdXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICBncm91cC5jbGFzc0xpc3QuYWRkKCdxbC1mb3JtYXRzJyk7CiAgICBjb250cm9scy5mb3JFYWNoKGNvbnRyb2wgPT4gewogICAgICBpZiAodHlwZW9mIGNvbnRyb2wgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgYWRkQnV0dG9uKGdyb3VwLCBjb250cm9sKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCBmb3JtYXQgPSBPYmplY3Qua2V5cyhjb250cm9sKVswXTsKICAgICAgICBjb25zdCB2YWx1ZSA9IGNvbnRyb2xbZm9ybWF0XTsKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHsKICAgICAgICAgIGFkZFNlbGVjdChncm91cCwgZm9ybWF0LCB2YWx1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFkZEJ1dHRvbihncm91cCwgZm9ybWF0LCB2YWx1ZSk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChncm91cCk7CiAgfSk7Cn0KZnVuY3Rpb24gYWRkU2VsZWN0KGNvbnRhaW5lciwgZm9ybWF0LCB2YWx1ZXMpIHsKICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NlbGVjdCcpOwogIGlucHV0LmNsYXNzTGlzdC5hZGQoYHFsLSR7Zm9ybWF0fWApOwogIHZhbHVlcy5mb3JFYWNoKHZhbHVlID0+IHsKICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOwogICAgaWYgKHZhbHVlICE9PSBmYWxzZSkgewogICAgICBvcHRpb24uc2V0QXR0cmlidXRlKCd2YWx1ZScsIFN0cmluZyh2YWx1ZSkpOwogICAgfSBlbHNlIHsKICAgICAgb3B0aW9uLnNldEF0dHJpYnV0ZSgnc2VsZWN0ZWQnLCAnc2VsZWN0ZWQnKTsKICAgIH0KICAgIGlucHV0LmFwcGVuZENoaWxkKG9wdGlvbik7CiAgfSk7CiAgY29udGFpbmVyLmFwcGVuZENoaWxkKGlucHV0KTsKfQpUb29sYmFyLkRFRkFVTFRTID0gewogIGNvbnRhaW5lcjogbnVsbCwKICBoYW5kbGVyczogewogICAgY2xlYW4oKSB7CiAgICAgIGNvbnN0IHJhbmdlID0gdGhpcy5xdWlsbC5nZXRTZWxlY3Rpb24oKTsKICAgICAgaWYgKHJhbmdlID09IG51bGwpIHJldHVybjsKICAgICAgaWYgKHJhbmdlLmxlbmd0aCA9PT0gMCkgewogICAgICAgIGNvbnN0IGZvcm1hdHMgPSB0aGlzLnF1aWxsLmdldEZvcm1hdCgpOwogICAgICAgIE9iamVjdC5rZXlzKGZvcm1hdHMpLmZvckVhY2gobmFtZSA9PiB7CiAgICAgICAgICAvLyBDbGVhbiBmdW5jdGlvbmFsaXR5IGluIGV4aXN0aW5nIGFwcHMgb25seSBjbGVhbiBpbmxpbmUgZm9ybWF0cwogICAgICAgICAgaWYgKHRoaXMucXVpbGwuc2Nyb2xsLnF1ZXJ5KG5hbWUsIFNjb3BlLklOTElORSkgIT0gbnVsbCkgewogICAgICAgICAgICB0aGlzLnF1aWxsLmZvcm1hdChuYW1lLCBmYWxzZSwgUXVpbGwuc291cmNlcy5VU0VSKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnF1aWxsLnJlbW92ZUZvcm1hdChyYW5nZS5pbmRleCwgcmFuZ2UubGVuZ3RoLCBRdWlsbC5zb3VyY2VzLlVTRVIpOwogICAgICB9CiAgICB9LAogICAgZGlyZWN0aW9uKHZhbHVlKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBhbGlnbgogICAgICB9ID0gdGhpcy5xdWlsbC5nZXRGb3JtYXQoKTsKICAgICAgaWYgKHZhbHVlID09PSAncnRsJyAmJiBhbGlnbiA9PSBudWxsKSB7CiAgICAgICAgdGhpcy5xdWlsbC5mb3JtYXQoJ2FsaWduJywgJ3JpZ2h0JywgUXVpbGwuc291cmNlcy5VU0VSKTsKICAgICAgfSBlbHNlIGlmICghdmFsdWUgJiYgYWxpZ24gPT09ICdyaWdodCcpIHsKICAgICAgICB0aGlzLnF1aWxsLmZvcm1hdCgnYWxpZ24nLCBmYWxzZSwgUXVpbGwuc291cmNlcy5VU0VSKTsKICAgICAgfQogICAgICB0aGlzLnF1aWxsLmZvcm1hdCgnZGlyZWN0aW9uJywgdmFsdWUsIFF1aWxsLnNvdXJjZXMuVVNFUik7CiAgICB9LAogICAgaW5kZW50KHZhbHVlKSB7CiAgICAgIGNvbnN0IHJhbmdlID0gdGhpcy5xdWlsbC5nZXRTZWxlY3Rpb24oKTsKICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcgogICAgICBjb25zdCBmb3JtYXRzID0gdGhpcy5xdWlsbC5nZXRGb3JtYXQocmFuZ2UpOwogICAgICAvLyBAdHMtZXhwZWN0LWVycm9yCiAgICAgIGNvbnN0IGluZGVudCA9IHBhcnNlSW50KGZvcm1hdHMuaW5kZW50IHx8IDAsIDEwKTsKICAgICAgaWYgKHZhbHVlID09PSAnKzEnIHx8IHZhbHVlID09PSAnLTEnKSB7CiAgICAgICAgbGV0IG1vZGlmaWVyID0gdmFsdWUgPT09ICcrMScgPyAxIDogLTE7CiAgICAgICAgaWYgKGZvcm1hdHMuZGlyZWN0aW9uID09PSAncnRsJykgbW9kaWZpZXIgKj0gLTE7CiAgICAgICAgdGhpcy5xdWlsbC5mb3JtYXQoJ2luZGVudCcsIGluZGVudCArIG1vZGlmaWVyLCBRdWlsbC5zb3VyY2VzLlVTRVIpOwogICAgICB9CiAgICB9LAogICAgbGluayh2YWx1ZSkgewogICAgICBpZiAodmFsdWUgPT09IHRydWUpIHsKICAgICAgICB2YWx1ZSA9IHByb21wdCgnRW50ZXIgbGluayBVUkw6Jyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tYWxlcnQKICAgICAgfQogICAgICB0aGlzLnF1aWxsLmZvcm1hdCgnbGluaycsIHZhbHVlLCBRdWlsbC5zb3VyY2VzLlVTRVIpOwogICAgfSwKICAgIGxpc3QodmFsdWUpIHsKICAgICAgY29uc3QgcmFuZ2UgPSB0aGlzLnF1aWxsLmdldFNlbGVjdGlvbigpOwogICAgICAvLyBAdHMtZXhwZWN0LWVycm9yCiAgICAgIGNvbnN0IGZvcm1hdHMgPSB0aGlzLnF1aWxsLmdldEZvcm1hdChyYW5nZSk7CiAgICAgIGlmICh2YWx1ZSA9PT0gJ2NoZWNrJykgewogICAgICAgIGlmIChmb3JtYXRzLmxpc3QgPT09ICdjaGVja2VkJyB8fCBmb3JtYXRzLmxpc3QgPT09ICd1bmNoZWNrZWQnKSB7CiAgICAgICAgICB0aGlzLnF1aWxsLmZvcm1hdCgnbGlzdCcsIGZhbHNlLCBRdWlsbC5zb3VyY2VzLlVTRVIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnF1aWxsLmZvcm1hdCgnbGlzdCcsICd1bmNoZWNrZWQnLCBRdWlsbC5zb3VyY2VzLlVTRVIpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnF1aWxsLmZvcm1hdCgnbGlzdCcsIHZhbHVlLCBRdWlsbC5zb3VyY2VzLlVTRVIpOwogICAgICB9CiAgICB9CiAgfQp9OwpleHBvcnQgeyBUb29sYmFyIGFzIGRlZmF1bHQsIGFkZENvbnRyb2xzIH07"},{"version":3,"names":["Delta","EmbedBlot","Scope","Quill","logger","Module","debug","Toolbar","constructor","quill","options","Array","isArray","container","_quill$container","_quill$container$pare","document","createElement","setAttribute","addControls","parentNode","insertBefore","querySelector","HTMLElement","error","classList","add","controls","handlers","Object","keys","forEach","format","_this$options$handler","handler","addHandler","from","querySelectorAll","input","attach","on","events","EDITOR_CHANGE","range","selection","getRange","update","find","className","indexOf","slice","length","tagName","scroll","query","warn","eventName","addEventListener","e","value","selectedIndex","selected","hasAttribute","contains","preventDefault","focus","call","prototype","prompt","updateContents","retain","index","delete","insert","sources","USER","push","formats","getFormat","pair","option","replace","remove","isActive","getAttribute","toString","toggle","DEFAULTS","addButton","appendChild","groups","group","control","addSelect","values","String","clean","getSelection","name","INLINE","removeFormat","direction","align","indent","parseInt","modifier","link","list","default"],"sources":["../../src/modules/toolbar.ts"],"sourcesContent":["import Delta from 'quill-delta';\nimport { EmbedBlot, Scope } from 'parchment';\nimport Quill from '../core/quill.js';\nimport logger from '../core/logger.js';\nimport Module from '../core/module.js';\nimport type { Range } from '../core/selection.js';\n\nconst debug = logger('quill:toolbar');\n\ntype Handler = (this: Toolbar, value: any) => void;\n\nexport type ToolbarConfig = Array<\n  string[] | Array<string | Record<string, unknown>>\n>;\nexport interface ToolbarProps {\n  container?: HTMLElement | ToolbarConfig | null;\n  handlers?: Record<string, Handler>;\n  option?: number;\n  module?: boolean;\n  theme?: boolean;\n}\n\nclass Toolbar extends Module<ToolbarProps> {\n  static DEFAULTS: ToolbarProps;\n\n  container?: HTMLElement | null;\n  controls: [string, HTMLElement][];\n  handlers: Record<string, Handler>;\n\n  constructor(quill: Quill, options: Partial<ToolbarProps>) {\n    super(quill, options);\n    if (Array.isArray(this.options.container)) {\n      const container = document.createElement('div');\n      container.setAttribute('role', 'toolbar');\n      addControls(container, this.options.container);\n      quill.container?.parentNode?.insertBefore(container, quill.container);\n      this.container = container;\n    } else if (typeof this.options.container === 'string') {\n      this.container = document.querySelector(this.options.container);\n    } else {\n      this.container = this.options.container;\n    }\n    if (!(this.container instanceof HTMLElement)) {\n      debug.error('Container required for toolbar', this.options);\n      return;\n    }\n    this.container.classList.add('ql-toolbar');\n    this.controls = [];\n    this.handlers = {};\n    if (this.options.handlers) {\n      Object.keys(this.options.handlers).forEach((format) => {\n        const handler = this.options.handlers?.[format];\n        if (handler) {\n          this.addHandler(format, handler);\n        }\n      });\n    }\n    Array.from(this.container.querySelectorAll('button, select')).forEach(\n      (input) => {\n        // @ts-expect-error\n        this.attach(input);\n      },\n    );\n    this.quill.on(Quill.events.EDITOR_CHANGE, () => {\n      const [range] = this.quill.selection.getRange(); // quill.getSelection triggers update\n      this.update(range);\n    });\n  }\n\n  addHandler(format: string, handler: Handler) {\n    this.handlers[format] = handler;\n  }\n\n  attach(input: HTMLElement) {\n    let format = Array.from(input.classList).find((className) => {\n      return className.indexOf('ql-') === 0;\n    });\n    if (!format) return;\n    format = format.slice('ql-'.length);\n    if (input.tagName === 'BUTTON') {\n      input.setAttribute('type', 'button');\n    }\n    if (\n      this.handlers[format] == null &&\n      this.quill.scroll.query(format) == null\n    ) {\n      debug.warn('ignoring attaching to nonexistent format', format, input);\n      return;\n    }\n    const eventName = input.tagName === 'SELECT' ? 'change' : 'click';\n    input.addEventListener(eventName, (e) => {\n      let value;\n      if (input.tagName === 'SELECT') {\n        // @ts-expect-error\n        if (input.selectedIndex < 0) return;\n        // @ts-expect-error\n        const selected = input.options[input.selectedIndex];\n        if (selected.hasAttribute('selected')) {\n          value = false;\n        } else {\n          value = selected.value || false;\n        }\n      } else {\n        if (input.classList.contains('ql-active')) {\n          value = false;\n        } else {\n          // @ts-expect-error\n          value = input.value || !input.hasAttribute('value');\n        }\n        e.preventDefault();\n      }\n      this.quill.focus();\n      const [range] = this.quill.selection.getRange();\n      if (this.handlers[format] != null) {\n        this.handlers[format].call(this, value);\n      } else if (\n        // @ts-expect-error\n        this.quill.scroll.query(format).prototype instanceof EmbedBlot\n      ) {\n        value = prompt(`Enter ${format}`); // eslint-disable-line no-alert\n        if (!value) return;\n        this.quill.updateContents(\n          new Delta()\n            // @ts-expect-error Fix me later\n            .retain(range.index)\n            // @ts-expect-error Fix me later\n            .delete(range.length)\n            .insert({ [format]: value }),\n          Quill.sources.USER,\n        );\n      } else {\n        this.quill.format(format, value, Quill.sources.USER);\n      }\n      this.update(range);\n    });\n    this.controls.push([format, input]);\n  }\n\n  update(range: Range | null) {\n    const formats = range == null ? {} : this.quill.getFormat(range);\n    this.controls.forEach((pair) => {\n      const [format, input] = pair;\n      if (input.tagName === 'SELECT') {\n        let option: HTMLOptionElement | null = null;\n        if (range == null) {\n          option = null;\n        } else if (formats[format] == null) {\n          option = input.querySelector('option[selected]');\n        } else if (!Array.isArray(formats[format])) {\n          let value = formats[format];\n          if (typeof value === 'string') {\n            value = value.replace(/\"/g, '\\\\\"');\n          }\n          option = input.querySelector(`option[value=\"${value}\"]`);\n        }\n        if (option == null) {\n          // @ts-expect-error TODO fix me later\n          input.value = ''; // TODO make configurable?\n          // @ts-expect-error TODO fix me later\n          input.selectedIndex = -1;\n        } else {\n          option.selected = true;\n        }\n      } else if (range == null) {\n        input.classList.remove('ql-active');\n        input.setAttribute('aria-pressed', 'false');\n      } else if (input.hasAttribute('value')) {\n        // both being null should match (default values)\n        // '1' should match with 1 (headers)\n        const value = formats[format] as boolean | number | string | object;\n        const isActive =\n          value === input.getAttribute('value') ||\n          (value != null && value.toString() === input.getAttribute('value')) ||\n          (value == null && !input.getAttribute('value'));\n        input.classList.toggle('ql-active', isActive);\n        input.setAttribute('aria-pressed', isActive.toString());\n      } else {\n        const isActive = formats[format] != null;\n        input.classList.toggle('ql-active', isActive);\n        input.setAttribute('aria-pressed', isActive.toString());\n      }\n    });\n  }\n}\nToolbar.DEFAULTS = {};\n\nfunction addButton(container: HTMLElement, format: string, value?: string) {\n  const input = document.createElement('button');\n  input.setAttribute('type', 'button');\n  input.classList.add(`ql-${format}`);\n  input.setAttribute('aria-pressed', 'false');\n  if (value != null) {\n    input.value = value;\n    input.setAttribute('aria-label', `${format}: ${value}`);\n  } else {\n    input.setAttribute('aria-label', format);\n  }\n  container.appendChild(input);\n}\n\nfunction addControls(\n  container: HTMLElement,\n  groups:\n    | (string | Record<string, unknown>)[][]\n    | (string | Record<string, unknown>)[],\n) {\n  if (!Array.isArray(groups[0])) {\n    // @ts-expect-error\n    groups = [groups];\n  }\n  groups.forEach((controls: any) => {\n    const group = document.createElement('span');\n    group.classList.add('ql-formats');\n    controls.forEach((control: any) => {\n      if (typeof control === 'string') {\n        addButton(group, control);\n      } else {\n        const format = Object.keys(control)[0];\n        const value = control[format];\n        if (Array.isArray(value)) {\n          addSelect(group, format, value);\n        } else {\n          addButton(group, format, value);\n        }\n      }\n    });\n    container.appendChild(group);\n  });\n}\n\nfunction addSelect(\n  container: HTMLElement,\n  format: string,\n  values: Array<string | boolean>,\n) {\n  const input = document.createElement('select');\n  input.classList.add(`ql-${format}`);\n  values.forEach((value) => {\n    const option = document.createElement('option');\n    if (value !== false) {\n      option.setAttribute('value', String(value));\n    } else {\n      option.setAttribute('selected', 'selected');\n    }\n    input.appendChild(option);\n  });\n  container.appendChild(input);\n}\n\nToolbar.DEFAULTS = {\n  container: null,\n  handlers: {\n    clean() {\n      const range = this.quill.getSelection();\n      if (range == null) return;\n      if (range.length === 0) {\n        const formats = this.quill.getFormat();\n        Object.keys(formats).forEach((name) => {\n          // Clean functionality in existing apps only clean inline formats\n          if (this.quill.scroll.query(name, Scope.INLINE) != null) {\n            this.quill.format(name, false, Quill.sources.USER);\n          }\n        });\n      } else {\n        this.quill.removeFormat(range.index, range.length, Quill.sources.USER);\n      }\n    },\n    direction(value) {\n      const { align } = this.quill.getFormat();\n      if (value === 'rtl' && align == null) {\n        this.quill.format('align', 'right', Quill.sources.USER);\n      } else if (!value && align === 'right') {\n        this.quill.format('align', false, Quill.sources.USER);\n      }\n      this.quill.format('direction', value, Quill.sources.USER);\n    },\n    indent(value) {\n      const range = this.quill.getSelection();\n      // @ts-expect-error\n      const formats = this.quill.getFormat(range);\n      // @ts-expect-error\n      const indent = parseInt(formats.indent || 0, 10);\n      if (value === '+1' || value === '-1') {\n        let modifier = value === '+1' ? 1 : -1;\n        if (formats.direction === 'rtl') modifier *= -1;\n        this.quill.format('indent', indent + modifier, Quill.sources.USER);\n      }\n    },\n    link(value) {\n      if (value === true) {\n        value = prompt('Enter link URL:'); // eslint-disable-line no-alert\n      }\n      this.quill.format('link', value, Quill.sources.USER);\n    },\n    list(value) {\n      const range = this.quill.getSelection();\n      // @ts-expect-error\n      const formats = this.quill.getFormat(range);\n      if (value === 'check') {\n        if (formats.list === 'checked' || formats.list === 'unchecked') {\n          this.quill.format('list', false, Quill.sources.USER);\n        } else {\n          this.quill.format('list', 'unchecked', Quill.sources.USER);\n        }\n      } else {\n        this.quill.format('list', value, Quill.sources.USER);\n      }\n    },\n  },\n};\n\nexport { Toolbar as default, addControls };\n"],"mappings":"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","ignoreList":[]}]}