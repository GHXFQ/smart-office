{"remainingRequest":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\components\\profile\\AvatarDropdown.vue?vue&type=template&id=0cdae040&scoped=true","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\components\\profile\\AvatarDropdown.vue","mtime":1747306310907},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\babel.config.js","mtime":1746431728000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1746431218000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVzb2x2ZUNvbXBvbmVudCBhcyBfcmVzb2x2ZUNvbXBvbmVudCwgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUJsb2NrIGFzIF9jcmVhdGVCbG9jaywgY3JlYXRlQ29tbWVudFZOb2RlIGFzIF9jcmVhdGVDb21tZW50Vk5vZGUsIHRvRGlzcGxheVN0cmluZyBhcyBfdG9EaXNwbGF5U3RyaW5nLCBjcmVhdGVUZXh0Vk5vZGUgYXMgX2NyZWF0ZVRleHRWTm9kZSwgd2l0aEN0eCBhcyBfd2l0aEN0eCwgY3JlYXRlRWxlbWVudFZOb2RlIGFzIF9jcmVhdGVFbGVtZW50Vk5vZGUsIGNyZWF0ZVZOb2RlIGFzIF9jcmVhdGVWTm9kZSB9IGZyb20gInZ1ZSI7CmNvbnN0IF9ob2lzdGVkXzEgPSB7CiAgY2xhc3M6ICJhdmF0YXItY29udGFpbmVyIgp9Owpjb25zdCBfaG9pc3RlZF8yID0gewogIGNsYXNzOiAidXNlci1uYW1lIGhpZGRlbi14cyIKfTsKZXhwb3J0IGZ1bmN0aW9uIHJlbmRlcihfY3R4LCBfY2FjaGUsICRwcm9wcywgJHNldHVwLCAkZGF0YSwgJG9wdGlvbnMpIHsKICBjb25zdCBfY29tcG9uZW50X2VsX2F2YXRhciA9IF9yZXNvbHZlQ29tcG9uZW50KCJlbC1hdmF0YXIiKTsKICBjb25zdCBfY29tcG9uZW50X2VsX2Ryb3Bkb3duX2l0ZW0gPSBfcmVzb2x2ZUNvbXBvbmVudCgiZWwtZHJvcGRvd24taXRlbSIpOwogIGNvbnN0IF9jb21wb25lbnRfcm91dGVyX2xpbmsgPSBfcmVzb2x2ZUNvbXBvbmVudCgicm91dGVyLWxpbmsiKTsKICBjb25zdCBfY29tcG9uZW50X2VsX2Ryb3Bkb3duX21lbnUgPSBfcmVzb2x2ZUNvbXBvbmVudCgiZWwtZHJvcGRvd24tbWVudSIpOwogIGNvbnN0IF9jb21wb25lbnRfZWxfZHJvcGRvd24gPSBfcmVzb2x2ZUNvbXBvbmVudCgiZWwtZHJvcGRvd24iKTsKICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soX2NvbXBvbmVudF9lbF9kcm9wZG93biwgewogICAgdHJpZ2dlcjogImNsaWNrIiwKICAgIGNsYXNzOiAiYXZhdGFyLWRyb3Bkb3duIgogIH0sIHsKICAgIGRyb3Bkb3duOiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfZHJvcGRvd25fbWVudSwgbnVsbCwgewogICAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfcm91dGVyX2xpbmssIHsKICAgICAgICB0bzogIi9wcm9maWxlIgogICAgICB9LCB7CiAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2Ryb3Bkb3duX2l0ZW0sIG51bGwsIHsKICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IF9jYWNoZVsxXSB8fCAoX2NhY2hlWzFdID0gW19jcmVhdGVFbGVtZW50Vk5vZGUoImkiLCB7CiAgICAgICAgICAgIGNsYXNzOiAiZWwtaWNvbi11c2VyIgogICAgICAgICAgfSwgbnVsbCwgLTEgLyogSE9JU1RFRCAqLyksIF9jcmVhdGVUZXh0Vk5vZGUoIiDkuKrkurrkuK3lv4MgIildKSksCiAgICAgICAgICBfOiAxIC8qIFNUQUJMRSAqLwogICAgICAgIH0pXSksCiAgICAgICAgXzogMSAvKiBTVEFCTEUgKi8KICAgICAgfSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2Ryb3Bkb3duX2l0ZW0sIHsKICAgICAgICBkaXZpZGVkOiAiIiwKICAgICAgICBvbkNsaWNrOiBfY3R4LmhhbmRsZUxvZ291dAogICAgICB9LCB7CiAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoKCkgPT4gX2NhY2hlWzJdIHx8IChfY2FjaGVbMl0gPSBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiaSIsIHsKICAgICAgICAgIGNsYXNzOiAiZWwtaWNvbi1zd2l0Y2gtYnV0dG9uIgogICAgICAgIH0sIG51bGwsIC0xIC8qIEhPSVNURUQgKi8pLCBfY3JlYXRlVGV4dFZOb2RlKCIg6YCA5Ye655m75b2VICIpXSkpLAogICAgICAgIF86IDEgLyogU1RBQkxFICovCiAgICAgIH0sIDggLyogUFJPUFMgKi8sIFsib25DbGljayJdKV0pLAogICAgICBfOiAxIC8qIFNUQUJMRSAqLwogICAgfSldKSwKICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBfaG9pc3RlZF8xLCBbX2N0eC51c2VySW5mby5hdmF0YXIgPyAoX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soX2NvbXBvbmVudF9lbF9hdmF0YXIsIHsKICAgICAga2V5OiAwLAogICAgICBzaXplOiAzMiwKICAgICAgc3JjOiBfY3R4LnVzZXJJbmZvLmF2YXRhciA/IF9jdHgudXNlckluZm8uYXZhdGFyIDogbnVsbAogICAgfSwgbnVsbCwgOCAvKiBQUk9QUyAqLywgWyJzcmMiXSkpIDogKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKF9jb21wb25lbnRfZWxfYXZhdGFyLCB7CiAgICAgIGtleTogMSwKICAgICAgc2l6ZTogMzIsCiAgICAgIGNsYXNzOiAiZGVmYXVsdC1hdmF0YXIiCiAgICB9LCB7CiAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KCgpID0+IFtfY3JlYXRlVGV4dFZOb2RlKF90b0Rpc3BsYXlTdHJpbmcoX2N0eC51c2VySW5pdGlhbCksIDEgLyogVEVYVCAqLyldKSwKICAgICAgXzogMSAvKiBTVEFCTEUgKi8KICAgIH0pKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgic3BhbiIsIF9ob2lzdGVkXzIsIF90b0Rpc3BsYXlTdHJpbmcoX2N0eC51c2VySW5mby5uYW1lIHx8IF9jdHgudXNlckluZm8udXNlcm5hbWUpLCAxIC8qIFRFWFQgKi8pLCBfY2FjaGVbMF0gfHwgKF9jYWNoZVswXSA9IF9jcmVhdGVFbGVtZW50Vk5vZGUoImkiLCB7CiAgICAgIGNsYXNzOiAiZWwtaWNvbi1jYXJldC1ib3R0b20iCiAgICB9LCBudWxsLCAtMSAvKiBIT0lTVEVEICovKSldKV0pLAogICAgXzogMSAvKiBTVEFCTEUgKi8KICB9KTsKfQ=="},{"version":3,"names":["class","_createBlock","_component_el_dropdown","trigger","dropdown","_withCtx","_createVNode","_component_el_dropdown_menu","_component_router_link","to","_component_el_dropdown_item","_cache","_createElementVNode","divided","onClick","_ctx","handleLogout","_hoisted_1","userInfo","avatar","_component_el_avatar","size","src","userInitial","_hoisted_2","_toDisplayString","name","username"],"sources":["C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\components\\profile\\AvatarDropdown.vue"],"sourcesContent":["<template>\r\n  <el-dropdown trigger=\"click\" class=\"avatar-dropdown\">\r\n    <div class=\"avatar-container\">\r\n      <el-avatar \r\n        :size=\"32\" \r\n        :src=\"userInfo.avatar ? userInfo.avatar : null\" \r\n        v-if=\"userInfo.avatar\">\r\n      </el-avatar>\r\n      <el-avatar \r\n        :size=\"32\" \r\n        v-else \r\n        class=\"default-avatar\">\r\n        {{ userInitial }}\r\n      </el-avatar>\r\n      <span class=\"user-name hidden-xs\">{{ userInfo.name || userInfo.username }}</span>\r\n      <i class=\"el-icon-caret-bottom\"></i>\r\n    </div>\r\n\r\n    <template #dropdown>\r\n      <el-dropdown-menu>\r\n        <router-link to=\"/profile\">\r\n          <el-dropdown-item>\r\n            <i class=\"el-icon-user\"></i>\r\n            个人中心\r\n          </el-dropdown-item>\r\n        </router-link>\r\n        <el-dropdown-item divided @click=\"handleLogout\">\r\n          <i class=\"el-icon-switch-button\"></i>\r\n          退出登录\r\n        </el-dropdown-item>\r\n      </el-dropdown-menu>\r\n    </template>\r\n  </el-dropdown>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent, computed, onMounted } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useRouter } from 'vue-router'\r\n\r\nexport default defineComponent({\r\n  name: 'AvatarDropdown',\r\n  \r\n  setup() {\r\n    const store = useStore()\r\n    const router = useRouter()\r\n    \r\n    // 获取用户信息\r\n    const userInfo = computed(() => store.state.user.userInfo)\r\n    \r\n    // 计算用户名首字母（用于无头像时显示）\r\n    const userInitial = computed(() => {\r\n      if (userInfo.value.name) {\r\n        return userInfo.value.name.charAt(0)\r\n      } else if (userInfo.value.username) {\r\n        return userInfo.value.username.charAt(0)\r\n      }\r\n      return '用'\r\n    })\r\n    \r\n    // 如果没有用户信息，则获取用户信息\r\n    onMounted(() => {\r\n      if (!userInfo.value.id) {\r\n        store.dispatch('user/getUserInfo')\r\n      }\r\n    })\r\n    \r\n    // 处理退出登录\r\n    const handleLogout = () => {\r\n      store.dispatch('user/logout').then(() => {\r\n        router.push('/login')\r\n      })\r\n    }\r\n    \r\n    return {\r\n      userInfo,\r\n      userInitial,\r\n      handleLogout\r\n    }\r\n  }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.avatar-dropdown {\r\n  height: 100%;\r\n  cursor: pointer;\r\n  \r\n  .avatar-container {\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 0 8px;\r\n    \r\n    .default-avatar {\r\n      background-color: #409EFF;\r\n      color: #fff;\r\n      font-weight: bold;\r\n    }\r\n    \r\n    .user-name {\r\n      margin-left: 8px;\r\n      font-size: 14px;\r\n      color: #606266;\r\n    }\r\n    \r\n    .el-icon-caret-bottom {\r\n      margin-left: 4px;\r\n      font-size: 12px;\r\n    }\r\n  }\r\n}\r\n\r\n// 适配移动设备\r\n@media (max-width: 768px) {\r\n  .hidden-xs {\r\n    display: none;\r\n  }\r\n}\r\n</style> "],"mappings":";;EAESA,KAAK,EAAC;AAAkB;;EAYrBA,KAAK,EAAC;AAAqB;;;;;;;uBAbrCC,YAAA,CA+BcC,sBAAA;IA/BDC,OAAO,EAAC,OAAO;IAACH,KAAK,EAAC;;IAiBtBI,QAAQ,EAAAC,QAAA,CACjB,MAWmB,CAXnBC,YAAA,CAWmBC,2BAAA;wBAVjB,MAKc,CALdD,YAAA,CAKcE,sBAAA;QALDC,EAAE,EAAC;MAAU;0BACxB,MAGmB,CAHnBH,YAAA,CAGmBI,2BAAA;4BAFjB,MAA4BC,MAAA,QAAAA,MAAA,OAA5BC,mBAAA,CAA4B;YAAzBZ,KAAK,EAAC;UAAc,4B,iBAAK,QAE9B,E;;;;UAEFM,YAAA,CAGmBI,2BAAA;QAHDG,OAAO,EAAP,EAAO;QAAEC,OAAK,EAAEC,IAAA,CAAAC;;0BAChC,MAAqCL,MAAA,QAAAA,MAAA,OAArCC,mBAAA,CAAqC;UAAlCZ,KAAK,EAAC;QAAuB,4B,iBAAK,QAEvC,E;;;;;sBA3BJ,MAcM,CAdNY,mBAAA,CAcM,OAdNK,UAcM,GAVIF,IAAA,CAAAG,QAAQ,CAACC,MAAM,I,cAHvBlB,YAAA,CAIYmB,oBAAA;;MAHTC,IAAI,EAAE,EAAE;MACRC,GAAG,EAAEP,IAAA,CAAAG,QAAQ,CAACC,MAAM,GAAGJ,IAAA,CAAAG,QAAQ,CAACC,MAAM;uDAGzClB,YAAA,CAKYmB,oBAAA;;MAJTC,IAAI,EAAE,EAAE;MAETrB,KAAK,EAAC;;wBACN,MAAiB,C,kCAAde,IAAA,CAAAQ,WAAW,iB;;SAEhBX,mBAAA,CAAiF,QAAjFY,UAAiF,EAAAC,gBAAA,CAA5CV,IAAA,CAAAG,QAAQ,CAACQ,IAAI,IAAIX,IAAA,CAAAG,QAAQ,CAACS,QAAQ,kB,0BACvEf,mBAAA,CAAoC;MAAjCZ,KAAK,EAAC;IAAsB,4B","ignoreList":[]}]}