{"remainingRequest":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\calendar\\Index.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\calendar\\Index.vue","mtime":1748352860201},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\babel.config.js","mtime":1748077811200},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1746431218000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5tYXAuanMiOwppbXBvcnQgeyByZWYsIGNvbXB1dGVkLCBvbk1vdW50ZWQsIHdhdGNoLCBvblVubW91bnRlZCB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IEVsTWVzc2FnZSwgRWxNZXNzYWdlQm94IH0gZnJvbSAnZWxlbWVudC1wbHVzJzsKaW1wb3J0IHsgQXJyb3dMZWZ0LCBBcnJvd1JpZ2h0LCBQbHVzIH0gZnJvbSAnQGVsZW1lbnQtcGx1cy9pY29ucy12dWUnOwppbXBvcnQgeyBnZXRNb250aGx5RXZlbnRzLCBnZXRXZWVrbHlFdmVudHMsIGdldERhaWx5RXZlbnRzLCBjcmVhdGVFdmVudCwgdXBkYXRlRXZlbnQsIGRlbGV0ZUV2ZW50IGFzIGRlbGV0ZUNhbGVuZGFyRXZlbnQgfSBmcm9tICdAL2FwaS9jYWxlbmRhcic7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQ2FsZW5kYXInLAogIHNldHVwKCkgewogICAgLy8g5pel5Y6G6KeG5Zu+57G75Z6L77ya5pyIL+WRqC/ml6UKICAgIGNvbnN0IGNhbGVuZGFyVmlldyA9IHJlZignbW9udGgnKTsKCiAgICAvLyDlvZPliY3ml6XmnJ8KICAgIGNvbnN0IGN1cnJlbnREYXRlID0gcmVmKG5ldyBEYXRlKCkpOwoKICAgIC8vIOS6i+S7tuaVsOaNrgogICAgY29uc3QgZXZlbnRzID0gcmVmKFtdKTsKCiAgICAvLyDmoLzlvI/ljJblvZPliY3ml6XmnJ/moIfnrb4KICAgIGNvbnN0IGN1cnJlbnREYXRlTGFiZWwgPSBjb21wdXRlZCgoKSA9PiB7CiAgICAgIGNvbnN0IG9wdGlvbnMgPSB7CiAgICAgICAgeWVhcjogJ251bWVyaWMnLAogICAgICAgIG1vbnRoOiAnbG9uZycKICAgICAgfTsKICAgICAgaWYgKGNhbGVuZGFyVmlldy52YWx1ZSA9PT0gJ3dlZWsnKSB7CiAgICAgICAgcmV0dXJuIGAke2N1cnJlbnREYXRlLnZhbHVlLmdldEZ1bGxZZWFyKCl95bm0JHtjdXJyZW50RGF0ZS52YWx1ZS5nZXRNb250aCgpICsgMX3mnIjnrKwke01hdGguY2VpbCgoY3VycmVudERhdGUudmFsdWUuZ2V0RGF0ZSgpICsgZ2V0Rmlyc3REYXlPZk1vbnRoKGN1cnJlbnREYXRlLnZhbHVlKS5nZXREYXkoKSkgLyA3KX3lkahgOwogICAgICB9IGVsc2UgaWYgKGNhbGVuZGFyVmlldy52YWx1ZSA9PT0gJ2RheScpIHsKICAgICAgICByZXR1cm4gY3VycmVudERhdGUudmFsdWUudG9Mb2NhbGVEYXRlU3RyaW5nKCd6aC1DTicsIHsKICAgICAgICAgIHllYXI6ICdudW1lcmljJywKICAgICAgICAgIG1vbnRoOiAnbG9uZycsCiAgICAgICAgICBkYXk6ICdudW1lcmljJwogICAgICAgIH0pOwogICAgICB9CiAgICAgIHJldHVybiBjdXJyZW50RGF0ZS52YWx1ZS50b0xvY2FsZURhdGVTdHJpbmcoJ3poLUNOJywgb3B0aW9ucyk7CiAgICB9KTsKCiAgICAvLyDmmJ/mnJ/mlbDnu4QKICAgIGNvbnN0IHdlZWtEYXlzID0gcmVmKFsn5pelJywgJ+S4gCcsICfkuownLCAn5LiJJywgJ+WbmycsICfkupQnLCAn5YWtJ10pOwoKICAgIC8vIOWvueivneahhueKtuaAgQogICAgY29uc3QgYWRkRXZlbnREaWFsb2dWaXNpYmxlID0gcmVmKGZhbHNlKTsKICAgIGNvbnN0IGV2ZW50RGV0YWlsc0RpYWxvZ1Zpc2libGUgPSByZWYoZmFsc2UpOwogICAgY29uc3QgZWRpdEV2ZW50RGlhbG9nVmlzaWJsZSA9IHJlZihmYWxzZSk7CgogICAgLy8g5paw5bu65pel56iLCiAgICBjb25zdCBuZXdFdmVudCA9IHJlZih7CiAgICAgIHRpdGxlOiAnJywKICAgICAgc3RhcnQ6ICcnLAogICAgICBlbmQ6ICcnLAogICAgICBsb2NhdGlvbjogJycsCiAgICAgIHR5cGU6ICdibHVlJywKICAgICAgcmVtaW5kZXI6ICczMG1pbicsCiAgICAgIGRlc2NyaXB0aW9uOiAnJwogICAgfSk7CgogICAgLy8g6YCJ5Lit55qE5pel56iLCiAgICBjb25zdCBzZWxlY3RlZEV2ZW50ID0gcmVmKHt9KTsKCiAgICAvLyDmraPlnKjnvJbovpHnmoTml6XnqIsKICAgIGNvbnN0IGVkaXRpbmdFdmVudCA9IHJlZih7CiAgICAgIGlkOiAnJywKICAgICAgdGl0bGU6ICcnLAogICAgICBzdGFydDogJycsCiAgICAgIGVuZDogJycsCiAgICAgIGxvY2F0aW9uOiAnJywKICAgICAgdHlwZTogJ2JsdWUnLAogICAgICByZW1pbmRlcjogJzMwbWluJywKICAgICAgZGVzY3JpcHRpb246ICcnCiAgICB9KTsKCiAgICAvLyDnlJ/miJDmnIjop4blm77nmoTml6XmnJ/mlbDmja4KICAgIGNvbnN0IGRheXMgPSBjb21wdXRlZCgoKSA9PiB7CiAgICAgIGNvbnN0IHJlc3VsdCA9IFtdOwogICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7CgogICAgICAvLyDojrflj5blvZPmnIjnrKzkuIDlpKnmmK/mmJ/mnJ/lh6AKICAgICAgY29uc3QgZmlyc3REYXkgPSBnZXRGaXJzdERheU9mTW9udGgoY3VycmVudERhdGUudmFsdWUpLmdldERheSgpOwoKICAgICAgLy8g6I635Y+W5b2T5pyI5aSp5pWwCiAgICAgIGNvbnN0IGRheXNJbk1vbnRoID0gZ2V0RGF5c0luTW9udGgoY3VycmVudERhdGUudmFsdWUpOwoKICAgICAgLy8g6I635Y+W5LiK5Liq5pyI5aSp5pWwCiAgICAgIGNvbnN0IGRheXNJbkxhc3RNb250aCA9IGdldERheXNJbk1vbnRoKG5ldyBEYXRlKGN1cnJlbnREYXRlLnZhbHVlLmdldEZ1bGxZZWFyKCksIGN1cnJlbnREYXRlLnZhbHVlLmdldE1vbnRoKCkgLSAxKSk7CgogICAgICAvLyDmt7vliqDkuIrkuKrmnIjnmoTml6XmnJ8KICAgICAgZm9yIChsZXQgaSA9IGZpcnN0RGF5IC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICBjb25zdCBkYXkgPSBkYXlzSW5MYXN0TW9udGggLSBpOwogICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShjdXJyZW50RGF0ZS52YWx1ZS5nZXRGdWxsWWVhcigpLCBjdXJyZW50RGF0ZS52YWx1ZS5nZXRNb250aCgpIC0gMSwgZGF5KTsKICAgICAgICByZXN1bHQucHVzaCh7CiAgICAgICAgICBkYXRlOiBkYXksCiAgICAgICAgICBpc0N1cnJlbnRNb250aDogZmFsc2UsCiAgICAgICAgICBpc1RvZGF5OiBpc1NhbWVEYXkoZGF0ZSwgdG9kYXkpLAogICAgICAgICAgZXZlbnRzOiBnZXREYXlFdmVudHMoZGF0ZSkKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgLy8g5re75Yqg5b2T5pyI55qE5pel5pyfCiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IGRheXNJbk1vbnRoOyBpKyspIHsKICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoY3VycmVudERhdGUudmFsdWUuZ2V0RnVsbFllYXIoKSwgY3VycmVudERhdGUudmFsdWUuZ2V0TW9udGgoKSwgaSk7CiAgICAgICAgcmVzdWx0LnB1c2goewogICAgICAgICAgZGF0ZTogaSwKICAgICAgICAgIGlzQ3VycmVudE1vbnRoOiB0cnVlLAogICAgICAgICAgaXNUb2RheTogaXNTYW1lRGF5KGRhdGUsIHRvZGF5KSwKICAgICAgICAgIGV2ZW50czogZ2V0RGF5RXZlbnRzKGRhdGUpCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIC8vIOa3u+WKoOS4i+S4quaciOeahOaXpeacn++8jOihpea7oTQy5Liq5qC85a2Q77yINuihjDfliJfvvIkKICAgICAgY29uc3QgcmVtYWluaW5nID0gNDIgLSByZXN1bHQubGVuZ3RoOwogICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSByZW1haW5pbmc7IGkrKykgewogICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShjdXJyZW50RGF0ZS52YWx1ZS5nZXRGdWxsWWVhcigpLCBjdXJyZW50RGF0ZS52YWx1ZS5nZXRNb250aCgpICsgMSwgaSk7CiAgICAgICAgcmVzdWx0LnB1c2goewogICAgICAgICAgZGF0ZTogaSwKICAgICAgICAgIGlzQ3VycmVudE1vbnRoOiBmYWxzZSwKICAgICAgICAgIGlzVG9kYXk6IGlzU2FtZURheShkYXRlLCB0b2RheSksCiAgICAgICAgICBldmVudHM6IGdldERheUV2ZW50cyhkYXRlKQogICAgICAgIH0pOwogICAgICB9CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9KTsKCiAgICAvLyDlkajop4blm77mlbDmja4KICAgIGNvbnN0IHdlZWtEYXRlcyA9IGNvbXB1dGVkKCgpID0+IHsKICAgICAgY29uc3QgcmVzdWx0ID0gW107CiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShjdXJyZW50RGF0ZS52YWx1ZSk7CiAgICAgIGNvbnN0IGRheSA9IGRhdGUuZ2V0RGF5KCk7CgogICAgICAvLyDorr7nva7liLDmnKzlkajnmoTlkajml6UKICAgICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpIC0gZGF5KTsKCiAgICAgIC8vIOeUn+aIkOS4gOWRqOeahOaXpeacnwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDc7IGkrKykgewogICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoZGF0ZSk7CiAgICAgICAgY3VycmVudERhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSArIGkpOwogICAgICAgIGNvbnN0IGRheUV2ZW50cyA9IGdldERheUV2ZW50cyhjdXJyZW50RGF0ZSk7CiAgICAgICAgLy8g5omA5pyJ5LqL5Lu25L2c5Li65pmu6YCa5LqL5Lu25aSE55CGCiAgICAgICAgY29uc3QgZXZlbnRHcm91cHMgPSBvcmdhbml6ZU92ZXJsYXBwaW5nRXZlbnRzKGRheUV2ZW50cyk7CiAgICAgICAgcmVzdWx0LnB1c2goewogICAgICAgICAgZGF0ZTogY3VycmVudERhdGUuZ2V0RGF0ZSgpLAogICAgICAgICAgZGF5TmFtZTogd2Vla0RheXMudmFsdWVbaV0sCiAgICAgICAgICBpc1RvZGF5OiBpc1NhbWVEYXkoY3VycmVudERhdGUsIG5ldyBEYXRlKCkpLAogICAgICAgICAgZnVsbERhdGU6IGN1cnJlbnREYXRlLAogICAgICAgICAgZXZlbnRzOiBkYXlFdmVudHMsCiAgICAgICAgICBhbGxEYXlFdmVudHM6IFtdLAogICAgICAgICAgLy8g5L+d55WZ56m65pWw57uE5Lul5YW85a65546w5pyJ5Luj56CBCiAgICAgICAgICBldmVudEdyb3VwczogZXZlbnRHcm91cHMKICAgICAgICB9KTsKICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0OwogICAgfSk7CgogICAgLy8g5pel6KeG5Zu+5LqL5Lu2CiAgICBjb25zdCBkYXlFdmVudHMgPSBjb21wdXRlZCgoKSA9PiB7CiAgICAgIHJldHVybiBnZXREYXlFdmVudHMoY3VycmVudERhdGUudmFsdWUpOwogICAgfSk7CgogICAgLy8g5pel6KeG5Zu+5YWo5aSp5LqL5Lu2IC0g5L+d55WZ56m65pWw57uE5Lul5YW85a65546w5pyJ5Luj56CBCiAgICBjb25zdCBhbGxEYXlFdmVudHMgPSBjb21wdXRlZCgoKSA9PiB7CiAgICAgIHJldHVybiBbXTsKICAgIH0pOwoKICAgIC8vIOaXpeinhuWbvuaZrumAmuS6i+S7tuWIhue7hCAtIOaJgOacieS6i+S7tuS9nOS4uuaZrumAmuS6i+S7tuWkhOeQhgogICAgY29uc3QgZGF5RXZlbnRHcm91cHMgPSBjb21wdXRlZCgoKSA9PiB7CiAgICAgIHJldHVybiBvcmdhbml6ZU92ZXJsYXBwaW5nRXZlbnRzKGRheUV2ZW50cy52YWx1ZSk7CiAgICB9KTsKCiAgICAvLyDnu4Tnu4fph43lj6Dkuovku7bkuLrkuI3lkIzliIbnu4QKICAgIGNvbnN0IG9yZ2FuaXplT3ZlcmxhcHBpbmdFdmVudHMgPSBldmVudHMgPT4gewogICAgICBpZiAoIWV2ZW50cy5sZW5ndGgpIHJldHVybiBbW11dOwoKICAgICAgLy8g5oyJ5byA5aeL5pe26Ze05o6S5bqPCiAgICAgIGNvbnN0IHNvcnRlZEV2ZW50cyA9IFsuLi5ldmVudHNdLnNvcnQoKGEsIGIpID0+IGEuc3RhcnQuZ2V0VGltZSgpIC0gYi5zdGFydC5nZXRUaW1lKCkpOwogICAgICBjb25zdCBncm91cHMgPSBbXTsKICAgICAgc29ydGVkRXZlbnRzLmZvckVhY2goZXZlbnQgPT4gewogICAgICAgIC8vIOafpeaJvuWPr+S7peaUvue9rueahOe7hAogICAgICAgIGxldCBwbGFjZWQgPSBmYWxzZTsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdyb3Vwcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgY29uc3QgZ3JvdXAgPSBncm91cHNbaV07CiAgICAgICAgICBjb25zdCBsYXN0RXZlbnQgPSBncm91cFtncm91cC5sZW5ndGggLSAxXTsKCiAgICAgICAgICAvLyDmo4Dmn6XlvZPliY3kuovku7bmmK/lkKbkuI7nu4TkuK3mnIDlkI7kuIDkuKrkuovku7bkuI3ph43lj6AKICAgICAgICAgIGlmIChsYXN0RXZlbnQgJiYgZXZlbnQuc3RhcnQuZ2V0VGltZSgpID49IGxhc3RFdmVudC5lbmQuZ2V0VGltZSgpKSB7CiAgICAgICAgICAgIGdyb3VwLnB1c2goZXZlbnQpOwogICAgICAgICAgICBwbGFjZWQgPSB0cnVlOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIOWmguaenOayoeacieaJvuWIsOWQiOmAgueahOe7hO+8jOWIm+W7uuaWsOe7hAogICAgICAgIGlmICghcGxhY2VkKSB7CiAgICAgICAgICBncm91cHMucHVzaChbZXZlbnRdKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gZ3JvdXBzLmxlbmd0aCA/IGdyb3VwcyA6IFtbXV07CiAgICB9OwoKICAgIC8vIOWKoOi9veaciOinhuWbvuaVsOaNrgogICAgY29uc3QgbG9hZE1vbnRobHlFdmVudHMgPSBhc3luYyAoKSA9PiB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgeWVhciA9IGN1cnJlbnREYXRlLnZhbHVlLmdldEZ1bGxZZWFyKCk7CiAgICAgICAgY29uc3QgbW9udGggPSBjdXJyZW50RGF0ZS52YWx1ZS5nZXRNb250aCgpICsgMTsgLy8gQVBJ6ZyA6KaBMS0xMueahOaciOS7vQoKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldE1vbnRobHlFdmVudHMoeWVhciwgbW9udGgpOwogICAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzKSB7CiAgICAgICAgICBldmVudHMudmFsdWUgPSBwYXJzZUV2ZW50c0RhdGEocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WKoOi9veaciOW6puS6i+S7tuWksei0pTonLCBlcnJvcik7CiAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfliqDovb3mnIjluqbkuovku7blpLHotKUnKTsKICAgICAgfQogICAgfTsKCiAgICAvLyDliqDovb3lkajop4blm77mlbDmja4KICAgIGNvbnN0IGxvYWRXZWVrbHlFdmVudHMgPSBhc3luYyAoKSA9PiB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgZGF0ZSA9IGZvcm1hdERhdGVTdHJpbmcoY3VycmVudERhdGUudmFsdWUpOwogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ2V0V2Vla2x5RXZlbnRzKGRhdGUpOwogICAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzKSB7CiAgICAgICAgICBldmVudHMudmFsdWUgPSBwYXJzZUV2ZW50c0RhdGEocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WKoOi9veWRqOS6i+S7tuWksei0pTonLCBlcnJvcik7CiAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfliqDovb3lkajkuovku7blpLHotKUnKTsKICAgICAgfQogICAgfTsKCiAgICAvLyDliqDovb3ml6Xop4blm77mlbDmja4KICAgIGNvbnN0IGxvYWREYWlseUV2ZW50cyA9IGFzeW5jICgpID0+IHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBkYXRlID0gZm9ybWF0RGF0ZVN0cmluZyhjdXJyZW50RGF0ZS52YWx1ZSk7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZXREYWlseUV2ZW50cyhkYXRlKTsKICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcykgewogICAgICAgICAgZXZlbnRzLnZhbHVlID0gcGFyc2VFdmVudHNEYXRhKHJlc3BvbnNlLmRhdGEpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfliqDovb3ml6Xkuovku7blpLHotKU6JywgZXJyb3IpOwogICAgICAgIEVsTWVzc2FnZS5lcnJvcign5Yqg6L295pel5LqL5Lu25aSx6LSlJyk7CiAgICAgIH0KICAgIH07CgogICAgLy8g5qC55o2u6KeG5Zu+57G75Z6L5Yqg6L295LqL5Lu2CiAgICBjb25zdCBsb2FkRXZlbnRzID0gKCkgPT4gewogICAgICBpZiAoY2FsZW5kYXJWaWV3LnZhbHVlID09PSAnbW9udGgnKSB7CiAgICAgICAgbG9hZE1vbnRobHlFdmVudHMoKTsKICAgICAgfSBlbHNlIGlmIChjYWxlbmRhclZpZXcudmFsdWUgPT09ICd3ZWVrJykgewogICAgICAgIGxvYWRXZWVrbHlFdmVudHMoKTsKICAgICAgfSBlbHNlIGlmIChjYWxlbmRhclZpZXcudmFsdWUgPT09ICdkYXknKSB7CiAgICAgICAgbG9hZERhaWx5RXZlbnRzKCk7CiAgICAgIH0KICAgIH07CgogICAgLy8g6Kej5p6Q5LqL5Lu25pWw5o2uCiAgICBjb25zdCBwYXJzZUV2ZW50c0RhdGEgPSBkYXRhID0+IHsKICAgICAgcmV0dXJuIGRhdGEubWFwKGl0ZW0gPT4gewogICAgICAgIC8vIOebtOaOpeS9v+eUqOWOn+Wni+aXtumXtOWtl+espuS4su+8jOmBv+WFjeaXtuWMuui9rOaNogogICAgICAgIHJldHVybiB7CiAgICAgICAgICBpZDogaXRlbS5pZCwKICAgICAgICAgIHRpdGxlOiBpdGVtLnRpdGxlLAogICAgICAgICAgc3RhcnQ6IG5ldyBEYXRlKGl0ZW0uc3RhcnQpLAogICAgICAgICAgZW5kOiBuZXcgRGF0ZShpdGVtLmVuZCksCiAgICAgICAgICBsb2NhdGlvbjogaXRlbS5sb2NhdGlvbiwKICAgICAgICAgIHR5cGU6IGl0ZW0udHlwZSwKICAgICAgICAgIHJlbWluZGVyOiBpdGVtLnJlbWluZGVyLAogICAgICAgICAgZGVzY3JpcHRpb246IGl0ZW0uZGVzY3JpcHRpb24sCiAgICAgICAgICBjcmVhdG9yOiBpdGVtLmNyZWF0b3IsCiAgICAgICAgICBjcmVhdG9yX25hbWU6IGl0ZW0uY3JlYXRvcl9uYW1lLAogICAgICAgICAgcGFydGljaXBhbnRzOiBpdGVtLnBhcnRpY2lwYW50cywKICAgICAgICAgIHBhcnRpY2lwYW50c19pbmZvOiBpdGVtLnBhcnRpY2lwYW50c19pbmZvCiAgICAgICAgfTsKICAgICAgfSk7CiAgICB9OwoKICAgIC8vIOagvOW8j+WMluaXpeacn+S4uuWtl+espuS4sgogICAgY29uc3QgZm9ybWF0RGF0ZVN0cmluZyA9IGRhdGUgPT4gewogICAgICBjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpOwogICAgICBjb25zdCBtb250aCA9IChkYXRlLmdldE1vbnRoKCkgKyAxKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7CiAgICAgIGNvbnN0IGRheSA9IGRhdGUuZ2V0RGF0ZSgpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKTsKICAgICAgcmV0dXJuIGAke3llYXJ9LSR7bW9udGh9LSR7ZGF5fWA7CiAgICB9OwoKICAgIC8vIOaXpeacn+mAieaLqQogICAgY29uc3Qgc2VsZWN0RGF5ID0gZGF5ID0+IHsKICAgICAgaWYgKCFkYXkuaXNDdXJyZW50TW9udGgpIHsKICAgICAgICBpZiAoZGF5LmRhdGUgPiAxNSkgewogICAgICAgICAgLy8g5YmN5LiA5Liq5pyICiAgICAgICAgICBwcmV2KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIOWQjuS4gOS4quaciAogICAgICAgICAgbmV4dCgpOwogICAgICAgIH0KICAgICAgfQogICAgfTsKCiAgICAvLyDov5Tlm57ku4rlpKkKICAgIGNvbnN0IHRvZGF5ID0gKCkgPT4gewogICAgICBjdXJyZW50RGF0ZS52YWx1ZSA9IG5ldyBEYXRlKCk7CiAgICB9OwoKICAgIC8vIOS4iuS4gOS4quaXtumXtOWNleS9jQogICAgY29uc3QgcHJldiA9ICgpID0+IHsKICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGN1cnJlbnREYXRlLnZhbHVlKTsKICAgICAgaWYgKGNhbGVuZGFyVmlldy52YWx1ZSA9PT0gJ21vbnRoJykgewogICAgICAgIGRhdGUuc2V0TW9udGgoZGF0ZS5nZXRNb250aCgpIC0gMSk7CiAgICAgIH0gZWxzZSBpZiAoY2FsZW5kYXJWaWV3LnZhbHVlID09PSAnd2VlaycpIHsKICAgICAgICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgLSA3KTsKICAgICAgfSBlbHNlIGlmIChjYWxlbmRhclZpZXcudmFsdWUgPT09ICdkYXknKSB7CiAgICAgICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpIC0gMSk7CiAgICAgIH0KICAgICAgY3VycmVudERhdGUudmFsdWUgPSBkYXRlOwogICAgfTsKCiAgICAvLyDkuIvkuIDkuKrml7bpl7TljZXkvY0KICAgIGNvbnN0IG5leHQgPSAoKSA9PiB7CiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShjdXJyZW50RGF0ZS52YWx1ZSk7CiAgICAgIGlmIChjYWxlbmRhclZpZXcudmFsdWUgPT09ICdtb250aCcpIHsKICAgICAgICBkYXRlLnNldE1vbnRoKGRhdGUuZ2V0TW9udGgoKSArIDEpOwogICAgICB9IGVsc2UgaWYgKGNhbGVuZGFyVmlldy52YWx1ZSA9PT0gJ3dlZWsnKSB7CiAgICAgICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpICsgNyk7CiAgICAgIH0gZWxzZSBpZiAoY2FsZW5kYXJWaWV3LnZhbHVlID09PSAnZGF5JykgewogICAgICAgIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSArIDEpOwogICAgICB9CiAgICAgIGN1cnJlbnREYXRlLnZhbHVlID0gZGF0ZTsKICAgIH07CgogICAgLy8g5pi+56S65re75Yqg5pel56iL5a+56K+d5qGGCiAgICBjb25zdCBzaG93QWRkRXZlbnREaWFsb2cgPSAoKSA9PiB7CiAgICAgIG5ld0V2ZW50LnZhbHVlID0gewogICAgICAgIHRpdGxlOiAnJywKICAgICAgICBzdGFydDogZm9ybWF0RGF0ZUZvclBpY2tlcihuZXcgRGF0ZSgpKSwKICAgICAgICBlbmQ6IGZvcm1hdERhdGVGb3JQaWNrZXIobmV3IERhdGUobmV3IERhdGUoKS5nZXRUaW1lKCkgKyA2MCAqIDYwICogMTAwMCkpLAogICAgICAgIGxvY2F0aW9uOiAnJywKICAgICAgICB0eXBlOiAnYmx1ZScsCiAgICAgICAgcmVtaW5kZXI6ICczMG1pbicsCiAgICAgICAgZGVzY3JpcHRpb246ICcnCiAgICAgIH07CiAgICAgIGFkZEV2ZW50RGlhbG9nVmlzaWJsZS52YWx1ZSA9IHRydWU7CiAgICB9OwoKICAgIC8vIOa3u+WKoOaXpeeoiwogICAgY29uc3QgYWRkRXZlbnQgPSBhc3luYyAoKSA9PiB7CiAgICAgIGlmICghbmV3RXZlbnQudmFsdWUudGl0bGUpIHsKICAgICAgICBFbE1lc3NhZ2Uud2FybmluZygn6K+36L6T5YWl5pel56iL5qCH6aKYJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICghbmV3RXZlbnQudmFsdWUuc3RhcnQgfHwgIW5ld0V2ZW50LnZhbHVlLmVuZCkgewogICAgICAgIEVsTWVzc2FnZS53YXJuaW5nKCfor7fpgInmi6nml6XnqIvml7bpl7QnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIC8vIOmqjOivgeW8gOWni+aXtumXtOS4jeaZmuS6jue7k+adn+aXtumXtAogICAgICBjb25zdCBzdGFydFRpbWUgPSBuZXcgRGF0ZShuZXdFdmVudC52YWx1ZS5zdGFydCkuZ2V0VGltZSgpOwogICAgICBjb25zdCBlbmRUaW1lID0gbmV3IERhdGUobmV3RXZlbnQudmFsdWUuZW5kKS5nZXRUaW1lKCk7CiAgICAgIGlmIChzdGFydFRpbWUgPiBlbmRUaW1lKSB7CiAgICAgICAgRWxNZXNzYWdlLndhcm5pbmcoJ+e7k+adn+aXtumXtOS4jeiDveaXqeS6juW8gOWni+aXtumXtCcpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgLy8g6aqM6K+B5byA5aeL5ZKM57uT5p2f5pel5pyf5piv5ZCM5LiA5aSpCiAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKG5ld0V2ZW50LnZhbHVlLnN0YXJ0KS50b0RhdGVTdHJpbmcoKTsKICAgICAgY29uc3QgZW5kRGF0ZSA9IG5ldyBEYXRlKG5ld0V2ZW50LnZhbHVlLmVuZCkudG9EYXRlU3RyaW5nKCk7CiAgICAgIGlmIChzdGFydERhdGUgIT09IGVuZERhdGUpIHsKICAgICAgICBFbE1lc3NhZ2Uud2FybmluZygn5byA5aeL5ZKM57uT5p2f5pe26Ze05b+F6aG75Zyo5ZCM5LiA5aSpJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgLy8g6I635Y+W5b2T5YmN55So5oi3SUQKICAgICAgICBjb25zdCB1c2VySWQgPSBOdW1iZXIobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJfaWQnKSB8fCAwKTsKICAgICAgICBjb25zb2xlLmxvZygn5b2T5YmN55So5oi3SUQ6JywgdXNlcklkKTsKCiAgICAgICAgLy8g55u05o6l5L2/55So6KGo5Y2V5aGr5YaZ55qE5pe26Ze077yM5LiN6L+b6KGM5pe25Yy66L2s5o2iCiAgICAgICAgY29uc3QgZXZlbnREYXRhID0gewogICAgICAgICAgdGl0bGU6IG5ld0V2ZW50LnZhbHVlLnRpdGxlLAogICAgICAgICAgc3RhcnQ6IG5ld0V2ZW50LnZhbHVlLnN0YXJ0LAogICAgICAgICAgZW5kOiBuZXdFdmVudC52YWx1ZS5lbmQsCiAgICAgICAgICBsb2NhdGlvbjogbmV3RXZlbnQudmFsdWUubG9jYXRpb24sCiAgICAgICAgICB0eXBlOiBuZXdFdmVudC52YWx1ZS50eXBlLAogICAgICAgICAgcmVtaW5kZXI6IG5ld0V2ZW50LnZhbHVlLnJlbWluZGVyLAogICAgICAgICAgZGVzY3JpcHRpb246IG5ld0V2ZW50LnZhbHVlLmRlc2NyaXB0aW9uLAogICAgICAgICAgcGFydGljaXBhbnRzOiB1c2VySWQgPyBbdXNlcklkXSA6IFtdIC8vIOehruS/neaKiuW9k+WJjeeUqOaIt+WKoOWFpeWPguS4juiAhQogICAgICAgIH07CiAgICAgICAgY29uc29sZS5sb2coJ+WIm+W7uuaXpeeoi+aVsOaNrjonLCBldmVudERhdGEpOwogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY3JlYXRlRXZlbnQoZXZlbnREYXRhKTsKICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcykgewogICAgICAgICAgRWxNZXNzYWdlLnN1Y2Nlc3MoJ+aXpeeoi+a3u+WKoOaIkOWKnycpOwogICAgICAgICAgYWRkRXZlbnREaWFsb2dWaXNpYmxlLnZhbHVlID0gZmFsc2U7CiAgICAgICAgICBsb2FkRXZlbnRzKCk7IC8vIOmHjeaWsOWKoOi9veS6i+S7tgogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IocmVzcG9uc2UubWVzc2FnZSB8fCAn5pel56iL5re75Yqg5aSx6LSlJyk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+a3u+WKoOaXpeeoi+Wksei0pTonLCBlcnJvcik7CiAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfml6XnqIvmt7vliqDlpLHotKUnKTsKICAgICAgfQogICAgfTsKCiAgICAvLyDmmL7npLrml6XnqIvor6bmg4UKICAgIGNvbnN0IHNob3dFdmVudERldGFpbHMgPSBldmVudCA9PiB7CiAgICAgIHNlbGVjdGVkRXZlbnQudmFsdWUgPSBldmVudDsKICAgICAgZXZlbnREZXRhaWxzRGlhbG9nVmlzaWJsZS52YWx1ZSA9IHRydWU7CiAgICB9OwoKICAgIC8vIOaYvuekuue8lui+keaXpeeoi+WvueivneahhgogICAgY29uc3Qgc2hvd0VkaXRFdmVudERpYWxvZyA9ICgpID0+IHsKICAgICAgZWRpdGluZ0V2ZW50LnZhbHVlID0gewogICAgICAgIGlkOiBzZWxlY3RlZEV2ZW50LnZhbHVlLmlkLAogICAgICAgIHRpdGxlOiBzZWxlY3RlZEV2ZW50LnZhbHVlLnRpdGxlLAogICAgICAgIHN0YXJ0OiBmb3JtYXREYXRlRm9yUGlja2VyKHNlbGVjdGVkRXZlbnQudmFsdWUuc3RhcnQpLAogICAgICAgIGVuZDogZm9ybWF0RGF0ZUZvclBpY2tlcihzZWxlY3RlZEV2ZW50LnZhbHVlLmVuZCksCiAgICAgICAgbG9jYXRpb246IHNlbGVjdGVkRXZlbnQudmFsdWUubG9jYXRpb24gfHwgJycsCiAgICAgICAgdHlwZTogc2VsZWN0ZWRFdmVudC52YWx1ZS50eXBlLAogICAgICAgIHJlbWluZGVyOiBzZWxlY3RlZEV2ZW50LnZhbHVlLnJlbWluZGVyLAogICAgICAgIGRlc2NyaXB0aW9uOiBzZWxlY3RlZEV2ZW50LnZhbHVlLmRlc2NyaXB0aW9uIHx8ICcnCiAgICAgIH07CiAgICAgIGV2ZW50RGV0YWlsc0RpYWxvZ1Zpc2libGUudmFsdWUgPSBmYWxzZTsKICAgICAgZWRpdEV2ZW50RGlhbG9nVmlzaWJsZS52YWx1ZSA9IHRydWU7CiAgICB9OwoKICAgIC8vIOS/neWtmOe8lui+keeahOaXpeeoiwogICAgY29uc3Qgc2F2ZUVkaXRFdmVudCA9IGFzeW5jICgpID0+IHsKICAgICAgaWYgKCFlZGl0aW5nRXZlbnQudmFsdWUudGl0bGUpIHsKICAgICAgICBFbE1lc3NhZ2Uud2FybmluZygn6K+36L6T5YWl5pel56iL5qCH6aKYJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICghZWRpdGluZ0V2ZW50LnZhbHVlLnN0YXJ0IHx8ICFlZGl0aW5nRXZlbnQudmFsdWUuZW5kKSB7CiAgICAgICAgRWxNZXNzYWdlLndhcm5pbmcoJ+ivt+mAieaLqeaXpeeoi+aXtumXtCcpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgLy8g6aqM6K+B5byA5aeL5pe26Ze05LiN5pma5LqO57uT5p2f5pe26Ze0CiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IG5ldyBEYXRlKGVkaXRpbmdFdmVudC52YWx1ZS5zdGFydCkuZ2V0VGltZSgpOwogICAgICBjb25zdCBlbmRUaW1lID0gbmV3IERhdGUoZWRpdGluZ0V2ZW50LnZhbHVlLmVuZCkuZ2V0VGltZSgpOwogICAgICBpZiAoc3RhcnRUaW1lID4gZW5kVGltZSkgewogICAgICAgIEVsTWVzc2FnZS53YXJuaW5nKCfnu5PmnZ/ml7bpl7TkuI3og73ml6nkuo7lvIDlp4vml7bpl7QnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIC8vIOmqjOivgeW8gOWni+WSjOe7k+adn+aXpeacn+aYr+WQjOS4gOWkqQogICAgICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZShlZGl0aW5nRXZlbnQudmFsdWUuc3RhcnQpLnRvRGF0ZVN0cmluZygpOwogICAgICBjb25zdCBlbmREYXRlID0gbmV3IERhdGUoZWRpdGluZ0V2ZW50LnZhbHVlLmVuZCkudG9EYXRlU3RyaW5nKCk7CiAgICAgIGlmIChzdGFydERhdGUgIT09IGVuZERhdGUpIHsKICAgICAgICBFbE1lc3NhZ2Uud2FybmluZygn5byA5aeL5ZKM57uT5p2f5pe26Ze05b+F6aG75Zyo5ZCM5LiA5aSpJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgLy8g6I635Y+W5b2T5YmN55So5oi3SUQKICAgICAgICBjb25zdCB1c2VySWQgPSBOdW1iZXIobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJfaWQnKSB8fCAwKTsKCiAgICAgICAgLy8g55u05o6l5L2/55So6KGo5Y2V5aGr5YaZ55qE5pe26Ze077yM5LiN6L+b6KGM5pe25Yy66L2s5o2iCiAgICAgICAgY29uc3QgZXZlbnREYXRhID0gewogICAgICAgICAgdGl0bGU6IGVkaXRpbmdFdmVudC52YWx1ZS50aXRsZSwKICAgICAgICAgIHN0YXJ0OiBlZGl0aW5nRXZlbnQudmFsdWUuc3RhcnQsCiAgICAgICAgICBlbmQ6IGVkaXRpbmdFdmVudC52YWx1ZS5lbmQsCiAgICAgICAgICBsb2NhdGlvbjogZWRpdGluZ0V2ZW50LnZhbHVlLmxvY2F0aW9uLAogICAgICAgICAgdHlwZTogZWRpdGluZ0V2ZW50LnZhbHVlLnR5cGUsCiAgICAgICAgICByZW1pbmRlcjogZWRpdGluZ0V2ZW50LnZhbHVlLnJlbWluZGVyLAogICAgICAgICAgZGVzY3JpcHRpb246IGVkaXRpbmdFdmVudC52YWx1ZS5kZXNjcmlwdGlvbiwKICAgICAgICAgIHBhcnRpY2lwYW50czogdXNlcklkID8gW3VzZXJJZF0gOiBbXSAvLyDnoa7kv53miorlvZPliY3nlKjmiLfliqDlhaXlj4LkuI7ogIUKICAgICAgICB9OwogICAgICAgIGNvbnNvbGUubG9nKCfmm7TmlrDml6XnqIvmlbDmja46JywgZXZlbnREYXRhKTsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHVwZGF0ZUV2ZW50KGVkaXRpbmdFdmVudC52YWx1ZS5pZCwgZXZlbnREYXRhKTsKICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcykgewogICAgICAgICAgRWxNZXNzYWdlLnN1Y2Nlc3MoJ+aXpeeoi+abtOaWsOaIkOWKnycpOwogICAgICAgICAgZWRpdEV2ZW50RGlhbG9nVmlzaWJsZS52YWx1ZSA9IGZhbHNlOwogICAgICAgICAgbG9hZEV2ZW50cygpOyAvLyDph43mlrDliqDovb3kuovku7YKICAgICAgICB9IGVsc2UgewogICAgICAgICAgRWxNZXNzYWdlLmVycm9yKHJlc3BvbnNlLm1lc3NhZ2UgfHwgJ+aXpeeoi+abtOaWsOWksei0pScpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfmm7TmlrDml6XnqIvlpLHotKU6JywgZXJyb3IpOwogICAgICAgIEVsTWVzc2FnZS5lcnJvcign5pel56iL5pu05paw5aSx6LSlJyk7CiAgICAgIH0KICAgIH07CgogICAgLy8g5Yig6Zmk5pel56iLCiAgICBjb25zdCBkZWxldGVFdmVudCA9IGFzeW5jICgpID0+IHsKICAgICAgaWYgKCFzZWxlY3RlZEV2ZW50LnZhbHVlLmlkIHx8IGlzTmFOKHNlbGVjdGVkRXZlbnQudmFsdWUuaWQpKSB7CiAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfml6XnqItJROaXoOaViO+8jOaXoOazleWIoOmZpCcpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjb25zb2xlLmxvZygn5bCd6K+V5Yig6Zmk5pel56iL77yMaWQ9Jywgc2VsZWN0ZWRFdmVudC52YWx1ZS5pZCk7CiAgICAgIHRyeSB7CiAgICAgICAgYXdhaXQgRWxNZXNzYWdlQm94LmNvbmZpcm0oJ+ehruWumuimgeWIoOmZpOivpeaXpeeoi+WQl++8nycsICfmj5DnpLonLCB7CiAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgIH0pOwogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZGVsZXRlQ2FsZW5kYXJFdmVudChzZWxlY3RlZEV2ZW50LnZhbHVlLmlkKTsKICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcykgewogICAgICAgICAgRWxNZXNzYWdlLnN1Y2Nlc3MoJ+aXpeeoi+WIoOmZpOaIkOWKnycpOwogICAgICAgICAgZXZlbnREZXRhaWxzRGlhbG9nVmlzaWJsZS52YWx1ZSA9IGZhbHNlOwogICAgICAgICAgbG9hZEV2ZW50cygpOyAvLyDph43mlrDliqDovb3kuovku7YKICAgICAgICB9IGVsc2UgewogICAgICAgICAgRWxNZXNzYWdlLmVycm9yKHJlc3BvbnNlLm1lc3NhZ2UgfHwgJ+aXpeeoi+WIoOmZpOWksei0pScpOwogICAgICAgICAgY29uc29sZS5lcnJvcign5Yig6Zmk5aSx6LSl6K+m57uG5L+h5oGvOicsIHJlc3BvbnNlKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgaWYgKGVycm9yICE9PSAnY2FuY2VsJykgewogICAgICAgICAgY29uc29sZS5lcnJvcign5Yig6Zmk5pel56iL5aSx6LSlOicsIGVycm9yKTsKICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcign5pel56iL5Yig6Zmk5aSx6LSlOiAnICsgKChlcnJvciA9PT0gbnVsbCB8fCBlcnJvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXJyb3IubWVzc2FnZSkgfHwgJ+acquefpemUmeivrycpKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgLy8g6I635Y+W5oyH5a6a5pel5pyf55qE5LqL5Lu2CiAgICBjb25zdCBnZXREYXlFdmVudHMgPSBkYXRlID0+IHsKICAgICAgcmV0dXJuIGV2ZW50cy52YWx1ZS5maWx0ZXIoZXZlbnQgPT4gaXNTYW1lRGF5KG5ldyBEYXRlKGV2ZW50LnN0YXJ0KSwgZGF0ZSkpOwogICAgfTsKCiAgICAvLyDliKTmlq3kuKTkuKrml6XmnJ/mmK/lkKbmmK/lkIzkuIDlpKkKICAgIGNvbnN0IGlzU2FtZURheSA9IChkYXRlMSwgZGF0ZTIpID0+IHsKICAgICAgcmV0dXJuIGRhdGUxLmdldEZ1bGxZZWFyKCkgPT09IGRhdGUyLmdldEZ1bGxZZWFyKCkgJiYgZGF0ZTEuZ2V0TW9udGgoKSA9PT0gZGF0ZTIuZ2V0TW9udGgoKSAmJiBkYXRlMS5nZXREYXRlKCkgPT09IGRhdGUyLmdldERhdGUoKTsKICAgIH07CgogICAgLy8g6I635Y+W5pyI5Lu955qE56ys5LiA5aSpCiAgICBjb25zdCBnZXRGaXJzdERheU9mTW9udGggPSBkYXRlID0+IHsKICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSwgZGF0ZS5nZXRNb250aCgpLCAxKTsKICAgIH07CgogICAgLy8g6I635Y+W5pyI5Lu955qE5aSp5pWwCiAgICBjb25zdCBnZXREYXlzSW5Nb250aCA9IGRhdGUgPT4gewogICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLCBkYXRlLmdldE1vbnRoKCkgKyAxLCAwKS5nZXREYXRlKCk7CiAgICB9OwoKICAgIC8vIOiuoeeul+S6i+S7tuWcqOaXtumXtOi9tOS4iueahOS9jee9rgogICAgY29uc3QgY2FsY0V2ZW50VG9wID0gZXZlbnQgPT4gewogICAgICBpZiAoIWV2ZW50IHx8ICFldmVudC5zdGFydCkgcmV0dXJuIDA7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgaG91cnMgPSBldmVudC5zdGFydC5nZXRIb3VycygpOwogICAgICAgIGNvbnN0IG1pbnV0ZXMgPSBldmVudC5zdGFydC5nZXRNaW51dGVzKCk7CiAgICAgICAgLy8g5q+P5bCP5pe2NjBweOmrmOW6pu+8jOavjzE15YiG6ZKfMTVweAogICAgICAgIHJldHVybiAoaG91cnMgKiA2MCArIG1pbnV0ZXMpIC8gMTUgKiAxNTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCforqHnrpfkuovku7bkvY3nva7plJnor686JywgZXJyb3IpOwogICAgICAgIHJldHVybiAwOwogICAgICB9CiAgICB9OwoKICAgIC8vIOiuoeeul+S6i+S7tueahOmrmOW6pgogICAgY29uc3QgY2FsY0V2ZW50SGVpZ2h0ID0gZXZlbnQgPT4gewogICAgICBpZiAoIWV2ZW50IHx8ICFldmVudC5zdGFydCB8fCAhZXZlbnQuZW5kKSByZXR1cm4gNjA7IC8vIOm7mOiupOmrmOW6pjHlsI/ml7YKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBldmVudC5zdGFydC5nZXRUaW1lKCk7CiAgICAgICAgY29uc3QgZW5kVGltZSA9IGV2ZW50LmVuZC5nZXRUaW1lKCk7CiAgICAgICAgY29uc3QgZHVyYXRpb24gPSAoZW5kVGltZSAtIHN0YXJ0VGltZSkgLyAoMTAwMCAqIDYwKTsgLy8g5YiG6ZKf5pWwCgogICAgICAgIC8vIOacgOWwj+mrmOW6pjMwcHggKDMw5YiG6ZKfKQogICAgICAgIHJldHVybiBNYXRoLm1heChkdXJhdGlvbiAvIDE1ICogMTUsIDMwKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCforqHnrpfkuovku7bpq5jluqbplJnor686JywgZXJyb3IpOwogICAgICAgIHJldHVybiA2MDsKICAgICAgfQogICAgfTsKCiAgICAvLyDmoLzlvI/ljJbkuovku7bml7bpl7QKICAgIGNvbnN0IGZvcm1hdEV2ZW50VGltZSA9IGV2ZW50ID0+IHsKICAgICAgY29uc3Qgc3RhcnQgPSBldmVudC5zdGFydDsKICAgICAgY29uc3QgZW5kID0gZXZlbnQuZW5kOwogICAgICByZXR1cm4gYCR7c3RhcnQuZ2V0SG91cnMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9OiR7c3RhcnQuZ2V0TWludXRlcygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX0gLSAke2VuZC5nZXRIb3VycygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX06JHtlbmQuZ2V0TWludXRlcygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX1gOwogICAgfTsKCiAgICAvLyDmoLzlvI/ljJbkuovku7bml6XmnJ/ml7bpl7QKICAgIGNvbnN0IGZvcm1hdEV2ZW50RGF0ZVRpbWUgPSBldmVudCA9PiB7CiAgICAgIGlmICghZXZlbnQuc3RhcnQgfHwgIWV2ZW50LmVuZCkgcmV0dXJuICcnOwogICAgICBjb25zdCBvcHRpb25zID0gewogICAgICAgIHllYXI6ICdudW1lcmljJywKICAgICAgICBtb250aDogJ2xvbmcnLAogICAgICAgIGRheTogJ251bWVyaWMnLAogICAgICAgIGhvdXI6ICcyLWRpZ2l0JywKICAgICAgICBtaW51dGU6ICcyLWRpZ2l0JwogICAgICB9OwogICAgICByZXR1cm4gYCR7ZXZlbnQuc3RhcnQudG9Mb2NhbGVEYXRlU3RyaW5nKCd6aC1DTicsIG9wdGlvbnMpfSAtICR7ZXZlbnQuZW5kLnRvTG9jYWxlRGF0ZVN0cmluZygnemgtQ04nLCBvcHRpb25zKX1gOwogICAgfTsKCiAgICAvLyDmoLzlvI/ljJbmj5DphpLml7bpl7QKICAgIGNvbnN0IGZvcm1hdFJlbWluZGVyID0gcmVtaW5kZXIgPT4gewogICAgICBzd2l0Y2ggKHJlbWluZGVyKSB7CiAgICAgICAgY2FzZSAnbm9uZSc6CiAgICAgICAgICByZXR1cm4gJ+S4jeaPkOmGkic7CiAgICAgICAgY2FzZSAnMTBtaW4nOgogICAgICAgICAgcmV0dXJuICcxMOWIhumSn+WJjSc7CiAgICAgICAgY2FzZSAnMzBtaW4nOgogICAgICAgICAgcmV0dXJuICczMOWIhumSn+WJjSc7CiAgICAgICAgY2FzZSAnMWhvdXInOgogICAgICAgICAgcmV0dXJuICcx5bCP5pe25YmNJzsKICAgICAgICBjYXNlICcxZGF5JzoKICAgICAgICAgIHJldHVybiAnMeWkqeWJjSc7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJldHVybiAn5pyq6K6+572uJzsKICAgICAgfQogICAgfTsKCiAgICAvLyDkuLrml6XmnJ/pgInmi6nlmajmoLzlvI/ljJbml6XmnJ8KICAgIGNvbnN0IGZvcm1hdERhdGVGb3JQaWNrZXIgPSBkYXRlID0+IHsKICAgICAgaWYgKCFkYXRlKSByZXR1cm4gJyc7CgogICAgICAvLyDnoa7kv53kvb/nlKhEYXRl5a+56LGhCiAgICAgIGNvbnN0IGRhdGVPYmogPSBkYXRlIGluc3RhbmNlb2YgRGF0ZSA/IGRhdGUgOiBuZXcgRGF0ZShkYXRlKTsKCiAgICAgIC8vIOS9v+eUqOebtOaOpeiOt+WPluW5tOaciOaXpeaXtuWIhueahOaWueW8j++8jOS4jea2ieWPiuaXtuWMuui9rOaNogogICAgICBjb25zdCB5ZWFyID0gZGF0ZU9iai5nZXRGdWxsWWVhcigpOwogICAgICBjb25zdCBtb250aCA9IChkYXRlT2JqLmdldE1vbnRoKCkgKyAxKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7CiAgICAgIGNvbnN0IGRheSA9IGRhdGVPYmouZ2V0RGF0ZSgpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKTsKICAgICAgY29uc3QgaG91cnMgPSBkYXRlT2JqLmdldEhvdXJzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpOwogICAgICBjb25zdCBtaW51dGVzID0gZGF0ZU9iai5nZXRNaW51dGVzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpOwogICAgICByZXR1cm4gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9ICR7aG91cnN9OiR7bWludXRlc31gOwogICAgfTsKCiAgICAvLyDlpITnkIblvIDlp4vml7bpl7Tlj5jljJbvvIzoh6rliqjorr7nva7nu5PmnZ/ml7bpl7TkuLox5bCP5pe25ZCOCiAgICBjb25zdCBoYW5kbGVTdGFydFRpbWVDaGFuZ2UgPSBldmVudCA9PiB7CiAgICAgIGlmICghZXZlbnQuc3RhcnQpIHJldHVybjsKICAgICAgdHJ5IHsKICAgICAgICAvLyDop6PmnpDlvIDlp4vml7bpl7QKICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBuZXcgRGF0ZShldmVudC5zdGFydCk7CgogICAgICAgIC8vIOiuoeeul+W8gOWni+aXtumXtDHlsI/ml7blkI7nmoTml7bpl7QKICAgICAgICBjb25zdCBlbmRUaW1lID0gbmV3IERhdGUoc3RhcnRUaW1lLmdldFRpbWUoKSArIDYwICogNjAgKiAxMDAwKTsKCiAgICAgICAgLy8g5aaC5p6c57uT5p2f5pe26Ze05pyq6K6+572u77yM5oiW57uT5p2f5pe26Ze05pep5LqO5byA5aeL5pe26Ze077yM5oiW57uT5p2f5pe26Ze05LiN5Zyo5ZCM5LiA5aSpCiAgICAgICAgLy8g5YiZ6Ieq5Yqo6K6+572u57uT5p2f5pe26Ze0CiAgICAgICAgaWYgKCFldmVudC5lbmQgfHwgbmV3IERhdGUoZXZlbnQuZW5kKSA8IHN0YXJ0VGltZSB8fCBuZXcgRGF0ZShldmVudC5lbmQpLnRvRGF0ZVN0cmluZygpICE9PSBzdGFydFRpbWUudG9EYXRlU3RyaW5nKCkpIHsKICAgICAgICAgIGV2ZW50LmVuZCA9IGZvcm1hdERhdGVGb3JQaWNrZXIoZW5kVGltZSk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WkhOeQhuW8gOWni+aXtumXtOWPmOWMlumUmeivrzonLCBlcnJvcik7CiAgICAgIH0KICAgIH07CgogICAgLy8g5pel56iL57G75Z6L6aKc6ImyCiAgICBjb25zdCBldmVudFR5cGVDb2xvciA9IHR5cGUgPT4gewogICAgICBjb25zdCBtYXAgPSB7CiAgICAgICAgYmx1ZTogJyM0MDlFRkYnLAogICAgICAgIG9yYW5nZTogJyNFNkEyM0MnLAogICAgICAgIGdyZWVuOiAnIzY3QzIzQScsCiAgICAgICAgcmVkOiAnI0Y1NkM2QycsCiAgICAgICAgcHVycGxlOiAnIzkwOTM5OScsCiAgICAgICAgZGVmYXVsdDogJyM2MDYyNjYnCiAgICAgIH07CiAgICAgIHJldHVybiBtYXBbdHlwZV0gfHwgbWFwLmRlZmF1bHQ7CiAgICB9OwoKICAgIC8vIOaXpeeoi+mihOiniOa1ruWxggogICAgY29uc3QgZXZlbnRQcmV2aWV3ID0gcmVmKHsKICAgICAgdmlzaWJsZTogZmFsc2UsCiAgICAgIGV2ZW50OiB7fSwKICAgICAgc3R5bGU6IHt9CiAgICB9KTsKICAgIGNvbnN0IHNob3dFdmVudFByZXZpZXcgPSAoZXZlbnQsIGV2dCkgPT4gewogICAgICBldmVudFByZXZpZXcudmFsdWUgPSB7CiAgICAgICAgdmlzaWJsZTogdHJ1ZSwKICAgICAgICBldmVudCwKICAgICAgICBzdHlsZTogewogICAgICAgICAgcG9zaXRpb246ICdmaXhlZCcsCiAgICAgICAgICBsZWZ0OiBldnQuY2xpZW50WCArIDEwICsgJ3B4JywKICAgICAgICAgIHRvcDogZXZ0LmNsaWVudFkgKyAxMCArICdweCcsCiAgICAgICAgICB6SW5kZXg6IDk5OTkKICAgICAgICB9CiAgICAgIH07CiAgICB9OwogICAgY29uc3QgaGlkZUV2ZW50UHJldmlldyA9ICgpID0+IHsKICAgICAgZXZlbnRQcmV2aWV3LnZhbHVlLnZpc2libGUgPSBmYWxzZTsKICAgIH07CgogICAgLy8g5YWo6YOo5pel56iL5by556qXCiAgICBjb25zdCBhbGxFdmVudHNEaWFsb2cgPSByZWYoewogICAgICB2aXNpYmxlOiBmYWxzZSwKICAgICAgZXZlbnRzOiBbXSwKICAgICAgdGl0bGU6ICcnCiAgICB9KTsKICAgIGNvbnN0IHNob3dBbGxFdmVudHMgPSBkYXkgPT4gewogICAgICBhbGxFdmVudHNEaWFsb2cudmFsdWUgPSB7CiAgICAgICAgdmlzaWJsZTogdHJ1ZSwKICAgICAgICBldmVudHM6IGRheS5ldmVudHMsCiAgICAgICAgdGl0bGU6IGAke2N1cnJlbnREYXRlLnZhbHVlLmdldEZ1bGxZZWFyKCl95bm0JHtjdXJyZW50RGF0ZS52YWx1ZS5nZXRNb250aCgpICsgMX3mnIgke2RheS5kYXRlfeaXpeWFqOmDqOaXpeeoi2AKICAgICAgfTsKICAgIH07CgogICAgLy8g5ouW5ou955u45YWz54q25oCBCiAgICBjb25zdCBkcmFnZ2VkRXZlbnQgPSByZWYobnVsbCk7CiAgICBjb25zdCByZXNpemluZ0V2ZW50ID0gcmVmKG51bGwpOwogICAgY29uc3QgaW5pdGlhbE1vdXNlWSA9IHJlZigwKTsKICAgIGNvbnN0IGluaXRpYWxFdmVudEhlaWdodCA9IHJlZigwKTsKCiAgICAvLyDlvIDlp4vmi5bmi70KICAgIGNvbnN0IGRyYWdTdGFydCA9IChlLCBldmVudCkgPT4gewogICAgICBkcmFnZ2VkRXZlbnQudmFsdWUgPSBldmVudDsKICAgICAgLy8g5Zyo5ouW5ou95Zu+5YOP5LiK5pi+56S65LqL5Lu25qCH6aKYCiAgICAgIGNvbnN0IGRyYWdJbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICBkcmFnSW1hZ2UudGV4dENvbnRlbnQgPSBldmVudC50aXRsZTsKICAgICAgZHJhZ0ltYWdlLmNsYXNzTmFtZSA9ICdkcmFnLWltYWdlJzsKICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkcmFnSW1hZ2UpOwogICAgICBlLmRhdGFUcmFuc2Zlci5zZXREcmFnSW1hZ2UoZHJhZ0ltYWdlLCAwLCAwKTsKCiAgICAgIC8vIOiusOW9leaLluaLveaVsOaNrgogICAgICBlLmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoewogICAgICAgIGlkOiBldmVudC5pZCwKICAgICAgICBzdGFydFRpbWU6IGV2ZW50LnN0YXJ0LmdldFRpbWUoKSwKICAgICAgICBlbmRUaW1lOiBldmVudC5lbmQuZ2V0VGltZSgpCiAgICAgIH0pKTsKCiAgICAgIC8vIOa3u+WKoOaLluaLveaViOaenAogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcud2Vlay1kYXktZXZlbnRzLCAuZGF5LWV2ZW50cy1jb250YWluZXInKS5mb3JFYWNoKGNvbnRhaW5lciA9PiB7CiAgICAgICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCBkcmFnT3Zlcik7CiAgICAgICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIGRyb3ApOwogICAgICAgIH0pOwogICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZHJhZ0ltYWdlKTsKICAgICAgfSwgMCk7CiAgICB9OwoKICAgIC8vIOaLluaLvee7j+i/hwogICAgY29uc3QgZHJhZ092ZXIgPSBlID0+IHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBpZiAoIWRyYWdnZWRFdmVudC52YWx1ZSkgcmV0dXJuOwoKICAgICAgLy8g5pi+56S65pS+572u5L2N572u6aKE6KeICiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGUuY3VycmVudFRhcmdldDsKICAgICAgY29uc3QgY29udGFpbmVyUmVjdCA9IGNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgY29uc3Qgb2Zmc2V0WSA9IGUuY2xpZW50WSAtIGNvbnRhaW5lclJlY3QudG9wOwoKICAgICAgLy8g6K6h566X5paw5pe26Ze077yI5oyJMTXliIbpkp/lr7npvZDvvIkKICAgICAgY29uc3QgcXVhcnRlckhvdXJzID0gTWF0aC5mbG9vcihvZmZzZXRZIC8gMTUpOwogICAgICBjb25zdCBob3VycyA9IE1hdGguZmxvb3IocXVhcnRlckhvdXJzIC8gNCk7CiAgICAgIGNvbnN0IG1pbnV0ZXMgPSBxdWFydGVySG91cnMgJSA0ICogMTU7CgogICAgICAvLyDmm7TmlrDpooTop4jkvY3nva4KICAgICAgY29uc3QgcHJldmlld0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZHJhZy1wcmV2aWV3JykgfHwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgIGlmICghcHJldmlld0VsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkcmFnLXByZXZpZXcnKSkgewogICAgICAgIHByZXZpZXdFbGVtZW50LmNsYXNzTmFtZSA9ICdkcmFnLXByZXZpZXcnOwogICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChwcmV2aWV3RWxlbWVudCk7CiAgICAgIH0KCiAgICAgIC8vIOiuvue9rumihOiniOWFg+e0oOagt+W8jwogICAgICBwcmV2aWV3RWxlbWVudC5zdHlsZS50b3AgPSBxdWFydGVySG91cnMgKiAxNSArICdweCc7CiAgICAgIHByZXZpZXdFbGVtZW50LnN0eWxlLmhlaWdodCA9IGNhbGNFdmVudEhlaWdodChkcmFnZ2VkRXZlbnQudmFsdWUpICsgJ3B4JzsKICAgICAgcHJldmlld0VsZW1lbnQuaW5uZXJIVE1MID0gYCR7aG91cnN9OiR7bWludXRlcy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9YDsKICAgIH07CgogICAgLy8g5pS+572u5ouW5ou9CiAgICBjb25zdCBkcm9wID0gYXN5bmMgZSA9PiB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgaWYgKCFkcmFnZ2VkRXZlbnQudmFsdWUpIHJldHVybjsKCiAgICAgIC8vIOenu+mZpOmihOiniOWFg+e0oAogICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZHJhZy1wcmV2aWV3JykuZm9yRWFjaChlbCA9PiBlbC5yZW1vdmUoKSk7CgogICAgICAvLyDorqHnrpfmlrDnmoTlvIDlp4vml7bpl7QKICAgICAgY29uc3QgY29udGFpbmVyID0gZS5jdXJyZW50VGFyZ2V0OwogICAgICBjb25zdCBjb250YWluZXJSZWN0ID0gY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICBjb25zdCBvZmZzZXRZID0gZS5jbGllbnRZIC0gY29udGFpbmVyUmVjdC50b3A7CgogICAgICAvLyDorqHnrpfmlrDml7bpl7TvvIjmjIkxNeWIhumSn+Wvuem9kO+8iQogICAgICBjb25zdCBxdWFydGVySG91cnMgPSBNYXRoLmZsb29yKG9mZnNldFkgLyAxNSk7CiAgICAgIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcihxdWFydGVySG91cnMgLyA0KTsKICAgICAgY29uc3QgbWludXRlcyA9IHF1YXJ0ZXJIb3VycyAlIDQgKiAxNTsKCiAgICAgIC8vIOWIm+W7uuaWsOeahOW8gOWni+aXtumXtAogICAgICBjb25zdCBuZXdTdGFydERhdGUgPSBuZXcgRGF0ZShkcmFnZ2VkRXZlbnQudmFsdWUuc3RhcnQpOwogICAgICBuZXdTdGFydERhdGUuc2V0SG91cnMoaG91cnMsIG1pbnV0ZXMsIDAsIDApOwoKICAgICAgLy8g6K6h566X5pe26Ze05beuCiAgICAgIGNvbnN0IHRpbWVEaWZmID0gbmV3U3RhcnREYXRlLmdldFRpbWUoKSAtIGRyYWdnZWRFdmVudC52YWx1ZS5zdGFydC5nZXRUaW1lKCk7CgogICAgICAvLyDliJvlu7rmlrDnmoTnu5PmnZ/ml7bpl7TvvIjkv53mjIHmjIHnu63ml7bpl7TkuI3lj5jvvIkKICAgICAgY29uc3QgbmV3RW5kRGF0ZSA9IG5ldyBEYXRlKGRyYWdnZWRFdmVudC52YWx1ZS5lbmQuZ2V0VGltZSgpICsgdGltZURpZmYpOwoKICAgICAgLy8g5pu05paw5LqL5Lu2CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgZXZlbnREYXRhID0gewogICAgICAgICAgdGl0bGU6IGRyYWdnZWRFdmVudC52YWx1ZS50aXRsZSwKICAgICAgICAgIHN0YXJ0OiBmb3JtYXREYXRlRm9yUGlja2VyKG5ld1N0YXJ0RGF0ZSksCiAgICAgICAgICBlbmQ6IGZvcm1hdERhdGVGb3JQaWNrZXIobmV3RW5kRGF0ZSksCiAgICAgICAgICBsb2NhdGlvbjogZHJhZ2dlZEV2ZW50LnZhbHVlLmxvY2F0aW9uLAogICAgICAgICAgdHlwZTogZHJhZ2dlZEV2ZW50LnZhbHVlLnR5cGUsCiAgICAgICAgICByZW1pbmRlcjogZHJhZ2dlZEV2ZW50LnZhbHVlLnJlbWluZGVyLAogICAgICAgICAgZGVzY3JpcHRpb246IGRyYWdnZWRFdmVudC52YWx1ZS5kZXNjcmlwdGlvbiwKICAgICAgICAgIHBhcnRpY2lwYW50czogZHJhZ2dlZEV2ZW50LnZhbHVlLnBhcnRpY2lwYW50cyB8fCBbXQogICAgICAgIH07CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB1cGRhdGVFdmVudChkcmFnZ2VkRXZlbnQudmFsdWUuaWQsIGV2ZW50RGF0YSk7CiAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHsKICAgICAgICAgIEVsTWVzc2FnZS5zdWNjZXNzKCfml6XnqIvml7bpl7Tlt7Lmm7TmlrAnKTsKICAgICAgICAgIGxvYWRFdmVudHMoKTsgLy8g6YeN5paw5Yqg6L295LqL5Lu2CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcihyZXNwb25zZS5tZXNzYWdlIHx8ICfmm7TmlrDml6XnqIvml7bpl7TlpLHotKUnKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign5pu05paw5pel56iL5aSx6LSlOicsIGVycm9yKTsKICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+abtOaWsOaXpeeoi+aXtumXtOWksei0pScpOwogICAgICB9CiAgICB9OwoKICAgIC8vIOe7k+adn+aLluaLvQogICAgY29uc3QgZHJhZ0VuZCA9ICgpID0+IHsKICAgICAgZHJhZ2dlZEV2ZW50LnZhbHVlID0gbnVsbDsKICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLndlZWstZGF5LWV2ZW50cywgLmRheS1ldmVudHMtY29udGFpbmVyJykuZm9yRWFjaChjb250YWluZXIgPT4gewogICAgICAgIGNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIGRyYWdPdmVyKTsKICAgICAgICBjb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJvcCcsIGRyb3ApOwogICAgICB9KTsKICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRyYWctcHJldmlldycpLmZvckVhY2goZWwgPT4gZWwucmVtb3ZlKCkpOwogICAgfTsKCiAgICAvLyDlvIDlp4vosIPmlbTlpKflsI8KICAgIGNvbnN0IHN0YXJ0UmVzaXplID0gKGUsIGV2ZW50KSA9PiB7CiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgIHJlc2l6aW5nRXZlbnQudmFsdWUgPSBldmVudDsKICAgICAgaW5pdGlhbE1vdXNlWS52YWx1ZSA9IGUuY2xpZW50WTsKICAgICAgaW5pdGlhbEV2ZW50SGVpZ2h0LnZhbHVlID0gY2FsY0V2ZW50SGVpZ2h0KGV2ZW50KTsKICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgaGFuZGxlUmVzaXplKTsKICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGVuZFJlc2l6ZSk7CiAgICB9OwoKICAgIC8vIOWkhOeQhuiwg+aVtOWkp+WwjwogICAgY29uc3QgaGFuZGxlUmVzaXplID0gZSA9PiB7CiAgICAgIGlmICghcmVzaXppbmdFdmVudC52YWx1ZSkgcmV0dXJuOwogICAgICBjb25zdCBkZWx0YVkgPSBlLmNsaWVudFkgLSBpbml0aWFsTW91c2VZLnZhbHVlOwogICAgICBjb25zdCBuZXdIZWlnaHQgPSBNYXRoLm1heCgzMCwgaW5pdGlhbEV2ZW50SGVpZ2h0LnZhbHVlICsgZGVsdGFZKTsKCiAgICAgIC8vIOiuoeeul+aWsOeahOaMgee7reaXtumXtO+8iOWIhumSn++8iQogICAgICBjb25zdCBkdXJhdGlvbk1pbnV0ZXMgPSBNYXRoLmZsb29yKG5ld0hlaWdodCAvIDE1KSAqIDE1OwoKICAgICAgLy8g6K6h566X5paw55qE57uT5p2f5pe26Ze0CiAgICAgIGNvbnN0IG5ld0VuZFRpbWUgPSBuZXcgRGF0ZShyZXNpemluZ0V2ZW50LnZhbHVlLnN0YXJ0LmdldFRpbWUoKSArIGR1cmF0aW9uTWludXRlcyAqIDYwICogMTAwMCk7CgogICAgICAvLyDmm7TmlrDpooTop4gKICAgICAgY29uc3QgZXZlbnRFbGVtZW50ID0gZS50YXJnZXQuY2xvc2VzdCgnLndlZWstZXZlbnQsIC5kYXktZXZlbnQnKTsKICAgICAgaWYgKGV2ZW50RWxlbWVudCkgewogICAgICAgIGV2ZW50RWxlbWVudC5zdHlsZS5oZWlnaHQgPSBuZXdIZWlnaHQgKyAncHgnOwoKICAgICAgICAvLyDmm7TmlrDml7bpl7TmmL7npLoKICAgICAgICBjb25zdCB0aW1lRWxlbWVudCA9IGV2ZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcud2Vlay1ldmVudC10aW1lLCAuZGF5LWV2ZW50LXRpbWUnKTsKICAgICAgICBpZiAodGltZUVsZW1lbnQpIHsKICAgICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IGAke3Jlc2l6aW5nRXZlbnQudmFsdWUuc3RhcnQuZ2V0SG91cnMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9OiR7cmVzaXppbmdFdmVudC52YWx1ZS5zdGFydC5nZXRNaW51dGVzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfWA7CiAgICAgICAgICBjb25zdCBlbmRUaW1lID0gYCR7bmV3RW5kVGltZS5nZXRIb3VycygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX06JHtuZXdFbmRUaW1lLmdldE1pbnV0ZXMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9YDsKICAgICAgICAgIHRpbWVFbGVtZW50LnRleHRDb250ZW50ID0gYCR7c3RhcnRUaW1lfSAtICR7ZW5kVGltZX1gOwogICAgICAgIH0KICAgICAgfQogICAgfTsKCiAgICAvLyDnu5PmnZ/osIPmlbTlpKflsI8KICAgIGNvbnN0IGVuZFJlc2l6ZSA9IGFzeW5jIGUgPT4gewogICAgICBpZiAoIXJlc2l6aW5nRXZlbnQudmFsdWUpIHJldHVybjsKICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgaGFuZGxlUmVzaXplKTsKICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGVuZFJlc2l6ZSk7CiAgICAgIGNvbnN0IGRlbHRhWSA9IGUuY2xpZW50WSAtIGluaXRpYWxNb3VzZVkudmFsdWU7CiAgICAgIGNvbnN0IG5ld0hlaWdodCA9IE1hdGgubWF4KDMwLCBpbml0aWFsRXZlbnRIZWlnaHQudmFsdWUgKyBkZWx0YVkpOwoKICAgICAgLy8g6K6h566X5paw55qE5oyB57ut5pe26Ze077yI5YiG6ZKf77yJCiAgICAgIGNvbnN0IGR1cmF0aW9uTWludXRlcyA9IE1hdGguZmxvb3IobmV3SGVpZ2h0IC8gMTUpICogMTU7CgogICAgICAvLyDorqHnrpfmlrDnmoTnu5PmnZ/ml7bpl7QKICAgICAgY29uc3QgbmV3RW5kVGltZSA9IG5ldyBEYXRlKHJlc2l6aW5nRXZlbnQudmFsdWUuc3RhcnQuZ2V0VGltZSgpICsgZHVyYXRpb25NaW51dGVzICogNjAgKiAxMDAwKTsKCiAgICAgIC8vIOabtOaWsOS6i+S7tgogICAgICB0cnkgewogICAgICAgIGNvbnN0IGV2ZW50RGF0YSA9IHsKICAgICAgICAgIHRpdGxlOiByZXNpemluZ0V2ZW50LnZhbHVlLnRpdGxlLAogICAgICAgICAgc3RhcnQ6IGZvcm1hdERhdGVGb3JQaWNrZXIocmVzaXppbmdFdmVudC52YWx1ZS5zdGFydCksCiAgICAgICAgICBlbmQ6IGZvcm1hdERhdGVGb3JQaWNrZXIobmV3RW5kVGltZSksCiAgICAgICAgICBsb2NhdGlvbjogcmVzaXppbmdFdmVudC52YWx1ZS5sb2NhdGlvbiwKICAgICAgICAgIHR5cGU6IHJlc2l6aW5nRXZlbnQudmFsdWUudHlwZSwKICAgICAgICAgIHJlbWluZGVyOiByZXNpemluZ0V2ZW50LnZhbHVlLnJlbWluZGVyLAogICAgICAgICAgZGVzY3JpcHRpb246IHJlc2l6aW5nRXZlbnQudmFsdWUuZGVzY3JpcHRpb24sCiAgICAgICAgICBwYXJ0aWNpcGFudHM6IHJlc2l6aW5nRXZlbnQudmFsdWUucGFydGljaXBhbnRzIHx8IFtdCiAgICAgICAgfTsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHVwZGF0ZUV2ZW50KHJlc2l6aW5nRXZlbnQudmFsdWUuaWQsIGV2ZW50RGF0YSk7CiAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHsKICAgICAgICAgIEVsTWVzc2FnZS5zdWNjZXNzKCfml6XnqIvml7bplb/lt7Lmm7TmlrAnKTsKICAgICAgICAgIGxvYWRFdmVudHMoKTsgLy8g6YeN5paw5Yqg6L295LqL5Lu2CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcihyZXNwb25zZS5tZXNzYWdlIHx8ICfmm7TmlrDml6XnqIvml7bplb/lpLHotKUnKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign5pu05paw5pel56iL5aSx6LSlOicsIGVycm9yKTsKICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+abtOaWsOaXpeeoi+aXtumVv+Wksei0pScpOwogICAgICB9CiAgICAgIHJlc2l6aW5nRXZlbnQudmFsdWUgPSBudWxsOwogICAgfTsKCiAgICAvLyDnm5HlkKzml6Xljobop4blm77lj5jljJYKICAgIHdhdGNoKGNhbGVuZGFyVmlldywgKCkgPT4gewogICAgICBsb2FkRXZlbnRzKCk7CiAgICB9KTsKCiAgICAvLyDnm5HlkKzlvZPliY3ml6XmnJ/lj5jljJYKICAgIHdhdGNoKGN1cnJlbnREYXRlLCAoKSA9PiB7CiAgICAgIGxvYWRFdmVudHMoKTsKICAgIH0pOwoKICAgIC8vIOe7hOS7tuaMgui9veaXtuWQr+WKqOWumuaXtuWZqAogICAgb25Nb3VudGVkKCgpID0+IHsKICAgICAgLy8g5Yid5aeL5YyW5Yqg6L295LqL5Lu2CiAgICAgIGxvYWRFdmVudHMoKTsKICAgIH0pOwoKICAgIC8vIOe7hOS7tuWNuOi9veaXtua4hemZpOWumuaXtuWZqAogICAgb25Vbm1vdW50ZWQoKCkgPT4gewogICAgICAvLyDkuI3pnIDopoHmuIXpmaTlrprml7blmajvvIzlm6DkuLrlkajop4blm77lkozml6Xop4blm77msqHmnInml7bpl7Tnur/mm7TmlrDpgLvovpEKICAgIH0pOwogICAgcmV0dXJuIHsKICAgICAgY2FsZW5kYXJWaWV3LAogICAgICBjdXJyZW50RGF0ZSwKICAgICAgY3VycmVudERhdGVMYWJlbCwKICAgICAgd2Vla0RheXMsCiAgICAgIGRheXMsCiAgICAgIHdlZWtEYXRlcywKICAgICAgZGF5RXZlbnRzLAogICAgICBhZGRFdmVudERpYWxvZ1Zpc2libGUsCiAgICAgIGV2ZW50RGV0YWlsc0RpYWxvZ1Zpc2libGUsCiAgICAgIGVkaXRFdmVudERpYWxvZ1Zpc2libGUsCiAgICAgIG5ld0V2ZW50LAogICAgICBzZWxlY3RlZEV2ZW50LAogICAgICBlZGl0aW5nRXZlbnQsCiAgICAgIHRvZGF5LAogICAgICBwcmV2LAogICAgICBuZXh0LAogICAgICBzZWxlY3REYXksCiAgICAgIHNob3dBZGRFdmVudERpYWxvZywKICAgICAgYWRkRXZlbnQsCiAgICAgIHNob3dFdmVudERldGFpbHMsCiAgICAgIHNob3dFZGl0RXZlbnREaWFsb2csCiAgICAgIHNhdmVFZGl0RXZlbnQsCiAgICAgIGRlbGV0ZUV2ZW50LAogICAgICBjYWxjRXZlbnRUb3AsCiAgICAgIGNhbGNFdmVudEhlaWdodCwKICAgICAgZm9ybWF0RXZlbnRUaW1lLAogICAgICBmb3JtYXRFdmVudERhdGVUaW1lLAogICAgICBmb3JtYXRSZW1pbmRlciwKICAgICAgLy8gRWxlbWVudCBQbHVzIOWbvuaghwogICAgICBBcnJvd0xlZnQsCiAgICAgIEFycm93UmlnaHQsCiAgICAgIFBsdXMsCiAgICAgIGhhbmRsZVN0YXJ0VGltZUNoYW5nZSwKICAgICAgZXZlbnRUeXBlQ29sb3IsCiAgICAgIGV2ZW50UHJldmlldywKICAgICAgc2hvd0V2ZW50UHJldmlldywKICAgICAgaGlkZUV2ZW50UHJldmlldywKICAgICAgYWxsRXZlbnRzRGlhbG9nLAogICAgICBzaG93QWxsRXZlbnRzLAogICAgICBhbGxEYXlFdmVudHMsCiAgICAgIGRheUV2ZW50R3JvdXBzLAogICAgICBvcmdhbml6ZU92ZXJsYXBwaW5nRXZlbnRzLAogICAgICBkcmFnU3RhcnQsCiAgICAgIGRyYWdFbmQsCiAgICAgIHN0YXJ0UmVzaXplCiAgICB9OwogIH0KfTs="},{"version":3,"names":["ref","computed","onMounted","watch","onUnmounted","ElMessage","ElMessageBox","ArrowLeft","ArrowRight","Plus","getMonthlyEvents","getWeeklyEvents","getDailyEvents","createEvent","updateEvent","deleteEvent","deleteCalendarEvent","name","setup","calendarView","currentDate","Date","events","currentDateLabel","options","year","month","value","getFullYear","getMonth","Math","ceil","getDate","getFirstDayOfMonth","getDay","toLocaleDateString","day","weekDays","addEventDialogVisible","eventDetailsDialogVisible","editEventDialogVisible","newEvent","title","start","end","location","type","reminder","description","selectedEvent","editingEvent","id","days","result","today","firstDay","daysInMonth","getDaysInMonth","daysInLastMonth","i","date","push","isCurrentMonth","isToday","isSameDay","getDayEvents","remaining","length","weekDates","setDate","dayEvents","eventGroups","organizeOverlappingEvents","dayName","fullDate","allDayEvents","dayEventGroups","sortedEvents","sort","a","b","getTime","groups","forEach","event","placed","group","lastEvent","loadMonthlyEvents","response","success","parseEventsData","data","error","console","loadWeeklyEvents","formatDateString","loadDailyEvents","loadEvents","map","item","creator","creator_name","participants","participants_info","toString","padStart","selectDay","prev","next","setMonth","showAddEventDialog","formatDateForPicker","addEvent","warning","startTime","endTime","startDate","toDateString","endDate","userId","Number","localStorage","getItem","log","eventData","message","showEventDetails","showEditEventDialog","saveEditEvent","isNaN","confirm","confirmButtonText","cancelButtonText","filter","date1","date2","calcEventTop","hours","getHours","minutes","getMinutes","calcEventHeight","duration","max","formatEventTime","formatEventDateTime","hour","minute","formatReminder","dateObj","handleStartTimeChange","eventTypeColor","blue","orange","green","red","purple","default","eventPreview","visible","style","showEventPreview","evt","position","left","clientX","top","clientY","zIndex","hideEventPreview","allEventsDialog","showAllEvents","draggedEvent","resizingEvent","initialMouseY","initialEventHeight","dragStart","e","dragImage","document","createElement","textContent","className","body","appendChild","dataTransfer","setDragImage","setData","JSON","stringify","setTimeout","querySelectorAll","container","addEventListener","dragOver","drop","removeChild","preventDefault","currentTarget","containerRect","getBoundingClientRect","offsetY","quarterHours","floor","previewElement","querySelector","classList","contains","height","innerHTML","el","remove","newStartDate","setHours","timeDiff","newEndDate","dragEnd","removeEventListener","startResize","stopPropagation","handleResize","endResize","deltaY","newHeight","durationMinutes","newEndTime","eventElement","target","closest","timeElement"],"sources":["C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\calendar\\Index.vue"],"sourcesContent":["<template>\n  <div class=\"calendar-container\">\n    <!-- 顶部操作栏 -->\n    <div class=\"calendar-header\">\n      <div class=\"date-controls\">\n        <el-button type=\"primary\" @click=\"today\">今天</el-button>\n        <div class=\"date-nav\">\n          <el-button :icon=\"ArrowLeft\" plain @click=\"prev\"></el-button>\n          <span class=\"current-date\">{{ currentDateLabel }}</span>\n          <el-button :icon=\"ArrowRight\" plain @click=\"next\"></el-button>\n        </div>\n      </div>\n      <div class=\"view-controls\">\n        <el-radio-group v-model=\"calendarView\" size=\"small\">\n          <el-radio-button value=\"month\">月</el-radio-button>\n          <el-radio-button value=\"week\">周</el-radio-button>\n          <el-radio-button value=\"day\">日</el-radio-button>\n        </el-radio-group>\n      </div>\n      <div class=\"action-controls\">\n        <el-button type=\"primary\" @click=\"showAddEventDialog\">\n          <el-icon><Plus /></el-icon> 新建日程\n        </el-button>\n      </div>\n    </div>\n\n    <!-- 日历主体 -->\n    <div class=\"calendar-main\" v-if=\"calendarView === 'month'\">\n      <!-- 星期头部 -->\n      <div class=\"calendar-weekdays\">\n        <div class=\"weekday\" v-for=\"(day, index) in weekDays\" :key=\"index\">{{ day }}</div>\n      </div>\n      \n      <!-- 日历网格 -->\n      <div class=\"calendar-days\">\n        <div \n          v-for=\"(day, index) in days\" \n          :key=\"index\" \n          class=\"calendar-day\" \n          :class=\"{ \n            'today': day.isToday, \n            'other-month': !day.isCurrentMonth,\n            'has-events': day.events && day.events.length > 0\n          }\"\n          @click=\"selectDay(day)\"\n        >\n          <div class=\"day-number\">{{ day.date }}</div>\n          <div class=\"event-container\">\n            <div \n              v-for=\"(event, eventIndex) in day.events.slice(0, 3)\" \n              :key=\"eventIndex\" \n              class=\"event-item\"\n              :class=\"'event-' + event.type\"\n              @mouseenter=\"showEventPreview(event, $event)\"\n              @mouseleave=\"hideEventPreview\"\n              @click.stop=\"showEventDetails(event)\"\n            >\n              <span class=\"event-color\" :style=\"{background: eventTypeColor(event.type)}\"></span>\n              {{ event.title }}\n            </div>\n            <div v-if=\"day.events && day.events.length > 3\" class=\"event-more\" @click.stop=\"showAllEvents(day)\">\n              还有 {{ day.events.length - 3 }} 个日程\n            </div>\n          </div>\n        </div>\n      </div>\n      <!-- 日程预览浮层 -->\n      <div v-if=\"eventPreview.visible\" class=\"event-preview-pop\" :style=\"eventPreview.style\">\n        <div class=\"event-preview-title\">{{ eventPreview.event.title }}</div>\n        <div class=\"event-preview-time\">{{ formatEventTime(eventPreview.event) }}</div>\n        <div class=\"event-preview-location\" v-if=\"eventPreview.event.location\">\n          <i class=\"bi bi-geo-alt\"></i> {{ eventPreview.event.location }}\n        </div>\n        <div class=\"event-preview-desc\" v-if=\"eventPreview.event.description\">\n          {{ eventPreview.event.description }}\n        </div>\n      </div>\n      <!-- 全部日程弹窗 -->\n      <el-dialog v-model=\"allEventsDialog.visible\" :title=\"allEventsDialog.title\" width=\"400px\">\n        <div v-if=\"allEventsDialog.events.length === 0\">暂无日程</div>\n        <el-timeline v-else>\n          <el-timeline-item\n            v-for=\"(event, idx) in allEventsDialog.events\"\n            :key=\"idx\"\n            :color=\"eventTypeColor(event.type)\"\n          >\n            <div class=\"all-event-title\">{{ event.title }}</div>\n            <div class=\"all-event-time\">{{ formatEventTime(event) }}</div>\n            <div class=\"all-event-location\" v-if=\"event.location\">\n              <i class=\"bi bi-geo-alt\"></i> {{ event.location }}\n            </div>\n            <div class=\"all-event-desc\" v-if=\"event.description\">\n              {{ event.description }}\n            </div>\n            <el-button size=\"mini\" type=\"text\" @click=\"showEventDetails(event)\">详情</el-button>\n          </el-timeline-item>\n        </el-timeline>\n      </el-dialog>\n    </div>\n\n    <!-- 周视图 -->\n    <div class=\"calendar-week\" v-if=\"calendarView === 'week'\">\n      <div class=\"week-header\">\n        <div class=\"week-time-col\"></div>\n        <div \n          v-for=\"(day, index) in weekDates\" \n          :key=\"index\" \n          class=\"week-day-col\"\n          :class=\"{ 'today': day.isToday }\"\n        >\n          <div class=\"week-day-name\">{{ day.dayName }}</div>\n          <div class=\"week-day-date\">{{ day.date }}</div>\n        </div>\n      </div>\n      \n      <div class=\"week-body\">\n        <div class=\"week-time-scale\">\n          <div v-for=\"hour in 24\" :key=\"hour\" class=\"time-slot\">\n            {{ hour - 1 }}:00\n          </div>\n        </div>\n        \n        <div class=\"week-events-container\">\n          <div \n            v-for=\"(day, dayIndex) in weekDates\" \n            :key=\"dayIndex\" \n            class=\"week-day-events\"\n          >\n            <!-- 全天事件 -->\n            <div class=\"week-all-day-events\">\n              <div\n                v-for=\"(event, eventIndex) in day.allDayEvents\"\n                :key=\"'all-day-' + eventIndex\"\n                class=\"week-all-day-event\"\n                :class=\"'event-' + event.type\"\n                @click=\"showEventDetails(event)\"\n                @mouseenter=\"showEventPreview(event, $event)\"\n                @mouseleave=\"hideEventPreview\"\n              >\n                <span class=\"event-color\" :style=\"{background: eventTypeColor(event.type)}\"></span>\n                <span class=\"all-day-event-title\">{{ event.title }}</span>\n              </div>\n            </div>\n\n            <!-- 普通事件 -->\n            <div \n              v-for=\"(eventGroup, groupIndex) in day.eventGroups\"\n              :key=\"'group-' + groupIndex\"\n              class=\"week-event-group\"\n              :style=\"{left: (groupIndex * (100 / day.eventGroups.length)) + '%', \n                      width: (100 / day.eventGroups.length) + '%'}\"\n            >\n              <div \n                v-for=\"(event, eventIndex) in eventGroup\"\n                :key=\"eventIndex\"\n                class=\"week-event\"\n                :class=\"'event-' + event.type\"\n                :style=\"{\n                  top: calcEventTop(event) + 'px',\n                  height: calcEventHeight(event) + 'px',\n                }\"\n                @click=\"showEventDetails(event)\"\n                @mouseenter=\"showEventPreview(event, $event)\"\n                @mouseleave=\"hideEventPreview\"\n                draggable=\"true\"\n                @dragstart=\"dragStart($event, event)\"\n                @dragend=\"dragEnd\"\n              >\n                <span class=\"event-color\" :style=\"{background: eventTypeColor(event.type)}\"></span>\n                <div class=\"week-event-title\">{{ event.title }}</div>\n                <div class=\"week-event-time\">{{ formatEventTime(event) }}</div>\n                <div class=\"resize-handle bottom\" @mousedown=\"startResize($event, event)\"></div>\n              </div>\n            </div>\n          </div>\n          \n          <!-- 移除当前时间线 -->\n        </div>\n      </div>\n    </div>\n    \n    <!-- 日视图 -->\n    <div class=\"calendar-day-view\" v-if=\"calendarView === 'day'\">\n      <div class=\"day-header\">\n        <div class=\"day-date\">\n          {{ currentDate.toLocaleDateString('zh-CN', { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' }) }}\n        </div>\n      </div>\n      \n      <div class=\"day-body\">\n        <div class=\"day-time-scale\">\n          <div v-for=\"hour in 24\" :key=\"hour\" class=\"time-slot\">\n            {{ hour - 1 }}:00\n          </div>\n        </div>\n        \n        <div class=\"day-events-container\">\n          <!-- 全天事件 -->\n          <div class=\"day-all-day-events\">\n            <div\n              v-for=\"(event, eventIndex) in allDayEvents\"\n              :key=\"'all-day-' + eventIndex\"\n              class=\"day-all-day-event\"\n              :class=\"'event-' + event.type\"\n              @click=\"showEventDetails(event)\"\n              @mouseenter=\"showEventPreview(event, $event)\"\n              @mouseleave=\"hideEventPreview\"\n            >\n              <span class=\"event-color\" :style=\"{background: eventTypeColor(event.type)}\"></span>\n              <span class=\"all-day-event-title\">{{ event.title }}</span>\n            </div>\n          </div>\n          \n          <!-- 移除日视图的当前时间线 -->\n          \n          <!-- 普通事件 -->\n          <div \n            v-for=\"(eventGroup, groupIndex) in dayEventGroups\" \n            :key=\"'group-' + groupIndex\"\n            class=\"day-event-group\"\n            :style=\"{left: (groupIndex * (100 / dayEventGroups.length)) + '%', \n                    width: (100 / dayEventGroups.length) + '%'}\"\n          >\n            <div \n              v-for=\"(event, eventIndex) in eventGroup\" \n              :key=\"eventIndex\" \n              class=\"day-event\"\n              :class=\"'event-' + event.type\"\n              :style=\"{\n                top: calcEventTop(event) + 'px',\n                height: calcEventHeight(event) + 'px'\n              }\"\n              @click=\"showEventDetails(event)\"\n              @mouseenter=\"showEventPreview(event, $event)\"\n              @mouseleave=\"hideEventPreview\"\n              draggable=\"true\"\n              @dragstart=\"dragStart($event, event)\"\n              @dragend=\"dragEnd\"\n            >\n              <span class=\"event-color\" :style=\"{background: eventTypeColor(event.type)}\"></span>\n              <div class=\"day-event-title\">{{ event.title }}</div>\n              <div class=\"day-event-time\">{{ formatEventTime(event) }}</div>\n              <div class=\"day-event-location\" v-if=\"event.location\">\n                <i class=\"bi bi-geo-alt\"></i> {{ event.location }}\n              </div>\n              <div class=\"resize-handle bottom\" @mousedown=\"startResize($event, event)\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 添加日程对话框 -->\n    <el-dialog\n      v-model=\"addEventDialogVisible\"\n      title=\"新建日程\"\n      width=\"500px\"\n      class=\"calendar-dialog\"\n    >\n      <el-form :model=\"newEvent\" label-width=\"80px\">\n        <el-form-item label=\"标题\">\n          <el-input v-model=\"newEvent.title\" placeholder=\"请输入日程标题\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"开始时间\">\n          <el-date-picker\n            v-model=\"newEvent.start\"\n            type=\"datetime\"\n            placeholder=\"选择开始时间\"\n            format=\"YYYY-MM-DD HH:mm\"\n            value-format=\"YYYY-MM-DD HH:mm\"\n            @change=\"handleStartTimeChange(newEvent)\"\n          ></el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"结束时间\">\n          <el-date-picker\n            v-model=\"newEvent.end\"\n            type=\"datetime\"\n            placeholder=\"选择结束时间\"\n            format=\"YYYY-MM-DD HH:mm\"\n            value-format=\"YYYY-MM-DD HH:mm\"\n          ></el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"地点\">\n          <el-input v-model=\"newEvent.location\" placeholder=\"请输入地点\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"类型\">\n          <el-select v-model=\"newEvent.type\" placeholder=\"请选择日程类型\">\n            <el-option label=\"会议\" value=\"blue\"></el-option>\n            <el-option label=\"出差\" value=\"orange\"></el-option>\n            <el-option label=\"假期\" value=\"green\"></el-option>\n            <el-option label=\"截止日期\" value=\"red\"></el-option>\n            <el-option label=\"其他\" value=\"purple\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"提醒\">\n          <el-select v-model=\"newEvent.reminder\" placeholder=\"请选择提醒时间\">\n            <el-option label=\"不提醒\" value=\"none\"></el-option>\n            <el-option label=\"10分钟前\" value=\"10min\"></el-option>\n            <el-option label=\"30分钟前\" value=\"30min\"></el-option>\n            <el-option label=\"1小时前\" value=\"1hour\"></el-option>\n            <el-option label=\"1天前\" value=\"1day\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"备注\">\n          <el-input \n            v-model=\"newEvent.description\" \n            type=\"textarea\" \n            :rows=\"3\"\n            placeholder=\"请输入备注信息\"\n          ></el-input>\n        </el-form-item>\n      </el-form>\n      <template #footer>\n        <div class=\"dialog-footer\">\n          <el-button @click=\"addEventDialogVisible = false\">取消</el-button>\n          <el-button type=\"primary\" @click=\"addEvent\">确定</el-button>\n        </div>\n      </template>\n    </el-dialog>\n\n    <!-- 日程详情对话框 -->\n    <el-dialog\n      v-model=\"eventDetailsDialogVisible\"\n      :title=\"selectedEvent.title\"\n      width=\"500px\"\n      class=\"calendar-dialog\"\n    >\n      <div class=\"event-details\">\n        <div class=\"event-detail-item\">\n          <i class=\"bi bi-clock\"></i>\n          <span>{{ formatEventDateTime(selectedEvent) }}</span>\n        </div>\n        <div class=\"event-detail-item\" v-if=\"selectedEvent.location\">\n          <i class=\"bi bi-geo-alt\"></i>\n          <span>{{ selectedEvent.location }}</span>\n        </div>\n        <div class=\"event-detail-item\" v-if=\"selectedEvent.description\">\n          <i class=\"bi bi-card-text\"></i>\n          <div class=\"event-description\">{{ selectedEvent.description }}</div>\n        </div>\n        <div class=\"event-detail-item\">\n          <i class=\"bi bi-bell\"></i>\n          <span>{{ formatReminder(selectedEvent.reminder) }}</span>\n        </div>\n      </div>\n      <template #footer>\n        <div class=\"dialog-footer\">\n          <el-button @click=\"eventDetailsDialogVisible = false\">关闭</el-button>\n          <el-button type=\"primary\" @click=\"showEditEventDialog\">编辑</el-button>\n          <el-button type=\"danger\" @click=\"deleteEvent\">删除</el-button>\n        </div>\n      </template>\n    </el-dialog>\n\n    <!-- 编辑日程对话框 -->\n    <el-dialog\n      v-model=\"editEventDialogVisible\"\n      title=\"编辑日程\"\n      width=\"500px\"\n      class=\"calendar-dialog\"\n    >\n      <el-form :model=\"editingEvent\" label-width=\"80px\">\n        <el-form-item label=\"标题\">\n          <el-input v-model=\"editingEvent.title\" placeholder=\"请输入日程标题\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"开始时间\">\n          <el-date-picker\n            v-model=\"editingEvent.start\"\n            type=\"datetime\"\n            placeholder=\"选择开始时间\"\n            format=\"YYYY-MM-DD HH:mm\"\n            value-format=\"YYYY-MM-DD HH:mm\"\n            @change=\"handleStartTimeChange(editingEvent)\"\n          ></el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"结束时间\">\n          <el-date-picker\n            v-model=\"editingEvent.end\"\n            type=\"datetime\"\n            placeholder=\"选择结束时间\"\n            format=\"YYYY-MM-DD HH:mm\"\n            value-format=\"YYYY-MM-DD HH:mm\"\n          ></el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"地点\">\n          <el-input v-model=\"editingEvent.location\" placeholder=\"请输入地点\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"类型\">\n          <el-select v-model=\"editingEvent.type\" placeholder=\"请选择日程类型\">\n            <el-option label=\"会议\" value=\"blue\"></el-option>\n            <el-option label=\"出差\" value=\"orange\"></el-option>\n            <el-option label=\"假期\" value=\"green\"></el-option>\n            <el-option label=\"截止日期\" value=\"red\"></el-option>\n            <el-option label=\"其他\" value=\"purple\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"提醒\">\n          <el-select v-model=\"editingEvent.reminder\" placeholder=\"请选择提醒时间\">\n            <el-option label=\"不提醒\" value=\"none\"></el-option>\n            <el-option label=\"10分钟前\" value=\"10min\"></el-option>\n            <el-option label=\"30分钟前\" value=\"30min\"></el-option>\n            <el-option label=\"1小时前\" value=\"1hour\"></el-option>\n            <el-option label=\"1天前\" value=\"1day\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"备注\">\n          <el-input \n            v-model=\"editingEvent.description\" \n            type=\"textarea\" \n            :rows=\"3\"\n            placeholder=\"请输入备注信息\"\n          ></el-input>\n        </el-form-item>\n      </el-form>\n      <template #footer>\n        <div class=\"dialog-footer\">\n          <el-button @click=\"editEventDialogVisible = false\">取消</el-button>\n          <el-button type=\"primary\" @click=\"saveEditEvent\">保存</el-button>\n        </div>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { ref, computed, onMounted, watch, onUnmounted } from 'vue'\nimport { ElMessage, ElMessageBox } from 'element-plus'\nimport { ArrowLeft, ArrowRight, Plus } from '@element-plus/icons-vue'\nimport { getMonthlyEvents, getWeeklyEvents, getDailyEvents, createEvent, updateEvent, deleteEvent as deleteCalendarEvent } from '@/api/calendar'\n\nexport default {\n  name: 'Calendar',\n  setup() {\n    // 日历视图类型：月/周/日\n    const calendarView = ref('month')\n    \n    // 当前日期\n    const currentDate = ref(new Date())\n    \n    // 事件数据\n    const events = ref([])\n    \n    // 格式化当前日期标签\n    const currentDateLabel = computed(() => {\n      const options = { year: 'numeric', month: 'long' }\n      if (calendarView.value === 'week') {\n        return `${currentDate.value.getFullYear()}年${currentDate.value.getMonth() + 1}月第${Math.ceil((currentDate.value.getDate() + getFirstDayOfMonth(currentDate.value).getDay()) / 7)}周`\n      } else if (calendarView.value === 'day') {\n        return currentDate.value.toLocaleDateString('zh-CN', { year: 'numeric', month: 'long', day: 'numeric' })\n      }\n      return currentDate.value.toLocaleDateString('zh-CN', options)\n    })\n    \n    // 星期数组\n    const weekDays = ref(['日', '一', '二', '三', '四', '五', '六'])\n    \n    // 对话框状态\n    const addEventDialogVisible = ref(false)\n    const eventDetailsDialogVisible = ref(false)\n    const editEventDialogVisible = ref(false)\n    \n    // 新建日程\n    const newEvent = ref({\n      title: '',\n      start: '',\n      end: '',\n      location: '',\n      type: 'blue',\n      reminder: '30min',\n      description: ''\n    })\n    \n    // 选中的日程\n    const selectedEvent = ref({})\n    \n    // 正在编辑的日程\n    const editingEvent = ref({\n      id: '',\n      title: '',\n      start: '',\n      end: '',\n      location: '',\n      type: 'blue',\n      reminder: '30min',\n      description: ''\n    })\n    \n    // 生成月视图的日期数据\n    const days = computed(() => {\n      const result = []\n      const today = new Date()\n      \n      // 获取当月第一天是星期几\n      const firstDay = getFirstDayOfMonth(currentDate.value).getDay()\n      \n      // 获取当月天数\n      const daysInMonth = getDaysInMonth(currentDate.value)\n      \n      // 获取上个月天数\n      const daysInLastMonth = getDaysInMonth(\n        new Date(currentDate.value.getFullYear(), currentDate.value.getMonth() - 1)\n      )\n      \n      // 添加上个月的日期\n      for (let i = firstDay - 1; i >= 0; i--) {\n        const day = daysInLastMonth - i\n        const date = new Date(currentDate.value.getFullYear(), currentDate.value.getMonth() - 1, day)\n        result.push({\n          date: day,\n          isCurrentMonth: false,\n          isToday: isSameDay(date, today),\n          events: getDayEvents(date)\n        })\n      }\n      \n      // 添加当月的日期\n      for (let i = 1; i <= daysInMonth; i++) {\n        const date = new Date(currentDate.value.getFullYear(), currentDate.value.getMonth(), i)\n        result.push({\n          date: i,\n          isCurrentMonth: true,\n          isToday: isSameDay(date, today),\n          events: getDayEvents(date)\n        })\n      }\n      \n      // 添加下个月的日期，补满42个格子（6行7列）\n      const remaining = 42 - result.length\n      for (let i = 1; i <= remaining; i++) {\n        const date = new Date(currentDate.value.getFullYear(), currentDate.value.getMonth() + 1, i)\n        result.push({\n          date: i,\n          isCurrentMonth: false,\n          isToday: isSameDay(date, today),\n          events: getDayEvents(date)\n        })\n      }\n      \n      return result\n    })\n    \n    // 周视图数据\n    const weekDates = computed(() => {\n      const result = []\n      const date = new Date(currentDate.value)\n      const day = date.getDay()\n      \n      // 设置到本周的周日\n      date.setDate(date.getDate() - day)\n      \n      // 生成一周的日期\n      for (let i = 0; i < 7; i++) {\n        const currentDate = new Date(date)\n        currentDate.setDate(date.getDate() + i)\n        \n        const dayEvents = getDayEvents(currentDate)\n        // 所有事件作为普通事件处理\n        const eventGroups = organizeOverlappingEvents(dayEvents)\n        \n        result.push({\n          date: currentDate.getDate(),\n          dayName: weekDays.value[i],\n          isToday: isSameDay(currentDate, new Date()),\n          fullDate: currentDate,\n          events: dayEvents,\n          allDayEvents: [], // 保留空数组以兼容现有代码\n          eventGroups: eventGroups\n        })\n      }\n      \n      return result\n    })\n    \n    // 日视图事件\n    const dayEvents = computed(() => {\n      return getDayEvents(currentDate.value)\n    })\n    \n    // 日视图全天事件 - 保留空数组以兼容现有代码\n    const allDayEvents = computed(() => {\n      return []\n    })\n    \n    // 日视图普通事件分组 - 所有事件作为普通事件处理\n    const dayEventGroups = computed(() => {\n      return organizeOverlappingEvents(dayEvents.value)\n    })\n    \n    // 组织重叠事件为不同分组\n    const organizeOverlappingEvents = (events) => {\n      if (!events.length) return [[]]\n      \n      // 按开始时间排序\n      const sortedEvents = [...events].sort((a, b) => a.start.getTime() - b.start.getTime())\n      \n      const groups = []\n      \n      sortedEvents.forEach(event => {\n        // 查找可以放置的组\n        let placed = false\n        \n        for (let i = 0; i < groups.length; i++) {\n          const group = groups[i]\n          const lastEvent = group[group.length - 1]\n          \n          // 检查当前事件是否与组中最后一个事件不重叠\n          if (lastEvent && event.start.getTime() >= lastEvent.end.getTime()) {\n            group.push(event)\n            placed = true\n            break\n          }\n        }\n        \n        // 如果没有找到合适的组，创建新组\n        if (!placed) {\n          groups.push([event])\n        }\n      })\n      \n      return groups.length ? groups : [[]]\n    }\n    \n    // 加载月视图数据\n    const loadMonthlyEvents = async () => {\n      try {\n        const year = currentDate.value.getFullYear()\n        const month = currentDate.value.getMonth() + 1 // API需要1-12的月份\n        \n        const response = await getMonthlyEvents(year, month)\n        if (response.success) {\n          events.value = parseEventsData(response.data)\n        }\n      } catch (error) {\n        console.error('加载月度事件失败:', error)\n        ElMessage.error('加载月度事件失败')\n      }\n    }\n    \n    // 加载周视图数据\n    const loadWeeklyEvents = async () => {\n      try {\n        const date = formatDateString(currentDate.value)\n        const response = await getWeeklyEvents(date)\n        \n        if (response.success) {\n          events.value = parseEventsData(response.data)\n        }\n      } catch (error) {\n        console.error('加载周事件失败:', error)\n        ElMessage.error('加载周事件失败')\n      }\n    }\n    \n    // 加载日视图数据\n    const loadDailyEvents = async () => {\n      try {\n        const date = formatDateString(currentDate.value)\n        const response = await getDailyEvents(date)\n        \n        if (response.success) {\n          events.value = parseEventsData(response.data)\n        }\n      } catch (error) {\n        console.error('加载日事件失败:', error)\n        ElMessage.error('加载日事件失败')\n      }\n    }\n    \n    // 根据视图类型加载事件\n    const loadEvents = () => {\n      if (calendarView.value === 'month') {\n        loadMonthlyEvents()\n      } else if (calendarView.value === 'week') {\n        loadWeeklyEvents()\n      } else if (calendarView.value === 'day') {\n        loadDailyEvents()\n      }\n    }\n    \n    // 解析事件数据\n    const parseEventsData = (data) => {\n      return data.map(item => {\n        // 直接使用原始时间字符串，避免时区转换\n        return {\n          id: item.id,\n          title: item.title,\n          start: new Date(item.start),\n          end: new Date(item.end),\n          location: item.location,\n          type: item.type,\n          reminder: item.reminder,\n          description: item.description,\n          creator: item.creator,\n          creator_name: item.creator_name,\n          participants: item.participants,\n          participants_info: item.participants_info\n        };\n      });\n    }\n    \n    // 格式化日期为字符串\n    const formatDateString = (date) => {\n      const year = date.getFullYear()\n      const month = (date.getMonth() + 1).toString().padStart(2, '0')\n      const day = date.getDate().toString().padStart(2, '0')\n      return `${year}-${month}-${day}`\n    }\n    \n    // 日期选择\n    const selectDay = (day) => {\n      if (!day.isCurrentMonth) {\n        if (day.date > 15) {\n          // 前一个月\n          prev()\n        } else {\n          // 后一个月\n          next()\n        }\n      }\n    }\n    \n    // 返回今天\n    const today = () => {\n      currentDate.value = new Date()\n    }\n    \n    // 上一个时间单位\n    const prev = () => {\n      const date = new Date(currentDate.value)\n      if (calendarView.value === 'month') {\n        date.setMonth(date.getMonth() - 1)\n      } else if (calendarView.value === 'week') {\n        date.setDate(date.getDate() - 7)\n      } else if (calendarView.value === 'day') {\n        date.setDate(date.getDate() - 1)\n      }\n      currentDate.value = date\n    }\n    \n    // 下一个时间单位\n    const next = () => {\n      const date = new Date(currentDate.value)\n      if (calendarView.value === 'month') {\n        date.setMonth(date.getMonth() + 1)\n      } else if (calendarView.value === 'week') {\n        date.setDate(date.getDate() + 7)\n      } else if (calendarView.value === 'day') {\n        date.setDate(date.getDate() + 1)\n      }\n      currentDate.value = date\n    }\n    \n    // 显示添加日程对话框\n    const showAddEventDialog = () => {\n      newEvent.value = {\n        title: '',\n        start: formatDateForPicker(new Date()),\n        end: formatDateForPicker(new Date(new Date().getTime() + 60 * 60 * 1000)),\n        location: '',\n        type: 'blue',\n        reminder: '30min',\n        description: ''\n      }\n      addEventDialogVisible.value = true\n    }\n    \n    // 添加日程\n    const addEvent = async () => {\n      if (!newEvent.value.title) {\n        ElMessage.warning('请输入日程标题')\n        return\n      }\n      \n      if (!newEvent.value.start || !newEvent.value.end) {\n        ElMessage.warning('请选择日程时间')\n        return\n      }\n      \n      // 验证开始时间不晚于结束时间\n      const startTime = new Date(newEvent.value.start).getTime()\n      const endTime = new Date(newEvent.value.end).getTime()\n      if (startTime > endTime) {\n        ElMessage.warning('结束时间不能早于开始时间')\n        return\n      }\n      \n      // 验证开始和结束日期是同一天\n      const startDate = new Date(newEvent.value.start).toDateString()\n      const endDate = new Date(newEvent.value.end).toDateString()\n      if (startDate !== endDate) {\n        ElMessage.warning('开始和结束时间必须在同一天')\n        return\n      }\n      \n      try {\n        // 获取当前用户ID\n        const userId = Number(localStorage.getItem('user_id') || 0)\n        console.log('当前用户ID:', userId)\n        \n        // 直接使用表单填写的时间，不进行时区转换\n        const eventData = {\n          title: newEvent.value.title,\n          start: newEvent.value.start,\n          end: newEvent.value.end,\n          location: newEvent.value.location,\n          type: newEvent.value.type,\n          reminder: newEvent.value.reminder,\n          description: newEvent.value.description,\n          participants: userId ? [userId] : [] // 确保把当前用户加入参与者\n        }\n        \n        console.log('创建日程数据:', eventData)\n        const response = await createEvent(eventData)\n        \n        if (response.success) {\n          ElMessage.success('日程添加成功')\n          addEventDialogVisible.value = false\n          loadEvents() // 重新加载事件\n        } else {\n          ElMessage.error(response.message || '日程添加失败')\n        }\n      } catch (error) {\n        console.error('添加日程失败:', error)\n        ElMessage.error('日程添加失败')\n      }\n    }\n    \n    // 显示日程详情\n    const showEventDetails = (event) => {\n      selectedEvent.value = event\n      eventDetailsDialogVisible.value = true\n    }\n    \n    // 显示编辑日程对话框\n    const showEditEventDialog = () => {\n      editingEvent.value = {\n        id: selectedEvent.value.id,\n        title: selectedEvent.value.title,\n        start: formatDateForPicker(selectedEvent.value.start),\n        end: formatDateForPicker(selectedEvent.value.end),\n        location: selectedEvent.value.location || '',\n        type: selectedEvent.value.type,\n        reminder: selectedEvent.value.reminder,\n        description: selectedEvent.value.description || ''\n      }\n      \n      eventDetailsDialogVisible.value = false\n      editEventDialogVisible.value = true\n    }\n    \n    // 保存编辑的日程\n    const saveEditEvent = async () => {\n      if (!editingEvent.value.title) {\n        ElMessage.warning('请输入日程标题')\n        return\n      }\n      \n      if (!editingEvent.value.start || !editingEvent.value.end) {\n        ElMessage.warning('请选择日程时间')\n        return\n      }\n      \n      // 验证开始时间不晚于结束时间\n      const startTime = new Date(editingEvent.value.start).getTime()\n      const endTime = new Date(editingEvent.value.end).getTime()\n      if (startTime > endTime) {\n        ElMessage.warning('结束时间不能早于开始时间')\n        return\n      }\n      \n      // 验证开始和结束日期是同一天\n      const startDate = new Date(editingEvent.value.start).toDateString()\n      const endDate = new Date(editingEvent.value.end).toDateString()\n      if (startDate !== endDate) {\n        ElMessage.warning('开始和结束时间必须在同一天')\n        return\n      }\n      \n      try {\n        // 获取当前用户ID\n        const userId = Number(localStorage.getItem('user_id') || 0)\n        \n        // 直接使用表单填写的时间，不进行时区转换\n        const eventData = {\n          title: editingEvent.value.title,\n          start: editingEvent.value.start,\n          end: editingEvent.value.end,\n          location: editingEvent.value.location,\n          type: editingEvent.value.type,\n          reminder: editingEvent.value.reminder,\n          description: editingEvent.value.description,\n          participants: userId ? [userId] : [] // 确保把当前用户加入参与者\n        }\n        \n        console.log('更新日程数据:', eventData)\n        const response = await updateEvent(editingEvent.value.id, eventData)\n        \n        if (response.success) {\n          ElMessage.success('日程更新成功')\n          editEventDialogVisible.value = false\n          loadEvents() // 重新加载事件\n        } else {\n          ElMessage.error(response.message || '日程更新失败')\n        }\n      } catch (error) {\n        console.error('更新日程失败:', error)\n        ElMessage.error('日程更新失败')\n      }\n    }\n    \n    // 删除日程\n    const deleteEvent = async () => {\n      if (!selectedEvent.value.id || isNaN(selectedEvent.value.id)) {\n        ElMessage.error('日程ID无效，无法删除');\n        return;\n      }\n      console.log('尝试删除日程，id=', selectedEvent.value.id);\n      try {\n        await ElMessageBox.confirm('确定要删除该日程吗？', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        })\n        const response = await deleteCalendarEvent(selectedEvent.value.id)\n        if (response.success) {\n          ElMessage.success('日程删除成功')\n          eventDetailsDialogVisible.value = false\n          loadEvents() // 重新加载事件\n        } else {\n          ElMessage.error(response.message || '日程删除失败')\n          console.error('删除失败详细信息:', response)\n        }\n      } catch (error) {\n        if (error !== 'cancel') {\n          console.error('删除日程失败:', error)\n          ElMessage.error('日程删除失败: ' + (error?.message || '未知错误'))\n        }\n      }\n    }\n    \n    // 获取指定日期的事件\n    const getDayEvents = (date) => {\n      return events.value.filter(event => isSameDay(new Date(event.start), date))\n    }\n    \n    // 判断两个日期是否是同一天\n    const isSameDay = (date1, date2) => {\n      return date1.getFullYear() === date2.getFullYear() &&\n             date1.getMonth() === date2.getMonth() &&\n             date1.getDate() === date2.getDate()\n    }\n    \n    // 获取月份的第一天\n    const getFirstDayOfMonth = (date) => {\n      return new Date(date.getFullYear(), date.getMonth(), 1)\n    }\n    \n    // 获取月份的天数\n    const getDaysInMonth = (date) => {\n      return new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate()\n    }\n    \n    // 计算事件在时间轴上的位置\n    const calcEventTop = (event) => {\n      if (!event || !event.start) return 0\n      try {\n        const hours = event.start.getHours()\n        const minutes = event.start.getMinutes()\n        // 每小时60px高度，每15分钟15px\n        return (hours * 60 + minutes) / 15 * 15\n      } catch (error) {\n        console.error('计算事件位置错误:', error)\n        return 0\n      }\n    }\n    \n    // 计算事件的高度\n    const calcEventHeight = (event) => {\n      if (!event || !event.start || !event.end) return 60 // 默认高度1小时\n      try {\n        const startTime = event.start.getTime()\n        const endTime = event.end.getTime()\n        const duration = (endTime - startTime) / (1000 * 60) // 分钟数\n        \n        // 最小高度30px (30分钟)\n        return Math.max(duration / 15 * 15, 30)\n      } catch (error) {\n        console.error('计算事件高度错误:', error)\n        return 60\n      }\n    }\n    \n    // 格式化事件时间\n    const formatEventTime = (event) => {\n      const start = event.start\n      const end = event.end\n      \n      return `${start.getHours().toString().padStart(2, '0')}:${start.getMinutes().toString().padStart(2, '0')} - ${end.getHours().toString().padStart(2, '0')}:${end.getMinutes().toString().padStart(2, '0')}`\n    }\n    \n    // 格式化事件日期时间\n    const formatEventDateTime = (event) => {\n      if (!event.start || !event.end) return ''\n      \n      const options = {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit'\n      }\n      \n      return `${event.start.toLocaleDateString('zh-CN', options)} - ${event.end.toLocaleDateString('zh-CN', options)}`\n    }\n    \n    // 格式化提醒时间\n    const formatReminder = (reminder) => {\n      switch (reminder) {\n        case 'none':\n          return '不提醒'\n        case '10min':\n          return '10分钟前'\n        case '30min':\n          return '30分钟前'\n        case '1hour':\n          return '1小时前'\n        case '1day':\n          return '1天前'\n        default:\n          return '未设置'\n      }\n    }\n    \n    // 为日期选择器格式化日期\n    const formatDateForPicker = (date) => {\n      if (!date) return '';\n      \n      // 确保使用Date对象\n      const dateObj = date instanceof Date ? date : new Date(date);\n      \n      // 使用直接获取年月日时分的方式，不涉及时区转换\n      const year = dateObj.getFullYear();\n      const month = (dateObj.getMonth() + 1).toString().padStart(2, '0');\n      const day = dateObj.getDate().toString().padStart(2, '0');\n      const hours = dateObj.getHours().toString().padStart(2, '0');\n      const minutes = dateObj.getMinutes().toString().padStart(2, '0');\n      \n      return `${year}-${month}-${day} ${hours}:${minutes}`;\n    }\n    \n    // 处理开始时间变化，自动设置结束时间为1小时后\n    const handleStartTimeChange = (event) => {\n      if (!event.start) return\n      \n      try {\n        // 解析开始时间\n        const startTime = new Date(event.start)\n        \n        // 计算开始时间1小时后的时间\n        const endTime = new Date(startTime.getTime() + 60 * 60 * 1000)\n        \n        // 如果结束时间未设置，或结束时间早于开始时间，或结束时间不在同一天\n        // 则自动设置结束时间\n        if (!event.end || \n            new Date(event.end) < startTime || \n            new Date(event.end).toDateString() !== startTime.toDateString()) {\n          event.end = formatDateForPicker(endTime)\n        }\n      } catch (error) {\n        console.error('处理开始时间变化错误:', error)\n      }\n    }\n    \n    // 日程类型颜色\n    const eventTypeColor = (type) => {\n      const map = {\n        blue: '#409EFF',\n        orange: '#E6A23C',\n        green: '#67C23A',\n        red: '#F56C6C',\n        purple: '#909399',\n        default: '#606266'\n      }\n      return map[type] || map.default\n    }\n    \n    // 日程预览浮层\n    const eventPreview = ref({ visible: false, event: {}, style: {} })\n    const showEventPreview = (event, evt) => {\n      eventPreview.value = {\n        visible: true,\n        event,\n        style: {\n          position: 'fixed',\n          left: evt.clientX + 10 + 'px',\n          top: evt.clientY + 10 + 'px',\n          zIndex: 9999\n        }\n      }\n    }\n    const hideEventPreview = () => {\n      eventPreview.value.visible = false\n    }\n    \n    // 全部日程弹窗\n    const allEventsDialog = ref({ visible: false, events: [], title: '' })\n    const showAllEvents = (day) => {\n      allEventsDialog.value = {\n        visible: true,\n        events: day.events,\n        title: `${currentDate.value.getFullYear()}年${currentDate.value.getMonth() + 1}月${day.date}日全部日程`\n      }\n    }\n    \n    // 拖拽相关状态\n    const draggedEvent = ref(null)\n    const resizingEvent = ref(null)\n    const initialMouseY = ref(0)\n    const initialEventHeight = ref(0)\n    \n    // 开始拖拽\n    const dragStart = (e, event) => {\n      draggedEvent.value = event\n      // 在拖拽图像上显示事件标题\n      const dragImage = document.createElement('div')\n      dragImage.textContent = event.title\n      dragImage.className = 'drag-image'\n      document.body.appendChild(dragImage)\n      e.dataTransfer.setDragImage(dragImage, 0, 0)\n      \n      // 记录拖拽数据\n      e.dataTransfer.setData('text/plain', JSON.stringify({\n        id: event.id,\n        startTime: event.start.getTime(),\n        endTime: event.end.getTime()\n      }))\n      \n      // 添加拖拽效果\n      setTimeout(() => {\n        document.querySelectorAll('.week-day-events, .day-events-container').forEach(container => {\n          container.addEventListener('dragover', dragOver)\n          container.addEventListener('drop', drop)\n        })\n        document.body.removeChild(dragImage)\n      }, 0)\n    }\n    \n    // 拖拽经过\n    const dragOver = (e) => {\n      e.preventDefault()\n      if (!draggedEvent.value) return\n      \n      // 显示放置位置预览\n      const container = e.currentTarget\n      const containerRect = container.getBoundingClientRect()\n      const offsetY = e.clientY - containerRect.top\n      \n      // 计算新时间（按15分钟对齐）\n      const quarterHours = Math.floor(offsetY / 15)\n      const hours = Math.floor(quarterHours / 4)\n      const minutes = (quarterHours % 4) * 15\n      \n      // 更新预览位置\n      const previewElement = document.querySelector('.drag-preview') || document.createElement('div')\n      if (!previewElement.classList.contains('drag-preview')) {\n        previewElement.className = 'drag-preview'\n        container.appendChild(previewElement)\n      }\n      \n      // 设置预览元素样式\n      previewElement.style.top = (quarterHours * 15) + 'px'\n      previewElement.style.height = calcEventHeight(draggedEvent.value) + 'px'\n      previewElement.innerHTML = `${hours}:${minutes.toString().padStart(2, '0')}`\n    }\n    \n    // 放置拖拽\n    const drop = async (e) => {\n      e.preventDefault()\n      if (!draggedEvent.value) return\n      \n      // 移除预览元素\n      document.querySelectorAll('.drag-preview').forEach(el => el.remove())\n      \n      // 计算新的开始时间\n      const container = e.currentTarget\n      const containerRect = container.getBoundingClientRect()\n      const offsetY = e.clientY - containerRect.top\n      \n      // 计算新时间（按15分钟对齐）\n      const quarterHours = Math.floor(offsetY / 15)\n      const hours = Math.floor(quarterHours / 4)\n      const minutes = (quarterHours % 4) * 15\n      \n      // 创建新的开始时间\n      const newStartDate = new Date(draggedEvent.value.start)\n      newStartDate.setHours(hours, minutes, 0, 0)\n      \n      // 计算时间差\n      const timeDiff = newStartDate.getTime() - draggedEvent.value.start.getTime()\n      \n      // 创建新的结束时间（保持持续时间不变）\n      const newEndDate = new Date(draggedEvent.value.end.getTime() + timeDiff)\n      \n      // 更新事件\n      try {\n        const eventData = {\n          title: draggedEvent.value.title,\n          start: formatDateForPicker(newStartDate),\n          end: formatDateForPicker(newEndDate),\n          location: draggedEvent.value.location,\n          type: draggedEvent.value.type,\n          reminder: draggedEvent.value.reminder,\n          description: draggedEvent.value.description,\n          participants: draggedEvent.value.participants || []\n        }\n        \n        const response = await updateEvent(draggedEvent.value.id, eventData)\n        \n        if (response.success) {\n          ElMessage.success('日程时间已更新')\n          loadEvents() // 重新加载事件\n        } else {\n          ElMessage.error(response.message || '更新日程时间失败')\n        }\n      } catch (error) {\n        console.error('更新日程失败:', error)\n        ElMessage.error('更新日程时间失败')\n      }\n    }\n    \n    // 结束拖拽\n    const dragEnd = () => {\n      draggedEvent.value = null\n      document.querySelectorAll('.week-day-events, .day-events-container').forEach(container => {\n        container.removeEventListener('dragover', dragOver)\n        container.removeEventListener('drop', drop)\n      })\n      document.querySelectorAll('.drag-preview').forEach(el => el.remove())\n    }\n    \n    // 开始调整大小\n    const startResize = (e, event) => {\n      e.stopPropagation()\n      resizingEvent.value = event\n      initialMouseY.value = e.clientY\n      initialEventHeight.value = calcEventHeight(event)\n      \n      document.addEventListener('mousemove', handleResize)\n      document.addEventListener('mouseup', endResize)\n    }\n    \n    // 处理调整大小\n    const handleResize = (e) => {\n      if (!resizingEvent.value) return\n      \n      const deltaY = e.clientY - initialMouseY.value\n      const newHeight = Math.max(30, initialEventHeight.value + deltaY)\n      \n      // 计算新的持续时间（分钟）\n      const durationMinutes = Math.floor(newHeight / 15) * 15\n      \n      // 计算新的结束时间\n      const newEndTime = new Date(resizingEvent.value.start.getTime() + durationMinutes * 60 * 1000)\n      \n      // 更新预览\n      const eventElement = e.target.closest('.week-event, .day-event')\n      if (eventElement) {\n        eventElement.style.height = newHeight + 'px'\n        \n        // 更新时间显示\n        const timeElement = eventElement.querySelector('.week-event-time, .day-event-time')\n        if (timeElement) {\n          const startTime = `${resizingEvent.value.start.getHours().toString().padStart(2, '0')}:${resizingEvent.value.start.getMinutes().toString().padStart(2, '0')}`\n          const endTime = `${newEndTime.getHours().toString().padStart(2, '0')}:${newEndTime.getMinutes().toString().padStart(2, '0')}`\n          timeElement.textContent = `${startTime} - ${endTime}`\n        }\n      }\n    }\n    \n    // 结束调整大小\n    const endResize = async (e) => {\n      if (!resizingEvent.value) return\n      \n      document.removeEventListener('mousemove', handleResize)\n      document.removeEventListener('mouseup', endResize)\n      \n      const deltaY = e.clientY - initialMouseY.value\n      const newHeight = Math.max(30, initialEventHeight.value + deltaY)\n      \n      // 计算新的持续时间（分钟）\n      const durationMinutes = Math.floor(newHeight / 15) * 15\n      \n      // 计算新的结束时间\n      const newEndTime = new Date(resizingEvent.value.start.getTime() + durationMinutes * 60 * 1000)\n      \n      // 更新事件\n      try {\n        const eventData = {\n          title: resizingEvent.value.title,\n          start: formatDateForPicker(resizingEvent.value.start),\n          end: formatDateForPicker(newEndTime),\n          location: resizingEvent.value.location,\n          type: resizingEvent.value.type,\n          reminder: resizingEvent.value.reminder,\n          description: resizingEvent.value.description,\n          participants: resizingEvent.value.participants || []\n        }\n        \n        const response = await updateEvent(resizingEvent.value.id, eventData)\n        \n        if (response.success) {\n          ElMessage.success('日程时长已更新')\n          loadEvents() // 重新加载事件\n        } else {\n          ElMessage.error(response.message || '更新日程时长失败')\n        }\n      } catch (error) {\n        console.error('更新日程失败:', error)\n        ElMessage.error('更新日程时长失败')\n      }\n      \n      resizingEvent.value = null\n    }\n    \n    // 监听日历视图变化\n    watch(calendarView, () => {\n      loadEvents()\n    })\n    \n    // 监听当前日期变化\n    watch(currentDate, () => {\n      loadEvents()\n    })\n    \n    // 组件挂载时启动定时器\n    onMounted(() => {\n      // 初始化加载事件\n      loadEvents()\n    })\n    \n    // 组件卸载时清除定时器\n    onUnmounted(() => {\n      // 不需要清除定时器，因为周视图和日视图没有时间线更新逻辑\n    })\n    \n    return {\n      calendarView,\n      currentDate,\n      currentDateLabel,\n      weekDays,\n      days,\n      weekDates,\n      dayEvents,\n      addEventDialogVisible,\n      eventDetailsDialogVisible,\n      editEventDialogVisible,\n      newEvent,\n      selectedEvent,\n      editingEvent,\n      today,\n      prev,\n      next,\n      selectDay,\n      showAddEventDialog,\n      addEvent,\n      showEventDetails,\n      showEditEventDialog,\n      saveEditEvent,\n      deleteEvent,\n      calcEventTop,\n      calcEventHeight,\n      formatEventTime,\n      formatEventDateTime,\n      formatReminder,\n      // Element Plus 图标\n      ArrowLeft,\n      ArrowRight,\n      Plus,\n      handleStartTimeChange,\n      eventTypeColor,\n      eventPreview,\n      showEventPreview,\n      hideEventPreview,\n      allEventsDialog,\n      showAllEvents,\n      allDayEvents,\n      dayEventGroups,\n      organizeOverlappingEvents,\n      dragStart,\n      dragEnd,\n      startResize\n    }\n  }\n}\n</script>\n\n<style scoped>\n.calendar-container {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.calendar-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 15px 20px;\n  border-bottom: 1px solid var(--border-color);\n}\n\n.date-controls {\n  display: flex;\n  align-items: center;\n}\n\n.date-nav {\n  display: flex;\n  align-items: center;\n  margin-left: 15px;\n}\n\n.current-date {\n  margin: 0 15px;\n  font-size: 16px;\n  font-weight: 500;\n  color: var(--text-color);\n}\n\n.calendar-main {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n}\n\n.calendar-weekdays {\n  display: grid;\n  grid-template-columns: repeat(7, 1fr);\n  background-color: var(--bg-color-secondary);\n  padding: 10px 0;\n  border-bottom: 1px solid var(--border-color);\n}\n\n.weekday {\n  text-align: center;\n  font-weight: 500;\n  color: var(--text-color-secondary);\n}\n\n.calendar-days {\n  flex: 1;\n  display: grid;\n  grid-template-columns: repeat(7, 1fr);\n  grid-template-rows: repeat(6, 1fr);\n}\n\n.calendar-day {\n  border-right: 1px solid var(--border-color);\n  border-bottom: 1px solid var(--border-color);\n  padding: 5px;\n  overflow: hidden;\n  background-color: var(--bg-color);\n}\n\n.calendar-day:nth-child(7n) {\n  border-right: none;\n}\n\n.calendar-day.today {\n  background-color: var(--bg-color-tertiary);\n}\n\n.calendar-day.other-month {\n  opacity: 0.5;\n}\n\n.day-number {\n  font-size: 14px;\n  font-weight: 500;\n  color: var(--text-color);\n  margin-bottom: 5px;\n}\n\n.calendar-day.today .day-number {\n  color: var(--primary-color);\n}\n\n.event-container {\n  font-size: 12px;\n}\n\n.event-item {\n  display: flex;\n  align-items: center;\n  font-size: 12px;\n  margin-bottom: 2px;\n  cursor: pointer;\n  background: #f4f8fb;\n  border-radius: 3px;\n  padding: 0 4px 0 2px;\n  position: relative;\n}\n\n.event-color {\n  width: 6px;\n  height: 6px;\n  border-radius: 50%;\n  margin-right: 4px;\n  display: inline-block;\n}\n\n.event-more {\n  font-size: 11px;\n  color: var(--text-color-tertiary);\n  text-align: center;\n  margin-top: 2px;\n}\n\n/* 日程事件颜色 */\n.event-blue {\n  background-color: rgba(59, 130, 246, 0.15);\n  color: var(--primary-color);\n  border-left: 3px solid var(--primary-color);\n}\n\n.event-orange {\n  background-color: rgba(250, 140, 22, 0.15);\n  color: #fa8c16;\n  border-left: 3px solid #fa8c16;\n}\n\n.event-green {\n  background-color: rgba(82, 196, 26, 0.15);\n  color: var(--success-color);\n  border-left: 3px solid var(--success-color);\n}\n\n.event-red {\n  background-color: rgba(245, 34, 45, 0.15);\n  color: var(--error-color);\n  border-left: 3px solid var(--error-color);\n}\n\n.event-purple {\n  background-color: rgba(114, 46, 209, 0.15);\n  color: #722ed1;\n  border-left: 3px solid #722ed1;\n}\n\n/* 周视图样式 */\n.calendar-week {\n  display: flex;\n  flex-direction: column;\n  height: 700px;\n  border: 1px solid var(--border-color);\n}\n\n.week-header {\n  display: flex;\n  border-bottom: 1px solid var(--border-color);\n}\n\n.week-time-col {\n  width: 60px;\n  border-right: 1px solid var(--border-color);\n}\n\n.week-day-col {\n  flex: 1;\n  text-align: center;\n  padding: 10px;\n  border-right: 1px solid var(--border-color);\n  background-color: var(--bg-color);\n}\n\n.week-day-col:last-child {\n  border-right: none;\n}\n\n.week-day-col.today {\n  background-color: var(--bg-color-tertiary);\n}\n\n.week-day-name {\n  font-weight: 500;\n  color: var(--text-color);\n  margin-bottom: 5px;\n}\n\n.week-day-date {\n  color: var(--text-color-secondary);\n}\n\n.week-body {\n  display: flex;\n  flex: 1;\n  overflow-y: auto;\n  background-color: var(--bg-color);\n}\n\n.week-time-scale {\n  width: 60px;\n  border-right: 1px solid var(--border-color);\n  flex-shrink: 0;\n}\n\n.time-slot {\n  height: 60px;\n  padding: 2px 5px;\n  font-size: 12px;\n  text-align: right;\n  color: var(--text-color-tertiary);\n  border-bottom: 1px solid var(--border-color);\n}\n\n.week-events-container {\n  display: flex;\n  flex: 1;\n}\n\n.week-day-events {\n  flex: 1;\n  position: relative;\n  border-right: 1px solid var(--border-color);\n  background-color: var(--bg-color);\n}\n\n.week-day-events:last-child {\n  border-right: none;\n}\n\n.week-all-day-events {\n  display: none;\n}\n\n.week-event-group {\n  position: absolute;\n  height: 100%;\n  top: 0;\n}\n\n.week-event {\n  position: absolute;\n  width: 94%;\n  left: 3%;\n  border-radius: 4px;\n  padding: 5px;\n  font-size: 12px;\n  overflow: hidden;\n  cursor: pointer;\n  z-index: 1;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  transition: all 0.2s ease;\n}\n\n.week-event:hover {\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\n  transform: translateY(-1px);\n}\n\n.week-event-title {\n  font-weight: 500;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  margin-left: 12px;\n  margin-top: -12px;\n}\n\n.week-event-time {\n  font-size: 11px;\n  margin-top: 2px;\n  color: rgba(0, 0, 0, 0.6);\n}\n\n.all-day-event-title {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  margin-left: 4px;\n}\n\n/* 日视图样式 */\n.calendar-day-view {\n  display: flex;\n  flex-direction: column;\n  height: 700px;\n  border: 1px solid var(--border-color);\n}\n\n.day-header {\n  padding: 10px;\n  border-bottom: 1px solid var(--border-color);\n  background-color: var(--bg-color-tertiary);\n}\n\n.day-date {\n  font-size: 16px;\n  font-weight: 500;\n  color: var(--text-color);\n}\n\n.day-body {\n  display: flex;\n  flex: 1;\n  overflow-y: auto;\n  background-color: var(--bg-color);\n}\n\n.day-time-scale {\n  width: 60px;\n  border-right: 1px solid var(--border-color);\n  flex-shrink: 0;\n}\n\n.day-events-container {\n  flex: 1;\n  position: relative;\n}\n\n.day-all-day-events {\n  display: none;\n}\n\n.day-event-group {\n  position: absolute;\n  height: 100%;\n  top: 0;\n}\n\n.day-event {\n  position: absolute;\n  width: 94%;\n  left: 3%;\n  border-radius: 4px;\n  padding: 8px;\n  font-size: 13px;\n  overflow: hidden;\n  cursor: pointer;\n  z-index: 1;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  transition: all 0.2s ease;\n}\n\n.day-event:hover {\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\n  transform: translateY(-1px);\n}\n\n.day-event-title {\n  font-weight: 500;\n  margin-bottom: 5px;\n  margin-left: 12px;\n  margin-top: -12px;\n}\n\n.day-event-time {\n  font-size: 12px;\n  margin-bottom: 5px;\n  color: rgba(0, 0, 0, 0.6);\n}\n\n.day-event-location {\n  font-size: 12px;\n  color: #409EFF;\n}\n\n/* 日程详情样式 */\n.event-details {\n  margin-top: 10px;\n}\n\n.event-detail-item {\n  display: flex;\n  margin-bottom: 15px;\n  align-items: flex-start;\n}\n\n.event-detail-item i {\n  margin-right: 10px;\n  font-size: 16px;\n  color: var(--text-color-tertiary);\n}\n\n.event-description {\n  white-space: pre-line;\n}\n\n/* 添加全局样式确保对话框在深色模式下正确显示 */\n:deep(.calendar-dialog) {\n  .el-dialog {\n    background-color: var(--bg-color);\n    \n    .el-dialog__header {\n      color: var(--text-color);\n      background-color: var(--bg-color);\n      border-bottom: 1px solid var(--border-color);\n    }\n    \n    .el-dialog__body {\n      color: var(--text-color);\n      background-color: var(--bg-color);\n    }\n    \n    .el-dialog__footer {\n      background-color: var(--bg-color);\n      border-top: 1px solid var(--border-color);\n    }\n  }\n  \n  .el-form-item__label {\n    color: var(--text-color);\n  }\n  \n  .el-input__wrapper {\n    background-color: var(--bg-color-tertiary) !important;\n    box-shadow: 0 0 0 1px var(--border-color) inset !important;\n  }\n  \n  .el-input__inner {\n    background-color: transparent !important;\n    color: var(--text-color) !important;\n  }\n  \n  .el-textarea__wrapper {\n    background-color: var(--bg-color-tertiary) !important;\n    box-shadow: 0 0 0 1px var(--border-color) inset !important;\n  }\n  \n  .el-textarea__inner {\n    background-color: transparent !important;\n    color: var(--text-color) !important;\n  }\n  \n  .el-select-dropdown {\n    background-color: var(--bg-color-secondary) !important;\n    border-color: var(--border-color) !important;\n    \n    .el-select-dropdown__item {\n      color: var(--text-color) !important;\n      \n      &.hover, &:hover {\n        background-color: var(--hover-color) !important;\n      }\n      \n      &.selected {\n        color: var(--primary-color) !important;\n        background-color: var(--hover-color) !important;\n      }\n    }\n  }\n  \n  /* 日期选择器深色模式样式修复 */\n  .el-date-picker, .el-date-range-picker {\n    background-color: var(--bg-color) !important;\n    color: var(--text-color) !important;\n    \n    .el-picker-panel__content, .el-date-table {\n      background-color: var(--bg-color-secondary) !important;\n      color: var(--text-color) !important;\n    }\n    \n    .el-date-range-picker__time-header,\n    .el-date-range-picker__header,\n    .el-date-picker__header,\n    .el-picker-panel__footer {\n      background-color: var(--bg-color-secondary) !important;\n      color: var(--text-color) !important;\n      border-color: var(--border-color) !important;\n    }\n    \n    .el-date-table th {\n      color: var(--text-color-secondary) !important;\n      border-bottom-color: var(--border-color) !important;\n    }\n    \n    .el-date-table td {\n      color: var(--text-color) !important;\n    }\n    \n    .el-date-table td.available:hover {\n      color: var(--primary-color) !important;\n    }\n    \n    .el-date-table td.current:not(.disabled) {\n      color: #fff !important;\n      background-color: var(--primary-color) !important;\n    }\n    \n    .el-date-table td.today {\n      color: var(--primary-color) !important;\n    }\n    \n    .el-date-table td.prev-month,\n    .el-date-table td.next-month {\n      color: var(--text-color-tertiary) !important;\n    }\n    \n    .el-time-panel {\n      background-color: var(--bg-color) !important;\n      border-color: var(--border-color) !important;\n      \n      .el-time-panel__content::before,\n      .el-time-panel__content::after {\n        background-color: var(--border-color) !important;\n      }\n      \n      .el-time-panel__footer {\n        border-top-color: var(--border-color) !important;\n      }\n      \n      .el-time-spinner__item {\n        color: var(--text-color) !important;\n      }\n      \n      .el-time-spinner__item.active:not(.disabled) {\n        color: var(--primary-color) !important;\n        font-weight: bold;\n      }\n    }\n    \n    .el-picker-panel__icon-btn {\n      color: var(--text-color) !important;\n    }\n    \n    .el-date-picker__header-label {\n      color: var(--text-color) !important;\n    }\n  }\n}\n\n/* 全局选择器修复，确保下拉菜单在深色模式下显示正确 */\n:deep(.el-select-dropdown) {\n  background-color: var(--bg-color-secondary) !important;\n  border-color: var(--border-color) !important;\n  \n  .el-select-dropdown__item {\n    color: var(--text-color) !important;\n    \n    &.hover, &:hover {\n      background-color: var(--hover-color) !important;\n    }\n    \n    &.selected {\n      color: var(--primary-color) !important;\n      background-color: var(--hover-color) !important;\n    }\n  }\n}\n\n:deep(.el-popper) {\n  background-color: var(--bg-color-secondary) !important;\n  border-color: var(--border-color) !important;\n  \n  .el-popper__arrow::before {\n    background-color: var(--bg-color-secondary) !important;\n    border-color: var(--border-color) !important;\n  }\n  \n  .el-select-dropdown__item {\n    color: var(--text-color) !important;\n    \n    &.hover, &:hover {\n      background-color: var(--hover-color) !important;\n    }\n    \n    &.selected {\n      color: var(--primary-color) !important;\n      background-color: var(--hover-color) !important;\n    }\n  }\n}\n\n/* 覆盖Element Plus的全局弹出层样式 */\nbody.is-dark {\n  --el-select-dropdown-bg-color: var(--bg-color-secondary) !important;\n  --el-bg-color: var(--bg-color-secondary) !important;\n  --el-bg-color-overlay: var(--bg-color-secondary) !important;\n  --el-text-color-primary: var(--text-color) !important;\n  --el-border-color: var(--border-color) !important;\n  --el-border-color-lighter: var(--border-color) !important;\n  \n  .el-popper {\n    background-color: var(--bg-color-secondary) !important;\n    border-color: var(--border-color) !important;\n    \n    .el-popper__arrow::before {\n      background-color: var(--bg-color-secondary) !important;\n      border-color: var(--border-color) !important;\n    }\n  }\n  \n  .el-select-dropdown {\n    background-color: var(--bg-color-secondary) !important;\n    \n    .el-select-dropdown__item {\n      color: var(--text-color) !important;\n      \n      &.hover, &:hover {\n        background-color: var(--hover-color) !important;\n      }\n      \n      &.selected {\n        color: var(--primary-color) !important;\n        background-color: var(--hover-color) !important;\n      }\n    }\n  }\n}\n\n.event-preview-pop {\n  min-width: 180px;\n  background: #fff;\n  box-shadow: 0 2px 8px rgba(0,0,0,0.15);\n  border-radius: 4px;\n  padding: 8px 12px;\n  position: fixed;\n  pointer-events: none;\n  font-size: 13px;\n  color: #333;\n}\n\n.event-preview-title {\n  font-weight: bold;\n  margin-bottom: 4px;\n}\n\n.event-preview-time {\n  color: #888;\n  font-size: 12px;\n  margin-bottom: 2px;\n}\n\n.event-preview-location {\n  color: #409EFF;\n  font-size: 12px;\n  margin-bottom: 2px;\n}\n\n.event-preview-desc {\n  color: #666;\n  font-size: 12px;\n}\n\n.all-event-title {\n  font-weight: bold;\n  margin-bottom: 2px;\n}\n\n.all-event-time {\n  color: #888;\n  font-size: 12px;\n}\n\n.all-event-location {\n  color: #409EFF;\n  font-size: 12px;\n}\n\n.all-event-desc {\n  color: #666;\n  font-size: 12px;\n}\n\n/* 拖拽预览元素 */\n.drag-preview {\n  position: absolute;\n  background-color: rgba(64, 158, 255, 0.3);\n  border: 2px dashed #409EFF;\n  border-radius: 4px;\n  left: 10%;\n  width: 80%;\n  z-index: 100;\n  color: #409EFF;\n  font-size: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  pointer-events: none;\n}\n\n.drag-image {\n  position: absolute;\n  top: -1000px;\n  left: -1000px;\n  width: 100px;\n  height: 30px;\n  background: #409EFF;\n  color: white;\n  padding: 5px;\n  border-radius: 3px;\n  font-size: 12px;\n  opacity: 0.8;\n}\n\n.resize-handle {\n  position: absolute;\n  width: 100%;\n  height: 6px;\n  bottom: 0;\n  left: 0;\n  cursor: ns-resize;\n  opacity: 0;\n  background-color: rgba(0, 0, 0, 0.1);\n  transition: opacity 0.2s;\n}\n\n.week-event:hover .resize-handle,\n.day-event:hover .resize-handle {\n  opacity: 1;\n}\n\n.week-event.resizing,\n.day-event.resizing {\n  opacity: 0.7;\n  z-index: 100;\n}\n\n/* 拖拽目标样式 */\n.week-day-events.drag-over,\n.day-events-container.drag-over {\n  background-color: rgba(64, 158, 255, 0.05);\n}\n\n/* 移除当前时间线样式 */\n.current-time-line,\n.current-time-dot,\n.current-time-line-inner,\n.current-time-label {\n  display: none !important;\n}\n</style> "],"mappings":"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","ignoreList":[]}]}