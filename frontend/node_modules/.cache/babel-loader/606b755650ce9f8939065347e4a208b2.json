{"remainingRequest":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\calendar\\Index.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\calendar\\Index.vue","mtime":1751972374047},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\babel.config.js","mtime":1748077811200},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1746431219000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1746431218000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLm1hcC5qcyI7CmltcG9ydCB7IHJlZiwgY29tcHV0ZWQsIG9uTW91bnRlZCwgd2F0Y2gsIG5leHRUaWNrLCBvbkFjdGl2YXRlZCwgb25CZWZvcmVVbm1vdW50LCBvblVubW91bnRlZCwgZ2V0Q3VycmVudEluc3RhbmNlIH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgdXNlUm91dGUgfSBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IHsgRWxNZXNzYWdlLCBFbE1lc3NhZ2VCb3ggfSBmcm9tICdlbGVtZW50LXBsdXMnOwppbXBvcnQgeyBBcnJvd0xlZnQsIEFycm93UmlnaHQsIFBsdXMgfSBmcm9tICdAZWxlbWVudC1wbHVzL2ljb25zLXZ1ZSc7CmltcG9ydCB7IGdldE1vbnRobHlFdmVudHMsIGdldFdlZWtseUV2ZW50cywgZ2V0RGFpbHlFdmVudHMsIGNyZWF0ZUV2ZW50LCB1cGRhdGVFdmVudCwgZGVsZXRlQ2FsZW5kYXJFdmVudCBhcyBkZWxldGVDYWxlbmRhckV2ZW50QXBpIH0gZnJvbSAnQC9hcGkvY2FsZW5kYXInOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0NhbGVuZGFyJywKICBzZXR1cCgpIHsKICAgIC8vIOi3r+eUseebuOWFswogICAgY29uc3Qgcm91dGUgPSB1c2VSb3V0ZSgpOwoKICAgIC8vIOaXpeWOhuinhuWbvuexu+Wei++8muaciC/lkagv5pelCiAgICBjb25zdCBjYWxlbmRhclZpZXcgPSByZWYoJ21vbnRoJyk7CgogICAgLy8g5b2T5YmN5pel5pyfCiAgICBjb25zdCBjdXJyZW50RGF0ZSA9IHJlZihuZXcgRGF0ZSgpKTsKCiAgICAvLyDkuovku7bmlbDmja4KICAgIGNvbnN0IGV2ZW50cyA9IHJlZihbXSk7CgogICAgLy8g6KGo5Y2V5byV55SoCiAgICBjb25zdCBhZGRFdmVudEZvcm1SZWYgPSByZWYobnVsbCk7CiAgICBjb25zdCBlZGl0RXZlbnRGb3JtUmVmID0gcmVmKG51bGwpOwoKICAgIC8vIOihqOWNlemqjOivgeinhOWImQogICAgY29uc3QgcnVsZXMgPSB7CiAgICAgIHRpdGxlOiBbewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXml6XnqIvmoIfpopgnLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9XSwKICAgICAgc3RhcnQ6IFt7CiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgbWVzc2FnZTogJ+ivt+mAieaLqeW8gOWni+aXtumXtCcsCiAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgfV0sCiAgICAgIGVuZDogW3sKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oup57uT5p2f5pe26Ze0JywKICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJwogICAgICB9XSwKICAgICAgbG9jYXRpb246IFt7CiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeWcsOeCuScsCiAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgIH1dLAogICAgICB0eXBlOiBbewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIG1lc3NhZ2U6ICfor7fpgInmi6nml6XnqIvnsbvlnosnLAogICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgIH1dLAogICAgICByZW1pbmRlcjogW3sKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oup5o+Q6YaS5pe26Ze0JywKICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJwogICAgICB9XSwKICAgICAgZGVzY3JpcHRpb246IFt7CiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeWkh+azqOS/oeaBrycsCiAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgIH1dCiAgICB9OwoKICAgIC8vIOagvOW8j+WMluW9k+WJjeaXpeacn+agh+etvgogICAgY29uc3QgY3VycmVudERhdGVMYWJlbCA9IGNvbXB1dGVkKCgpID0+IHsKICAgICAgY29uc3Qgb3B0aW9ucyA9IHsKICAgICAgICB5ZWFyOiAnbnVtZXJpYycsCiAgICAgICAgbW9udGg6ICdsb25nJwogICAgICB9OwogICAgICBpZiAoY2FsZW5kYXJWaWV3LnZhbHVlID09PSAnd2VlaycpIHsKICAgICAgICByZXR1cm4gYCR7Y3VycmVudERhdGUudmFsdWUuZ2V0RnVsbFllYXIoKX3lubQke2N1cnJlbnREYXRlLnZhbHVlLmdldE1vbnRoKCkgKyAxfeaciOesrCR7TWF0aC5jZWlsKChjdXJyZW50RGF0ZS52YWx1ZS5nZXREYXRlKCkgKyBnZXRGaXJzdERheU9mTW9udGgoY3VycmVudERhdGUudmFsdWUpLmdldERheSgpKSAvIDcpfeWRqGA7CiAgICAgIH0gZWxzZSBpZiAoY2FsZW5kYXJWaWV3LnZhbHVlID09PSAnZGF5JykgewogICAgICAgIHJldHVybiBjdXJyZW50RGF0ZS52YWx1ZS50b0xvY2FsZURhdGVTdHJpbmcoJ3poLUNOJywgewogICAgICAgICAgeWVhcjogJ251bWVyaWMnLAogICAgICAgICAgbW9udGg6ICdsb25nJywKICAgICAgICAgIGRheTogJ251bWVyaWMnCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGN1cnJlbnREYXRlLnZhbHVlLnRvTG9jYWxlRGF0ZVN0cmluZygnemgtQ04nLCBvcHRpb25zKTsKICAgIH0pOwoKICAgIC8vIOaYn+acn+aVsOe7hAogICAgY29uc3Qgd2Vla0RheXMgPSByZWYoWyfml6UnLCAn5LiAJywgJ+S6jCcsICfkuIknLCAn5ZubJywgJ+S6lCcsICflha0nXSk7CgogICAgLy8g5a+56K+d5qGG54q25oCBCiAgICBjb25zdCBhZGRFdmVudERpYWxvZ1Zpc2libGUgPSByZWYoZmFsc2UpOwogICAgY29uc3QgZXZlbnREZXRhaWxzRGlhbG9nVmlzaWJsZSA9IHJlZihmYWxzZSk7CiAgICBjb25zdCBlZGl0RXZlbnREaWFsb2dWaXNpYmxlID0gcmVmKGZhbHNlKTsKCiAgICAvLyDmlrDlu7rml6XnqIsKICAgIGNvbnN0IG5ld0V2ZW50ID0gcmVmKHsKICAgICAgdGl0bGU6ICcnLAogICAgICBzdGFydDogJycsCiAgICAgIGVuZDogJycsCiAgICAgIGxvY2F0aW9uOiAnJywKICAgICAgdHlwZTogJ2JsdWUnLAogICAgICByZW1pbmRlcjogJzMwbWluJywKICAgICAgZGVzY3JpcHRpb246ICcnCiAgICB9KTsKCiAgICAvLyDpgInkuK3nmoTml6XnqIsKICAgIGNvbnN0IHNlbGVjdGVkRXZlbnQgPSByZWYoe30pOwoKICAgIC8vIOato+WcqOe8lui+keeahOaXpeeoiwogICAgY29uc3QgZWRpdGluZ0V2ZW50ID0gcmVmKHsKICAgICAgaWQ6ICcnLAogICAgICB0aXRsZTogJycsCiAgICAgIHN0YXJ0OiAnJywKICAgICAgZW5kOiAnJywKICAgICAgbG9jYXRpb246ICcnLAogICAgICB0eXBlOiAnYmx1ZScsCiAgICAgIHJlbWluZGVyOiAnMzBtaW4nLAogICAgICBkZXNjcmlwdGlvbjogJycKICAgIH0pOwoKICAgIC8vIOeUn+aIkOaciOinhuWbvueahOaXpeacn+aVsOaNrgogICAgY29uc3QgZGF5cyA9IGNvbXB1dGVkKCgpID0+IHsKICAgICAgY29uc3QgcmVzdWx0ID0gW107CiAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTsKCiAgICAgIC8vIOiOt+WPluW9k+aciOesrOS4gOWkqeaYr+aYn+acn+WHoAogICAgICBjb25zdCBmaXJzdERheSA9IGdldEZpcnN0RGF5T2ZNb250aChjdXJyZW50RGF0ZS52YWx1ZSkuZ2V0RGF5KCk7CgogICAgICAvLyDojrflj5blvZPmnIjlpKnmlbAKICAgICAgY29uc3QgZGF5c0luTW9udGggPSBnZXREYXlzSW5Nb250aChjdXJyZW50RGF0ZS52YWx1ZSk7CgogICAgICAvLyDojrflj5bkuIrkuKrmnIjlpKnmlbAKICAgICAgY29uc3QgZGF5c0luTGFzdE1vbnRoID0gZ2V0RGF5c0luTW9udGgobmV3IERhdGUoY3VycmVudERhdGUudmFsdWUuZ2V0RnVsbFllYXIoKSwgY3VycmVudERhdGUudmFsdWUuZ2V0TW9udGgoKSAtIDEpKTsKCiAgICAgIC8vIOa3u+WKoOS4iuS4quaciOeahOaXpeacnwogICAgICBmb3IgKGxldCBpID0gZmlyc3REYXkgLSAxOyBpID49IDA7IGktLSkgewogICAgICAgIGNvbnN0IGRheSA9IGRheXNJbkxhc3RNb250aCAtIGk7CiAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGN1cnJlbnREYXRlLnZhbHVlLmdldEZ1bGxZZWFyKCksIGN1cnJlbnREYXRlLnZhbHVlLmdldE1vbnRoKCkgLSAxLCBkYXkpOwogICAgICAgIHJlc3VsdC5wdXNoKHsKICAgICAgICAgIGRhdGU6IGRheSwKICAgICAgICAgIGlzQ3VycmVudE1vbnRoOiBmYWxzZSwKICAgICAgICAgIGlzVG9kYXk6IGlzU2FtZURheShkYXRlLCB0b2RheSksCiAgICAgICAgICBldmVudHM6IGdldERheUV2ZW50cyhkYXRlKQogICAgICAgIH0pOwogICAgICB9CgogICAgICAvLyDmt7vliqDlvZPmnIjnmoTml6XmnJ8KICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gZGF5c0luTW9udGg7IGkrKykgewogICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShjdXJyZW50RGF0ZS52YWx1ZS5nZXRGdWxsWWVhcigpLCBjdXJyZW50RGF0ZS52YWx1ZS5nZXRNb250aCgpLCBpKTsKICAgICAgICByZXN1bHQucHVzaCh7CiAgICAgICAgICBkYXRlOiBpLAogICAgICAgICAgaXNDdXJyZW50TW9udGg6IHRydWUsCiAgICAgICAgICBpc1RvZGF5OiBpc1NhbWVEYXkoZGF0ZSwgdG9kYXkpLAogICAgICAgICAgZXZlbnRzOiBnZXREYXlFdmVudHMoZGF0ZSkKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgLy8g5re75Yqg5LiL5Liq5pyI55qE5pel5pyf77yM6KGl5ruhNDLkuKrmoLzlrZDvvIg26KGMN+WIl++8iQogICAgICBjb25zdCByZW1haW5pbmcgPSA0MiAtIHJlc3VsdC5sZW5ndGg7CiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHJlbWFpbmluZzsgaSsrKSB7CiAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGN1cnJlbnREYXRlLnZhbHVlLmdldEZ1bGxZZWFyKCksIGN1cnJlbnREYXRlLnZhbHVlLmdldE1vbnRoKCkgKyAxLCBpKTsKICAgICAgICByZXN1bHQucHVzaCh7CiAgICAgICAgICBkYXRlOiBpLAogICAgICAgICAgaXNDdXJyZW50TW9udGg6IGZhbHNlLAogICAgICAgICAgaXNUb2RheTogaXNTYW1lRGF5KGRhdGUsIHRvZGF5KSwKICAgICAgICAgIGV2ZW50czogZ2V0RGF5RXZlbnRzKGRhdGUpCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0pOwoKICAgIC8vIOWRqOinhuWbvuaVsOaNrgogICAgY29uc3Qgd2Vla0RhdGVzID0gY29tcHV0ZWQoKCkgPT4gewogICAgICBjb25zdCByZXN1bHQgPSBbXTsKICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGN1cnJlbnREYXRlLnZhbHVlKTsKICAgICAgY29uc3QgZGF5ID0gZGF0ZS5nZXREYXkoKTsKCiAgICAgIC8vIOiuvue9ruWIsOacrOWRqOeahOWRqOaXpQogICAgICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgLSBkYXkpOwoKICAgICAgLy8g55Sf5oiQ5LiA5ZGo55qE5pel5pyfCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNzsgaSsrKSB7CiAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSBuZXcgRGF0ZShkYXRlKTsKICAgICAgICBjdXJyZW50RGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpICsgaSk7CiAgICAgICAgY29uc3QgZGF5RXZlbnRzID0gZ2V0RGF5RXZlbnRzKGN1cnJlbnREYXRlKTsKICAgICAgICAvLyDmiYDmnInkuovku7bkvZzkuLrmma7pgJrkuovku7blpITnkIYKICAgICAgICBjb25zdCBldmVudEdyb3VwcyA9IG9yZ2FuaXplT3ZlcmxhcHBpbmdFdmVudHMoZGF5RXZlbnRzKTsKICAgICAgICByZXN1bHQucHVzaCh7CiAgICAgICAgICBkYXRlOiBjdXJyZW50RGF0ZS5nZXREYXRlKCksCiAgICAgICAgICBkYXlOYW1lOiB3ZWVrRGF5cy52YWx1ZVtpXSwKICAgICAgICAgIGlzVG9kYXk6IGlzU2FtZURheShjdXJyZW50RGF0ZSwgbmV3IERhdGUoKSksCiAgICAgICAgICBmdWxsRGF0ZTogY3VycmVudERhdGUsCiAgICAgICAgICBldmVudHM6IGRheUV2ZW50cywKICAgICAgICAgIGFsbERheUV2ZW50czogW10sCiAgICAgICAgICAvLyDkv53nlZnnqbrmlbDnu4Tku6XlhbzlrrnnjrDmnInku6PnoIEKICAgICAgICAgIGV2ZW50R3JvdXBzOiBldmVudEdyb3VwcwogICAgICAgIH0pOwogICAgICB9CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9KTsKCiAgICAvLyDml6Xop4blm77kuovku7YKICAgIGNvbnN0IGRheUV2ZW50cyA9IGNvbXB1dGVkKCgpID0+IHsKICAgICAgcmV0dXJuIGdldERheUV2ZW50cyhjdXJyZW50RGF0ZS52YWx1ZSk7CiAgICB9KTsKCiAgICAvLyDml6Xop4blm77lhajlpKnkuovku7YgLSDkv53nlZnnqbrmlbDnu4Tku6XlhbzlrrnnjrDmnInku6PnoIEKICAgIGNvbnN0IGFsbERheUV2ZW50cyA9IGNvbXB1dGVkKCgpID0+IHsKICAgICAgcmV0dXJuIFtdOwogICAgfSk7CgogICAgLy8g5pel6KeG5Zu+5pmu6YCa5LqL5Lu25YiG57uEIC0g5omA5pyJ5LqL5Lu25L2c5Li65pmu6YCa5LqL5Lu25aSE55CGCiAgICBjb25zdCBkYXlFdmVudEdyb3VwcyA9IGNvbXB1dGVkKCgpID0+IHsKICAgICAgcmV0dXJuIG9yZ2FuaXplT3ZlcmxhcHBpbmdFdmVudHMoZGF5RXZlbnRzLnZhbHVlKTsKICAgIH0pOwoKICAgIC8vIOe7hOe7h+mHjeWPoOS6i+S7tuS4uuS4jeWQjOWIhue7hAogICAgY29uc3Qgb3JnYW5pemVPdmVybGFwcGluZ0V2ZW50cyA9IGV2ZW50cyA9PiB7CiAgICAgIGlmICghZXZlbnRzLmxlbmd0aCkgcmV0dXJuIFtbXV07CgogICAgICAvLyDmjInlvIDlp4vml7bpl7TmjpLluo8KICAgICAgY29uc3Qgc29ydGVkRXZlbnRzID0gWy4uLmV2ZW50c10uc29ydCgoYSwgYikgPT4gYS5zdGFydC5nZXRUaW1lKCkgLSBiLnN0YXJ0LmdldFRpbWUoKSk7CiAgICAgIGNvbnN0IGdyb3VwcyA9IFtdOwogICAgICBzb3J0ZWRFdmVudHMuZm9yRWFjaChldmVudCA9PiB7CiAgICAgICAgLy8g5p+l5om+5Y+v5Lul5pS+572u55qE57uECiAgICAgICAgbGV0IHBsYWNlZCA9IGZhbHNlOwogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ3JvdXBzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBjb25zdCBncm91cCA9IGdyb3Vwc1tpXTsKICAgICAgICAgIGNvbnN0IGxhc3RFdmVudCA9IGdyb3VwW2dyb3VwLmxlbmd0aCAtIDFdOwoKICAgICAgICAgIC8vIOajgOafpeW9k+WJjeS6i+S7tuaYr+WQpuS4jue7hOS4reacgOWQjuS4gOS4quS6i+S7tuS4jemHjeWPoAogICAgICAgICAgaWYgKGxhc3RFdmVudCAmJiBldmVudC5zdGFydC5nZXRUaW1lKCkgPj0gbGFzdEV2ZW50LmVuZC5nZXRUaW1lKCkpIHsKICAgICAgICAgICAgZ3JvdXAucHVzaChldmVudCk7CiAgICAgICAgICAgIHBsYWNlZCA9IHRydWU7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8g5aaC5p6c5rKh5pyJ5om+5Yiw5ZCI6YCC55qE57uE77yM5Yib5bu65paw57uECiAgICAgICAgaWYgKCFwbGFjZWQpIHsKICAgICAgICAgIGdyb3Vwcy5wdXNoKFtldmVudF0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiBncm91cHMubGVuZ3RoID8gZ3JvdXBzIDogW1tdXTsKICAgIH07CgogICAgLy8g5Li6Iuafpeeci+abtOWkmiLlvLnnqpfliJvlu7rkuIDkuKrlk43lupTlvI/nmoTkuovku7bliJfooagKICAgIGNvbnN0IGFsbEV2ZW50c0ZvckRpYWxvZyA9IGNvbXB1dGVkKCgpID0+IHsKICAgICAgaWYgKCFhbGxFdmVudHNEaWFsb2cudmFsdWUuZGF0ZSkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgICByZXR1cm4gZXZlbnRzLnZhbHVlLmZpbHRlcihldmVudCA9PiBpc1NhbWVEYXkobmV3IERhdGUoZXZlbnQuc3RhcnQpLCBhbGxFdmVudHNEaWFsb2cudmFsdWUuZGF0ZSkpLnNvcnQoKGEsIGIpID0+IGEuc3RhcnQgLSBiLnN0YXJ0KTsKICAgIH0pOwoKICAgIC8vIOWKoOi9veeKtuaAgQogICAgY29uc3QgaXNMb2FkaW5nID0gcmVmKGZhbHNlKTsKCiAgICAvLyDorrDlvZXmnIDlkI7kuIDmrKHor7fmsYLnirbmgIEKICAgIGNvbnN0IGxhc3RSZXF1ZXN0VGltZSA9IHJlZigwKTsKICAgIGNvbnN0IHJldHJ5Q291bnQgPSByZWYoMCk7CiAgICBjb25zdCBtYXhSZXRyaWVzID0gMzsKCiAgICAvLyDmoLnmja7op4blm77nsbvlnovliqDovb3kuovku7bvvIzlop7lvLrniYjluKbplJnor6/lpITnkIblkozph43or5UKICAgIGNvbnN0IGxvYWRFdmVudHMgPSBhc3luYyAoKSA9PiB7CiAgICAgIGlmICghaXNDb21wb25lbnRNb3VudGVkLnZhbHVlKSByZXR1cm47CgogICAgICAvLyDpmLLmraLnn63ml7bpl7TlhoXlpJrmrKHosIPnlKgKICAgICAgY29uc3QgY3VycmVudFRpbWUgPSBEYXRlLm5vdygpOwogICAgICBpZiAoY3VycmVudFRpbWUgLSBsYXN0UmVxdWVzdFRpbWUudmFsdWUgPCAzMDApIHsKICAgICAgICBjb25zb2xlLmxvZygn6K+35rGC6aKR546H6L+H6auY77yM6Lez6L+H5q2k5qyh5Yqg6L29Jyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGxhc3RSZXF1ZXN0VGltZS52YWx1ZSA9IGN1cnJlbnRUaW1lOwogICAgICBpc0xvYWRpbmcudmFsdWUgPSB0cnVlOwogICAgICBjb25zb2xlLmxvZygn5q2j5Zyo5Yqg6L295pel56iL5pWw5o2uLi4uJyk7CiAgICAgIHRyeSB7CiAgICAgICAgaWYgKGNhbGVuZGFyVmlldy52YWx1ZSA9PT0gJ21vbnRoJykgewogICAgICAgICAgYXdhaXQgbG9hZE1vbnRobHlFdmVudHMoKTsKICAgICAgICB9IGVsc2UgaWYgKGNhbGVuZGFyVmlldy52YWx1ZSA9PT0gJ3dlZWsnKSB7CiAgICAgICAgICBhd2FpdCBsb2FkV2Vla2x5RXZlbnRzKCk7CiAgICAgICAgfSBlbHNlIGlmIChjYWxlbmRhclZpZXcudmFsdWUgPT09ICdkYXknKSB7CiAgICAgICAgICBhd2FpdCBsb2FkRGFpbHlFdmVudHMoKTsKICAgICAgICB9CiAgICAgICAgLy8g5oiQ5Yqf5ZCO6YeN572u6YeN6K+V6K6h5pWwCiAgICAgICAgcmV0cnlDb3VudC52YWx1ZSA9IDA7CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WKoOi9veaXpeeoi+Wksei0pTonLCBlcnIpOwoKICAgICAgICAvLyDlpoLmnpzlpLHotKXkuJTmsqHmnInotoXov4fmnIDlpKfph43or5XmrKHmlbDvvIzlsJ3or5Xph43or5UKICAgICAgICBpZiAocmV0cnlDb3VudC52YWx1ZSA8IG1heFJldHJpZXMpIHsKICAgICAgICAgIHJldHJ5Q291bnQudmFsdWUrKzsKICAgICAgICAgIGNvbnNvbGUubG9nKGDmraPlnKjph43or5XliqDovb3ml6XnqIsgKCR7cmV0cnlDb3VudC52YWx1ZX0vJHttYXhSZXRyaWVzfSkuLi5gKTsKICAgICAgICAgIC8vIOeojeW+ruW7tui/n+WQjumHjeivlQogICAgICAgICAgc2V0VGltZW91dChsb2FkRXZlbnRzLCA1MDApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+WKoOi9veaXpeeoi+Wksei0pe+8jOivt+WIt+aWsOmhtemdoumHjeivlScpOwogICAgICAgICAgcmV0cnlDb3VudC52YWx1ZSA9IDA7CiAgICAgICAgfQogICAgICB9IGZpbmFsbHkgewogICAgICAgIGlzTG9hZGluZy52YWx1ZSA9IGZhbHNlOwogICAgICB9CiAgICB9OwoKICAgIC8vIOWKoOi9veaciOinhuWbvuaVsOaNrgogICAgY29uc3QgbG9hZE1vbnRobHlFdmVudHMgPSBhc3luYyAoKSA9PiB7CiAgICAgIGNvbnN0IHllYXIgPSBjdXJyZW50RGF0ZS52YWx1ZS5nZXRGdWxsWWVhcigpOwogICAgICBjb25zdCBtb250aCA9IGN1cnJlbnREYXRlLnZhbHVlLmdldE1vbnRoKCkgKyAxOwogICAgICBjb25zb2xlLmxvZyhg5q2j5Zyo5Yqg6L29JHt5ZWFyfeW5tCR7bW9udGh95pyI55qE5pel56iL5pWw5o2uLi4uYCk7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZXRNb250aGx5RXZlbnRzKHllYXIsIG1vbnRoKTsKICAgICAgICBpZiAocmVzcG9uc2UgJiYgKHJlc3BvbnNlLnN1Y2Nlc3MgfHwgcmVzcG9uc2UuZGF0YSkpIHsKICAgICAgICAgIGNvbnN0IGV2ZW50RGF0YSA9IHJlc3BvbnNlLmRhdGEgfHwgW107CiAgICAgICAgICBldmVudHMudmFsdWUgPSBwYXJzZUV2ZW50c0RhdGEoZXZlbnREYXRhKTsKICAgICAgICAgIGNvbnNvbGUubG9nKGDmiJDlip/liqDovb0ke2V2ZW50cy52YWx1ZS5sZW5ndGh95Liq5pyI6KeG5Zu+5pel56iLYCk7CiAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcign6L+U5Zue5pWw5o2u5qC85byP5LiN5q2j56GuJyk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WKoOi9veaciOinhuWbvuaXpeeoi+Wksei0pTonLCBlcnJvcik7CiAgICAgICAgdGhyb3cgZXJyb3I7IC8vIOe7p+e7reaKm+WHuumUmeivr+S7peS+v+WklumDqOaNleiOtwogICAgICB9CiAgICB9OwoKICAgIC8vIOWKoOi9veWRqOinhuWbvuaVsOaNrgogICAgY29uc3QgbG9hZFdlZWtseUV2ZW50cyA9IGFzeW5jICgpID0+IHsKICAgICAgY29uc3QgZGF0ZSA9IGZvcm1hdERhdGVTdHJpbmcoY3VycmVudERhdGUudmFsdWUpOwogICAgICBjb25zb2xlLmxvZyhg5q2j5Zyo5Yqg6L29JHtkYXRlfeaJgOWcqOWRqOeahOaXpeeoi+aVsOaNri4uLmApOwogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ2V0V2Vla2x5RXZlbnRzKGRhdGUpOwogICAgICAgIGlmIChyZXNwb25zZSAmJiAocmVzcG9uc2Uuc3VjY2VzcyB8fCByZXNwb25zZS5kYXRhKSkgewogICAgICAgICAgY29uc3QgZXZlbnREYXRhID0gcmVzcG9uc2UuZGF0YSB8fCBbXTsKICAgICAgICAgIGV2ZW50cy52YWx1ZSA9IHBhcnNlRXZlbnRzRGF0YShldmVudERhdGEpOwogICAgICAgICAgY29uc29sZS5sb2coYOaIkOWKn+WKoOi9vSR7ZXZlbnRzLnZhbHVlLmxlbmd0aH3kuKrlkajop4blm77ml6XnqItgKTsKICAgICAgICAgIHJldHVybiByZXNwb25zZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfov5Tlm57mlbDmja7moLzlvI/kuI3mraPnoa4nKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign5Yqg6L295ZGo6KeG5Zu+5pel56iL5aSx6LSlOicsIGVycm9yKTsKICAgICAgICB0aHJvdyBlcnJvcjsgLy8g57un57ut5oqb5Ye66ZSZ6K+v5Lul5L6/5aSW6YOo5o2V6I63CiAgICAgIH0KICAgIH07CgogICAgLy8g5Yqg6L295pel6KeG5Zu+5pWw5o2uCiAgICBjb25zdCBsb2FkRGFpbHlFdmVudHMgPSBhc3luYyAoKSA9PiB7CiAgICAgIGNvbnN0IGRhdGUgPSBmb3JtYXREYXRlU3RyaW5nKGN1cnJlbnREYXRlLnZhbHVlKTsKICAgICAgY29uc29sZS5sb2coYOato+WcqOWKoOi9vSR7ZGF0ZX3nmoTml6XnqIvmlbDmja4uLi5gKTsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldERhaWx5RXZlbnRzKGRhdGUpOwogICAgICAgIGlmIChyZXNwb25zZSAmJiAocmVzcG9uc2Uuc3VjY2VzcyB8fCByZXNwb25zZS5kYXRhKSkgewogICAgICAgICAgY29uc3QgZXZlbnREYXRhID0gcmVzcG9uc2UuZGF0YSB8fCBbXTsKICAgICAgICAgIGV2ZW50cy52YWx1ZSA9IHBhcnNlRXZlbnRzRGF0YShldmVudERhdGEpOwogICAgICAgICAgY29uc29sZS5sb2coYOaIkOWKn+WKoOi9vSR7ZXZlbnRzLnZhbHVlLmxlbmd0aH3kuKrml6Xop4blm77ml6XnqItgKTsKICAgICAgICAgIHJldHVybiByZXNwb25zZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfov5Tlm57mlbDmja7moLzlvI/kuI3mraPnoa4nKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign5Yqg6L295pel6KeG5Zu+5pel56iL5aSx6LSlOicsIGVycm9yKTsKICAgICAgICB0aHJvdyBlcnJvcjsgLy8g57un57ut5oqb5Ye66ZSZ6K+v5Lul5L6/5aSW6YOo5o2V6I63CiAgICAgIH0KICAgIH07CgogICAgLy8g6Kej5p6Q5LqL5Lu25pWw5o2uCiAgICBjb25zdCBwYXJzZUV2ZW50c0RhdGEgPSBkYXRhID0+IHsKICAgICAgcmV0dXJuIGRhdGEubWFwKGl0ZW0gPT4gewogICAgICAgIC8vIOebtOaOpeS9v+eUqOWOn+Wni+aXtumXtOWtl+espuS4su+8jOmBv+WFjeaXtuWMuui9rOaNogogICAgICAgIHJldHVybiB7CiAgICAgICAgICBpZDogaXRlbS5pZCwKICAgICAgICAgIHRpdGxlOiBpdGVtLnRpdGxlLAogICAgICAgICAgc3RhcnQ6IG5ldyBEYXRlKGl0ZW0uc3RhcnQpLAogICAgICAgICAgZW5kOiBuZXcgRGF0ZShpdGVtLmVuZCksCiAgICAgICAgICBsb2NhdGlvbjogaXRlbS5sb2NhdGlvbiwKICAgICAgICAgIHR5cGU6IGl0ZW0udHlwZSwKICAgICAgICAgIHJlbWluZGVyOiBpdGVtLnJlbWluZGVyLAogICAgICAgICAgZGVzY3JpcHRpb246IGl0ZW0uZGVzY3JpcHRpb24sCiAgICAgICAgICBjcmVhdG9yOiBpdGVtLmNyZWF0b3IsCiAgICAgICAgICBjcmVhdG9yX25hbWU6IGl0ZW0uY3JlYXRvcl9uYW1lLAogICAgICAgICAgcGFydGljaXBhbnRzOiBpdGVtLnBhcnRpY2lwYW50cywKICAgICAgICAgIHBhcnRpY2lwYW50c19pbmZvOiBpdGVtLnBhcnRpY2lwYW50c19pbmZvCiAgICAgICAgfTsKICAgICAgfSk7CiAgICB9OwoKICAgIC8vIOagvOW8j+WMluaXpeacn+S4uuWtl+espuS4sgogICAgY29uc3QgZm9ybWF0RGF0ZVN0cmluZyA9IGRhdGUgPT4gewogICAgICBjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpOwogICAgICBjb25zdCBtb250aCA9IChkYXRlLmdldE1vbnRoKCkgKyAxKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7CiAgICAgIGNvbnN0IGRheSA9IGRhdGUuZ2V0RGF0ZSgpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKTsKICAgICAgcmV0dXJuIGAke3llYXJ9LSR7bW9udGh9LSR7ZGF5fWA7CiAgICB9OwoKICAgIC8vIOaXpeacn+mAieaLqQogICAgY29uc3Qgc2VsZWN0RGF5ID0gZGF5ID0+IHsKICAgICAgaWYgKCFkYXkuaXNDdXJyZW50TW9udGgpIHsKICAgICAgICBpZiAoZGF5LmRhdGUgPiAxNSkgewogICAgICAgICAgLy8g5YmN5LiA5Liq5pyICiAgICAgICAgICBwcmV2KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIOWQjuS4gOS4quaciAogICAgICAgICAgbmV4dCgpOwogICAgICAgIH0KICAgICAgfQogICAgfTsKCiAgICAvLyDov5Tlm57ku4rlpKkKICAgIGNvbnN0IHRvZGF5ID0gKCkgPT4gewogICAgICBjdXJyZW50RGF0ZS52YWx1ZSA9IG5ldyBEYXRlKCk7CiAgICB9OwoKICAgIC8vIOS4iuS4gOS4quaXtumXtOWNleS9jQogICAgY29uc3QgcHJldiA9ICgpID0+IHsKICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGN1cnJlbnREYXRlLnZhbHVlKTsKICAgICAgaWYgKGNhbGVuZGFyVmlldy52YWx1ZSA9PT0gJ21vbnRoJykgewogICAgICAgIGRhdGUuc2V0TW9udGgoZGF0ZS5nZXRNb250aCgpIC0gMSk7CiAgICAgIH0gZWxzZSBpZiAoY2FsZW5kYXJWaWV3LnZhbHVlID09PSAnd2VlaycpIHsKICAgICAgICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgLSA3KTsKICAgICAgfSBlbHNlIGlmIChjYWxlbmRhclZpZXcudmFsdWUgPT09ICdkYXknKSB7CiAgICAgICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpIC0gMSk7CiAgICAgIH0KICAgICAgY3VycmVudERhdGUudmFsdWUgPSBkYXRlOwogICAgfTsKCiAgICAvLyDkuIvkuIDkuKrml7bpl7TljZXkvY0KICAgIGNvbnN0IG5leHQgPSAoKSA9PiB7CiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShjdXJyZW50RGF0ZS52YWx1ZSk7CiAgICAgIGlmIChjYWxlbmRhclZpZXcudmFsdWUgPT09ICdtb250aCcpIHsKICAgICAgICBkYXRlLnNldE1vbnRoKGRhdGUuZ2V0TW9udGgoKSArIDEpOwogICAgICB9IGVsc2UgaWYgKGNhbGVuZGFyVmlldy52YWx1ZSA9PT0gJ3dlZWsnKSB7CiAgICAgICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpICsgNyk7CiAgICAgIH0gZWxzZSBpZiAoY2FsZW5kYXJWaWV3LnZhbHVlID09PSAnZGF5JykgewogICAgICAgIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSArIDEpOwogICAgICB9CiAgICAgIGN1cnJlbnREYXRlLnZhbHVlID0gZGF0ZTsKICAgIH07CgogICAgLy8g5pi+56S65re75Yqg5pel56iL5a+56K+d5qGGCiAgICBjb25zdCBzaG93QWRkRXZlbnREaWFsb2cgPSBldmVudCA9PiB7CiAgICAgIC8vIOmYu+atouS6i+S7tuWGkuazoQogICAgICBpZiAoZXZlbnQpIHsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICB9CiAgICAgIGNvbnNvbGUubG9nKCfmiZPlvIDmlrDlu7rml6XnqIvlr7nor53moYYnLCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkpOwogICAgICB0cnkgewogICAgICAgIC8vIOebtOaOpemHjee9ruihqOWNleaVsOaNru+8jOaXoOmcgOetieW+hW5leHRUaWNrCiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsKICAgICAgICBjb25zdCBvbmVIb3VyTGF0ZXIgPSBuZXcgRGF0ZShub3cuZ2V0VGltZSgpICsgNjAgKiA2MCAqIDEwMDApOwoKICAgICAgICAvLyDlhYjorr7nva7lr7nor53moYbkuLp0cnVlCiAgICAgICAgYWRkRXZlbnREaWFsb2dWaXNpYmxlLnZhbHVlID0gdHJ1ZTsKCiAgICAgICAgLy8g5Yib5bu65paw55qE5LqL5Lu25a+56LGhCiAgICAgICAgbmV3RXZlbnQudmFsdWUgPSB7CiAgICAgICAgICB0aXRsZTogJycsCiAgICAgICAgICBzdGFydDogZm9ybWF0RGF0ZUZvclBpY2tlcihub3cpLAogICAgICAgICAgZW5kOiBmb3JtYXREYXRlRm9yUGlja2VyKG9uZUhvdXJMYXRlciksCiAgICAgICAgICBsb2NhdGlvbjogJycsCiAgICAgICAgICB0eXBlOiAnYmx1ZScsCiAgICAgICAgICByZW1pbmRlcjogJzMwbWluJywKICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJwogICAgICAgIH07CiAgICAgICAgY29uc29sZS5sb2coJ+W3suaJk+W8gOWvueivneahhicsIGFkZEV2ZW50RGlhbG9nVmlzaWJsZS52YWx1ZSk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign5omT5byA5paw5bu65pel56iL5a+56K+d5qGG5aSx6LSlOicsIGVycm9yKTsKCiAgICAgICAgLy8g5b2T5Ye6546w6ZSZ6K+v5pe277yM5by65Yi25YWz6Zet5YaN5omT5byA5a+56K+d5qGGCiAgICAgICAgYWRkRXZlbnREaWFsb2dWaXNpYmxlLnZhbHVlID0gZmFsc2U7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICBhZGRFdmVudERpYWxvZ1Zpc2libGUudmFsdWUgPSB0cnVlOwogICAgICAgICAgY29uc29sZS5sb2coJ+WvueivneahhumHjeivleaJk+W8gCcpOwogICAgICAgIH0sIDEwMCk7CiAgICAgIH0KICAgIH07CgogICAgLy8g5re75Yqg5pel56iLCiAgICBjb25zdCBhZGRFdmVudCA9IGFzeW5jICgpID0+IHsKICAgICAgY29uc29sZS5sb2coJ+aPkOS6pOaXpeeoi+ihqOWNleaVsOaNrjonLCBuZXdFdmVudC52YWx1ZSk7CgogICAgICAvLyDkvb/nlKjooajljZXpqozor4EKICAgICAgaWYgKCFhZGRFdmVudEZvcm1SZWYudmFsdWUpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfooajljZXlvJXnlKjkuI3lrZjlnKgnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgYWRkRXZlbnRGb3JtUmVmLnZhbHVlLnZhbGlkYXRlKGFzeW5jIHZhbGlkID0+IHsKICAgICAgICBpZiAoIXZhbGlkKSB7CiAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+ivt+Whq+WGmeaJgOacieW/heWhq+mhuScpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgLy8g6aqM6K+B5byA5aeL5pe26Ze05LiN5pma5LqO57uT5p2f5pe26Ze0CiAgICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBuZXcgRGF0ZShuZXdFdmVudC52YWx1ZS5zdGFydCkuZ2V0VGltZSgpOwogICAgICAgICAgY29uc3QgZW5kVGltZSA9IG5ldyBEYXRlKG5ld0V2ZW50LnZhbHVlLmVuZCkuZ2V0VGltZSgpOwogICAgICAgICAgaWYgKGlzTmFOKHN0YXJ0VGltZSkgfHwgaXNOYU4oZW5kVGltZSkpIHsKICAgICAgICAgICAgLy8g5aaC5p6c5pel5pyf6L2s5o2i5aSx6LSl77yM5bCd6K+V5L+u5aSNCiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+aXpeacn+i9rOaNouWksei0pe+8jOWwneivleS/ruWkjScsIHsKICAgICAgICAgICAgICBzdGFydDogbmV3RXZlbnQudmFsdWUuc3RhcnQsCiAgICAgICAgICAgICAgZW5kOiBuZXdFdmVudC52YWx1ZS5lbmQKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyDkvb/nlKjlvZPliY3ml7bpl7TlkozkuIDlsI/ml7blkI7kvZzkuLrpu5jorqTlgLwKICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgY29uc3Qgb25lSG91ckxhdGVyID0gbmV3IERhdGUobm93LmdldFRpbWUoKSArIDYwICogNjAgKiAxMDAwKTsKICAgICAgICAgICAgbmV3RXZlbnQudmFsdWUuc3RhcnQgPSBmb3JtYXREYXRlRm9yUGlja2VyKG5vdyk7CiAgICAgICAgICAgIG5ld0V2ZW50LnZhbHVlLmVuZCA9IGZvcm1hdERhdGVGb3JQaWNrZXIob25lSG91ckxhdGVyKTsKICAgICAgICAgICAgRWxNZXNzYWdlLndhcm5pbmcoJ+aXpeacn+agvOW8j+acieivr++8jOW3sumHjee9ruS4uuW9k+WJjeaXtumXtCcpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoc3RhcnRUaW1lID4gZW5kVGltZSkgewogICAgICAgICAgICBFbE1lc3NhZ2Uud2FybmluZygn57uT5p2f5pe26Ze05LiN6IO95pep5LqO5byA5aeL5pe26Ze0Jyk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyDpqozor4HlvIDlp4vlkoznu5PmnZ/ml6XmnJ/mmK/lkIzkuIDlpKkKICAgICAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKG5ld0V2ZW50LnZhbHVlLnN0YXJ0KS50b0RhdGVTdHJpbmcoKTsKICAgICAgICAgIGNvbnN0IGVuZERhdGUgPSBuZXcgRGF0ZShuZXdFdmVudC52YWx1ZS5lbmQpLnRvRGF0ZVN0cmluZygpOwogICAgICAgICAgaWYgKHN0YXJ0RGF0ZSAhPT0gZW5kRGF0ZSkgewogICAgICAgICAgICBFbE1lc3NhZ2Uud2FybmluZygn5byA5aeL5ZKM57uT5p2f5pe26Ze05b+F6aG75Zyo5ZCM5LiA5aSpJyk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyDojrflj5blvZPliY3nlKjmiLdJRAogICAgICAgICAgY29uc3QgdXNlcklkID0gTnVtYmVyKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyX2lkJykgfHwgMCk7CiAgICAgICAgICBjb25zb2xlLmxvZygn5b2T5YmN55So5oi3SUQ6JywgdXNlcklkKTsKCiAgICAgICAgICAvLyDliJvlu7ropoHmj5DkuqTnmoTml6XnqIvmlbDmja4KICAgICAgICAgIGNvbnN0IGV2ZW50RGF0YSA9IHsKICAgICAgICAgICAgdGl0bGU6IG5ld0V2ZW50LnZhbHVlLnRpdGxlLnRyaW0oKSwKICAgICAgICAgICAgc3RhcnQ6IG5ld0V2ZW50LnZhbHVlLnN0YXJ0LAogICAgICAgICAgICBlbmQ6IG5ld0V2ZW50LnZhbHVlLmVuZCwKICAgICAgICAgICAgbG9jYXRpb246IChuZXdFdmVudC52YWx1ZS5sb2NhdGlvbiB8fCAnJykudHJpbSgpLAogICAgICAgICAgICB0eXBlOiBuZXdFdmVudC52YWx1ZS50eXBlIHx8ICdibHVlJywKICAgICAgICAgICAgcmVtaW5kZXI6IG5ld0V2ZW50LnZhbHVlLnJlbWluZGVyIHx8ICczMG1pbicsCiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAobmV3RXZlbnQudmFsdWUuZGVzY3JpcHRpb24gfHwgJycpLnRyaW0oKSwKICAgICAgICAgICAgcGFydGljaXBhbnRzOiB1c2VySWQgPyBbdXNlcklkXSA6IFtdIC8vIOehruS/neaKiuW9k+WJjeeUqOaIt+WKoOWFpeWPguS4juiAhQogICAgICAgICAgfTsKICAgICAgICAgIGNvbnNvbGUubG9nKCfmraPlnKjmj5DkuqTml6XnqIvmlbDmja46JywgZXZlbnREYXRhKTsKCiAgICAgICAgICAvLyDlhYjlhbPpl63lr7nor53moYbvvIzpgb/lhY3nlKjmiLfph43lpI3mj5DkuqQKICAgICAgICAgIGFkZEV2ZW50RGlhbG9nVmlzaWJsZS52YWx1ZSA9IGZhbHNlOwogICAgICAgICAgRWxNZXNzYWdlLmluZm8oJ+ato+WcqOWIm+W7uuaXpeeoiy4uLicpOwogICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjcmVhdGVFdmVudChldmVudERhdGEpOwogICAgICAgICAgY29uc29sZS5sb2coJ+acjeWKoeWZqOWTjeW6lDonLCByZXNwb25zZSk7CiAgICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyB8fCByZXNwb25zZS5kYXRhICYmICFyZXNwb25zZS5tZXNzYWdlKSB7CiAgICAgICAgICAgIEVsTWVzc2FnZS5zdWNjZXNzKCfml6XnqIvmt7vliqDmiJDlip8nKTsKICAgICAgICAgICAgYXdhaXQgbG9hZEV2ZW50cygpOyAvLyDph43mlrDliqDovb3kuovku7YKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcihyZXNwb25zZS5tZXNzYWdlIHx8ICfml6XnqIvmt7vliqDlpLHotKUnKTsKICAgICAgICAgICAgY29uc29sZS5lcnJvcign5re75Yqg5aSx6LSl6K+m5oOFOicsIHJlc3BvbnNlKTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgY29uc29sZS5lcnJvcign5re75Yqg5pel56iL5aSx6LSlOicsIGVycm9yKTsKICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcign5pel56iL5re75Yqg5aSx6LSl77yaJyArIChlcnJvci5tZXNzYWdlIHx8ICfmnKrnn6XplJnor68nKSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH07CgogICAgLy8g5pi+56S65pel56iL6K+m5oOFCiAgICBjb25zdCBzaG93RXZlbnREZXRhaWxzID0gZXZlbnQgPT4gewogICAgICBzZWxlY3RlZEV2ZW50LnZhbHVlID0gZXZlbnQ7CiAgICAgIGV2ZW50RGV0YWlsc0RpYWxvZ1Zpc2libGUudmFsdWUgPSB0cnVlOwogICAgfTsKCiAgICAvLyDmmL7npLrnvJbovpHml6XnqIvlr7nor53moYYKICAgIGNvbnN0IHNob3dFZGl0RXZlbnREaWFsb2cgPSAoKSA9PiB7CiAgICAgIGVkaXRpbmdFdmVudC52YWx1ZSA9IHsKICAgICAgICBpZDogc2VsZWN0ZWRFdmVudC52YWx1ZS5pZCwKICAgICAgICB0aXRsZTogc2VsZWN0ZWRFdmVudC52YWx1ZS50aXRsZSwKICAgICAgICBzdGFydDogZm9ybWF0RGF0ZUZvclBpY2tlcihzZWxlY3RlZEV2ZW50LnZhbHVlLnN0YXJ0KSwKICAgICAgICBlbmQ6IGZvcm1hdERhdGVGb3JQaWNrZXIoc2VsZWN0ZWRFdmVudC52YWx1ZS5lbmQpLAogICAgICAgIGxvY2F0aW9uOiBzZWxlY3RlZEV2ZW50LnZhbHVlLmxvY2F0aW9uIHx8ICcnLAogICAgICAgIHR5cGU6IHNlbGVjdGVkRXZlbnQudmFsdWUudHlwZSwKICAgICAgICByZW1pbmRlcjogc2VsZWN0ZWRFdmVudC52YWx1ZS5yZW1pbmRlciwKICAgICAgICBkZXNjcmlwdGlvbjogc2VsZWN0ZWRFdmVudC52YWx1ZS5kZXNjcmlwdGlvbiB8fCAnJwogICAgICB9OwogICAgICBldmVudERldGFpbHNEaWFsb2dWaXNpYmxlLnZhbHVlID0gZmFsc2U7CiAgICAgIGVkaXRFdmVudERpYWxvZ1Zpc2libGUudmFsdWUgPSB0cnVlOwogICAgfTsKCiAgICAvLyDkv53lrZjnvJbovpHnmoTml6XnqIsKICAgIGNvbnN0IHNhdmVFZGl0RXZlbnQgPSBhc3luYyAoKSA9PiB7CiAgICAgIC8vIOS9v+eUqOihqOWNlemqjOivgQogICAgICBpZiAoIWVkaXRFdmVudEZvcm1SZWYudmFsdWUpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfooajljZXlvJXnlKjkuI3lrZjlnKgnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgZWRpdEV2ZW50Rm9ybVJlZi52YWx1ZS52YWxpZGF0ZShhc3luYyB2YWxpZCA9PiB7CiAgICAgICAgaWYgKCF2YWxpZCkgewogICAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfor7floavlhpnmiYDmnInlv4XloavpobknKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIC8vIOmqjOivgeW8gOWni+aXtumXtOS4jeaZmuS6jue7k+adn+aXtumXtAogICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IG5ldyBEYXRlKGVkaXRpbmdFdmVudC52YWx1ZS5zdGFydCkuZ2V0VGltZSgpOwogICAgICAgIGNvbnN0IGVuZFRpbWUgPSBuZXcgRGF0ZShlZGl0aW5nRXZlbnQudmFsdWUuZW5kKS5nZXRUaW1lKCk7CiAgICAgICAgaWYgKHN0YXJ0VGltZSA+IGVuZFRpbWUpIHsKICAgICAgICAgIEVsTWVzc2FnZS53YXJuaW5nKCfnu5PmnZ/ml7bpl7TkuI3og73ml6nkuo7lvIDlp4vml7bpl7QnKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIC8vIOmqjOivgeW8gOWni+WSjOe7k+adn+aXpeacn+aYr+WQjOS4gOWkqQogICAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKGVkaXRpbmdFdmVudC52YWx1ZS5zdGFydCkudG9EYXRlU3RyaW5nKCk7CiAgICAgICAgY29uc3QgZW5kRGF0ZSA9IG5ldyBEYXRlKGVkaXRpbmdFdmVudC52YWx1ZS5lbmQpLnRvRGF0ZVN0cmluZygpOwogICAgICAgIGlmIChzdGFydERhdGUgIT09IGVuZERhdGUpIHsKICAgICAgICAgIEVsTWVzc2FnZS53YXJuaW5nKCflvIDlp4vlkoznu5PmnZ/ml7bpl7Tlv4XpobvlnKjlkIzkuIDlpKknKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgIC8vIOiOt+WPluW9k+WJjeeUqOaIt0lECiAgICAgICAgICBjb25zdCB1c2VySWQgPSBOdW1iZXIobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJfaWQnKSB8fCAwKTsKCiAgICAgICAgICAvLyDnm7TmjqXkvb/nlKjooajljZXloavlhpnnmoTml7bpl7TvvIzkuI3ov5vooYzml7bljLrovazmjaIKICAgICAgICAgIGNvbnN0IGV2ZW50RGF0YSA9IHsKICAgICAgICAgICAgdGl0bGU6IGVkaXRpbmdFdmVudC52YWx1ZS50aXRsZSwKICAgICAgICAgICAgc3RhcnQ6IGVkaXRpbmdFdmVudC52YWx1ZS5zdGFydCwKICAgICAgICAgICAgZW5kOiBlZGl0aW5nRXZlbnQudmFsdWUuZW5kLAogICAgICAgICAgICBsb2NhdGlvbjogZWRpdGluZ0V2ZW50LnZhbHVlLmxvY2F0aW9uLAogICAgICAgICAgICB0eXBlOiBlZGl0aW5nRXZlbnQudmFsdWUudHlwZSwKICAgICAgICAgICAgcmVtaW5kZXI6IGVkaXRpbmdFdmVudC52YWx1ZS5yZW1pbmRlciwKICAgICAgICAgICAgZGVzY3JpcHRpb246IGVkaXRpbmdFdmVudC52YWx1ZS5kZXNjcmlwdGlvbiwKICAgICAgICAgICAgcGFydGljaXBhbnRzOiB1c2VySWQgPyBbdXNlcklkXSA6IFtdIC8vIOehruS/neaKiuW9k+WJjeeUqOaIt+WKoOWFpeWPguS4juiAhQogICAgICAgICAgfTsKICAgICAgICAgIGNvbnNvbGUubG9nKCfmm7TmlrDml6XnqIvmlbDmja46JywgZXZlbnREYXRhKTsKICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdXBkYXRlRXZlbnQoZWRpdGluZ0V2ZW50LnZhbHVlLmlkLCBldmVudERhdGEpOwogICAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgRWxNZXNzYWdlLnN1Y2Nlc3MoJ+aXpeeoi+abtOaWsOaIkOWKnycpOwogICAgICAgICAgICBlZGl0RXZlbnREaWFsb2dWaXNpYmxlLnZhbHVlID0gZmFsc2U7CiAgICAgICAgICAgIGxvYWRFdmVudHMoKTsgLy8g6YeN5paw5Yqg6L295LqL5Lu2CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IocmVzcG9uc2UubWVzc2FnZSB8fCAn5pel56iL5pu05paw5aSx6LSlJyk7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+abtOaWsOaXpeeoi+Wksei0pTonLCBlcnJvcik7CiAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+aXpeeoi+abtOaWsOWksei0pScpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9OwoKICAgIC8vIOWIoOmZpOaXpeeoiwogICAgY29uc3QgZGVsZXRlRXZlbnQgPSBhc3luYyAoKSA9PiB7CiAgICAgIGlmICghc2VsZWN0ZWRFdmVudC52YWx1ZS5pZCB8fCBpc05hTihzZWxlY3RlZEV2ZW50LnZhbHVlLmlkKSkgewogICAgICAgIEVsTWVzc2FnZS5lcnJvcign5pel56iLSUTml6DmlYjvvIzml6Dms5XliKDpmaQnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY29uc29sZS5sb2coJ+WwneivleWIoOmZpOaXpeeoi++8jGlkPScsIHNlbGVjdGVkRXZlbnQudmFsdWUuaWQpOwogICAgICB0cnkgewogICAgICAgIHZhciBfcmVzcG9uc2UkZGF0YTsKICAgICAgICBhd2FpdCBFbE1lc3NhZ2VCb3guY29uZmlybSgn56Gu5a6a6KaB5Yig6Zmk6K+l5pel56iL5ZCX77yfJywgJ+aPkOekuicsIHsKICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgfSk7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBkZWxldGVDYWxlbmRhckV2ZW50QXBpKHNlbGVjdGVkRXZlbnQudmFsdWUuaWQpOwoKICAgICAgICAvLyDmo4Dmn6VIVFRQ54q25oCB56CB5piv5ZCm5Li6MjA077yM5oiW6ICF5ZON5bqU5pWw5o2u5piv5ZCm6KGo56S65oiQ5YqfCiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjA0IHx8IChfcmVzcG9uc2UkZGF0YSA9IHJlc3BvbnNlLmRhdGEpICE9PSBudWxsICYmIF9yZXNwb25zZSRkYXRhICE9PSB2b2lkIDAgJiYgX3Jlc3BvbnNlJGRhdGEuc3VjY2VzcykgewogICAgICAgICAgRWxNZXNzYWdlLnN1Y2Nlc3MoJ+aXpeeoi+WIoOmZpOaIkOWKnycpOwogICAgICAgICAgZXZlbnREZXRhaWxzRGlhbG9nVmlzaWJsZS52YWx1ZSA9IGZhbHNlOwogICAgICAgICAgbG9hZEV2ZW50cygpOyAvLyDph43mlrDliqDovb3kuovku7YKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIF9yZXNwb25zZSRkYXRhMjsKICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcigoKF9yZXNwb25zZSRkYXRhMiA9IHJlc3BvbnNlLmRhdGEpID09PSBudWxsIHx8IF9yZXNwb25zZSRkYXRhMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Jlc3BvbnNlJGRhdGEyLm1lc3NhZ2UpIHx8ICfml6XnqIvliKDpmaTlpLHotKUnKTsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WIoOmZpOWksei0peivpue7huS/oeaBrzonLCByZXNwb25zZS5kYXRhKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgaWYgKGVycm9yICE9PSAnY2FuY2VsJykgewogICAgICAgICAgdmFyIF9lcnJvciRyZXNwb25zZSwgX2Vycm9yJHJlc3BvbnNlJGRhdGE7CiAgICAgICAgICAvLyBBeGlvc+mUmeivr+WvueixoemAmuW4uOWcqGVycm9yLnJlc3BvbnNl5Lit5YyF5ZCr5ZON5bqU5L+h5oGvCiAgICAgICAgICBjb25zdCBlcnJvck1zZyA9ICgoX2Vycm9yJHJlc3BvbnNlID0gZXJyb3IucmVzcG9uc2UpID09PSBudWxsIHx8IF9lcnJvciRyZXNwb25zZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9lcnJvciRyZXNwb25zZSRkYXRhID0gX2Vycm9yJHJlc3BvbnNlLmRhdGEpID09PSBudWxsIHx8IF9lcnJvciRyZXNwb25zZSRkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZXJyb3IkcmVzcG9uc2UkZGF0YS5tZXNzYWdlKSB8fCBlcnJvci5tZXNzYWdlIHx8ICfmnKrnn6XplJnor68nOwogICAgICAgICAgY29uc29sZS5lcnJvcign5Yig6Zmk5pel56iL5aSx6LSlOicsIGVycm9yLnJlc3BvbnNlIHx8IGVycm9yKTsKICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcign5pel56iL5Yig6Zmk5aSx6LSlOiAnICsgZXJyb3JNc2cpOwogICAgICAgIH0KICAgICAgfQogICAgfTsKCiAgICAvLyDojrflj5bmjIflrprml6XmnJ/nmoTkuovku7YKICAgIGNvbnN0IGdldERheUV2ZW50cyA9IGRhdGUgPT4gewogICAgICByZXR1cm4gZXZlbnRzLnZhbHVlLmZpbHRlcihldmVudCA9PiBpc1NhbWVEYXkobmV3IERhdGUoZXZlbnQuc3RhcnQpLCBkYXRlKSk7CiAgICB9OwoKICAgIC8vIOWIpOaWreS4pOS4quaXpeacn+aYr+WQpuaYr+WQjOS4gOWkqQogICAgY29uc3QgaXNTYW1lRGF5ID0gKGRhdGUxLCBkYXRlMikgPT4gewogICAgICByZXR1cm4gZGF0ZTEuZ2V0RnVsbFllYXIoKSA9PT0gZGF0ZTIuZ2V0RnVsbFllYXIoKSAmJiBkYXRlMS5nZXRNb250aCgpID09PSBkYXRlMi5nZXRNb250aCgpICYmIGRhdGUxLmdldERhdGUoKSA9PT0gZGF0ZTIuZ2V0RGF0ZSgpOwogICAgfTsKCiAgICAvLyDojrflj5bmnIjku73nmoTnrKzkuIDlpKkKICAgIGNvbnN0IGdldEZpcnN0RGF5T2ZNb250aCA9IGRhdGUgPT4gewogICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLCBkYXRlLmdldE1vbnRoKCksIDEpOwogICAgfTsKCiAgICAvLyDojrflj5bmnIjku73nmoTlpKnmlbAKICAgIGNvbnN0IGdldERheXNJbk1vbnRoID0gZGF0ZSA9PiB7CiAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIGRhdGUuZ2V0TW9udGgoKSArIDEsIDApLmdldERhdGUoKTsKICAgIH07CgogICAgLy8g6K6h566X5LqL5Lu25Zyo5pe26Ze06L205LiK55qE5L2N572uCiAgICBjb25zdCBjYWxjRXZlbnRUb3AgPSBldmVudCA9PiB7CiAgICAgIGlmICghZXZlbnQgfHwgIWV2ZW50LnN0YXJ0KSByZXR1cm4gMDsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBob3VycyA9IGV2ZW50LnN0YXJ0LmdldEhvdXJzKCk7CiAgICAgICAgY29uc3QgbWludXRlcyA9IGV2ZW50LnN0YXJ0LmdldE1pbnV0ZXMoKTsKICAgICAgICAvLyDmr4/lsI/ml7Y2MHB46auY5bqm77yM5q+PMTXliIbpkp8xNXB4CiAgICAgICAgcmV0dXJuIChob3VycyAqIDYwICsgbWludXRlcykgLyAxNSAqIDE1OwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+iuoeeul+S6i+S7tuS9jee9rumUmeivrzonLCBlcnJvcik7CiAgICAgICAgcmV0dXJuIDA7CiAgICAgIH0KICAgIH07CgogICAgLy8g6K6h566X5LqL5Lu255qE6auY5bqmCiAgICBjb25zdCBjYWxjRXZlbnRIZWlnaHQgPSBldmVudCA9PiB7CiAgICAgIGlmICghZXZlbnQgfHwgIWV2ZW50LnN0YXJ0IHx8ICFldmVudC5lbmQpIHJldHVybiA2MDsgLy8g6buY6K6k6auY5bqmMeWwj+aXtgogICAgICB0cnkgewogICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IGV2ZW50LnN0YXJ0LmdldFRpbWUoKTsKICAgICAgICBjb25zdCBlbmRUaW1lID0gZXZlbnQuZW5kLmdldFRpbWUoKTsKICAgICAgICBjb25zdCBkdXJhdGlvbiA9IChlbmRUaW1lIC0gc3RhcnRUaW1lKSAvICgxMDAwICogNjApOyAvLyDliIbpkp/mlbAKCiAgICAgICAgLy8g5pyA5bCP6auY5bqmMzBweCAoMzDliIbpkp8pCiAgICAgICAgcmV0dXJuIE1hdGgubWF4KGR1cmF0aW9uIC8gMTUgKiAxNSwgMzApOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+iuoeeul+S6i+S7tumrmOW6pumUmeivrzonLCBlcnJvcik7CiAgICAgICAgcmV0dXJuIDYwOwogICAgICB9CiAgICB9OwoKICAgIC8vIOagvOW8j+WMluS6i+S7tuaXtumXtAogICAgY29uc3QgZm9ybWF0RXZlbnRUaW1lID0gZXZlbnQgPT4gewogICAgICBjb25zdCBzdGFydCA9IGV2ZW50LnN0YXJ0OwogICAgICBjb25zdCBlbmQgPSBldmVudC5lbmQ7CiAgICAgIHJldHVybiBgJHtzdGFydC5nZXRIb3VycygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX06JHtzdGFydC5nZXRNaW51dGVzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfSAtICR7ZW5kLmdldEhvdXJzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfToke2VuZC5nZXRNaW51dGVzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfWA7CiAgICB9OwoKICAgIC8vIOagvOW8j+WMluS6i+S7tuaXpeacn+aXtumXtAogICAgY29uc3QgZm9ybWF0RXZlbnREYXRlVGltZSA9IGV2ZW50ID0+IHsKICAgICAgaWYgKCFldmVudC5zdGFydCB8fCAhZXZlbnQuZW5kKSByZXR1cm4gJyc7CiAgICAgIGNvbnN0IG9wdGlvbnMgPSB7CiAgICAgICAgeWVhcjogJ251bWVyaWMnLAogICAgICAgIG1vbnRoOiAnbG9uZycsCiAgICAgICAgZGF5OiAnbnVtZXJpYycsCiAgICAgICAgaG91cjogJzItZGlnaXQnLAogICAgICAgIG1pbnV0ZTogJzItZGlnaXQnCiAgICAgIH07CiAgICAgIHJldHVybiBgJHtldmVudC5zdGFydC50b0xvY2FsZURhdGVTdHJpbmcoJ3poLUNOJywgb3B0aW9ucyl9IC0gJHtldmVudC5lbmQudG9Mb2NhbGVEYXRlU3RyaW5nKCd6aC1DTicsIG9wdGlvbnMpfWA7CiAgICB9OwoKICAgIC8vIOagvOW8j+WMluaPkOmGkuaXtumXtAogICAgY29uc3QgZm9ybWF0UmVtaW5kZXIgPSByZW1pbmRlciA9PiB7CiAgICAgIHN3aXRjaCAocmVtaW5kZXIpIHsKICAgICAgICBjYXNlICdub25lJzoKICAgICAgICAgIHJldHVybiAn5LiN5o+Q6YaSJzsKICAgICAgICBjYXNlICcxMG1pbic6CiAgICAgICAgICByZXR1cm4gJzEw5YiG6ZKf5YmNJzsKICAgICAgICBjYXNlICczMG1pbic6CiAgICAgICAgICByZXR1cm4gJzMw5YiG6ZKf5YmNJzsKICAgICAgICBjYXNlICcxaG91cic6CiAgICAgICAgICByZXR1cm4gJzHlsI/ml7bliY0nOwogICAgICAgIGNhc2UgJzFkYXknOgogICAgICAgICAgcmV0dXJuICcx5aSp5YmNJzsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmV0dXJuICfmnKrorr7nva4nOwogICAgICB9CiAgICB9OwoKICAgIC8vIOS4uuaXpeacn+mAieaLqeWZqOagvOW8j+WMluaXpeacnwogICAgY29uc3QgZm9ybWF0RGF0ZUZvclBpY2tlciA9IGRhdGUgPT4gewogICAgICBpZiAoIWRhdGUpIHJldHVybiAnJzsKICAgICAgdHJ5IHsKICAgICAgICAvLyDnoa7kv53kvb/nlKjmnInmlYjnmoREYXRl5a+56LGhCiAgICAgICAgbGV0IGRhdGVPYmo7CiAgICAgICAgaWYgKGRhdGUgaW5zdGFuY2VvZiBEYXRlKSB7CiAgICAgICAgICBpZiAoaXNOYU4oZGF0ZS5nZXRUaW1lKCkpKSB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+aXoOaViOaXpeacn+WvueixoScsIGRhdGUpOwogICAgICAgICAgICBkYXRlT2JqID0gbmV3IERhdGUoKTsgLy8g5L2/55So5b2T5YmN5pe26Ze05L2c5Li65Zue6YCACiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkYXRlT2JqID0gZGF0ZTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8g5bCd6K+V6Kej5p6Q5a2X56ym5Liy5pel5pyfCiAgICAgICAgICBkYXRlT2JqID0gbmV3IERhdGUoZGF0ZSk7CiAgICAgICAgICBpZiAoaXNOYU4oZGF0ZU9iai5nZXRUaW1lKCkpKSB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+aXoOaViOaXpeacn+Wtl+espuS4sicsIGRhdGUpOwogICAgICAgICAgICBkYXRlT2JqID0gbmV3IERhdGUoKTsgLy8g5L2/55So5b2T5YmN5pe26Ze05L2c5Li65Zue6YCACiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyDkvb/nlKjnm7TmjqXojrflj5blubTmnIjml6Xml7bliIbnmoTmlrnlvI/vvIzkuI3mtonlj4rml7bljLrovazmjaIKICAgICAgICBjb25zdCB5ZWFyID0gZGF0ZU9iai5nZXRGdWxsWWVhcigpOwogICAgICAgIGNvbnN0IG1vbnRoID0gKGRhdGVPYmouZ2V0TW9udGgoKSArIDEpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKTsKICAgICAgICBjb25zdCBkYXkgPSBkYXRlT2JqLmdldERhdGUoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7CiAgICAgICAgY29uc3QgaG91cnMgPSBkYXRlT2JqLmdldEhvdXJzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpOwogICAgICAgIGNvbnN0IG1pbnV0ZXMgPSBkYXRlT2JqLmdldE1pbnV0ZXMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7CiAgICAgICAgY29uc3QgZm9ybWF0dGVkID0gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9ICR7aG91cnN9OiR7bWludXRlc31gOwogICAgICAgIGNvbnNvbGUubG9nKGDmoLzlvI/ljJbml6XmnJ86ICR7ZGF0ZU9ian0gPT4gJHtmb3JtYXR0ZWR9YCk7CiAgICAgICAgcmV0dXJuIGZvcm1hdHRlZDsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfml6XmnJ/moLzlvI/ljJbplJnor686JywgZXJyb3IpOwogICAgICAgIC8vIOi/lOWbnuW9k+WJjeaXtumXtOS9nOS4uuWbnumAgOmAiemhuQogICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7CiAgICAgICAgcmV0dXJuIGAke25vdy5nZXRGdWxsWWVhcigpfS0keyhub3cuZ2V0TW9udGgoKSArIDEpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX0tJHtub3cuZ2V0RGF0ZSgpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX0gJHtub3cuZ2V0SG91cnMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9OiR7bm93LmdldE1pbnV0ZXMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9YDsKICAgICAgfQogICAgfTsKCiAgICAvLyDlpITnkIblvIDlp4vml7bpl7Tlj5jljJbvvIzoh6rliqjorr7nva7nu5PmnZ/ml7bpl7TkuLox5bCP5pe25ZCOCiAgICBjb25zdCBoYW5kbGVTdGFydFRpbWVDaGFuZ2UgPSBldmVudCA9PiB7CiAgICAgIGlmICghZXZlbnQuc3RhcnQpIHJldHVybjsKICAgICAgdHJ5IHsKICAgICAgICAvLyDop6PmnpDlvIDlp4vml7bpl7QKICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBuZXcgRGF0ZShldmVudC5zdGFydCk7CgogICAgICAgIC8vIOiuoeeul+W8gOWni+aXtumXtDHlsI/ml7blkI7nmoTml7bpl7QKICAgICAgICBjb25zdCBlbmRUaW1lID0gbmV3IERhdGUoc3RhcnRUaW1lLmdldFRpbWUoKSArIDYwICogNjAgKiAxMDAwKTsKCiAgICAgICAgLy8g5aaC5p6c57uT5p2f5pe26Ze05pyq6K6+572u77yM5oiW57uT5p2f5pe26Ze05pep5LqO5byA5aeL5pe26Ze077yM5oiW57uT5p2f5pe26Ze05LiN5Zyo5ZCM5LiA5aSpCiAgICAgICAgLy8g5YiZ6Ieq5Yqo6K6+572u57uT5p2f5pe26Ze0CiAgICAgICAgaWYgKCFldmVudC5lbmQgfHwgbmV3IERhdGUoZXZlbnQuZW5kKSA8IHN0YXJ0VGltZSB8fCBuZXcgRGF0ZShldmVudC5lbmQpLnRvRGF0ZVN0cmluZygpICE9PSBzdGFydFRpbWUudG9EYXRlU3RyaW5nKCkpIHsKICAgICAgICAgIGV2ZW50LmVuZCA9IGZvcm1hdERhdGVGb3JQaWNrZXIoZW5kVGltZSk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WkhOeQhuW8gOWni+aXtumXtOWPmOWMlumUmeivrzonLCBlcnJvcik7CiAgICAgIH0KICAgIH07CgogICAgLy8g5pel56iL57G75Z6L6aKc6ImyCiAgICBjb25zdCBldmVudFR5cGVDb2xvciA9IHR5cGUgPT4gewogICAgICBjb25zdCBtYXAgPSB7CiAgICAgICAgYmx1ZTogJyM0MDlFRkYnLAogICAgICAgIG9yYW5nZTogJyNFNkEyM0MnLAogICAgICAgIGdyZWVuOiAnIzY3QzIzQScsCiAgICAgICAgcmVkOiAnI0Y1NkM2QycsCiAgICAgICAgcHVycGxlOiAnIzkwOTM5OScsCiAgICAgICAgZGVmYXVsdDogJyM2MDYyNjYnCiAgICAgIH07CiAgICAgIHJldHVybiBtYXBbdHlwZV0gfHwgbWFwLmRlZmF1bHQ7CiAgICB9OwoKICAgIC8vIOaXpeeoi+mihOiniOa1ruWxggogICAgY29uc3QgZXZlbnRQcmV2aWV3ID0gcmVmKHsKICAgICAgdmlzaWJsZTogZmFsc2UsCiAgICAgIGV2ZW50OiB7fSwKICAgICAgc3R5bGU6IHt9CiAgICB9KTsKICAgIGNvbnN0IHNob3dFdmVudFByZXZpZXcgPSAoZXZlbnQsIGV2dCkgPT4gewogICAgICBldmVudFByZXZpZXcudmFsdWUgPSB7CiAgICAgICAgdmlzaWJsZTogdHJ1ZSwKICAgICAgICBldmVudCwKICAgICAgICBzdHlsZTogewogICAgICAgICAgcG9zaXRpb246ICdmaXhlZCcsCiAgICAgICAgICBsZWZ0OiBldnQuY2xpZW50WCArIDEwICsgJ3B4JywKICAgICAgICAgIHRvcDogZXZ0LmNsaWVudFkgKyAxMCArICdweCcsCiAgICAgICAgICB6SW5kZXg6IDk5OTkKICAgICAgICB9CiAgICAgIH07CiAgICB9OwogICAgY29uc3QgaGlkZUV2ZW50UHJldmlldyA9ICgpID0+IHsKICAgICAgZXZlbnRQcmV2aWV3LnZhbHVlLnZpc2libGUgPSBmYWxzZTsKICAgIH07CgogICAgLy8g5YWo6YOo5pel56iL5by556qXCiAgICBjb25zdCBhbGxFdmVudHNEaWFsb2cgPSByZWYoewogICAgICB2aXNpYmxlOiBmYWxzZSwKICAgICAgZGF0ZTogbnVsbCwKICAgICAgdGl0bGU6ICcnCiAgICB9KTsKICAgIGNvbnN0IHNob3dBbGxFdmVudHMgPSBkYXkgPT4gewogICAgICAvLyDmnoTpgKDlvZPlpKnnmoTlrozmlbTml6XmnJ/lr7nosaEKICAgICAgY29uc3QgeWVhciA9IGN1cnJlbnREYXRlLnZhbHVlLmdldEZ1bGxZZWFyKCk7CiAgICAgIGxldCBtb250aCA9IGN1cnJlbnREYXRlLnZhbHVlLmdldE1vbnRoKCk7CiAgICAgIGlmICghZGF5LmlzQ3VycmVudE1vbnRoKSB7CiAgICAgICAgbW9udGggPSBkYXkuZGF0ZSA+IDE1ID8gbW9udGggLSAxIDogbW9udGggKyAxOwogICAgICB9CiAgICAgIGNvbnN0IGZ1bGxEYXRlID0gbmV3IERhdGUoeWVhciwgbW9udGgsIGRheS5kYXRlKTsKICAgICAgYWxsRXZlbnRzRGlhbG9nLnZhbHVlID0gewogICAgICAgIHZpc2libGU6IHRydWUsCiAgICAgICAgZGF0ZTogZnVsbERhdGUsCiAgICAgICAgdGl0bGU6IGAke2Z1bGxEYXRlLmdldEZ1bGxZZWFyKCl95bm0JHtmdWxsRGF0ZS5nZXRNb250aCgpICsgMX3mnIgke2RheS5kYXRlfeaXpeWFqOmDqOaXpeeoi2AKICAgICAgfTsKICAgIH07CgogICAgLy8g5ouW5ou955u45YWz54q25oCBCiAgICBjb25zdCBkcmFnZ2VkRXZlbnQgPSByZWYobnVsbCk7CiAgICBjb25zdCByZXNpemluZ0V2ZW50ID0gcmVmKG51bGwpOwogICAgY29uc3QgaW5pdGlhbE1vdXNlWSA9IHJlZigwKTsKICAgIGNvbnN0IGluaXRpYWxFdmVudEhlaWdodCA9IHJlZigwKTsKCiAgICAvLyDlvIDlp4vmi5bmi70KICAgIGNvbnN0IGRyYWdTdGFydCA9IChlLCBldmVudCkgPT4gewogICAgICBkcmFnZ2VkRXZlbnQudmFsdWUgPSBldmVudDsKICAgICAgLy8g5Zyo5ouW5ou95Zu+5YOP5LiK5pi+56S65LqL5Lu25qCH6aKYCiAgICAgIGNvbnN0IGRyYWdJbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICBkcmFnSW1hZ2UudGV4dENvbnRlbnQgPSBldmVudC50aXRsZTsKICAgICAgZHJhZ0ltYWdlLmNsYXNzTmFtZSA9ICdkcmFnLWltYWdlJzsKICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkcmFnSW1hZ2UpOwogICAgICBlLmRhdGFUcmFuc2Zlci5zZXREcmFnSW1hZ2UoZHJhZ0ltYWdlLCAwLCAwKTsKCiAgICAgIC8vIOiusOW9leaLluaLveaVsOaNrgogICAgICBlLmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoewogICAgICAgIGlkOiBldmVudC5pZCwKICAgICAgICBzdGFydFRpbWU6IGV2ZW50LnN0YXJ0LmdldFRpbWUoKSwKICAgICAgICBlbmRUaW1lOiBldmVudC5lbmQuZ2V0VGltZSgpCiAgICAgIH0pKTsKCiAgICAgIC8vIOa3u+WKoOaLluaLveaViOaenAogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcud2Vlay1kYXktZXZlbnRzLCAuZGF5LWV2ZW50cy1jb250YWluZXInKS5mb3JFYWNoKGNvbnRhaW5lciA9PiB7CiAgICAgICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCBkcmFnT3Zlcik7CiAgICAgICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIGRyb3ApOwogICAgICAgIH0pOwogICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZHJhZ0ltYWdlKTsKICAgICAgfSwgMCk7CiAgICB9OwoKICAgIC8vIOaLluaLvee7j+i/hwogICAgY29uc3QgZHJhZ092ZXIgPSBlID0+IHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBpZiAoIWRyYWdnZWRFdmVudC52YWx1ZSkgcmV0dXJuOwoKICAgICAgLy8g5pi+56S65pS+572u5L2N572u6aKE6KeICiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGUuY3VycmVudFRhcmdldDsKICAgICAgY29uc3QgY29udGFpbmVyUmVjdCA9IGNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgY29uc3Qgb2Zmc2V0WSA9IGUuY2xpZW50WSAtIGNvbnRhaW5lclJlY3QudG9wOwoKICAgICAgLy8g6K6h566X5paw5pe26Ze077yI5oyJMTXliIbpkp/lr7npvZDvvIkKICAgICAgY29uc3QgcXVhcnRlckhvdXJzID0gTWF0aC5mbG9vcihvZmZzZXRZIC8gMTUpOwogICAgICBjb25zdCBob3VycyA9IE1hdGguZmxvb3IocXVhcnRlckhvdXJzIC8gNCk7CiAgICAgIGNvbnN0IG1pbnV0ZXMgPSBxdWFydGVySG91cnMgJSA0ICogMTU7CgogICAgICAvLyDmm7TmlrDpooTop4jkvY3nva4KICAgICAgY29uc3QgcHJldmlld0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZHJhZy1wcmV2aWV3JykgfHwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgIGlmICghcHJldmlld0VsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkcmFnLXByZXZpZXcnKSkgewogICAgICAgIHByZXZpZXdFbGVtZW50LmNsYXNzTmFtZSA9ICdkcmFnLXByZXZpZXcnOwogICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChwcmV2aWV3RWxlbWVudCk7CiAgICAgIH0KCiAgICAgIC8vIOiuvue9rumihOiniOWFg+e0oOagt+W8jwogICAgICBwcmV2aWV3RWxlbWVudC5zdHlsZS50b3AgPSBxdWFydGVySG91cnMgKiAxNSArICdweCc7CiAgICAgIHByZXZpZXdFbGVtZW50LnN0eWxlLmhlaWdodCA9IGNhbGNFdmVudEhlaWdodChkcmFnZ2VkRXZlbnQudmFsdWUpICsgJ3B4JzsKICAgICAgcHJldmlld0VsZW1lbnQuaW5uZXJIVE1MID0gYCR7aG91cnN9OiR7bWludXRlcy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9YDsKICAgIH07CgogICAgLy8g5pS+572u5ouW5ou9CiAgICBjb25zdCBkcm9wID0gYXN5bmMgZSA9PiB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgaWYgKCFkcmFnZ2VkRXZlbnQudmFsdWUpIHJldHVybjsKCiAgICAgIC8vIOenu+mZpOmihOiniOWFg+e0oAogICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZHJhZy1wcmV2aWV3JykuZm9yRWFjaChlbCA9PiBlbC5yZW1vdmUoKSk7CgogICAgICAvLyDorqHnrpfmlrDnmoTlvIDlp4vml7bpl7QKICAgICAgY29uc3QgY29udGFpbmVyID0gZS5jdXJyZW50VGFyZ2V0OwogICAgICBjb25zdCBjb250YWluZXJSZWN0ID0gY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICBjb25zdCBvZmZzZXRZID0gZS5jbGllbnRZIC0gY29udGFpbmVyUmVjdC50b3A7CgogICAgICAvLyDorqHnrpfmlrDml7bpl7TvvIjmjIkxNeWIhumSn+Wvuem9kO+8iQogICAgICBjb25zdCBxdWFydGVySG91cnMgPSBNYXRoLmZsb29yKG9mZnNldFkgLyAxNSk7CiAgICAgIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcihxdWFydGVySG91cnMgLyA0KTsKICAgICAgY29uc3QgbWludXRlcyA9IHF1YXJ0ZXJIb3VycyAlIDQgKiAxNTsKCiAgICAgIC8vIOWIm+W7uuaWsOeahOW8gOWni+aXtumXtAogICAgICBjb25zdCBuZXdTdGFydERhdGUgPSBuZXcgRGF0ZShkcmFnZ2VkRXZlbnQudmFsdWUuc3RhcnQpOwogICAgICBuZXdTdGFydERhdGUuc2V0SG91cnMoaG91cnMsIG1pbnV0ZXMsIDAsIDApOwoKICAgICAgLy8g6K6h566X5pe26Ze05beuCiAgICAgIGNvbnN0IHRpbWVEaWZmID0gbmV3U3RhcnREYXRlLmdldFRpbWUoKSAtIGRyYWdnZWRFdmVudC52YWx1ZS5zdGFydC5nZXRUaW1lKCk7CgogICAgICAvLyDliJvlu7rmlrDnmoTnu5PmnZ/ml7bpl7TvvIjkv53mjIHmjIHnu63ml7bpl7TkuI3lj5jvvIkKICAgICAgY29uc3QgbmV3RW5kRGF0ZSA9IG5ldyBEYXRlKGRyYWdnZWRFdmVudC52YWx1ZS5lbmQuZ2V0VGltZSgpICsgdGltZURpZmYpOwoKICAgICAgLy8g5pu05paw5LqL5Lu2CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgZXZlbnREYXRhID0gewogICAgICAgICAgdGl0bGU6IGRyYWdnZWRFdmVudC52YWx1ZS50aXRsZSwKICAgICAgICAgIHN0YXJ0OiBmb3JtYXREYXRlRm9yUGlja2VyKG5ld1N0YXJ0RGF0ZSksCiAgICAgICAgICBlbmQ6IGZvcm1hdERhdGVGb3JQaWNrZXIobmV3RW5kRGF0ZSksCiAgICAgICAgICBsb2NhdGlvbjogZHJhZ2dlZEV2ZW50LnZhbHVlLmxvY2F0aW9uLAogICAgICAgICAgdHlwZTogZHJhZ2dlZEV2ZW50LnZhbHVlLnR5cGUsCiAgICAgICAgICByZW1pbmRlcjogZHJhZ2dlZEV2ZW50LnZhbHVlLnJlbWluZGVyLAogICAgICAgICAgZGVzY3JpcHRpb246IGRyYWdnZWRFdmVudC52YWx1ZS5kZXNjcmlwdGlvbiwKICAgICAgICAgIHBhcnRpY2lwYW50czogZHJhZ2dlZEV2ZW50LnZhbHVlLnBhcnRpY2lwYW50cyB8fCBbXQogICAgICAgIH07CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB1cGRhdGVFdmVudChkcmFnZ2VkRXZlbnQudmFsdWUuaWQsIGV2ZW50RGF0YSk7CiAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHsKICAgICAgICAgIEVsTWVzc2FnZS5zdWNjZXNzKCfml6XnqIvml7bpl7Tlt7Lmm7TmlrAnKTsKICAgICAgICAgIGxvYWRFdmVudHMoKTsgLy8g6YeN5paw5Yqg6L295LqL5Lu2CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcihyZXNwb25zZS5tZXNzYWdlIHx8ICfmm7TmlrDml6XnqIvml7bpl7TlpLHotKUnKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign5pu05paw5pel56iL5aSx6LSlOicsIGVycm9yKTsKICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+abtOaWsOaXpeeoi+aXtumXtOWksei0pScpOwogICAgICB9CiAgICB9OwoKICAgIC8vIOe7k+adn+aLluaLvQogICAgY29uc3QgZHJhZ0VuZCA9ICgpID0+IHsKICAgICAgZHJhZ2dlZEV2ZW50LnZhbHVlID0gbnVsbDsKICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLndlZWstZGF5LWV2ZW50cywgLmRheS1ldmVudHMtY29udGFpbmVyJykuZm9yRWFjaChjb250YWluZXIgPT4gewogICAgICAgIGNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIGRyYWdPdmVyKTsKICAgICAgICBjb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJvcCcsIGRyb3ApOwogICAgICB9KTsKICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRyYWctcHJldmlldycpLmZvckVhY2goZWwgPT4gZWwucmVtb3ZlKCkpOwogICAgfTsKCiAgICAvLyDlvIDlp4vosIPmlbTlpKflsI8KICAgIGNvbnN0IHN0YXJ0UmVzaXplID0gKGUsIGV2ZW50KSA9PiB7CiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgIHJlc2l6aW5nRXZlbnQudmFsdWUgPSBldmVudDsKICAgICAgaW5pdGlhbE1vdXNlWS52YWx1ZSA9IGUuY2xpZW50WTsKICAgICAgaW5pdGlhbEV2ZW50SGVpZ2h0LnZhbHVlID0gY2FsY0V2ZW50SGVpZ2h0KGV2ZW50KTsKICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgaGFuZGxlUmVzaXplKTsKICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGVuZFJlc2l6ZSk7CiAgICB9OwoKICAgIC8vIOWkhOeQhuiwg+aVtOWkp+WwjwogICAgY29uc3QgaGFuZGxlUmVzaXplID0gZSA9PiB7CiAgICAgIGlmICghcmVzaXppbmdFdmVudC52YWx1ZSkgcmV0dXJuOwogICAgICBjb25zdCBkZWx0YVkgPSBlLmNsaWVudFkgLSBpbml0aWFsTW91c2VZLnZhbHVlOwogICAgICBjb25zdCBuZXdIZWlnaHQgPSBNYXRoLm1heCgzMCwgaW5pdGlhbEV2ZW50SGVpZ2h0LnZhbHVlICsgZGVsdGFZKTsKCiAgICAgIC8vIOiuoeeul+aWsOeahOaMgee7reaXtumXtO+8iOWIhumSn++8iQogICAgICBjb25zdCBkdXJhdGlvbk1pbnV0ZXMgPSBNYXRoLmZsb29yKG5ld0hlaWdodCAvIDE1KSAqIDE1OwoKICAgICAgLy8g6K6h566X5paw55qE57uT5p2f5pe26Ze0CiAgICAgIGNvbnN0IG5ld0VuZFRpbWUgPSBuZXcgRGF0ZShyZXNpemluZ0V2ZW50LnZhbHVlLnN0YXJ0LmdldFRpbWUoKSArIGR1cmF0aW9uTWludXRlcyAqIDYwICogMTAwMCk7CgogICAgICAvLyDmm7TmlrDpooTop4gKICAgICAgY29uc3QgZXZlbnRFbGVtZW50ID0gZS50YXJnZXQuY2xvc2VzdCgnLndlZWstZXZlbnQsIC5kYXktZXZlbnQnKTsKICAgICAgaWYgKGV2ZW50RWxlbWVudCkgewogICAgICAgIGV2ZW50RWxlbWVudC5zdHlsZS5oZWlnaHQgPSBuZXdIZWlnaHQgKyAncHgnOwoKICAgICAgICAvLyDmm7TmlrDml7bpl7TmmL7npLoKICAgICAgICBjb25zdCB0aW1lRWxlbWVudCA9IGV2ZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcud2Vlay1ldmVudC10aW1lLCAuZGF5LWV2ZW50LXRpbWUnKTsKICAgICAgICBpZiAodGltZUVsZW1lbnQpIHsKICAgICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IGAke3Jlc2l6aW5nRXZlbnQudmFsdWUuc3RhcnQuZ2V0SG91cnMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9OiR7cmVzaXppbmdFdmVudC52YWx1ZS5zdGFydC5nZXRNaW51dGVzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfWA7CiAgICAgICAgICBjb25zdCBlbmRUaW1lID0gYCR7bmV3RW5kVGltZS5nZXRIb3VycygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX06JHtuZXdFbmRUaW1lLmdldE1pbnV0ZXMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9YDsKICAgICAgICAgIHRpbWVFbGVtZW50LnRleHRDb250ZW50ID0gYCR7c3RhcnRUaW1lfSAtICR7ZW5kVGltZX1gOwogICAgICAgIH0KICAgICAgfQogICAgfTsKCiAgICAvLyDnu5PmnZ/osIPmlbTlpKflsI8KICAgIGNvbnN0IGVuZFJlc2l6ZSA9IGFzeW5jIGUgPT4gewogICAgICBpZiAoIXJlc2l6aW5nRXZlbnQudmFsdWUpIHJldHVybjsKICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgaGFuZGxlUmVzaXplKTsKICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGVuZFJlc2l6ZSk7CiAgICAgIGNvbnN0IGRlbHRhWSA9IGUuY2xpZW50WSAtIGluaXRpYWxNb3VzZVkudmFsdWU7CiAgICAgIGNvbnN0IG5ld0hlaWdodCA9IE1hdGgubWF4KDMwLCBpbml0aWFsRXZlbnRIZWlnaHQudmFsdWUgKyBkZWx0YVkpOwoKICAgICAgLy8g6K6h566X5paw55qE5oyB57ut5pe26Ze077yI5YiG6ZKf77yJCiAgICAgIGNvbnN0IGR1cmF0aW9uTWludXRlcyA9IE1hdGguZmxvb3IobmV3SGVpZ2h0IC8gMTUpICogMTU7CgogICAgICAvLyDorqHnrpfmlrDnmoTnu5PmnZ/ml7bpl7QKICAgICAgY29uc3QgbmV3RW5kVGltZSA9IG5ldyBEYXRlKHJlc2l6aW5nRXZlbnQudmFsdWUuc3RhcnQuZ2V0VGltZSgpICsgZHVyYXRpb25NaW51dGVzICogNjAgKiAxMDAwKTsKCiAgICAgIC8vIOabtOaWsOS6i+S7tgogICAgICB0cnkgewogICAgICAgIGNvbnN0IGV2ZW50RGF0YSA9IHsKICAgICAgICAgIHRpdGxlOiByZXNpemluZ0V2ZW50LnZhbHVlLnRpdGxlLAogICAgICAgICAgc3RhcnQ6IGZvcm1hdERhdGVGb3JQaWNrZXIocmVzaXppbmdFdmVudC52YWx1ZS5zdGFydCksCiAgICAgICAgICBlbmQ6IGZvcm1hdERhdGVGb3JQaWNrZXIobmV3RW5kVGltZSksCiAgICAgICAgICBsb2NhdGlvbjogcmVzaXppbmdFdmVudC52YWx1ZS5sb2NhdGlvbiwKICAgICAgICAgIHR5cGU6IHJlc2l6aW5nRXZlbnQudmFsdWUudHlwZSwKICAgICAgICAgIHJlbWluZGVyOiByZXNpemluZ0V2ZW50LnZhbHVlLnJlbWluZGVyLAogICAgICAgICAgZGVzY3JpcHRpb246IHJlc2l6aW5nRXZlbnQudmFsdWUuZGVzY3JpcHRpb24sCiAgICAgICAgICBwYXJ0aWNpcGFudHM6IHJlc2l6aW5nRXZlbnQudmFsdWUucGFydGljaXBhbnRzIHx8IFtdCiAgICAgICAgfTsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHVwZGF0ZUV2ZW50KHJlc2l6aW5nRXZlbnQudmFsdWUuaWQsIGV2ZW50RGF0YSk7CiAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHsKICAgICAgICAgIEVsTWVzc2FnZS5zdWNjZXNzKCfml6XnqIvml7bplb/lt7Lmm7TmlrAnKTsKICAgICAgICAgIGxvYWRFdmVudHMoKTsgLy8g6YeN5paw5Yqg6L295LqL5Lu2CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcihyZXNwb25zZS5tZXNzYWdlIHx8ICfmm7TmlrDml6XnqIvml7bplb/lpLHotKUnKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign5pu05paw5pel56iL5aSx6LSlOicsIGVycm9yKTsKICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+abtOaWsOaXpeeoi+aXtumVv+Wksei0pScpOwogICAgICB9CiAgICAgIHJlc2l6aW5nRXZlbnQudmFsdWUgPSBudWxsOwogICAgfTsKCiAgICAvLyDnu4Tku7bmmK/lkKblt7LmjILovb3moIflv5cKICAgIGNvbnN0IGlzQ29tcG9uZW50TW91bnRlZCA9IHJlZihmYWxzZSk7CgogICAgLy8g5YaF6YOo5Yi35paw5qCH6K+GCiAgICBjb25zdCBpbnRlcm5hbFJlZnJlc2hLZXkgPSByZWYoRGF0ZS5ub3coKSk7CgogICAgLy8g5re75Yqg5LiA5Liq5by65Yi25Yi35paw5Ye95pWwCiAgICBjb25zdCBmb3JjZVJlZnJlc2ggPSBhc3luYyAoKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKCflvLrliLbliLfmlrDml6Xljobnu4Tku7YnKTsKCiAgICAgIC8vIOabtOaWsOWGhemDqOWIt+aWsOagh+ivhu+8jOinpuWPkeinhuWbvuabtOaWsAogICAgICBpbnRlcm5hbFJlZnJlc2hLZXkudmFsdWUgPSBEYXRlLm5vdygpOwoKICAgICAgLy8g56ys5LiA5q2l77ya5riF6Zmk5omA5pyJ5Y+v6IO955qERE9N5Ymv5L2c55SoCiAgICAgIHRyeSB7CiAgICAgICAgLy8g5riF6Zmk5omA5pyJ5rWu5bGC5ZKM6YGu572pCiAgICAgICAgY29uc3Qgb3ZlcmxheXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZWwtb3ZlcmxheSwgLmVsLW92ZXJsYXktZGlhbG9nLCAuZWwtb3ZlcmxheS1tZXNzYWdlLWJveCwgLmVsLXBvcHVwLXBhcmVudC0taGlkZGVuJyk7CiAgICAgICAgb3ZlcmxheXMuZm9yRWFjaChlbCA9PiB7CiAgICAgICAgICBpZiAoZWwgJiYgZWwucGFyZW50Tm9kZSkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcign5riF55CG5rWu5bGC5YWD57Sg5aSx6LSlOicsIGUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIC8vIOaBouWkjWJvZHnmoLflvI8KICAgICAgICBpZiAoZG9jdW1lbnQgJiYgZG9jdW1lbnQuYm9keSkgewogICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICcnOwogICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdlbC1wb3B1cC1wYXJlbnQtLWhpZGRlbicpOwogICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ2F1dG8nOwogICAgICAgIH0KCiAgICAgICAgLy8g5aSE55CG5omA5pyJ5Y+v6IO955qE5LiL5ouJ6I+c5Y2VCiAgICAgICAgY29uc3QgZHJvcGRvd25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmVsLWRyb3Bkb3duLW1lbnUsIC5lbC1zZWxlY3QtZHJvcGRvd24nKTsKICAgICAgICBkcm9wZG93bnMuZm9yRWFjaChlbCA9PiB7CiAgICAgICAgICBpZiAoZWwgJiYgZWwucGFyZW50Tm9kZSkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcign5riF55CG5LiL5ouJ6I+c5Y2V5aSx6LSlOicsIGUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign5riF55CGRE9N5YWD57Sg5aSx6LSlOicsIGVycm9yKTsKICAgICAgfQoKICAgICAgLy8g56ys5LqM5q2l77ya6YeN5paw57uR5a6a5omA5pyJ5LqL5Lu2CiAgICAgIGF3YWl0IG5leHRUaWNrKCk7CiAgICAgIHRyeSB7CiAgICAgICAgLy8g56Gu5L+d5omA5pyJ5oyJ6ZKu5ZKM5Lqk5LqS5YWD57Sg5Y+v54K55Ye7CiAgICAgICAgY29uc3QgaW50ZXJhY3RpdmVFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYWxlbmRhci1jb250YWluZXIgYnV0dG9uLCAnICsgJy5lbC1kcm9wZG93bi1tZW51X19pdGVtLCAnICsgJy5ldmVudC1pdGVtLCAnICsgJy5jYWxlbmRhci1kYXksICcgKyAnLmVsLWRyb3Bkb3duLCAnICsgJy53ZWVrLWV2ZW50LCAnICsgJy5kYXktZXZlbnQnKTsKICAgICAgICBpbnRlcmFjdGl2ZUVsZW1lbnRzLmZvckVhY2goZWwgPT4gewogICAgICAgICAgaWYgKGVsKSB7CiAgICAgICAgICAgIC8vIOaBouWkjeaJgOacieS6pOS6kuWFg+e0oOeahOeCueWHu+iDveWKmwogICAgICAgICAgICBlbC5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ2F1dG8nOwogICAgICAgICAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCdkaXNhYmxlZCcpICYmICFlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLWRpc2FibGVkJykpIHsKICAgICAgICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIOmHjee9ruagt+W8jwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGVsLnN0eWxlLm9wYWNpdHkgPSAnMSc7CiAgICAgICAgICAgICAgZWwuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJzsKICAgICAgICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gJyc7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCfph43nva7lhYPntKDmoLflvI/lpLHotKU6JywgZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgLy8g54m55Yir5aSE55CG5re75Yqg5pel56iL5oyJ6ZKuCiAgICAgICAgY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjdGlvbi1jb250cm9scyAuZWwtYnV0dG9uJyk7CiAgICAgICAgaWYgKGFkZEJ1dHRvbikgewogICAgICAgICAgY29uc29sZS5sb2coJ+mHjeaWsOe7keWumua3u+WKoOaMiemSruS6i+S7ticpOwogICAgICAgICAgYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7CiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIHNob3dBZGRFdmVudERpYWxvZyhlKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfph43nva7kuqTkupLlhYPntKDlpLHotKU6JywgZXJyb3IpOwogICAgICB9CgogICAgICAvLyDnrKzkuInmraXvvJrlvLrliLbph43mlrDojrflj5bmlbDmja4KICAgICAgdHJ5IHsKICAgICAgICBjb25zb2xlLmxvZygn6YeN5paw5Yqg6L295pel5Y6G5pWw5o2uLi4uJyk7CgogICAgICAgIC8vIOiwg+eUqOS6i+S7tuWKoOi9veWHveaVsAogICAgICAgIGF3YWl0IGxvYWRFdmVudHMoKS5jYXRjaChlcnIgPT4gewogICAgICAgICAgY29uc29sZS5lcnJvcign5by65Yi25Yi35paw5pel5Y6G5pWw5o2u5aSx6LSlOicsIGVycik7CiAgICAgICAgICByZXR1cm4gW107CiAgICAgICAgfSk7CiAgICAgICAgY29uc29sZS5sb2coJ+aXpeWOhuaVsOaNruWIt+aWsOWujOaIkCcpOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+W8uuWItuWIt+aWsOaVsOaNruWksei0pTonLCBlcnJvcik7CiAgICAgIH0KICAgIH07CgogICAgLy8g55uR5ZCs6Lev55Sx5Y+Y5YyW77yM56Gu5L+d5q+P5qyh6L+b5YWl6aG16Z2i6YO95Yi35pawCiAgICB3YXRjaCgoKSA9PiByb3V0ZS5mdWxsUGF0aCwgbmV3UGF0aCA9PiB7CiAgICAgIGlmIChuZXdQYXRoID09PSAnL2NhbGVuZGFyJykgewogICAgICAgIGNvbnNvbGUubG9nKCfmo4DmtYvliLDot6/nlLHlj5jljJbliLDml6XljobpobXpnaLvvIzlvLrliLbliLfmlrAnKTsKICAgICAgICAvLyDlu7bov5/miafooYzvvIznoa7kv51ET03lt7Lnu4/muLLmn5MKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIGZvcmNlUmVmcmVzaCgpOwogICAgICAgIH0sIDEwMCk7CiAgICAgIH0KICAgIH0pOwoKICAgIC8vIOi3r+eUseWPmOWMluaXtumHjeaWsOWKoOi9veaVsOaNrgogICAgd2F0Y2goKCkgPT4gY2FsZW5kYXJWaWV3LnZhbHVlLCBuZXdWYWwgPT4gewogICAgICBjb25zb2xlLmxvZygn5pel5Y6G6KeG5Zu+5Y+Y5pu05Li6OicsIG5ld1ZhbCk7CiAgICAgIG5leHRUaWNrKCgpID0+IGxvYWRFdmVudHMoKSk7CiAgICB9KTsKCiAgICAvLyDml6XmnJ/lj5jljJbml7bph43mlrDliqDovb3mlbDmja4KICAgIHdhdGNoKCgpID0+IGN1cnJlbnREYXRlLnZhbHVlLCBuZXdWYWwgPT4gewogICAgICBjb25zb2xlLmxvZygn5b2T5YmN5pel5pyf5Y+Y5pu05Li6OicsIG5ld1ZhbC50b0xvY2FsZURhdGVTdHJpbmcoKSk7CiAgICAgIG5leHRUaWNrKCgpID0+IGxvYWRFdmVudHMoKSk7CiAgICB9KTsKICAgIGNvbnN0IHsKICAgICAgcHJveHkKICAgIH0gPSBnZXRDdXJyZW50SW5zdGFuY2UoKTsKICAgIGNvbnN0IGVtaXR0ZXIgPSBwcm94eS5lbWl0dGVyOwogICAgb25Nb3VudGVkKCgpID0+IHsKICAgICAgY29uc29sZS5sb2coJ0NhbGVuZGFy57uE5Lu25oyC6L29Jyk7CiAgICAgIGlzQ29tcG9uZW50TW91bnRlZC52YWx1ZSA9IHRydWU7CgogICAgICAvLyDlu7bov5/kuIDngrnml7bpl7Tlho3liJ3lp4vljJbvvIznoa7kv51ET03lt7Llrozlhajlh4blpIflpb0KICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgbG9hZEV2ZW50cygpOwogICAgICAgIGNvbnNvbGUubG9nKCflu7bov5/liJ3lp4vljJblrozmiJAnKTsKICAgICAgfSwgNTApOwoKICAgICAgLy8g55uR5ZCs5YWD57Sg5Y+v6KeB5oCn5Y+Y5YyWCiAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKGVudHJpZXMgPT4gewogICAgICAgIGVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7CiAgICAgICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ0NhbGVuZGFy57uE5Lu26L+b5YWl5Y+v6KeG5Yy65Z+f77yM5qOA5p+l5Yid5aeL5YyW54q25oCBJyk7CiAgICAgICAgICAgIC8vIOWmguaenOWPmOaIkOWPr+inge+8jOmHjeaWsOajgOafpeWIneWni+WMlueKtuaAgQogICAgICAgICAgICBpZiAoZXZlbnRzLnZhbHVlLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfml6XnqIvmlbDmja7kuLrnqbrvvIzlsJ3or5Xph43mlrDliqDovb0nKTsKICAgICAgICAgICAgICBsb2FkRXZlbnRzKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CgogICAgICAvLyDnm5Hmjqfnu4Tku7blhYPntKAKICAgICAgY29uc3QgY2FsZW5kYXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYWxlbmRhci1jb250YWluZXInKTsKICAgICAgaWYgKGNhbGVuZGFyRWwpIHsKICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGNhbGVuZGFyRWwpOwogICAgICB9CgogICAgICAvLyDkuLTml7bop6PlhrPmlrnmoYjvvJrnoa7kv53mt7vliqDmjInpkq7kuovku7bmraPnoa7nu5HlrpoKICAgICAgY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjdGlvbi1jb250cm9scyAuZWwtYnV0dG9uJyk7CiAgICAgIGlmIChhZGRCdXR0b24pIHsKICAgICAgICBjb25zb2xlLmxvZygn5om+5Yiw5re75Yqg5oyJ6ZKu77yM5aKe5by654K55Ye75aSE55CGJyk7CiAgICAgICAgYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7CiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgc2hvd0FkZEV2ZW50RGlhbG9nKGUpOwogICAgICAgIH0pOwogICAgICB9CgogICAgICAvLyDmt7vliqDkuovku7bnm5HlkKzlmagKICAgICAgY29uc29sZS5sb2coJ+aXpeWOhue7hOS7tuW3suaMgui9ve+8jOW8gOWni+ebkeWQrOWIt+aWsOS6i+S7ticpOwogICAgICBlbWl0dGVyLm9uKCdyZWZyZXNoQ2FsZW5kYXInLCBsb2FkRXZlbnRzKTsKICAgIH0pOwogICAgb25Vbm1vdW50ZWQoKCkgPT4gewogICAgICAvLyDnp7vpmaTkuovku7bnm5HlkKzlmagKICAgICAgY29uc29sZS5sb2coJ+aXpeWOhue7hOS7tuWwhuWNuOi9ve+8jOenu+mZpOWIt+aWsOS6i+S7tuebkeWQrOWZqCcpOwogICAgICBlbWl0dGVyLm9mZigncmVmcmVzaENhbGVuZGFyJywgbG9hZEV2ZW50cyk7CiAgICB9KTsKCiAgICAvLyDmt7vliqBrZWVwLWFsaXZl5r+A5rS75LqL5Lu25aSE55CGCiAgICBvbkFjdGl2YXRlZCgoKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKCdDYWxlbmRhcue7hOS7tuiiq+a/gOa0uycpOwogICAgICAvLyDnu4Tku7bmv4DmtLvml7blvLrliLbliLfmlrAKICAgICAgZm9yY2VSZWZyZXNoKCk7CiAgICB9KTsKICAgIG9uQmVmb3JlVW5tb3VudCgoKSA9PiB7CiAgICAgIC8vIOa4heeQhuW3peS9nAogICAgfSk7CiAgICByZXR1cm4gewogICAgICBjYWxlbmRhclZpZXcsCiAgICAgIGN1cnJlbnREYXRlLAogICAgICBjdXJyZW50RGF0ZUxhYmVsLAogICAgICB3ZWVrRGF5cywKICAgICAgZGF5cywKICAgICAgd2Vla0RhdGVzLAogICAgICBkYXlFdmVudHMsCiAgICAgIGFkZEV2ZW50RGlhbG9nVmlzaWJsZSwKICAgICAgZXZlbnREZXRhaWxzRGlhbG9nVmlzaWJsZSwKICAgICAgZWRpdEV2ZW50RGlhbG9nVmlzaWJsZSwKICAgICAgbmV3RXZlbnQsCiAgICAgIHNlbGVjdGVkRXZlbnQsCiAgICAgIGVkaXRpbmdFdmVudCwKICAgICAgYWRkRXZlbnRGb3JtUmVmLAogICAgICBlZGl0RXZlbnRGb3JtUmVmLAogICAgICBydWxlcywKICAgICAgdG9kYXksCiAgICAgIHByZXYsCiAgICAgIG5leHQsCiAgICAgIHNlbGVjdERheSwKICAgICAgc2hvd0FkZEV2ZW50RGlhbG9nLAogICAgICBhZGRFdmVudCwKICAgICAgc2hvd0V2ZW50RGV0YWlscywKICAgICAgc2hvd0VkaXRFdmVudERpYWxvZywKICAgICAgc2F2ZUVkaXRFdmVudCwKICAgICAgZGVsZXRlRXZlbnQsCiAgICAgIGNhbGNFdmVudFRvcCwKICAgICAgY2FsY0V2ZW50SGVpZ2h0LAogICAgICBmb3JtYXRFdmVudFRpbWUsCiAgICAgIGZvcm1hdEV2ZW50RGF0ZVRpbWUsCiAgICAgIGZvcm1hdFJlbWluZGVyLAogICAgICAvLyBFbGVtZW50IFBsdXMg5Zu+5qCHCiAgICAgIEFycm93TGVmdCwKICAgICAgQXJyb3dSaWdodCwKICAgICAgUGx1cywKICAgICAgaGFuZGxlU3RhcnRUaW1lQ2hhbmdlLAogICAgICBldmVudFR5cGVDb2xvciwKICAgICAgZXZlbnRQcmV2aWV3LAogICAgICBzaG93RXZlbnRQcmV2aWV3LAogICAgICBoaWRlRXZlbnRQcmV2aWV3LAogICAgICBhbGxFdmVudHNEaWFsb2csCiAgICAgIHNob3dBbGxFdmVudHMsCiAgICAgIGFsbERheUV2ZW50cywKICAgICAgZGF5RXZlbnRHcm91cHMsCiAgICAgIG9yZ2FuaXplT3ZlcmxhcHBpbmdFdmVudHMsCiAgICAgIGRyYWdTdGFydCwKICAgICAgZHJhZ0VuZCwKICAgICAgc3RhcnRSZXNpemUsCiAgICAgIGFsbEV2ZW50c0ZvckRpYWxvZywKICAgICAgaW50ZXJuYWxSZWZyZXNoS2V5LAogICAgICBmb3JjZVJlZnJlc2gKICAgIH07CiAgfQp9Ow=="},{"version":3,"names":["ref","computed","onMounted","watch","nextTick","onActivated","onBeforeUnmount","onUnmounted","getCurrentInstance","useRoute","ElMessage","ElMessageBox","ArrowLeft","ArrowRight","Plus","getMonthlyEvents","getWeeklyEvents","getDailyEvents","createEvent","updateEvent","deleteCalendarEvent","deleteCalendarEventApi","name","setup","route","calendarView","currentDate","Date","events","addEventFormRef","editEventFormRef","rules","title","required","message","trigger","start","end","location","type","reminder","description","currentDateLabel","options","year","month","value","getFullYear","getMonth","Math","ceil","getDate","getFirstDayOfMonth","getDay","toLocaleDateString","day","weekDays","addEventDialogVisible","eventDetailsDialogVisible","editEventDialogVisible","newEvent","selectedEvent","editingEvent","id","days","result","today","firstDay","daysInMonth","getDaysInMonth","daysInLastMonth","i","date","push","isCurrentMonth","isToday","isSameDay","getDayEvents","remaining","length","weekDates","setDate","dayEvents","eventGroups","organizeOverlappingEvents","dayName","fullDate","allDayEvents","dayEventGroups","sortedEvents","sort","a","b","getTime","groups","forEach","event","placed","group","lastEvent","allEventsForDialog","allEventsDialog","filter","isLoading","lastRequestTime","retryCount","maxRetries","loadEvents","isComponentMounted","currentTime","now","console","log","loadMonthlyEvents","loadWeeklyEvents","loadDailyEvents","err","error","setTimeout","response","success","data","eventData","parseEventsData","Error","formatDateString","map","item","creator","creator_name","participants","participants_info","toString","padStart","selectDay","prev","next","setMonth","showAddEventDialog","preventDefault","stopPropagation","toISOString","oneHourLater","formatDateForPicker","addEvent","validate","valid","startTime","endTime","isNaN","warning","startDate","toDateString","endDate","userId","Number","localStorage","getItem","trim","info","showEventDetails","showEditEventDialog","saveEditEvent","deleteEvent","_response$data","confirm","confirmButtonText","cancelButtonText","status","_response$data2","_error$response","_error$response$data","errorMsg","date1","date2","calcEventTop","hours","getHours","minutes","getMinutes","calcEventHeight","duration","max","formatEventTime","formatEventDateTime","hour","minute","formatReminder","dateObj","formatted","handleStartTimeChange","eventTypeColor","blue","orange","green","red","purple","default","eventPreview","visible","style","showEventPreview","evt","position","left","clientX","top","clientY","zIndex","hideEventPreview","showAllEvents","draggedEvent","resizingEvent","initialMouseY","initialEventHeight","dragStart","e","dragImage","document","createElement","textContent","className","body","appendChild","dataTransfer","setDragImage","setData","JSON","stringify","querySelectorAll","container","addEventListener","dragOver","drop","removeChild","currentTarget","containerRect","getBoundingClientRect","offsetY","quarterHours","floor","previewElement","querySelector","classList","contains","height","innerHTML","el","remove","newStartDate","setHours","timeDiff","newEndDate","dragEnd","removeEventListener","startResize","handleResize","endResize","deltaY","newHeight","durationMinutes","newEndTime","eventElement","target","closest","timeElement","internalRefreshKey","forceRefresh","overlays","parentNode","overflow","pointerEvents","dropdowns","interactiveElements","hasAttribute","removeAttribute","opacity","visibility","display","addButton","catch","fullPath","newPath","newVal","proxy","emitter","observer","IntersectionObserver","entries","entry","isIntersecting","calendarEl","observe","on","off"],"sources":["C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\calendar\\Index.vue"],"sourcesContent":["<template>\n  <div class=\"calendar-container\" :key=\"internalRefreshKey\">\n    <!--  -->\n    <div class=\"calendar-header\">\n      <div class=\"date-controls\">\n        <el-button type=\"primary\" @click=\"today\"></el-button>\n        <div class=\"date-nav\">\n          <el-button :icon=\"ArrowLeft\" plain @click=\"prev\"></el-button>\n          <span class=\"current-date\">{{ currentDateLabel }}</span>\n          <el-button :icon=\"ArrowRight\" plain @click=\"next\"></el-button>\n        </div>\n      </div>\n      <div class=\"view-controls\">\n        <el-radio-group v-model=\"calendarView\" size=\"small\">\n          <el-radio-button value=\"month\"></el-radio-button>\n          <el-radio-button value=\"week\"></el-radio-button>\n          <el-radio-button value=\"day\"></el-radio-button>\n        </el-radio-group>\n      </div>\n      <div class=\"action-controls\">\n        <el-button type=\"primary\" @click=\"e => showAddEventDialog(e)\">\n          <el-icon><Plus /></el-icon> \n        </el-button>\n      </div>\n    </div>\n\n    <!--  -->\n    <div class=\"calendar-main\" v-if=\"calendarView === 'month'\">\n      <!--  -->\n      <div class=\"calendar-weekdays\">\n        <div class=\"weekday\" v-for=\"(day, index) in weekDays\" :key=\"index\">{{ day }}</div>\n      </div>\n      \n      <!--  -->\n      <div class=\"calendar-days\">\n        <div \n          v-for=\"(day, index) in days\" \n          :key=\"index\" \n          class=\"calendar-day\" \n          :class=\"{ \n            'today': day.isToday, \n            'other-month': !day.isCurrentMonth,\n            'has-events': day.events && day.events.length > 0\n          }\"\n          @click=\"selectDay(day)\"\n        >\n          <div class=\"day-number\">{{ day.date }}</div>\n          <div class=\"event-container\">\n            <div \n              v-for=\"(event, eventIndex) in day.events.slice(0, 3)\" \n              :key=\"eventIndex\" \n              class=\"event-item\"\n              :class=\"'event-' + event.type\"\n              @mouseenter=\"showEventPreview(event, $event)\"\n              @mouseleave=\"hideEventPreview\"\n              @click.stop=\"showEventDetails(event)\"\n            >\n              <span class=\"event-color\" :style=\"{background: eventTypeColor(event.type)}\"></span>\n              {{ event.title }}\n            </div>\n            <div \n              v-if=\"day.events && day.events.length > 3\" \n              class=\"more-events-indicator\" \n              @click.stop=\"showAllEvents(day)\"\n            >\n               {{ day.events.length }} \n            </div>\n          </div>\n        </div>\n      </div>\n      <!--  -->\n      <div v-if=\"eventPreview.visible\" class=\"event-preview-pop\" :style=\"eventPreview.style\">\n        <div class=\"event-preview-title\">{{ eventPreview.event.title }}</div>\n        <div class=\"event-preview-time\">{{ formatEventTime(eventPreview.event) }}</div>\n        <div class=\"event-preview-location\" v-if=\"eventPreview.event.location\">\n          <i class=\"bi bi-geo-alt\"></i> {{ eventPreview.event.location }}\n        </div>\n        <div class=\"event-preview-desc\" v-if=\"eventPreview.event.description\">\n          {{ eventPreview.event.description }}\n        </div>\n      </div>\n      <!--  -->\n      <el-dialog v-model=\"allEventsDialog.visible\" :title=\"allEventsDialog.title\" width=\"400px\" @close=\"allEventsDialog.date = null\">\n        <div v-if=\"allEventsForDialog.length === 0\"></div>\n        <el-timeline v-else>\n          <el-timeline-item\n            v-for=\"(event, idx) in allEventsForDialog\"\n            :key=\"idx\"\n            :color=\"eventTypeColor(event.type)\"\n          >\n            <div class=\"all-event-title\">{{ event.title }}</div>\n            <div class=\"all-event-time\">{{ formatEventTime(event) }}</div>\n            <div class=\"all-event-location\" v-if=\"event.location\">\n              <i class=\"bi bi-geo-alt\"></i> {{ event.location }}\n            </div>\n            <div class=\"all-event-desc\" v-if=\"event.description\">\n              {{ event.description }}\n            </div>\n            <el-button size=\"mini\" type=\"link\" @click=\"showEventDetails(event)\"></el-button>\n          </el-timeline-item>\n        </el-timeline>\n      </el-dialog>\n    </div>\n\n    <!--  -->\n    <div class=\"calendar-week\" v-if=\"calendarView === 'week'\">\n      <div class=\"week-header\">\n        <div class=\"week-time-col\"></div>\n        <div \n          v-for=\"(day, index) in weekDates\" \n          :key=\"index\" \n          class=\"week-day-col\"\n          :class=\"{ 'today': day.isToday }\"\n        >\n          <div class=\"week-day-name\">{{ day.dayName }}</div>\n          <div class=\"week-day-date\">{{ day.date }}</div>\n        </div>\n      </div>\n      \n      <div class=\"week-body\">\n        <div class=\"week-time-scale\">\n          <div v-for=\"hour in 24\" :key=\"hour\" class=\"time-slot\">\n            {{ hour - 1 }}:00\n          </div>\n        </div>\n        \n        <div class=\"week-events-container\">\n          <div \n            v-for=\"(day, dayIndex) in weekDates\" \n            :key=\"dayIndex\" \n            class=\"week-day-events\"\n          >\n            <!--  -->\n            <div class=\"week-all-day-events\">\n              <div\n                v-for=\"(event, eventIndex) in day.allDayEvents\"\n                :key=\"'all-day-' + eventIndex\"\n                class=\"week-all-day-event\"\n                :class=\"'event-' + event.type\"\n                @click=\"showEventDetails(event)\"\n                @mouseenter=\"showEventPreview(event, $event)\"\n                @mouseleave=\"hideEventPreview\"\n              >\n                <span class=\"event-color\" :style=\"{background: eventTypeColor(event.type)}\"></span>\n                <span class=\"all-day-event-title\">{{ event.title }}</span>\n              </div>\n            </div>\n\n            <!--  -->\n            <div \n              v-for=\"(eventGroup, groupIndex) in day.eventGroups\"\n              :key=\"'group-' + groupIndex\"\n              class=\"week-event-group\"\n              :style=\"{left: (groupIndex * (100 / day.eventGroups.length)) + '%', \n                      width: (100 / day.eventGroups.length) + '%'}\"\n            >\n              <div \n                v-for=\"(event, eventIndex) in eventGroup\"\n                :key=\"eventIndex\"\n                class=\"week-event\"\n                :class=\"'event-' + event.type\"\n                :style=\"{\n                  top: calcEventTop(event) + 'px',\n                  height: calcEventHeight(event) + 'px',\n                }\"\n                @click=\"showEventDetails(event)\"\n                @mouseenter=\"showEventPreview(event, $event)\"\n                @mouseleave=\"hideEventPreview\"\n                draggable=\"true\"\n                @dragstart=\"dragStart($event, event)\"\n                @dragend=\"dragEnd\"\n              >\n                <span class=\"event-color\" :style=\"{background: eventTypeColor(event.type)}\"></span>\n                <div class=\"week-event-title\">{{ event.title }}</div>\n                <div class=\"week-event-time\">{{ formatEventTime(event) }}</div>\n                <div class=\"resize-handle bottom\" @mousedown=\"startResize($event, event)\"></div>\n              </div>\n            </div>\n          </div>\n          \n          <!--  -->\n        </div>\n      </div>\n    </div>\n    \n    <!--  -->\n    <div class=\"calendar-day-view\" v-if=\"calendarView === 'day'\">\n      <div class=\"day-header\">\n        <div class=\"day-date\">\n          {{ currentDate.toLocaleDateString('zh-CN', { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' }) }}\n        </div>\n      </div>\n      \n      <div class=\"day-body\">\n        <div class=\"day-time-scale\">\n          <div v-for=\"hour in 24\" :key=\"hour\" class=\"time-slot\">\n            {{ hour - 1 }}:00\n          </div>\n        </div>\n        \n        <div class=\"day-events-container\">\n          <!--  -->\n          <div class=\"day-all-day-events\">\n            <div\n              v-for=\"(event, eventIndex) in allDayEvents\"\n              :key=\"'all-day-' + eventIndex\"\n              class=\"day-all-day-event\"\n              :class=\"'event-' + event.type\"\n              @click=\"showEventDetails(event)\"\n              @mouseenter=\"showEventPreview(event, $event)\"\n              @mouseleave=\"hideEventPreview\"\n            >\n              <span class=\"event-color\" :style=\"{background: eventTypeColor(event.type)}\"></span>\n              <span class=\"all-day-event-title\">{{ event.title }}</span>\n            </div>\n          </div>\n          \n          <!--  -->\n          \n          <!--  -->\n          <div \n            v-for=\"(eventGroup, groupIndex) in dayEventGroups\" \n            :key=\"'group-' + groupIndex\"\n            class=\"day-event-group\"\n            :style=\"{left: (groupIndex * (100 / dayEventGroups.length)) + '%', \n                    width: (100 / dayEventGroups.length) + '%'}\"\n          >\n            <div \n              v-for=\"(event, eventIndex) in eventGroup\" \n              :key=\"eventIndex\" \n              class=\"day-event\"\n              :class=\"'event-' + event.type\"\n              :style=\"{\n                top: calcEventTop(event) + 'px',\n                height: calcEventHeight(event) + 'px'\n              }\"\n              @click=\"showEventDetails(event)\"\n              @mouseenter=\"showEventPreview(event, $event)\"\n              @mouseleave=\"hideEventPreview\"\n              draggable=\"true\"\n              @dragstart=\"dragStart($event, event)\"\n              @dragend=\"dragEnd\"\n            >\n              <span class=\"event-color\" :style=\"{background: eventTypeColor(event.type)}\"></span>\n              <div class=\"day-event-title\">{{ event.title }}</div>\n              <div class=\"day-event-time\">{{ formatEventTime(event) }}</div>\n              <div class=\"day-event-location\" v-if=\"event.location\">\n                <i class=\"bi bi-geo-alt\"></i> {{ event.location }}\n              </div>\n              <div class=\"resize-handle bottom\" @mousedown=\"startResize($event, event)\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!--  -->\n    <el-dialog\n      v-model=\"addEventDialogVisible\"\n      title=\"\"\n      width=\"500px\"\n      class=\"calendar-dialog\"\n      :append-to-body=\"true\"\n      :destroy-on-close=\"false\"\n      :close-on-click-modal=\"false\"\n    >\n      <el-form :model=\"newEvent\" label-width=\"80px\" v-if=\"addEventDialogVisible\" :rules=\"rules\" ref=\"addEventFormRef\">\n        <el-form-item label=\"\" prop=\"title\" required>\n          <el-input v-model=\"newEvent.title\" placeholder=\"\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"\" prop=\"start\" required>\n          <el-date-picker\n            v-model=\"newEvent.start\"\n            type=\"datetime\"\n            placeholder=\"\"\n            format=\"YYYY-MM-DD HH:mm\"\n            value-format=\"YYYY-MM-DD HH:mm\"\n            @change=\"handleStartTimeChange(newEvent)\"\n          ></el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"\" prop=\"end\" required>\n          <el-date-picker\n            v-model=\"newEvent.end\"\n            type=\"datetime\"\n            placeholder=\"\"\n            format=\"YYYY-MM-DD HH:mm\"\n            value-format=\"YYYY-MM-DD HH:mm\"\n          ></el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"\" prop=\"location\" required>\n          <el-input v-model=\"newEvent.location\" placeholder=\"\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"\" prop=\"type\" required>\n          <el-select v-model=\"newEvent.type\" placeholder=\"\">\n            <el-option label=\"\" value=\"blue\"></el-option>\n            <el-option label=\"\" value=\"orange\"></el-option>\n            <el-option label=\"\" value=\"green\"></el-option>\n            <el-option label=\"\" value=\"red\"></el-option>\n            <el-option label=\"\" value=\"purple\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"\" prop=\"reminder\" required>\n          <el-select v-model=\"newEvent.reminder\" placeholder=\"\">\n            <el-option label=\"\" value=\"none\"></el-option>\n            <el-option label=\"10\" value=\"10min\"></el-option>\n            <el-option label=\"30\" value=\"30min\"></el-option>\n            <el-option label=\"1\" value=\"1hour\"></el-option>\n            <el-option label=\"1\" value=\"1day\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"\" prop=\"description\" required>\n          <el-input \n            v-model=\"newEvent.description\" \n            type=\"textarea\" \n            :rows=\"3\"\n            placeholder=\"\"\n          ></el-input>\n        </el-form-item>\n      </el-form>\n      <template #footer>\n        <div class=\"dialog-footer\">\n          <el-button @click=\"addEventDialogVisible = false\"></el-button>\n          <el-button type=\"primary\" @click=\"addEvent\"></el-button>\n        </div>\n      </template>\n    </el-dialog>\n\n    <!--  -->\n    <el-dialog\n      v-model=\"eventDetailsDialogVisible\"\n      :title=\"selectedEvent.title\"\n      width=\"500px\"\n      class=\"calendar-dialog\"\n    >\n      <div class=\"event-details\">\n        <div class=\"event-detail-item\">\n          <i class=\"bi bi-clock\"></i>\n          <span>{{ formatEventDateTime(selectedEvent) }}</span>\n        </div>\n        <div class=\"event-detail-item\" v-if=\"selectedEvent.location\">\n          <i class=\"bi bi-geo-alt\"></i>\n          <span>{{ selectedEvent.location }}</span>\n        </div>\n        <div class=\"event-detail-item\" v-if=\"selectedEvent.description\">\n          <i class=\"bi bi-card-text\"></i>\n          <div class=\"event-description\">{{ selectedEvent.description }}</div>\n        </div>\n        <div class=\"event-detail-item\">\n          <i class=\"bi bi-bell\"></i>\n          <span>{{ formatReminder(selectedEvent.reminder) }}</span>\n        </div>\n      </div>\n      <template #footer>\n        <div class=\"dialog-footer\">\n          <el-button @click=\"eventDetailsDialogVisible = false\"></el-button>\n          <el-button type=\"primary\" @click=\"showEditEventDialog\"></el-button>\n          <el-button type=\"danger\" @click=\"deleteEvent\"></el-button>\n        </div>\n      </template>\n    </el-dialog>\n\n    <!--  -->\n    <el-dialog\n      v-model=\"editEventDialogVisible\"\n      title=\"\"\n      width=\"500px\"\n      class=\"calendar-dialog\"\n    >\n      <el-form :model=\"editingEvent\" label-width=\"80px\" :rules=\"rules\" ref=\"editEventFormRef\">\n        <el-form-item label=\"\" prop=\"title\" required>\n          <el-input v-model=\"editingEvent.title\" placeholder=\"\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"\" prop=\"start\" required>\n          <el-date-picker\n            v-model=\"editingEvent.start\"\n            type=\"datetime\"\n            placeholder=\"\"\n            format=\"YYYY-MM-DD HH:mm\"\n            value-format=\"YYYY-MM-DD HH:mm\"\n            @change=\"handleStartTimeChange(editingEvent)\"\n          ></el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"\" prop=\"end\" required>\n          <el-date-picker\n            v-model=\"editingEvent.end\"\n            type=\"datetime\"\n            placeholder=\"\"\n            format=\"YYYY-MM-DD HH:mm\"\n            value-format=\"YYYY-MM-DD HH:mm\"\n          ></el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"\" prop=\"location\" required>\n          <el-input v-model=\"editingEvent.location\" placeholder=\"\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"\" prop=\"type\" required>\n          <el-select v-model=\"editingEvent.type\" placeholder=\"\">\n            <el-option label=\"\" value=\"blue\"></el-option>\n            <el-option label=\"\" value=\"orange\"></el-option>\n            <el-option label=\"\" value=\"green\"></el-option>\n            <el-option label=\"\" value=\"red\"></el-option>\n            <el-option label=\"\" value=\"purple\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"\" prop=\"reminder\" required>\n          <el-select v-model=\"editingEvent.reminder\" placeholder=\"\">\n            <el-option label=\"\" value=\"none\"></el-option>\n            <el-option label=\"10\" value=\"10min\"></el-option>\n            <el-option label=\"30\" value=\"30min\"></el-option>\n            <el-option label=\"1\" value=\"1hour\"></el-option>\n            <el-option label=\"1\" value=\"1day\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"\" prop=\"description\" required>\n          <el-input \n            v-model=\"editingEvent.description\" \n            type=\"textarea\" \n            :rows=\"3\"\n            placeholder=\"\"\n          ></el-input>\n        </el-form-item>\n      </el-form>\n      <template #footer>\n        <div class=\"dialog-footer\">\n          <el-button @click=\"editEventDialogVisible = false\"></el-button>\n          <el-button type=\"primary\" @click=\"saveEditEvent\"></el-button>\n        </div>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { ref, computed, onMounted, watch, nextTick, onActivated, onBeforeUnmount, onUnmounted, getCurrentInstance } from 'vue'\nimport { useRoute } from 'vue-router'\nimport { ElMessage, ElMessageBox } from 'element-plus'\nimport { ArrowLeft, ArrowRight, Plus } from '@element-plus/icons-vue'\nimport { getMonthlyEvents, getWeeklyEvents, getDailyEvents, createEvent, updateEvent, deleteCalendarEvent as deleteCalendarEventApi } from '@/api/calendar'\n\nexport default {\n  name: 'Calendar',\n  setup() {\n    // \n    const route = useRoute();\n    \n    // //\n    const calendarView = ref('month')\n    \n    // \n    const currentDate = ref(new Date())\n    \n    // \n    const events = ref([])\n    \n    // \n    const addEventFormRef = ref(null)\n    const editEventFormRef = ref(null)\n    \n    // \n    const rules = {\n      title: [\n        { required: true, message: '', trigger: 'blur' }\n      ],\n      start: [\n        { required: true, message: '', trigger: 'change' }\n      ],\n      end: [\n        { required: true, message: '', trigger: 'change' }\n      ],\n      location: [\n        { required: true, message: '', trigger: 'blur' }\n      ],\n      type: [\n        { required: true, message: '', trigger: 'change' }\n      ],\n      reminder: [\n        { required: true, message: '', trigger: 'change' }\n      ],\n      description: [\n        { required: true, message: '', trigger: 'blur' }\n      ]\n    }\n    \n    // \n    const currentDateLabel = computed(() => {\n      const options = { year: 'numeric', month: 'long' }\n      if (calendarView.value === 'week') {\n        return `${currentDate.value.getFullYear()}${currentDate.value.getMonth() + 1}${Math.ceil((currentDate.value.getDate() + getFirstDayOfMonth(currentDate.value).getDay()) / 7)}`\n      } else if (calendarView.value === 'day') {\n        return currentDate.value.toLocaleDateString('zh-CN', { year: 'numeric', month: 'long', day: 'numeric' })\n      }\n      return currentDate.value.toLocaleDateString('zh-CN', options)\n    })\n    \n    // \n    const weekDays = ref(['', '', '', '', '', '', ''])\n    \n    // \n    const addEventDialogVisible = ref(false)\n    const eventDetailsDialogVisible = ref(false)\n    const editEventDialogVisible = ref(false)\n    \n    // \n    const newEvent = ref({\n      title: '',\n      start: '',\n      end: '',\n      location: '',\n      type: 'blue',\n      reminder: '30min',\n      description: ''\n    })\n    \n    // \n    const selectedEvent = ref({})\n    \n    // \n    const editingEvent = ref({\n      id: '',\n      title: '',\n      start: '',\n      end: '',\n      location: '',\n      type: 'blue',\n      reminder: '30min',\n      description: ''\n    })\n    \n    // \n    const days = computed(() => {\n      const result = []\n      const today = new Date()\n      \n      // \n      const firstDay = getFirstDayOfMonth(currentDate.value).getDay()\n      \n      // \n      const daysInMonth = getDaysInMonth(currentDate.value)\n      \n      // \n      const daysInLastMonth = getDaysInMonth(\n        new Date(currentDate.value.getFullYear(), currentDate.value.getMonth() - 1)\n      )\n      \n      // \n      for (let i = firstDay - 1; i >= 0; i--) {\n        const day = daysInLastMonth - i\n        const date = new Date(currentDate.value.getFullYear(), currentDate.value.getMonth() - 1, day)\n        result.push({\n          date: day,\n          isCurrentMonth: false,\n          isToday: isSameDay(date, today),\n          events: getDayEvents(date)\n        })\n      }\n      \n      // \n      for (let i = 1; i <= daysInMonth; i++) {\n        const date = new Date(currentDate.value.getFullYear(), currentDate.value.getMonth(), i)\n        result.push({\n          date: i,\n          isCurrentMonth: true,\n          isToday: isSameDay(date, today),\n          events: getDayEvents(date)\n        })\n      }\n      \n      // 4267\n      const remaining = 42 - result.length\n      for (let i = 1; i <= remaining; i++) {\n        const date = new Date(currentDate.value.getFullYear(), currentDate.value.getMonth() + 1, i)\n        result.push({\n          date: i,\n          isCurrentMonth: false,\n          isToday: isSameDay(date, today),\n          events: getDayEvents(date)\n        })\n      }\n      \n      return result\n    })\n    \n    // \n    const weekDates = computed(() => {\n      const result = []\n      const date = new Date(currentDate.value)\n      const day = date.getDay()\n      \n      // \n      date.setDate(date.getDate() - day)\n      \n      // \n      for (let i = 0; i < 7; i++) {\n        const currentDate = new Date(date)\n        currentDate.setDate(date.getDate() + i)\n        \n        const dayEvents = getDayEvents(currentDate)\n        // \n        const eventGroups = organizeOverlappingEvents(dayEvents)\n        \n        result.push({\n          date: currentDate.getDate(),\n          dayName: weekDays.value[i],\n          isToday: isSameDay(currentDate, new Date()),\n          fullDate: currentDate,\n          events: dayEvents,\n          allDayEvents: [], // \n          eventGroups: eventGroups\n        })\n      }\n      \n      return result\n    })\n    \n    // \n    const dayEvents = computed(() => {\n      return getDayEvents(currentDate.value)\n    })\n    \n    //  - \n    const allDayEvents = computed(() => {\n      return []\n    })\n    \n    //  - \n    const dayEventGroups = computed(() => {\n      return organizeOverlappingEvents(dayEvents.value)\n    })\n    \n    // \n    const organizeOverlappingEvents = (events) => {\n      if (!events.length) return [[]]\n      \n      // \n      const sortedEvents = [...events].sort((a, b) => a.start.getTime() - b.start.getTime())\n      \n      const groups = []\n      \n      sortedEvents.forEach(event => {\n        // \n        let placed = false\n        \n        for (let i = 0; i < groups.length; i++) {\n          const group = groups[i]\n          const lastEvent = group[group.length - 1]\n          \n          // \n          if (lastEvent && event.start.getTime() >= lastEvent.end.getTime()) {\n            group.push(event)\n            placed = true\n            break\n          }\n        }\n        \n        // \n        if (!placed) {\n          groups.push([event])\n        }\n      })\n      \n      return groups.length ? groups : [[]]\n    }\n    \n    // \"\"\n    const allEventsForDialog = computed(() => {\n      if (!allEventsDialog.value.date) {\n        return [];\n      }\n      return events.value\n        .filter(event => isSameDay(new Date(event.start), allEventsDialog.value.date))\n        .sort((a,b) => a.start - b.start);\n    });\n    \n    // \n    const isLoading = ref(false)\n    \n    // \n    const lastRequestTime = ref(0)\n    const retryCount = ref(0)\n    const maxRetries = 3\n    \n    // \n    const loadEvents = async () => {\n      if (!isComponentMounted.value) return\n      \n      // \n      const currentTime = Date.now()\n      if (currentTime - lastRequestTime.value < 300) {\n        console.log('')\n        return\n      }\n      \n      lastRequestTime.value = currentTime\n      isLoading.value = true\n      console.log('...')\n      \n      try {\n        if (calendarView.value === 'month') {\n          await loadMonthlyEvents()\n        } else if (calendarView.value === 'week') {\n          await loadWeeklyEvents()\n        } else if (calendarView.value === 'day') {\n          await loadDailyEvents()\n        }\n        // \n        retryCount.value = 0\n      } catch (err) {\n        console.error(':', err)\n        \n        // \n        if (retryCount.value < maxRetries) {\n          retryCount.value++\n          console.log(` (${retryCount.value}/${maxRetries})...`)\n          // \n          setTimeout(loadEvents, 500)\n        } else {\n          ElMessage.error('')\n          retryCount.value = 0\n        }\n      } finally {\n        isLoading.value = false\n      }\n    }\n    \n    // \n    const loadMonthlyEvents = async () => {\n        const year = currentDate.value.getFullYear()\n      const month = currentDate.value.getMonth() + 1\n      console.log(`${year}${month}...`)\n        \n      try {\n        const response = await getMonthlyEvents(year, month)\n        \n        if (response && (response.success || response.data)) {\n          const eventData = response.data || []\n          events.value = parseEventsData(eventData)\n          console.log(`${events.value.length}`)\n          return response\n        } else {\n          throw new Error('')\n        }\n      } catch (error) {\n        console.error(':', error)\n        throw error // \n      }\n    }\n    \n    // \n    const loadWeeklyEvents = async () => {\n        const date = formatDateString(currentDate.value)\n      console.log(`${date}...`)\n      \n      try {\n        const response = await getWeeklyEvents(date)\n        \n        if (response && (response.success || response.data)) {\n          const eventData = response.data || []\n          events.value = parseEventsData(eventData)\n          console.log(`${events.value.length}`)\n          return response\n        } else {\n          throw new Error('')\n        }\n      } catch (error) {\n        console.error(':', error)\n        throw error // \n      }\n    }\n    \n    // \n    const loadDailyEvents = async () => {\n        const date = formatDateString(currentDate.value)\n      console.log(`${date}...`)\n      \n      try {\n        const response = await getDailyEvents(date)\n        \n        if (response && (response.success || response.data)) {\n          const eventData = response.data || []\n          events.value = parseEventsData(eventData)\n          console.log(`${events.value.length}`)\n          return response\n        } else {\n          throw new Error('')\n        }\n      } catch (error) {\n        console.error(':', error)\n        throw error // \n      }\n    }\n    \n    // \n    const parseEventsData = (data) => {\n      return data.map(item => {\n        // \n        return {\n          id: item.id,\n          title: item.title,\n          start: new Date(item.start),\n          end: new Date(item.end),\n          location: item.location,\n          type: item.type,\n          reminder: item.reminder,\n          description: item.description,\n          creator: item.creator,\n          creator_name: item.creator_name,\n          participants: item.participants,\n          participants_info: item.participants_info\n        };\n      });\n    }\n    \n    // \n    const formatDateString = (date) => {\n      const year = date.getFullYear()\n      const month = (date.getMonth() + 1).toString().padStart(2, '0')\n      const day = date.getDate().toString().padStart(2, '0')\n      return `${year}-${month}-${day}`\n    }\n    \n    // \n    const selectDay = (day) => {\n      if (!day.isCurrentMonth) {\n        if (day.date > 15) {\n          // \n          prev()\n        } else {\n          // \n          next()\n        }\n      }\n    }\n    \n    // \n    const today = () => {\n      currentDate.value = new Date()\n    }\n    \n    // \n    const prev = () => {\n      const date = new Date(currentDate.value)\n      if (calendarView.value === 'month') {\n        date.setMonth(date.getMonth() - 1)\n      } else if (calendarView.value === 'week') {\n        date.setDate(date.getDate() - 7)\n      } else if (calendarView.value === 'day') {\n        date.setDate(date.getDate() - 1)\n      }\n      currentDate.value = date\n    }\n    \n    // \n    const next = () => {\n      const date = new Date(currentDate.value)\n      if (calendarView.value === 'month') {\n        date.setMonth(date.getMonth() + 1)\n      } else if (calendarView.value === 'week') {\n        date.setDate(date.getDate() + 7)\n      } else if (calendarView.value === 'day') {\n        date.setDate(date.getDate() + 1)\n      }\n      currentDate.value = date\n    }\n    \n    // \n    const showAddEventDialog = (event) => {\n      // \n      if (event) {\n        event.preventDefault()\n        event.stopPropagation()\n      }\n      \n      console.log('', new Date().toISOString())\n      \n      try {\n        // nextTick\n        const now = new Date()\n        const oneHourLater = new Date(now.getTime() + 60 * 60 * 1000)\n        \n        // true\n        addEventDialogVisible.value = true\n        \n        // \n      newEvent.value = {\n        title: '',\n          start: formatDateForPicker(now),\n          end: formatDateForPicker(oneHourLater),\n        location: '',\n        type: 'blue',\n        reminder: '30min',\n        description: ''\n      }\n        \n        console.log('', addEventDialogVisible.value)\n      } catch (error) {\n        console.error(':', error)\n        \n        // \n        addEventDialogVisible.value = false\n        setTimeout(() => {\n      addEventDialogVisible.value = true\n          console.log('')\n        }, 100)\n      }\n    }\n    \n    // \n    const addEvent = async () => {\n      console.log(':', newEvent.value)\n      \n      // \n      if (!addEventFormRef.value) {\n        console.error('')\n        return\n      }\n      \n      addEventFormRef.value.validate(async (valid) => {\n        if (!valid) {\n          ElMessage.error('')\n          return\n        }\n        \n        try {\n          // \n          const startTime = new Date(newEvent.value.start).getTime()\n          const endTime = new Date(newEvent.value.end).getTime()\n          if (isNaN(startTime) || isNaN(endTime)) {\n            // \n            console.error('', { \n              start: newEvent.value.start, \n              end: newEvent.value.end \n            })\n            \n            // \n            const now = new Date()\n            const oneHourLater = new Date(now.getTime() + 60 * 60 * 1000)\n            newEvent.value.start = formatDateForPicker(now)\n            newEvent.value.end = formatDateForPicker(oneHourLater)\n            ElMessage.warning('')\n            return\n          }\n          \n          if (startTime > endTime) {\n            ElMessage.warning('')\n            return\n          }\n          \n          // \n          const startDate = new Date(newEvent.value.start).toDateString()\n          const endDate = new Date(newEvent.value.end).toDateString()\n          if (startDate !== endDate) {\n            ElMessage.warning('')\n            return\n          }\n          \n          // ID\n          const userId = Number(localStorage.getItem('user_id') || 0)\n          console.log('ID:', userId)\n          \n          // \n          const eventData = {\n            title: newEvent.value.title.trim(),\n            start: newEvent.value.start,\n            end: newEvent.value.end,\n            location: (newEvent.value.location || '').trim(),\n            type: newEvent.value.type || 'blue',\n            reminder: newEvent.value.reminder || '30min',\n            description: (newEvent.value.description || '').trim(),\n            participants: userId ? [userId] : [] // \n          }\n          \n          console.log(':', eventData)\n          \n          // \n          addEventDialogVisible.value = false\n          ElMessage.info('...')\n          \n          const response = await createEvent(eventData)\n          console.log(':', response)\n          \n          if (response.success || (response.data && !response.message)) {\n            ElMessage.success('')\n            await loadEvents() // \n          } else {\n            ElMessage.error(response.message || '')\n            console.error(':', response)\n          }\n        } catch (error) {\n          console.error(':', error)\n          ElMessage.error('' + (error.message || ''))\n        }\n      })\n    }\n    \n    // \n    const showEventDetails = (event) => {\n      selectedEvent.value = event\n      eventDetailsDialogVisible.value = true\n    }\n    \n    // \n    const showEditEventDialog = () => {\n      editingEvent.value = {\n        id: selectedEvent.value.id,\n        title: selectedEvent.value.title,\n        start: formatDateForPicker(selectedEvent.value.start),\n        end: formatDateForPicker(selectedEvent.value.end),\n        location: selectedEvent.value.location || '',\n        type: selectedEvent.value.type,\n        reminder: selectedEvent.value.reminder,\n        description: selectedEvent.value.description || ''\n      }\n      \n      eventDetailsDialogVisible.value = false\n      editEventDialogVisible.value = true\n    }\n    \n    // \n    const saveEditEvent = async () => {\n      // \n      if (!editEventFormRef.value) {\n        console.error('')\n        return\n      }\n      \n      editEventFormRef.value.validate(async (valid) => {\n        if (!valid) {\n          ElMessage.error('')\n          return\n        }\n        \n        // \n        const startTime = new Date(editingEvent.value.start).getTime()\n        const endTime = new Date(editingEvent.value.end).getTime()\n        if (startTime > endTime) {\n          ElMessage.warning('')\n          return\n        }\n        \n        // \n        const startDate = new Date(editingEvent.value.start).toDateString()\n        const endDate = new Date(editingEvent.value.end).toDateString()\n        if (startDate !== endDate) {\n          ElMessage.warning('')\n          return\n        }\n        \n        try {\n          // ID\n          const userId = Number(localStorage.getItem('user_id') || 0)\n          \n          // \n          const eventData = {\n            title: editingEvent.value.title,\n            start: editingEvent.value.start,\n            end: editingEvent.value.end,\n            location: editingEvent.value.location,\n            type: editingEvent.value.type,\n            reminder: editingEvent.value.reminder,\n            description: editingEvent.value.description,\n            participants: userId ? [userId] : [] // \n          }\n          \n          console.log(':', eventData)\n          const response = await updateEvent(editingEvent.value.id, eventData)\n          \n          if (response.success) {\n            ElMessage.success('')\n            editEventDialogVisible.value = false\n            loadEvents() // \n          } else {\n            ElMessage.error(response.message || '')\n          }\n        } catch (error) {\n          console.error(':', error)\n          ElMessage.error('')\n        }\n      })\n    }\n    \n    // \n    const deleteEvent = async () => {\n      if (!selectedEvent.value.id || isNaN(selectedEvent.value.id)) {\n        ElMessage.error('ID');\n        return;\n      }\n      console.log('id=', selectedEvent.value.id);\n      try {\n        await ElMessageBox.confirm('', '', {\n          confirmButtonText: '',\n          cancelButtonText: '',\n          type: 'warning'\n        })\n        const response = await deleteCalendarEventApi(selectedEvent.value.id)\n        \n        // HTTP204\n        if (response.status === 204 || response.data?.success) {\n          ElMessage.success('')\n          eventDetailsDialogVisible.value = false\n          loadEvents() // \n        } else {\n          ElMessage.error(response.data?.message || '')\n          console.error(':', response.data)\n        }\n      } catch (error) {\n        if (error !== 'cancel') {\n          // Axioserror.response\n          const errorMsg = error.response?.data?.message || error.message || '';\n          console.error(':', error.response || error)\n          ElMessage.error(': ' + errorMsg);\n        }\n      }\n    }\n    \n    // \n    const getDayEvents = (date) => {\n      return events.value.filter(event => isSameDay(new Date(event.start), date))\n    }\n    \n    // \n    const isSameDay = (date1, date2) => {\n      return date1.getFullYear() === date2.getFullYear() &&\n             date1.getMonth() === date2.getMonth() &&\n             date1.getDate() === date2.getDate()\n    }\n    \n    // \n    const getFirstDayOfMonth = (date) => {\n      return new Date(date.getFullYear(), date.getMonth(), 1)\n    }\n    \n    // \n    const getDaysInMonth = (date) => {\n      return new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate()\n    }\n    \n    // \n    const calcEventTop = (event) => {\n      if (!event || !event.start) return 0\n      try {\n        const hours = event.start.getHours()\n        const minutes = event.start.getMinutes()\n        // 60px1515px\n        return (hours * 60 + minutes) / 15 * 15\n      } catch (error) {\n        console.error(':', error)\n        return 0\n      }\n    }\n    \n    // \n    const calcEventHeight = (event) => {\n      if (!event || !event.start || !event.end) return 60 // 1\n      try {\n        const startTime = event.start.getTime()\n        const endTime = event.end.getTime()\n        const duration = (endTime - startTime) / (1000 * 60) // \n        \n        // 30px (30)\n        return Math.max(duration / 15 * 15, 30)\n      } catch (error) {\n        console.error(':', error)\n        return 60\n      }\n    }\n    \n    // \n    const formatEventTime = (event) => {\n      const start = event.start\n      const end = event.end\n      \n      return `${start.getHours().toString().padStart(2, '0')}:${start.getMinutes().toString().padStart(2, '0')} - ${end.getHours().toString().padStart(2, '0')}:${end.getMinutes().toString().padStart(2, '0')}`\n    }\n    \n    // \n    const formatEventDateTime = (event) => {\n      if (!event.start || !event.end) return ''\n      \n      const options = {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit'\n      }\n      \n      return `${event.start.toLocaleDateString('zh-CN', options)} - ${event.end.toLocaleDateString('zh-CN', options)}`\n    }\n    \n    // \n    const formatReminder = (reminder) => {\n      switch (reminder) {\n        case 'none':\n          return ''\n        case '10min':\n          return '10'\n        case '30min':\n          return '30'\n        case '1hour':\n          return '1'\n        case '1day':\n          return '1'\n        default:\n          return ''\n      }\n    }\n    \n    // \n    const formatDateForPicker = (date) => {\n      if (!date) return '';\n      \n      try {\n        // Date\n        let dateObj;\n        if (date instanceof Date) {\n          if (isNaN(date.getTime())) {\n            console.error('', date);\n            dateObj = new Date(); // \n          } else {\n            dateObj = date;\n          }\n        } else {\n          // \n          dateObj = new Date(date);\n          if (isNaN(dateObj.getTime())) {\n            console.error('', date);\n            dateObj = new Date(); // \n          }\n        }\n      \n      // \n      const year = dateObj.getFullYear();\n      const month = (dateObj.getMonth() + 1).toString().padStart(2, '0');\n      const day = dateObj.getDate().toString().padStart(2, '0');\n      const hours = dateObj.getHours().toString().padStart(2, '0');\n      const minutes = dateObj.getMinutes().toString().padStart(2, '0');\n      \n        const formatted = `${year}-${month}-${day} ${hours}:${minutes}`;\n        console.log(`: ${dateObj} => ${formatted}`);\n        return formatted;\n      } catch (error) {\n        console.error(':', error);\n        // \n        const now = new Date();\n        return `${now.getFullYear()}-${(now.getMonth() + 1).toString().padStart(2, '0')}-${now.getDate().toString().padStart(2, '0')} ${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;\n      }\n    }\n    \n    // 1\n    const handleStartTimeChange = (event) => {\n      if (!event.start) return\n      \n      try {\n        // \n        const startTime = new Date(event.start)\n        \n        // 1\n        const endTime = new Date(startTime.getTime() + 60 * 60 * 1000)\n        \n        // \n        // \n        if (!event.end || \n            new Date(event.end) < startTime || \n            new Date(event.end).toDateString() !== startTime.toDateString()) {\n          event.end = formatDateForPicker(endTime)\n        }\n      } catch (error) {\n        console.error(':', error)\n      }\n    }\n    \n    // \n    const eventTypeColor = (type) => {\n      const map = {\n        blue: '#409EFF',\n        orange: '#E6A23C',\n        green: '#67C23A',\n        red: '#F56C6C',\n        purple: '#909399',\n        default: '#606266'\n      }\n      return map[type] || map.default\n    }\n    \n    // \n    const eventPreview = ref({ visible: false, event: {}, style: {} })\n    const showEventPreview = (event, evt) => {\n      eventPreview.value = {\n        visible: true,\n        event,\n        style: {\n          position: 'fixed',\n          left: evt.clientX + 10 + 'px',\n          top: evt.clientY + 10 + 'px',\n          zIndex: 9999\n        }\n      }\n    }\n    const hideEventPreview = () => {\n      eventPreview.value.visible = false\n    }\n    \n    // \n    const allEventsDialog = ref({ visible: false, date: null, title: '' })\n    const showAllEvents = (day) => {\n      // \n      const year = currentDate.value.getFullYear();\n      let month = currentDate.value.getMonth();\n      if (!day.isCurrentMonth) {\n        month = day.date > 15 ? month - 1 : month + 1;\n      }\n      const fullDate = new Date(year, month, day.date);\n\n      allEventsDialog.value = {\n        visible: true,\n        date: fullDate,\n        title: `${fullDate.getFullYear()}${fullDate.getMonth() + 1}${day.date}`\n      }\n    }\n    \n    // \n    const draggedEvent = ref(null)\n    const resizingEvent = ref(null)\n    const initialMouseY = ref(0)\n    const initialEventHeight = ref(0)\n    \n    // \n    const dragStart = (e, event) => {\n      draggedEvent.value = event\n      // \n      const dragImage = document.createElement('div')\n      dragImage.textContent = event.title\n      dragImage.className = 'drag-image'\n      document.body.appendChild(dragImage)\n      e.dataTransfer.setDragImage(dragImage, 0, 0)\n      \n      // \n      e.dataTransfer.setData('text/plain', JSON.stringify({\n        id: event.id,\n        startTime: event.start.getTime(),\n        endTime: event.end.getTime()\n      }))\n      \n      // \n      setTimeout(() => {\n        document.querySelectorAll('.week-day-events, .day-events-container').forEach(container => {\n          container.addEventListener('dragover', dragOver)\n          container.addEventListener('drop', drop)\n        })\n        document.body.removeChild(dragImage)\n      }, 0)\n    }\n    \n    // \n    const dragOver = (e) => {\n      e.preventDefault()\n      if (!draggedEvent.value) return\n      \n      // \n      const container = e.currentTarget\n      const containerRect = container.getBoundingClientRect()\n      const offsetY = e.clientY - containerRect.top\n      \n      // 15\n      const quarterHours = Math.floor(offsetY / 15)\n      const hours = Math.floor(quarterHours / 4)\n      const minutes = (quarterHours % 4) * 15\n      \n      // \n      const previewElement = document.querySelector('.drag-preview') || document.createElement('div')\n      if (!previewElement.classList.contains('drag-preview')) {\n        previewElement.className = 'drag-preview'\n        container.appendChild(previewElement)\n      }\n      \n      // \n      previewElement.style.top = (quarterHours * 15) + 'px'\n      previewElement.style.height = calcEventHeight(draggedEvent.value) + 'px'\n      previewElement.innerHTML = `${hours}:${minutes.toString().padStart(2, '0')}`\n    }\n    \n    // \n    const drop = async (e) => {\n      e.preventDefault()\n      if (!draggedEvent.value) return\n      \n      // \n      document.querySelectorAll('.drag-preview').forEach(el => el.remove())\n      \n      // \n      const container = e.currentTarget\n      const containerRect = container.getBoundingClientRect()\n      const offsetY = e.clientY - containerRect.top\n      \n      // 15\n      const quarterHours = Math.floor(offsetY / 15)\n      const hours = Math.floor(quarterHours / 4)\n      const minutes = (quarterHours % 4) * 15\n      \n      // \n      const newStartDate = new Date(draggedEvent.value.start)\n      newStartDate.setHours(hours, minutes, 0, 0)\n      \n      // \n      const timeDiff = newStartDate.getTime() - draggedEvent.value.start.getTime()\n      \n      // \n      const newEndDate = new Date(draggedEvent.value.end.getTime() + timeDiff)\n      \n      // \n      try {\n        const eventData = {\n          title: draggedEvent.value.title,\n          start: formatDateForPicker(newStartDate),\n          end: formatDateForPicker(newEndDate),\n          location: draggedEvent.value.location,\n          type: draggedEvent.value.type,\n          reminder: draggedEvent.value.reminder,\n          description: draggedEvent.value.description,\n          participants: draggedEvent.value.participants || []\n        }\n        \n        const response = await updateEvent(draggedEvent.value.id, eventData)\n        \n        if (response.success) {\n          ElMessage.success('')\n          loadEvents() // \n        } else {\n          ElMessage.error(response.message || '')\n        }\n      } catch (error) {\n        console.error(':', error)\n        ElMessage.error('')\n      }\n    }\n    \n    // \n    const dragEnd = () => {\n      draggedEvent.value = null\n      document.querySelectorAll('.week-day-events, .day-events-container').forEach(container => {\n        container.removeEventListener('dragover', dragOver)\n        container.removeEventListener('drop', drop)\n      })\n      document.querySelectorAll('.drag-preview').forEach(el => el.remove())\n    }\n    \n    // \n    const startResize = (e, event) => {\n      e.stopPropagation()\n      resizingEvent.value = event\n      initialMouseY.value = e.clientY\n      initialEventHeight.value = calcEventHeight(event)\n      \n      document.addEventListener('mousemove', handleResize)\n      document.addEventListener('mouseup', endResize)\n    }\n    \n    // \n    const handleResize = (e) => {\n      if (!resizingEvent.value) return\n      \n      const deltaY = e.clientY - initialMouseY.value\n      const newHeight = Math.max(30, initialEventHeight.value + deltaY)\n      \n      // \n      const durationMinutes = Math.floor(newHeight / 15) * 15\n      \n      // \n      const newEndTime = new Date(resizingEvent.value.start.getTime() + durationMinutes * 60 * 1000)\n      \n      // \n      const eventElement = e.target.closest('.week-event, .day-event')\n      if (eventElement) {\n        eventElement.style.height = newHeight + 'px'\n        \n        // \n        const timeElement = eventElement.querySelector('.week-event-time, .day-event-time')\n        if (timeElement) {\n          const startTime = `${resizingEvent.value.start.getHours().toString().padStart(2, '0')}:${resizingEvent.value.start.getMinutes().toString().padStart(2, '0')}`\n          const endTime = `${newEndTime.getHours().toString().padStart(2, '0')}:${newEndTime.getMinutes().toString().padStart(2, '0')}`\n          timeElement.textContent = `${startTime} - ${endTime}`\n        }\n      }\n    }\n    \n    // \n    const endResize = async (e) => {\n      if (!resizingEvent.value) return\n      \n      document.removeEventListener('mousemove', handleResize)\n      document.removeEventListener('mouseup', endResize)\n      \n      const deltaY = e.clientY - initialMouseY.value\n      const newHeight = Math.max(30, initialEventHeight.value + deltaY)\n      \n      // \n      const durationMinutes = Math.floor(newHeight / 15) * 15\n      \n      // \n      const newEndTime = new Date(resizingEvent.value.start.getTime() + durationMinutes * 60 * 1000)\n      \n      // \n      try {\n        const eventData = {\n          title: resizingEvent.value.title,\n          start: formatDateForPicker(resizingEvent.value.start),\n          end: formatDateForPicker(newEndTime),\n          location: resizingEvent.value.location,\n          type: resizingEvent.value.type,\n          reminder: resizingEvent.value.reminder,\n          description: resizingEvent.value.description,\n          participants: resizingEvent.value.participants || []\n        }\n        \n        const response = await updateEvent(resizingEvent.value.id, eventData)\n        \n        if (response.success) {\n          ElMessage.success('')\n          loadEvents() // \n        } else {\n          ElMessage.error(response.message || '')\n        }\n      } catch (error) {\n        console.error(':', error)\n        ElMessage.error('')\n      }\n      \n      resizingEvent.value = null\n    }\n    \n    // \n    const isComponentMounted = ref(false)\n    \n    // \n    const internalRefreshKey = ref(Date.now());\n    \n    // \n    const forceRefresh = async () => {\n      console.log('');\n      \n      // \n      internalRefreshKey.value = Date.now();\n      \n      // DOM\n      try {\n        // \n        const overlays = document.querySelectorAll('.el-overlay, .el-overlay-dialog, .el-overlay-message-box, .el-popup-parent--hidden');\n        overlays.forEach(el => {\n          if (el && el.parentNode) {\n            try {\n              el.parentNode.removeChild(el);\n            } catch (e) {\n              console.error(':', e);\n            }\n          }\n        });\n        \n        // body\n        if (document && document.body) {\n          document.body.style.overflow = '';\n          document.body.classList.remove('el-popup-parent--hidden');\n          document.body.style.pointerEvents = 'auto';\n        }\n        \n        // \n        const dropdowns = document.querySelectorAll('.el-dropdown-menu, .el-select-dropdown');\n        dropdowns.forEach(el => {\n          if (el && el.parentNode) {\n            try {\n              el.parentNode.removeChild(el);\n            } catch (e) {\n              console.error(':', e);\n            }\n          }\n        });\n      } catch (error) {\n        console.error('DOM:', error);\n      }\n      \n      // \n      await nextTick();\n      try {\n        // \n        const interactiveElements = document.querySelectorAll(\n          '.calendar-container button, ' +\n          '.el-dropdown-menu__item, ' +\n          '.event-item, ' +\n          '.calendar-day, ' +\n          '.el-dropdown, ' +\n          '.week-event, ' +\n          '.day-event'\n        );\n        \n        interactiveElements.forEach(el => {\n          if (el) {\n            // \n            el.style.pointerEvents = 'auto';\n            if (el.hasAttribute('disabled') && !el.classList.contains('is-disabled')) {\n              el.removeAttribute('disabled');\n            }\n            \n            // \n            try {\n              el.style.opacity = '1';\n              el.style.visibility = 'visible';\n              el.style.display = '';\n            } catch (e) {\n              console.error(':', e);\n            }\n          }\n        });\n        \n        // \n        const addButton = document.querySelector('.action-controls .el-button');\n        if (addButton) {\n          console.log('');\n          addButton.addEventListener('click', (e) => {\n            e.stopPropagation();\n            showAddEventDialog(e);\n          });\n        }\n      } catch (error) {\n        console.error(':', error);\n      }\n      \n      // \n      try {\n        console.log('...');\n        \n        // \n        await loadEvents().catch(err => {\n          console.error(':', err);\n          return [];\n        });\n        \n        console.log('');\n      } catch (error) {\n        console.error(':', error);\n      }\n    };\n    \n    // \n    watch(() => route.fullPath, (newPath) => {\n      if (newPath === '/calendar') {\n        console.log('');\n        // DOM\n        setTimeout(() => {\n          forceRefresh();\n        }, 100);\n      }\n    });\n    \n    // \n    watch(() => calendarView.value, (newVal) => {\n      console.log(':', newVal)\n      nextTick(() => loadEvents())\n    })\n    \n    // \n    watch(() => currentDate.value, (newVal) => {\n      console.log(':', newVal.toLocaleDateString())\n      nextTick(() => loadEvents())\n    })\n    \n    const { proxy } = getCurrentInstance();\n    const emitter = proxy.emitter;\n    \n    onMounted(() => {\n      console.log('Calendar');\n      isComponentMounted.value = true\n      \n      // DOM\n      setTimeout(() => {\n        loadEvents()\n        console.log('')\n      }, 50)\n    \n      // \n      const observer = new IntersectionObserver((entries) => {\n        entries.forEach(entry => {\n          if (entry.isIntersecting) {\n            console.log('Calendar')\n            // \n            if (events.value.length === 0) {\n              console.log('')\n              loadEvents()\n            }\n          }\n        })\n    })\n    \n      // \n      const calendarEl = document.querySelector('.calendar-container')\n      if (calendarEl) {\n        observer.observe(calendarEl)\n      }\n      \n      // \n      const addButton = document.querySelector('.action-controls .el-button')\n      if (addButton) {\n        console.log('')\n        addButton.addEventListener('click', (e) => {\n          e.stopPropagation()\n          showAddEventDialog(e)\n        })\n      }\n\n      // \n      console.log('');\n      emitter.on('refreshCalendar', loadEvents);\n    })\n\n    onUnmounted(() => {\n      // \n      console.log('');\n      emitter.off('refreshCalendar', loadEvents);\n    });\n    \n    // keep-alive\n    onActivated(() => {\n      console.log('Calendar');\n      // \n      forceRefresh();\n    });\n    \n    onBeforeUnmount(() => {\n      // \n    })\n    \n    return {\n      calendarView,\n      currentDate,\n      currentDateLabel,\n      weekDays,\n      days,\n      weekDates,\n      dayEvents,\n      addEventDialogVisible,\n      eventDetailsDialogVisible,\n      editEventDialogVisible,\n      newEvent,\n      selectedEvent,\n      editingEvent,\n      addEventFormRef,\n      editEventFormRef,\n      rules,\n      today,\n      prev,\n      next,\n      selectDay,\n      showAddEventDialog,\n      addEvent,\n      showEventDetails,\n      showEditEventDialog,\n      saveEditEvent,\n      deleteEvent,\n      calcEventTop,\n      calcEventHeight,\n      formatEventTime,\n      formatEventDateTime,\n      formatReminder,\n      // Element Plus \n      ArrowLeft,\n      ArrowRight,\n      Plus,\n      handleStartTimeChange,\n      eventTypeColor,\n      eventPreview,\n      showEventPreview,\n      hideEventPreview,\n      allEventsDialog,\n      showAllEvents,\n      allDayEvents,\n      dayEventGroups,\n      organizeOverlappingEvents,\n      dragStart,\n      dragEnd,\n      startResize,\n      allEventsForDialog,\n      internalRefreshKey,\n      forceRefresh,\n    }\n  }\n}\n</script>\n\n<style scoped>\n.calendar-container {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.calendar-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 15px 20px;\n  border-bottom: 1px solid var(--border-color);\n}\n\n.date-controls {\n  display: flex;\n  align-items: center;\n}\n\n.date-nav {\n  display: flex;\n  align-items: center;\n  margin-left: 15px;\n}\n\n.current-date {\n  margin: 0 15px;\n  font-size: 16px;\n  font-weight: 500;\n  color: var(--text-color);\n}\n\n.calendar-main {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n}\n\n.calendar-weekdays {\n  display: grid;\n  grid-template-columns: repeat(7, 1fr);\n  background-color: var(--bg-color-secondary);\n  padding: 10px 0;\n  border-bottom: 1px solid var(--border-color);\n}\n\n.weekday {\n  text-align: center;\n  font-weight: 500;\n  color: var(--text-color-secondary);\n}\n\n.calendar-days {\n  flex: 1;\n  display: grid;\n  grid-template-columns: repeat(7, 1fr);\n  grid-template-rows: repeat(6, 1fr);\n}\n\n.calendar-day {\n  border-right: 1px solid var(--border-color);\n  border-bottom: 1px solid var(--border-color);\n  padding: 5px;\n  overflow: hidden;\n  background-color: var(--bg-color);\n}\n\n.calendar-day:nth-child(7n) {\n  border-right: none;\n}\n\n.calendar-day.today {\n  background-color: var(--bg-color-tertiary);\n}\n\n.calendar-day.other-month {\n  opacity: 0.5;\n}\n\n.day-number {\n  font-size: 14px;\n  font-weight: 500;\n  color: var(--text-color);\n  margin-bottom: 5px;\n}\n\n.calendar-day.today .day-number {\n  color: var(--primary-color);\n}\n\n.event-container {\n  font-size: 12px;\n}\n\n.event-item {\n  font-size: 12px;\n  padding: 2px 6px;\n  border-radius: 4px;\n  margin-bottom: 3px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  transition: background-color 0.3s;\n}\n\n.more-events-indicator {\n  font-size: 12px;\n  text-align: center;\n  margin-top: 4px;\n  color: var(--el-color-primary);\n  cursor: pointer;\n  border-radius: 4px;\n  padding: 2px 0;\n  transition: all 0.2s ease-in-out;\n}\n.more-events-indicator:hover {\n  background-color: var(--el-color-primary-light-9);\n  color: var(--el-color-primary-dark-2);\n  font-weight: 500;\n}\n\n.event-color {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  margin-right: 4px;\n  display: inline-block;\n}\n\n/*  */\n.event-blue {\n  background-color: rgba(59, 130, 246, 0.15);\n  color: var(--primary-color);\n  border-left: 3px solid var(--primary-color);\n}\n\n.event-orange {\n  background-color: rgba(250, 140, 22, 0.15);\n  color: #fa8c16;\n  border-left: 3px solid #fa8c16;\n}\n\n.event-green {\n  background-color: rgba(82, 196, 26, 0.15);\n  color: var(--success-color);\n  border-left: 3px solid var(--success-color);\n}\n\n.event-red {\n  background-color: rgba(245, 34, 45, 0.15);\n  color: var(--error-color);\n  border-left: 3px solid var(--error-color);\n}\n\n.event-purple {\n  background-color: rgba(114, 46, 209, 0.15);\n  color: #722ed1;\n  border-left: 3px solid #722ed1;\n}\n\n/*  */\n.calendar-week {\n  display: flex;\n  flex-direction: column;\n  height: 700px;\n  border: 1px solid var(--border-color);\n}\n\n.week-header {\n  display: flex;\n  border-bottom: 1px solid var(--border-color);\n}\n\n.week-time-col {\n  width: 60px;\n  border-right: 1px solid var(--border-color);\n}\n\n.week-day-col {\n  flex: 1;\n  text-align: center;\n  padding: 10px;\n  border-right: 1px solid var(--border-color);\n  background-color: var(--bg-color);\n}\n\n.week-day-col:last-child {\n  border-right: none;\n}\n\n.week-day-col.today {\n  background-color: var(--bg-color-tertiary);\n}\n\n.week-day-name {\n  font-weight: 500;\n  color: var(--text-color);\n  margin-bottom: 5px;\n}\n\n.week-day-date {\n  color: var(--text-color-secondary);\n}\n\n.week-body {\n  display: flex;\n  flex: 1;\n  overflow-y: auto;\n  background-color: var(--bg-color);\n}\n\n.week-time-scale {\n  width: 60px;\n  border-right: 1px solid var(--border-color);\n  flex-shrink: 0;\n}\n\n.time-slot {\n  height: 60px;\n  padding: 2px 5px;\n  font-size: 12px;\n  text-align: right;\n  color: var(--text-color-tertiary);\n  border-bottom: 1px solid var(--border-color);\n}\n\n.week-events-container {\n  display: flex;\n  flex: 1;\n}\n\n.week-day-events {\n  flex: 1;\n  position: relative;\n  border-right: 1px solid var(--border-color);\n  background-color: var(--bg-color);\n}\n\n.week-day-events:last-child {\n  border-right: none;\n}\n\n.week-all-day-events {\n  display: none;\n}\n\n.week-event-group {\n  position: absolute;\n  height: 100%;\n  top: 0;\n}\n\n.week-event {\n  position: absolute;\n  width: 94%;\n  left: 3%;\n  border-radius: 4px;\n  padding: 5px;\n  font-size: 12px;\n  overflow: hidden;\n  cursor: pointer;\n  z-index: 1;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  transition: all 0.2s ease;\n}\n\n.week-event:hover {\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\n  transform: translateY(-1px);\n}\n\n.week-event-title {\n  font-weight: 500;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  margin-left: 12px;\n  margin-top: -12px;\n}\n\n.week-event-time {\n  font-size: 11px;\n  margin-top: 2px;\n  color: rgba(0, 0, 0, 0.6);\n}\n\n.all-day-event-title {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  margin-left: 4px;\n}\n\n/*  */\n.calendar-day-view {\n  display: flex;\n  flex-direction: column;\n  height: 700px;\n  border: 1px solid var(--border-color);\n}\n\n.day-header {\n  padding: 10px;\n  border-bottom: 1px solid var(--border-color);\n  background-color: var(--bg-color-tertiary);\n}\n\n.day-date {\n  font-size: 16px;\n  font-weight: 500;\n  color: var(--text-color);\n}\n\n.day-body {\n  display: flex;\n  flex: 1;\n  overflow-y: auto;\n  background-color: var(--bg-color);\n}\n\n.day-time-scale {\n  width: 60px;\n  border-right: 1px solid var(--border-color);\n  flex-shrink: 0;\n}\n\n.day-events-container {\n  flex: 1;\n  position: relative;\n}\n\n.day-all-day-events {\n  display: none;\n}\n\n.day-event-group {\n  position: absolute;\n  height: 100%;\n  top: 0;\n}\n\n.day-event {\n  position: absolute;\n  width: 94%;\n  left: 3%;\n  border-radius: 4px;\n  padding: 8px;\n  font-size: 13px;\n  overflow: hidden;\n  cursor: pointer;\n  z-index: 1;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  transition: all 0.2s ease;\n}\n\n.day-event:hover {\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\n  transform: translateY(-1px);\n}\n\n.day-event-title {\n  font-weight: 500;\n  margin-bottom: 5px;\n  margin-left: 12px;\n  margin-top: -12px;\n}\n\n.day-event-time {\n  font-size: 12px;\n  margin-bottom: 5px;\n  color: rgba(0, 0, 0, 0.6);\n}\n\n.day-event-location {\n  font-size: 12px;\n  color: #409EFF;\n}\n\n/*  */\n.event-details {\n  margin-top: 10px;\n}\n\n.event-detail-item {\n  display: flex;\n  margin-bottom: 15px;\n  align-items: flex-start;\n}\n\n.event-detail-item i {\n  margin-right: 10px;\n  font-size: 16px;\n  color: var(--text-color-tertiary);\n}\n\n.event-description {\n  white-space: pre-line;\n}\n\n/*  */\n:deep(.calendar-dialog) {\n  .el-dialog {\n    background-color: var(--bg-color);\n    \n    .el-dialog__header {\n      color: var(--text-color);\n      background-color: var(--bg-color);\n      border-bottom: 1px solid var(--border-color);\n    }\n    \n    .el-dialog__body {\n      color: var(--text-color);\n      background-color: var(--bg-color);\n    }\n    \n    .el-dialog__footer {\n      background-color: var(--bg-color);\n      border-top: 1px solid var(--border-color);\n    }\n  }\n  \n  .el-form-item__label {\n    color: var(--text-color);\n  }\n  \n  .el-input__wrapper {\n    background-color: var(--bg-color-tertiary) !important;\n    box-shadow: 0 0 0 1px var(--border-color) inset !important;\n  }\n  \n  .el-input__inner {\n    background-color: transparent !important;\n    color: var(--text-color) !important;\n  }\n  \n  .el-textarea__wrapper {\n    background-color: var(--bg-color-tertiary) !important;\n    box-shadow: 0 0 0 1px var(--border-color) inset !important;\n  }\n  \n  .el-textarea__inner {\n    background-color: transparent !important;\n    color: var(--text-color) !important;\n  }\n  \n  .el-select-dropdown {\n    background-color: var(--bg-color-secondary) !important;\n    border-color: var(--border-color) !important;\n    \n    .el-select-dropdown__item {\n      color: var(--text-color) !important;\n      \n      &.hover, &:hover {\n        background-color: var(--hover-color) !important;\n      }\n      \n      &.selected {\n        color: var(--primary-color) !important;\n        background-color: var(--hover-color) !important;\n      }\n    }\n  }\n  \n  /*  */\n  .el-date-picker, .el-date-range-picker {\n    background-color: var(--bg-color) !important;\n    color: var(--text-color) !important;\n    \n    .el-picker-panel__content, .el-date-table {\n      background-color: var(--bg-color-secondary) !important;\n      color: var(--text-color) !important;\n    }\n    \n    .el-date-range-picker__time-header,\n    .el-date-range-picker__header,\n    .el-date-picker__header,\n    .el-picker-panel__footer {\n      background-color: var(--bg-color-secondary) !important;\n      color: var(--text-color) !important;\n      border-color: var(--border-color) !important;\n    }\n    \n    .el-date-table th {\n      color: var(--text-color-secondary) !important;\n      border-bottom-color: var(--border-color) !important;\n    }\n    \n    .el-date-table td {\n      color: var(--text-color) !important;\n    }\n    \n    .el-date-table td.available:hover {\n      color: var(--primary-color) !important;\n    }\n    \n    .el-date-table td.current:not(.disabled) {\n      color: #fff !important;\n      background-color: var(--primary-color) !important;\n    }\n    \n    .el-date-table td.today {\n      color: var(--primary-color) !important;\n    }\n    \n    .el-date-table td.prev-month,\n    .el-date-table td.next-month {\n      color: var(--text-color-tertiary) !important;\n    }\n    \n    .el-time-panel {\n      background-color: var(--bg-color) !important;\n      border-color: var(--border-color) !important;\n      \n      .el-time-panel__content::before,\n      .el-time-panel__content::after {\n        background-color: var(--border-color) !important;\n      }\n      \n      .el-time-panel__footer {\n        border-top-color: var(--border-color) !important;\n      }\n      \n      .el-time-spinner__item {\n        color: var(--text-color) !important;\n      }\n      \n      .el-time-spinner__item.active:not(.disabled) {\n        color: var(--primary-color) !important;\n        font-weight: bold;\n      }\n    }\n    \n    .el-picker-panel__icon-btn {\n      color: var(--text-color) !important;\n    }\n    \n    .el-date-picker__header-label {\n      color: var(--text-color) !important;\n    }\n  }\n}\n\n/*  */\n:deep(.el-select-dropdown) {\n  background-color: var(--bg-color-secondary) !important;\n  border-color: var(--border-color) !important;\n  \n  .el-select-dropdown__item {\n    color: var(--text-color) !important;\n    \n    &.hover, &:hover {\n      background-color: var(--hover-color) !important;\n    }\n    \n    &.selected {\n      color: var(--primary-color) !important;\n      background-color: var(--hover-color) !important;\n    }\n  }\n}\n\n:deep(.el-popper) {\n  background-color: var(--bg-color-secondary) !important;\n  border-color: var(--border-color) !important;\n  \n  .el-popper__arrow::before {\n    background-color: var(--bg-color-secondary) !important;\n    border-color: var(--border-color) !important;\n  }\n  \n  .el-select-dropdown__item {\n    color: var(--text-color) !important;\n    \n    &.hover, &:hover {\n      background-color: var(--hover-color) !important;\n    }\n    \n    &.selected {\n      color: var(--primary-color) !important;\n      background-color: var(--hover-color) !important;\n    }\n  }\n}\n\n/* Element Plus */\nbody.is-dark {\n  --el-select-dropdown-bg-color: var(--bg-color-secondary) !important;\n  --el-bg-color: var(--bg-color-secondary) !important;\n  --el-bg-color-overlay: var(--bg-color-secondary) !important;\n  --el-text-color-primary: var(--text-color) !important;\n  --el-border-color: var(--border-color) !important;\n  --el-border-color-lighter: var(--border-color) !important;\n  \n  .el-popper {\n    background-color: var(--bg-color-secondary) !important;\n    border-color: var(--border-color) !important;\n    \n    .el-popper__arrow::before {\n      background-color: var(--bg-color-secondary) !important;\n      border-color: var(--border-color) !important;\n    }\n  }\n  \n  .el-select-dropdown {\n    background-color: var(--bg-color-secondary) !important;\n    \n    .el-select-dropdown__item {\n      color: var(--text-color) !important;\n      \n      &.hover, &:hover {\n        background-color: var(--hover-color) !important;\n      }\n      \n      &.selected {\n        color: var(--primary-color) !important;\n        background-color: var(--hover-color) !important;\n      }\n    }\n  }\n}\n\n.event-preview-pop {\n  min-width: 180px;\n  background: #fff;\n  box-shadow: 0 2px 8px rgba(0,0,0,0.15);\n  border-radius: 4px;\n  padding: 8px 12px;\n  position: fixed;\n  pointer-events: none;\n  font-size: 13px;\n  color: #333;\n}\n\n.event-preview-title {\n  font-weight: bold;\n  margin-bottom: 4px;\n}\n\n.event-preview-time {\n  color: #888;\n  font-size: 12px;\n  margin-bottom: 2px;\n}\n\n.event-preview-location {\n  color: #409EFF;\n  font-size: 12px;\n  margin-bottom: 2px;\n}\n\n.event-preview-desc {\n  color: #666;\n  font-size: 12px;\n}\n\n.all-event-title {\n  font-weight: bold;\n  margin-bottom: 2px;\n}\n\n.all-event-time {\n  color: #888;\n  font-size: 12px;\n}\n\n.all-event-location {\n  color: #409EFF;\n  font-size: 12px;\n}\n\n.all-event-desc {\n  color: #666;\n  font-size: 12px;\n}\n\n/*  */\n.drag-preview {\n  position: absolute;\n  background-color: rgba(64, 158, 255, 0.3);\n  border: 2px dashed #409EFF;\n  border-radius: 4px;\n  left: 10%;\n  width: 80%;\n  z-index: 100;\n  color: #409EFF;\n  font-size: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  pointer-events: none;\n}\n\n.drag-image {\n  position: absolute;\n  top: -1000px;\n  left: -1000px;\n  width: 100px;\n  height: 30px;\n  background: #409EFF;\n  color: white;\n  padding: 5px;\n  border-radius: 3px;\n  font-size: 12px;\n  opacity: 0.8;\n}\n\n.resize-handle {\n  position: absolute;\n  width: 100%;\n  height: 6px;\n  bottom: 0;\n  left: 0;\n  cursor: ns-resize;\n  opacity: 0;\n  background-color: rgba(0, 0, 0, 0.1);\n  transition: opacity 0.2s;\n}\n\n.week-event:hover .resize-handle,\n.day-event:hover .resize-handle {\n  opacity: 1;\n}\n\n.week-event.resizing,\n.day-event.resizing {\n  opacity: 0.7;\n  z-index: 100;\n}\n\n/*  */\n.week-day-events.drag-over,\n.day-events-container.drag-over {\n  background-color: rgba(64, 158, 255, 0.05);\n}\n\n/*  */\n.current-time-line,\n.current-time-dot,\n.current-time-line-inner,\n.current-time-label {\n  display: none !important;\n}\n</style> "],"mappings":"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","ignoreList":[]}]}