{"remainingRequest":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\quill\\modules\\syntax.js","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\quill\\modules\\syntax.js","mtime":1751792162305},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\babel.config.js","mtime":1748077811200},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1746431219000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5yZWR1Y2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLnJlZHVjZS5qcyI7CmltcG9ydCBEZWx0YSBmcm9tICdxdWlsbC1kZWx0YSc7CmltcG9ydCB7IENsYXNzQXR0cmlidXRvciwgU2NvcGUgfSBmcm9tICdwYXJjaG1lbnQnOwppbXBvcnQgSW5saW5lIGZyb20gJy4uL2Jsb3RzL2lubGluZS5qcyc7CmltcG9ydCBRdWlsbCBmcm9tICcuLi9jb3JlL3F1aWxsLmpzJzsKaW1wb3J0IE1vZHVsZSBmcm9tICcuLi9jb3JlL21vZHVsZS5qcyc7CmltcG9ydCB7IGJsb2NrRGVsdGEgfSBmcm9tICcuLi9ibG90cy9ibG9jay5qcyc7CmltcG9ydCBCcmVha0Jsb3QgZnJvbSAnLi4vYmxvdHMvYnJlYWsuanMnOwppbXBvcnQgQ3Vyc29yQmxvdCBmcm9tICcuLi9ibG90cy9jdXJzb3IuanMnOwppbXBvcnQgVGV4dEJsb3QsIHsgZXNjYXBlVGV4dCB9IGZyb20gJy4uL2Jsb3RzL3RleHQuanMnOwppbXBvcnQgQ29kZUJsb2NrLCB7IENvZGVCbG9ja0NvbnRhaW5lciB9IGZyb20gJy4uL2Zvcm1hdHMvY29kZS5qcyc7CmltcG9ydCB7IHRyYXZlcnNlIH0gZnJvbSAnLi9jbGlwYm9hcmQuanMnOwpjb25zdCBUb2tlbkF0dHJpYnV0b3IgPSBuZXcgQ2xhc3NBdHRyaWJ1dG9yKCdjb2RlLXRva2VuJywgJ2hsanMnLCB7CiAgc2NvcGU6IFNjb3BlLklOTElORQp9KTsKY2xhc3MgQ29kZVRva2VuIGV4dGVuZHMgSW5saW5lIHsKICBzdGF0aWMgZm9ybWF0cyhub2RlLCBzY3JvbGwpIHsKICAgIHdoaWxlIChub2RlICE9IG51bGwgJiYgbm9kZSAhPT0gc2Nyb2xsLmRvbU5vZGUpIHsKICAgICAgaWYgKG5vZGUuY2xhc3NMaXN0ICYmIG5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKENvZGVCbG9jay5jbGFzc05hbWUpKSB7CiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcgogICAgICAgIHJldHVybiBzdXBlci5mb3JtYXRzKG5vZGUsIHNjcm9sbCk7CiAgICAgIH0KICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcgogICAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlOwogICAgfQogICAgcmV0dXJuIHVuZGVmaW5lZDsKICB9CiAgY29uc3RydWN0b3Ioc2Nyb2xsLCBkb21Ob2RlLCB2YWx1ZSkgewogICAgLy8gQHRzLWV4cGVjdC1lcnJvcgogICAgc3VwZXIoc2Nyb2xsLCBkb21Ob2RlLCB2YWx1ZSk7CiAgICBUb2tlbkF0dHJpYnV0b3IuYWRkKHRoaXMuZG9tTm9kZSwgdmFsdWUpOwogIH0KICBmb3JtYXQoZm9ybWF0LCB2YWx1ZSkgewogICAgaWYgKGZvcm1hdCAhPT0gQ29kZVRva2VuLmJsb3ROYW1lKSB7CiAgICAgIHN1cGVyLmZvcm1hdChmb3JtYXQsIHZhbHVlKTsKICAgIH0gZWxzZSBpZiAodmFsdWUpIHsKICAgICAgVG9rZW5BdHRyaWJ1dG9yLmFkZCh0aGlzLmRvbU5vZGUsIHZhbHVlKTsKICAgIH0gZWxzZSB7CiAgICAgIFRva2VuQXR0cmlidXRvci5yZW1vdmUodGhpcy5kb21Ob2RlKTsKICAgICAgdGhpcy5kb21Ob2RlLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5zdGF0aWNzLmNsYXNzTmFtZSk7CiAgICB9CiAgfQogIG9wdGltaXplKCkgewogICAgLy8gQHRzLWV4cGVjdC1lcnJvcgogICAgc3VwZXIub3B0aW1pemUoLi4uYXJndW1lbnRzKTsKICAgIGlmICghVG9rZW5BdHRyaWJ1dG9yLnZhbHVlKHRoaXMuZG9tTm9kZSkpIHsKICAgICAgdGhpcy51bndyYXAoKTsKICAgIH0KICB9Cn0KQ29kZVRva2VuLmJsb3ROYW1lID0gJ2NvZGUtdG9rZW4nOwpDb2RlVG9rZW4uY2xhc3NOYW1lID0gJ3FsLXRva2VuJzsKY2xhc3MgU3ludGF4Q29kZUJsb2NrIGV4dGVuZHMgQ29kZUJsb2NrIHsKICBzdGF0aWMgY3JlYXRlKHZhbHVlKSB7CiAgICBjb25zdCBkb21Ob2RlID0gc3VwZXIuY3JlYXRlKHZhbHVlKTsKICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7CiAgICAgIGRvbU5vZGUuc2V0QXR0cmlidXRlKCdkYXRhLWxhbmd1YWdlJywgdmFsdWUpOwogICAgfQogICAgcmV0dXJuIGRvbU5vZGU7CiAgfQogIHN0YXRpYyBmb3JtYXRzKGRvbU5vZGUpIHsKICAgIC8vIEB0cy1leHBlY3QtZXJyb3IKICAgIHJldHVybiBkb21Ob2RlLmdldEF0dHJpYnV0ZSgnZGF0YS1sYW5ndWFnZScpIHx8ICdwbGFpbic7CiAgfQogIHN0YXRpYyByZWdpc3RlcigpIHt9IC8vIFN5bnRheCBtb2R1bGUgd2lsbCByZWdpc3RlcgoKICBmb3JtYXQobmFtZSwgdmFsdWUpIHsKICAgIGlmIChuYW1lID09PSB0aGlzLnN0YXRpY3MuYmxvdE5hbWUgJiYgdmFsdWUpIHsKICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcgogICAgICB0aGlzLmRvbU5vZGUuc2V0QXR0cmlidXRlKCdkYXRhLWxhbmd1YWdlJywgdmFsdWUpOwogICAgfSBlbHNlIHsKICAgICAgc3VwZXIuZm9ybWF0KG5hbWUsIHZhbHVlKTsKICAgIH0KICB9CiAgcmVwbGFjZVdpdGgobmFtZSwgdmFsdWUpIHsKICAgIHRoaXMuZm9ybWF0QXQoMCwgdGhpcy5sZW5ndGgoKSwgQ29kZVRva2VuLmJsb3ROYW1lLCBmYWxzZSk7CiAgICByZXR1cm4gc3VwZXIucmVwbGFjZVdpdGgobmFtZSwgdmFsdWUpOwogIH0KfQpjbGFzcyBTeW50YXhDb2RlQmxvY2tDb250YWluZXIgZXh0ZW5kcyBDb2RlQmxvY2tDb250YWluZXIgewogIGF0dGFjaCgpIHsKICAgIHN1cGVyLmF0dGFjaCgpOwogICAgdGhpcy5mb3JjZU5leHQgPSBmYWxzZTsKICAgIC8vIEB0cy1leHBlY3QtZXJyb3IKICAgIHRoaXMuc2Nyb2xsLmVtaXRNb3VudCh0aGlzKTsKICB9CiAgZm9ybWF0KG5hbWUsIHZhbHVlKSB7CiAgICBpZiAobmFtZSA9PT0gU3ludGF4Q29kZUJsb2NrLmJsb3ROYW1lKSB7CiAgICAgIHRoaXMuZm9yY2VOZXh0ID0gdHJ1ZTsKICAgICAgdGhpcy5jaGlsZHJlbi5mb3JFYWNoKGNoaWxkID0+IHsKICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yCiAgICAgICAgY2hpbGQuZm9ybWF0KG5hbWUsIHZhbHVlKTsKICAgICAgfSk7CiAgICB9CiAgfQogIGZvcm1hdEF0KGluZGV4LCBsZW5ndGgsIG5hbWUsIHZhbHVlKSB7CiAgICBpZiAobmFtZSA9PT0gU3ludGF4Q29kZUJsb2NrLmJsb3ROYW1lKSB7CiAgICAgIHRoaXMuZm9yY2VOZXh0ID0gdHJ1ZTsKICAgIH0KICAgIHN1cGVyLmZvcm1hdEF0KGluZGV4LCBsZW5ndGgsIG5hbWUsIHZhbHVlKTsKICB9CiAgaGlnaGxpZ2h0KGhpZ2hsaWdodCkgewogICAgbGV0IGZvcmNlZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7CiAgICBpZiAodGhpcy5jaGlsZHJlbi5oZWFkID09IG51bGwpIHJldHVybjsKICAgIGNvbnN0IG5vZGVzID0gQXJyYXkuZnJvbSh0aGlzLmRvbU5vZGUuY2hpbGROb2RlcykuZmlsdGVyKG5vZGUgPT4gbm9kZSAhPT0gdGhpcy51aU5vZGUpOwogICAgY29uc3QgdGV4dCA9IGAke25vZGVzLm1hcChub2RlID0+IG5vZGUudGV4dENvbnRlbnQpLmpvaW4oJ1xuJyl9XG5gOwogICAgY29uc3QgbGFuZ3VhZ2UgPSBTeW50YXhDb2RlQmxvY2suZm9ybWF0cyh0aGlzLmNoaWxkcmVuLmhlYWQuZG9tTm9kZSk7CiAgICBpZiAoZm9yY2VkIHx8IHRoaXMuZm9yY2VOZXh0IHx8IHRoaXMuY2FjaGVkVGV4dCAhPT0gdGV4dCkgewogICAgICBpZiAodGV4dC50cmltKCkubGVuZ3RoID4gMCB8fCB0aGlzLmNhY2hlZFRleHQgPT0gbnVsbCkgewogICAgICAgIGNvbnN0IG9sZERlbHRhID0gdGhpcy5jaGlsZHJlbi5yZWR1Y2UoKGRlbHRhLCBjaGlsZCkgPT4gewogICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcgogICAgICAgICAgcmV0dXJuIGRlbHRhLmNvbmNhdChibG9ja0RlbHRhKGNoaWxkLCBmYWxzZSkpOwogICAgICAgIH0sIG5ldyBEZWx0YSgpKTsKICAgICAgICBjb25zdCBkZWx0YSA9IGhpZ2hsaWdodCh0ZXh0LCBsYW5ndWFnZSk7CiAgICAgICAgb2xkRGVsdGEuZGlmZihkZWx0YSkucmVkdWNlKChpbmRleCwgX3JlZikgPT4gewogICAgICAgICAgbGV0IHsKICAgICAgICAgICAgcmV0YWluLAogICAgICAgICAgICBhdHRyaWJ1dGVzCiAgICAgICAgICB9ID0gX3JlZjsKICAgICAgICAgIC8vIFNob3VsZCBiZSBhbGwgcmV0YWlucwogICAgICAgICAgaWYgKCFyZXRhaW4pIHJldHVybiBpbmRleDsKICAgICAgICAgIGlmIChhdHRyaWJ1dGVzKSB7CiAgICAgICAgICAgIE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmZvckVhY2goZm9ybWF0ID0+IHsKICAgICAgICAgICAgICBpZiAoW1N5bnRheENvZGVCbG9jay5ibG90TmFtZSwgQ29kZVRva2VuLmJsb3ROYW1lXS5pbmNsdWRlcyhmb3JtYXQpKSB7CiAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yCiAgICAgICAgICAgICAgICB0aGlzLmZvcm1hdEF0KGluZGV4LCByZXRhaW4sIGZvcm1hdCwgYXR0cmlidXRlc1tmb3JtYXRdKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcgogICAgICAgICAgcmV0dXJuIGluZGV4ICsgcmV0YWluOwogICAgICAgIH0sIDApOwogICAgICB9CiAgICAgIHRoaXMuY2FjaGVkVGV4dCA9IHRleHQ7CiAgICAgIHRoaXMuZm9yY2VOZXh0ID0gZmFsc2U7CiAgICB9CiAgfQogIGh0bWwoaW5kZXgsIGxlbmd0aCkgewogICAgY29uc3QgW2NvZGVCbG9ja10gPSB0aGlzLmNoaWxkcmVuLmZpbmQoaW5kZXgpOwogICAgY29uc3QgbGFuZ3VhZ2UgPSBjb2RlQmxvY2sgPyBTeW50YXhDb2RlQmxvY2suZm9ybWF0cyhjb2RlQmxvY2suZG9tTm9kZSkgOiAncGxhaW4nOwogICAgcmV0dXJuIGA8cHJlIGRhdGEtbGFuZ3VhZ2U9IiR7bGFuZ3VhZ2V9Ij5cbiR7ZXNjYXBlVGV4dCh0aGlzLmNvZGUoaW5kZXgsIGxlbmd0aCkpfVxuPC9wcmU+YDsKICB9CiAgb3B0aW1pemUoY29udGV4dCkgewogICAgc3VwZXIub3B0aW1pemUoY29udGV4dCk7CiAgICBpZiAodGhpcy5wYXJlbnQgIT0gbnVsbCAmJiB0aGlzLmNoaWxkcmVuLmhlYWQgIT0gbnVsbCAmJiB0aGlzLnVpTm9kZSAhPSBudWxsKSB7CiAgICAgIGNvbnN0IGxhbmd1YWdlID0gU3ludGF4Q29kZUJsb2NrLmZvcm1hdHModGhpcy5jaGlsZHJlbi5oZWFkLmRvbU5vZGUpOwogICAgICAvLyBAdHMtZXhwZWN0LWVycm9yCiAgICAgIGlmIChsYW5ndWFnZSAhPT0gdGhpcy51aU5vZGUudmFsdWUpIHsKICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yCiAgICAgICAgdGhpcy51aU5vZGUudmFsdWUgPSBsYW5ndWFnZTsKICAgICAgfQogICAgfQogIH0KfQpTeW50YXhDb2RlQmxvY2tDb250YWluZXIuYWxsb3dlZENoaWxkcmVuID0gW1N5bnRheENvZGVCbG9ja107ClN5bnRheENvZGVCbG9jay5yZXF1aXJlZENvbnRhaW5lciA9IFN5bnRheENvZGVCbG9ja0NvbnRhaW5lcjsKU3ludGF4Q29kZUJsb2NrLmFsbG93ZWRDaGlsZHJlbiA9IFtDb2RlVG9rZW4sIEN1cnNvckJsb3QsIFRleHRCbG90LCBCcmVha0Jsb3RdOwpjb25zdCBoaWdobGlnaHQgPSAobGliLCBsYW5ndWFnZSwgdGV4dCkgPT4gewogIGlmICh0eXBlb2YgbGliLnZlcnNpb25TdHJpbmcgPT09ICdzdHJpbmcnKSB7CiAgICBjb25zdCBtYWpvclZlcnNpb24gPSBsaWIudmVyc2lvblN0cmluZy5zcGxpdCgnLicpWzBdOwogICAgaWYgKHBhcnNlSW50KG1ham9yVmVyc2lvbiwgMTApID49IDExKSB7CiAgICAgIHJldHVybiBsaWIuaGlnaGxpZ2h0KHRleHQsIHsKICAgICAgICBsYW5ndWFnZQogICAgICB9KS52YWx1ZTsKICAgIH0KICB9CiAgcmV0dXJuIGxpYi5oaWdobGlnaHQobGFuZ3VhZ2UsIHRleHQpLnZhbHVlOwp9OwpjbGFzcyBTeW50YXggZXh0ZW5kcyBNb2R1bGUgewogIHN0YXRpYyByZWdpc3RlcigpIHsKICAgIFF1aWxsLnJlZ2lzdGVyKENvZGVUb2tlbiwgdHJ1ZSk7CiAgICBRdWlsbC5yZWdpc3RlcihTeW50YXhDb2RlQmxvY2ssIHRydWUpOwogICAgUXVpbGwucmVnaXN0ZXIoU3ludGF4Q29kZUJsb2NrQ29udGFpbmVyLCB0cnVlKTsKICB9CiAgY29uc3RydWN0b3IocXVpbGwsIG9wdGlvbnMpIHsKICAgIHN1cGVyKHF1aWxsLCBvcHRpb25zKTsKICAgIGlmICh0aGlzLm9wdGlvbnMuaGxqcyA9PSBudWxsKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignU3ludGF4IG1vZHVsZSByZXF1aXJlcyBoaWdobGlnaHQuanMuIFBsZWFzZSBpbmNsdWRlIHRoZSBsaWJyYXJ5IG9uIHRoZSBwYWdlIGJlZm9yZSBRdWlsbC4nKTsKICAgIH0KICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgRml4IG1lIGxhdGVyCiAgICB0aGlzLmxhbmd1YWdlcyA9IHRoaXMub3B0aW9ucy5sYW5ndWFnZXMucmVkdWNlKChtZW1vLCBfcmVmMikgPT4gewogICAgICBsZXQgewogICAgICAgIGtleQogICAgICB9ID0gX3JlZjI7CiAgICAgIG1lbW9ba2V5XSA9IHRydWU7CiAgICAgIHJldHVybiBtZW1vOwogICAgfSwge30pOwogICAgdGhpcy5oaWdobGlnaHRCbG90ID0gdGhpcy5oaWdobGlnaHRCbG90LmJpbmQodGhpcyk7CiAgICB0aGlzLmluaXRMaXN0ZW5lcigpOwogICAgdGhpcy5pbml0VGltZXIoKTsKICB9CiAgaW5pdExpc3RlbmVyKCkgewogICAgdGhpcy5xdWlsbC5vbihRdWlsbC5ldmVudHMuU0NST0xMX0JMT1RfTU9VTlQsIGJsb3QgPT4gewogICAgICBpZiAoIShibG90IGluc3RhbmNlb2YgU3ludGF4Q29kZUJsb2NrQ29udGFpbmVyKSkgcmV0dXJuOwogICAgICBjb25zdCBzZWxlY3QgPSB0aGlzLnF1aWxsLnJvb3Qub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWxlY3QnKTsKICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBGaXggbWUgbGF0ZXIKICAgICAgdGhpcy5vcHRpb25zLmxhbmd1YWdlcy5mb3JFYWNoKF9yZWYzID0+IHsKICAgICAgICBsZXQgewogICAgICAgICAga2V5LAogICAgICAgICAgbGFiZWwKICAgICAgICB9ID0gX3JlZjM7CiAgICAgICAgY29uc3Qgb3B0aW9uID0gc2VsZWN0Lm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7CiAgICAgICAgb3B0aW9uLnRleHRDb250ZW50ID0gbGFiZWw7CiAgICAgICAgb3B0aW9uLnNldEF0dHJpYnV0ZSgndmFsdWUnLCBrZXkpOwogICAgICAgIHNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pOwogICAgICB9KTsKICAgICAgc2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHsKICAgICAgICBibG90LmZvcm1hdChTeW50YXhDb2RlQmxvY2suYmxvdE5hbWUsIHNlbGVjdC52YWx1ZSk7CiAgICAgICAgdGhpcy5xdWlsbC5yb290LmZvY3VzKCk7IC8vIFByZXZlbnQgc2Nyb2xsaW5nCiAgICAgICAgdGhpcy5oaWdobGlnaHQoYmxvdCwgdHJ1ZSk7CiAgICAgIH0pOwogICAgICBpZiAoYmxvdC51aU5vZGUgPT0gbnVsbCkgewogICAgICAgIGJsb3QuYXR0YWNoVUkoc2VsZWN0KTsKICAgICAgICBpZiAoYmxvdC5jaGlsZHJlbi5oZWFkKSB7CiAgICAgICAgICBzZWxlY3QudmFsdWUgPSBTeW50YXhDb2RlQmxvY2suZm9ybWF0cyhibG90LmNoaWxkcmVuLmhlYWQuZG9tTm9kZSk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9CiAgaW5pdFRpbWVyKCkgewogICAgbGV0IHRpbWVyID0gbnVsbDsKICAgIHRoaXMucXVpbGwub24oUXVpbGwuZXZlbnRzLlNDUk9MTF9PUFRJTUlaRSwgKCkgPT4gewogICAgICBpZiAodGltZXIpIHsKICAgICAgICBjbGVhclRpbWVvdXQodGltZXIpOwogICAgICB9CiAgICAgIHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdGhpcy5oaWdobGlnaHQoKTsKICAgICAgICB0aW1lciA9IG51bGw7CiAgICAgIH0sIHRoaXMub3B0aW9ucy5pbnRlcnZhbCk7CiAgICB9KTsKICB9CiAgaGlnaGxpZ2h0KCkgewogICAgbGV0IGJsb3QgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IG51bGw7CiAgICBsZXQgZm9yY2UgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlOwogICAgaWYgKHRoaXMucXVpbGwuc2VsZWN0aW9uLmNvbXBvc2luZykgcmV0dXJuOwogICAgdGhpcy5xdWlsbC51cGRhdGUoUXVpbGwuc291cmNlcy5VU0VSKTsKICAgIGNvbnN0IHJhbmdlID0gdGhpcy5xdWlsbC5nZXRTZWxlY3Rpb24oKTsKICAgIGNvbnN0IGJsb3RzID0gYmxvdCA9PSBudWxsID8gdGhpcy5xdWlsbC5zY3JvbGwuZGVzY2VuZGFudHMoU3ludGF4Q29kZUJsb2NrQ29udGFpbmVyKSA6IFtibG90XTsKICAgIGJsb3RzLmZvckVhY2goY29udGFpbmVyID0+IHsKICAgICAgY29udGFpbmVyLmhpZ2hsaWdodCh0aGlzLmhpZ2hsaWdodEJsb3QsIGZvcmNlKTsKICAgIH0pOwogICAgdGhpcy5xdWlsbC51cGRhdGUoUXVpbGwuc291cmNlcy5TSUxFTlQpOwogICAgaWYgKHJhbmdlICE9IG51bGwpIHsKICAgICAgdGhpcy5xdWlsbC5zZXRTZWxlY3Rpb24ocmFuZ2UsIFF1aWxsLnNvdXJjZXMuU0lMRU5UKTsKICAgIH0KICB9CiAgaGlnaGxpZ2h0QmxvdCh0ZXh0KSB7CiAgICBsZXQgbGFuZ3VhZ2UgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICdwbGFpbic7CiAgICBsYW5ndWFnZSA9IHRoaXMubGFuZ3VhZ2VzW2xhbmd1YWdlXSA/IGxhbmd1YWdlIDogJ3BsYWluJzsKICAgIGlmIChsYW5ndWFnZSA9PT0gJ3BsYWluJykgewogICAgICByZXR1cm4gZXNjYXBlVGV4dCh0ZXh0KS5zcGxpdCgnXG4nKS5yZWR1Y2UoKGRlbHRhLCBsaW5lLCBpKSA9PiB7CiAgICAgICAgaWYgKGkgIT09IDApIHsKICAgICAgICAgIGRlbHRhLmluc2VydCgnXG4nLCB7CiAgICAgICAgICAgIFtDb2RlQmxvY2suYmxvdE5hbWVdOiBsYW5ndWFnZQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBkZWx0YS5pbnNlcnQobGluZSk7CiAgICAgIH0sIG5ldyBEZWx0YSgpKTsKICAgIH0KICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMucXVpbGwucm9vdC5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoQ29kZUJsb2NrLmNsYXNzTmFtZSk7CiAgICBjb250YWluZXIuaW5uZXJIVE1MID0gaGlnaGxpZ2h0KHRoaXMub3B0aW9ucy5obGpzLCBsYW5ndWFnZSwgdGV4dCk7CiAgICByZXR1cm4gdHJhdmVyc2UodGhpcy5xdWlsbC5zY3JvbGwsIGNvbnRhaW5lciwgWyhub2RlLCBkZWx0YSkgPT4gewogICAgICAvLyBAdHMtZXhwZWN0LWVycm9yCiAgICAgIGNvbnN0IHZhbHVlID0gVG9rZW5BdHRyaWJ1dG9yLnZhbHVlKG5vZGUpOwogICAgICBpZiAodmFsdWUpIHsKICAgICAgICByZXR1cm4gZGVsdGEuY29tcG9zZShuZXcgRGVsdGEoKS5yZXRhaW4oZGVsdGEubGVuZ3RoKCksIHsKICAgICAgICAgIFtDb2RlVG9rZW4uYmxvdE5hbWVdOiB2YWx1ZQogICAgICAgIH0pKTsKICAgICAgfQogICAgICByZXR1cm4gZGVsdGE7CiAgICB9XSwgWyhub2RlLCBkZWx0YSkgPT4gewogICAgICAvLyBAdHMtZXhwZWN0LWVycm9yCiAgICAgIHJldHVybiBub2RlLmRhdGEuc3BsaXQoJ1xuJykucmVkdWNlKChtZW1vLCBub2RlVGV4dCwgaSkgPT4gewogICAgICAgIGlmIChpICE9PSAwKSBtZW1vLmluc2VydCgnXG4nLCB7CiAgICAgICAgICBbQ29kZUJsb2NrLmJsb3ROYW1lXTogbGFuZ3VhZ2UKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gbWVtby5pbnNlcnQobm9kZVRleHQpOwogICAgICB9LCBkZWx0YSk7CiAgICB9XSwgbmV3IFdlYWtNYXAoKSk7CiAgfQp9ClN5bnRheC5ERUZBVUxUUyA9IHsKICBobGpzOiAoKCkgPT4gewogICAgcmV0dXJuIHdpbmRvdy5obGpzOwogIH0pKCksCiAgaW50ZXJ2YWw6IDEwMDAsCiAgbGFuZ3VhZ2VzOiBbewogICAga2V5OiAncGxhaW4nLAogICAgbGFiZWw6ICdQbGFpbicKICB9LCB7CiAgICBrZXk6ICdiYXNoJywKICAgIGxhYmVsOiAnQmFzaCcKICB9LCB7CiAgICBrZXk6ICdjcHAnLAogICAgbGFiZWw6ICdDKysnCiAgfSwgewogICAga2V5OiAnY3MnLAogICAgbGFiZWw6ICdDIycKICB9LCB7CiAgICBrZXk6ICdjc3MnLAogICAgbGFiZWw6ICdDU1MnCiAgfSwgewogICAga2V5OiAnZGlmZicsCiAgICBsYWJlbDogJ0RpZmYnCiAgfSwgewogICAga2V5OiAneG1sJywKICAgIGxhYmVsOiAnSFRNTC9YTUwnCiAgfSwgewogICAga2V5OiAnamF2YScsCiAgICBsYWJlbDogJ0phdmEnCiAgfSwgewogICAga2V5OiAnamF2YXNjcmlwdCcsCiAgICBsYWJlbDogJ0phdmFTY3JpcHQnCiAgfSwgewogICAga2V5OiAnbWFya2Rvd24nLAogICAgbGFiZWw6ICdNYXJrZG93bicKICB9LCB7CiAgICBrZXk6ICdwaHAnLAogICAgbGFiZWw6ICdQSFAnCiAgfSwgewogICAga2V5OiAncHl0aG9uJywKICAgIGxhYmVsOiAnUHl0aG9uJwogIH0sIHsKICAgIGtleTogJ3J1YnknLAogICAgbGFiZWw6ICdSdWJ5JwogIH0sIHsKICAgIGtleTogJ3NxbCcsCiAgICBsYWJlbDogJ1NRTCcKICB9XQp9OwpleHBvcnQgeyBTeW50YXhDb2RlQmxvY2sgYXMgQ29kZUJsb2NrLCBDb2RlVG9rZW4sIFN5bnRheCBhcyBkZWZhdWx0IH07"},{"version":3,"names":["Delta","ClassAttributor","Scope","Inline","Quill","Module","blockDelta","BreakBlot","CursorBlot","TextBlot","escapeText","CodeBlock","CodeBlockContainer","traverse","TokenAttributor","scope","INLINE","CodeToken","formats","node","scroll","domNode","classList","contains","className","parentNode","undefined","constructor","value","add","format","blotName","remove","statics","optimize","arguments","unwrap","SyntaxCodeBlock","create","setAttribute","getAttribute","register","name","replaceWith","formatAt","length","SyntaxCodeBlockContainer","attach","forceNext","emitMount","children","forEach","child","index","highlight","forced","head","nodes","Array","from","childNodes","filter","uiNode","text","map","textContent","join","language","cachedText","trim","oldDelta","reduce","delta","concat","diff","_ref","retain","attributes","Object","keys","includes","html","codeBlock","find","code","context","parent","allowedChildren","requiredContainer","lib","versionString","majorVersion","split","parseInt","Syntax","quill","options","hljs","Error","languages","memo","_ref2","key","highlightBlot","bind","initListener","initTimer","on","events","SCROLL_BLOT_MOUNT","blot","select","root","ownerDocument","createElement","_ref3","label","option","appendChild","addEventListener","focus","attachUI","timer","SCROLL_OPTIMIZE","clearTimeout","setTimeout","interval","force","selection","composing","update","sources","USER","range","getSelection","blots","descendants","container","SILENT","setSelection","line","i","insert","innerHTML","compose","data","nodeText","WeakMap","DEFAULTS","window","default"],"sources":["../../src/modules/syntax.ts"],"sourcesContent":["import Delta from 'quill-delta';\nimport { ClassAttributor, Scope } from 'parchment';\nimport type { Blot, ScrollBlot } from 'parchment';\nimport Inline from '../blots/inline.js';\nimport Quill from '../core/quill.js';\nimport Module from '../core/module.js';\nimport { blockDelta } from '../blots/block.js';\nimport BreakBlot from '../blots/break.js';\nimport CursorBlot from '../blots/cursor.js';\nimport TextBlot, { escapeText } from '../blots/text.js';\nimport CodeBlock, { CodeBlockContainer } from '../formats/code.js';\nimport { traverse } from './clipboard.js';\n\nconst TokenAttributor = new ClassAttributor('code-token', 'hljs', {\n  scope: Scope.INLINE,\n});\nclass CodeToken extends Inline {\n  static formats(node: Element, scroll: ScrollBlot) {\n    while (node != null && node !== scroll.domNode) {\n      if (node.classList && node.classList.contains(CodeBlock.className)) {\n        // @ts-expect-error\n        return super.formats(node, scroll);\n      }\n      // @ts-expect-error\n      node = node.parentNode;\n    }\n    return undefined;\n  }\n\n  constructor(scroll: ScrollBlot, domNode: Node, value: unknown) {\n    // @ts-expect-error\n    super(scroll, domNode, value);\n    TokenAttributor.add(this.domNode, value);\n  }\n\n  format(format: string, value: unknown) {\n    if (format !== CodeToken.blotName) {\n      super.format(format, value);\n    } else if (value) {\n      TokenAttributor.add(this.domNode, value);\n    } else {\n      TokenAttributor.remove(this.domNode);\n      this.domNode.classList.remove(this.statics.className);\n    }\n  }\n\n  optimize(...args: unknown[]) {\n    // @ts-expect-error\n    super.optimize(...args);\n    if (!TokenAttributor.value(this.domNode)) {\n      this.unwrap();\n    }\n  }\n}\nCodeToken.blotName = 'code-token';\nCodeToken.className = 'ql-token';\n\nclass SyntaxCodeBlock extends CodeBlock {\n  static create(value: unknown) {\n    const domNode = super.create(value);\n    if (typeof value === 'string') {\n      domNode.setAttribute('data-language', value);\n    }\n    return domNode;\n  }\n\n  static formats(domNode: Node) {\n    // @ts-expect-error\n    return domNode.getAttribute('data-language') || 'plain';\n  }\n\n  static register() {} // Syntax module will register\n\n  format(name: string, value: unknown) {\n    if (name === this.statics.blotName && value) {\n      // @ts-expect-error\n      this.domNode.setAttribute('data-language', value);\n    } else {\n      super.format(name, value);\n    }\n  }\n\n  replaceWith(name: string | Blot, value?: any) {\n    this.formatAt(0, this.length(), CodeToken.blotName, false);\n    return super.replaceWith(name, value);\n  }\n}\n\nclass SyntaxCodeBlockContainer extends CodeBlockContainer {\n  forceNext?: boolean;\n  cachedText?: string | null;\n\n  attach() {\n    super.attach();\n    this.forceNext = false;\n    // @ts-expect-error\n    this.scroll.emitMount(this);\n  }\n\n  format(name: string, value: unknown) {\n    if (name === SyntaxCodeBlock.blotName) {\n      this.forceNext = true;\n      this.children.forEach((child) => {\n        // @ts-expect-error\n        child.format(name, value);\n      });\n    }\n  }\n\n  formatAt(index: number, length: number, name: string, value: unknown) {\n    if (name === SyntaxCodeBlock.blotName) {\n      this.forceNext = true;\n    }\n    super.formatAt(index, length, name, value);\n  }\n\n  highlight(\n    highlight: (text: string, language: string) => Delta,\n    forced = false,\n  ) {\n    if (this.children.head == null) return;\n    const nodes = Array.from(this.domNode.childNodes).filter(\n      (node) => node !== this.uiNode,\n    );\n    const text = `${nodes.map((node) => node.textContent).join('\\n')}\\n`;\n    const language = SyntaxCodeBlock.formats(this.children.head.domNode);\n    if (forced || this.forceNext || this.cachedText !== text) {\n      if (text.trim().length > 0 || this.cachedText == null) {\n        const oldDelta = this.children.reduce((delta, child) => {\n          // @ts-expect-error\n          return delta.concat(blockDelta(child, false));\n        }, new Delta());\n        const delta = highlight(text, language);\n        oldDelta.diff(delta).reduce((index, { retain, attributes }) => {\n          // Should be all retains\n          if (!retain) return index;\n          if (attributes) {\n            Object.keys(attributes).forEach((format) => {\n              if (\n                [SyntaxCodeBlock.blotName, CodeToken.blotName].includes(format)\n              ) {\n                // @ts-expect-error\n                this.formatAt(index, retain, format, attributes[format]);\n              }\n            });\n          }\n          // @ts-expect-error\n          return index + retain;\n        }, 0);\n      }\n      this.cachedText = text;\n      this.forceNext = false;\n    }\n  }\n\n  html(index: number, length: number) {\n    const [codeBlock] = this.children.find(index);\n    const language = codeBlock\n      ? SyntaxCodeBlock.formats(codeBlock.domNode)\n      : 'plain';\n\n    return `<pre data-language=\"${language}\">\\n${escapeText(\n      this.code(index, length),\n    )}\\n</pre>`;\n  }\n\n  optimize(context: Record<string, any>) {\n    super.optimize(context);\n    if (\n      this.parent != null &&\n      this.children.head != null &&\n      this.uiNode != null\n    ) {\n      const language = SyntaxCodeBlock.formats(this.children.head.domNode);\n      // @ts-expect-error\n      if (language !== this.uiNode.value) {\n        // @ts-expect-error\n        this.uiNode.value = language;\n      }\n    }\n  }\n}\n\nSyntaxCodeBlockContainer.allowedChildren = [SyntaxCodeBlock];\nSyntaxCodeBlock.requiredContainer = SyntaxCodeBlockContainer;\nSyntaxCodeBlock.allowedChildren = [CodeToken, CursorBlot, TextBlot, BreakBlot];\n\ninterface SyntaxOptions {\n  interval: number;\n  languages: { key: string; label: string }[];\n  hljs: any;\n}\n\nconst highlight = (lib: any, language: string, text: string) => {\n  if (typeof lib.versionString === 'string') {\n    const majorVersion = lib.versionString.split('.')[0];\n    if (parseInt(majorVersion, 10) >= 11) {\n      return lib.highlight(text, { language }).value;\n    }\n  }\n  return lib.highlight(language, text).value;\n};\n\nclass Syntax extends Module<SyntaxOptions> {\n  static DEFAULTS: SyntaxOptions & { hljs: any };\n\n  static register() {\n    Quill.register(CodeToken, true);\n    Quill.register(SyntaxCodeBlock, true);\n    Quill.register(SyntaxCodeBlockContainer, true);\n  }\n\n  languages: Record<string, true>;\n\n  constructor(quill: Quill, options: Partial<SyntaxOptions>) {\n    super(quill, options);\n    if (this.options.hljs == null) {\n      throw new Error(\n        'Syntax module requires highlight.js. Please include the library on the page before Quill.',\n      );\n    }\n    // @ts-expect-error Fix me later\n    this.languages = this.options.languages.reduce(\n      (memo: Record<string, unknown>, { key }) => {\n        memo[key] = true;\n        return memo;\n      },\n      {},\n    );\n    this.highlightBlot = this.highlightBlot.bind(this);\n    this.initListener();\n    this.initTimer();\n  }\n\n  initListener() {\n    this.quill.on(Quill.events.SCROLL_BLOT_MOUNT, (blot: Blot) => {\n      if (!(blot instanceof SyntaxCodeBlockContainer)) return;\n      const select = this.quill.root.ownerDocument.createElement('select');\n      // @ts-expect-error Fix me later\n      this.options.languages.forEach(({ key, label }) => {\n        const option = select.ownerDocument.createElement('option');\n        option.textContent = label;\n        option.setAttribute('value', key);\n        select.appendChild(option);\n      });\n      select.addEventListener('change', () => {\n        blot.format(SyntaxCodeBlock.blotName, select.value);\n        this.quill.root.focus(); // Prevent scrolling\n        this.highlight(blot, true);\n      });\n      if (blot.uiNode == null) {\n        blot.attachUI(select);\n        if (blot.children.head) {\n          select.value = SyntaxCodeBlock.formats(blot.children.head.domNode);\n        }\n      }\n    });\n  }\n\n  initTimer() {\n    let timer: ReturnType<typeof setTimeout> | null = null;\n    this.quill.on(Quill.events.SCROLL_OPTIMIZE, () => {\n      if (timer) {\n        clearTimeout(timer);\n      }\n      timer = setTimeout(() => {\n        this.highlight();\n        timer = null;\n      }, this.options.interval);\n    });\n  }\n\n  highlight(blot: SyntaxCodeBlockContainer | null = null, force = false) {\n    if (this.quill.selection.composing) return;\n    this.quill.update(Quill.sources.USER);\n    const range = this.quill.getSelection();\n    const blots =\n      blot == null\n        ? this.quill.scroll.descendants(SyntaxCodeBlockContainer)\n        : [blot];\n    blots.forEach((container) => {\n      container.highlight(this.highlightBlot, force);\n    });\n    this.quill.update(Quill.sources.SILENT);\n    if (range != null) {\n      this.quill.setSelection(range, Quill.sources.SILENT);\n    }\n  }\n\n  highlightBlot(text: string, language = 'plain') {\n    language = this.languages[language] ? language : 'plain';\n    if (language === 'plain') {\n      return escapeText(text)\n        .split('\\n')\n        .reduce((delta, line, i) => {\n          if (i !== 0) {\n            delta.insert('\\n', { [CodeBlock.blotName]: language });\n          }\n          return delta.insert(line);\n        }, new Delta());\n    }\n    const container = this.quill.root.ownerDocument.createElement('div');\n    container.classList.add(CodeBlock.className);\n    container.innerHTML = highlight(this.options.hljs, language, text);\n    return traverse(\n      this.quill.scroll,\n      container,\n      [\n        (node, delta) => {\n          // @ts-expect-error\n          const value = TokenAttributor.value(node);\n          if (value) {\n            return delta.compose(\n              new Delta().retain(delta.length(), {\n                [CodeToken.blotName]: value,\n              }),\n            );\n          }\n          return delta;\n        },\n      ],\n      [\n        (node, delta) => {\n          // @ts-expect-error\n          return node.data.split('\\n').reduce((memo, nodeText, i) => {\n            if (i !== 0) memo.insert('\\n', { [CodeBlock.blotName]: language });\n            return memo.insert(nodeText);\n          }, delta);\n        },\n      ],\n      new WeakMap(),\n    );\n  }\n}\nSyntax.DEFAULTS = {\n  hljs: (() => {\n    return window.hljs;\n  })(),\n  interval: 1000,\n  languages: [\n    { key: 'plain', label: 'Plain' },\n    { key: 'bash', label: 'Bash' },\n    { key: 'cpp', label: 'C++' },\n    { key: 'cs', label: 'C#' },\n    { key: 'css', label: 'CSS' },\n    { key: 'diff', label: 'Diff' },\n    { key: 'xml', label: 'HTML/XML' },\n    { key: 'java', label: 'Java' },\n    { key: 'javascript', label: 'JavaScript' },\n    { key: 'markdown', label: 'Markdown' },\n    { key: 'php', label: 'PHP' },\n    { key: 'python', label: 'Python' },\n    { key: 'ruby', label: 'Ruby' },\n    { key: 'sql', label: 'SQL' },\n  ],\n};\n\nexport { SyntaxCodeBlock as CodeBlock, CodeToken, Syntax as default };\n"],"mappings":"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","ignoreList":[]}]}