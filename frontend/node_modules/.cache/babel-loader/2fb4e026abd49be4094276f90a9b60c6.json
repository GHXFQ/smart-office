{"remainingRequest":"C:\\Users\\18083\\Desktop\\offic_ai\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18083\\Desktop\\offic_ai\\office\\smart-office\\frontend\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\18083\\Desktop\\offic_ai\\office\\smart-office\\frontend\\src\\hooks\\useRequest.js","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\offic_ai\\office\\smart-office\\frontend\\src\\hooks\\useRequest.js","mtime":1746862540960},{"path":"C:\\Users\\18083\\Desktop\\offic_ai\\office\\smart-office\\frontend\\babel.config.js","mtime":1746431728272},{"path":"C:\\Users\\18083\\Desktop\\offic_ai\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218359},{"path":"C:\\Users\\18083\\Desktop\\offic_ai\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202324},{"path":"C:\\Users\\18083\\Desktop\\offic_ai\\office\\smart-office\\frontend\\node_modules\\eslint-loader\\index.js","mtime":1746431218362}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgcmVmIH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgRWxNZXNzYWdlIH0gZnJvbSAnZWxlbWVudC1wbHVzJzsKCi8qKg0KICog5bCB6KOFQVBJ6K+35rGC6ZKp5a2Q5Ye95pWwDQogKiBAcmV0dXJucyB7T2JqZWN0fSDljIXlkKtyZXF1ZXN05pa55rOV5ZKMbG9hZGluZ+eKtuaAgeeahOWvueixoQ0KICovCmV4cG9ydCBmdW5jdGlvbiB1c2VSZXF1ZXN0KCkgewogIGNvbnN0IGxvYWRpbmcgPSByZWYoZmFsc2UpOwoKICAvLyDliJvlu7pheGlvc+WunuS+iwogIGNvbnN0IGluc3RhbmNlID0gYXhpb3MuY3JlYXRlKHsKICAgIGJhc2VVUkw6IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUEkgfHwgJycsCiAgICAvLyDkuI3orr7nva5iYXNlVVJM77yM5L2/55So55u45a+56Lev5b6ECiAgICB0aW1lb3V0OiAxMDAwMCwKICAgIC8vIOivt+axgui2heaXtuaXtumXtAogICAgaGVhZGVyczogewogICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CiAgfSk7CgogIC8vIOivt+axguaLpuaIquWZqAogIGluc3RhbmNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShjb25maWcgPT4gewogICAgLy8g5LuObG9jYWxTdG9yYWdl6I635Y+WdG9rZW4KICAgIGNvbnN0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7CiAgICBpZiAodG9rZW4pIHsKICAgICAgY29uZmlnLmhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9IGBCZWFyZXIgJHt0b2tlbn1gOwogICAgfQogICAgcmV0dXJuIGNvbmZpZzsKICB9LCBlcnJvciA9PiB7CiAgICBjb25zb2xlLmVycm9yKCfor7fmsYLplJnor686JywgZXJyb3IpOwogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICB9KTsKCiAgLy8g5ZON5bqU5oum5oiq5ZmoCiAgaW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShyZXNwb25zZSA9PiB7CiAgICAvLyDnm7TmjqXov5Tlm57lk43lupTmlbDmja7vvIzkuI3lgZrpop3lpJblpITnkIYKICAgIHJldHVybiByZXNwb25zZS5kYXRhOwogIH0sIGVycm9yID0+IHsKICAgIC8vIOWkhOeQhuWTjeW6lOmUmeivrwogICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICAgIGNvbnN0IHN0YXR1cyA9IGVycm9yLnJlc3BvbnNlLnN0YXR1czsKICAgICAgaWYgKHN0YXR1cyA9PT0gNDAxKSB7CiAgICAgICAgLy8g5pyq5o6I5p2D77yM5Y+v6IO95pivdG9rZW7ov4fmnJ8KICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+eZu+W9leW3sui/h+acn++8jOivt+mHjeaWsOeZu+W9lScpOwogICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpOwogICAgICAgIC8vIOi3s+i9rOWIsOeZu+W9lemhtQogICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9sb2dpbic7CiAgICAgIH0gZWxzZSBpZiAoc3RhdHVzID09PSA0MDMpIHsKICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+ayoeacieadg+mZkOaJp+ihjOatpOaTjeS9nCcpOwogICAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gNDA0KSB7CiAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfor7fmsYLnmoTotYTmupDkuI3lrZjlnKgnKTsKICAgICAgfSBlbHNlIGlmIChzdGF0dXMgPT09IDUwMCkgewogICAgICAgIEVsTWVzc2FnZS5lcnJvcign5pyN5Yqh5Zmo5YaF6YOo6ZSZ6K+vJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIF9lcnJvciRyZXNwb25zZSRkYXRhOwogICAgICAgIEVsTWVzc2FnZS5lcnJvcigoKF9lcnJvciRyZXNwb25zZSRkYXRhID0gZXJyb3IucmVzcG9uc2UuZGF0YSkgPT09IG51bGwgfHwgX2Vycm9yJHJlc3BvbnNlJGRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lcnJvciRyZXNwb25zZSRkYXRhLm1lc3NhZ2UpIHx8ICfor7fmsYLlpLHotKUnKTsKICAgICAgfQogICAgfSBlbHNlIGlmIChlcnJvci5yZXF1ZXN0KSB7CiAgICAgIC8vIOivt+axguW3suWPkemAgeS9huayoeacieaUtuWIsOWTjeW6lAogICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+acjeWKoeWZqOaXoOWTjeW6lO+8jOivt+eojeWQjumHjeivlScpOwogICAgfSBlbHNlIHsKICAgICAgLy8g6K+35rGC6YWN572u5Ye66ZSZCiAgICAgIEVsTWVzc2FnZS5lcnJvcign6K+35rGC6YWN572u6ZSZ6K+vJyk7CiAgICB9CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogIH0pOwoKICAvKioNCiAgICog6YCa55So6K+35rGC5pa55rOVDQogICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgLSDor7fmsYLlnLDlnYANCiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSDor7fmsYLphY3nva4NCiAgICogQHJldHVybnMge1Byb21pc2V9IOivt+axgue7k+aenA0KICAgKi8KICBjb25zdCByZXF1ZXN0ID0gYXN5bmMgKHVybCwgb3B0aW9ucyA9IHt9KSA9PiB7CiAgICBsb2FkaW5nLnZhbHVlID0gdHJ1ZTsKICAgIHRyeSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBtZXRob2QgPSAnR0VUJywKICAgICAgICBwYXJhbXMsCiAgICAgICAgZGF0YSwKICAgICAgICAuLi5yZXN0CiAgICAgIH0gPSBvcHRpb25zOwogICAgICBjb25zdCBjb25maWcgPSB7CiAgICAgICAgdXJsLAogICAgICAgIG1ldGhvZCwKICAgICAgICBwYXJhbXMsCiAgICAgICAgZGF0YSwKICAgICAgICAuLi5yZXN0CiAgICAgIH07CiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgaW5zdGFuY2UoY29uZmlnKTsKICAgICAgcmV0dXJuIHJlc3BvbnNlOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgY29uc29sZS5lcnJvcign6K+35rGC5Ye66ZSZOicsIGVycm9yKTsKICAgICAgdGhyb3cgZXJyb3I7CiAgICB9IGZpbmFsbHkgewogICAgICBsb2FkaW5nLnZhbHVlID0gZmFsc2U7CiAgICB9CiAgfTsKICByZXR1cm4gewogICAgbG9hZGluZywKICAgIHJlcXVlc3QKICB9Owp9"},{"version":3,"names":["axios","ref","ElMessage","useRequest","loading","instance","create","baseURL","process","env","VUE_APP_BASE_API","timeout","headers","interceptors","request","use","config","token","localStorage","getItem","error","console","Promise","reject","response","data","status","removeItem","window","location","href","_error$response$data","message","url","options","value","method","params","rest"],"sources":["C:/Users/18083/Desktop/offic_ai/office/smart-office/frontend/src/hooks/useRequest.js"],"sourcesContent":["import axios from 'axios'\r\nimport { ref } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\n\r\n/**\r\n * 封装API请求钩子函数\r\n * @returns {Object} 包含request方法和loading状态的对象\r\n */\r\nexport function useRequest() {\r\n  const loading = ref(false)\r\n  \r\n  // 创建axios实例\r\n  const instance = axios.create({\r\n    baseURL: process.env.VUE_APP_BASE_API || '',  // 不设置baseURL，使用相对路径\r\n    timeout: 10000, // 请求超时时间\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    }\r\n  })\r\n  \r\n  // 请求拦截器\r\n  instance.interceptors.request.use(\r\n    config => {\r\n      // 从localStorage获取token\r\n      const token = localStorage.getItem('token')\r\n      if (token) {\r\n        config.headers['Authorization'] = `Bearer ${token}`\r\n      }\r\n      return config\r\n    },\r\n    error => {\r\n      console.error('请求错误:', error)\r\n      return Promise.reject(error)\r\n    }\r\n  )\r\n  \r\n  // 响应拦截器\r\n  instance.interceptors.response.use(\r\n    response => {\r\n      // 直接返回响应数据，不做额外处理\r\n      return response.data\r\n    },\r\n    error => {\r\n      // 处理响应错误\r\n      if (error.response) {\r\n        const status = error.response.status\r\n        \r\n        if (status === 401) {\r\n          // 未授权，可能是token过期\r\n          ElMessage.error('登录已过期，请重新登录')\r\n          localStorage.removeItem('token')\r\n          // 跳转到登录页\r\n          window.location.href = '/login'\r\n        } else if (status === 403) {\r\n          ElMessage.error('没有权限执行此操作')\r\n        } else if (status === 404) {\r\n          ElMessage.error('请求的资源不存在')\r\n        } else if (status === 500) {\r\n          ElMessage.error('服务器内部错误')\r\n        } else {\r\n          ElMessage.error(error.response.data?.message || '请求失败')\r\n        }\r\n      } else if (error.request) {\r\n        // 请求已发送但没有收到响应\r\n        ElMessage.error('服务器无响应，请稍后重试')\r\n      } else {\r\n        // 请求配置出错\r\n        ElMessage.error('请求配置错误')\r\n      }\r\n      \r\n      return Promise.reject(error)\r\n    }\r\n  )\r\n  \r\n  /**\r\n   * 通用请求方法\r\n   * @param {string} url - 请求地址\r\n   * @param {Object} options - 请求配置\r\n   * @returns {Promise} 请求结果\r\n   */\r\n  const request = async (url, options = {}) => {\r\n    loading.value = true\r\n    \r\n    try {\r\n      const { method = 'GET', params, data, ...rest } = options\r\n      \r\n      const config = {\r\n        url,\r\n        method,\r\n        params,\r\n        data,\r\n        ...rest\r\n      }\r\n      \r\n      const response = await instance(config)\r\n      return response\r\n    } catch (error) {\r\n      console.error('请求出错:', error)\r\n      throw error\r\n    } finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n  \r\n  return {\r\n    loading,\r\n    request\r\n  }\r\n} "],"mappings":"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","ignoreList":[]}]}