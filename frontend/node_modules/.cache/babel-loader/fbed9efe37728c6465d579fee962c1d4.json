{"remainingRequest":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\components\\profile\\AvatarDropdown.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\components\\profile\\AvatarDropdown.vue","mtime":1747306310907},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\babel.config.js","mtime":1746431728000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1746431218000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCB7IGRlZmluZUNvbXBvbmVudCwgY29tcHV0ZWQsIG9uTW91bnRlZCB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IHVzZVN0b3JlIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ3Z1ZS1yb3V0ZXInOwpleHBvcnQgZGVmYXVsdCBkZWZpbmVDb21wb25lbnQoewogIG5hbWU6ICdBdmF0YXJEcm9wZG93bicsCiAgc2V0dXAoKSB7CiAgICBjb25zdCBzdG9yZSA9IHVzZVN0b3JlKCk7CiAgICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTsKCiAgICAvLyDojrflj5bnlKjmiLfkv6Hmga8KICAgIGNvbnN0IHVzZXJJbmZvID0gY29tcHV0ZWQoKCkgPT4gc3RvcmUuc3RhdGUudXNlci51c2VySW5mbyk7CgogICAgLy8g6K6h566X55So5oi35ZCN6aaW5a2X5q+N77yI55So5LqO5peg5aS05YOP5pe25pi+56S677yJCiAgICBjb25zdCB1c2VySW5pdGlhbCA9IGNvbXB1dGVkKCgpID0+IHsKICAgICAgaWYgKHVzZXJJbmZvLnZhbHVlLm5hbWUpIHsKICAgICAgICByZXR1cm4gdXNlckluZm8udmFsdWUubmFtZS5jaGFyQXQoMCk7CiAgICAgIH0gZWxzZSBpZiAodXNlckluZm8udmFsdWUudXNlcm5hbWUpIHsKICAgICAgICByZXR1cm4gdXNlckluZm8udmFsdWUudXNlcm5hbWUuY2hhckF0KDApOwogICAgICB9CiAgICAgIHJldHVybiAn55SoJzsKICAgIH0pOwoKICAgIC8vIOWmguaenOayoeacieeUqOaIt+S/oeaBr++8jOWImeiOt+WPlueUqOaIt+S/oeaBrwogICAgb25Nb3VudGVkKCgpID0+IHsKICAgICAgaWYgKCF1c2VySW5mby52YWx1ZS5pZCkgewogICAgICAgIHN0b3JlLmRpc3BhdGNoKCd1c2VyL2dldFVzZXJJbmZvJyk7CiAgICAgIH0KICAgIH0pOwoKICAgIC8vIOWkhOeQhumAgOWHuueZu+W9lQogICAgY29uc3QgaGFuZGxlTG9nb3V0ID0gKCkgPT4gewogICAgICBzdG9yZS5kaXNwYXRjaCgndXNlci9sb2dvdXQnKS50aGVuKCgpID0+IHsKICAgICAgICByb3V0ZXIucHVzaCgnL2xvZ2luJyk7CiAgICAgIH0pOwogICAgfTsKICAgIHJldHVybiB7CiAgICAgIHVzZXJJbmZvLAogICAgICB1c2VySW5pdGlhbCwKICAgICAgaGFuZGxlTG9nb3V0CiAgICB9OwogIH0KfSk7"},{"version":3,"names":["defineComponent","computed","onMounted","useStore","useRouter","name","setup","store","router","userInfo","state","user","userInitial","value","charAt","username","id","dispatch","handleLogout","then","push"],"sources":["C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\components\\profile\\AvatarDropdown.vue"],"sourcesContent":["<template>\r\n  <el-dropdown trigger=\"click\" class=\"avatar-dropdown\">\r\n    <div class=\"avatar-container\">\r\n      <el-avatar \r\n        :size=\"32\" \r\n        :src=\"userInfo.avatar ? userInfo.avatar : null\" \r\n        v-if=\"userInfo.avatar\">\r\n      </el-avatar>\r\n      <el-avatar \r\n        :size=\"32\" \r\n        v-else \r\n        class=\"default-avatar\">\r\n        {{ userInitial }}\r\n      </el-avatar>\r\n      <span class=\"user-name hidden-xs\">{{ userInfo.name || userInfo.username }}</span>\r\n      <i class=\"el-icon-caret-bottom\"></i>\r\n    </div>\r\n\r\n    <template #dropdown>\r\n      <el-dropdown-menu>\r\n        <router-link to=\"/profile\">\r\n          <el-dropdown-item>\r\n            <i class=\"el-icon-user\"></i>\r\n            个人中心\r\n          </el-dropdown-item>\r\n        </router-link>\r\n        <el-dropdown-item divided @click=\"handleLogout\">\r\n          <i class=\"el-icon-switch-button\"></i>\r\n          退出登录\r\n        </el-dropdown-item>\r\n      </el-dropdown-menu>\r\n    </template>\r\n  </el-dropdown>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent, computed, onMounted } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useRouter } from 'vue-router'\r\n\r\nexport default defineComponent({\r\n  name: 'AvatarDropdown',\r\n  \r\n  setup() {\r\n    const store = useStore()\r\n    const router = useRouter()\r\n    \r\n    // 获取用户信息\r\n    const userInfo = computed(() => store.state.user.userInfo)\r\n    \r\n    // 计算用户名首字母（用于无头像时显示）\r\n    const userInitial = computed(() => {\r\n      if (userInfo.value.name) {\r\n        return userInfo.value.name.charAt(0)\r\n      } else if (userInfo.value.username) {\r\n        return userInfo.value.username.charAt(0)\r\n      }\r\n      return '用'\r\n    })\r\n    \r\n    // 如果没有用户信息，则获取用户信息\r\n    onMounted(() => {\r\n      if (!userInfo.value.id) {\r\n        store.dispatch('user/getUserInfo')\r\n      }\r\n    })\r\n    \r\n    // 处理退出登录\r\n    const handleLogout = () => {\r\n      store.dispatch('user/logout').then(() => {\r\n        router.push('/login')\r\n      })\r\n    }\r\n    \r\n    return {\r\n      userInfo,\r\n      userInitial,\r\n      handleLogout\r\n    }\r\n  }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.avatar-dropdown {\r\n  height: 100%;\r\n  cursor: pointer;\r\n  \r\n  .avatar-container {\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 0 8px;\r\n    \r\n    .default-avatar {\r\n      background-color: #409EFF;\r\n      color: #fff;\r\n      font-weight: bold;\r\n    }\r\n    \r\n    .user-name {\r\n      margin-left: 8px;\r\n      font-size: 14px;\r\n      color: #606266;\r\n    }\r\n    \r\n    .el-icon-caret-bottom {\r\n      margin-left: 4px;\r\n      font-size: 12px;\r\n    }\r\n  }\r\n}\r\n\r\n// 适配移动设备\r\n@media (max-width: 768px) {\r\n  .hidden-xs {\r\n    display: none;\r\n  }\r\n}\r\n</style> "],"mappings":";AAoCA,SAASA,eAAe,EAAEC,QAAQ,EAAEC,SAAQ,QAAS,KAAI;AACzD,SAASC,QAAO,QAAS,MAAK;AAC9B,SAASC,SAAQ,QAAS,YAAW;AAErC,eAAeJ,eAAe,CAAC;EAC7BK,IAAI,EAAE,gBAAgB;EAEtBC,KAAKA,CAAA,EAAG;IACN,MAAMC,KAAI,GAAIJ,QAAQ,CAAC;IACvB,MAAMK,MAAK,GAAIJ,SAAS,CAAC;;IAEzB;IACA,MAAMK,QAAO,GAAIR,QAAQ,CAAC,MAAMM,KAAK,CAACG,KAAK,CAACC,IAAI,CAACF,QAAQ;;IAEzD;IACA,MAAMG,WAAU,GAAIX,QAAQ,CAAC,MAAM;MACjC,IAAIQ,QAAQ,CAACI,KAAK,CAACR,IAAI,EAAE;QACvB,OAAOI,QAAQ,CAACI,KAAK,CAACR,IAAI,CAACS,MAAM,CAAC,CAAC;MACrC,OAAO,IAAIL,QAAQ,CAACI,KAAK,CAACE,QAAQ,EAAE;QAClC,OAAON,QAAQ,CAACI,KAAK,CAACE,QAAQ,CAACD,MAAM,CAAC,CAAC;MACzC;MACA,OAAO,GAAE;IACX,CAAC;;IAED;IACAZ,SAAS,CAAC,MAAM;MACd,IAAI,CAACO,QAAQ,CAACI,KAAK,CAACG,EAAE,EAAE;QACtBT,KAAK,CAACU,QAAQ,CAAC,kBAAkB;MACnC;IACF,CAAC;;IAED;IACA,MAAMC,YAAW,GAAIA,CAAA,KAAM;MACzBX,KAAK,CAACU,QAAQ,CAAC,aAAa,CAAC,CAACE,IAAI,CAAC,MAAM;QACvCX,MAAM,CAACY,IAAI,CAAC,QAAQ;MACtB,CAAC;IACH;IAEA,OAAO;MACLX,QAAQ;MACRG,WAAW;MACXM;IACF;EACF;AACF,CAAC","ignoreList":[]}]}