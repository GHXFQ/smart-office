{"remainingRequest":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\dashboard\\components\\NlpScheduler.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\dashboard\\components\\NlpScheduler.vue","mtime":1750153640858},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\babel.config.js","mtime":1748077811200},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1746431219000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1746431218000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHJlcXVlc3QgZnJvbSAnQC91dGlscy9yZXF1ZXN0JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdObHBTY2hlZHVsZXInLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBxdWVyeTogJycsCiAgICAgIGV2ZW50czogW10KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBoYW5kbGVRdWVyeShjb21tYW5kKSB7CiAgICAgIGNvbnN0IHF1ZXJ5VG9TZW5kID0gdHlwZW9mIGNvbW1hbmQgPT09ICdzdHJpbmcnID8gY29tbWFuZCA6IHRoaXMucXVlcnk7CiAgICAgIGlmICghcXVlcnlUb1NlbmQudHJpbSgpKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7fovpPlhaXlhoXlrrknKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdHJ5IHsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QucG9zdCgnL2FwaS9jYWxlbmRhci9ldmVudHMvbmxwLycsIHsKICAgICAgICAgIHF1ZXJ5OiBxdWVyeVRvU2VuZAogICAgICAgIH0pOwogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgIHRoaXMuZXZlbnRzID0gcmVzcG9uc2UuZGF0YS5kYXRhOwogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmk43kvZzmiJDlip8nKTsKICAgICAgICAgIHRoaXMucXVlcnkgPSAnJzsgLy8gQ2xlYXIgaW5wdXQgYWZ0ZXIgc3VjY2Vzc2Z1bCBjb21tYW5kCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzcG9uc2UuZGF0YS5lcnJvciB8fCAn5pON5L2c5aSx6LSlJyk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+ivt+axguWksei0pScpOwogICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlQ29tbWFuZChjb21tYW5kKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBhY3Rpb24sCiAgICAgICAgZXZlbnQKICAgICAgfSA9IGNvbW1hbmQ7CiAgICAgIGlmIChhY3Rpb24gPT09ICdkZWxldGUnKSB7CiAgICAgICAgY29uc3QgY29tbWFuZFN0cmluZyA9IGDliKDpmaRJROS4uiAke2V2ZW50LmlkfSDnmoTml6XnqItgOwogICAgICAgIHRoaXMuaGFuZGxlUXVlcnkoY29tbWFuZFN0cmluZyk7CiAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSAnZWRpdCcpIHsKICAgICAgICB0aGlzLiRwcm9tcHQoJ+ivt+i+k+WFpeaWsOeahOaXpeeoi+S/oeaBrycsICfnvJbovpHml6XnqIsnLCB7CiAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICAgIGlucHV0VmFsdWU6IGV2ZW50LnRpdGxlCiAgICAgICAgfSkudGhlbigoewogICAgICAgICAgdmFsdWUKICAgICAgICB9KSA9PiB7CiAgICAgICAgICBjb25zdCBjb21tYW5kU3RyaW5nID0gYOWwhklE5Li6ICR7ZXZlbnQuaWR9IOeahOaXpeeoi+S/ruaUueS4uiAke3ZhbHVlfWA7CiAgICAgICAgICB0aGlzLmhhbmRsZVF1ZXJ5KGNvbW1hbmRTdHJpbmcpOwogICAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICflj5bmtojovpPlhaUnCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGZvcm1hdERhdGVUaW1lKGRhdGVUaW1lKSB7CiAgICAgIGlmICghZGF0ZVRpbWUpIHJldHVybiAnJzsKICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVUaW1lKTsKICAgICAgcmV0dXJuIGRhdGUudG9Mb2NhbGVTdHJpbmcoJ3poLUNOJywgewogICAgICAgIHllYXI6ICdudW1lcmljJywKICAgICAgICBtb250aDogJzItZGlnaXQnLAogICAgICAgIGRheTogJzItZGlnaXQnLAogICAgICAgIGhvdXI6ICcyLWRpZ2l0JywKICAgICAgICBtaW51dGU6ICcyLWRpZ2l0JwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"names":["request","name","data","query","events","methods","handleQuery","command","queryToSend","trim","$message","warning","response","post","success","error","console","handleCommand","action","event","commandString","id","$prompt","confirmButtonText","cancelButtonText","inputValue","title","then","value","catch","type","message","formatDateTime","dateTime","date","Date","toLocaleString","year","month","day","hour","minute"],"sources":["C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\dashboard\\components\\NlpScheduler.vue"],"sourcesContent":["<template>\r\n  <div class=\"nlp-scheduler\">\r\n    <div class=\"input-area\">\r\n      <el-input\r\n        v-model=\"query\"\r\n        placeholder=\"请输入您的日程安排，例如：明天下午两点和张三开会\"\r\n        clearable\r\n        @keyup.enter=\"handleQuery\"\r\n      >\r\n        <template #append>\r\n          <el-button @click=\"handleQuery()\">智能安排</el-button>\r\n        </template>\r\n      </el-input>\r\n    </div>\r\n    <div class=\"events-display\">\r\n      <el-card v-for=\"event in events\" :key=\"event.id\" class=\"event-card\">\r\n        <template #header>\r\n          <div class=\"clearfix\">\r\n            <span>{{ event.title }}</span>\r\n            <el-dropdown style=\"float: right;\" @command=\"handleCommand\">\r\n              <span class=\"el-dropdown-link\">\r\n                操作<i class=\"el-icon-arrow-down el-icon--right\"></i>\r\n              </span>\r\n              <template #dropdown>\r\n                <el-dropdown-menu>\r\n                  <el-dropdown-item :command=\"{ action: 'edit', event: event }\">编辑</el-dropdown-item>\r\n                  <el-dropdown-item :command=\"{ action: 'delete', event: event }\">删除</el-dropdown-item>\r\n                </el-dropdown-menu>\r\n              </template>\r\n            </el-dropdown>\r\n          </div>\r\n        </template>\r\n        <div class=\"event-details\">\r\n          <p><strong>时间:</strong> {{ formatDateTime(event.start) }} - {{ formatDateTime(event.end) }}</p>\r\n          <p v-if=\"event.location\"><strong>地点:</strong> {{ event.location }}</p>\r\n          <p v-if=\"event.description\"><strong>描述:</strong> {{ event.description }}</p>\r\n        </div>\r\n      </el-card>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from '@/utils/request';\r\n\r\nexport default {\r\n  name: 'NlpScheduler',\r\n  data() {\r\n    return {\r\n      query: '',\r\n      events: [],\r\n    };\r\n  },\r\n  methods: {\r\n    async handleQuery(command) {\r\n      const queryToSend = typeof command === 'string' ? command : this.query;\r\n      if (!queryToSend.trim()) {\r\n        this.$message.warning('请输入内容');\r\n        return;\r\n      }\r\n      try {\r\n        const response = await request.post('/api/calendar/events/nlp/', { query: queryToSend });\r\n        if (response.data.success) {\r\n          this.events = response.data.data;\r\n          this.$message.success('操作成功');\r\n          this.query = ''; // Clear input after successful command\r\n        } else {\r\n          this.$message.error(response.data.error || '操作失败');\r\n        }\r\n      } catch (error) {\r\n        this.$message.error('请求失败');\r\n        console.error(error);\r\n      }\r\n    },\r\n    handleCommand(command) {\r\n      const { action, event } = command;\r\n      if (action === 'delete') {\r\n        const commandString = `删除ID为 ${event.id} 的日程`;\r\n        this.handleQuery(commandString);\r\n      } else if (action === 'edit') {\r\n        this.$prompt('请输入新的日程信息', '编辑日程', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          inputValue: event.title,\r\n        }).then(({ value }) => {\r\n          const commandString = `将ID为 ${event.id} 的日程修改为 ${value}`;\r\n          this.handleQuery(commandString);\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '取消输入'\r\n          });       \r\n        });\r\n      }\r\n    },\r\n    formatDateTime(dateTime) {\r\n      if (!dateTime) return '';\r\n      const date = new Date(dateTime);\r\n      return date.toLocaleString('zh-CN', {\r\n        year: 'numeric',\r\n        month: '2-digit',\r\n        day: '2-digit',\r\n        hour: '2-digit',\r\n        minute: '2-digit',\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.nlp-scheduler {\r\n  padding: 20px;\r\n}\r\n.input-area {\r\n  margin-bottom: 20px;\r\n}\r\n.event-card {\r\n  margin-bottom: 15px;\r\n}\r\n.clearfix:before,\r\n.clearfix:after {\r\n  display: table;\r\n  content: \"\";\r\n}\r\n.clearfix:after {\r\n  clear: both\r\n}\r\n</style> "],"mappings":"AA2CA,OAAOA,OAAM,MAAO,iBAAiB;AAErC,eAAe;EACbC,IAAI,EAAE,cAAc;EACpBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE,EAAE;MACTC,MAAM,EAAE;IACV,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACP,MAAMC,WAAWA,CAACC,OAAO,EAAE;MACzB,MAAMC,WAAU,GAAI,OAAOD,OAAM,KAAM,QAAO,GAAIA,OAAM,GAAI,IAAI,CAACJ,KAAK;MACtE,IAAI,CAACK,WAAW,CAACC,IAAI,CAAC,CAAC,EAAE;QACvB,IAAI,CAACC,QAAQ,CAACC,OAAO,CAAC,OAAO,CAAC;QAC9B;MACF;MACA,IAAI;QACF,MAAMC,QAAO,GAAI,MAAMZ,OAAO,CAACa,IAAI,CAAC,2BAA2B,EAAE;UAAEV,KAAK,EAAEK;QAAY,CAAC,CAAC;QACxF,IAAII,QAAQ,CAACV,IAAI,CAACY,OAAO,EAAE;UACzB,IAAI,CAACV,MAAK,GAAIQ,QAAQ,CAACV,IAAI,CAACA,IAAI;UAChC,IAAI,CAACQ,QAAQ,CAACI,OAAO,CAAC,MAAM,CAAC;UAC7B,IAAI,CAACX,KAAI,GAAI,EAAE,EAAE;QACnB,OAAO;UACL,IAAI,CAACO,QAAQ,CAACK,KAAK,CAACH,QAAQ,CAACV,IAAI,CAACa,KAAI,IAAK,MAAM,CAAC;QACpD;MACF,EAAE,OAAOA,KAAK,EAAE;QACd,IAAI,CAACL,QAAQ,CAACK,KAAK,CAAC,MAAM,CAAC;QAC3BC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACtB;IACF,CAAC;IACDE,aAAaA,CAACV,OAAO,EAAE;MACrB,MAAM;QAAEW,MAAM;QAAEC;MAAM,IAAIZ,OAAO;MACjC,IAAIW,MAAK,KAAM,QAAQ,EAAE;QACvB,MAAME,aAAY,GAAI,SAASD,KAAK,CAACE,EAAE,MAAM;QAC7C,IAAI,CAACf,WAAW,CAACc,aAAa,CAAC;MACjC,OAAO,IAAIF,MAAK,KAAM,MAAM,EAAE;QAC5B,IAAI,CAACI,OAAO,CAAC,WAAW,EAAE,MAAM,EAAE;UAChCC,iBAAiB,EAAE,IAAI;UACvBC,gBAAgB,EAAE,IAAI;UACtBC,UAAU,EAAEN,KAAK,CAACO;QACpB,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC;UAAEC;QAAM,CAAC,KAAK;UACrB,MAAMR,aAAY,GAAI,QAAQD,KAAK,CAACE,EAAE,WAAWO,KAAK,EAAE;UACxD,IAAI,CAACtB,WAAW,CAACc,aAAa,CAAC;QACjC,CAAC,CAAC,CAACS,KAAK,CAAC,MAAM;UACb,IAAI,CAACnB,QAAQ,CAAC;YACZoB,IAAI,EAAE,MAAM;YACZC,OAAO,EAAE;UACX,CAAC,CAAC;QACJ,CAAC,CAAC;MACJ;IACF,CAAC;IACDC,cAAcA,CAACC,QAAQ,EAAE;MACvB,IAAI,CAACA,QAAQ,EAAE,OAAO,EAAE;MACxB,MAAMC,IAAG,GAAI,IAAIC,IAAI,CAACF,QAAQ,CAAC;MAC/B,OAAOC,IAAI,CAACE,cAAc,CAAC,OAAO,EAAE;QAClCC,IAAI,EAAE,SAAS;QACfC,KAAK,EAAE,SAAS;QAChBC,GAAG,EAAE,SAAS;QACdC,IAAI,EAAE,SAAS;QACfC,MAAM,EAAE;MACV,CAAC,CAAC;IACJ;EACF;AACF,CAAC","ignoreList":[]}]}