{"remainingRequest":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\quill\\modules\\input.js","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\quill\\modules\\input.js","mtime":1751792162069},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\babel.config.js","mtime":1748077811200},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IERlbHRhIGZyb20gJ3F1aWxsLWRlbHRhJzsKaW1wb3J0IE1vZHVsZSBmcm9tICcuLi9jb3JlL21vZHVsZS5qcyc7CmltcG9ydCBRdWlsbCBmcm9tICcuLi9jb3JlL3F1aWxsLmpzJzsKaW1wb3J0IHsgZGVsZXRlUmFuZ2UgfSBmcm9tICcuL2tleWJvYXJkLmpzJzsKY29uc3QgSU5TRVJUX1RZUEVTID0gWydpbnNlcnRUZXh0JywgJ2luc2VydFJlcGxhY2VtZW50VGV4dCddOwpjbGFzcyBJbnB1dCBleHRlbmRzIE1vZHVsZSB7CiAgY29uc3RydWN0b3IocXVpbGwsIG9wdGlvbnMpIHsKICAgIHN1cGVyKHF1aWxsLCBvcHRpb25zKTsKICAgIHF1aWxsLnJvb3QuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JlaW5wdXQnLCBldmVudCA9PiB7CiAgICAgIHRoaXMuaGFuZGxlQmVmb3JlSW5wdXQoZXZlbnQpOwogICAgfSk7CgogICAgLy8gR2JvYXJkIHdpdGggRW5nbGlzaCBpbnB1dCBvbiBBbmRyb2lkIHRyaWdnZXJzIGBjb21wb3NpdGlvbnN0YXJ0YCBzb21ldGltZXMgZXZlbgogICAgLy8gdXNlcnMgYXJlIG5vdCBnb2luZyB0byB0eXBlIGFueXRoaW5nLgogICAgaWYgKCEvQW5kcm9pZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHsKICAgICAgcXVpbGwub24oUXVpbGwuZXZlbnRzLkNPTVBPU0lUSU9OX0JFRk9SRV9TVEFSVCwgKCkgPT4gewogICAgICAgIHRoaXMuaGFuZGxlQ29tcG9zaXRpb25TdGFydCgpOwogICAgICB9KTsKICAgIH0KICB9CiAgZGVsZXRlUmFuZ2UocmFuZ2UpIHsKICAgIGRlbGV0ZVJhbmdlKHsKICAgICAgcmFuZ2UsCiAgICAgIHF1aWxsOiB0aGlzLnF1aWxsCiAgICB9KTsKICB9CiAgcmVwbGFjZVRleHQocmFuZ2UpIHsKICAgIGxldCB0ZXh0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAnJzsKICAgIGlmIChyYW5nZS5sZW5ndGggPT09IDApIHJldHVybiBmYWxzZTsKICAgIGlmICh0ZXh0KSB7CiAgICAgIC8vIEZvbGxvdyB0aGUgbmF0aXZlIGJlaGF2aW9yIHRoYXQgaW5oZXJpdHMgdGhlIGZvcm1hdHMgb2YgdGhlIGZpcnN0IGNoYXJhY3RlcgogICAgICBjb25zdCBmb3JtYXRzID0gdGhpcy5xdWlsbC5nZXRGb3JtYXQocmFuZ2UuaW5kZXgsIDEpOwogICAgICB0aGlzLmRlbGV0ZVJhbmdlKHJhbmdlKTsKICAgICAgdGhpcy5xdWlsbC51cGRhdGVDb250ZW50cyhuZXcgRGVsdGEoKS5yZXRhaW4ocmFuZ2UuaW5kZXgpLmluc2VydCh0ZXh0LCBmb3JtYXRzKSwgUXVpbGwuc291cmNlcy5VU0VSKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuZGVsZXRlUmFuZ2UocmFuZ2UpOwogICAgfQogICAgdGhpcy5xdWlsbC5zZXRTZWxlY3Rpb24ocmFuZ2UuaW5kZXggKyB0ZXh0Lmxlbmd0aCwgMCwgUXVpbGwuc291cmNlcy5TSUxFTlQpOwogICAgcmV0dXJuIHRydWU7CiAgfQogIGhhbmRsZUJlZm9yZUlucHV0KGV2ZW50KSB7CiAgICBpZiAodGhpcy5xdWlsbC5jb21wb3NpdGlvbi5pc0NvbXBvc2luZyB8fCBldmVudC5kZWZhdWx0UHJldmVudGVkIHx8ICFJTlNFUlRfVFlQRVMuaW5jbHVkZXMoZXZlbnQuaW5wdXRUeXBlKSkgewogICAgICByZXR1cm47CiAgICB9CiAgICBjb25zdCBzdGF0aWNSYW5nZSA9IGV2ZW50LmdldFRhcmdldFJhbmdlcyA/IGV2ZW50LmdldFRhcmdldFJhbmdlcygpWzBdIDogbnVsbDsKICAgIGlmICghc3RhdGljUmFuZ2UgfHwgc3RhdGljUmFuZ2UuY29sbGFwc2VkID09PSB0cnVlKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGNvbnN0IHRleHQgPSBnZXRQbGFpblRleHRGcm9tSW5wdXRFdmVudChldmVudCk7CiAgICBpZiAodGV4dCA9PSBudWxsKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB0aGlzLnF1aWxsLnNlbGVjdGlvbi5ub3JtYWxpemVOYXRpdmUoc3RhdGljUmFuZ2UpOwogICAgY29uc3QgcmFuZ2UgPSBub3JtYWxpemVkID8gdGhpcy5xdWlsbC5zZWxlY3Rpb24ubm9ybWFsaXplZFRvUmFuZ2Uobm9ybWFsaXplZCkgOiBudWxsOwogICAgaWYgKHJhbmdlICYmIHRoaXMucmVwbGFjZVRleHQocmFuZ2UsIHRleHQpKSB7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICB9CiAgfQogIGhhbmRsZUNvbXBvc2l0aW9uU3RhcnQoKSB7CiAgICBjb25zdCByYW5nZSA9IHRoaXMucXVpbGwuZ2V0U2VsZWN0aW9uKCk7CiAgICBpZiAocmFuZ2UpIHsKICAgICAgdGhpcy5yZXBsYWNlVGV4dChyYW5nZSk7CiAgICB9CiAgfQp9CmZ1bmN0aW9uIGdldFBsYWluVGV4dEZyb21JbnB1dEV2ZW50KGV2ZW50KSB7CiAgdmFyIF9ldmVudCRkYXRhVHJhbnNmZXI7CiAgLy8gV2hlbiBgaW5wdXRUeXBlYCBpcyAiaW5zZXJ0VGV4dCI6CiAgLy8gLSBgZXZlbnQuZGF0YWAgc2hvdWxkIGJlIHN0cmluZyAoU2FmYXJpIHVzZXMgYGV2ZW50LmRhdGFUcmFuc2ZlcmApLgogIC8vIC0gYGV2ZW50LmRhdGFUcmFuc2ZlcmAgc2hvdWxkIGJlIG51bGwuCiAgLy8gV2hlbiBgaW5wdXRUeXBlYCBpcyAiaW5zZXJ0UmVwbGFjZW1lbnRUZXh0IjoKICAvLyAtIGBldmVudC5kYXRhYCBzaG91bGQgYmUgbnVsbC4KICAvLyAtIGBldmVudC5kYXRhVHJhbnNmZXJgIHNob3VsZCBjb250YWluICJ0ZXh0L3BsYWluIiBkYXRhLgoKICBpZiAodHlwZW9mIGV2ZW50LmRhdGEgPT09ICdzdHJpbmcnKSB7CiAgICByZXR1cm4gZXZlbnQuZGF0YTsKICB9CiAgaWYgKChfZXZlbnQkZGF0YVRyYW5zZmVyID0gZXZlbnQuZGF0YVRyYW5zZmVyKSAhPT0gbnVsbCAmJiBfZXZlbnQkZGF0YVRyYW5zZmVyICE9PSB2b2lkIDAgJiYgX2V2ZW50JGRhdGFUcmFuc2Zlci50eXBlcy5pbmNsdWRlcygndGV4dC9wbGFpbicpKSB7CiAgICByZXR1cm4gZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKTsKICB9CiAgcmV0dXJuIG51bGw7Cn0KZXhwb3J0IGRlZmF1bHQgSW5wdXQ7"},{"version":3,"names":["Delta","Module","Quill","deleteRange","INSERT_TYPES","Input","constructor","quill","options","root","addEventListener","event","handleBeforeInput","test","navigator","userAgent","on","events","COMPOSITION_BEFORE_START","handleCompositionStart","range","replaceText","text","arguments","length","undefined","formats","getFormat","index","updateContents","retain","insert","sources","USER","setSelection","SILENT","composition","isComposing","defaultPrevented","includes","inputType","staticRange","getTargetRanges","collapsed","getPlainTextFromInputEvent","normalized","selection","normalizeNative","normalizedToRange","preventDefault","getSelection","_event$dataTransfer","data","dataTransfer","types","getData"],"sources":["../../src/modules/input.ts"],"sourcesContent":["import Delta from 'quill-delta';\nimport Module from '../core/module.js';\nimport Quill from '../core/quill.js';\nimport type { Range } from '../core/selection.js';\nimport { deleteRange } from './keyboard.js';\n\nconst INSERT_TYPES = ['insertText', 'insertReplacementText'];\n\nclass Input extends Module {\n  constructor(quill: Quill, options: Record<string, never>) {\n    super(quill, options);\n\n    quill.root.addEventListener('beforeinput', (event) => {\n      this.handleBeforeInput(event);\n    });\n\n    // Gboard with English input on Android triggers `compositionstart` sometimes even\n    // users are not going to type anything.\n    if (!/Android/i.test(navigator.userAgent)) {\n      quill.on(Quill.events.COMPOSITION_BEFORE_START, () => {\n        this.handleCompositionStart();\n      });\n    }\n  }\n\n  private deleteRange(range: Range) {\n    deleteRange({ range, quill: this.quill });\n  }\n\n  private replaceText(range: Range, text = '') {\n    if (range.length === 0) return false;\n\n    if (text) {\n      // Follow the native behavior that inherits the formats of the first character\n      const formats = this.quill.getFormat(range.index, 1);\n      this.deleteRange(range);\n      this.quill.updateContents(\n        new Delta().retain(range.index).insert(text, formats),\n        Quill.sources.USER,\n      );\n    } else {\n      this.deleteRange(range);\n    }\n\n    this.quill.setSelection(range.index + text.length, 0, Quill.sources.SILENT);\n    return true;\n  }\n\n  private handleBeforeInput(event: InputEvent) {\n    if (\n      this.quill.composition.isComposing ||\n      event.defaultPrevented ||\n      !INSERT_TYPES.includes(event.inputType)\n    ) {\n      return;\n    }\n\n    const staticRange = event.getTargetRanges\n      ? event.getTargetRanges()[0]\n      : null;\n    if (!staticRange || staticRange.collapsed === true) {\n      return;\n    }\n\n    const text = getPlainTextFromInputEvent(event);\n    if (text == null) {\n      return;\n    }\n    const normalized = this.quill.selection.normalizeNative(staticRange);\n    const range = normalized\n      ? this.quill.selection.normalizedToRange(normalized)\n      : null;\n    if (range && this.replaceText(range, text)) {\n      event.preventDefault();\n    }\n  }\n\n  private handleCompositionStart() {\n    const range = this.quill.getSelection();\n    if (range) {\n      this.replaceText(range);\n    }\n  }\n}\n\nfunction getPlainTextFromInputEvent(event: InputEvent) {\n  // When `inputType` is \"insertText\":\n  // - `event.data` should be string (Safari uses `event.dataTransfer`).\n  // - `event.dataTransfer` should be null.\n  // When `inputType` is \"insertReplacementText\":\n  // - `event.data` should be null.\n  // - `event.dataTransfer` should contain \"text/plain\" data.\n\n  if (typeof event.data === 'string') {\n    return event.data;\n  }\n  if (event.dataTransfer?.types.includes('text/plain')) {\n    return event.dataTransfer.getData('text/plain');\n  }\n  return null;\n}\n\nexport default Input;\n"],"mappings":"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","ignoreList":[]}]}