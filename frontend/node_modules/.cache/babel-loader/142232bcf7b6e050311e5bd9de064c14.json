{"remainingRequest":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\admin\\CompanyManagement.vue?vue&type=script&setup=true&lang=js","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\admin\\CompanyManagement.vue","mtime":1750381762761},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\babel.config.js","mtime":1748077811200},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1746431218000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVmLCByZWFjdGl2ZSwgb25Nb3VudGVkIH0gZnJvbSAndnVlJzsKaW1wb3J0IGFkbWluQXBpIGZyb20gJ0AvYXBpL2FkbWluJzsKaW1wb3J0IHsgRWxNZXNzYWdlLCBFbE1lc3NhZ2VCb3gsIEVsQ2FyZCwgRWxJY29uLCBFbElucHV0LCBFbEJ1dHRvbiwgRWxUYWJsZSwgRWxUYWJsZUNvbHVtbiwgRWxQYWdpbmF0aW9uLCBFbERpYWxvZywgRWxGb3JtLCBFbEZvcm1JdGVtIH0gZnJvbSAnZWxlbWVudC1wbHVzJzsKaW1wb3J0IHsgT2ZmaWNlQnVpbGRpbmcsIFNlYXJjaCwgUGx1cyB9IGZyb20gJ0BlbGVtZW50LXBsdXMvaWNvbnMtdnVlJzsKZXhwb3J0IGRlZmF1bHQgewogIF9fbmFtZTogJ0NvbXBhbnlNYW5hZ2VtZW50JywKICBzZXR1cChfX3Byb3BzLCB7CiAgICBleHBvc2U6IF9fZXhwb3NlCiAgfSkgewogICAgX19leHBvc2UoKTsKICAgIGNvbnN0IGNvbXBhbmllcyA9IHJlZihbXSk7CiAgICBjb25zdCBsb2FkaW5nID0gcmVmKHRydWUpOwogICAgY29uc3Qgc2VhcmNoUXVlcnkgPSByZWYoJycpOwogICAgY29uc3QgdG90YWwgPSByZWYoMCk7CiAgICBjb25zdCBwYWdpbmF0aW9uID0gcmVhY3RpdmUoewogICAgICBwYWdlOiAxLAogICAgICBwYWdlU2l6ZTogMTAKICAgIH0pOwogICAgY29uc3QgaXNNb2RhbE9wZW4gPSByZWYoZmFsc2UpOwogICAgY29uc3QgY3VycmVudEl0ZW0gPSByZWYoe30pOwogICAgY29uc3QgaXRlbUZvcm0gPSByZWYobnVsbCk7CiAgICBsZXQgc2VhcmNoVGltZW91dCA9IG51bGw7CiAgICBjb25zdCBmZXRjaENvbXBhbmllcyA9IGFzeW5jICgpID0+IHsKICAgICAgbG9hZGluZy52YWx1ZSA9IHRydWU7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcGFyYW1zID0gewogICAgICAgICAgc2VhcmNoOiBzZWFyY2hRdWVyeS52YWx1ZSwKICAgICAgICAgIHBhZ2U6IHBhZ2luYXRpb24ucGFnZSwKICAgICAgICAgIHBhZ2Vfc2l6ZTogcGFnaW5hdGlvbi5wYWdlU2l6ZQogICAgICAgIH07CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhZG1pbkFwaS5nZXRDb21wYW5pZXMocGFyYW1zKTsKICAgICAgICBjb21wYW5pZXMudmFsdWUgPSByZXNwb25zZS5kYXRhLnJlc3VsdHM7CiAgICAgICAgdG90YWwudmFsdWUgPSByZXNwb25zZS5kYXRhLmNvdW50OwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoIuiOt+WPluWFrOWPuOWIl+ihqOWksei0pToiLCBlcnJvcik7CiAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfojrflj5blhazlj7jliJfooajlpLHotKUnKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBsb2FkaW5nLnZhbHVlID0gZmFsc2U7CiAgICAgIH0KICAgIH07CiAgICBjb25zdCBkZWJvdW5jZWRGZXRjaENvbXBhbmllcyA9ICgpID0+IHsKICAgICAgY2xlYXJUaW1lb3V0KHNlYXJjaFRpbWVvdXQpOwogICAgICBzZWFyY2hUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgcGFnaW5hdGlvbi5wYWdlID0gMTsgLy8gUmVzZXQgb24gc2VhcmNoCiAgICAgICAgZmV0Y2hDb21wYW5pZXMoKTsKICAgICAgfSwgMzAwKTsKICAgIH07CiAgICBjb25zdCBvcGVuTW9kYWwgPSAoaXRlbSA9IHt9KSA9PiB7CiAgICAgIGlmIChpdGVtICYmIGl0ZW0uaWQpIHsKICAgICAgICBjdXJyZW50SXRlbS52YWx1ZSA9IHsKICAgICAgICAgIC4uLml0ZW0KICAgICAgICB9OwogICAgICB9IGVsc2UgewogICAgICAgIGN1cnJlbnRJdGVtLnZhbHVlID0gewogICAgICAgICAgbmFtZTogJycsCiAgICAgICAgICBpbmR1c3RyeTogJycsCiAgICAgICAgICBzaXplOiAnJywKICAgICAgICAgIGFkZHJlc3M6ICcnLAogICAgICAgICAgd2Vic2l0ZTogJycsCiAgICAgICAgICBwaG9uZTogJycKICAgICAgICB9OwogICAgICB9CiAgICAgIGlzTW9kYWxPcGVuLnZhbHVlID0gdHJ1ZTsKICAgIH07CiAgICBjb25zdCBjbG9zZU1vZGFsID0gKCkgPT4gewogICAgICB2YXIgX2l0ZW1Gb3JtJHZhbHVlOwogICAgICBpc01vZGFsT3Blbi52YWx1ZSA9IGZhbHNlOwogICAgICAoX2l0ZW1Gb3JtJHZhbHVlID0gaXRlbUZvcm0udmFsdWUpID09PSBudWxsIHx8IF9pdGVtRm9ybSR2YWx1ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2l0ZW1Gb3JtJHZhbHVlLnJlc2V0RmllbGRzKCk7CiAgICB9OwogICAgY29uc3Qgc2F2ZUl0ZW0gPSBhc3luYyAoKSA9PiB7CiAgICAgIGlmICghaXRlbUZvcm0udmFsdWUpIHJldHVybjsKICAgICAgYXdhaXQgaXRlbUZvcm0udmFsdWUudmFsaWRhdGUoYXN5bmMgdmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKGN1cnJlbnRJdGVtLnZhbHVlLmlkKSB7CiAgICAgICAgICAgICAgYXdhaXQgYWRtaW5BcGkudXBkYXRlQ29tcGFueShjdXJyZW50SXRlbS52YWx1ZS5pZCwgY3VycmVudEl0ZW0udmFsdWUpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGF3YWl0IGFkbWluQXBpLmNyZWF0ZUNvbXBhbnkoY3VycmVudEl0ZW0udmFsdWUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNsb3NlTW9kYWwoKTsKICAgICAgICAgICAgZmV0Y2hDb21wYW5pZXMoKTsKICAgICAgICAgICAgRWxNZXNzYWdlLnN1Y2Nlc3MoJ+WFrOWPuOS/oeaBr+S/neWtmOaIkOWKn++8gScpOwogICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcigi5L+d5a2Y5YWs5Y+45aSx6LSlOiIsIGVycm9yKTsKICAgICAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfkv53lrZjlhazlj7jlpLHotKXvvIzor7fnqI3lkI7ph43or5UnKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfTsKICAgIGNvbnN0IGNvbmZpcm1EZWxldGUgPSBpdGVtID0+IHsKICAgICAgRWxNZXNzYWdlQm94LmNvbmZpcm0oYOehruWumuimgeWIoOmZpOWFrOWPuOOAkCR7aXRlbS5uYW1lfeOAkeWQl++8n+WIoOmZpOWQju+8jOivpeWFrOWPuOS4i+eahOaJgOacieeUqOaIt+WSjOmDqOmXqOS/oeaBr+mDveWwhuS4ouWkse+8jOatpOaTjeS9nOS4jeWPr+aBouWkjeOAgmAsICfkuKXph43orablkYonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrprliKDpmaQnLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgICAgY2VudGVyOiB0cnVlCiAgICAgIH0pLnRoZW4oYXN5bmMgKCkgPT4gewogICAgICAgIHRyeSB7CiAgICAgICAgICBhd2FpdCBhZG1pbkFwaS5kZWxldGVDb21wYW55KGl0ZW0uaWQpOwogICAgICAgICAgRWxNZXNzYWdlLnN1Y2Nlc3MoJ+WFrOWPuOWIoOmZpOaIkOWKnycpOwogICAgICAgICAgZmV0Y2hDb21wYW5pZXMoKTsKICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfliKDpmaTlpLHotKXvvIzor7fnqI3lkI7ph43or5UnKTsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIuWIoOmZpOWFrOWPuOWksei0pToiLCBlcnJvcik7CiAgICAgICAgfQogICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgRWxNZXNzYWdlLmluZm8oJ+W3suWPlua2iOWIoOmZpCcpOwogICAgICB9KTsKICAgIH07CiAgICBjb25zdCBoYW5kbGVTaXplQ2hhbmdlID0gdmFsID0+IHsKICAgICAgcGFnaW5hdGlvbi5wYWdlU2l6ZSA9IHZhbDsKICAgICAgZmV0Y2hDb21wYW5pZXMoKTsKICAgIH07CiAgICBjb25zdCBoYW5kbGVDdXJyZW50Q2hhbmdlID0gdmFsID0+IHsKICAgICAgcGFnaW5hdGlvbi5wYWdlID0gdmFsOwogICAgICBmZXRjaENvbXBhbmllcygpOwogICAgfTsKICAgIG9uTW91bnRlZChmZXRjaENvbXBhbmllcyk7CiAgICBjb25zdCBfX3JldHVybmVkX18gPSB7CiAgICAgIGNvbXBhbmllcywKICAgICAgbG9hZGluZywKICAgICAgc2VhcmNoUXVlcnksCiAgICAgIHRvdGFsLAogICAgICBwYWdpbmF0aW9uLAogICAgICBpc01vZGFsT3BlbiwKICAgICAgY3VycmVudEl0ZW0sCiAgICAgIGl0ZW1Gb3JtLAogICAgICBnZXQgc2VhcmNoVGltZW91dCgpIHsKICAgICAgICByZXR1cm4gc2VhcmNoVGltZW91dDsKICAgICAgfSwKICAgICAgc2V0IHNlYXJjaFRpbWVvdXQodikgewogICAgICAgIHNlYXJjaFRpbWVvdXQgPSB2OwogICAgICB9LAogICAgICBmZXRjaENvbXBhbmllcywKICAgICAgZGVib3VuY2VkRmV0Y2hDb21wYW5pZXMsCiAgICAgIG9wZW5Nb2RhbCwKICAgICAgY2xvc2VNb2RhbCwKICAgICAgc2F2ZUl0ZW0sCiAgICAgIGNvbmZpcm1EZWxldGUsCiAgICAgIGhhbmRsZVNpemVDaGFuZ2UsCiAgICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UsCiAgICAgIHJlZiwKICAgICAgcmVhY3RpdmUsCiAgICAgIG9uTW91bnRlZCwKICAgICAgZ2V0IGFkbWluQXBpKCkgewogICAgICAgIHJldHVybiBhZG1pbkFwaTsKICAgICAgfSwKICAgICAgZ2V0IEVsTWVzc2FnZSgpIHsKICAgICAgICByZXR1cm4gRWxNZXNzYWdlOwogICAgICB9LAogICAgICBnZXQgRWxNZXNzYWdlQm94KCkgewogICAgICAgIHJldHVybiBFbE1lc3NhZ2VCb3g7CiAgICAgIH0sCiAgICAgIGdldCBFbENhcmQoKSB7CiAgICAgICAgcmV0dXJuIEVsQ2FyZDsKICAgICAgfSwKICAgICAgZ2V0IEVsSWNvbigpIHsKICAgICAgICByZXR1cm4gRWxJY29uOwogICAgICB9LAogICAgICBnZXQgRWxJbnB1dCgpIHsKICAgICAgICByZXR1cm4gRWxJbnB1dDsKICAgICAgfSwKICAgICAgZ2V0IEVsQnV0dG9uKCkgewogICAgICAgIHJldHVybiBFbEJ1dHRvbjsKICAgICAgfSwKICAgICAgZ2V0IEVsVGFibGUoKSB7CiAgICAgICAgcmV0dXJuIEVsVGFibGU7CiAgICAgIH0sCiAgICAgIGdldCBFbFRhYmxlQ29sdW1uKCkgewogICAgICAgIHJldHVybiBFbFRhYmxlQ29sdW1uOwogICAgICB9LAogICAgICBnZXQgRWxQYWdpbmF0aW9uKCkgewogICAgICAgIHJldHVybiBFbFBhZ2luYXRpb247CiAgICAgIH0sCiAgICAgIGdldCBFbERpYWxvZygpIHsKICAgICAgICByZXR1cm4gRWxEaWFsb2c7CiAgICAgIH0sCiAgICAgIGdldCBFbEZvcm0oKSB7CiAgICAgICAgcmV0dXJuIEVsRm9ybTsKICAgICAgfSwKICAgICAgZ2V0IEVsRm9ybUl0ZW0oKSB7CiAgICAgICAgcmV0dXJuIEVsRm9ybUl0ZW07CiAgICAgIH0sCiAgICAgIGdldCBPZmZpY2VCdWlsZGluZygpIHsKICAgICAgICByZXR1cm4gT2ZmaWNlQnVpbGRpbmc7CiAgICAgIH0sCiAgICAgIGdldCBTZWFyY2goKSB7CiAgICAgICAgcmV0dXJuIFNlYXJjaDsKICAgICAgfSwKICAgICAgZ2V0IFBsdXMoKSB7CiAgICAgICAgcmV0dXJuIFBsdXM7CiAgICAgIH0KICAgIH07CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX19yZXR1cm5lZF9fLCAnX19pc1NjcmlwdFNldHVwJywgewogICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgdmFsdWU6IHRydWUKICAgIH0pOwogICAgcmV0dXJuIF9fcmV0dXJuZWRfXzsKICB9Cn07"},{"version":3,"names":["ref","reactive","onMounted","adminApi","ElMessage","ElMessageBox","ElCard","ElIcon","ElInput","ElButton","ElTable","ElTableColumn","ElPagination","ElDialog","ElForm","ElFormItem","OfficeBuilding","Search","Plus","companies","loading","searchQuery","total","pagination","page","pageSize","isModalOpen","currentItem","itemForm","searchTimeout","fetchCompanies","value","params","search","page_size","response","getCompanies","data","results","count","error","console","debouncedFetchCompanies","clearTimeout","setTimeout","openModal","item","id","name","industry","size","address","website","phone","closeModal","_itemForm$value","resetFields","saveItem","validate","valid","updateCompany","createCompany","success","confirmDelete","confirm","confirmButtonText","cancelButtonText","type","center","then","deleteCompany","catch","info","handleSizeChange","val","handleCurrentChange"],"sources":["C:/Users/18083/Desktop/CCIT/office/smart-office/frontend/src/views/admin/CompanyManagement.vue"],"sourcesContent":["<template>\n  <div class=\"management-container\">\n    <el-card class=\"box-card\">\n      <template #header>\n        <div class=\"card-header\">\n          <div class=\"header-left\">\n            <el-icon class=\"header-icon\"><OfficeBuilding /></el-icon>\n            <span>公司管理</span>\n          </div>\n          <div class=\"header-right\">\n            <el-input\n              v-model=\"searchQuery\"\n              placeholder=\"搜索公司...\"\n              clearable\n              @clear=\"fetchCompanies\"\n              @input=\"debouncedFetchCompanies\"\n              class=\"search-input\"\n            >\n              <template #append>\n                <el-button :icon=\"Search\" />\n              </template>\n            </el-input>\n            <el-button type=\"primary\" :icon=\"Plus\" @click=\"openModal()\">添加公司</el-button>\n          </div>\n        </div>\n      </template>\n      <div class=\"table-container\">\n        <el-table :data=\"companies\" v-loading=\"loading\" style=\"width: 100%\">\n          <el-table-column type=\"index\" label=\"序号\" width=\"60\" />\n          <el-table-column prop=\"name\" label=\"公司名称\" sortable />\n          <el-table-column prop=\"industry\" label=\"行业\" sortable />\n          <el-table-column prop=\"size\" label=\"规模\" sortable />\n          <el-table-column prop=\"address\" label=\"地址\" min-width=\"150\" />\n          <el-table-column label=\"操作\" width=\"120\">\n            <template #default=\"scope\">\n              <el-button text type=\"primary\" size=\"small\" @click=\"openModal(scope.row)\">编辑</el-button>\n              <el-button text type=\"danger\" size=\"small\" @click=\"confirmDelete(scope.row)\">删除</el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n      </div>\n\n      <div class=\"pagination-container\">\n        <el-pagination\n          v-model:current-page=\"pagination.page\"\n          v-model:page-size=\"pagination.pageSize\"\n          :page-sizes=\"[10, 20, 50, 100]\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"total\"\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n        />\n      </div>\n\n      <!-- 添加/编辑模态框 -->\n      <el-dialog v-model=\"isModalOpen\" :title=\"currentItem.id ? '编辑公司' : '添加公司'\" width=\"500px\">\n        <el-form :model=\"currentItem\" ref=\"itemForm\" label-width=\"80px\">\n          <el-form-item label=\"公司名称\" prop=\"name\" :rules=\"[{ required: true, message: '请输入公司名称' }]\">\n            <el-input v-model=\"currentItem.name\" />\n          </el-form-item>\n          <el-form-item label=\"行业\" prop=\"industry\" :rules=\"[{ required: true, message: '请输入行业' }]\">\n            <el-input v-model=\"currentItem.industry\" />\n          </el-form-item>\n          <el-form-item label=\"规模\" prop=\"size\" :rules=\"[{ required: true, message: '请输入公司规模' }]\">\n            <el-input v-model=\"currentItem.size\" />\n          </el-form-item>\n          <el-form-item label=\"地址\" prop=\"address\" :rules=\"[{ required: true, message: '请输入地址' }]\">\n            <el-input v-model=\"currentItem.address\" />\n          </el-form-item>\n          <el-form-item label=\"网站\" prop=\"website\" :rules=\"[{ required: true, message: '请输入网站' }]\">\n            <el-input v-model=\"currentItem.website\" />\n          </el-form-item>\n          <el-form-item label=\"联系电话\" prop=\"phone\" :rules=\"[{ required: true, message: '请输入联系电话' }]\">\n            <el-input v-model=\"currentItem.phone\" />\n          </el-form-item>\n        </el-form>\n        <template #footer>\n          <span class=\"dialog-footer\">\n            <el-button @click=\"closeModal\">取消</el-button>\n            <el-button type=\"primary\" @click=\"saveItem\">保存</el-button>\n          </span>\n        </template>\n      </el-dialog>\n    </el-card>\n  </div>\n</template>\n\n<script setup>\nimport { ref, reactive, onMounted } from 'vue';\nimport adminApi from '@/api/admin';\nimport { ElMessage, ElMessageBox, ElCard, ElIcon, ElInput, ElButton, ElTable, ElTableColumn, ElPagination, ElDialog, ElForm, ElFormItem } from 'element-plus';\nimport { OfficeBuilding, Search, Plus } from '@element-plus/icons-vue';\n\nconst companies = ref([]);\nconst loading = ref(true);\nconst searchQuery = ref('');\nconst total = ref(0);\nconst pagination = reactive({\n  page: 1,\n  pageSize: 10,\n});\nconst isModalOpen = ref(false);\nconst currentItem = ref({});\nconst itemForm = ref(null);\nlet searchTimeout = null;\n\nconst fetchCompanies = async () => {\n  loading.value = true;\n  try {\n    const params = { \n      search: searchQuery.value,\n      page: pagination.page,\n      page_size: pagination.pageSize,\n    };\n    const response = await adminApi.getCompanies(params);\n    companies.value = response.data.results;\n    total.value = response.data.count;\n  } catch (error) {\n    console.error(\"获取公司列表失败:\", error);\n    ElMessage.error('获取公司列表失败');\n  } finally {\n    loading.value = false;\n  }\n};\n\nconst debouncedFetchCompanies = () => {\n  clearTimeout(searchTimeout);\n  searchTimeout = setTimeout(() => {\n    pagination.page = 1; // Reset on search\n    fetchCompanies();\n  }, 300);\n};\n\nconst openModal = (item = {}) => {\n  if (item && item.id) {\n    currentItem.value = { ...item };\n  } else {\n    currentItem.value = {\n      name: '',\n      industry: '',\n      size: '',\n      address: '',\n      website: '',\n      phone: ''\n    };\n  }\n  isModalOpen.value = true;\n};\n\nconst closeModal = () => {\n  isModalOpen.value = false;\n  itemForm.value?.resetFields();\n};\n\nconst saveItem = async () => {\n  if (!itemForm.value) return;\n  await itemForm.value.validate(async (valid) => {\n    if (valid) {\n      try {\n        if (currentItem.value.id) {\n          await adminApi.updateCompany(currentItem.value.id, currentItem.value);\n        } else {\n          await adminApi.createCompany(currentItem.value);\n        }\n        closeModal();\n        fetchCompanies();\n        ElMessage.success('公司信息保存成功！');\n      } catch (error) {\n        console.error(\"保存公司失败:\", error);\n        ElMessage.error('保存公司失败，请稍后重试');\n      }\n    }\n  });\n};\n\nconst confirmDelete = (item) => {\n  ElMessageBox.confirm(\n    `确定要删除公司【${item.name}】吗？删除后，该公司下的所有用户和部门信息都将丢失，此操作不可恢复。`,\n    '严重警告',\n    {\n      confirmButtonText: '确定删除',\n      cancelButtonText: '取消',\n      type: 'error',\n      center: true,\n    }\n  ).then(async () => {\n    try {\n      await adminApi.deleteCompany(item.id);\n      ElMessage.success('公司删除成功');\n      fetchCompanies();\n    } catch (error) {\n      ElMessage.error('删除失败，请稍后重试');\n      console.error(\"删除公司失败:\", error);\n    }\n  }).catch(() => {\n    ElMessage.info('已取消删除');\n  });\n};\n\nconst handleSizeChange = (val) => {\n  pagination.pageSize = val;\n  fetchCompanies();\n};\n\nconst handleCurrentChange = (val) => {\n  pagination.page = val;\n  fetchCompanies();\n};\n\nonMounted(fetchCompanies);\n</script>\n\n<style scoped>\n@import './shared-styles.css';\n\n.management-container {\n  padding: 20px;\n}\n</style> \n "],"mappings":"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","ignoreList":[]}]}