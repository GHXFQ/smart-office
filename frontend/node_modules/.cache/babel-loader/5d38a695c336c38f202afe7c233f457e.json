{"remainingRequest":"C:\\Users\\18083\\Desktop\\offic_ai\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18083\\Desktop\\offic_ai\\office\\smart-office\\frontend\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\18083\\Desktop\\offic_ai\\office\\smart-office\\frontend\\src\\api\\auth.js","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\offic_ai\\office\\smart-office\\frontend\\src\\api\\auth.js","mtime":1746682438092},{"path":"C:\\Users\\18083\\Desktop\\offic_ai\\office\\smart-office\\frontend\\babel.config.js","mtime":1746431728272},{"path":"C:\\Users\\18083\\Desktop\\offic_ai\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218359},{"path":"C:\\Users\\18083\\Desktop\\offic_ai\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202324},{"path":"C:\\Users\\18083\\Desktop\\offic_ai\\office\\smart-office\\frontend\\node_modules\\eslint-loader\\index.js","mtime":1746431218362}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKCi8vIOWIm+W7umF4aW9z5a6e5L6LCmNvbnN0IGFwaSA9IGF4aW9zLmNyZWF0ZSh7CiAgYmFzZVVSTDogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMCcsCiAgdGltZW91dDogMTAwMDAsCiAgaGVhZGVyczogewogICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogIH0KfSk7CgovLyDor7fmsYLmi6bmiKrlmaggLSDmt7vliqDorqTor4F0b2tlbgphcGkuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGNvbmZpZyA9PiB7CiAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTsKICBpZiAodG9rZW4pIHsKICAgIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSBgQmVhcmVyICR7dG9rZW59YDsKICB9CiAgcmV0dXJuIGNvbmZpZzsKfSwgZXJyb3IgPT4gewogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwoKLy8g5ZON5bqU5oum5oiq5ZmoIC0g5aSE55CG5bi46KeB6ZSZ6K+vCmFwaS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKHJlc3BvbnNlID0+IHsKICByZXR1cm4gcmVzcG9uc2UuZGF0YTsKfSwgZXJyb3IgPT4gewogIC8vIOmUmeivr+ivpue7huaXpeW/lwogIGNvbnNvbGUuZXJyb3IoJ0FQSemUmeivrzonLCBlcnJvci5yZXNwb25zZSB8fCBlcnJvcik7CiAgaWYgKGVycm9yLnJlc3BvbnNlICYmIGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7CiAgICAvLyDmuIXpmaTmnKzlnLB0b2tlbuS/oeaBrwogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7CiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndXNlcicpOwoKICAgIC8vIOWPquacieW9k+WJjeS4jeWcqOeZu+W9lemhtemdouaXtuaJjemHjeWumuWQkQogICAgY29uc3QgY3VycmVudFBhdGggPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7CiAgICBpZiAoY3VycmVudFBhdGggIT09ICcvbG9naW4nICYmIGN1cnJlbnRQYXRoICE9PSAnLycpIHsKICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2xvZ2luJzsKICAgIH0KICB9CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7CgovLyDorqTor4Hnm7jlhbNBUEkKZXhwb3J0IGRlZmF1bHQgewogIC8vIOeUqOaIt+eZu+W9lQogIGxvZ2luKGRhdGEpIHsKICAgIHJldHVybiBhcGkucG9zdCgnL2FwaS9hdXRoL2xvZ2luLycsIGRhdGEpOwogIH0sCiAgLy8g55So5oi35rOo5YaMCiAgcmVnaXN0ZXIoZGF0YSkgewogICAgY29uc29sZS5sb2coJ+WPkemAgeazqOWGjOivt+axgjonLCBkYXRhKTsKICAgIHJldHVybiBhcGkucG9zdCgnL2FwaS9hdXRoL3JlZ2lzdGVyLycsIGRhdGEsIHsKICAgICAgaGVhZGVyczogewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsCiAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICB9CiAgICB9KTsKICB9LAogIC8vIOeUqOaIt+eZu+WHugogIGxvZ291dCgpIHsKICAgIHJldHVybiBhcGkucG9zdCgnL2FwaS9hdXRoL2xvZ291dC8nKTsKICB9LAogIC8vIOivt+axgumHjee9ruWvhueggQogIHJlcXVlc3RQYXNzd29yZFJlc2V0KGRhdGEpIHsKICAgIHJldHVybiBhcGkucG9zdCgnL2FwaS9hdXRoL3Bhc3N3b3JkL3JlcXVlc3QtcmVzZXQvJywgZGF0YSk7CiAgfSwKICAvLyDph43nva7lr4bnoIEKICByZXNldFBhc3N3b3JkKGRhdGEpIHsKICAgIHJldHVybiBhcGkucG9zdCgnL2FwaS9hdXRoL3Bhc3N3b3JkL3Jlc2V0LycsIGRhdGEpOwogIH0KfTs="},{"version":3,"names":["axios","api","create","baseURL","timeout","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","error","Promise","reject","response","data","console","status","removeItem","currentPath","window","location","pathname","href","login","post","register","log","logout","requestPasswordReset","resetPassword"],"sources":["C:/Users/18083/Desktop/offic_ai/office/smart-office/frontend/src/api/auth.js"],"sourcesContent":["import axios from 'axios';\n\n// 创建axios实例\nconst api = axios.create({\n  baseURL: 'http://localhost:8000',\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// 请求拦截器 - 添加认证token\napi.interceptors.request.use(\n  config => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  error => {\n    return Promise.reject(error);\n  }\n);\n\n// 响应拦截器 - 处理常见错误\napi.interceptors.response.use(\n  response => {\n    return response.data;\n  },\n  error => {\n    // 错误详细日志\n    console.error('API错误:', error.response || error);\n    \n    if (error.response && error.response.status === 401) {\n      // 清除本地token信息\n      localStorage.removeItem('token');\n      localStorage.removeItem('user');\n      \n      // 只有当前不在登录页面时才重定向\n      const currentPath = window.location.pathname;\n      if (currentPath !== '/login' && currentPath !== '/') {\n        window.location.href = '/login';\n      }\n    }\n    return Promise.reject(error);\n  }\n);\n\n// 认证相关API\nexport default {\n  // 用户登录\n  login(data) {\n    return api.post('/api/auth/login/', data);\n  },\n  \n  // 用户注册\n  register(data) {\n    console.log('发送注册请求:', data);\n    return api.post('/api/auth/register/', data, {\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n      }\n    });\n  },\n  \n  // 用户登出\n  logout() {\n    return api.post('/api/auth/logout/');\n  },\n  \n  // 请求重置密码\n  requestPasswordReset(data) {\n    return api.post('/api/auth/password/request-reset/', data);\n  },\n  \n  // 重置密码\n  resetPassword(data) {\n    return api.post('/api/auth/password/reset/', data);\n  }\n}; "],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;;AAEzB;AACA,MAAMC,GAAG,GAAGD,KAAK,CAACE,MAAM,CAAC;EACvBC,OAAO,EAAE,uBAAuB;EAChCC,OAAO,EAAE,KAAK;EACdC,OAAO,EAAE;IACP,cAAc,EAAE;EAClB;AACF,CAAC,CAAC;;AAEF;AACAJ,GAAG,CAACK,YAAY,CAACC,OAAO,CAACC,GAAG,CAC1BC,MAAM,IAAI;EACR,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAIF,KAAK,EAAE;IACTD,MAAM,CAACJ,OAAO,CAACQ,aAAa,GAAG,UAAUH,KAAK,EAAE;EAClD;EACA,OAAOD,MAAM;AACf,CAAC,EACDK,KAAK,IAAI;EACP,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;;AAED;AACAb,GAAG,CAACK,YAAY,CAACW,QAAQ,CAACT,GAAG,CAC3BS,QAAQ,IAAI;EACV,OAAOA,QAAQ,CAACC,IAAI;AACtB,CAAC,EACDJ,KAAK,IAAI;EACP;EACAK,OAAO,CAACL,KAAK,CAAC,QAAQ,EAAEA,KAAK,CAACG,QAAQ,IAAIH,KAAK,CAAC;EAEhD,IAAIA,KAAK,CAACG,QAAQ,IAAIH,KAAK,CAACG,QAAQ,CAACG,MAAM,KAAK,GAAG,EAAE;IACnD;IACAT,YAAY,CAACU,UAAU,CAAC,OAAO,CAAC;IAChCV,YAAY,CAACU,UAAU,CAAC,MAAM,CAAC;;IAE/B;IACA,MAAMC,WAAW,GAAGC,MAAM,CAACC,QAAQ,CAACC,QAAQ;IAC5C,IAAIH,WAAW,KAAK,QAAQ,IAAIA,WAAW,KAAK,GAAG,EAAE;MACnDC,MAAM,CAACC,QAAQ,CAACE,IAAI,GAAG,QAAQ;IACjC;EACF;EACA,OAAOX,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;;AAED;AACA,eAAe;EACb;EACAa,KAAKA,CAACT,IAAI,EAAE;IACV,OAAOjB,GAAG,CAAC2B,IAAI,CAAC,kBAAkB,EAAEV,IAAI,CAAC;EAC3C,CAAC;EAED;EACAW,QAAQA,CAACX,IAAI,EAAE;IACbC,OAAO,CAACW,GAAG,CAAC,SAAS,EAAEZ,IAAI,CAAC;IAC5B,OAAOjB,GAAG,CAAC2B,IAAI,CAAC,qBAAqB,EAAEV,IAAI,EAAE;MAC3Cb,OAAO,EAAE;QACP,cAAc,EAAE,kBAAkB;QAClC,QAAQ,EAAE;MACZ;IACF,CAAC,CAAC;EACJ,CAAC;EAED;EACA0B,MAAMA,CAAA,EAAG;IACP,OAAO9B,GAAG,CAAC2B,IAAI,CAAC,mBAAmB,CAAC;EACtC,CAAC;EAED;EACAI,oBAAoBA,CAACd,IAAI,EAAE;IACzB,OAAOjB,GAAG,CAAC2B,IAAI,CAAC,mCAAmC,EAAEV,IAAI,CAAC;EAC5D,CAAC;EAED;EACAe,aAAaA,CAACf,IAAI,EAAE;IAClB,OAAOjB,GAAG,CAAC2B,IAAI,CAAC,2BAA2B,EAAEV,IAAI,CAAC;EACpD;AACF,CAAC","ignoreList":[]}]}