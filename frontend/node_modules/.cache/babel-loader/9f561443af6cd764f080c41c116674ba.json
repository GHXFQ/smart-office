{"remainingRequest":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\smartdoc\\Index.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\smartdoc\\Index.vue","mtime":1748490286936},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\babel.config.js","mtime":1748077811200},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1746431218000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmZvci1lYWNoLmpzIjsKaW1wb3J0IHsgcmVmLCBjb21wdXRlZCwgb25Nb3VudGVkLCBuZXh0VGljaywgZ2V0Q3VycmVudEluc3RhbmNlLCBwcm92aWRlLCBvbkFjdGl2YXRlZCwgd2F0Y2ggfSBmcm9tICd2dWUnOwppbXBvcnQgeyB1c2VSb3V0ZXIsIHVzZVJvdXRlIH0gZnJvbSAndnVlLXJvdXRlcic7CmltcG9ydCB7IEVsTWVzc2FnZSwgRWxNZXNzYWdlQm94IH0gZnJvbSAnZWxlbWVudC1wbHVzJzsKaW1wb3J0IHsgU2VhcmNoLCBQbHVzLCBFZGl0UGVuLCBTaGFyZSwgRm9sZGVyLCBDbG9zZSwgTW9yZSwgRG9jdW1lbnQgfSBmcm9tICdAZWxlbWVudC1wbHVzL2ljb25zLXZ1ZSc7CmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7CmltcG9ydCB7IGdldERvY3VtZW50cywgZ2V0UmVjZW50RG9jdW1lbnRzLCBnZXRTaGFyZWREb2N1bWVudHMsIGdldERvY3VtZW50Q2F0ZWdvcmllcywgY3JlYXRlRG9jdW1lbnQsIGRlbGV0ZURvY3VtZW50IGFzIGFwaURlbGV0ZURvY3VtZW50LCBzaGFyZURvY3VtZW50IGFzIGFwaVNoYXJlRG9jdW1lbnQsIGNyZWF0ZURvY3VtZW50Q2F0ZWdvcnksIHVwZGF0ZURvY3VtZW50Q2F0ZWdvcnksIGRlbGV0ZURvY3VtZW50Q2F0ZWdvcnksIGFpR2VuZXJhdGVEb2N1bWVudCB9IGZyb20gJ0AvYXBpL3NtYXJ0ZG9jJzsKaW1wb3J0IHsgTWFya2Rvd25Ub1F1aWxsIH0gZnJvbSAnbWQtdG8tcXVpbGwtZGVsdGEnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1NtYXJ0RG9jSG9tZScsCiAgY29tcG9uZW50czogewogICAgU2VhcmNoLAogICAgUGx1cywKICAgIEVkaXRQZW4sCiAgICBTaGFyZSwKICAgIEZvbGRlciwKICAgIENsb3NlLAogICAgTW9yZSwKICAgIERvY3VtZW50CiAgfSwKICBzZXR1cCgpIHsKICAgIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpOwogICAgY29uc3Qgcm91dGUgPSB1c2VSb3V0ZSgpOwogICAgY29uc3QgewogICAgICBwcm94eQogICAgfSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpOyAvLyDojrflj5bnu4Tku7blrp7kvosKCiAgICAvLyDliLfmlrDop6blj5HlmajvvIznlKjkuo7lvLrliLbnu4Tku7bliLfmlrAKICAgIGNvbnN0IHJlZnJlc2hUcmlnZ2VyID0gcmVmKERhdGUubm93KCkpOwoKICAgIC8vIOeKtuaAgeaVsOaNrgogICAgY29uc3QgZG9jdW1lbnRzID0gcmVmKFtdKTsKICAgIGNvbnN0IHJlY2VudERvY3VtZW50cyA9IHJlZihbXSk7CiAgICBjb25zdCBzaGFyZWREb2N1bWVudHMgPSByZWYoW10pOwogICAgY29uc3QgZG9jdW1lbnRDYXRlZ29yaWVzID0gcmVmKFtdKTsKICAgIGNvbnN0IHNlYXJjaFF1ZXJ5ID0gcmVmKCcnKTsKICAgIGNvbnN0IHNlYXJjaENhdGVnb3J5ID0gcmVmKCdhbGwnKTsKICAgIGNvbnN0IG5ld0RvY3VtZW50RGlhbG9nVmlzaWJsZSA9IHJlZihmYWxzZSk7CiAgICBjb25zdCBzaGFyZURpYWxvZ1Zpc2libGUgPSByZWYoZmFsc2UpOwogICAgY29uc3QgZGVsZXRlRGlhbG9nVmlzaWJsZSA9IHJlZihmYWxzZSk7CiAgICBjb25zdCBkb2N1bWVudENyZWF0ZVR5cGUgPSByZWYoJ2JsYW5rJyk7CiAgICBjb25zdCBzZWxlY3RlZERvY3VtZW50ID0gcmVmKG51bGwpOwogICAgY29uc3Qgc2VsZWN0ZWRVc2VycyA9IHJlZihbXSk7CiAgICBjb25zdCBhdmFpbGFibGVVc2VycyA9IHJlZihbXSk7CiAgICBjb25zdCBjcmVhdGVMb2FkaW5nID0gcmVmKGZhbHNlKTsKICAgIGNvbnN0IHNoYXJlTG9hZGluZyA9IHJlZihmYWxzZSk7CiAgICBjb25zdCBkZWxldGVMb2FkaW5nID0gcmVmKGZhbHNlKTsKCiAgICAvLyDooajljZXmlbDmja4KICAgIGNvbnN0IG5ld0RvY3VtZW50Rm9ybSA9IHJlZih7CiAgICAgIHRpdGxlOiAnJywKICAgICAgdHlwZTogJycKICAgIH0pOwogICAgY29uc3QgYWlEb2N1bWVudEZvcm0gPSByZWYoewogICAgICB0aXRsZTogJycsCiAgICAgIHJlcXVpcmVtZW50czogJycKICAgIH0pOwoKICAgIC8vIOihqOWNleagoemqjOinhOWImQogICAgY29uc3QgYmxhbmtGb3JtUnVsZXMgPSB7CiAgICAgIHRpdGxlOiBbewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXmlofmoaPmoIfpopgnLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9LCB7CiAgICAgICAgbWluOiAyLAogICAgICAgIG1heDogNTAsCiAgICAgICAgbWVzc2FnZTogJ+mVv+W6puWcqCAyIOWIsCA1MCDkuKrlrZfnrKYnLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9XQogICAgfTsKICAgIGNvbnN0IGFpRm9ybVJ1bGVzID0gewogICAgICB0aXRsZTogW3sKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5paH5qGj5Li76aKYJywKICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgfSwgewogICAgICAgIG1pbjogMiwKICAgICAgICBtYXg6IDUwLAogICAgICAgIG1lc3NhZ2U6ICfplb/luqblnKggMiDliLAgNTAg5Liq5a2X56ymJywKICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgfV0sCiAgICAgIHJlcXVpcmVtZW50czogW3sKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5paH5qGj6KaB5rGCJywKICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgfSwgewogICAgICAgIG1pbjogMTAsCiAgICAgICAgbWF4OiA1MDAsCiAgICAgICAgbWVzc2FnZTogJ+mVv+W6puWcqCAxMCDliLAgNTAwIOS4quWtl+espicsCiAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgIH1dCiAgICB9OwogICAgY29uc3QgYmxhbmtGb3JtUmVmID0gcmVmKG51bGwpOwogICAgY29uc3QgYWlGb3JtUmVmID0gcmVmKG51bGwpOwoKICAgIC8vIOiuoeeul+WxnuaApwogICAgY29uc3QgdG90YWxEb2N1bWVudHMgPSBjb21wdXRlZCgoKSA9PiBkb2N1bWVudHMudmFsdWUubGVuZ3RoKTsKICAgIGNvbnN0IHJlY2VudEVkaXRDb3VudCA9IGNvbXB1dGVkKCgpID0+IHJlY2VudERvY3VtZW50cy52YWx1ZS5sZW5ndGgpOwoKICAgIC8vIOWIhuexu+euoeeQhuebuOWFs+eKtuaAgQogICAgY29uc3QgY2F0ZWdvcnlEaWFsb2dWaXNpYmxlID0gcmVmKGZhbHNlKTsKICAgIGNvbnN0IGVkaXRpbmdDYXRlZ29yeSA9IHJlZih7CiAgICAgIG5hbWU6ICcnLAogICAgICBjb2xvcjogJyM0MDlFRkYnLAogICAgICBkZXNjcmlwdGlvbjogJycKICAgIH0pOwogICAgY29uc3QgY2F0ZWdvcnlGb3JtUmVmID0gcmVmKG51bGwpOwogICAgY29uc3QgY2F0ZWdvcnlMb2FkaW5nID0gcmVmKGZhbHNlKTsKICAgIGNvbnN0IGNhdGVnb3J5Rm9ybVJ1bGVzID0gewogICAgICBuYW1lOiBbewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXnsbvlnovlkI3np7AnLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9LCB7CiAgICAgICAgbWluOiAyLAogICAgICAgIG1heDogMjAsCiAgICAgICAgbWVzc2FnZTogJ+mVv+W6puWcqDLliLAyMOS4quWtl+espicsCiAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgIH1dLAogICAgICBjb2xvcjogW3sKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oup6aKc6ImyJywKICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJwogICAgICB9XQogICAgfTsKCiAgICAvLyDovoXliqnmlrnms5XvvJrlvLrliLbliLfmlrDop4blm74KICAgIGNvbnN0IGZvcmNlVXBkYXRlID0gYXN5bmMgKCkgPT4gewogICAgICAvLyDliJvlu7rkuLTml7bmlbDmja7vvIzop6blj5Hmt7Hluqblk43lupTlvI/mm7TmlrAKICAgICAgZG9jdW1lbnRzLnZhbHVlID0gWy4uLmRvY3VtZW50cy52YWx1ZV07CiAgICAgIHJlY2VudERvY3VtZW50cy52YWx1ZSA9IFsuLi5yZWNlbnREb2N1bWVudHMudmFsdWVdOwogICAgICBzaGFyZWREb2N1bWVudHMudmFsdWUgPSBbLi4uc2hhcmVkRG9jdW1lbnRzLnZhbHVlXTsKCiAgICAgIC8vIOS9v+eUqFZ1ZeWunuS+i+eahCRmb3JjZVVwZGF0ZeaWueazlQogICAgICBpZiAocHJveHkgJiYgcHJveHkuJGZvcmNlVXBkYXRlKSB7CiAgICAgICAgcHJveHkuJGZvcmNlVXBkYXRlKCk7CiAgICAgIH0KCiAgICAgIC8vIOetieW+hURPTeabtOaWsAogICAgICBhd2FpdCBuZXh0VGljaygpOwogICAgfTsKCiAgICAvLyDmlrnms5UKICAgIGNvbnN0IGZldGNoRG9jdW1lbnRzID0gYXN5bmMgKGZvcmNlUmVmcmVzaCA9IGZhbHNlKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKCflvIDlp4vojrflj5bmlofmoaPliJfooaguLi4nKTsKICAgICAgdHJ5IHsKICAgICAgICAvLyDorr7nva7liqDovb3nirbmgIEKICAgICAgICBjcmVhdGVMb2FkaW5nLnZhbHVlID0gdHJ1ZTsKICAgICAgICAvLyDlh4blpIfor7fmsYLlj4LmlbAKICAgICAgICBjb25zdCBwYXJhbXMgPSB7CiAgICAgICAgICBwYWdlOiAxLAogICAgICAgICAgbGltaXQ6IDEwCiAgICAgICAgfTsKICAgICAgICAvLyDlpoLmnpzmnInmn6Xor6LmnaHku7bvvIzmt7vliqDliLDlj4LmlbDkuK0KICAgICAgICBpZiAoc2VhcmNoQ2F0ZWdvcnkudmFsdWUgJiYgc2VhcmNoQ2F0ZWdvcnkudmFsdWUgIT09ICdhbGwnKSB7CiAgICAgICAgICBwYXJhbXMuY2F0ZWdvcnkgPSBzZWFyY2hDYXRlZ29yeS52YWx1ZTsKICAgICAgICAgIGNvbnNvbGUubG9nKGDmjInliIbnsbvmn6Xor6LvvIxJRDogJHtzZWFyY2hDYXRlZ29yeS52YWx1ZX1gLCB0eXBlb2Ygc2VhcmNoQ2F0ZWdvcnkudmFsdWUpOwogICAgICAgIH0KICAgICAgICBpZiAoc2VhcmNoUXVlcnkudmFsdWUpIHsKICAgICAgICAgIHBhcmFtcy5zZWFyY2ggPSBzZWFyY2hRdWVyeS52YWx1ZTsKICAgICAgICB9CgogICAgICAgIC8vIOWmguaenOW8uuWItuWIt+aWsO+8jOa3u+WKoOaXtumXtOaIs+mYsuatoue8k+WtmAogICAgICAgIGlmIChmb3JjZVJlZnJlc2gpIHsKICAgICAgICAgIHBhcmFtcy5fdCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICAgIH0KICAgICAgICBjb25zb2xlLmxvZygnQVBJ6K+35rGC5Y+C5pWwOicsIHBhcmFtcyk7CiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZ2V0RG9jdW1lbnRzKHBhcmFtcyk7CiAgICAgICAgY29uc29sZS5sb2coJ+aWh+aho+WIl+ihqEFQSeWTjeW6lDonLCByZXMpOwoKICAgICAgICAvLyDlpITnkIbliIbpobXmlbDmja4KICAgICAgICBpZiAocmVzICYmIHJlcy5kYXRhKSB7CiAgICAgICAgICAvLyDlrozlhajmm7/mjaLmlbDnu4TogIzkuI3mmK/kv67mlLnlvJXnlKgKICAgICAgICAgIGRvY3VtZW50cy52YWx1ZSA9IEFycmF5LmlzQXJyYXkocmVzLmRhdGEpID8gWy4uLnJlcy5kYXRhXSA6IFtdOwogICAgICAgICAgY29uc29sZS5sb2coYOiuvue9ruaWh+aho+WIl+ihqDogJHtkb2N1bWVudHMudmFsdWUubGVuZ3RofeadoeiusOW9lWAsIGRvY3VtZW50cy52YWx1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUud2FybignQVBJ6L+U5Zue55qE5ZON5bqU5pWw5o2u5peg5pWIOicsIHJlcyk7CiAgICAgICAgICBkb2N1bWVudHMudmFsdWUgPSBbXTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign6I635Y+W5paH5qGj5YiX6KGo5aSx6LSlOicsIGVycm9yKTsKICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+iOt+WPluaWh+aho+WIl+ihqOWksei0pScpOwogICAgICAgIGRvY3VtZW50cy52YWx1ZSA9IFtdOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIGNyZWF0ZUxvYWRpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IGZldGNoUmVjZW50RG9jdW1lbnRzID0gYXN5bmMgKGZvcmNlUmVmcmVzaCA9IGZhbHNlKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKCflvIDlp4vojrflj5bmnIDov5HmlofmoaMuLi4nKTsKICAgICAgdHJ5IHsKICAgICAgICAvLyDlh4blpIflj4LmlbDvvIzlpoLmnpzlvLrliLbliLfmlrDmt7vliqDml7bpl7TmiLMKICAgICAgICBjb25zdCBwYXJhbXMgPSBmb3JjZVJlZnJlc2ggPyB7CiAgICAgICAgICBfdDogbmV3IERhdGUoKS5nZXRUaW1lKCkKICAgICAgICB9IDoge307CiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZ2V0UmVjZW50RG9jdW1lbnRzKHBhcmFtcyk7CiAgICAgICAgY29uc29sZS5sb2coJ+acgOi/keaWh+aho0FQSeWTjeW6lDonLCByZXMpOwogICAgICAgIGlmIChyZXMgJiYgcmVzLmRhdGEpIHsKICAgICAgICAgIC8vIOWujOWFqOabv+aNouaVsOe7hOiAjOS4jeaYr+S/ruaUueW8leeUqAogICAgICAgICAgcmVjZW50RG9jdW1lbnRzLnZhbHVlID0gQXJyYXkuaXNBcnJheShyZXMuZGF0YSkgPyBbLi4ucmVzLmRhdGFdIDogW107CiAgICAgICAgICBjb25zb2xlLmxvZyhg6K6+572u5pyA6L+R5paH5qGjOiAke3JlY2VudERvY3VtZW50cy52YWx1ZS5sZW5ndGh95p2h6K6w5b2VYCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUud2FybignQVBJ6L+U5Zue55qE5pyA6L+R5paH5qGj5pWw5o2u5peg5pWIOicsIHJlcyk7CiAgICAgICAgICByZWNlbnREb2N1bWVudHMudmFsdWUgPSBbXTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign6I635Y+W5pyA6L+R5paH5qGj5aSx6LSlOicsIGVycm9yKTsKICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+iOt+WPluacgOi/keaWh+aho+Wksei0pScpOwogICAgICAgIHJlY2VudERvY3VtZW50cy52YWx1ZSA9IFtdOwogICAgICB9CiAgICB9OwogICAgY29uc3QgZmV0Y2hTaGFyZWREb2N1bWVudHMgPSBhc3luYyAoKSA9PiB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZXRTaGFyZWREb2N1bWVudHMoKTsKICAgICAgICBzaGFyZWREb2N1bWVudHMudmFsdWUgPSByZXNwb25zZS5kYXRhOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+iOt+WPluWFseS6q+aWh+aho+Wksei0pScsIGVycm9yKTsKICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+iOt+WPluWFseS6q+aWh+aho+Wksei0pScpOwogICAgICB9CiAgICB9OwogICAgY29uc3QgZmV0Y2hEb2N1bWVudENhdGVnb3JpZXMgPSBhc3luYyAocmV0cnlDb3VudCA9IDApID0+IHsKICAgICAgY29uc29sZS5sb2coJ+W8gOWni+iOt+WPluaWh+aho+WIhuexuy4uLicpOwogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGdldERvY3VtZW50Q2F0ZWdvcmllcygpOwogICAgICAgIGNvbnNvbGUubG9nKCfmlofmoaPliIbnsbtBUEnlk43lupQ6JywgcmVzKTsKICAgICAgICBpZiAocmVzICYmIHJlcy5kYXRhKSB7CiAgICAgICAgICBkb2N1bWVudENhdGVnb3JpZXMudmFsdWUgPSByZXMuZGF0YTsKICAgICAgICAgIGNvbnNvbGUubG9nKGDorr7nva7mlofmoaPliIbnsbs6ICR7ZG9jdW1lbnRDYXRlZ29yaWVzLnZhbHVlLmxlbmd0aH3mnaHorrDlvZUsIOaVsOaNrjpgLCBkb2N1bWVudENhdGVnb3JpZXMudmFsdWUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLndhcm4oJ0FQSei/lOWbnueahOaWh+aho+WIhuexu+aVsOaNruaXoOaViDonLCByZXMpOwogICAgICAgICAgZG9jdW1lbnRDYXRlZ29yaWVzLnZhbHVlID0gW107CgogICAgICAgICAgLy8g5aaC5p6c6L+U5Zue56m65pWw5o2u5LiU5pyq6L6+5Yiw5pyA5aSn6YeN6K+V5qyh5pWw77yM5bCd6K+V6YeN6K+VCiAgICAgICAgICBpZiAoZG9jdW1lbnRDYXRlZ29yaWVzLnZhbHVlLmxlbmd0aCA9PT0gMCAmJiByZXRyeUNvdW50IDwgMikgewogICAgICAgICAgICBjb25zb2xlLmxvZyhg5paH5qGj5YiG57G75pWw5o2u5Li656m677yMJHtyZXRyeUNvdW50ICsgMX3np5LlkI7ph43or5UuLi5gKTsKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBmZXRjaERvY3VtZW50Q2F0ZWdvcmllcyhyZXRyeUNvdW50ICsgMSksIChyZXRyeUNvdW50ICsgMSkgKiAxMDAwKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign6I635Y+W5paH5qGj5YiG57G75aSx6LSlOicsIGVycm9yKTsKCiAgICAgICAgLy8g5aaC5p6c5piv5pyN5Yqh5Zmo6ZSZ6K+v5LiU5pyq6L6+5Yiw5pyA5aSn6YeN6K+V5qyh5pWw77yM5bCd6K+V6YeN6K+VCiAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlICYmIGVycm9yLnJlc3BvbnNlLnN0YXR1cyA+PSA1MDAgJiYgcmV0cnlDb3VudCA8IDIpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGDmnI3liqHlmajplJnor6/vvIwke3JldHJ5Q291bnQgKyAxfeenkuWQjumHjeivlS4uLmApOwogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBmZXRjaERvY3VtZW50Q2F0ZWdvcmllcyhyZXRyeUNvdW50ICsgMSksIChyZXRyeUNvdW50ICsgMSkgKiAxMDAwKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfojrflj5bmlofmoaPliIbnsbvlpLHotKXvvIzor7fliLfmlrDpobXpnaLph43or5UnKTsKICAgICAgICAgIC8vIOWIneWni+WMluepuuaVsOe7hAogICAgICAgICAgZG9jdW1lbnRDYXRlZ29yaWVzLnZhbHVlID0gW107CiAgICAgICAgfQogICAgICB9CiAgICB9OwoKICAgIC8vIOmYsuaKluaQnOe0ogogICAgY29uc3QgZGVib3VuY2VkU2VhcmNoID0gXy5kZWJvdW5jZShhc3luYyAoKSA9PiB7CiAgICAgIGlmIChzZWFyY2hRdWVyeS52YWx1ZSkgewogICAgICAgIHRyeSB7CiAgICAgICAgICBhd2FpdCBmZXRjaERvY3VtZW50cygpOwogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCfmkJzntKLmlofmoaPlpLHotKUnLCBlcnJvcik7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGZldGNoRG9jdW1lbnRzKCk7CiAgICAgIH0KICAgIH0sIDUwMCk7CiAgICBjb25zdCBjcmVhdGVOZXdEb2N1bWVudCA9ICgpID0+IHsKICAgICAgLy8g6YeN572u6KGo5Y2VCiAgICAgIG5ld0RvY3VtZW50Rm9ybS52YWx1ZSA9IHsKICAgICAgICB0aXRsZTogJycsCiAgICAgICAgdHlwZTogJycKICAgICAgfTsKICAgICAgYWlEb2N1bWVudEZvcm0udmFsdWUgPSB7CiAgICAgICAgdGl0bGU6ICcnLAogICAgICAgIHJlcXVpcmVtZW50czogJycKICAgICAgfTsKICAgICAgZG9jdW1lbnRDcmVhdGVUeXBlLnZhbHVlID0gJ2JsYW5rJzsKICAgICAgbmV3RG9jdW1lbnREaWFsb2dWaXNpYmxlLnZhbHVlID0gdHJ1ZTsKCiAgICAgIC8vIOebkeWQrOWvueivneahhuWFs+mXreS6i+S7tu+8jOa4heeQhuihqOWNlQogICAgICBuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGNvbnN0IGRpYWxvZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbC1kaWFsb2cnKTsKICAgICAgICAgIGlmIChkaWFsb2cpIHsKICAgICAgICAgICAgZGlhbG9nLmFkZEV2ZW50TGlzdGVuZXIoJ2Nsb3NlZCcsICgpID0+IHsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgaWYgKGJsYW5rRm9ybVJlZi52YWx1ZSkgewogICAgICAgICAgICAgICAgICBibGFua0Zvcm1SZWYudmFsdWUuY2xlYXJWYWxpZGF0ZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGFpRm9ybVJlZi52YWx1ZSkgewogICAgICAgICAgICAgICAgICBhaUZvcm1SZWYudmFsdWUuY2xlYXJWYWxpZGF0ZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY2xlYXJpbmcgZm9ybSB2YWxpZGF0aW9uOicsIGVycik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgb25jZTogdHJ1ZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNldHRpbmcgdXAgZGlhbG9nIGV2ZW50IGxpc3RlbmVyOicsIGVycik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH07CiAgICBjb25zdCBzdWJtaXROZXdEb2N1bWVudCA9IGFzeW5jICgpID0+IHsKICAgICAgaWYgKGRvY3VtZW50Q3JlYXRlVHlwZS52YWx1ZSA9PT0gJ2JsYW5rJykgewogICAgICAgIGlmICghYmxhbmtGb3JtUmVmLnZhbHVlKSB7CiAgICAgICAgICBjb25zb2xlLndhcm4oJ+ihqOWNleW8leeUqOS4jeWtmOWcqCcpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgY29uc3QgdmFsaWQgPSBhd2FpdCBibGFua0Zvcm1SZWYudmFsdWUudmFsaWRhdGUoKS5jYXRjaChlcnIgPT4gewogICAgICAgICAgICBjb25zb2xlLmVycm9yKCfooajljZXpqozor4HlpLHotKU6JywgZXJyKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgICAgY3JlYXRlTG9hZGluZy52YWx1ZSA9IHRydWU7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+W8gOWni+WIm+W7uuaWh+ahozonLCB7CiAgICAgICAgICAgICAgICB0aXRsZTogbmV3RG9jdW1lbnRGb3JtLnZhbHVlLnRpdGxlLAogICAgICAgICAgICAgICAgdHlwZTogbmV3RG9jdW1lbnRGb3JtLnZhbHVlLnR5cGUgfHwgJ+mAmueUqCcKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNyZWF0ZURvY3VtZW50KHsKICAgICAgICAgICAgICAgIHRpdGxlOiBuZXdEb2N1bWVudEZvcm0udmFsdWUudGl0bGUsCiAgICAgICAgICAgICAgICB0eXBlOiBuZXdEb2N1bWVudEZvcm0udmFsdWUudHlwZSB8fCAn6YCa55SoJywKICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcnCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+WIm+W7uuaWh+aho+WTjeW6lOaVsOaNru+8micsIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlKSk7CgogICAgICAgICAgICAgIC8vIOWFs+mXreWvueivneahhgogICAgICAgICAgICAgIG5ld0RvY3VtZW50RGlhbG9nVmlzaWJsZS52YWx1ZSA9IGZhbHNlOwogICAgICAgICAgICAgIEVsTWVzc2FnZS5zdWNjZXNzKCfmlofmoaPliJvlu7rmiJDlip8nKTsKCiAgICAgICAgICAgICAgLy8g6Kej5p6Q6L+U5Zue55qE5paH5qGjSUQKICAgICAgICAgICAgICBsZXQgZG9jSWQgPSBudWxsOwogICAgICAgICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5kYXRhKSB7CiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5pZCkgewogICAgICAgICAgICAgICAgICBkb2NJZCA9IHJlc3BvbnNlLmRhdGEuaWQ7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkocmVzcG9uc2UuZGF0YSkgJiYgcmVzcG9uc2UuZGF0YS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgIGRvY0lkID0gcmVzcG9uc2UuZGF0YVswXS5pZDsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS5yZXN1bHRzICYmIEFycmF5LmlzQXJyYXkocmVzcG9uc2UuZGF0YS5yZXN1bHRzKSAmJiByZXNwb25zZS5kYXRhLnJlc3VsdHMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICBkb2NJZCA9IHJlc3BvbnNlLmRhdGEucmVzdWx0c1swXS5pZDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIC8vIOetieW+heWvueivneahhuWFs+mXreWujOaIkOWQjuWGjeaJp+ihjOi3s+i9rO+8jOmBv+WFjURPTemUmeivrwogICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKGRvY0lkKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDlh4blpIfot7PovazliLDmlofmoaPor6bmg4XpobXvvIxJRDogJHtkb2NJZH1gKTsKCiAgICAgICAgICAgICAgICAgIC8vIOWFiOWIt+aWsOaWh+aho+WIl+ihqO+8jOehruS/neaVsOaNruaYr+acgOaWsOeahAogICAgICAgICAgICAgICAgICBmZXRjaERvY3VtZW50cygpOwogICAgICAgICAgICAgICAgICBmZXRjaFJlY2VudERvY3VtZW50cygpOwoKICAgICAgICAgICAgICAgICAgLy8g54S25ZCO5YaN5omn6KGM5a+86IiqCiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdTbWFydERvY0RldGFpbCcsCiAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGRvY0lkCiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+i3r+eUseWvvOiIquWksei0pTonLCBlcnIpOwogICAgICAgICAgICAgICAgICAgICAgcm91dGVyLnB1c2goYC9zbWFydGRvYy8ke2RvY0lkfWApLmNhdGNoKG5hdkVyciA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+i3r+W+hOWvvOiIquS5n+Wksei0pTonLCBuYXZFcnIpOwogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ+WIm+W7uuaWh+aho+aIkOWKn++8jOS9hui/lOWbnueahOaVsOaNruagvOW8j+S4jeato+ehricsIHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgLy8g5Yi35paw5paH5qGj5YiX6KGoCiAgICAgICAgICAgICAgICAgIGZldGNoRG9jdW1lbnRzKCk7CiAgICAgICAgICAgICAgICAgIGZldGNoUmVjZW50RG9jdW1lbnRzKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwgMTAwKTsKICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCfliJvlu7rmlofmoaPlpLHotKUnLCBlcnJvcik7CiAgICAgICAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfliJvlu7rmlofmoaPlpLHotKUnKTsKICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICBjcmVhdGVMb2FkaW5nLnZhbHVlID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgY29uc29sZS5lcnJvcign5o+Q5Lqk6KGo5Y2V5pe25Y+R55Sf6ZSZ6K+vOicsIGVycm9yKTsKICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcign6KGo5Y2V5o+Q5Lqk5aSx6LSlJyk7CiAgICAgICAgICBjcmVhdGVMb2FkaW5nLnZhbHVlID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGRvY3VtZW50Q3JlYXRlVHlwZS52YWx1ZSA9PT0gJ2FpJykgewogICAgICAgIGlmICghYWlGb3JtUmVmLnZhbHVlKSB7CiAgICAgICAgICBjb25zb2xlLndhcm4oJ0FJ6KGo5Y2V5byV55So5LiN5a2Y5ZyoJyk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICBjb25zdCB2YWxpZCA9IGF3YWl0IGFpRm9ybVJlZi52YWx1ZS52YWxpZGF0ZSgpLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FJ6KGo5Y2V6aqM6K+B5aSx6LSlOicsIGVycik7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0pOwogICAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICAgIGNyZWF0ZUxvYWRpbmcudmFsdWUgPSB0cnVlOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIC8vIOiwg+eUqEFJ55Sf5oiQ5paH5qGjQVBJCiAgICAgICAgICAgICAgY29uc3QgY2F0ZWdvcnlJZCA9IHNlYXJjaENhdGVnb3J5LnZhbHVlICE9PSAnYWxsJyA/IHNlYXJjaENhdGVnb3J5LnZhbHVlIDogbnVsbDsKICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFpR2VuZXJhdGVEb2N1bWVudCh7CiAgICAgICAgICAgICAgICB0aXRsZTogYWlEb2N1bWVudEZvcm0udmFsdWUudGl0bGUsCiAgICAgICAgICAgICAgICByZXF1aXJlbWVudDogYWlEb2N1bWVudEZvcm0udmFsdWUucmVxdWlyZW1lbnRzLAogICAgICAgICAgICAgICAgY2F0ZWdvcnlfaWQ6IGNhdGVnb3J5SWQsCiAgICAgICAgICAgICAgICBkb2NfdHlwZTogJ0FJJwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBSeeUn+aIkOaWh+aho+WTjeW6lOaVsOaNru+8micsIHJlc3BvbnNlKTsKICAgICAgICAgICAgICAvLyDpgILphY1tYXJrZG93buS4unF1aWxsIGRlbHRhCiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLmRhdGEgJiYgcmVzcG9uc2UuZGF0YS5jb250ZW50KSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICBjb25zdCBjb252ZXJ0ZXIgPSBuZXcgTWFya2Rvd25Ub1F1aWxsKCk7CiAgICAgICAgICAgICAgICAgIGNvbnN0IHF1aWxsRGVsdGEgPSBjb252ZXJ0ZXIuY29udmVydChyZXNwb25zZS5kYXRhLmNvbnRlbnQpOwogICAgICAgICAgICAgICAgICAvLyDlrZjlhaVsb2NhbFN0b3JhZ2XvvIzkvr/kuo7lkI7nu63or6bmg4XpobXmiJbnvJbovpHlmajnm7TmjqXor7vlj5YKICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oYGRvY19xdWlsbF9kZWx0YV8ke3Jlc3BvbnNlLmRhdGEuaWR9YCwgSlNPTi5zdHJpbmdpZnkocXVpbGxEZWx0YSkpOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignbWFya2Rvd27ovaxxdWlsbCBkZWx0YeWksei0pScsIGVycik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIG5ld0RvY3VtZW50RGlhbG9nVmlzaWJsZS52YWx1ZSA9IGZhbHNlOwogICAgICAgICAgICAgIEVsTWVzc2FnZS5zdWNjZXNzKCdBSeeUn+aIkOaWh+aho+aIkOWKnycpOwogICAgICAgICAgICAgIGxldCBkb2NJZCA9IG51bGw7CiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLmRhdGEgJiYgcmVzcG9uc2UuZGF0YS5pZCkgewogICAgICAgICAgICAgICAgZG9jSWQgPSByZXNwb25zZS5kYXRhLmlkOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgIGlmIChkb2NJZCkgewogICAgICAgICAgICAgICAgICBmZXRjaERvY3VtZW50cygpOwogICAgICAgICAgICAgICAgICBmZXRjaFJlY2VudERvY3VtZW50cygpOwogICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnU21hcnREb2NEZXRhaWwnLAogICAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkb2NJZAogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCfot6/nlLHlr7zoiKrlpLHotKU6JywgZXJyKTsKICAgICAgICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKGAvc21hcnRkb2MvJHtkb2NJZH1gKS5jYXRjaChuYXZFcnIgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCfot6/lvoTlr7zoiKrkuZ/lpLHotKU6JywgbmF2RXJyKTsKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgZmV0Y2hEb2N1bWVudHMoKTsKICAgICAgICAgICAgICAgICAgZmV0Y2hSZWNlbnREb2N1bWVudHMoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LCAxMDApOwogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FJ55Sf5oiQ5paH5qGj5aSx6LSlJywgZXJyb3IpOwogICAgICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcignQUnnlJ/miJDmlofmoaPlpLHotKUnKTsKICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICBjcmVhdGVMb2FkaW5nLnZhbHVlID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgY29uc29sZS5lcnJvcign5o+Q5LqkQUnooajljZXml7blj5HnlJ/plJnor686JywgZXJyb3IpOwogICAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfooajljZXmj5DkuqTlpLHotKUnKTsKICAgICAgICAgIGNyZWF0ZUxvYWRpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgICBjb25zdCBvcGVuRG9jdW1lbnQgPSBkb2MgPT4gewogICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogJ1NtYXJ0RG9jRGV0YWlsJywKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIGlkOiBkb2MuaWQKICAgICAgICB9CiAgICAgIH0pOwogICAgfTsKICAgIGNvbnN0IHJlbmFtZURvY3VtZW50ID0gZG9jID0+IHsKICAgICAgRWxNZXNzYWdlQm94LnByb21wdCgn6K+36L6T5YWl5paw5paH5qGj5ZCN56ewJywgJ+mHjeWRveWQjeaWh+ahoycsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgaW5wdXRWYWx1ZTogZG9jLnRpdGxlLAogICAgICAgIGlucHV0VmFsaWRhdG9yOiB2YWx1ZSA9PiB7CiAgICAgICAgICBpZiAoIXZhbHVlKSB7CiAgICAgICAgICAgIHJldHVybiAn5paH5qGj5ZCN56ew5LiN6IO95Li656m6JzsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgfSkudGhlbigoewogICAgICAgIHZhbHVlCiAgICAgIH0pID0+IHsKICAgICAgICAvLyDmraTlpITlupTor6XosIPnlKjmm7TmlrDmlofmoaNBUEkKICAgICAgICBFbE1lc3NhZ2UuaW5mbyhg6YeN5ZG95ZCN5paH5qGj5Li6OiAke3ZhbHVlfWApOwogICAgICB9KS5jYXRjaCgoKSA9PiB7fSk7CiAgICB9OwogICAgY29uc3QgZHVwbGljYXRlRG9jdW1lbnQgPSBkb2MgPT4gewogICAgICBFbE1lc3NhZ2UuaW5mbyhg5aSN5Yi25paH5qGjOiAke2RvYy50aXRsZX1gKTsKICAgIH07CiAgICBjb25zdCBzaGFyZURvY3VtZW50ID0gZG9jID0+IHsKICAgICAgc2VsZWN0ZWREb2N1bWVudC52YWx1ZSA9IGRvYzsKICAgICAgLy8g5Zyo5a6e6ZmF6aG555uu5Lit77yM6L+Z6YeM5bqU6K+l5LuOQVBJ6I635Y+W5Y+v55So55So5oi35YiX6KGoCiAgICAgIGF2YWlsYWJsZVVzZXJzLnZhbHVlID0gW3sKICAgICAgICBpZDogMSwKICAgICAgICB1c2VybmFtZTogJ+W8oOS4iScKICAgICAgfSwgewogICAgICAgIGlkOiAyLAogICAgICAgIHVzZXJuYW1lOiAn5p2O5ZubJwogICAgICB9LCB7CiAgICAgICAgaWQ6IDMsCiAgICAgICAgdXNlcm5hbWU6ICfnjovkupQnCiAgICAgIH1dOwogICAgICBzZWxlY3RlZFVzZXJzLnZhbHVlID0gW107CiAgICAgIHNoYXJlRGlhbG9nVmlzaWJsZS52YWx1ZSA9IHRydWU7CiAgICB9OwogICAgY29uc3QgY29uZmlybVNoYXJlID0gYXN5bmMgKCkgPT4gewogICAgICBpZiAoIXNlbGVjdGVkRG9jdW1lbnQudmFsdWUgfHwgc2VsZWN0ZWRVc2Vycy52YWx1ZS5sZW5ndGggPT09IDApIHsKICAgICAgICBFbE1lc3NhZ2Uud2FybmluZygn6K+36YCJ5oup6Iez5bCR5LiA5Liq55So5oi3Jyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHNoYXJlTG9hZGluZy52YWx1ZSA9IHRydWU7CiAgICAgIHRyeSB7CiAgICAgICAgYXdhaXQgYXBpU2hhcmVEb2N1bWVudChzZWxlY3RlZERvY3VtZW50LnZhbHVlLmlkLCBzZWxlY3RlZFVzZXJzLnZhbHVlKTsKICAgICAgICBFbE1lc3NhZ2Uuc3VjY2Vzcygn5paH5qGj5YiG5Lqr5oiQ5YqfJyk7CiAgICAgICAgc2hhcmVEaWFsb2dWaXNpYmxlLnZhbHVlID0gZmFsc2U7CiAgICAgICAgZmV0Y2hTaGFyZWREb2N1bWVudHMoKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfliIbkuqvmlofmoaPlpLHotKUnLCBlcnJvcik7CiAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfliIbkuqvmlofmoaPlpLHotKUnKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBzaGFyZUxvYWRpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IGRlbGV0ZURvY3VtZW50ID0gZG9jID0+IHsKICAgICAgc2VsZWN0ZWREb2N1bWVudC52YWx1ZSA9IGRvYzsKICAgICAgZGVsZXRlRGlhbG9nVmlzaWJsZS52YWx1ZSA9IHRydWU7CiAgICB9OwogICAgY29uc3QgY29uZmlybURlbGV0ZSA9IGFzeW5jICgpID0+IHsKICAgICAgaWYgKCFzZWxlY3RlZERvY3VtZW50LnZhbHVlKSByZXR1cm47CiAgICAgIGRlbGV0ZUxvYWRpbmcudmFsdWUgPSB0cnVlOwogICAgICB0cnkgewogICAgICAgIHZhciBfc2VsZWN0ZWREb2N1bWVudCR2YWw7CiAgICAgICAgLy8g6K6w5b2V6KaB5Yig6Zmk55qE5paH5qGjSUTlkoznsbvliKsKICAgICAgICBjb25zdCBkZWxldGVkRG9jSWQgPSBzZWxlY3RlZERvY3VtZW50LnZhbHVlLmlkOwogICAgICAgIGNvbnN0IGRlbGV0ZWREb2NDYXRlZ29yeUlkID0gKF9zZWxlY3RlZERvY3VtZW50JHZhbCA9IHNlbGVjdGVkRG9jdW1lbnQudmFsdWUuY2F0ZWdvcnkpID09PSBudWxsIHx8IF9zZWxlY3RlZERvY3VtZW50JHZhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3NlbGVjdGVkRG9jdW1lbnQkdmFsLmlkOwoKICAgICAgICAvLyDlhYjlhbPpl63lr7nor53moYbvvIzmj5Dpq5jnlKjmiLfkvZPpqowKICAgICAgICBkZWxldGVEaWFsb2dWaXNpYmxlLnZhbHVlID0gZmFsc2U7CgogICAgICAgIC8vIOaJp+ihjOWIoOmZpOaTjeS9nAogICAgICAgIGF3YWl0IGFwaURlbGV0ZURvY3VtZW50KGRlbGV0ZWREb2NJZCk7CiAgICAgICAgRWxNZXNzYWdlLnN1Y2Nlc3MoJ+aWh+aho+WIoOmZpOaIkOWKnycpOwoKICAgICAgICAvLyDlvLrliLbmuIXpmaTpgInkuK3nmoTmlofmoaMKICAgICAgICBzZWxlY3RlZERvY3VtZW50LnZhbHVlID0gbnVsbDsKCiAgICAgICAgLy8g5riF6Zmk5Y+v6IO955qE57yT5a2Y5pWw5o2uCiAgICAgICAgaWYgKHdpbmRvdy5sb2NhbFN0b3JhZ2UpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIC8vIOenu+mZpOWPr+iDveWtmOWcqOeahOebuOWFs+e8k+WtmAogICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShgZG9jX2NhY2hlXyR7ZGVsZXRlZERvY0lkfWApOwogICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShgcmVjZW50X2RvY3NfY2FjaGVgKTsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oYGRvY19saXN0X2NhY2hlYCk7CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+a4hemZpOacrOWcsOe8k+WtmOWksei0pTonLCBlKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIOabtOaWsOWIt+aWsOinpuWPkeWZqAogICAgICAgIHJlZnJlc2hUcmlnZ2VyLnZhbHVlID0gRGF0ZS5ub3coKTsKCiAgICAgICAgLy8g5L2/55So5paw5pWw57uE5pu/5o2i5Y6f5pWw57uE77yM56Gu5L+dVnVl6IO95qOA5rWL5Yiw5Y+Y5YyWIAogICAgICAgIGRvY3VtZW50cy52YWx1ZSA9IFsuLi5kb2N1bWVudHMudmFsdWUuZmlsdGVyKGRvYyA9PiBkb2MuaWQgIT09IGRlbGV0ZWREb2NJZCldOwogICAgICAgIHJlY2VudERvY3VtZW50cy52YWx1ZSA9IFsuLi5yZWNlbnREb2N1bWVudHMudmFsdWUuZmlsdGVyKGRvYyA9PiBkb2MuaWQgIT09IGRlbGV0ZWREb2NJZCldOwogICAgICAgIHNoYXJlZERvY3VtZW50cy52YWx1ZSA9IFsuLi5zaGFyZWREb2N1bWVudHMudmFsdWUuZmlsdGVyKGRvYyA9PiBkb2MuaWQgIT09IGRlbGV0ZWREb2NJZCldOwoKICAgICAgICAvLyDlvLrliLbmm7TmlrDop4blm74KICAgICAgICBhd2FpdCBmb3JjZVVwZGF0ZSgpOwoKICAgICAgICAvLyDmm7TmlrDliIbnsbvkuK3nmoTmlofmoaPorqHmlbAKICAgICAgICBpZiAoZGVsZXRlZERvY0NhdGVnb3J5SWQpIHsKICAgICAgICAgIGNvbnN0IGNhdGVnb3J5ID0gZG9jdW1lbnRDYXRlZ29yaWVzLnZhbHVlLmZpbmQoYyA9PiBjLmlkID09PSBkZWxldGVkRG9jQ2F0ZWdvcnlJZCk7CiAgICAgICAgICBpZiAoY2F0ZWdvcnkgJiYgY2F0ZWdvcnkuZG9jdW1lbnRfY291bnQgPiAwKSB7CiAgICAgICAgICAgIGNhdGVnb3J5LmRvY3VtZW50X2NvdW50LS07CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyDnrYnlvoVET03mm7TmlrAKICAgICAgICBhd2FpdCBuZXh0VGljaygpOwoKICAgICAgICAvLyDph43mlrDlr7zoiKrliLDmlofmoaPpppbpobXvvIznoa7kv53nirbmgIHlhajpg6jliLfmlrAKICAgICAgICBpZiAocm91dGVyLmN1cnJlbnRSb3V0ZS52YWx1ZS5uYW1lID09PSAnU21hcnREb2NEZXRhaWwnKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygn5LuO6K+m5oOF6aG15Yig6Zmk5paH5qGj77yM6YeN5paw5a+86Iiq5Yiw5paH5qGj6aaW6aG1Jyk7CgogICAgICAgICAgLy8g5YWI5by65Yi25Yi35paw5pWw5o2u77yM56Gu5L+d5a+86Iiq5ZCO5pWw5o2u5piv5pyA5paw55qECiAgICAgICAgICBhd2FpdCByZWxvYWRBbGxEYXRhKCk7CgogICAgICAgICAgLy8g5L2/55SocmVwbGFjZeaooeW8j+i3s+i9rO+8jOS4jeeVmeS4i+WOhuWPsuiusOW9le+8jOW5tua3u+WKoOW8uuWItuWIt+aWsOWPguaVsAogICAgICAgICAgcm91dGVyLnJlcGxhY2UoewogICAgICAgICAgICBuYW1lOiAnU21hcnREb2MnLAogICAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICAgIF9yZWZyZXNoOiBEYXRlLm5vdygpCiAgICAgICAgICAgIH0gLy8g5re75Yqg5pe26Ze05oiz5Y+C5pWw6Ziy5q2i57yT5a2YCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8g5aaC5p6c5bey57uP5Zyo5paH5qGj6aaW6aG177yM56uL5Y2z6YeN6L295pWw5o2u5bm25by65Yi25Yi35paw6aG16Z2iCiAgICAgICAgICBhd2FpdCByZWZyZXNoRGF0YSgpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfliKDpmaTmlofmoaPlpLHotKUnLCBlcnJvcik7CiAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfliKDpmaTmlofmoaPlpLHotKUnKTsKICAgICAgICAvLyDlpoLmnpzliKDpmaTlpLHotKXvvIzlhbPpl63lr7nor53moYYKICAgICAgICBkZWxldGVEaWFsb2dWaXNpYmxlLnZhbHVlID0gZmFsc2U7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgZGVsZXRlTG9hZGluZy52YWx1ZSA9IGZhbHNlOwogICAgICB9CiAgICB9OwogICAgY29uc3Qgdmlld0FsbERvY3VtZW50cyA9IHR5cGUgPT4gewogICAgICBpZiAodHlwZSA9PT0gJ3JlY2VudCcpIHsKICAgICAgICAvLyDot7PovazliLDmiYDmnInmlofmoaPpobXpnaLlubbmmL7npLrmnIDov5HnvJbovpHnmoTmlofmoaMKICAgICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiAnU21hcnREb2NMaXN0JywKICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgIHNvcnQ6ICdyZWNlbnQnCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH07CiAgICBjb25zdCBzZWxlY3RDYXRlZ29yeSA9IGNhdGVnb3J5ID0+IHsKICAgICAgY29uc29sZS5sb2coJ+mAieaLqeWIhuexuzonLCBjYXRlZ29yeSk7CgogICAgICAvLyDlpoLmnpzpgInmi6nlvZPliY3lt7Lmv4DmtLvnmoTliIbnsbvvvIzkuI3lgZrmk43kvZwKICAgICAgbGV0IGNhdGVnb3J5SWQ7CiAgICAgIGlmICh0eXBlb2YgY2F0ZWdvcnkgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgY2F0ZWdvcnlJZCA9IGNhdGVnb3J5OwogICAgICB9IGVsc2UgaWYgKHR5cGVvZiBjYXRlZ29yeSA9PT0gJ29iamVjdCcgJiYgY2F0ZWdvcnkgIT09IG51bGwpIHsKICAgICAgICBjYXRlZ29yeUlkID0gY2F0ZWdvcnkuaWQudG9TdHJpbmcoKTsKICAgICAgfQoKICAgICAgLy8g5aaC5p6c54K55Ye75b2T5YmN5bey6YCJ5Lit55qE5YiG57G777yM5YiZ6YeN572u5Li6IuWFqOmDqCIKICAgICAgaWYgKHNlYXJjaENhdGVnb3J5LnZhbHVlID09PSBjYXRlZ29yeUlkICYmIGNhdGVnb3J5SWQgIT09ICdhbGwnKSB7CiAgICAgICAgc2VhcmNoQ2F0ZWdvcnkudmFsdWUgPSAnYWxsJzsKICAgICAgfSBlbHNlIHsKICAgICAgICBzZWFyY2hDYXRlZ29yeS52YWx1ZSA9IGNhdGVnb3J5SWQ7CiAgICAgIH0KCiAgICAgIC8vIOa3u+WKoOWKqOeUu+aViOaenAogICAgICBkb2N1bWVudHMudmFsdWUgPSBbXTsKICAgICAgY3JlYXRlTG9hZGluZy52YWx1ZSA9IHRydWU7CgogICAgICAvLyDlu7bov5/ojrflj5bvvIzlrp7njrDov4fmuKHmlYjmnpwKICAgICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7CiAgICAgICAgYXdhaXQgZmV0Y2hEb2N1bWVudHMoKTsKICAgICAgICBjcmVhdGVMb2FkaW5nLnZhbHVlID0gZmFsc2U7CgogICAgICAgIC8vIOWIoOmZpOiHquWKqOa7muWKqOmAu+i+ke+8jOmBv+WFjemhtemdouiHquWKqOi3s+i9rAoKICAgICAgICAvLyDop6blj5HkuIDkuKrnroDljZXnmoTliqjnlLvmlYjmnpzvvIznqoHlh7rmmL7npLrlt7LnrZvpgInnmoTmlofmoaMKICAgICAgICBjb25zdCBkb2NDYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kb2MtY2FyZCcpOwogICAgICAgIGlmIChkb2NDYXJkcyAmJiBkb2NDYXJkcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICBkb2NDYXJkcy5mb3JFYWNoKChjYXJkLCBpbmRleCkgPT4gewogICAgICAgICAgICBpZiAoY2FyZCkgewogICAgICAgICAgICAgIGNhcmQuc3R5bGUuYW5pbWF0aW9uRGVsYXkgPSBgJHtpbmRleCAqIDUwfW1zYDsKICAgICAgICAgICAgICBjYXJkLmNsYXNzTGlzdC5yZW1vdmUoJ2ZhZGVJbicpOwogICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKGNhcmQpIHsKICAgICAgICAgICAgICAgICAgY2FyZC5jbGFzc0xpc3QuYWRkKCdmYWRlSW4nKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LCAxMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSwgMzAwKTsKICAgIH07CgogICAgLy8g6I635Y+W6YCJ5Lit5YiG57G755qE6aKc6ImyCiAgICBjb25zdCBnZXRTZWxlY3RlZENhdGVnb3J5Q29sb3IgPSAoKSA9PiB7CiAgICAgIGlmIChzZWFyY2hDYXRlZ29yeS52YWx1ZSA9PT0gJ2FsbCcpIHJldHVybiAnIzQwOUVGRic7CiAgICAgIGNvbnN0IHNlbGVjdGVkQ2F0ZWdvcnkgPSBkb2N1bWVudENhdGVnb3JpZXMudmFsdWUuZmluZChjID0+IGMuaWQudG9TdHJpbmcoKSA9PT0gc2VhcmNoQ2F0ZWdvcnkudmFsdWUpOwogICAgICByZXR1cm4gKHNlbGVjdGVkQ2F0ZWdvcnkgPT09IG51bGwgfHwgc2VsZWN0ZWRDYXRlZ29yeSA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2VsZWN0ZWRDYXRlZ29yeS5jb2xvcikgfHwgJyM2N0MyM0EnOwogICAgfTsKCiAgICAvLyDojrflj5bpgInkuK3liIbnsbvnmoTlkI3np7AKICAgIGNvbnN0IGdldFNlbGVjdGVkQ2F0ZWdvcnlOYW1lID0gKCkgPT4gewogICAgICBpZiAoc2VhcmNoQ2F0ZWdvcnkudmFsdWUgPT09ICdhbGwnKSByZXR1cm4gJ+WFqOmDqOaWh+ahoyc7CiAgICAgIGNvbnN0IHNlbGVjdGVkQ2F0ZWdvcnkgPSBkb2N1bWVudENhdGVnb3JpZXMudmFsdWUuZmluZChjID0+IGMuaWQudG9TdHJpbmcoKSA9PT0gc2VhcmNoQ2F0ZWdvcnkudmFsdWUpOwogICAgICByZXR1cm4gKHNlbGVjdGVkQ2F0ZWdvcnkgPT09IG51bGwgfHwgc2VsZWN0ZWRDYXRlZ29yeSA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2VsZWN0ZWRDYXRlZ29yeS5uYW1lKSB8fCAn5pyq55+l5YiG57G7JzsKICAgIH07CiAgICBjb25zdCBtYW5hZ2VDYXRlZ29yaWVzID0gKCkgPT4gewogICAgICBjYXRlZ29yeURpYWxvZ1Zpc2libGUudmFsdWUgPSB0cnVlOwogICAgICByZXNldENhdGVnb3J5Rm9ybSgpOwogICAgfTsKICAgIGNvbnN0IGVkaXRDYXRlZ29yeSA9IGNhdGVnb3J5ID0+IHsKICAgICAgZWRpdGluZ0NhdGVnb3J5LnZhbHVlID0gewogICAgICAgIC4uLmNhdGVnb3J5CiAgICAgIH07CiAgICB9OwogICAgY29uc3QgcmVzZXRDYXRlZ29yeUZvcm0gPSAoKSA9PiB7CiAgICAgIGVkaXRpbmdDYXRlZ29yeS52YWx1ZSA9IHsKICAgICAgICBuYW1lOiAnJywKICAgICAgICBjb2xvcjogJyM0MDlFRkYnLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJwogICAgICB9OwogICAgICBpZiAoY2F0ZWdvcnlGb3JtUmVmLnZhbHVlKSB7CiAgICAgICAgY2F0ZWdvcnlGb3JtUmVmLnZhbHVlLnJlc2V0RmllbGRzKCk7CiAgICAgIH0KICAgIH07CiAgICBjb25zdCBzdWJtaXRDYXRlZ29yeSA9IGFzeW5jICgpID0+IHsKICAgICAgaWYgKCFjYXRlZ29yeUZvcm1SZWYudmFsdWUpIHJldHVybjsKICAgICAgYXdhaXQgY2F0ZWdvcnlGb3JtUmVmLnZhbHVlLnZhbGlkYXRlKGFzeW5jIHZhbGlkID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIGNhdGVnb3J5TG9hZGluZy52YWx1ZSA9IHRydWU7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBjb25zdCBjYXRlZ29yeURhdGEgPSB7CiAgICAgICAgICAgICAgbmFtZTogZWRpdGluZ0NhdGVnb3J5LnZhbHVlLm5hbWUsCiAgICAgICAgICAgICAgY29sb3I6IGVkaXRpbmdDYXRlZ29yeS52YWx1ZS5jb2xvciwKICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZWRpdGluZ0NhdGVnb3J5LnZhbHVlLmRlc2NyaXB0aW9uIHx8ICcnCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGlmIChlZGl0aW5nQ2F0ZWdvcnkudmFsdWUuaWQpIHsKICAgICAgICAgICAgICAvLyDmm7TmlrDliIbnsbsKICAgICAgICAgICAgICBhd2FpdCB1cGRhdGVEb2N1bWVudENhdGVnb3J5KGVkaXRpbmdDYXRlZ29yeS52YWx1ZS5pZCwgY2F0ZWdvcnlEYXRhKTsKICAgICAgICAgICAgICBFbE1lc3NhZ2Uuc3VjY2Vzcygn5YiG57G75pu05paw5oiQ5YqfJyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy8g5Yib5bu65YiG57G7CiAgICAgICAgICAgICAgYXdhaXQgY3JlYXRlRG9jdW1lbnRDYXRlZ29yeShjYXRlZ29yeURhdGEpOwogICAgICAgICAgICAgIEVsTWVzc2FnZS5zdWNjZXNzKCfliIbnsbvliJvlu7rmiJDlip8nKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8g6YeN5paw6I635Y+W5YiG57G75YiX6KGoCiAgICAgICAgICAgIGZldGNoRG9jdW1lbnRDYXRlZ29yaWVzKCk7CiAgICAgICAgICAgIHJlc2V0Q2F0ZWdvcnlGb3JtKCk7CiAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKCfkv53lrZjliIbnsbvlpLHotKU6JywgZXJyb3IpOwogICAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+S/neWtmOWIhuexu+Wksei0pScpOwogICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgY2F0ZWdvcnlMb2FkaW5nLnZhbHVlID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH07CiAgICBjb25zdCBkZWxldGVDYXRlZ29yeSA9IGNhdGVnb3J5ID0+IHsKICAgICAgaWYgKGNhdGVnb3J5LmRvY3VtZW50X2NvdW50ID4gMCkgewogICAgICAgIEVsTWVzc2FnZS53YXJuaW5nKCfor6XliIbnsbvkuIvmnInmlofmoaPvvIzml6Dms5XliKDpmaQnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgRWxNZXNzYWdlQm94LmNvbmZpcm0oYOehruWumuimgeWIoOmZpOWIhuexuyIke2NhdGVnb3J5Lm5hbWV9IuWQl++8n2AsICfliKDpmaTliIbnsbsnLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKGFzeW5jICgpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgYXdhaXQgZGVsZXRlRG9jdW1lbnRDYXRlZ29yeShjYXRlZ29yeS5pZCk7CiAgICAgICAgICBFbE1lc3NhZ2Uuc3VjY2Vzcygn5YiG57G75Yig6Zmk5oiQ5YqfJyk7CiAgICAgICAgICBmZXRjaERvY3VtZW50Q2F0ZWdvcmllcygpOwogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCfliKDpmaTliIbnsbvlpLHotKU6JywgZXJyb3IpOwogICAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfliKDpmaTliIbnsbvlpLHotKUnKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKCgpID0+IHt9KTsKICAgIH07CiAgICBjb25zdCBmb3JtYXREYXRlID0gZGF0ZVN0cmluZyA9PiB7CiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShkYXRlU3RyaW5nKTsKICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsKCiAgICAgIC8vIOWQjOS4gOWkqeaYvuekuuaXtumXtAogICAgICBpZiAoZGF0ZS50b0RhdGVTdHJpbmcoKSA9PT0gbm93LnRvRGF0ZVN0cmluZygpKSB7CiAgICAgICAgcmV0dXJuIGRhdGUudG9Mb2NhbGVUaW1lU3RyaW5nKCd6aC1DTicsIHsKICAgICAgICAgIGhvdXI6ICcyLWRpZ2l0JywKICAgICAgICAgIG1pbnV0ZTogJzItZGlnaXQnCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIC8vIOaYqOWkqQogICAgICBjb25zdCB5ZXN0ZXJkYXkgPSBuZXcgRGF0ZShub3cpOwogICAgICB5ZXN0ZXJkYXkuc2V0RGF0ZShub3cuZ2V0RGF0ZSgpIC0gMSk7CiAgICAgIGlmIChkYXRlLnRvRGF0ZVN0cmluZygpID09PSB5ZXN0ZXJkYXkudG9EYXRlU3RyaW5nKCkpIHsKICAgICAgICByZXR1cm4gJ+aYqOWkqSc7CiAgICAgIH0KCiAgICAgIC8vIOS4gOWRqOWGheaYvuekuuaYn+acnwogICAgICBjb25zdCB3ZWVrRGF5cyA9IFsn5ZGo5pelJywgJ+WRqOS4gCcsICflkajkuownLCAn5ZGo5LiJJywgJ+WRqOWbmycsICflkajkupQnLCAn5ZGo5YWtJ107CiAgICAgIGNvbnN0IGRpZmZEYXlzID0gTWF0aC5yb3VuZCgobm93IC0gZGF0ZSkgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpOwogICAgICBpZiAoZGlmZkRheXMgPCA3KSB7CiAgICAgICAgcmV0dXJuIHdlZWtEYXlzW2RhdGUuZ2V0RGF5KCldOwogICAgICB9CgogICAgICAvLyDlhbbku5bmg4XlhrXmmL7npLrml6XmnJ8KICAgICAgcmV0dXJuIGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCd6aC1DTicsIHsKICAgICAgICBtb250aDogJ251bWVyaWMnLAogICAgICAgIGRheTogJ251bWVyaWMnCiAgICAgIH0pOwogICAgfTsKICAgIGNvbnN0IHJlc2V0Q2F0ZWdvcnlGaWx0ZXIgPSAoKSA9PiB7CiAgICAgIHNlYXJjaENhdGVnb3J5LnZhbHVlID0gJ2FsbCc7CiAgICAgIGZldGNoRG9jdW1lbnRzKCk7CiAgICB9OwoKICAgIC8vIOa3u+WKoOmhtemdoua/gOa0u+mSqeWtkO+8jOehruS/neS7juWFtuS7lumhtemdoui/lOWbnuaXtumHjeaWsOiOt+WPluaVsOaNrgogICAgb25BY3RpdmF0ZWQoKCkgPT4gewogICAgICBjb25zb2xlLmxvZygnU21hcnREb2Pnu4Tku7booqvmv4DmtLvvvIzph43mlrDojrflj5bmlbDmja4nKTsKICAgICAgcmVsb2FkQWxsRGF0YSgpOwogICAgfSk7CgogICAgLy8g6aG16Z2i5r+A5rS75ZCO6YeN5paw5Yqg6L295omA5pyJ5pWw5o2u55qE5Ye95pWwCiAgICBjb25zdCByZWxvYWRBbGxEYXRhID0gYXN5bmMgKCkgPT4gewogICAgICB0cnkgewogICAgICAgIGNvbnNvbGUubG9nKCfph43mlrDliqDovb3miYDmnInmlofmoaPmlbDmja4uLi4nKTsKICAgICAgICBjcmVhdGVMb2FkaW5nLnZhbHVlID0gdHJ1ZTsKICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChbZmV0Y2hEb2N1bWVudHModHJ1ZSksIGZldGNoUmVjZW50RG9jdW1lbnRzKHRydWUpLCBmZXRjaFNoYXJlZERvY3VtZW50cygpLCBmZXRjaERvY3VtZW50Q2F0ZWdvcmllcygpXSk7CiAgICAgICAgY29uc29sZS5sb2coJ+aVsOaNrumHjeaWsOWKoOi9veWujOaIkCcpOwogICAgICAgIGF3YWl0IGZvcmNlVXBkYXRlKCk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign5pWw5o2u6YeN5paw5Yqg6L295aSx6LSlOicsIGVycm9yKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBjcmVhdGVMb2FkaW5nLnZhbHVlID0gZmFsc2U7CiAgICAgIH0KICAgIH07CgogICAgLy8g5o+Q5L6b6YeN6L295Ye95pWw57uZ5a2Q57uE5Lu25oiW54i257uE5Lu25L2/55SoCiAgICBwcm92aWRlKCdyZWxvYWREb2N1bWVudHMnLCByZWxvYWRBbGxEYXRhKTsKCiAgICAvLyDnm5HlkKzot6/nlLHlj5jljJbvvIzlvLrliLbliLfmlrDmlbDmja4KICAgIHdhdGNoKCgpID0+IHJvdXRlLnF1ZXJ5Ll9yZWZyZXNoLCBuZXdWYWwgPT4gewogICAgICBpZiAobmV3VmFsKSB7CiAgICAgICAgY29uc29sZS5sb2coJ+ajgOa1i+WIsOi3r+eUseWIt+aWsOWPguaVsDonLCBuZXdWYWwpOwogICAgICAgIHJlZnJlc2hUcmlnZ2VyLnZhbHVlID0gRGF0ZS5ub3coKTsKICAgICAgICByZWxvYWRBbGxEYXRhKCk7CiAgICAgIH0KICAgIH0pOwoKICAgIC8vIOebkeWQrOi3r+eUseWPguaVsO+8jOWkhOeQhuS4jeWQjOaDheWGtQogICAgd2F0Y2goKCkgPT4gcm91dGUucGF0aCwgKG5ld1BhdGgsIG9sZFBhdGgpID0+IHsKICAgICAgY29uc29sZS5sb2coJ+i3r+eUseWPmOWMljonLCBvbGRQYXRoLCAnLT4nLCBuZXdQYXRoKTsKICAgICAgaWYgKG5ld1BhdGggPT09ICcvc21hcnRkb2MnICYmIG9sZFBhdGggJiYgb2xkUGF0aC5zdGFydHNXaXRoKCcvc21hcnRkb2MvJykpIHsKICAgICAgICAvLyDku47mlofmoaPor6bmg4XpobXov5Tlm57mlofmoaPliJfooajpobXvvIzlvLrliLbliLfmlrAKICAgICAgICBjb25zb2xlLmxvZygn5LuO6K+m5oOF6aG16L+U5Zue5YiX6KGo6aG177yM5by65Yi25Yi35paw5pWw5o2uJyk7CiAgICAgICAgcmVmcmVzaFRyaWdnZXIudmFsdWUgPSBEYXRlLm5vdygpOwogICAgICAgIHJlbG9hZEFsbERhdGEoKTsKICAgICAgfQogICAgfSk7CgogICAgLy8g5omL5Yqo5by65Yi25Yi35paw5pa55rOVCiAgICBjb25zdCByZWZyZXNoRGF0YSA9IGFzeW5jICgpID0+IHsKICAgICAgcmVmcmVzaFRyaWdnZXIudmFsdWUgPSBEYXRlLm5vdygpOwogICAgICBhd2FpdCByZWxvYWRBbGxEYXRhKCk7CgogICAgICAvLyDlvLrliLbliLfmlrDpobXpnaLnu4Tku7YKICAgICAgaWYgKHByb3h5ICYmIHByb3h5LiRmb3JjZVVwZGF0ZSkgewogICAgICAgIHByb3h5LiRmb3JjZVVwZGF0ZSgpOwogICAgICB9CiAgICB9OwoKICAgIC8vIOeUn+WRveWRqOacn+mSqeWtkAogICAgb25Nb3VudGVkKCgpID0+IHsKICAgICAgY29uc29sZS5sb2coJ1NtYXJ0RG9j57uE5Lu2bW91bnRlZO+8jOWKoOi9veaVsOaNricpOwogICAgICByZWxvYWRBbGxEYXRhKCk7IC8vIOS9v+eUqOe7n+S4gOeahOaVsOaNruWKoOi9veWHveaVsAogICAgfSk7CiAgICByZXR1cm4gewogICAgICBkb2N1bWVudHMsCiAgICAgIHJlY2VudERvY3VtZW50cywKICAgICAgc2hhcmVkRG9jdW1lbnRzLAogICAgICBkb2N1bWVudENhdGVnb3JpZXMsCiAgICAgIHNlYXJjaFF1ZXJ5LAogICAgICBzZWFyY2hDYXRlZ29yeSwKICAgICAgZGVib3VuY2VkU2VhcmNoLAogICAgICB0b3RhbERvY3VtZW50cywKICAgICAgcmVjZW50RWRpdENvdW50LAogICAgICBuZXdEb2N1bWVudERpYWxvZ1Zpc2libGUsCiAgICAgIHNoYXJlRGlhbG9nVmlzaWJsZSwKICAgICAgZGVsZXRlRGlhbG9nVmlzaWJsZSwKICAgICAgZG9jdW1lbnRDcmVhdGVUeXBlLAogICAgICBuZXdEb2N1bWVudEZvcm0sCiAgICAgIGFpRG9jdW1lbnRGb3JtLAogICAgICBibGFua0Zvcm1SdWxlcywKICAgICAgYWlGb3JtUnVsZXMsCiAgICAgIGJsYW5rRm9ybVJlZiwKICAgICAgYWlGb3JtUmVmLAogICAgICBzZWxlY3RlZERvY3VtZW50LAogICAgICBzZWxlY3RlZFVzZXJzLAogICAgICBhdmFpbGFibGVVc2VycywKICAgICAgY3JlYXRlTG9hZGluZywKICAgICAgc2hhcmVMb2FkaW5nLAogICAgICBkZWxldGVMb2FkaW5nLAogICAgICBjcmVhdGVOZXdEb2N1bWVudCwKICAgICAgc3VibWl0TmV3RG9jdW1lbnQsCiAgICAgIG9wZW5Eb2N1bWVudCwKICAgICAgcmVuYW1lRG9jdW1lbnQsCiAgICAgIGR1cGxpY2F0ZURvY3VtZW50LAogICAgICBzaGFyZURvY3VtZW50LAogICAgICBjb25maXJtU2hhcmUsCiAgICAgIGRlbGV0ZURvY3VtZW50LAogICAgICBjb25maXJtRGVsZXRlLAogICAgICB2aWV3QWxsRG9jdW1lbnRzLAogICAgICBmb3JtYXREYXRlLAogICAgICBjYXRlZ29yeURpYWxvZ1Zpc2libGUsCiAgICAgIGVkaXRpbmdDYXRlZ29yeSwKICAgICAgY2F0ZWdvcnlGb3JtUmVmLAogICAgICBjYXRlZ29yeUxvYWRpbmcsCiAgICAgIGNhdGVnb3J5Rm9ybVJ1bGVzLAogICAgICBlZGl0Q2F0ZWdvcnksCiAgICAgIHJlc2V0Q2F0ZWdvcnlGb3JtLAogICAgICBzdWJtaXRDYXRlZ29yeSwKICAgICAgZGVsZXRlQ2F0ZWdvcnksCiAgICAgIHJlc2V0Q2F0ZWdvcnlGaWx0ZXIsCiAgICAgIHNlbGVjdENhdGVnb3J5LAogICAgICBnZXRTZWxlY3RlZENhdGVnb3J5Q29sb3IsCiAgICAgIGdldFNlbGVjdGVkQ2F0ZWdvcnlOYW1lLAogICAgICBtYW5hZ2VDYXRlZ29yaWVzLAogICAgICByZWxvYWRBbGxEYXRhLAogICAgICAvLyDmt7vliqDliLDov5Tlm57lgLzkuK3vvIzkvpvmqKHmnb/kvb/nlKgKICAgICAgcmVmcmVzaERhdGEsCiAgICAgIC8vIOaWsOWinuW8uuWItuWIt+aWsOaWueazlQogICAgICByZWZyZXNoVHJpZ2dlciAvLyDmt7vliqDliLfmlrDop6blj5HlmajliLDov5Tlm57lgLwKICAgIH07CiAgfQp9Ow=="},{"version":3,"names":["ref","computed","onMounted","nextTick","getCurrentInstance","provide","onActivated","watch","useRouter","useRoute","ElMessage","ElMessageBox","Search","Plus","EditPen","Share","Folder","Close","More","Document","_","getDocuments","getRecentDocuments","getSharedDocuments","getDocumentCategories","createDocument","deleteDocument","apiDeleteDocument","shareDocument","apiShareDocument","createDocumentCategory","updateDocumentCategory","deleteDocumentCategory","aiGenerateDocument","MarkdownToQuill","name","components","setup","router","route","proxy","refreshTrigger","Date","now","documents","recentDocuments","sharedDocuments","documentCategories","searchQuery","searchCategory","newDocumentDialogVisible","shareDialogVisible","deleteDialogVisible","documentCreateType","selectedDocument","selectedUsers","availableUsers","createLoading","shareLoading","deleteLoading","newDocumentForm","title","type","aiDocumentForm","requirements","blankFormRules","required","message","trigger","min","max","aiFormRules","blankFormRef","aiFormRef","totalDocuments","value","length","recentEditCount","categoryDialogVisible","editingCategory","color","description","categoryFormRef","categoryLoading","categoryFormRules","forceUpdate","$forceUpdate","fetchDocuments","forceRefresh","console","log","params","page","limit","category","search","_t","getTime","res","data","Array","isArray","warn","error","fetchRecentDocuments","fetchSharedDocuments","response","fetchDocumentCategories","retryCount","setTimeout","status","debouncedSearch","debounce","createNewDocument","dialog","document","querySelector","addEventListener","clearValidate","err","once","submitNewDocument","valid","validate","catch","content","JSON","stringify","success","docId","id","results","push","navErr","categoryId","requirement","category_id","doc_type","converter","quillDelta","convert","localStorage","setItem","openDocument","doc","renameDocument","prompt","confirmButtonText","cancelButtonText","inputValue","inputValidator","then","info","duplicateDocument","username","confirmShare","warning","confirmDelete","_selectedDocument$val","deletedDocId","deletedDocCategoryId","window","removeItem","e","filter","find","c","document_count","currentRoute","reloadAllData","replace","query","_refresh","refreshData","viewAllDocuments","sort","selectCategory","toString","docCards","querySelectorAll","forEach","card","index","style","animationDelay","classList","remove","add","getSelectedCategoryColor","selectedCategory","getSelectedCategoryName","manageCategories","resetCategoryForm","editCategory","resetFields","submitCategory","categoryData","deleteCategory","confirm","formatDate","dateString","date","toDateString","toLocaleTimeString","hour","minute","yesterday","setDate","getDate","weekDays","diffDays","Math","round","getDay","toLocaleDateString","month","day","resetCategoryFilter","Promise","all","newVal","path","newPath","oldPath","startsWith"],"sources":["C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\smartdoc\\Index.vue"],"sourcesContent":["<template>\n  <div class=\"smartdoc-home-container\">\n    <!-- 添加隐藏的刷新触发元素，用于强制组件刷新 -->\n    <div style=\"display: none;\">{{ refreshTrigger }}</div>\n    \n    <!-- 页面标题和操作区 -->\n    <div class=\"page-header\">\n      <div class=\"left-section\">\n        <h2 class=\"page-title\">智能文档</h2>\n        <p class=\"page-description\">创建、编辑和管理您的智能文档</p>\n        </div>\n      <div class=\"right-section\">\n        <div class=\"search-controls\">\n          <el-select \n            v-model=\"searchCategory\" \n            placeholder=\"选择分类\" \n            @change=\"selectCategory(searchCategory)\" \n            class=\"category-select\"\n          >\n            <el-option label=\"全部分类\" value=\"all\" />\n            <el-option \n              v-for=\"category in documentCategories\" \n              :key=\"category.id\" \n              :label=\"category.name\" \n              :value=\"category.id.toString()\"\n            />\n          </el-select>\n          \n          <el-input\n            placeholder=\"搜索文档...\"\n            v-model=\"searchQuery\"\n          class=\"search-input\"\n            clearable\n            @input=\"debouncedSearch\"\n          >\n            <template #prefix>\n              <el-icon><Search /></el-icon>\n            </template>\n          </el-input>\n        </div>\n        \n        <el-button type=\"primary\" @click=\"createNewDocument\">\n          <el-icon><Plus /></el-icon> 新建文档\n        </el-button>\n          </div>\n        </div>\n\n    <!-- 文档概览统计卡片 -->\n    <div class=\"stats-cards\">\n      <el-card class=\"stat-card\" shadow=\"hover\">\n        <div class=\"stat-content\">\n          <div class=\"stat-icon doc-icon\">\n                <el-icon><Document /></el-icon>\n              </div>\n          <div class=\"stat-info\">\n            <div class=\"stat-value\">{{ totalDocuments }}</div>\n            <div class=\"stat-label\">全部文档</div>\n                </div>\n              </div>\n      </el-card>\n      \n      <el-card class=\"stat-card\" shadow=\"hover\">\n        <div class=\"stat-content\">\n          <div class=\"stat-icon edit-icon\">\n            <el-icon><EditPen /></el-icon>\n            </div>\n          <div class=\"stat-info\">\n            <div class=\"stat-value\">{{ recentEditCount }}</div>\n            <div class=\"stat-label\">近期编辑</div>\n          </div>\n        </div>\n      </el-card>\n      \n      <el-card class=\"stat-card\" shadow=\"hover\">\n        <div class=\"stat-content\">\n          <div class=\"stat-icon share-icon\">\n            <el-icon><Share /></el-icon>\n          </div>\n          <div class=\"stat-info\">\n            <div class=\"stat-value\">{{ sharedDocuments.length }}</div>\n            <div class=\"stat-label\">共享文档</div>\n            </div>\n        </div>\n      </el-card>\n    </div>\n\n    <!-- 添加筛选活动状态提示栏 -->\n    <div v-if=\"searchCategory !== 'all'\" class=\"filter-status-bar\">\n      <div class=\"filter-bar-content\">\n        <div class=\"filter-title\">\n          <span>当前筛选: </span>\n          <span class=\"filter-category\" :style=\"{ backgroundColor: getSelectedCategoryColor() }\">\n            {{ getSelectedCategoryName() }}\n          </span>\n        </div>\n        <div class=\"filter-actions\">\n          <el-button type=\"primary\" link @click=\"resetCategoryFilter\">\n            <el-icon><Close /></el-icon> 清除筛选\n          </el-button>\n        </div>\n      </div>\n    </div>\n\n    <!-- 文档分类区域 - 移至文档列表上方 -->\n    <div class=\"section category-section\">\n      <div class=\"section-header\">\n        <h3>文档类型</h3>\n        <div class=\"section-actions\">\n          <el-button text @click=\"manageCategories\">管理类型</el-button>\n        </div>\n      </div>\n      \n      <div class=\"category-cards\">\n        <!-- 全部分类选项 -->\n        <div \n          class=\"category-card\" \n          :class=\"{ 'category-active': searchCategory === 'all' }\"\n          @click=\"selectCategory('all')\"\n        >\n          <div class=\"category-icon\" :style=\"{ backgroundColor: '#409EFF' }\">\n            <el-icon><Document /></el-icon>\n          </div>\n          <div class=\"category-info\">\n            <h4>全部文档</h4>\n            <div class=\"category-count\">{{ documents.length }} 个文档</div>\n          </div>\n          <div v-if=\"searchCategory === 'all'\" class=\"category-selected-indicator\"></div>\n        </div>\n        \n        <!-- 分类卡片 -->\n        <div \n          v-for=\"category in documentCategories\" \n          :key=\"category.id\" \n          class=\"category-card\" \n          :class=\"{ 'category-active': searchCategory === category.id.toString() }\"\n          @click=\"selectCategory(category)\"\n        >\n          <div class=\"category-icon\" :style=\"{ backgroundColor: category.color }\">\n            <el-icon><Folder /></el-icon>\n          </div>\n          <div class=\"category-info\">\n            <h4>{{ category.name }}</h4>\n            <div class=\"category-count\">{{ category.document_count }} 个文档</div>\n          </div>\n          <div v-if=\"searchCategory === category.id.toString()\" class=\"category-selected-indicator\"></div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 添加文档列表区域 -->\n    <div class=\"section\">\n      <div class=\"section-header\">\n        <h3>我的文档</h3>\n        <div class=\"filter-controls\">\n          <el-button text @click=\"fetchDocuments\">刷新</el-button>\n        </div>\n              </div>\n      \n      <div class=\"document-cards\">\n        <el-card \n          v-for=\"doc in documents\" \n          :key=\"doc.id\" \n          class=\"doc-card\" \n          shadow=\"hover\"\n          @click=\"openDocument(doc)\"\n        >\n          <div class=\"doc-card-header\">\n            <div class=\"doc-info\">\n            <div class=\"doc-type-tag\">{{ doc.type }}</div>\n              <div v-if=\"doc.category\" \n                   class=\"doc-category-tag\" \n                   :style=\"{ backgroundColor: doc.category.color || '#67C23A' }\"\n              >\n                {{ doc.category.name }}\n              </div>\n            </div>\n            <div class=\"doc-menu\">\n              <el-dropdown trigger=\"click\" @click.stop>\n                <el-icon><More /></el-icon>\n                  <template #dropdown>\n                    <el-dropdown-menu>\n                    <el-dropdown-item @click.stop=\"openDocument(doc)\">打开</el-dropdown-item>\n                    <el-dropdown-item @click.stop=\"renameDocument(doc)\">重命名</el-dropdown-item>\n                    <el-dropdown-item @click.stop=\"duplicateDocument(doc)\">复制</el-dropdown-item>\n                    <el-dropdown-item @click.stop=\"shareDocument(doc)\">分享</el-dropdown-item>\n                    <el-dropdown-item divided @click.stop=\"deleteDocument(doc)\" type=\"danger\">删除</el-dropdown-item>\n                    </el-dropdown-menu>\n                  </template>\n                </el-dropdown>\n            </div>\n          </div>\n          \n          <h4 class=\"doc-title\" :title=\"doc.title\">{{ doc.title }}</h4>\n          \n          <div class=\"doc-preview\" v-html=\"doc.preview || '无预览内容'\"></div>\n          \n          <div class=\"doc-footer\">\n            <div class=\"doc-time\">{{ formatDate(doc.update_time) }}</div>\n            <div class=\"doc-actions\">\n              <el-tooltip content=\"编辑\" placement=\"top\">\n                <el-button link circle size=\"small\" @click.stop=\"openDocument(doc)\">\n                  <el-icon><EditPen /></el-icon>\n                </el-button>\n              </el-tooltip>\n              <el-tooltip content=\"分享\" placement=\"top\">\n                <el-button link circle size=\"small\" @click.stop=\"shareDocument(doc)\">\n                  <el-icon><Share /></el-icon>\n                </el-button>\n              </el-tooltip>\n              </div>\n            </div>\n        </el-card>\n        \n        <!-- 创建新文档卡片 -->\n        <div class=\"doc-card new-doc-card\" @click=\"createNewDocument\">\n          <div class=\"new-doc-content\">\n            <el-icon><Plus /></el-icon>\n            <span>新建文档</span>\n                  </div>\n                    </div>\n                  </div>\n      \n      <div v-if=\"documents.length === 0 && !createLoading\" class=\"empty-state\">\n        <!-- 移除暂无文档的显示部分 -->\n                </div>\n\n      <div v-if=\"createLoading\" class=\"loading-state\">\n        <el-skeleton :rows=\"3\" animated />\n      </div>\n    </div>\n\n    <!-- 最近编辑文档区域 -->\n    <div class=\"section\">\n      <div class=\"section-header\">\n        <h3>最近编辑</h3>\n        <div class=\"section-actions\">\n        <el-button text @click=\"viewAllDocuments('recent')\">查看全部</el-button>\n        </div>\n                </div>\n      \n      <div class=\"document-cards\">\n        <el-card \n          v-for=\"doc in recentDocuments\" \n          :key=\"doc.id\" \n          class=\"doc-card\" \n          shadow=\"hover\"\n          @click=\"openDocument(doc)\"\n        >\n          <div class=\"doc-card-header\">\n            <div class=\"doc-info\">\n            <div class=\"doc-type-tag\">{{ doc.type }}</div>\n              <div v-if=\"doc.category\" \n                   class=\"doc-category-tag\" \n                   :style=\"{ backgroundColor: doc.category.color || '#67C23A' }\"\n              >\n                {{ doc.category.name }}\n                  </div>\n            </div>\n            <div class=\"doc-menu\">\n              <el-dropdown trigger=\"click\" @click.stop>\n                <el-icon><More /></el-icon>\n                  <template #dropdown>\n                    <el-dropdown-menu>\n                    <el-dropdown-item @click.stop=\"openDocument(doc)\">打开</el-dropdown-item>\n                    <el-dropdown-item @click.stop=\"renameDocument(doc)\">重命名</el-dropdown-item>\n                    <el-dropdown-item @click.stop=\"duplicateDocument(doc)\">复制</el-dropdown-item>\n                    <el-dropdown-item @click.stop=\"shareDocument(doc)\">分享</el-dropdown-item>\n                    <el-dropdown-item divided @click.stop=\"deleteDocument(doc)\" type=\"danger\">删除</el-dropdown-item>\n                    </el-dropdown-menu>\n                  </template>\n                </el-dropdown>\n            </div>\n          </div>\n          \n          <h4 class=\"doc-title\" :title=\"doc.title\">{{ doc.title }}</h4>\n          \n          <div class=\"doc-preview\" v-html=\"doc.preview || '无预览内容'\"></div>\n          \n          <div class=\"doc-footer\">\n            <div class=\"doc-time\">{{ formatDate(doc.update_time) }}</div>\n            <div class=\"doc-actions\">\n              <el-tooltip content=\"编辑\" placement=\"top\">\n                <el-button link circle size=\"small\" @click.stop=\"openDocument(doc)\">\n                  <el-icon><EditPen /></el-icon>\n                </el-button>\n              </el-tooltip>\n              <el-tooltip content=\"分享\" placement=\"top\">\n                <el-button link circle size=\"small\" @click.stop=\"shareDocument(doc)\">\n                  <el-icon><Share /></el-icon>\n                </el-button>\n              </el-tooltip>\n              </div>\n                </div>\n        </el-card>\n        \n        <!-- 创建新文档卡片 -->\n        <div class=\"doc-card new-doc-card\" @click=\"createNewDocument\">\n          <div class=\"new-doc-content\">\n            <el-icon><Plus /></el-icon>\n            <span>新建文档</span>\n          </div>\n        </div>\n      </div>\n      \n      <div v-if=\"recentDocuments.length === 0\" class=\"empty-state\">\n        <!-- 移除暂无最近编辑文档的显示 -->\n    </div>\n  </div>\n\n    <!-- 创建新文档对话框 -->\n  <el-dialog\n      v-model=\"newDocumentDialogVisible\"\n      title=\"新建智能文档\"\n      width=\"35%\"\n    >\n      <el-tabs v-model=\"documentCreateType\">\n        <el-tab-pane label=\"空白文档\" name=\"blank\">\n          <el-form \n            :model=\"newDocumentForm\" \n            label-width=\"80px\" \n            class=\"mt-4\"\n            :rules=\"blankFormRules\"\n            ref=\"blankFormRef\"\n          >\n            <el-form-item label=\"文档标题\" prop=\"title\">\n              <el-input v-model=\"newDocumentForm.title\" placeholder=\"请输入文档标题\" />\n      </el-form-item>\n            <el-form-item label=\"文档类型\">\n              <el-input v-model=\"newDocumentForm.type\" placeholder=\"请输入文档类型\" />\n              <div class=\"form-tip\">如果未填写，默认为通用类型</div>\n            </el-form-item>\n          </el-form>\n        </el-tab-pane>\n        <el-tab-pane label=\"AI生成文档\" name=\"ai\">\n          <el-form \n            :model=\"aiDocumentForm\" \n            label-width=\"80px\" \n            class=\"mt-4\"\n            :rules=\"aiFormRules\"\n            ref=\"aiFormRef\"\n          >\n            <el-form-item label=\"文档主题\" prop=\"title\">\n              <el-input v-model=\"aiDocumentForm.title\" placeholder=\"简短描述文档主题，如：项目周报\" />\n            </el-form-item>\n            <el-form-item label=\"文档要求\" prop=\"requirements\">\n        <el-input\n                v-model=\"aiDocumentForm.requirements\" \n          type=\"textarea\"\n                :rows=\"3\" \n                placeholder=\"详细描述您需要的文档内容和要求\"\n        />\n              <div class=\"form-tip\">人工智能会根据您的描述生成文档内容</div>\n      </el-form-item>\n    </el-form>\n        </el-tab-pane>\n      </el-tabs>\n    <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"newDocumentDialogVisible = false\">取消</el-button>\n          <el-button type=\"primary\" @click=\"submitNewDocument\" :loading=\"createLoading\">\n            创建\n          </el-button>\n        </span>\n      </template>\n    </el-dialog>\n    \n    <!-- 分享文档对话框 -->\n    <el-dialog\n      v-model=\"shareDialogVisible\"\n      title=\"分享文档\"\n      width=\"30%\"\n    >\n      <div v-if=\"selectedDocument\">\n        <p>您即将分享文档: <strong>{{ selectedDocument.title }}</strong></p>\n        <el-form label-width=\"120px\" class=\"mt-4\">\n          <el-form-item label=\"选择用户\">\n            <el-select\n              v-model=\"selectedUsers\"\n              multiple\n              placeholder=\"请选择用户\"\n              style=\"width: 100%\"\n            >\n              <el-option\n                v-for=\"user in availableUsers\"\n                :key=\"user.id\"\n                :label=\"user.username\"\n                :value=\"user.id\"\n              />\n            </el-select>\n          </el-form-item>\n        </el-form>\n      </div>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"shareDialogVisible = false\">取消</el-button>\n          <el-button type=\"primary\" @click=\"confirmShare\" :loading=\"shareLoading\">\n            分享\n          </el-button>\n        </span>\n    </template>\n  </el-dialog>\n    \n    <!-- 删除确认对话框 -->\n    <el-dialog\n      v-model=\"deleteDialogVisible\"\n      title=\"删除文档\"\n      width=\"30%\"\n    >\n      <div v-if=\"selectedDocument\">\n        <p>您确定要删除文档 <strong>{{ selectedDocument.title }}</strong> 吗?</p>\n        <p class=\"warning-text\">此操作不可撤销!</p>\n  </div>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"deleteDialogVisible = false\">取消</el-button>\n          <el-button type=\"danger\" @click=\"confirmDelete\" :loading=\"deleteLoading\">\n            删除\n          </el-button>\n        </span>\n      </template>\n    </el-dialog>\n    \n    <!-- 分类管理对话框 -->\n    <el-dialog\n      v-model=\"categoryDialogVisible\"\n      title=\"管理文档类型\"\n      width=\"40%\"\n    >\n      <div class=\"category-management\">\n        <div class=\"category-list\">\n          <h4>当前类型</h4>\n          <el-table :data=\"documentCategories\" style=\"width: 100%\">\n            <el-table-column prop=\"name\" label=\"类型名称\" />\n            <el-table-column label=\"颜色\" width=\"120\">\n              <template #default=\"scope\">\n                <div class=\"color-preview\" :style=\"{ backgroundColor: scope.row.color }\"></div>\n                {{ scope.row.color }}\n              </template>\n            </el-table-column>\n            <el-table-column label=\"文档数\" width=\"100\">\n              <template #default=\"scope\">\n                {{ scope.row.document_count || 0 }}\n              </template>\n            </el-table-column>\n            <el-table-column label=\"操作\" width=\"150\">\n              <template #default=\"scope\">\n                <el-button type=\"primary\" link @click=\"editCategory(scope.row)\">编辑</el-button>\n                <el-button \n                  type=\"danger\" \n                  link \n                  @click=\"deleteCategory(scope.row)\"\n                  :disabled=\"scope.row.document_count > 0\"\n                >删除</el-button>\n              </template>\n            </el-table-column>\n          </el-table>\n        </div>\n        \n        <el-divider />\n        \n        <div class=\"category-form\">\n          <h4>{{ editingCategory.id ? '编辑类型' : '新增类型' }}</h4>\n          <el-form \n            :model=\"editingCategory\" \n            :rules=\"categoryFormRules\" \n            label-width=\"80px\"\n            ref=\"categoryFormRef\"\n          >\n            <el-form-item label=\"类型名称\" prop=\"name\">\n              <el-input v-model=\"editingCategory.name\" placeholder=\"输入类型名称\" />\n            </el-form-item>\n            <el-form-item label=\"类型颜色\" prop=\"color\">\n              <el-color-picker v-model=\"editingCategory.color\" />\n              <span class=\"color-value\">{{ editingCategory.color }}</span>\n            </el-form-item>\n            <el-form-item label=\"描述\">\n              <el-input \n                v-model=\"editingCategory.description\" \n                type=\"textarea\" \n                :rows=\"3\" \n                placeholder=\"输入类型描述（可选）\" \n              />\n            </el-form-item>\n            <el-form-item>\n              <el-button type=\"primary\" @click=\"submitCategory\" :loading=\"categoryLoading\">\n                {{ editingCategory.id ? '更新' : '创建' }}\n              </el-button>\n              <el-button @click=\"resetCategoryForm\">重置</el-button>\n            </el-form-item>\n          </el-form>\n        </div>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { ref, computed, onMounted, nextTick, getCurrentInstance, provide, onActivated, watch } from 'vue'\nimport { useRouter, useRoute } from 'vue-router'\nimport { ElMessage, ElMessageBox } from 'element-plus'\nimport { Search, Plus, EditPen, Share, Folder, Close, More, Document } from '@element-plus/icons-vue'\nimport _ from 'lodash'\nimport { \n  getDocuments,\n  getRecentDocuments,\n  getSharedDocuments,\n  getDocumentCategories,\n  createDocument,\n  deleteDocument as apiDeleteDocument,\n  shareDocument as apiShareDocument,\n  createDocumentCategory,\n  updateDocumentCategory,\n  deleteDocumentCategory,\n  aiGenerateDocument\n} from '@/api/smartdoc'\nimport { MarkdownToQuill } from 'md-to-quill-delta'\n\nexport default {\n  name: 'SmartDocHome',\n  components: {\n    Search,\n    Plus,\n    EditPen,\n    Share,\n    Folder,\n    Close,\n    More,\n    Document\n  },\n  setup() {\n    const router = useRouter()\n    const route = useRoute()\n    const { proxy } = getCurrentInstance() // 获取组件实例\n    \n    // 刷新触发器，用于强制组件刷新\n    const refreshTrigger = ref(Date.now())\n    \n    // 状态数据\n    const documents = ref([])\n    const recentDocuments = ref([])\n    const sharedDocuments = ref([])\n    const documentCategories = ref([])\n    const searchQuery = ref('')\n    const searchCategory = ref('all')\n    const newDocumentDialogVisible = ref(false)\n    const shareDialogVisible = ref(false)\n    const deleteDialogVisible = ref(false)\n    const documentCreateType = ref('blank')\n    const selectedDocument = ref(null)\n    const selectedUsers = ref([])\n    const availableUsers = ref([])\n    const createLoading = ref(false)\n    const shareLoading = ref(false)\n    const deleteLoading = ref(false)\n    \n    // 表单数据\n    const newDocumentForm = ref({\n        title: '',\n        type: ''\n    })\n    \n    const aiDocumentForm = ref({\n        title: '',\n      requirements: ''\n    })\n    \n    // 表单校验规则\n    const blankFormRules = {\n        title: [\n        { required: true, message: '请输入文档标题', trigger: 'blur' },\n        { min: 2, max: 50, message: '长度在 2 到 50 个字符', trigger: 'blur' }\n        ]\n    }\n    \n    const aiFormRules = {\n        title: [\n        { required: true, message: '请输入文档主题', trigger: 'blur' },\n        { min: 2, max: 50, message: '长度在 2 到 50 个字符', trigger: 'blur' }\n        ],\n        requirements: [\n        { required: true, message: '请输入文档要求', trigger: 'blur' },\n        { min: 10, max: 500, message: '长度在 10 到 500 个字符', trigger: 'blur' }\n      ]\n    }\n    \n    const blankFormRef = ref(null)\n    const aiFormRef = ref(null)\n    \n    // 计算属性\n    const totalDocuments = computed(() => documents.value.length)\n    const recentEditCount = computed(() => recentDocuments.value.length)\n    \n    // 分类管理相关状态\n    const categoryDialogVisible = ref(false)\n    const editingCategory = ref({\n      name: '',\n      color: '#409EFF',\n      description: '',\n    })\n    const categoryFormRef = ref(null)\n    const categoryLoading = ref(false)\n    const categoryFormRules = {\n      name: [\n        { required: true, message: '请输入类型名称', trigger: 'blur' },\n        { min: 2, max: 20, message: '长度在2到20个字符', trigger: 'blur' }\n      ],\n      color: [\n        { required: true, message: '请选择颜色', trigger: 'change' }\n      ]\n    }\n    \n    // 辅助方法：强制刷新视图\n    const forceUpdate = async () => {\n      // 创建临时数据，触发深度响应式更新\n      documents.value = [...documents.value];\n      recentDocuments.value = [...recentDocuments.value]; \n      sharedDocuments.value = [...sharedDocuments.value];\n      \n      // 使用Vue实例的$forceUpdate方法\n      if (proxy && proxy.$forceUpdate) {\n        proxy.$forceUpdate();\n      }\n      \n      // 等待DOM更新\n      await nextTick();\n    };\n    \n    // 方法\n    const fetchDocuments = async (forceRefresh = false) => {\n      console.log('开始获取文档列表...');\n      try {\n        // 设置加载状态\n        createLoading.value = true;\n        // 准备请求参数\n        const params = {\n          page: 1,\n          limit: 10\n        };\n        // 如果有查询条件，添加到参数中\n        if (searchCategory.value && searchCategory.value !== 'all') {\n          params.category = searchCategory.value;\n          console.log(`按分类查询，ID: ${searchCategory.value}`, typeof searchCategory.value);\n        }\n        if (searchQuery.value) {\n          params.search = searchQuery.value;\n        }\n        \n        // 如果强制刷新，添加时间戳防止缓存\n        if (forceRefresh) {\n          params._t = new Date().getTime();\n        }\n        \n        console.log('API请求参数:', params);\n        const res = await getDocuments(params);\n        console.log('文档列表API响应:', res);\n        \n        // 处理分页数据\n        if (res && res.data) {\n          // 完全替换数组而不是修改引用\n          documents.value = Array.isArray(res.data) ? [...res.data] : [];\n          console.log(`设置文档列表: ${documents.value.length}条记录`, documents.value);\n        } else {\n          console.warn('API返回的响应数据无效:', res);\n          documents.value = [];\n        }\n      } catch (error) {\n        console.error('获取文档列表失败:', error);\n        ElMessage.error('获取文档列表失败');\n        documents.value = [];\n      } finally {\n        createLoading.value = false;\n      }\n    }\n    \n    const fetchRecentDocuments = async (forceRefresh = false) => {\n      console.log('开始获取最近文档...');\n      try {\n        // 准备参数，如果强制刷新添加时间戳\n        const params = forceRefresh ? { _t: new Date().getTime() } : {};\n        \n        const res = await getRecentDocuments(params);\n        console.log('最近文档API响应:', res);\n        \n        if (res && res.data) {\n          // 完全替换数组而不是修改引用\n          recentDocuments.value = Array.isArray(res.data) ? [...res.data] : [];\n          console.log(`设置最近文档: ${recentDocuments.value.length}条记录`);\n        } else {\n          console.warn('API返回的最近文档数据无效:', res);\n          recentDocuments.value = [];\n        }\n      } catch (error) {\n        console.error('获取最近文档失败:', error);\n        ElMessage.error('获取最近文档失败');\n        recentDocuments.value = [];\n      }\n    }\n    \n    const fetchSharedDocuments = async () => {\n      try {\n        const response = await getSharedDocuments()\n        sharedDocuments.value = response.data\n      } catch (error) {\n        console.error('获取共享文档失败', error)\n        ElMessage.error('获取共享文档失败')\n      }\n    }\n    \n    const fetchDocumentCategories = async (retryCount = 0) => {\n      console.log('开始获取文档分类...');\n      try {\n        const res = await getDocumentCategories();\n        console.log('文档分类API响应:', res);\n        \n        if (res && res.data) {\n          documentCategories.value = res.data;\n          console.log(`设置文档分类: ${documentCategories.value.length}条记录, 数据:`, documentCategories.value);\n        } else {\n          console.warn('API返回的文档分类数据无效:', res);\n          documentCategories.value = [];\n          \n          // 如果返回空数据且未达到最大重试次数，尝试重试\n          if (documentCategories.value.length === 0 && retryCount < 2) {\n            console.log(`文档分类数据为空，${retryCount + 1}秒后重试...`);\n            setTimeout(() => fetchDocumentCategories(retryCount + 1), (retryCount + 1) * 1000);\n          }\n        }\n      } catch (error) {\n        console.error('获取文档分类失败:', error);\n        \n        // 如果是服务器错误且未达到最大重试次数，尝试重试\n        if (error.response && error.response.status >= 500 && retryCount < 2) {\n          console.log(`服务器错误，${retryCount + 1}秒后重试...`);\n          setTimeout(() => fetchDocumentCategories(retryCount + 1), (retryCount + 1) * 1000);\n        } else {\n          ElMessage.error('获取文档分类失败，请刷新页面重试');\n          // 初始化空数组\n          documentCategories.value = [];\n        }\n      }\n    }\n    \n    // 防抖搜索\n    const debouncedSearch = _.debounce(async () => {\n      if (searchQuery.value) {\n        try {\n          await fetchDocuments()\n        } catch (error) {\n          console.error('搜索文档失败', error)\n        }\n      } else {\n        fetchDocuments()\n      }\n    }, 500)\n    \n    const createNewDocument = () => {\n      // 重置表单\n      newDocumentForm.value = { title: '', type: '' }\n      aiDocumentForm.value = { title: '', requirements: '' }\n      documentCreateType.value = 'blank'\n      newDocumentDialogVisible.value = true\n      \n      // 监听对话框关闭事件，清理表单\n      nextTick(() => {\n        try {\n          const dialog = document.querySelector('.el-dialog');\n          if (dialog) {\n            dialog.addEventListener('closed', () => {\n              try {\n                if (blankFormRef.value) {\n                  blankFormRef.value.clearValidate();\n                }\n                if (aiFormRef.value) {\n                  aiFormRef.value.clearValidate();\n                }\n              } catch (err) {\n                console.error('Error clearing form validation:', err);\n              }\n            }, { once: true });\n          }\n        } catch (err) {\n          console.error('Error setting up dialog event listener:', err);\n        }\n      });\n    }\n    \n    const submitNewDocument = async () => {\n      if (documentCreateType.value === 'blank') {\n        if (!blankFormRef.value) {\n          console.warn('表单引用不存在');\n          return;\n        }\n        \n        try {\n          const valid = await blankFormRef.value.validate()\n            .catch(err => {\n              console.error('表单验证失败:', err);\n              return false;\n            });\n          \n          if (valid) {\n            createLoading.value = true;\n            try {\n              console.log('开始创建文档:', {\n                title: newDocumentForm.value.title,\n                type: newDocumentForm.value.type || '通用'\n              });\n              \n              const response = await createDocument({ \n                title: newDocumentForm.value.title,\n                type: newDocumentForm.value.type || '通用',\n                content: ''\n              });\n              \n              console.log('创建文档响应数据：', JSON.stringify(response));\n              \n              // 关闭对话框\n              newDocumentDialogVisible.value = false;\n              ElMessage.success('文档创建成功');\n              \n              // 解析返回的文档ID\n              let docId = null;\n              if (response && response.data) {\n                if (response.data.id) {\n                  docId = response.data.id;\n                } else if (Array.isArray(response.data) && response.data.length > 0) {\n                  docId = response.data[0].id;\n                } else if (response.data.results && Array.isArray(response.data.results) && response.data.results.length > 0) {\n                  docId = response.data.results[0].id;\n                }\n              }\n              \n              // 等待对话框关闭完成后再执行跳转，避免DOM错误\n              setTimeout(() => {\n                if (docId) {\n                  console.log(`准备跳转到文档详情页，ID: ${docId}`);\n                  \n                  // 先刷新文档列表，确保数据是最新的\n                  fetchDocuments();\n                  fetchRecentDocuments();\n                  \n                  // 然后再执行导航\n                  setTimeout(() => {\n                    router.push({\n                      name: 'SmartDocDetail',\n                      params: { id: docId }\n                    }).catch(err => {\n                      console.error('路由导航失败:', err);\n                      router.push(`/smartdoc/${docId}`).catch(navErr => {\n                        console.error('路径导航也失败:', navErr);\n                      });\n                    });\n                  }, 300);\n                } else {\n                  console.warn('创建文档成功，但返回的数据格式不正确', response);\n                  // 刷新文档列表\n                  fetchDocuments();\n                  fetchRecentDocuments();\n                }\n              }, 100);\n            } catch (error) {\n              console.error('创建文档失败', error);\n              ElMessage.error('创建文档失败');\n            } finally {\n              createLoading.value = false;\n            }\n          }\n        } catch (error) {\n          console.error('提交表单时发生错误:', error);\n          ElMessage.error('表单提交失败');\n          createLoading.value = false;\n        }\n      } else if (documentCreateType.value === 'ai') {\n        if (!aiFormRef.value) {\n          console.warn('AI表单引用不存在');\n          return;\n        }\n        \n        try {\n          const valid = await aiFormRef.value.validate()\n            .catch(err => {\n              console.error('AI表单验证失败:', err);\n              return false;\n            });\n          \n          if (valid) {\n            createLoading.value = true;\n            try {\n              // 调用AI生成文档API\n              const categoryId = searchCategory.value !== 'all' ? searchCategory.value : null;\n              const response = await aiGenerateDocument({\n                title: aiDocumentForm.value.title,\n                requirement: aiDocumentForm.value.requirements,\n                category_id: categoryId,\n                doc_type: 'AI'\n              });\n              console.log('AI生成文档响应数据：', response);\n              // 适配markdown为quill delta\n              if (response && response.data && response.data.content) {\n                try {\n                  const converter = new MarkdownToQuill();\n                  const quillDelta = converter.convert(response.data.content);\n                  // 存入localStorage，便于后续详情页或编辑器直接读取\n                  localStorage.setItem(`doc_quill_delta_${response.data.id}`, JSON.stringify(quillDelta));\n                } catch (err) {\n                  console.warn('markdown转quill delta失败', err);\n                }\n              }\n              newDocumentDialogVisible.value = false;\n              ElMessage.success('AI生成文档成功');\n              let docId = null;\n              if (response && response.data && response.data.id) {\n                docId = response.data.id;\n              }\n              setTimeout(() => {\n                if (docId) {\n                  fetchDocuments();\n                  fetchRecentDocuments();\n                  setTimeout(() => {\n                    router.push({\n                      name: 'SmartDocDetail',\n                      params: { id: docId }\n                    }).catch(err => {\n                      console.error('路由导航失败:', err);\n                      router.push(`/smartdoc/${docId}`).catch(navErr => {\n                        console.error('路径导航也失败:', navErr);\n                      });\n                    });\n                  }, 300);\n                } else {\n                  fetchDocuments();\n                  fetchRecentDocuments();\n                }\n              }, 100);\n            } catch (error) {\n              console.error('AI生成文档失败', error);\n              ElMessage.error('AI生成文档失败');\n            } finally {\n              createLoading.value = false;\n            }\n          }\n        } catch (error) {\n          console.error('提交AI表单时发生错误:', error);\n          ElMessage.error('表单提交失败');\n          createLoading.value = false;\n        }\n      }\n    }\n    \n    const openDocument = (doc) => {\n      router.push({ name: 'SmartDocDetail', params: { id: doc.id } })\n    }\n    \n    const renameDocument = (doc) => {\n      ElMessageBox.prompt('请输入新文档名称', '重命名文档', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        inputValue: doc.title,\n        inputValidator: (value) => {\n          if (!value) {\n            return '文档名称不能为空'\n          }\n          return true\n        }\n      }).then(({ value }) => {\n        // 此处应该调用更新文档API\n        ElMessage.info(`重命名文档为: ${value}`)\n      }).catch(() => {})\n    }\n    \n    const duplicateDocument = (doc) => {\n      ElMessage.info(`复制文档: ${doc.title}`)\n    }\n    \n    const shareDocument = (doc) => {\n      selectedDocument.value = doc\n      // 在实际项目中，这里应该从API获取可用用户列表\n      availableUsers.value = [\n        { id: 1, username: '张三' },\n        { id: 2, username: '李四' },\n        { id: 3, username: '王五' }\n      ]\n      selectedUsers.value = []\n      shareDialogVisible.value = true\n    }\n    \n    const confirmShare = async () => {\n      if (!selectedDocument.value || selectedUsers.value.length === 0) {\n        ElMessage.warning('请选择至少一个用户')\n        return\n      }\n      \n      shareLoading.value = true\n      try {\n        await apiShareDocument(selectedDocument.value.id, selectedUsers.value)\n        ElMessage.success('文档分享成功')\n        shareDialogVisible.value = false\n        fetchSharedDocuments()\n      } catch (error) {\n        console.error('分享文档失败', error)\n        ElMessage.error('分享文档失败')\n      } finally {\n        shareLoading.value = false\n      }\n    }\n    \n    const deleteDocument = (doc) => {\n      selectedDocument.value = doc\n      deleteDialogVisible.value = true\n    }\n    \n    const confirmDelete = async () => {\n      if (!selectedDocument.value) return\n      \n      deleteLoading.value = true\n      try {\n        // 记录要删除的文档ID和类别\n        const deletedDocId = selectedDocument.value.id;\n        const deletedDocCategoryId = selectedDocument.value.category?.id;\n        \n        // 先关闭对话框，提高用户体验\n        deleteDialogVisible.value = false;\n        \n        // 执行删除操作\n        await apiDeleteDocument(deletedDocId)\n        ElMessage.success('文档删除成功')\n        \n        // 强制清除选中的文档\n        selectedDocument.value = null;\n        \n        // 清除可能的缓存数据\n        if (window.localStorage) {\n          try {\n            // 移除可能存在的相关缓存\n            localStorage.removeItem(`doc_cache_${deletedDocId}`);\n            localStorage.removeItem(`recent_docs_cache`);\n            localStorage.removeItem(`doc_list_cache`);\n          } catch (e) {\n            console.error('清除本地缓存失败:', e);\n          }\n        }\n        \n        // 更新刷新触发器\n        refreshTrigger.value = Date.now();\n        \n        // 使用新数组替换原数组，确保Vue能检测到变化 \n        documents.value = [...documents.value.filter(doc => doc.id !== deletedDocId)];\n        recentDocuments.value = [...recentDocuments.value.filter(doc => doc.id !== deletedDocId)];\n        sharedDocuments.value = [...sharedDocuments.value.filter(doc => doc.id !== deletedDocId)];\n        \n        // 强制更新视图\n        await forceUpdate();\n        \n        // 更新分类中的文档计数\n        if (deletedDocCategoryId) {\n          const category = documentCategories.value.find(c => c.id === deletedDocCategoryId);\n          if (category && category.document_count > 0) {\n            category.document_count--;\n          }\n        }\n        \n        // 等待DOM更新\n        await nextTick();\n        \n        // 重新导航到文档首页，确保状态全部刷新\n        if (router.currentRoute.value.name === 'SmartDocDetail') {\n          console.log('从详情页删除文档，重新导航到文档首页');\n          \n          // 先强制刷新数据，确保导航后数据是最新的\n          await reloadAllData();\n          \n          // 使用replace模式跳转，不留下历史记录，并添加强制刷新参数\n          router.replace({ \n            name: 'SmartDoc',\n            query: { _refresh: Date.now() } // 添加时间戳参数防止缓存\n          });\n        } else {\n          // 如果已经在文档首页，立即重载数据并强制刷新页面\n          await refreshData();\n        }\n      } catch (error) {\n        console.error('删除文档失败', error);\n        ElMessage.error('删除文档失败');\n        // 如果删除失败，关闭对话框\n        deleteDialogVisible.value = false;\n      } finally {\n        deleteLoading.value = false;\n      }\n    }\n    \n    const viewAllDocuments = (type) => {\n      if (type === 'recent') {\n        // 跳转到所有文档页面并显示最近编辑的文档\n        router.push({ name: 'SmartDocList', query: { sort: 'recent' } })\n      }\n    }\n    \n    const selectCategory = (category) => {\n      console.log('选择分类:', category);\n      \n      // 如果选择当前已激活的分类，不做操作\n      let categoryId;\n      if (typeof category === 'string') {\n        categoryId = category;\n      } else if (typeof category === 'object' && category !== null) {\n        categoryId = category.id.toString();\n      }\n      \n      // 如果点击当前已选中的分类，则重置为\"全部\"\n      if (searchCategory.value === categoryId && categoryId !== 'all') {\n        searchCategory.value = 'all';\n      } else {\n        searchCategory.value = categoryId;\n      }\n      \n      // 添加动画效果\n      documents.value = [];\n      createLoading.value = true;\n      \n      // 延迟获取，实现过渡效果\n      setTimeout(async () => {\n        await fetchDocuments();\n        createLoading.value = false;\n        \n        // 删除自动滚动逻辑，避免页面自动跳转\n        \n        // 触发一个简单的动画效果，突出显示已筛选的文档\n        const docCards = document.querySelectorAll('.doc-card');\n        if (docCards && docCards.length > 0) {\n          docCards.forEach((card, index) => {\n            if (card) {\n              card.style.animationDelay = `${index * 50}ms`;\n              card.classList.remove('fadeIn');\n              setTimeout(() => {\n                if (card) {\n                  card.classList.add('fadeIn');\n                }\n              }, 10);\n            }\n          });\n        }\n      }, 300);\n    };\n\n    // 获取选中分类的颜色\n    const getSelectedCategoryColor = () => {\n      if (searchCategory.value === 'all') return '#409EFF';\n      const selectedCategory = documentCategories.value.find(c => c.id.toString() === searchCategory.value);\n      return selectedCategory?.color || '#67C23A';\n    };\n\n    // 获取选中分类的名称\n    const getSelectedCategoryName = () => {\n      if (searchCategory.value === 'all') return '全部文档';\n      const selectedCategory = documentCategories.value.find(c => c.id.toString() === searchCategory.value);\n      return selectedCategory?.name || '未知分类';\n    };\n    \n    const manageCategories = () => {\n      categoryDialogVisible.value = true\n      resetCategoryForm()\n    }\n    \n    const editCategory = (category) => {\n      editingCategory.value = { ...category }\n    }\n    \n    const resetCategoryForm = () => {\n      editingCategory.value = {\n        name: '',\n        color: '#409EFF',\n        description: ''\n      }\n      if (categoryFormRef.value) {\n        categoryFormRef.value.resetFields()\n      }\n    }\n    \n    const submitCategory = async () => {\n      if (!categoryFormRef.value) return\n      \n      await categoryFormRef.value.validate(async (valid) => {\n        if (valid) {\n          categoryLoading.value = true\n          try {\n            const categoryData = {\n              name: editingCategory.value.name,\n              color: editingCategory.value.color,\n              description: editingCategory.value.description || ''\n            }\n            \n            if (editingCategory.value.id) {\n              // 更新分类\n              await updateDocumentCategory(editingCategory.value.id, categoryData)\n              ElMessage.success('分类更新成功')\n            } else {\n              // 创建分类\n              await createDocumentCategory(categoryData)\n              ElMessage.success('分类创建成功')\n            }\n            \n            // 重新获取分类列表\n            fetchDocumentCategories()\n            resetCategoryForm()\n          } catch (error) {\n            console.error('保存分类失败:', error)\n            ElMessage.error('保存分类失败')\n          } finally {\n            categoryLoading.value = false\n          }\n        }\n      })\n    }\n    \n    const deleteCategory = (category) => {\n      if (category.document_count > 0) {\n        ElMessage.warning('该分类下有文档，无法删除')\n        return\n      }\n      \n      ElMessageBox.confirm(\n        `确定要删除分类\"${category.name}\"吗？`,\n        '删除分类',\n        {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }\n      ).then(async () => {\n        try {\n          await deleteDocumentCategory(category.id)\n          ElMessage.success('分类删除成功')\n          fetchDocumentCategories()\n        } catch (error) {\n          console.error('删除分类失败:', error)\n          ElMessage.error('删除分类失败')\n        }\n      }).catch(() => {})\n    }\n    \n    const formatDate = (dateString) => {\n      const date = new Date(dateString)\n      const now = new Date()\n      \n      // 同一天显示时间\n      if (date.toDateString() === now.toDateString()) {\n        return date.toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' })\n      }\n      \n      // 昨天\n      const yesterday = new Date(now)\n      yesterday.setDate(now.getDate() - 1)\n      if (date.toDateString() === yesterday.toDateString()) {\n        return '昨天'\n      }\n      \n      // 一周内显示星期\n      const weekDays = ['周日', '周一', '周二', '周三', '周四', '周五', '周六']\n      const diffDays = Math.round((now - date) / (1000 * 60 * 60 * 24))\n      if (diffDays < 7) {\n        return weekDays[date.getDay()]\n      }\n      \n      // 其他情况显示日期\n      return date.toLocaleDateString('zh-CN', { month: 'numeric', day: 'numeric' })\n    }\n    \n    const resetCategoryFilter = () => {\n      searchCategory.value = 'all';\n      fetchDocuments();\n    }\n    \n    // 添加页面激活钩子，确保从其他页面返回时重新获取数据\n    onActivated(() => {\n      console.log('SmartDoc组件被激活，重新获取数据');\n      reloadAllData();\n    });\n\n    // 页面激活后重新加载所有数据的函数\n    const reloadAllData = async () => {\n      try {\n        console.log('重新加载所有文档数据...');\n        createLoading.value = true;\n        await Promise.all([\n          fetchDocuments(true),\n          fetchRecentDocuments(true),\n          fetchSharedDocuments(),\n          fetchDocumentCategories()\n        ]);\n        console.log('数据重新加载完成');\n        await forceUpdate();\n      } catch (error) {\n        console.error('数据重新加载失败:', error);\n      } finally {\n        createLoading.value = false;\n      }\n    };\n\n    // 提供重载函数给子组件或父组件使用\n    provide('reloadDocuments', reloadAllData);\n    \n    // 监听路由变化，强制刷新数据\n    watch(() => route.query._refresh, (newVal) => {\n      if (newVal) {\n        console.log('检测到路由刷新参数:', newVal);\n        refreshTrigger.value = Date.now();\n        reloadAllData();\n      }\n    });\n\n    // 监听路由参数，处理不同情况\n    watch(() => route.path, (newPath, oldPath) => {\n      console.log('路由变化:', oldPath, '->', newPath);\n      if (newPath === '/smartdoc' && oldPath && oldPath.startsWith('/smartdoc/')) {\n        // 从文档详情页返回文档列表页，强制刷新\n        console.log('从详情页返回列表页，强制刷新数据');\n        refreshTrigger.value = Date.now();\n        reloadAllData();\n      }\n    });\n\n    // 手动强制刷新方法\n    const refreshData = async () => {\n      refreshTrigger.value = Date.now();\n      await reloadAllData();\n      \n      // 强制刷新页面组件\n      if (proxy && proxy.$forceUpdate) {\n        proxy.$forceUpdate();\n      }\n    };\n\n    // 生命周期钩子\n    onMounted(() => {\n      console.log('SmartDoc组件mounted，加载数据');\n      reloadAllData(); // 使用统一的数据加载函数\n    })\n    \n    return {\n      documents,\n      recentDocuments,\n      sharedDocuments,\n      documentCategories,\n      searchQuery,\n      searchCategory,\n      debouncedSearch,\n      totalDocuments,\n      recentEditCount,\n      newDocumentDialogVisible,\n      shareDialogVisible,\n      deleteDialogVisible,\n      documentCreateType,\n      newDocumentForm,\n      aiDocumentForm,\n      blankFormRules,\n      aiFormRules,\n      blankFormRef,\n      aiFormRef,\n      selectedDocument,\n      selectedUsers,\n      availableUsers,\n      createLoading,\n      shareLoading,\n      deleteLoading,\n      createNewDocument,\n      submitNewDocument,\n      openDocument,\n      renameDocument,\n      duplicateDocument,\n      shareDocument,\n      confirmShare,\n      deleteDocument,\n      confirmDelete,\n      viewAllDocuments,\n      formatDate,\n      categoryDialogVisible,\n      editingCategory,\n      categoryFormRef,\n      categoryLoading,\n      categoryFormRules,\n      editCategory,\n      resetCategoryForm,\n      submitCategory,\n      deleteCategory,\n      resetCategoryFilter,\n      selectCategory,\n      getSelectedCategoryColor,\n      getSelectedCategoryName,\n      manageCategories,\n      reloadAllData, // 添加到返回值中，供模板使用\n      refreshData,    // 新增强制刷新方法\n      refreshTrigger  // 添加刷新触发器到返回值\n    }\n  }\n}\n</script>\n\n<style scoped>\n.smartdoc-home-container {\n  padding: 24px;\n  max-width: 1280px;\n  margin: 0 auto;\n}\n\n/* 页面标题和操作区 */\n.page-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 24px;\n}\n\n.page-title {\n  font-size: 24px;\n  font-weight: 600;\n  margin: 0;\n  color: #303133;\n}\n\n.page-description {\n  margin: 4px 0 0 0;\n  color: #606266;\n  font-size: 14px;\n}\n\n.right-section {\n  display: flex;\n  gap: 16px;\n  align-items: center;\n}\n\n.search-controls {\n  display: flex;\n  gap: 16px;\n  align-items: center;\n}\n\n.search-input {\n  width: 240px;\n}\n\n/* 统计卡片 */\n.stats-cards {\n  display: flex;\n  gap: 16px;\n  margin-bottom: 24px;\n}\n\n.stat-card {\n  flex: 1;\n  min-width: 0;\n}\n\n.stat-content {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n}\n\n.stat-icon {\n  width: 48px;\n  height: 48px;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 24px;\n  color: white;\n}\n\n.doc-icon {\n  background-color: #409EFF;\n}\n\n.edit-icon {\n  background-color: #67C23A;\n}\n\n.share-icon {\n  background-color: #E6A23C;\n}\n\n.stat-info {\n  display: flex;\n  flex-direction: column;\n}\n\n.stat-value {\n  font-size: 24px;\n  font-weight: 600;\n  color: #303133;\n}\n\n.stat-label {\n  font-size: 14px;\n  color: #909399;\n}\n\n/* 区域通用样式 */\n.section {\n  margin-bottom: 32px;\n}\n\n/* 分类区域特殊样式 */\n.category-section {\n  margin-bottom: 16px;\n}\n\n.section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n}\n\n.section-header h3 {\n  font-size: 18px;\n  font-weight: 600;\n  margin: 0;\n  color: #303133;\n}\n\n.section-actions {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.filter-tag {\n  background-color: #f0f2f5;\n  padding: 4px 8px;\n  border-radius: 4px;\n  font-size: 13px;\n  color: #606266;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n/* 文档卡片 */\n.document-cards {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n  gap: 20px;\n  margin-bottom: 30px;\n}\n\n.doc-card {\n  height: 240px;\n  display: flex;\n  flex-direction: column;\n  cursor: pointer;\n  transition: all 0.3s;\n  position: relative;\n  overflow: hidden;\n}\n\n.doc-card:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n\n.doc-card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 12px;\n}\n\n.doc-info {\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  gap: 8px;\n}\n\n.doc-type-tag {\n  font-size: 12px;\n  color: #606266;\n  background-color: #f5f7fa;\n  padding: 2px 8px;\n  border-radius: 4px;\n  white-space: nowrap;\n}\n\n.doc-category-tag {\n  font-size: 12px;\n  color: white;\n  padding: 2px 8px;\n  border-radius: 4px;\n  white-space: nowrap;\n  display: inline-flex;\n  align-items: center;\n}\n\n.doc-title {\n  font-size: 16px;\n  font-weight: 500;\n  margin: 0 0 10px 0;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  color: #303133;\n}\n\n.doc-preview {\n  flex: 1;\n  font-size: 13px;\n  color: #606266;\n  overflow: hidden;\n  display: -webkit-box;\n  -webkit-line-clamp: 4;\n  -webkit-box-orient: vertical;\n  line-height: 1.5;\n  margin-bottom: 10px;\n}\n\n.doc-footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-top: 8px;\n  border-top: 1px solid #ebeef5;\n  margin-top: auto;\n}\n\n.doc-time {\n  font-size: 12px;\n  color: #909399;\n}\n\n.doc-actions {\n  display: flex;\n  gap: 4px;\n}\n\n.new-doc-card {\n  border: 1px dashed #dcdfe6;\n  background-color: #f8f9fb;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s;\n}\n\n.new-doc-card:hover {\n  border-color: #409EFF;\n  color: #409EFF;\n  background-color: #ecf5ff;\n}\n\n.new-doc-content {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  color: #909399;\n}\n\n.new-doc-content .el-icon {\n  font-size: 32px;\n}\n\n/* 分类卡片 */\n.category-cards {\n  display: flex;\n  gap: 16px;\n  overflow-x: auto;\n  padding-bottom: 8px;\n}\n\n.category-card {\n  min-width: 180px;\n  height: 80px;\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  transition: all 0.3s;\n  border-radius: 8px;\n  padding: 12px 16px;\n  border: 2px solid transparent;\n  position: relative;\n  overflow: hidden;\n  background-color: #f5f7fa;\n}\n\n.category-card:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.08);\n  background-color: #f0f5ff;\n}\n\n.category-active {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  border-color: #409EFF;\n  background-color: #ecf5ff;\n}\n\n.category-selected-indicator {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 3px;\n  background-color: #409EFF;\n  transition: all 0.3s;\n}\n\n.category-icon {\n  width: 36px;\n  height: 36px;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 18px;\n  color: white;\n  margin-right: 12px;\n  transition: all 0.3s;\n}\n\n.category-active .category-icon {\n  transform: scale(1.1);\n}\n\n.category-info {\n  display: flex;\n  flex-direction: column;\n}\n\n.category-info h4 {\n  margin: 0 0 4px 0;\n  font-size: 15px;\n  font-weight: 500;\n  color: #303133;\n  transition: all 0.3s;\n}\n\n.category-active .category-info h4 {\n  color: #409EFF;\n  font-weight: 600;\n}\n\n.category-count {\n  font-size: 12px;\n  color: #909399;\n}\n\n.mt-4 {\n  margin-top: 16px;\n}\n\n.form-tip {\n  font-size: 12px;\n  color: #909399;\n  margin-top: 4px;\n}\n\n.category-management {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.category-list {\n  margin-bottom: 20px;\n}\n\n.category-form {\n  margin-top: 20px;\n}\n\n.color-preview {\n  display: inline-block;\n  width: 20px;\n  height: 20px;\n  border-radius: 4px;\n  margin-right: 8px;\n  vertical-align: middle;\n}\n\n.color-value {\n  margin-left: 12px;\n  color: #606266;\n}\n\n.category-select {\n  width: 200px;\n}\n\n.doc-menu {\n  color: #909399;\n  cursor: pointer;\n}\n\n.filter-controls {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.empty-state {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 200px;\n}\n\n.loading-state {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 200px;\n}\n\n/* 筛选状态栏样式 */\n.filter-status-bar {\n  background-color: #ecf5ff;\n  padding: 12px 20px;\n  margin-bottom: 20px;\n  border-radius: 8px;\n  transition: all 0.3s ease;\n  animation: slideDown 0.3s ease-in-out;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);\n  border-left: 4px solid #409EFF;\n  position: relative;\n  overflow: hidden;\n}\n\n.filter-status-bar::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(135deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.3) 50%, rgba(255,255,255,0) 100%);\n  animation: shimmer 2s infinite;\n}\n\n.filter-bar-content {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: relative;\n  z-index: 1;\n}\n\n.filter-title {\n  font-size: 14px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.filter-category {\n  padding: 4px 12px;\n  border-radius: 16px;\n  color: white;\n  font-weight: 500;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.filter-actions {\n  display: flex;\n  align-items: center;\n}\n\n/* 添加文档卡片的动画效果 */\n.document-cards {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n  gap: 20px;\n  margin-bottom: 30px;\n  transition: all 0.3s;\n}\n\n.doc-card {\n  animation: fadeIn 0.4s ease-in-out;\n}\n\n.fadeIn {\n  animation: fadeIn 0.4s ease-in-out;\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes slideDown {\n  from {\n    opacity: 0;\n    transform: translateY(-10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes shimmer {\n  0% {\n    transform: translateX(-100%);\n  }\n  100% {\n    transform: translateX(100%);\n  }\n}\n</style> "],"mappings":"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","ignoreList":[]}]}