{"remainingRequest":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\smartdoc\\Index.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\smartdoc\\Index.vue","mtime":1748484722490},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\babel.config.js","mtime":1748077811200},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1746431218000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmZvci1lYWNoLmpzIjsKaW1wb3J0IHsgcmVmLCBjb21wdXRlZCwgb25Nb3VudGVkLCBuZXh0VGljaywgZ2V0Q3VycmVudEluc3RhbmNlLCBwcm92aWRlLCBvbkFjdGl2YXRlZCwgd2F0Y2ggfSBmcm9tICd2dWUnOwppbXBvcnQgeyB1c2VSb3V0ZXIsIHVzZVJvdXRlIH0gZnJvbSAndnVlLXJvdXRlcic7CmltcG9ydCB7IEVsTWVzc2FnZSwgRWxNZXNzYWdlQm94IH0gZnJvbSAnZWxlbWVudC1wbHVzJzsKaW1wb3J0IHsgU2VhcmNoLCBQbHVzLCBFZGl0UGVuLCBTaGFyZSwgRm9sZGVyLCBDbG9zZSwgTW9yZSwgRG9jdW1lbnQgfSBmcm9tICdAZWxlbWVudC1wbHVzL2ljb25zLXZ1ZSc7CmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7CmltcG9ydCB7IGdldERvY3VtZW50cywgZ2V0UmVjZW50RG9jdW1lbnRzLCBnZXRTaGFyZWREb2N1bWVudHMsIGdldERvY3VtZW50Q2F0ZWdvcmllcywgY3JlYXRlRG9jdW1lbnQsIGRlbGV0ZURvY3VtZW50IGFzIGFwaURlbGV0ZURvY3VtZW50LCBzaGFyZURvY3VtZW50IGFzIGFwaVNoYXJlRG9jdW1lbnQsIGNyZWF0ZURvY3VtZW50Q2F0ZWdvcnksIHVwZGF0ZURvY3VtZW50Q2F0ZWdvcnksIGRlbGV0ZURvY3VtZW50Q2F0ZWdvcnksIGFpR2VuZXJhdGVEb2N1bWVudCB9IGZyb20gJ0AvYXBpL3NtYXJ0ZG9jJzsKaW1wb3J0IG1hcmtkb3duVG9EZWx0YSBmcm9tICdtYXJrZG93bi10by1xdWlsbC1kZWx0YSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnU21hcnREb2NIb21lJywKICBjb21wb25lbnRzOiB7CiAgICBTZWFyY2gsCiAgICBQbHVzLAogICAgRWRpdFBlbiwKICAgIFNoYXJlLAogICAgRm9sZGVyLAogICAgQ2xvc2UsCiAgICBNb3JlLAogICAgRG9jdW1lbnQKICB9LAogIHNldHVwKCkgewogICAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7CiAgICBjb25zdCByb3V0ZSA9IHVzZVJvdXRlKCk7CiAgICBjb25zdCB7CiAgICAgIHByb3h5CiAgICB9ID0gZ2V0Q3VycmVudEluc3RhbmNlKCk7IC8vIOiOt+WPlue7hOS7tuWunuS+iwoKICAgIC8vIOWIt+aWsOinpuWPkeWZqO+8jOeUqOS6juW8uuWItue7hOS7tuWIt+aWsAogICAgY29uc3QgcmVmcmVzaFRyaWdnZXIgPSByZWYoRGF0ZS5ub3coKSk7CgogICAgLy8g54q25oCB5pWw5o2uCiAgICBjb25zdCBkb2N1bWVudHMgPSByZWYoW10pOwogICAgY29uc3QgcmVjZW50RG9jdW1lbnRzID0gcmVmKFtdKTsKICAgIGNvbnN0IHNoYXJlZERvY3VtZW50cyA9IHJlZihbXSk7CiAgICBjb25zdCBkb2N1bWVudENhdGVnb3JpZXMgPSByZWYoW10pOwogICAgY29uc3Qgc2VhcmNoUXVlcnkgPSByZWYoJycpOwogICAgY29uc3Qgc2VhcmNoQ2F0ZWdvcnkgPSByZWYoJ2FsbCcpOwogICAgY29uc3QgbmV3RG9jdW1lbnREaWFsb2dWaXNpYmxlID0gcmVmKGZhbHNlKTsKICAgIGNvbnN0IHNoYXJlRGlhbG9nVmlzaWJsZSA9IHJlZihmYWxzZSk7CiAgICBjb25zdCBkZWxldGVEaWFsb2dWaXNpYmxlID0gcmVmKGZhbHNlKTsKICAgIGNvbnN0IGRvY3VtZW50Q3JlYXRlVHlwZSA9IHJlZignYmxhbmsnKTsKICAgIGNvbnN0IHNlbGVjdGVkRG9jdW1lbnQgPSByZWYobnVsbCk7CiAgICBjb25zdCBzZWxlY3RlZFVzZXJzID0gcmVmKFtdKTsKICAgIGNvbnN0IGF2YWlsYWJsZVVzZXJzID0gcmVmKFtdKTsKICAgIGNvbnN0IGNyZWF0ZUxvYWRpbmcgPSByZWYoZmFsc2UpOwogICAgY29uc3Qgc2hhcmVMb2FkaW5nID0gcmVmKGZhbHNlKTsKICAgIGNvbnN0IGRlbGV0ZUxvYWRpbmcgPSByZWYoZmFsc2UpOwoKICAgIC8vIOihqOWNleaVsOaNrgogICAgY29uc3QgbmV3RG9jdW1lbnRGb3JtID0gcmVmKHsKICAgICAgdGl0bGU6ICcnLAogICAgICB0eXBlOiAnJwogICAgfSk7CiAgICBjb25zdCBhaURvY3VtZW50Rm9ybSA9IHJlZih7CiAgICAgIHRpdGxlOiAnJywKICAgICAgcmVxdWlyZW1lbnRzOiAnJwogICAgfSk7CgogICAgLy8g6KGo5Y2V5qCh6aqM6KeE5YiZCiAgICBjb25zdCBibGFua0Zvcm1SdWxlcyA9IHsKICAgICAgdGl0bGU6IFt7CiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeaWh+aho+agh+mimCcsCiAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgIH0sIHsKICAgICAgICBtaW46IDIsCiAgICAgICAgbWF4OiA1MCwKICAgICAgICBtZXNzYWdlOiAn6ZW/5bqm5ZyoIDIg5YiwIDUwIOS4quWtl+espicsCiAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgIH1dCiAgICB9OwogICAgY29uc3QgYWlGb3JtUnVsZXMgPSB7CiAgICAgIHRpdGxlOiBbewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXmlofmoaPkuLvpopgnLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9LCB7CiAgICAgICAgbWluOiAyLAogICAgICAgIG1heDogNTAsCiAgICAgICAgbWVzc2FnZTogJ+mVv+W6puWcqCAyIOWIsCA1MCDkuKrlrZfnrKYnLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9XSwKICAgICAgcmVxdWlyZW1lbnRzOiBbewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXmlofmoaPopoHmsYInLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9LCB7CiAgICAgICAgbWluOiAxMCwKICAgICAgICBtYXg6IDUwMCwKICAgICAgICBtZXNzYWdlOiAn6ZW/5bqm5ZyoIDEwIOWIsCA1MDAg5Liq5a2X56ymJywKICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgfV0KICAgIH07CiAgICBjb25zdCBibGFua0Zvcm1SZWYgPSByZWYobnVsbCk7CiAgICBjb25zdCBhaUZvcm1SZWYgPSByZWYobnVsbCk7CgogICAgLy8g6K6h566X5bGe5oCnCiAgICBjb25zdCB0b3RhbERvY3VtZW50cyA9IGNvbXB1dGVkKCgpID0+IGRvY3VtZW50cy52YWx1ZS5sZW5ndGgpOwogICAgY29uc3QgcmVjZW50RWRpdENvdW50ID0gY29tcHV0ZWQoKCkgPT4gcmVjZW50RG9jdW1lbnRzLnZhbHVlLmxlbmd0aCk7CgogICAgLy8g5YiG57G7566h55CG55u45YWz54q25oCBCiAgICBjb25zdCBjYXRlZ29yeURpYWxvZ1Zpc2libGUgPSByZWYoZmFsc2UpOwogICAgY29uc3QgZWRpdGluZ0NhdGVnb3J5ID0gcmVmKHsKICAgICAgbmFtZTogJycsCiAgICAgIGNvbG9yOiAnIzQwOUVGRicsCiAgICAgIGRlc2NyaXB0aW9uOiAnJwogICAgfSk7CiAgICBjb25zdCBjYXRlZ29yeUZvcm1SZWYgPSByZWYobnVsbCk7CiAgICBjb25zdCBjYXRlZ29yeUxvYWRpbmcgPSByZWYoZmFsc2UpOwogICAgY29uc3QgY2F0ZWdvcnlGb3JtUnVsZXMgPSB7CiAgICAgIG5hbWU6IFt7CiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeexu+Wei+WQjeensCcsCiAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgIH0sIHsKICAgICAgICBtaW46IDIsCiAgICAgICAgbWF4OiAyMCwKICAgICAgICBtZXNzYWdlOiAn6ZW/5bqm5ZyoMuWIsDIw5Liq5a2X56ymJywKICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgfV0sCiAgICAgIGNvbG9yOiBbewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIG1lc3NhZ2U6ICfor7fpgInmi6npopzoibInLAogICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgIH1dCiAgICB9OwoKICAgIC8vIOi+heWKqeaWueazle+8muW8uuWItuWIt+aWsOinhuWbvgogICAgY29uc3QgZm9yY2VVcGRhdGUgPSBhc3luYyAoKSA9PiB7CiAgICAgIC8vIOWIm+W7uuS4tOaXtuaVsOaNru+8jOinpuWPkea3seW6puWTjeW6lOW8j+abtOaWsAogICAgICBkb2N1bWVudHMudmFsdWUgPSBbLi4uZG9jdW1lbnRzLnZhbHVlXTsKICAgICAgcmVjZW50RG9jdW1lbnRzLnZhbHVlID0gWy4uLnJlY2VudERvY3VtZW50cy52YWx1ZV07CiAgICAgIHNoYXJlZERvY3VtZW50cy52YWx1ZSA9IFsuLi5zaGFyZWREb2N1bWVudHMudmFsdWVdOwoKICAgICAgLy8g5L2/55SoVnVl5a6e5L6L55qEJGZvcmNlVXBkYXRl5pa55rOVCiAgICAgIGlmIChwcm94eSAmJiBwcm94eS4kZm9yY2VVcGRhdGUpIHsKICAgICAgICBwcm94eS4kZm9yY2VVcGRhdGUoKTsKICAgICAgfQoKICAgICAgLy8g562J5b6FRE9N5pu05pawCiAgICAgIGF3YWl0IG5leHRUaWNrKCk7CiAgICB9OwoKICAgIC8vIOaWueazlQogICAgY29uc3QgZmV0Y2hEb2N1bWVudHMgPSBhc3luYyAoZm9yY2VSZWZyZXNoID0gZmFsc2UpID0+IHsKICAgICAgY29uc29sZS5sb2coJ+W8gOWni+iOt+WPluaWh+aho+WIl+ihqC4uLicpOwogICAgICB0cnkgewogICAgICAgIC8vIOiuvue9ruWKoOi9veeKtuaAgQogICAgICAgIGNyZWF0ZUxvYWRpbmcudmFsdWUgPSB0cnVlOwogICAgICAgIC8vIOWHhuWkh+ivt+axguWPguaVsAogICAgICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgICAgIHBhZ2U6IDEsCiAgICAgICAgICBsaW1pdDogMTAKICAgICAgICB9OwogICAgICAgIC8vIOWmguaenOacieafpeivouadoeS7tu+8jOa3u+WKoOWIsOWPguaVsOS4rQogICAgICAgIGlmIChzZWFyY2hDYXRlZ29yeS52YWx1ZSAmJiBzZWFyY2hDYXRlZ29yeS52YWx1ZSAhPT0gJ2FsbCcpIHsKICAgICAgICAgIHBhcmFtcy5jYXRlZ29yeSA9IHNlYXJjaENhdGVnb3J5LnZhbHVlOwogICAgICAgICAgY29uc29sZS5sb2coYOaMieWIhuexu+afpeivou+8jElEOiAke3NlYXJjaENhdGVnb3J5LnZhbHVlfWAsIHR5cGVvZiBzZWFyY2hDYXRlZ29yeS52YWx1ZSk7CiAgICAgICAgfQogICAgICAgIGlmIChzZWFyY2hRdWVyeS52YWx1ZSkgewogICAgICAgICAgcGFyYW1zLnNlYXJjaCA9IHNlYXJjaFF1ZXJ5LnZhbHVlOwogICAgICAgIH0KCiAgICAgICAgLy8g5aaC5p6c5by65Yi25Yi35paw77yM5re75Yqg5pe26Ze05oiz6Ziy5q2i57yT5a2YCiAgICAgICAgaWYgKGZvcmNlUmVmcmVzaCkgewogICAgICAgICAgcGFyYW1zLl90ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgICAgfQogICAgICAgIGNvbnNvbGUubG9nKCdBUEnor7fmsYLlj4LmlbA6JywgcGFyYW1zKTsKICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBnZXREb2N1bWVudHMocGFyYW1zKTsKICAgICAgICBjb25zb2xlLmxvZygn5paH5qGj5YiX6KGoQVBJ5ZON5bqUOicsIHJlcyk7CgogICAgICAgIC8vIOWkhOeQhuWIhumhteaVsOaNrgogICAgICAgIGlmIChyZXMgJiYgcmVzLmRhdGEpIHsKICAgICAgICAgIC8vIOWujOWFqOabv+aNouaVsOe7hOiAjOS4jeaYr+S/ruaUueW8leeUqAogICAgICAgICAgZG9jdW1lbnRzLnZhbHVlID0gQXJyYXkuaXNBcnJheShyZXMuZGF0YSkgPyBbLi4ucmVzLmRhdGFdIDogW107CiAgICAgICAgICBjb25zb2xlLmxvZyhg6K6+572u5paH5qGj5YiX6KGoOiAke2RvY3VtZW50cy52YWx1ZS5sZW5ndGh95p2h6K6w5b2VYCwgZG9jdW1lbnRzLnZhbHVlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS53YXJuKCdBUEnov5Tlm57nmoTlk43lupTmlbDmja7ml6DmlYg6JywgcmVzKTsKICAgICAgICAgIGRvY3VtZW50cy52YWx1ZSA9IFtdOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfojrflj5bmlofmoaPliJfooajlpLHotKU6JywgZXJyb3IpOwogICAgICAgIEVsTWVzc2FnZS5lcnJvcign6I635Y+W5paH5qGj5YiX6KGo5aSx6LSlJyk7CiAgICAgICAgZG9jdW1lbnRzLnZhbHVlID0gW107CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgY3JlYXRlTG9hZGluZy52YWx1ZSA9IGZhbHNlOwogICAgICB9CiAgICB9OwogICAgY29uc3QgZmV0Y2hSZWNlbnREb2N1bWVudHMgPSBhc3luYyAoZm9yY2VSZWZyZXNoID0gZmFsc2UpID0+IHsKICAgICAgY29uc29sZS5sb2coJ+W8gOWni+iOt+WPluacgOi/keaWh+ahoy4uLicpOwogICAgICB0cnkgewogICAgICAgIC8vIOWHhuWkh+WPguaVsO+8jOWmguaenOW8uuWItuWIt+aWsOa3u+WKoOaXtumXtOaIswogICAgICAgIGNvbnN0IHBhcmFtcyA9IGZvcmNlUmVmcmVzaCA/IHsKICAgICAgICAgIF90OiBuZXcgRGF0ZSgpLmdldFRpbWUoKQogICAgICAgIH0gOiB7fTsKICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBnZXRSZWNlbnREb2N1bWVudHMocGFyYW1zKTsKICAgICAgICBjb25zb2xlLmxvZygn5pyA6L+R5paH5qGjQVBJ5ZON5bqUOicsIHJlcyk7CiAgICAgICAgaWYgKHJlcyAmJiByZXMuZGF0YSkgewogICAgICAgICAgLy8g5a6M5YWo5pu/5o2i5pWw57uE6ICM5LiN5piv5L+u5pS55byV55SoCiAgICAgICAgICByZWNlbnREb2N1bWVudHMudmFsdWUgPSBBcnJheS5pc0FycmF5KHJlcy5kYXRhKSA/IFsuLi5yZXMuZGF0YV0gOiBbXTsKICAgICAgICAgIGNvbnNvbGUubG9nKGDorr7nva7mnIDov5HmlofmoaM6ICR7cmVjZW50RG9jdW1lbnRzLnZhbHVlLmxlbmd0aH3mnaHorrDlvZVgKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS53YXJuKCdBUEnov5Tlm57nmoTmnIDov5HmlofmoaPmlbDmja7ml6DmlYg6JywgcmVzKTsKICAgICAgICAgIHJlY2VudERvY3VtZW50cy52YWx1ZSA9IFtdOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfojrflj5bmnIDov5HmlofmoaPlpLHotKU6JywgZXJyb3IpOwogICAgICAgIEVsTWVzc2FnZS5lcnJvcign6I635Y+W5pyA6L+R5paH5qGj5aSx6LSlJyk7CiAgICAgICAgcmVjZW50RG9jdW1lbnRzLnZhbHVlID0gW107CiAgICAgIH0KICAgIH07CiAgICBjb25zdCBmZXRjaFNoYXJlZERvY3VtZW50cyA9IGFzeW5jICgpID0+IHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldFNoYXJlZERvY3VtZW50cygpOwogICAgICAgIHNoYXJlZERvY3VtZW50cy52YWx1ZSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign6I635Y+W5YWx5Lqr5paH5qGj5aSx6LSlJywgZXJyb3IpOwogICAgICAgIEVsTWVzc2FnZS5lcnJvcign6I635Y+W5YWx5Lqr5paH5qGj5aSx6LSlJyk7CiAgICAgIH0KICAgIH07CiAgICBjb25zdCBmZXRjaERvY3VtZW50Q2F0ZWdvcmllcyA9IGFzeW5jIChyZXRyeUNvdW50ID0gMCkgPT4gewogICAgICBjb25zb2xlLmxvZygn5byA5aeL6I635Y+W5paH5qGj5YiG57G7Li4uJyk7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZ2V0RG9jdW1lbnRDYXRlZ29yaWVzKCk7CiAgICAgICAgY29uc29sZS5sb2coJ+aWh+aho+WIhuexu0FQSeWTjeW6lDonLCByZXMpOwogICAgICAgIGlmIChyZXMgJiYgcmVzLmRhdGEpIHsKICAgICAgICAgIGRvY3VtZW50Q2F0ZWdvcmllcy52YWx1ZSA9IHJlcy5kYXRhOwogICAgICAgICAgY29uc29sZS5sb2coYOiuvue9ruaWh+aho+WIhuexuzogJHtkb2N1bWVudENhdGVnb3JpZXMudmFsdWUubGVuZ3RofeadoeiusOW9lSwg5pWw5o2uOmAsIGRvY3VtZW50Q2F0ZWdvcmllcy52YWx1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUud2FybignQVBJ6L+U5Zue55qE5paH5qGj5YiG57G75pWw5o2u5peg5pWIOicsIHJlcyk7CiAgICAgICAgICBkb2N1bWVudENhdGVnb3JpZXMudmFsdWUgPSBbXTsKCiAgICAgICAgICAvLyDlpoLmnpzov5Tlm57nqbrmlbDmja7kuJTmnKrovr7liLDmnIDlpKfph43or5XmrKHmlbDvvIzlsJ3or5Xph43or5UKICAgICAgICAgIGlmIChkb2N1bWVudENhdGVnb3JpZXMudmFsdWUubGVuZ3RoID09PSAwICYmIHJldHJ5Q291bnQgPCAyKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDmlofmoaPliIbnsbvmlbDmja7kuLrnqbrvvIwke3JldHJ5Q291bnQgKyAxfeenkuWQjumHjeivlS4uLmApOwogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGZldGNoRG9jdW1lbnRDYXRlZ29yaWVzKHJldHJ5Q291bnQgKyAxKSwgKHJldHJ5Q291bnQgKyAxKSAqIDEwMDApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfojrflj5bmlofmoaPliIbnsbvlpLHotKU6JywgZXJyb3IpOwoKICAgICAgICAvLyDlpoLmnpzmmK/mnI3liqHlmajplJnor6/kuJTmnKrovr7liLDmnIDlpKfph43or5XmrKHmlbDvvIzlsJ3or5Xph43or5UKICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UgJiYgZXJyb3IucmVzcG9uc2Uuc3RhdHVzID49IDUwMCAmJiByZXRyeUNvdW50IDwgMikgewogICAgICAgICAgY29uc29sZS5sb2coYOacjeWKoeWZqOmUmeivr++8jCR7cmV0cnlDb3VudCArIDF956eS5ZCO6YeN6K+VLi4uYCk7CiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGZldGNoRG9jdW1lbnRDYXRlZ29yaWVzKHJldHJ5Q291bnQgKyAxKSwgKHJldHJ5Q291bnQgKyAxKSAqIDEwMDApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+iOt+WPluaWh+aho+WIhuexu+Wksei0pe+8jOivt+WIt+aWsOmhtemdoumHjeivlScpOwogICAgICAgICAgLy8g5Yid5aeL5YyW56m65pWw57uECiAgICAgICAgICBkb2N1bWVudENhdGVnb3JpZXMudmFsdWUgPSBbXTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgLy8g6Ziy5oqW5pCc57SiCiAgICBjb25zdCBkZWJvdW5jZWRTZWFyY2ggPSBfLmRlYm91bmNlKGFzeW5jICgpID0+IHsKICAgICAgaWYgKHNlYXJjaFF1ZXJ5LnZhbHVlKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGF3YWl0IGZldGNoRG9jdW1lbnRzKCk7CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+aQnOe0ouaWh+aho+Wksei0pScsIGVycm9yKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZmV0Y2hEb2N1bWVudHMoKTsKICAgICAgfQogICAgfSwgNTAwKTsKICAgIGNvbnN0IGNyZWF0ZU5ld0RvY3VtZW50ID0gKCkgPT4gewogICAgICAvLyDph43nva7ooajljZUKICAgICAgbmV3RG9jdW1lbnRGb3JtLnZhbHVlID0gewogICAgICAgIHRpdGxlOiAnJywKICAgICAgICB0eXBlOiAnJwogICAgICB9OwogICAgICBhaURvY3VtZW50Rm9ybS52YWx1ZSA9IHsKICAgICAgICB0aXRsZTogJycsCiAgICAgICAgcmVxdWlyZW1lbnRzOiAnJwogICAgICB9OwogICAgICBkb2N1bWVudENyZWF0ZVR5cGUudmFsdWUgPSAnYmxhbmsnOwogICAgICBuZXdEb2N1bWVudERpYWxvZ1Zpc2libGUudmFsdWUgPSB0cnVlOwoKICAgICAgLy8g55uR5ZCs5a+56K+d5qGG5YWz6Zet5LqL5Lu277yM5riF55CG6KGo5Y2VCiAgICAgIG5leHRUaWNrKCgpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgY29uc3QgZGlhbG9nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVsLWRpYWxvZycpOwogICAgICAgICAgaWYgKGRpYWxvZykgewogICAgICAgICAgICBkaWFsb2cuYWRkRXZlbnRMaXN0ZW5lcignY2xvc2VkJywgKCkgPT4gewogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBpZiAoYmxhbmtGb3JtUmVmLnZhbHVlKSB7CiAgICAgICAgICAgICAgICAgIGJsYW5rRm9ybVJlZi52YWx1ZS5jbGVhclZhbGlkYXRlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoYWlGb3JtUmVmLnZhbHVlKSB7CiAgICAgICAgICAgICAgICAgIGFpRm9ybVJlZi52YWx1ZS5jbGVhclZhbGlkYXRlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjbGVhcmluZyBmb3JtIHZhbGlkYXRpb246JywgZXJyKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICBvbmNlOiB0cnVlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2V0dGluZyB1cCBkaWFsb2cgZXZlbnQgbGlzdGVuZXI6JywgZXJyKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfTsKICAgIGNvbnN0IHN1Ym1pdE5ld0RvY3VtZW50ID0gYXN5bmMgKCkgPT4gewogICAgICBpZiAoZG9jdW1lbnRDcmVhdGVUeXBlLnZhbHVlID09PSAnYmxhbmsnKSB7CiAgICAgICAgaWYgKCFibGFua0Zvcm1SZWYudmFsdWUpIHsKICAgICAgICAgIGNvbnNvbGUud2Fybign6KGo5Y2V5byV55So5LiN5a2Y5ZyoJyk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICBjb25zdCB2YWxpZCA9IGF3YWl0IGJsYW5rRm9ybVJlZi52YWx1ZS52YWxpZGF0ZSgpLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+ihqOWNlemqjOivgeWksei0pTonLCBlcnIpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9KTsKICAgICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgICBjcmVhdGVMb2FkaW5nLnZhbHVlID0gdHJ1ZTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5byA5aeL5Yib5bu65paH5qGjOicsIHsKICAgICAgICAgICAgICAgIHRpdGxlOiBuZXdEb2N1bWVudEZvcm0udmFsdWUudGl0bGUsCiAgICAgICAgICAgICAgICB0eXBlOiBuZXdEb2N1bWVudEZvcm0udmFsdWUudHlwZSB8fCAn6YCa55SoJwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY3JlYXRlRG9jdW1lbnQoewogICAgICAgICAgICAgICAgdGl0bGU6IG5ld0RvY3VtZW50Rm9ybS52YWx1ZS50aXRsZSwKICAgICAgICAgICAgICAgIHR5cGU6IG5ld0RvY3VtZW50Rm9ybS52YWx1ZS50eXBlIHx8ICfpgJrnlKgnLAogICAgICAgICAgICAgICAgY29udGVudDogJycKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5Yib5bu65paH5qGj5ZON5bqU5pWw5o2u77yaJywgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UpKTsKCiAgICAgICAgICAgICAgLy8g5YWz6Zet5a+56K+d5qGGCiAgICAgICAgICAgICAgbmV3RG9jdW1lbnREaWFsb2dWaXNpYmxlLnZhbHVlID0gZmFsc2U7CiAgICAgICAgICAgICAgRWxNZXNzYWdlLnN1Y2Nlc3MoJ+aWh+aho+WIm+W7uuaIkOWKnycpOwoKICAgICAgICAgICAgICAvLyDop6PmnpDov5Tlm57nmoTmlofmoaNJRAogICAgICAgICAgICAgIGxldCBkb2NJZCA9IG51bGw7CiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmlkKSB7CiAgICAgICAgICAgICAgICAgIGRvY0lkID0gcmVzcG9uc2UuZGF0YS5pZDsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShyZXNwb25zZS5kYXRhKSAmJiByZXNwb25zZS5kYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgZG9jSWQgPSByZXNwb25zZS5kYXRhWzBdLmlkOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLnJlc3VsdHMgJiYgQXJyYXkuaXNBcnJheShyZXNwb25zZS5kYXRhLnJlc3VsdHMpICYmIHJlc3BvbnNlLmRhdGEucmVzdWx0cy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgIGRvY0lkID0gcmVzcG9uc2UuZGF0YS5yZXN1bHRzWzBdLmlkOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgLy8g562J5b6F5a+56K+d5qGG5YWz6Zet5a6M5oiQ5ZCO5YaN5omn6KGM6Lez6L2s77yM6YG/5YWNRE9N6ZSZ6K+vCiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoZG9jSWQpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYOWHhuWkh+i3s+i9rOWIsOaWh+aho+ivpuaDhemhte+8jElEOiAke2RvY0lkfWApOwoKICAgICAgICAgICAgICAgICAgLy8g5YWI5Yi35paw5paH5qGj5YiX6KGo77yM56Gu5L+d5pWw5o2u5piv5pyA5paw55qECiAgICAgICAgICAgICAgICAgIGZldGNoRG9jdW1lbnRzKCk7CiAgICAgICAgICAgICAgICAgIGZldGNoUmVjZW50RG9jdW1lbnRzKCk7CgogICAgICAgICAgICAgICAgICAvLyDnhLblkI7lho3miafooYzlr7zoiKoKICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ1NtYXJ0RG9jRGV0YWlsJywKICAgICAgICAgICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgICAgICAgICBpZDogZG9jSWQKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcign6Lev55Sx5a+86Iiq5aSx6LSlOicsIGVycik7CiAgICAgICAgICAgICAgICAgICAgICByb3V0ZXIucHVzaChgL3NtYXJ0ZG9jLyR7ZG9jSWR9YCkuY2F0Y2gobmF2RXJyID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcign6Lev5b6E5a+86Iiq5Lmf5aSx6LSlOicsIG5hdkVycik7CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2Fybign5Yib5bu65paH5qGj5oiQ5Yqf77yM5L2G6L+U5Zue55qE5pWw5o2u5qC85byP5LiN5q2j56GuJywgcmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAvLyDliLfmlrDmlofmoaPliJfooagKICAgICAgICAgICAgICAgICAgZmV0Y2hEb2N1bWVudHMoKTsKICAgICAgICAgICAgICAgICAgZmV0Y2hSZWNlbnREb2N1bWVudHMoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LCAxMDApOwogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WIm+W7uuaWh+aho+Wksei0pScsIGVycm9yKTsKICAgICAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+WIm+W7uuaWh+aho+Wksei0pScpOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgIGNyZWF0ZUxvYWRpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCfmj5DkuqTooajljZXml7blj5HnlJ/plJnor686JywgZXJyb3IpOwogICAgICAgICAgRWxNZXNzYWdlLmVycm9yKCfooajljZXmj5DkuqTlpLHotKUnKTsKICAgICAgICAgIGNyZWF0ZUxvYWRpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoZG9jdW1lbnRDcmVhdGVUeXBlLnZhbHVlID09PSAnYWknKSB7CiAgICAgICAgaWYgKCFhaUZvcm1SZWYudmFsdWUpIHsKICAgICAgICAgIGNvbnNvbGUud2FybignQUnooajljZXlvJXnlKjkuI3lrZjlnKgnKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGNvbnN0IHZhbGlkID0gYXdhaXQgYWlGb3JtUmVmLnZhbHVlLnZhbGlkYXRlKCkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcignQUnooajljZXpqozor4HlpLHotKU6JywgZXJyKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgICAgY3JlYXRlTG9hZGluZy52YWx1ZSA9IHRydWU7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgLy8g6LCD55SoQUnnlJ/miJDmlofmoaNBUEkKICAgICAgICAgICAgICBjb25zdCBjYXRlZ29yeUlkID0gc2VhcmNoQ2F0ZWdvcnkudmFsdWUgIT09ICdhbGwnID8gc2VhcmNoQ2F0ZWdvcnkudmFsdWUgOiBudWxsOwogICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYWlHZW5lcmF0ZURvY3VtZW50KHsKICAgICAgICAgICAgICAgIHRpdGxlOiBhaURvY3VtZW50Rm9ybS52YWx1ZS50aXRsZSwKICAgICAgICAgICAgICAgIHJlcXVpcmVtZW50OiBhaURvY3VtZW50Rm9ybS52YWx1ZS5yZXF1aXJlbWVudHMsCiAgICAgICAgICAgICAgICBjYXRlZ29yeV9pZDogY2F0ZWdvcnlJZCwKICAgICAgICAgICAgICAgIGRvY190eXBlOiAnQUknCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0FJ55Sf5oiQ5paH5qGj5ZON5bqU5pWw5o2u77yaJywgcmVzcG9uc2UpOwogICAgICAgICAgICAgIC8vIOmAgumFjW1hcmtkb3du5Li6cXVpbGwgZGVsdGEKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuZGF0YSAmJiByZXNwb25zZS5kYXRhLmNvbnRlbnQpIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IHF1aWxsRGVsdGEgPSBtYXJrZG93blRvRGVsdGEocmVzcG9uc2UuZGF0YS5jb250ZW50KTsKICAgICAgICAgICAgICAgICAgLy8g6L+Z6YeM5Y+v5Lul5bCGcXVpbGxEZWx0YeS/neWtmOWIsOacrOWcsOe8k+WtmOOAgeS8oOmAkuWIsOivpuaDhemhteOAgeaIluebtOaOpei1i+WAvOWIsOe8lui+keWZqAogICAgICAgICAgICAgICAgICAvLyDkvovlpoLvvJpsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgZG9jX3F1aWxsX2RlbHRhXyR7cmVzcG9uc2UuZGF0YS5pZH1gLCBKU09OLnN0cmluZ2lmeShxdWlsbERlbHRhKSk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdtYXJrZG93bui9rHF1aWxsIGRlbHRh5aSx6LSlJywgZXJyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgbmV3RG9jdW1lbnREaWFsb2dWaXNpYmxlLnZhbHVlID0gZmFsc2U7CiAgICAgICAgICAgICAgRWxNZXNzYWdlLnN1Y2Nlc3MoJ0FJ55Sf5oiQ5paH5qGj5oiQ5YqfJyk7CiAgICAgICAgICAgICAgbGV0IGRvY0lkID0gbnVsbDsKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuZGF0YSAmJiByZXNwb25zZS5kYXRhLmlkKSB7CiAgICAgICAgICAgICAgICBkb2NJZCA9IHJlc3BvbnNlLmRhdGEuaWQ7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKGRvY0lkKSB7CiAgICAgICAgICAgICAgICAgIGZldGNoRG9jdW1lbnRzKCk7CiAgICAgICAgICAgICAgICAgIGZldGNoUmVjZW50RG9jdW1lbnRzKCk7CiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdTbWFydERvY0RldGFpbCcsCiAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGRvY0lkCiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+i3r+eUseWvvOiIquWksei0pTonLCBlcnIpOwogICAgICAgICAgICAgICAgICAgICAgcm91dGVyLnB1c2goYC9zbWFydGRvYy8ke2RvY0lkfWApLmNhdGNoKG5hdkVyciA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+i3r+W+hOWvvOiIquS5n+Wksei0pTonLCBuYXZFcnIpOwogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBmZXRjaERvY3VtZW50cygpOwogICAgICAgICAgICAgICAgICBmZXRjaFJlY2VudERvY3VtZW50cygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sIDEwMCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignQUnnlJ/miJDmlofmoaPlpLHotKUnLCBlcnJvcik7CiAgICAgICAgICAgICAgRWxNZXNzYWdlLmVycm9yKCdBSeeUn+aIkOaWh+aho+Wksei0pScpOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgIGNyZWF0ZUxvYWRpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCfmj5DkuqRBSeihqOWNleaXtuWPkeeUn+mUmeivrzonLCBlcnJvcik7CiAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+ihqOWNleaPkOS6pOWksei0pScpOwogICAgICAgICAgY3JlYXRlTG9hZGluZy52YWx1ZSA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgfTsKICAgIGNvbnN0IG9wZW5Eb2N1bWVudCA9IGRvYyA9PiB7CiAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAnU21hcnREb2NEZXRhaWwnLAogICAgICAgIHBhcmFtczogewogICAgICAgICAgaWQ6IGRvYy5pZAogICAgICAgIH0KICAgICAgfSk7CiAgICB9OwogICAgY29uc3QgcmVuYW1lRG9jdW1lbnQgPSBkb2MgPT4gewogICAgICBFbE1lc3NhZ2VCb3gucHJvbXB0KCfor7fovpPlhaXmlrDmlofmoaPlkI3np7AnLCAn6YeN5ZG95ZCN5paH5qGjJywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICBpbnB1dFZhbHVlOiBkb2MudGl0bGUsCiAgICAgICAgaW5wdXRWYWxpZGF0b3I6IHZhbHVlID0+IHsKICAgICAgICAgIGlmICghdmFsdWUpIHsKICAgICAgICAgICAgcmV0dXJuICfmlofmoaPlkI3np7DkuI3og73kuLrnqbonOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9KS50aGVuKCh7CiAgICAgICAgdmFsdWUKICAgICAgfSkgPT4gewogICAgICAgIC8vIOatpOWkhOW6lOivpeiwg+eUqOabtOaWsOaWh+aho0FQSQogICAgICAgIEVsTWVzc2FnZS5pbmZvKGDph43lkb3lkI3mlofmoaPkuLo6ICR7dmFsdWV9YCk7CiAgICAgIH0pLmNhdGNoKCgpID0+IHt9KTsKICAgIH07CiAgICBjb25zdCBkdXBsaWNhdGVEb2N1bWVudCA9IGRvYyA9PiB7CiAgICAgIEVsTWVzc2FnZS5pbmZvKGDlpI3liLbmlofmoaM6ICR7ZG9jLnRpdGxlfWApOwogICAgfTsKICAgIGNvbnN0IHNoYXJlRG9jdW1lbnQgPSBkb2MgPT4gewogICAgICBzZWxlY3RlZERvY3VtZW50LnZhbHVlID0gZG9jOwogICAgICAvLyDlnKjlrp7pmYXpobnnm67kuK3vvIzov5nph4zlupTor6Xku45BUEnojrflj5blj6/nlKjnlKjmiLfliJfooagKICAgICAgYXZhaWxhYmxlVXNlcnMudmFsdWUgPSBbewogICAgICAgIGlkOiAxLAogICAgICAgIHVzZXJuYW1lOiAn5byg5LiJJwogICAgICB9LCB7CiAgICAgICAgaWQ6IDIsCiAgICAgICAgdXNlcm5hbWU6ICfmnY7lm5snCiAgICAgIH0sIHsKICAgICAgICBpZDogMywKICAgICAgICB1c2VybmFtZTogJ+eOi+S6lCcKICAgICAgfV07CiAgICAgIHNlbGVjdGVkVXNlcnMudmFsdWUgPSBbXTsKICAgICAgc2hhcmVEaWFsb2dWaXNpYmxlLnZhbHVlID0gdHJ1ZTsKICAgIH07CiAgICBjb25zdCBjb25maXJtU2hhcmUgPSBhc3luYyAoKSA9PiB7CiAgICAgIGlmICghc2VsZWN0ZWREb2N1bWVudC52YWx1ZSB8fCBzZWxlY3RlZFVzZXJzLnZhbHVlLmxlbmd0aCA9PT0gMCkgewogICAgICAgIEVsTWVzc2FnZS53YXJuaW5nKCfor7fpgInmi6noh7PlsJHkuIDkuKrnlKjmiLcnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgc2hhcmVMb2FkaW5nLnZhbHVlID0gdHJ1ZTsKICAgICAgdHJ5IHsKICAgICAgICBhd2FpdCBhcGlTaGFyZURvY3VtZW50KHNlbGVjdGVkRG9jdW1lbnQudmFsdWUuaWQsIHNlbGVjdGVkVXNlcnMudmFsdWUpOwogICAgICAgIEVsTWVzc2FnZS5zdWNjZXNzKCfmlofmoaPliIbkuqvmiJDlip8nKTsKICAgICAgICBzaGFyZURpYWxvZ1Zpc2libGUudmFsdWUgPSBmYWxzZTsKICAgICAgICBmZXRjaFNoYXJlZERvY3VtZW50cygpOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WIhuS6q+aWh+aho+Wksei0pScsIGVycm9yKTsKICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+WIhuS6q+aWh+aho+Wksei0pScpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIHNoYXJlTG9hZGluZy52YWx1ZSA9IGZhbHNlOwogICAgICB9CiAgICB9OwogICAgY29uc3QgZGVsZXRlRG9jdW1lbnQgPSBkb2MgPT4gewogICAgICBzZWxlY3RlZERvY3VtZW50LnZhbHVlID0gZG9jOwogICAgICBkZWxldGVEaWFsb2dWaXNpYmxlLnZhbHVlID0gdHJ1ZTsKICAgIH07CiAgICBjb25zdCBjb25maXJtRGVsZXRlID0gYXN5bmMgKCkgPT4gewogICAgICBpZiAoIXNlbGVjdGVkRG9jdW1lbnQudmFsdWUpIHJldHVybjsKICAgICAgZGVsZXRlTG9hZGluZy52YWx1ZSA9IHRydWU7CiAgICAgIHRyeSB7CiAgICAgICAgdmFyIF9zZWxlY3RlZERvY3VtZW50JHZhbDsKICAgICAgICAvLyDorrDlvZXopoHliKDpmaTnmoTmlofmoaNJROWSjOexu+WIqwogICAgICAgIGNvbnN0IGRlbGV0ZWREb2NJZCA9IHNlbGVjdGVkRG9jdW1lbnQudmFsdWUuaWQ7CiAgICAgICAgY29uc3QgZGVsZXRlZERvY0NhdGVnb3J5SWQgPSAoX3NlbGVjdGVkRG9jdW1lbnQkdmFsID0gc2VsZWN0ZWREb2N1bWVudC52YWx1ZS5jYXRlZ29yeSkgPT09IG51bGwgfHwgX3NlbGVjdGVkRG9jdW1lbnQkdmFsID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc2VsZWN0ZWREb2N1bWVudCR2YWwuaWQ7CgogICAgICAgIC8vIOWFiOWFs+mXreWvueivneahhu+8jOaPkOmrmOeUqOaIt+S9k+mqjAogICAgICAgIGRlbGV0ZURpYWxvZ1Zpc2libGUudmFsdWUgPSBmYWxzZTsKCiAgICAgICAgLy8g5omn6KGM5Yig6Zmk5pON5L2cCiAgICAgICAgYXdhaXQgYXBpRGVsZXRlRG9jdW1lbnQoZGVsZXRlZERvY0lkKTsKICAgICAgICBFbE1lc3NhZ2Uuc3VjY2Vzcygn5paH5qGj5Yig6Zmk5oiQ5YqfJyk7CgogICAgICAgIC8vIOW8uuWItua4hemZpOmAieS4reeahOaWh+ahowogICAgICAgIHNlbGVjdGVkRG9jdW1lbnQudmFsdWUgPSBudWxsOwoKICAgICAgICAvLyDmuIXpmaTlj6/og73nmoTnvJPlrZjmlbDmja4KICAgICAgICBpZiAod2luZG93LmxvY2FsU3RvcmFnZSkgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgLy8g56e76Zmk5Y+v6IO95a2Y5Zyo55qE55u45YWz57yT5a2YCiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGBkb2NfY2FjaGVfJHtkZWxldGVkRG9jSWR9YCk7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGByZWNlbnRfZG9jc19jYWNoZWApOwogICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShgZG9jX2xpc3RfY2FjaGVgKTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcign5riF6Zmk5pys5Zyw57yT5a2Y5aSx6LSlOicsIGUpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8g5pu05paw5Yi35paw6Kem5Y+R5ZmoCiAgICAgICAgcmVmcmVzaFRyaWdnZXIudmFsdWUgPSBEYXRlLm5vdygpOwoKICAgICAgICAvLyDkvb/nlKjmlrDmlbDnu4Tmm7/mjaLljp/mlbDnu4TvvIznoa7kv51WdWXog73mo4DmtYvliLDlj5jljJYgCiAgICAgICAgZG9jdW1lbnRzLnZhbHVlID0gWy4uLmRvY3VtZW50cy52YWx1ZS5maWx0ZXIoZG9jID0+IGRvYy5pZCAhPT0gZGVsZXRlZERvY0lkKV07CiAgICAgICAgcmVjZW50RG9jdW1lbnRzLnZhbHVlID0gWy4uLnJlY2VudERvY3VtZW50cy52YWx1ZS5maWx0ZXIoZG9jID0+IGRvYy5pZCAhPT0gZGVsZXRlZERvY0lkKV07CiAgICAgICAgc2hhcmVkRG9jdW1lbnRzLnZhbHVlID0gWy4uLnNoYXJlZERvY3VtZW50cy52YWx1ZS5maWx0ZXIoZG9jID0+IGRvYy5pZCAhPT0gZGVsZXRlZERvY0lkKV07CgogICAgICAgIC8vIOW8uuWItuabtOaWsOinhuWbvgogICAgICAgIGF3YWl0IGZvcmNlVXBkYXRlKCk7CgogICAgICAgIC8vIOabtOaWsOWIhuexu+S4reeahOaWh+aho+iuoeaVsAogICAgICAgIGlmIChkZWxldGVkRG9jQ2F0ZWdvcnlJZCkgewogICAgICAgICAgY29uc3QgY2F0ZWdvcnkgPSBkb2N1bWVudENhdGVnb3JpZXMudmFsdWUuZmluZChjID0+IGMuaWQgPT09IGRlbGV0ZWREb2NDYXRlZ29yeUlkKTsKICAgICAgICAgIGlmIChjYXRlZ29yeSAmJiBjYXRlZ29yeS5kb2N1bWVudF9jb3VudCA+IDApIHsKICAgICAgICAgICAgY2F0ZWdvcnkuZG9jdW1lbnRfY291bnQtLTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIOetieW+hURPTeabtOaWsAogICAgICAgIGF3YWl0IG5leHRUaWNrKCk7CgogICAgICAgIC8vIOmHjeaWsOWvvOiIquWIsOaWh+aho+mmlumhte+8jOehruS/neeKtuaAgeWFqOmDqOWIt+aWsAogICAgICAgIGlmIChyb3V0ZXIuY3VycmVudFJvdXRlLnZhbHVlLm5hbWUgPT09ICdTbWFydERvY0RldGFpbCcpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCfku47or6bmg4XpobXliKDpmaTmlofmoaPvvIzph43mlrDlr7zoiKrliLDmlofmoaPpppbpobUnKTsKCiAgICAgICAgICAvLyDlhYjlvLrliLbliLfmlrDmlbDmja7vvIznoa7kv53lr7zoiKrlkI7mlbDmja7mmK/mnIDmlrDnmoQKICAgICAgICAgIGF3YWl0IHJlbG9hZEFsbERhdGEoKTsKCiAgICAgICAgICAvLyDkvb/nlKhyZXBsYWNl5qih5byP6Lez6L2s77yM5LiN55WZ5LiL5Y6G5Y+y6K6w5b2V77yM5bm25re75Yqg5by65Yi25Yi35paw5Y+C5pWwCiAgICAgICAgICByb3V0ZXIucmVwbGFjZSh7CiAgICAgICAgICAgIG5hbWU6ICdTbWFydERvYycsCiAgICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgICAgX3JlZnJlc2g6IERhdGUubm93KCkKICAgICAgICAgICAgfSAvLyDmt7vliqDml7bpl7TmiLPlj4LmlbDpmLLmraLnvJPlrZgKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyDlpoLmnpzlt7Lnu4/lnKjmlofmoaPpppbpobXvvIznq4vljbPph43ovb3mlbDmja7lubblvLrliLbliLfmlrDpobXpnaIKICAgICAgICAgIGF3YWl0IHJlZnJlc2hEYXRhKCk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WIoOmZpOaWh+aho+Wksei0pScsIGVycm9yKTsKICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+WIoOmZpOaWh+aho+Wksei0pScpOwogICAgICAgIC8vIOWmguaenOWIoOmZpOWksei0pe+8jOWFs+mXreWvueivneahhgogICAgICAgIGRlbGV0ZURpYWxvZ1Zpc2libGUudmFsdWUgPSBmYWxzZTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBkZWxldGVMb2FkaW5nLnZhbHVlID0gZmFsc2U7CiAgICAgIH0KICAgIH07CiAgICBjb25zdCB2aWV3QWxsRG9jdW1lbnRzID0gdHlwZSA9PiB7CiAgICAgIGlmICh0eXBlID09PSAncmVjZW50JykgewogICAgICAgIC8vIOi3s+i9rOWIsOaJgOacieaWh+aho+mhtemdouW5tuaYvuekuuacgOi/kee8lui+keeahOaWh+ahowogICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICdTbWFydERvY0xpc3QnLAogICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgc29ydDogJ3JlY2VudCcKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IHNlbGVjdENhdGVnb3J5ID0gY2F0ZWdvcnkgPT4gewogICAgICBjb25zb2xlLmxvZygn6YCJ5oup5YiG57G7OicsIGNhdGVnb3J5KTsKCiAgICAgIC8vIOWmguaenOmAieaLqeW9k+WJjeW3sua/gOa0u+eahOWIhuexu++8jOS4jeWBmuaTjeS9nAogICAgICBsZXQgY2F0ZWdvcnlJZDsKICAgICAgaWYgKHR5cGVvZiBjYXRlZ29yeSA9PT0gJ3N0cmluZycpIHsKICAgICAgICBjYXRlZ29yeUlkID0gY2F0ZWdvcnk7CiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGNhdGVnb3J5ID09PSAnb2JqZWN0JyAmJiBjYXRlZ29yeSAhPT0gbnVsbCkgewogICAgICAgIGNhdGVnb3J5SWQgPSBjYXRlZ29yeS5pZC50b1N0cmluZygpOwogICAgICB9CgogICAgICAvLyDlpoLmnpzngrnlh7vlvZPliY3lt7LpgInkuK3nmoTliIbnsbvvvIzliJnph43nva7kuLoi5YWo6YOoIgogICAgICBpZiAoc2VhcmNoQ2F0ZWdvcnkudmFsdWUgPT09IGNhdGVnb3J5SWQgJiYgY2F0ZWdvcnlJZCAhPT0gJ2FsbCcpIHsKICAgICAgICBzZWFyY2hDYXRlZ29yeS52YWx1ZSA9ICdhbGwnOwogICAgICB9IGVsc2UgewogICAgICAgIHNlYXJjaENhdGVnb3J5LnZhbHVlID0gY2F0ZWdvcnlJZDsKICAgICAgfQoKICAgICAgLy8g5re75Yqg5Yqo55S75pWI5p6cCiAgICAgIGRvY3VtZW50cy52YWx1ZSA9IFtdOwogICAgICBjcmVhdGVMb2FkaW5nLnZhbHVlID0gdHJ1ZTsKCiAgICAgIC8vIOW7tui/n+iOt+WPlu+8jOWunueOsOi/h+a4oeaViOaenAogICAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHsKICAgICAgICBhd2FpdCBmZXRjaERvY3VtZW50cygpOwogICAgICAgIGNyZWF0ZUxvYWRpbmcudmFsdWUgPSBmYWxzZTsKCiAgICAgICAgLy8g5Yig6Zmk6Ieq5Yqo5rua5Yqo6YC76L6R77yM6YG/5YWN6aG16Z2i6Ieq5Yqo6Lez6L2sCgogICAgICAgIC8vIOinpuWPkeS4gOS4queugOWNleeahOWKqOeUu+aViOaenO+8jOeqgeWHuuaYvuekuuW3suetm+mAieeahOaWh+ahowogICAgICAgIGNvbnN0IGRvY0NhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRvYy1jYXJkJyk7CiAgICAgICAgaWYgKGRvY0NhcmRzICYmIGRvY0NhcmRzLmxlbmd0aCA+IDApIHsKICAgICAgICAgIGRvY0NhcmRzLmZvckVhY2goKGNhcmQsIGluZGV4KSA9PiB7CiAgICAgICAgICAgIGlmIChjYXJkKSB7CiAgICAgICAgICAgICAgY2FyZC5zdHlsZS5hbmltYXRpb25EZWxheSA9IGAke2luZGV4ICogNTB9bXNgOwogICAgICAgICAgICAgIGNhcmQuY2xhc3NMaXN0LnJlbW92ZSgnZmFkZUluJyk7CiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoY2FyZCkgewogICAgICAgICAgICAgICAgICBjYXJkLmNsYXNzTGlzdC5hZGQoJ2ZhZGVJbicpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sIDEwKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LCAzMDApOwogICAgfTsKCiAgICAvLyDojrflj5bpgInkuK3liIbnsbvnmoTpopzoibIKICAgIGNvbnN0IGdldFNlbGVjdGVkQ2F0ZWdvcnlDb2xvciA9ICgpID0+IHsKICAgICAgaWYgKHNlYXJjaENhdGVnb3J5LnZhbHVlID09PSAnYWxsJykgcmV0dXJuICcjNDA5RUZGJzsKICAgICAgY29uc3Qgc2VsZWN0ZWRDYXRlZ29yeSA9IGRvY3VtZW50Q2F0ZWdvcmllcy52YWx1ZS5maW5kKGMgPT4gYy5pZC50b1N0cmluZygpID09PSBzZWFyY2hDYXRlZ29yeS52YWx1ZSk7CiAgICAgIHJldHVybiAoc2VsZWN0ZWRDYXRlZ29yeSA9PT0gbnVsbCB8fCBzZWxlY3RlZENhdGVnb3J5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZWxlY3RlZENhdGVnb3J5LmNvbG9yKSB8fCAnIzY3QzIzQSc7CiAgICB9OwoKICAgIC8vIOiOt+WPlumAieS4reWIhuexu+eahOWQjeensAogICAgY29uc3QgZ2V0U2VsZWN0ZWRDYXRlZ29yeU5hbWUgPSAoKSA9PiB7CiAgICAgIGlmIChzZWFyY2hDYXRlZ29yeS52YWx1ZSA9PT0gJ2FsbCcpIHJldHVybiAn5YWo6YOo5paH5qGjJzsKICAgICAgY29uc3Qgc2VsZWN0ZWRDYXRlZ29yeSA9IGRvY3VtZW50Q2F0ZWdvcmllcy52YWx1ZS5maW5kKGMgPT4gYy5pZC50b1N0cmluZygpID09PSBzZWFyY2hDYXRlZ29yeS52YWx1ZSk7CiAgICAgIHJldHVybiAoc2VsZWN0ZWRDYXRlZ29yeSA9PT0gbnVsbCB8fCBzZWxlY3RlZENhdGVnb3J5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZWxlY3RlZENhdGVnb3J5Lm5hbWUpIHx8ICfmnKrnn6XliIbnsbsnOwogICAgfTsKICAgIGNvbnN0IG1hbmFnZUNhdGVnb3JpZXMgPSAoKSA9PiB7CiAgICAgIGNhdGVnb3J5RGlhbG9nVmlzaWJsZS52YWx1ZSA9IHRydWU7CiAgICAgIHJlc2V0Q2F0ZWdvcnlGb3JtKCk7CiAgICB9OwogICAgY29uc3QgZWRpdENhdGVnb3J5ID0gY2F0ZWdvcnkgPT4gewogICAgICBlZGl0aW5nQ2F0ZWdvcnkudmFsdWUgPSB7CiAgICAgICAgLi4uY2F0ZWdvcnkKICAgICAgfTsKICAgIH07CiAgICBjb25zdCByZXNldENhdGVnb3J5Rm9ybSA9ICgpID0+IHsKICAgICAgZWRpdGluZ0NhdGVnb3J5LnZhbHVlID0gewogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGNvbG9yOiAnIzQwOUVGRicsCiAgICAgICAgZGVzY3JpcHRpb246ICcnCiAgICAgIH07CiAgICAgIGlmIChjYXRlZ29yeUZvcm1SZWYudmFsdWUpIHsKICAgICAgICBjYXRlZ29yeUZvcm1SZWYudmFsdWUucmVzZXRGaWVsZHMoKTsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IHN1Ym1pdENhdGVnb3J5ID0gYXN5bmMgKCkgPT4gewogICAgICBpZiAoIWNhdGVnb3J5Rm9ybVJlZi52YWx1ZSkgcmV0dXJuOwogICAgICBhd2FpdCBjYXRlZ29yeUZvcm1SZWYudmFsdWUudmFsaWRhdGUoYXN5bmMgdmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgY2F0ZWdvcnlMb2FkaW5nLnZhbHVlID0gdHJ1ZTsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNvbnN0IGNhdGVnb3J5RGF0YSA9IHsKICAgICAgICAgICAgICBuYW1lOiBlZGl0aW5nQ2F0ZWdvcnkudmFsdWUubmFtZSwKICAgICAgICAgICAgICBjb2xvcjogZWRpdGluZ0NhdGVnb3J5LnZhbHVlLmNvbG9yLAogICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBlZGl0aW5nQ2F0ZWdvcnkudmFsdWUuZGVzY3JpcHRpb24gfHwgJycKICAgICAgICAgICAgfTsKICAgICAgICAgICAgaWYgKGVkaXRpbmdDYXRlZ29yeS52YWx1ZS5pZCkgewogICAgICAgICAgICAgIC8vIOabtOaWsOWIhuexuwogICAgICAgICAgICAgIGF3YWl0IHVwZGF0ZURvY3VtZW50Q2F0ZWdvcnkoZWRpdGluZ0NhdGVnb3J5LnZhbHVlLmlkLCBjYXRlZ29yeURhdGEpOwogICAgICAgICAgICAgIEVsTWVzc2FnZS5zdWNjZXNzKCfliIbnsbvmm7TmlrDmiJDlip8nKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvLyDliJvlu7rliIbnsbsKICAgICAgICAgICAgICBhd2FpdCBjcmVhdGVEb2N1bWVudENhdGVnb3J5KGNhdGVnb3J5RGF0YSk7CiAgICAgICAgICAgICAgRWxNZXNzYWdlLnN1Y2Nlc3MoJ+WIhuexu+WIm+W7uuaIkOWKnycpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyDph43mlrDojrflj5bliIbnsbvliJfooagKICAgICAgICAgICAgZmV0Y2hEb2N1bWVudENhdGVnb3JpZXMoKTsKICAgICAgICAgICAgcmVzZXRDYXRlZ29yeUZvcm0oKTsKICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+S/neWtmOWIhuexu+Wksei0pTonLCBlcnJvcik7CiAgICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcign5L+d5a2Y5YiG57G75aSx6LSlJyk7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBjYXRlZ29yeUxvYWRpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfTsKICAgIGNvbnN0IGRlbGV0ZUNhdGVnb3J5ID0gY2F0ZWdvcnkgPT4gewogICAgICBpZiAoY2F0ZWdvcnkuZG9jdW1lbnRfY291bnQgPiAwKSB7CiAgICAgICAgRWxNZXNzYWdlLndhcm5pbmcoJ+ivpeWIhuexu+S4i+acieaWh+aho++8jOaXoOazleWIoOmZpCcpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBFbE1lc3NhZ2VCb3guY29uZmlybShg56Gu5a6a6KaB5Yig6Zmk5YiG57G7IiR7Y2F0ZWdvcnkubmFtZX0i5ZCX77yfYCwgJ+WIoOmZpOWIhuexuycsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oYXN5bmMgKCkgPT4gewogICAgICAgIHRyeSB7CiAgICAgICAgICBhd2FpdCBkZWxldGVEb2N1bWVudENhdGVnb3J5KGNhdGVnb3J5LmlkKTsKICAgICAgICAgIEVsTWVzc2FnZS5zdWNjZXNzKCfliIbnsbvliKDpmaTmiJDlip8nKTsKICAgICAgICAgIGZldGNoRG9jdW1lbnRDYXRlZ29yaWVzKCk7CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WIoOmZpOWIhuexu+Wksei0pTonLCBlcnJvcik7CiAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoJ+WIoOmZpOWIhuexu+Wksei0pScpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goKCkgPT4ge30pOwogICAgfTsKICAgIGNvbnN0IGZvcm1hdERhdGUgPSBkYXRlU3RyaW5nID0+IHsKICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHJpbmcpOwogICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOwoKICAgICAgLy8g5ZCM5LiA5aSp5pi+56S65pe26Ze0CiAgICAgIGlmIChkYXRlLnRvRGF0ZVN0cmluZygpID09PSBub3cudG9EYXRlU3RyaW5nKCkpIHsKICAgICAgICByZXR1cm4gZGF0ZS50b0xvY2FsZVRpbWVTdHJpbmcoJ3poLUNOJywgewogICAgICAgICAgaG91cjogJzItZGlnaXQnLAogICAgICAgICAgbWludXRlOiAnMi1kaWdpdCcKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgLy8g5pio5aSpCiAgICAgIGNvbnN0IHllc3RlcmRheSA9IG5ldyBEYXRlKG5vdyk7CiAgICAgIHllc3RlcmRheS5zZXREYXRlKG5vdy5nZXREYXRlKCkgLSAxKTsKICAgICAgaWYgKGRhdGUudG9EYXRlU3RyaW5nKCkgPT09IHllc3RlcmRheS50b0RhdGVTdHJpbmcoKSkgewogICAgICAgIHJldHVybiAn5pio5aSpJzsKICAgICAgfQoKICAgICAgLy8g5LiA5ZGo5YaF5pi+56S65pif5pyfCiAgICAgIGNvbnN0IHdlZWtEYXlzID0gWyflkajml6UnLCAn5ZGo5LiAJywgJ+WRqOS6jCcsICflkajkuIknLCAn5ZGo5ZubJywgJ+WRqOS6lCcsICflkajlha0nXTsKICAgICAgY29uc3QgZGlmZkRheXMgPSBNYXRoLnJvdW5kKChub3cgLSBkYXRlKSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSk7CiAgICAgIGlmIChkaWZmRGF5cyA8IDcpIHsKICAgICAgICByZXR1cm4gd2Vla0RheXNbZGF0ZS5nZXREYXkoKV07CiAgICAgIH0KCiAgICAgIC8vIOWFtuS7luaDheWGteaYvuekuuaXpeacnwogICAgICByZXR1cm4gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoJ3poLUNOJywgewogICAgICAgIG1vbnRoOiAnbnVtZXJpYycsCiAgICAgICAgZGF5OiAnbnVtZXJpYycKICAgICAgfSk7CiAgICB9OwogICAgY29uc3QgcmVzZXRDYXRlZ29yeUZpbHRlciA9ICgpID0+IHsKICAgICAgc2VhcmNoQ2F0ZWdvcnkudmFsdWUgPSAnYWxsJzsKICAgICAgZmV0Y2hEb2N1bWVudHMoKTsKICAgIH07CgogICAgLy8g5re75Yqg6aG16Z2i5r+A5rS76ZKp5a2Q77yM56Gu5L+d5LuO5YW25LuW6aG16Z2i6L+U5Zue5pe26YeN5paw6I635Y+W5pWw5o2uCiAgICBvbkFjdGl2YXRlZCgoKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKCdTbWFydERvY+e7hOS7tuiiq+a/gOa0u++8jOmHjeaWsOiOt+WPluaVsOaNricpOwogICAgICByZWxvYWRBbGxEYXRhKCk7CiAgICB9KTsKCiAgICAvLyDpobXpnaLmv4DmtLvlkI7ph43mlrDliqDovb3miYDmnInmlbDmja7nmoTlh73mlbAKICAgIGNvbnN0IHJlbG9hZEFsbERhdGEgPSBhc3luYyAoKSA9PiB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc29sZS5sb2coJ+mHjeaWsOWKoOi9veaJgOacieaWh+aho+aVsOaNri4uLicpOwogICAgICAgIGNyZWF0ZUxvYWRpbmcudmFsdWUgPSB0cnVlOwogICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtmZXRjaERvY3VtZW50cyh0cnVlKSwgZmV0Y2hSZWNlbnREb2N1bWVudHModHJ1ZSksIGZldGNoU2hhcmVkRG9jdW1lbnRzKCksIGZldGNoRG9jdW1lbnRDYXRlZ29yaWVzKCldKTsKICAgICAgICBjb25zb2xlLmxvZygn5pWw5o2u6YeN5paw5Yqg6L295a6M5oiQJyk7CiAgICAgICAgYXdhaXQgZm9yY2VVcGRhdGUoKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfmlbDmja7ph43mlrDliqDovb3lpLHotKU6JywgZXJyb3IpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIGNyZWF0ZUxvYWRpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgfQogICAgfTsKCiAgICAvLyDmj5Dkvpvph43ovb3lh73mlbDnu5nlrZDnu4Tku7bmiJbniLbnu4Tku7bkvb/nlKgKICAgIHByb3ZpZGUoJ3JlbG9hZERvY3VtZW50cycsIHJlbG9hZEFsbERhdGEpOwoKICAgIC8vIOebkeWQrOi3r+eUseWPmOWMlu+8jOW8uuWItuWIt+aWsOaVsOaNrgogICAgd2F0Y2goKCkgPT4gcm91dGUucXVlcnkuX3JlZnJlc2gsIG5ld1ZhbCA9PiB7CiAgICAgIGlmIChuZXdWYWwpIHsKICAgICAgICBjb25zb2xlLmxvZygn5qOA5rWL5Yiw6Lev55Sx5Yi35paw5Y+C5pWwOicsIG5ld1ZhbCk7CiAgICAgICAgcmVmcmVzaFRyaWdnZXIudmFsdWUgPSBEYXRlLm5vdygpOwogICAgICAgIHJlbG9hZEFsbERhdGEoKTsKICAgICAgfQogICAgfSk7CgogICAgLy8g55uR5ZCs6Lev55Sx5Y+C5pWw77yM5aSE55CG5LiN5ZCM5oOF5Ya1CiAgICB3YXRjaCgoKSA9PiByb3V0ZS5wYXRoLCAobmV3UGF0aCwgb2xkUGF0aCkgPT4gewogICAgICBjb25zb2xlLmxvZygn6Lev55Sx5Y+Y5YyWOicsIG9sZFBhdGgsICctPicsIG5ld1BhdGgpOwogICAgICBpZiAobmV3UGF0aCA9PT0gJy9zbWFydGRvYycgJiYgb2xkUGF0aCAmJiBvbGRQYXRoLnN0YXJ0c1dpdGgoJy9zbWFydGRvYy8nKSkgewogICAgICAgIC8vIOS7juaWh+aho+ivpuaDhemhtei/lOWbnuaWh+aho+WIl+ihqOmhte+8jOW8uuWItuWIt+aWsAogICAgICAgIGNvbnNvbGUubG9nKCfku47or6bmg4XpobXov5Tlm57liJfooajpobXvvIzlvLrliLbliLfmlrDmlbDmja4nKTsKICAgICAgICByZWZyZXNoVHJpZ2dlci52YWx1ZSA9IERhdGUubm93KCk7CiAgICAgICAgcmVsb2FkQWxsRGF0YSgpOwogICAgICB9CiAgICB9KTsKCiAgICAvLyDmiYvliqjlvLrliLbliLfmlrDmlrnms5UKICAgIGNvbnN0IHJlZnJlc2hEYXRhID0gYXN5bmMgKCkgPT4gewogICAgICByZWZyZXNoVHJpZ2dlci52YWx1ZSA9IERhdGUubm93KCk7CiAgICAgIGF3YWl0IHJlbG9hZEFsbERhdGEoKTsKCiAgICAgIC8vIOW8uuWItuWIt+aWsOmhtemdoue7hOS7tgogICAgICBpZiAocHJveHkgJiYgcHJveHkuJGZvcmNlVXBkYXRlKSB7CiAgICAgICAgcHJveHkuJGZvcmNlVXBkYXRlKCk7CiAgICAgIH0KICAgIH07CgogICAgLy8g55Sf5ZG95ZGo5pyf6ZKp5a2QCiAgICBvbk1vdW50ZWQoKCkgPT4gewogICAgICBjb25zb2xlLmxvZygnU21hcnREb2Pnu4Tku7Ztb3VudGVk77yM5Yqg6L295pWw5o2uJyk7CiAgICAgIHJlbG9hZEFsbERhdGEoKTsgLy8g5L2/55So57uf5LiA55qE5pWw5o2u5Yqg6L295Ye95pWwCiAgICB9KTsKICAgIHJldHVybiB7CiAgICAgIGRvY3VtZW50cywKICAgICAgcmVjZW50RG9jdW1lbnRzLAogICAgICBzaGFyZWREb2N1bWVudHMsCiAgICAgIGRvY3VtZW50Q2F0ZWdvcmllcywKICAgICAgc2VhcmNoUXVlcnksCiAgICAgIHNlYXJjaENhdGVnb3J5LAogICAgICBkZWJvdW5jZWRTZWFyY2gsCiAgICAgIHRvdGFsRG9jdW1lbnRzLAogICAgICByZWNlbnRFZGl0Q291bnQsCiAgICAgIG5ld0RvY3VtZW50RGlhbG9nVmlzaWJsZSwKICAgICAgc2hhcmVEaWFsb2dWaXNpYmxlLAogICAgICBkZWxldGVEaWFsb2dWaXNpYmxlLAogICAgICBkb2N1bWVudENyZWF0ZVR5cGUsCiAgICAgIG5ld0RvY3VtZW50Rm9ybSwKICAgICAgYWlEb2N1bWVudEZvcm0sCiAgICAgIGJsYW5rRm9ybVJ1bGVzLAogICAgICBhaUZvcm1SdWxlcywKICAgICAgYmxhbmtGb3JtUmVmLAogICAgICBhaUZvcm1SZWYsCiAgICAgIHNlbGVjdGVkRG9jdW1lbnQsCiAgICAgIHNlbGVjdGVkVXNlcnMsCiAgICAgIGF2YWlsYWJsZVVzZXJzLAogICAgICBjcmVhdGVMb2FkaW5nLAogICAgICBzaGFyZUxvYWRpbmcsCiAgICAgIGRlbGV0ZUxvYWRpbmcsCiAgICAgIGNyZWF0ZU5ld0RvY3VtZW50LAogICAgICBzdWJtaXROZXdEb2N1bWVudCwKICAgICAgb3BlbkRvY3VtZW50LAogICAgICByZW5hbWVEb2N1bWVudCwKICAgICAgZHVwbGljYXRlRG9jdW1lbnQsCiAgICAgIHNoYXJlRG9jdW1lbnQsCiAgICAgIGNvbmZpcm1TaGFyZSwKICAgICAgZGVsZXRlRG9jdW1lbnQsCiAgICAgIGNvbmZpcm1EZWxldGUsCiAgICAgIHZpZXdBbGxEb2N1bWVudHMsCiAgICAgIGZvcm1hdERhdGUsCiAgICAgIGNhdGVnb3J5RGlhbG9nVmlzaWJsZSwKICAgICAgZWRpdGluZ0NhdGVnb3J5LAogICAgICBjYXRlZ29yeUZvcm1SZWYsCiAgICAgIGNhdGVnb3J5TG9hZGluZywKICAgICAgY2F0ZWdvcnlGb3JtUnVsZXMsCiAgICAgIGVkaXRDYXRlZ29yeSwKICAgICAgcmVzZXRDYXRlZ29yeUZvcm0sCiAgICAgIHN1Ym1pdENhdGVnb3J5LAogICAgICBkZWxldGVDYXRlZ29yeSwKICAgICAgcmVzZXRDYXRlZ29yeUZpbHRlciwKICAgICAgc2VsZWN0Q2F0ZWdvcnksCiAgICAgIGdldFNlbGVjdGVkQ2F0ZWdvcnlDb2xvciwKICAgICAgZ2V0U2VsZWN0ZWRDYXRlZ29yeU5hbWUsCiAgICAgIG1hbmFnZUNhdGVnb3JpZXMsCiAgICAgIHJlbG9hZEFsbERhdGEsCiAgICAgIC8vIOa3u+WKoOWIsOi/lOWbnuWAvOS4re+8jOS+m+aooeadv+S9v+eUqAogICAgICByZWZyZXNoRGF0YSwKICAgICAgLy8g5paw5aKe5by65Yi25Yi35paw5pa55rOVCiAgICAgIHJlZnJlc2hUcmlnZ2VyIC8vIOa3u+WKoOWIt+aWsOinpuWPkeWZqOWIsOi/lOWbnuWAvAogICAgfTsKICB9Cn07"},{"version":3,"names":["ref","computed","onMounted","nextTick","getCurrentInstance","provide","onActivated","watch","useRouter","useRoute","ElMessage","ElMessageBox","Search","Plus","EditPen","Share","Folder","Close","More","Document","_","getDocuments","getRecentDocuments","getSharedDocuments","getDocumentCategories","createDocument","deleteDocument","apiDeleteDocument","shareDocument","apiShareDocument","createDocumentCategory","updateDocumentCategory","deleteDocumentCategory","aiGenerateDocument","markdownToDelta","name","components","setup","router","route","proxy","refreshTrigger","Date","now","documents","recentDocuments","sharedDocuments","documentCategories","searchQuery","searchCategory","newDocumentDialogVisible","shareDialogVisible","deleteDialogVisible","documentCreateType","selectedDocument","selectedUsers","availableUsers","createLoading","shareLoading","deleteLoading","newDocumentForm","title","type","aiDocumentForm","requirements","blankFormRules","required","message","trigger","min","max","aiFormRules","blankFormRef","aiFormRef","totalDocuments","value","length","recentEditCount","categoryDialogVisible","editingCategory","color","description","categoryFormRef","categoryLoading","categoryFormRules","forceUpdate","$forceUpdate","fetchDocuments","forceRefresh","console","log","params","page","limit","category","search","_t","getTime","res","data","Array","isArray","warn","error","fetchRecentDocuments","fetchSharedDocuments","response","fetchDocumentCategories","retryCount","setTimeout","status","debouncedSearch","debounce","createNewDocument","dialog","document","querySelector","addEventListener","clearValidate","err","once","submitNewDocument","valid","validate","catch","content","JSON","stringify","success","docId","id","results","push","navErr","categoryId","requirement","category_id","doc_type","quillDelta","openDocument","doc","renameDocument","prompt","confirmButtonText","cancelButtonText","inputValue","inputValidator","then","info","duplicateDocument","username","confirmShare","warning","confirmDelete","_selectedDocument$val","deletedDocId","deletedDocCategoryId","window","localStorage","removeItem","e","filter","find","c","document_count","currentRoute","reloadAllData","replace","query","_refresh","refreshData","viewAllDocuments","sort","selectCategory","toString","docCards","querySelectorAll","forEach","card","index","style","animationDelay","classList","remove","add","getSelectedCategoryColor","selectedCategory","getSelectedCategoryName","manageCategories","resetCategoryForm","editCategory","resetFields","submitCategory","categoryData","deleteCategory","confirm","formatDate","dateString","date","toDateString","toLocaleTimeString","hour","minute","yesterday","setDate","getDate","weekDays","diffDays","Math","round","getDay","toLocaleDateString","month","day","resetCategoryFilter","Promise","all","newVal","path","newPath","oldPath","startsWith"],"sources":["C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\smartdoc\\Index.vue"],"sourcesContent":["<template>\n  <div class=\"smartdoc-home-container\">\n    <!-- 添加隐藏的刷新触发元素，用于强制组件刷新 -->\n    <div style=\"display: none;\">{{ refreshTrigger }}</div>\n    \n    <!-- 页面标题和操作区 -->\n    <div class=\"page-header\">\n      <div class=\"left-section\">\n        <h2 class=\"page-title\">智能文档</h2>\n        <p class=\"page-description\">创建、编辑和管理您的智能文档</p>\n        </div>\n      <div class=\"right-section\">\n        <div class=\"search-controls\">\n          <el-select \n            v-model=\"searchCategory\" \n            placeholder=\"选择分类\" \n            @change=\"selectCategory(searchCategory)\" \n            class=\"category-select\"\n          >\n            <el-option label=\"全部分类\" value=\"all\" />\n            <el-option \n              v-for=\"category in documentCategories\" \n              :key=\"category.id\" \n              :label=\"category.name\" \n              :value=\"category.id.toString()\"\n            />\n          </el-select>\n          \n          <el-input\n            placeholder=\"搜索文档...\"\n            v-model=\"searchQuery\"\n          class=\"search-input\"\n            clearable\n            @input=\"debouncedSearch\"\n          >\n            <template #prefix>\n              <el-icon><Search /></el-icon>\n            </template>\n          </el-input>\n        </div>\n        \n        <el-button type=\"primary\" @click=\"createNewDocument\">\n          <el-icon><Plus /></el-icon> 新建文档\n        </el-button>\n          </div>\n        </div>\n\n    <!-- 文档概览统计卡片 -->\n    <div class=\"stats-cards\">\n      <el-card class=\"stat-card\" shadow=\"hover\">\n        <div class=\"stat-content\">\n          <div class=\"stat-icon doc-icon\">\n                <el-icon><Document /></el-icon>\n              </div>\n          <div class=\"stat-info\">\n            <div class=\"stat-value\">{{ totalDocuments }}</div>\n            <div class=\"stat-label\">全部文档</div>\n                </div>\n              </div>\n      </el-card>\n      \n      <el-card class=\"stat-card\" shadow=\"hover\">\n        <div class=\"stat-content\">\n          <div class=\"stat-icon edit-icon\">\n            <el-icon><EditPen /></el-icon>\n            </div>\n          <div class=\"stat-info\">\n            <div class=\"stat-value\">{{ recentEditCount }}</div>\n            <div class=\"stat-label\">近期编辑</div>\n          </div>\n        </div>\n      </el-card>\n      \n      <el-card class=\"stat-card\" shadow=\"hover\">\n        <div class=\"stat-content\">\n          <div class=\"stat-icon share-icon\">\n            <el-icon><Share /></el-icon>\n          </div>\n          <div class=\"stat-info\">\n            <div class=\"stat-value\">{{ sharedDocuments.length }}</div>\n            <div class=\"stat-label\">共享文档</div>\n            </div>\n        </div>\n      </el-card>\n    </div>\n\n    <!-- 添加筛选活动状态提示栏 -->\n    <div v-if=\"searchCategory !== 'all'\" class=\"filter-status-bar\">\n      <div class=\"filter-bar-content\">\n        <div class=\"filter-title\">\n          <span>当前筛选: </span>\n          <span class=\"filter-category\" :style=\"{ backgroundColor: getSelectedCategoryColor() }\">\n            {{ getSelectedCategoryName() }}\n          </span>\n        </div>\n        <div class=\"filter-actions\">\n          <el-button type=\"primary\" link @click=\"resetCategoryFilter\">\n            <el-icon><Close /></el-icon> 清除筛选\n          </el-button>\n        </div>\n      </div>\n    </div>\n\n    <!-- 文档分类区域 - 移至文档列表上方 -->\n    <div class=\"section category-section\">\n      <div class=\"section-header\">\n        <h3>文档类型</h3>\n        <div class=\"section-actions\">\n          <el-button text @click=\"manageCategories\">管理类型</el-button>\n        </div>\n      </div>\n      \n      <div class=\"category-cards\">\n        <!-- 全部分类选项 -->\n        <div \n          class=\"category-card\" \n          :class=\"{ 'category-active': searchCategory === 'all' }\"\n          @click=\"selectCategory('all')\"\n        >\n          <div class=\"category-icon\" :style=\"{ backgroundColor: '#409EFF' }\">\n            <el-icon><Document /></el-icon>\n          </div>\n          <div class=\"category-info\">\n            <h4>全部文档</h4>\n            <div class=\"category-count\">{{ documents.length }} 个文档</div>\n          </div>\n          <div v-if=\"searchCategory === 'all'\" class=\"category-selected-indicator\"></div>\n        </div>\n        \n        <!-- 分类卡片 -->\n        <div \n          v-for=\"category in documentCategories\" \n          :key=\"category.id\" \n          class=\"category-card\" \n          :class=\"{ 'category-active': searchCategory === category.id.toString() }\"\n          @click=\"selectCategory(category)\"\n        >\n          <div class=\"category-icon\" :style=\"{ backgroundColor: category.color }\">\n            <el-icon><Folder /></el-icon>\n          </div>\n          <div class=\"category-info\">\n            <h4>{{ category.name }}</h4>\n            <div class=\"category-count\">{{ category.document_count }} 个文档</div>\n          </div>\n          <div v-if=\"searchCategory === category.id.toString()\" class=\"category-selected-indicator\"></div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 添加文档列表区域 -->\n    <div class=\"section\">\n      <div class=\"section-header\">\n        <h3>我的文档</h3>\n        <div class=\"filter-controls\">\n          <el-button text @click=\"fetchDocuments\">刷新</el-button>\n        </div>\n              </div>\n      \n      <div class=\"document-cards\">\n        <el-card \n          v-for=\"doc in documents\" \n          :key=\"doc.id\" \n          class=\"doc-card\" \n          shadow=\"hover\"\n          @click=\"openDocument(doc)\"\n        >\n          <div class=\"doc-card-header\">\n            <div class=\"doc-info\">\n            <div class=\"doc-type-tag\">{{ doc.type }}</div>\n              <div v-if=\"doc.category\" \n                   class=\"doc-category-tag\" \n                   :style=\"{ backgroundColor: doc.category.color || '#67C23A' }\"\n              >\n                {{ doc.category.name }}\n              </div>\n            </div>\n            <div class=\"doc-menu\">\n              <el-dropdown trigger=\"click\" @click.stop>\n                <el-icon><More /></el-icon>\n                  <template #dropdown>\n                    <el-dropdown-menu>\n                    <el-dropdown-item @click.stop=\"openDocument(doc)\">打开</el-dropdown-item>\n                    <el-dropdown-item @click.stop=\"renameDocument(doc)\">重命名</el-dropdown-item>\n                    <el-dropdown-item @click.stop=\"duplicateDocument(doc)\">复制</el-dropdown-item>\n                    <el-dropdown-item @click.stop=\"shareDocument(doc)\">分享</el-dropdown-item>\n                    <el-dropdown-item divided @click.stop=\"deleteDocument(doc)\" type=\"danger\">删除</el-dropdown-item>\n                    </el-dropdown-menu>\n                  </template>\n                </el-dropdown>\n            </div>\n          </div>\n          \n          <h4 class=\"doc-title\" :title=\"doc.title\">{{ doc.title }}</h4>\n          \n          <div class=\"doc-preview\" v-html=\"doc.preview || '无预览内容'\"></div>\n          \n          <div class=\"doc-footer\">\n            <div class=\"doc-time\">{{ formatDate(doc.update_time) }}</div>\n            <div class=\"doc-actions\">\n              <el-tooltip content=\"编辑\" placement=\"top\">\n                <el-button link circle size=\"small\" @click.stop=\"openDocument(doc)\">\n                  <el-icon><EditPen /></el-icon>\n                </el-button>\n              </el-tooltip>\n              <el-tooltip content=\"分享\" placement=\"top\">\n                <el-button link circle size=\"small\" @click.stop=\"shareDocument(doc)\">\n                  <el-icon><Share /></el-icon>\n                </el-button>\n              </el-tooltip>\n              </div>\n            </div>\n        </el-card>\n        \n        <!-- 创建新文档卡片 -->\n        <div class=\"doc-card new-doc-card\" @click=\"createNewDocument\">\n          <div class=\"new-doc-content\">\n            <el-icon><Plus /></el-icon>\n            <span>新建文档</span>\n                  </div>\n                    </div>\n                  </div>\n      \n      <div v-if=\"documents.length === 0 && !createLoading\" class=\"empty-state\">\n        <!-- 移除暂无文档的显示部分 -->\n                </div>\n\n      <div v-if=\"createLoading\" class=\"loading-state\">\n        <el-skeleton :rows=\"3\" animated />\n      </div>\n    </div>\n\n    <!-- 最近编辑文档区域 -->\n    <div class=\"section\">\n      <div class=\"section-header\">\n        <h3>最近编辑</h3>\n        <div class=\"section-actions\">\n        <el-button text @click=\"viewAllDocuments('recent')\">查看全部</el-button>\n        </div>\n                </div>\n      \n      <div class=\"document-cards\">\n        <el-card \n          v-for=\"doc in recentDocuments\" \n          :key=\"doc.id\" \n          class=\"doc-card\" \n          shadow=\"hover\"\n          @click=\"openDocument(doc)\"\n        >\n          <div class=\"doc-card-header\">\n            <div class=\"doc-info\">\n            <div class=\"doc-type-tag\">{{ doc.type }}</div>\n              <div v-if=\"doc.category\" \n                   class=\"doc-category-tag\" \n                   :style=\"{ backgroundColor: doc.category.color || '#67C23A' }\"\n              >\n                {{ doc.category.name }}\n                  </div>\n            </div>\n            <div class=\"doc-menu\">\n              <el-dropdown trigger=\"click\" @click.stop>\n                <el-icon><More /></el-icon>\n                  <template #dropdown>\n                    <el-dropdown-menu>\n                    <el-dropdown-item @click.stop=\"openDocument(doc)\">打开</el-dropdown-item>\n                    <el-dropdown-item @click.stop=\"renameDocument(doc)\">重命名</el-dropdown-item>\n                    <el-dropdown-item @click.stop=\"duplicateDocument(doc)\">复制</el-dropdown-item>\n                    <el-dropdown-item @click.stop=\"shareDocument(doc)\">分享</el-dropdown-item>\n                    <el-dropdown-item divided @click.stop=\"deleteDocument(doc)\" type=\"danger\">删除</el-dropdown-item>\n                    </el-dropdown-menu>\n                  </template>\n                </el-dropdown>\n            </div>\n          </div>\n          \n          <h4 class=\"doc-title\" :title=\"doc.title\">{{ doc.title }}</h4>\n          \n          <div class=\"doc-preview\" v-html=\"doc.preview || '无预览内容'\"></div>\n          \n          <div class=\"doc-footer\">\n            <div class=\"doc-time\">{{ formatDate(doc.update_time) }}</div>\n            <div class=\"doc-actions\">\n              <el-tooltip content=\"编辑\" placement=\"top\">\n                <el-button link circle size=\"small\" @click.stop=\"openDocument(doc)\">\n                  <el-icon><EditPen /></el-icon>\n                </el-button>\n              </el-tooltip>\n              <el-tooltip content=\"分享\" placement=\"top\">\n                <el-button link circle size=\"small\" @click.stop=\"shareDocument(doc)\">\n                  <el-icon><Share /></el-icon>\n                </el-button>\n              </el-tooltip>\n              </div>\n                </div>\n        </el-card>\n        \n        <!-- 创建新文档卡片 -->\n        <div class=\"doc-card new-doc-card\" @click=\"createNewDocument\">\n          <div class=\"new-doc-content\">\n            <el-icon><Plus /></el-icon>\n            <span>新建文档</span>\n          </div>\n        </div>\n      </div>\n      \n      <div v-if=\"recentDocuments.length === 0\" class=\"empty-state\">\n        <!-- 移除暂无最近编辑文档的显示 -->\n    </div>\n  </div>\n\n    <!-- 创建新文档对话框 -->\n  <el-dialog\n      v-model=\"newDocumentDialogVisible\"\n      title=\"新建智能文档\"\n      width=\"35%\"\n    >\n      <el-tabs v-model=\"documentCreateType\">\n        <el-tab-pane label=\"空白文档\" name=\"blank\">\n          <el-form \n            :model=\"newDocumentForm\" \n            label-width=\"80px\" \n            class=\"mt-4\"\n            :rules=\"blankFormRules\"\n            ref=\"blankFormRef\"\n          >\n            <el-form-item label=\"文档标题\" prop=\"title\">\n              <el-input v-model=\"newDocumentForm.title\" placeholder=\"请输入文档标题\" />\n      </el-form-item>\n            <el-form-item label=\"文档类型\">\n              <el-input v-model=\"newDocumentForm.type\" placeholder=\"请输入文档类型\" />\n              <div class=\"form-tip\">如果未填写，默认为通用类型</div>\n            </el-form-item>\n          </el-form>\n        </el-tab-pane>\n        <el-tab-pane label=\"AI生成文档\" name=\"ai\">\n          <el-form \n            :model=\"aiDocumentForm\" \n            label-width=\"80px\" \n            class=\"mt-4\"\n            :rules=\"aiFormRules\"\n            ref=\"aiFormRef\"\n          >\n            <el-form-item label=\"文档主题\" prop=\"title\">\n              <el-input v-model=\"aiDocumentForm.title\" placeholder=\"简短描述文档主题，如：项目周报\" />\n            </el-form-item>\n            <el-form-item label=\"文档要求\" prop=\"requirements\">\n        <el-input\n                v-model=\"aiDocumentForm.requirements\" \n          type=\"textarea\"\n                :rows=\"3\" \n                placeholder=\"详细描述您需要的文档内容和要求\"\n        />\n              <div class=\"form-tip\">人工智能会根据您的描述生成文档内容</div>\n      </el-form-item>\n    </el-form>\n        </el-tab-pane>\n      </el-tabs>\n    <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"newDocumentDialogVisible = false\">取消</el-button>\n          <el-button type=\"primary\" @click=\"submitNewDocument\" :loading=\"createLoading\">\n            创建\n          </el-button>\n        </span>\n      </template>\n    </el-dialog>\n    \n    <!-- 分享文档对话框 -->\n    <el-dialog\n      v-model=\"shareDialogVisible\"\n      title=\"分享文档\"\n      width=\"30%\"\n    >\n      <div v-if=\"selectedDocument\">\n        <p>您即将分享文档: <strong>{{ selectedDocument.title }}</strong></p>\n        <el-form label-width=\"120px\" class=\"mt-4\">\n          <el-form-item label=\"选择用户\">\n            <el-select\n              v-model=\"selectedUsers\"\n              multiple\n              placeholder=\"请选择用户\"\n              style=\"width: 100%\"\n            >\n              <el-option\n                v-for=\"user in availableUsers\"\n                :key=\"user.id\"\n                :label=\"user.username\"\n                :value=\"user.id\"\n              />\n            </el-select>\n          </el-form-item>\n        </el-form>\n      </div>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"shareDialogVisible = false\">取消</el-button>\n          <el-button type=\"primary\" @click=\"confirmShare\" :loading=\"shareLoading\">\n            分享\n          </el-button>\n        </span>\n    </template>\n  </el-dialog>\n    \n    <!-- 删除确认对话框 -->\n    <el-dialog\n      v-model=\"deleteDialogVisible\"\n      title=\"删除文档\"\n      width=\"30%\"\n    >\n      <div v-if=\"selectedDocument\">\n        <p>您确定要删除文档 <strong>{{ selectedDocument.title }}</strong> 吗?</p>\n        <p class=\"warning-text\">此操作不可撤销!</p>\n  </div>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"deleteDialogVisible = false\">取消</el-button>\n          <el-button type=\"danger\" @click=\"confirmDelete\" :loading=\"deleteLoading\">\n            删除\n          </el-button>\n        </span>\n      </template>\n    </el-dialog>\n    \n    <!-- 分类管理对话框 -->\n    <el-dialog\n      v-model=\"categoryDialogVisible\"\n      title=\"管理文档类型\"\n      width=\"40%\"\n    >\n      <div class=\"category-management\">\n        <div class=\"category-list\">\n          <h4>当前类型</h4>\n          <el-table :data=\"documentCategories\" style=\"width: 100%\">\n            <el-table-column prop=\"name\" label=\"类型名称\" />\n            <el-table-column label=\"颜色\" width=\"120\">\n              <template #default=\"scope\">\n                <div class=\"color-preview\" :style=\"{ backgroundColor: scope.row.color }\"></div>\n                {{ scope.row.color }}\n              </template>\n            </el-table-column>\n            <el-table-column label=\"文档数\" width=\"100\">\n              <template #default=\"scope\">\n                {{ scope.row.document_count || 0 }}\n              </template>\n            </el-table-column>\n            <el-table-column label=\"操作\" width=\"150\">\n              <template #default=\"scope\">\n                <el-button type=\"primary\" link @click=\"editCategory(scope.row)\">编辑</el-button>\n                <el-button \n                  type=\"danger\" \n                  link \n                  @click=\"deleteCategory(scope.row)\"\n                  :disabled=\"scope.row.document_count > 0\"\n                >删除</el-button>\n              </template>\n            </el-table-column>\n          </el-table>\n        </div>\n        \n        <el-divider />\n        \n        <div class=\"category-form\">\n          <h4>{{ editingCategory.id ? '编辑类型' : '新增类型' }}</h4>\n          <el-form \n            :model=\"editingCategory\" \n            :rules=\"categoryFormRules\" \n            label-width=\"80px\"\n            ref=\"categoryFormRef\"\n          >\n            <el-form-item label=\"类型名称\" prop=\"name\">\n              <el-input v-model=\"editingCategory.name\" placeholder=\"输入类型名称\" />\n            </el-form-item>\n            <el-form-item label=\"类型颜色\" prop=\"color\">\n              <el-color-picker v-model=\"editingCategory.color\" />\n              <span class=\"color-value\">{{ editingCategory.color }}</span>\n            </el-form-item>\n            <el-form-item label=\"描述\">\n              <el-input \n                v-model=\"editingCategory.description\" \n                type=\"textarea\" \n                :rows=\"3\" \n                placeholder=\"输入类型描述（可选）\" \n              />\n            </el-form-item>\n            <el-form-item>\n              <el-button type=\"primary\" @click=\"submitCategory\" :loading=\"categoryLoading\">\n                {{ editingCategory.id ? '更新' : '创建' }}\n              </el-button>\n              <el-button @click=\"resetCategoryForm\">重置</el-button>\n            </el-form-item>\n          </el-form>\n        </div>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { ref, computed, onMounted, nextTick, getCurrentInstance, provide, onActivated, watch } from 'vue'\nimport { useRouter, useRoute } from 'vue-router'\nimport { ElMessage, ElMessageBox } from 'element-plus'\nimport { Search, Plus, EditPen, Share, Folder, Close, More, Document } from '@element-plus/icons-vue'\nimport _ from 'lodash'\nimport { \n  getDocuments,\n  getRecentDocuments,\n  getSharedDocuments,\n  getDocumentCategories,\n  createDocument,\n  deleteDocument as apiDeleteDocument,\n  shareDocument as apiShareDocument,\n  createDocumentCategory,\n  updateDocumentCategory,\n  deleteDocumentCategory,\n  aiGenerateDocument\n} from '@/api/smartdoc'\nimport markdownToDelta from 'markdown-to-quill-delta'\n\nexport default {\n  name: 'SmartDocHome',\n  components: {\n    Search,\n    Plus,\n    EditPen,\n    Share,\n    Folder,\n    Close,\n    More,\n    Document\n  },\n  setup() {\n    const router = useRouter()\n    const route = useRoute()\n    const { proxy } = getCurrentInstance() // 获取组件实例\n    \n    // 刷新触发器，用于强制组件刷新\n    const refreshTrigger = ref(Date.now())\n    \n    // 状态数据\n    const documents = ref([])\n    const recentDocuments = ref([])\n    const sharedDocuments = ref([])\n    const documentCategories = ref([])\n    const searchQuery = ref('')\n    const searchCategory = ref('all')\n    const newDocumentDialogVisible = ref(false)\n    const shareDialogVisible = ref(false)\n    const deleteDialogVisible = ref(false)\n    const documentCreateType = ref('blank')\n    const selectedDocument = ref(null)\n    const selectedUsers = ref([])\n    const availableUsers = ref([])\n    const createLoading = ref(false)\n    const shareLoading = ref(false)\n    const deleteLoading = ref(false)\n    \n    // 表单数据\n    const newDocumentForm = ref({\n        title: '',\n        type: ''\n    })\n    \n    const aiDocumentForm = ref({\n        title: '',\n      requirements: ''\n    })\n    \n    // 表单校验规则\n    const blankFormRules = {\n        title: [\n        { required: true, message: '请输入文档标题', trigger: 'blur' },\n        { min: 2, max: 50, message: '长度在 2 到 50 个字符', trigger: 'blur' }\n        ]\n    }\n    \n    const aiFormRules = {\n        title: [\n        { required: true, message: '请输入文档主题', trigger: 'blur' },\n        { min: 2, max: 50, message: '长度在 2 到 50 个字符', trigger: 'blur' }\n        ],\n        requirements: [\n        { required: true, message: '请输入文档要求', trigger: 'blur' },\n        { min: 10, max: 500, message: '长度在 10 到 500 个字符', trigger: 'blur' }\n      ]\n    }\n    \n    const blankFormRef = ref(null)\n    const aiFormRef = ref(null)\n    \n    // 计算属性\n    const totalDocuments = computed(() => documents.value.length)\n    const recentEditCount = computed(() => recentDocuments.value.length)\n    \n    // 分类管理相关状态\n    const categoryDialogVisible = ref(false)\n    const editingCategory = ref({\n      name: '',\n      color: '#409EFF',\n      description: '',\n    })\n    const categoryFormRef = ref(null)\n    const categoryLoading = ref(false)\n    const categoryFormRules = {\n      name: [\n        { required: true, message: '请输入类型名称', trigger: 'blur' },\n        { min: 2, max: 20, message: '长度在2到20个字符', trigger: 'blur' }\n      ],\n      color: [\n        { required: true, message: '请选择颜色', trigger: 'change' }\n      ]\n    }\n    \n    // 辅助方法：强制刷新视图\n    const forceUpdate = async () => {\n      // 创建临时数据，触发深度响应式更新\n      documents.value = [...documents.value];\n      recentDocuments.value = [...recentDocuments.value]; \n      sharedDocuments.value = [...sharedDocuments.value];\n      \n      // 使用Vue实例的$forceUpdate方法\n      if (proxy && proxy.$forceUpdate) {\n        proxy.$forceUpdate();\n      }\n      \n      // 等待DOM更新\n      await nextTick();\n    };\n    \n    // 方法\n    const fetchDocuments = async (forceRefresh = false) => {\n      console.log('开始获取文档列表...');\n      try {\n        // 设置加载状态\n        createLoading.value = true;\n        // 准备请求参数\n        const params = {\n          page: 1,\n          limit: 10\n        };\n        // 如果有查询条件，添加到参数中\n        if (searchCategory.value && searchCategory.value !== 'all') {\n          params.category = searchCategory.value;\n          console.log(`按分类查询，ID: ${searchCategory.value}`, typeof searchCategory.value);\n        }\n        if (searchQuery.value) {\n          params.search = searchQuery.value;\n        }\n        \n        // 如果强制刷新，添加时间戳防止缓存\n        if (forceRefresh) {\n          params._t = new Date().getTime();\n        }\n        \n        console.log('API请求参数:', params);\n        const res = await getDocuments(params);\n        console.log('文档列表API响应:', res);\n        \n        // 处理分页数据\n        if (res && res.data) {\n          // 完全替换数组而不是修改引用\n          documents.value = Array.isArray(res.data) ? [...res.data] : [];\n          console.log(`设置文档列表: ${documents.value.length}条记录`, documents.value);\n        } else {\n          console.warn('API返回的响应数据无效:', res);\n          documents.value = [];\n        }\n      } catch (error) {\n        console.error('获取文档列表失败:', error);\n        ElMessage.error('获取文档列表失败');\n        documents.value = [];\n      } finally {\n        createLoading.value = false;\n      }\n    }\n    \n    const fetchRecentDocuments = async (forceRefresh = false) => {\n      console.log('开始获取最近文档...');\n      try {\n        // 准备参数，如果强制刷新添加时间戳\n        const params = forceRefresh ? { _t: new Date().getTime() } : {};\n        \n        const res = await getRecentDocuments(params);\n        console.log('最近文档API响应:', res);\n        \n        if (res && res.data) {\n          // 完全替换数组而不是修改引用\n          recentDocuments.value = Array.isArray(res.data) ? [...res.data] : [];\n          console.log(`设置最近文档: ${recentDocuments.value.length}条记录`);\n        } else {\n          console.warn('API返回的最近文档数据无效:', res);\n          recentDocuments.value = [];\n        }\n      } catch (error) {\n        console.error('获取最近文档失败:', error);\n        ElMessage.error('获取最近文档失败');\n        recentDocuments.value = [];\n      }\n    }\n    \n    const fetchSharedDocuments = async () => {\n      try {\n        const response = await getSharedDocuments()\n        sharedDocuments.value = response.data\n      } catch (error) {\n        console.error('获取共享文档失败', error)\n        ElMessage.error('获取共享文档失败')\n      }\n    }\n    \n    const fetchDocumentCategories = async (retryCount = 0) => {\n      console.log('开始获取文档分类...');\n      try {\n        const res = await getDocumentCategories();\n        console.log('文档分类API响应:', res);\n        \n        if (res && res.data) {\n          documentCategories.value = res.data;\n          console.log(`设置文档分类: ${documentCategories.value.length}条记录, 数据:`, documentCategories.value);\n        } else {\n          console.warn('API返回的文档分类数据无效:', res);\n          documentCategories.value = [];\n          \n          // 如果返回空数据且未达到最大重试次数，尝试重试\n          if (documentCategories.value.length === 0 && retryCount < 2) {\n            console.log(`文档分类数据为空，${retryCount + 1}秒后重试...`);\n            setTimeout(() => fetchDocumentCategories(retryCount + 1), (retryCount + 1) * 1000);\n          }\n        }\n      } catch (error) {\n        console.error('获取文档分类失败:', error);\n        \n        // 如果是服务器错误且未达到最大重试次数，尝试重试\n        if (error.response && error.response.status >= 500 && retryCount < 2) {\n          console.log(`服务器错误，${retryCount + 1}秒后重试...`);\n          setTimeout(() => fetchDocumentCategories(retryCount + 1), (retryCount + 1) * 1000);\n        } else {\n          ElMessage.error('获取文档分类失败，请刷新页面重试');\n          // 初始化空数组\n          documentCategories.value = [];\n        }\n      }\n    }\n    \n    // 防抖搜索\n    const debouncedSearch = _.debounce(async () => {\n      if (searchQuery.value) {\n        try {\n          await fetchDocuments()\n        } catch (error) {\n          console.error('搜索文档失败', error)\n        }\n      } else {\n        fetchDocuments()\n      }\n    }, 500)\n    \n    const createNewDocument = () => {\n      // 重置表单\n      newDocumentForm.value = { title: '', type: '' }\n      aiDocumentForm.value = { title: '', requirements: '' }\n      documentCreateType.value = 'blank'\n      newDocumentDialogVisible.value = true\n      \n      // 监听对话框关闭事件，清理表单\n      nextTick(() => {\n        try {\n          const dialog = document.querySelector('.el-dialog');\n          if (dialog) {\n            dialog.addEventListener('closed', () => {\n              try {\n                if (blankFormRef.value) {\n                  blankFormRef.value.clearValidate();\n                }\n                if (aiFormRef.value) {\n                  aiFormRef.value.clearValidate();\n                }\n              } catch (err) {\n                console.error('Error clearing form validation:', err);\n              }\n            }, { once: true });\n          }\n        } catch (err) {\n          console.error('Error setting up dialog event listener:', err);\n        }\n      });\n    }\n    \n    const submitNewDocument = async () => {\n      if (documentCreateType.value === 'blank') {\n        if (!blankFormRef.value) {\n          console.warn('表单引用不存在');\n          return;\n        }\n        \n        try {\n          const valid = await blankFormRef.value.validate()\n            .catch(err => {\n              console.error('表单验证失败:', err);\n              return false;\n            });\n          \n          if (valid) {\n            createLoading.value = true;\n            try {\n              console.log('开始创建文档:', {\n                title: newDocumentForm.value.title,\n                type: newDocumentForm.value.type || '通用'\n              });\n              \n              const response = await createDocument({ \n                title: newDocumentForm.value.title,\n                type: newDocumentForm.value.type || '通用',\n                content: ''\n              });\n              \n              console.log('创建文档响应数据：', JSON.stringify(response));\n              \n              // 关闭对话框\n              newDocumentDialogVisible.value = false;\n              ElMessage.success('文档创建成功');\n              \n              // 解析返回的文档ID\n              let docId = null;\n              if (response && response.data) {\n                if (response.data.id) {\n                  docId = response.data.id;\n                } else if (Array.isArray(response.data) && response.data.length > 0) {\n                  docId = response.data[0].id;\n                } else if (response.data.results && Array.isArray(response.data.results) && response.data.results.length > 0) {\n                  docId = response.data.results[0].id;\n                }\n              }\n              \n              // 等待对话框关闭完成后再执行跳转，避免DOM错误\n              setTimeout(() => {\n                if (docId) {\n                  console.log(`准备跳转到文档详情页，ID: ${docId}`);\n                  \n                  // 先刷新文档列表，确保数据是最新的\n                  fetchDocuments();\n                  fetchRecentDocuments();\n                  \n                  // 然后再执行导航\n                  setTimeout(() => {\n                    router.push({\n                      name: 'SmartDocDetail',\n                      params: { id: docId }\n                    }).catch(err => {\n                      console.error('路由导航失败:', err);\n                      router.push(`/smartdoc/${docId}`).catch(navErr => {\n                        console.error('路径导航也失败:', navErr);\n                      });\n                    });\n                  }, 300);\n                } else {\n                  console.warn('创建文档成功，但返回的数据格式不正确', response);\n                  // 刷新文档列表\n                  fetchDocuments();\n                  fetchRecentDocuments();\n                }\n              }, 100);\n            } catch (error) {\n              console.error('创建文档失败', error);\n              ElMessage.error('创建文档失败');\n            } finally {\n              createLoading.value = false;\n            }\n          }\n        } catch (error) {\n          console.error('提交表单时发生错误:', error);\n          ElMessage.error('表单提交失败');\n          createLoading.value = false;\n        }\n      } else if (documentCreateType.value === 'ai') {\n        if (!aiFormRef.value) {\n          console.warn('AI表单引用不存在');\n          return;\n        }\n        \n        try {\n          const valid = await aiFormRef.value.validate()\n            .catch(err => {\n              console.error('AI表单验证失败:', err);\n              return false;\n            });\n          \n          if (valid) {\n            createLoading.value = true;\n            try {\n              // 调用AI生成文档API\n              const categoryId = searchCategory.value !== 'all' ? searchCategory.value : null;\n              const response = await aiGenerateDocument({\n                title: aiDocumentForm.value.title,\n                requirement: aiDocumentForm.value.requirements,\n                category_id: categoryId,\n                doc_type: 'AI'\n              });\n              console.log('AI生成文档响应数据：', response);\n              // 适配markdown为quill delta\n              if (response && response.data && response.data.content) {\n                try {\n                  const quillDelta = markdownToDelta(response.data.content);\n                  // 这里可以将quillDelta保存到本地缓存、传递到详情页、或直接赋值到编辑器\n                  // 例如：localStorage.setItem(`doc_quill_delta_${response.data.id}`, JSON.stringify(quillDelta));\n                } catch (err) {\n                  console.warn('markdown转quill delta失败', err);\n                }\n              }\n              newDocumentDialogVisible.value = false;\n              ElMessage.success('AI生成文档成功');\n              let docId = null;\n              if (response && response.data && response.data.id) {\n                docId = response.data.id;\n              }\n              setTimeout(() => {\n                if (docId) {\n                  fetchDocuments();\n                  fetchRecentDocuments();\n                  setTimeout(() => {\n                    router.push({\n                      name: 'SmartDocDetail',\n                      params: { id: docId }\n                    }).catch(err => {\n                      console.error('路由导航失败:', err);\n                      router.push(`/smartdoc/${docId}`).catch(navErr => {\n                        console.error('路径导航也失败:', navErr);\n                      });\n                    });\n                  }, 300);\n                } else {\n                  fetchDocuments();\n                  fetchRecentDocuments();\n                }\n              }, 100);\n            } catch (error) {\n              console.error('AI生成文档失败', error);\n              ElMessage.error('AI生成文档失败');\n            } finally {\n              createLoading.value = false;\n            }\n          }\n        } catch (error) {\n          console.error('提交AI表单时发生错误:', error);\n          ElMessage.error('表单提交失败');\n          createLoading.value = false;\n        }\n      }\n    }\n    \n    const openDocument = (doc) => {\n      router.push({ name: 'SmartDocDetail', params: { id: doc.id } })\n    }\n    \n    const renameDocument = (doc) => {\n      ElMessageBox.prompt('请输入新文档名称', '重命名文档', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        inputValue: doc.title,\n        inputValidator: (value) => {\n          if (!value) {\n            return '文档名称不能为空'\n          }\n          return true\n        }\n      }).then(({ value }) => {\n        // 此处应该调用更新文档API\n        ElMessage.info(`重命名文档为: ${value}`)\n      }).catch(() => {})\n    }\n    \n    const duplicateDocument = (doc) => {\n      ElMessage.info(`复制文档: ${doc.title}`)\n    }\n    \n    const shareDocument = (doc) => {\n      selectedDocument.value = doc\n      // 在实际项目中，这里应该从API获取可用用户列表\n      availableUsers.value = [\n        { id: 1, username: '张三' },\n        { id: 2, username: '李四' },\n        { id: 3, username: '王五' }\n      ]\n      selectedUsers.value = []\n      shareDialogVisible.value = true\n    }\n    \n    const confirmShare = async () => {\n      if (!selectedDocument.value || selectedUsers.value.length === 0) {\n        ElMessage.warning('请选择至少一个用户')\n        return\n      }\n      \n      shareLoading.value = true\n      try {\n        await apiShareDocument(selectedDocument.value.id, selectedUsers.value)\n        ElMessage.success('文档分享成功')\n        shareDialogVisible.value = false\n        fetchSharedDocuments()\n      } catch (error) {\n        console.error('分享文档失败', error)\n        ElMessage.error('分享文档失败')\n      } finally {\n        shareLoading.value = false\n      }\n    }\n    \n    const deleteDocument = (doc) => {\n      selectedDocument.value = doc\n      deleteDialogVisible.value = true\n    }\n    \n    const confirmDelete = async () => {\n      if (!selectedDocument.value) return\n      \n      deleteLoading.value = true\n      try {\n        // 记录要删除的文档ID和类别\n        const deletedDocId = selectedDocument.value.id;\n        const deletedDocCategoryId = selectedDocument.value.category?.id;\n        \n        // 先关闭对话框，提高用户体验\n        deleteDialogVisible.value = false;\n        \n        // 执行删除操作\n        await apiDeleteDocument(deletedDocId)\n        ElMessage.success('文档删除成功')\n        \n        // 强制清除选中的文档\n        selectedDocument.value = null;\n        \n        // 清除可能的缓存数据\n        if (window.localStorage) {\n          try {\n            // 移除可能存在的相关缓存\n            localStorage.removeItem(`doc_cache_${deletedDocId}`);\n            localStorage.removeItem(`recent_docs_cache`);\n            localStorage.removeItem(`doc_list_cache`);\n          } catch (e) {\n            console.error('清除本地缓存失败:', e);\n          }\n        }\n        \n        // 更新刷新触发器\n        refreshTrigger.value = Date.now();\n        \n        // 使用新数组替换原数组，确保Vue能检测到变化 \n        documents.value = [...documents.value.filter(doc => doc.id !== deletedDocId)];\n        recentDocuments.value = [...recentDocuments.value.filter(doc => doc.id !== deletedDocId)];\n        sharedDocuments.value = [...sharedDocuments.value.filter(doc => doc.id !== deletedDocId)];\n        \n        // 强制更新视图\n        await forceUpdate();\n        \n        // 更新分类中的文档计数\n        if (deletedDocCategoryId) {\n          const category = documentCategories.value.find(c => c.id === deletedDocCategoryId);\n          if (category && category.document_count > 0) {\n            category.document_count--;\n          }\n        }\n        \n        // 等待DOM更新\n        await nextTick();\n        \n        // 重新导航到文档首页，确保状态全部刷新\n        if (router.currentRoute.value.name === 'SmartDocDetail') {\n          console.log('从详情页删除文档，重新导航到文档首页');\n          \n          // 先强制刷新数据，确保导航后数据是最新的\n          await reloadAllData();\n          \n          // 使用replace模式跳转，不留下历史记录，并添加强制刷新参数\n          router.replace({ \n            name: 'SmartDoc',\n            query: { _refresh: Date.now() } // 添加时间戳参数防止缓存\n          });\n        } else {\n          // 如果已经在文档首页，立即重载数据并强制刷新页面\n          await refreshData();\n        }\n      } catch (error) {\n        console.error('删除文档失败', error);\n        ElMessage.error('删除文档失败');\n        // 如果删除失败，关闭对话框\n        deleteDialogVisible.value = false;\n      } finally {\n        deleteLoading.value = false;\n      }\n    }\n    \n    const viewAllDocuments = (type) => {\n      if (type === 'recent') {\n        // 跳转到所有文档页面并显示最近编辑的文档\n        router.push({ name: 'SmartDocList', query: { sort: 'recent' } })\n      }\n    }\n    \n    const selectCategory = (category) => {\n      console.log('选择分类:', category);\n      \n      // 如果选择当前已激活的分类，不做操作\n      let categoryId;\n      if (typeof category === 'string') {\n        categoryId = category;\n      } else if (typeof category === 'object' && category !== null) {\n        categoryId = category.id.toString();\n      }\n      \n      // 如果点击当前已选中的分类，则重置为\"全部\"\n      if (searchCategory.value === categoryId && categoryId !== 'all') {\n        searchCategory.value = 'all';\n      } else {\n        searchCategory.value = categoryId;\n      }\n      \n      // 添加动画效果\n      documents.value = [];\n      createLoading.value = true;\n      \n      // 延迟获取，实现过渡效果\n      setTimeout(async () => {\n        await fetchDocuments();\n        createLoading.value = false;\n        \n        // 删除自动滚动逻辑，避免页面自动跳转\n        \n        // 触发一个简单的动画效果，突出显示已筛选的文档\n        const docCards = document.querySelectorAll('.doc-card');\n        if (docCards && docCards.length > 0) {\n          docCards.forEach((card, index) => {\n            if (card) {\n              card.style.animationDelay = `${index * 50}ms`;\n              card.classList.remove('fadeIn');\n              setTimeout(() => {\n                if (card) {\n                  card.classList.add('fadeIn');\n                }\n              }, 10);\n            }\n          });\n        }\n      }, 300);\n    };\n\n    // 获取选中分类的颜色\n    const getSelectedCategoryColor = () => {\n      if (searchCategory.value === 'all') return '#409EFF';\n      const selectedCategory = documentCategories.value.find(c => c.id.toString() === searchCategory.value);\n      return selectedCategory?.color || '#67C23A';\n    };\n\n    // 获取选中分类的名称\n    const getSelectedCategoryName = () => {\n      if (searchCategory.value === 'all') return '全部文档';\n      const selectedCategory = documentCategories.value.find(c => c.id.toString() === searchCategory.value);\n      return selectedCategory?.name || '未知分类';\n    };\n    \n    const manageCategories = () => {\n      categoryDialogVisible.value = true\n      resetCategoryForm()\n    }\n    \n    const editCategory = (category) => {\n      editingCategory.value = { ...category }\n    }\n    \n    const resetCategoryForm = () => {\n      editingCategory.value = {\n        name: '',\n        color: '#409EFF',\n        description: ''\n      }\n      if (categoryFormRef.value) {\n        categoryFormRef.value.resetFields()\n      }\n    }\n    \n    const submitCategory = async () => {\n      if (!categoryFormRef.value) return\n      \n      await categoryFormRef.value.validate(async (valid) => {\n        if (valid) {\n          categoryLoading.value = true\n          try {\n            const categoryData = {\n              name: editingCategory.value.name,\n              color: editingCategory.value.color,\n              description: editingCategory.value.description || ''\n            }\n            \n            if (editingCategory.value.id) {\n              // 更新分类\n              await updateDocumentCategory(editingCategory.value.id, categoryData)\n              ElMessage.success('分类更新成功')\n            } else {\n              // 创建分类\n              await createDocumentCategory(categoryData)\n              ElMessage.success('分类创建成功')\n            }\n            \n            // 重新获取分类列表\n            fetchDocumentCategories()\n            resetCategoryForm()\n          } catch (error) {\n            console.error('保存分类失败:', error)\n            ElMessage.error('保存分类失败')\n          } finally {\n            categoryLoading.value = false\n          }\n        }\n      })\n    }\n    \n    const deleteCategory = (category) => {\n      if (category.document_count > 0) {\n        ElMessage.warning('该分类下有文档，无法删除')\n        return\n      }\n      \n      ElMessageBox.confirm(\n        `确定要删除分类\"${category.name}\"吗？`,\n        '删除分类',\n        {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }\n      ).then(async () => {\n        try {\n          await deleteDocumentCategory(category.id)\n          ElMessage.success('分类删除成功')\n          fetchDocumentCategories()\n        } catch (error) {\n          console.error('删除分类失败:', error)\n          ElMessage.error('删除分类失败')\n        }\n      }).catch(() => {})\n    }\n    \n    const formatDate = (dateString) => {\n      const date = new Date(dateString)\n      const now = new Date()\n      \n      // 同一天显示时间\n      if (date.toDateString() === now.toDateString()) {\n        return date.toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' })\n      }\n      \n      // 昨天\n      const yesterday = new Date(now)\n      yesterday.setDate(now.getDate() - 1)\n      if (date.toDateString() === yesterday.toDateString()) {\n        return '昨天'\n      }\n      \n      // 一周内显示星期\n      const weekDays = ['周日', '周一', '周二', '周三', '周四', '周五', '周六']\n      const diffDays = Math.round((now - date) / (1000 * 60 * 60 * 24))\n      if (diffDays < 7) {\n        return weekDays[date.getDay()]\n      }\n      \n      // 其他情况显示日期\n      return date.toLocaleDateString('zh-CN', { month: 'numeric', day: 'numeric' })\n    }\n    \n    const resetCategoryFilter = () => {\n      searchCategory.value = 'all';\n      fetchDocuments();\n    }\n    \n    // 添加页面激活钩子，确保从其他页面返回时重新获取数据\n    onActivated(() => {\n      console.log('SmartDoc组件被激活，重新获取数据');\n      reloadAllData();\n    });\n\n    // 页面激活后重新加载所有数据的函数\n    const reloadAllData = async () => {\n      try {\n        console.log('重新加载所有文档数据...');\n        createLoading.value = true;\n        await Promise.all([\n          fetchDocuments(true),\n          fetchRecentDocuments(true),\n          fetchSharedDocuments(),\n          fetchDocumentCategories()\n        ]);\n        console.log('数据重新加载完成');\n        await forceUpdate();\n      } catch (error) {\n        console.error('数据重新加载失败:', error);\n      } finally {\n        createLoading.value = false;\n      }\n    };\n\n    // 提供重载函数给子组件或父组件使用\n    provide('reloadDocuments', reloadAllData);\n    \n    // 监听路由变化，强制刷新数据\n    watch(() => route.query._refresh, (newVal) => {\n      if (newVal) {\n        console.log('检测到路由刷新参数:', newVal);\n        refreshTrigger.value = Date.now();\n        reloadAllData();\n      }\n    });\n\n    // 监听路由参数，处理不同情况\n    watch(() => route.path, (newPath, oldPath) => {\n      console.log('路由变化:', oldPath, '->', newPath);\n      if (newPath === '/smartdoc' && oldPath && oldPath.startsWith('/smartdoc/')) {\n        // 从文档详情页返回文档列表页，强制刷新\n        console.log('从详情页返回列表页，强制刷新数据');\n        refreshTrigger.value = Date.now();\n        reloadAllData();\n      }\n    });\n\n    // 手动强制刷新方法\n    const refreshData = async () => {\n      refreshTrigger.value = Date.now();\n      await reloadAllData();\n      \n      // 强制刷新页面组件\n      if (proxy && proxy.$forceUpdate) {\n        proxy.$forceUpdate();\n      }\n    };\n\n    // 生命周期钩子\n    onMounted(() => {\n      console.log('SmartDoc组件mounted，加载数据');\n      reloadAllData(); // 使用统一的数据加载函数\n    })\n    \n    return {\n      documents,\n      recentDocuments,\n      sharedDocuments,\n      documentCategories,\n      searchQuery,\n      searchCategory,\n      debouncedSearch,\n      totalDocuments,\n      recentEditCount,\n      newDocumentDialogVisible,\n      shareDialogVisible,\n      deleteDialogVisible,\n      documentCreateType,\n      newDocumentForm,\n      aiDocumentForm,\n      blankFormRules,\n      aiFormRules,\n      blankFormRef,\n      aiFormRef,\n      selectedDocument,\n      selectedUsers,\n      availableUsers,\n      createLoading,\n      shareLoading,\n      deleteLoading,\n      createNewDocument,\n      submitNewDocument,\n      openDocument,\n      renameDocument,\n      duplicateDocument,\n      shareDocument,\n      confirmShare,\n      deleteDocument,\n      confirmDelete,\n      viewAllDocuments,\n      formatDate,\n      categoryDialogVisible,\n      editingCategory,\n      categoryFormRef,\n      categoryLoading,\n      categoryFormRules,\n      editCategory,\n      resetCategoryForm,\n      submitCategory,\n      deleteCategory,\n      resetCategoryFilter,\n      selectCategory,\n      getSelectedCategoryColor,\n      getSelectedCategoryName,\n      manageCategories,\n      reloadAllData, // 添加到返回值中，供模板使用\n      refreshData,    // 新增强制刷新方法\n      refreshTrigger  // 添加刷新触发器到返回值\n    }\n  }\n}\n</script>\n\n<style scoped>\n.smartdoc-home-container {\n  padding: 24px;\n  max-width: 1280px;\n  margin: 0 auto;\n}\n\n/* 页面标题和操作区 */\n.page-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 24px;\n}\n\n.page-title {\n  font-size: 24px;\n  font-weight: 600;\n  margin: 0;\n  color: #303133;\n}\n\n.page-description {\n  margin: 4px 0 0 0;\n  color: #606266;\n  font-size: 14px;\n}\n\n.right-section {\n  display: flex;\n  gap: 16px;\n  align-items: center;\n}\n\n.search-controls {\n  display: flex;\n  gap: 16px;\n  align-items: center;\n}\n\n.search-input {\n  width: 240px;\n}\n\n/* 统计卡片 */\n.stats-cards {\n  display: flex;\n  gap: 16px;\n  margin-bottom: 24px;\n}\n\n.stat-card {\n  flex: 1;\n  min-width: 0;\n}\n\n.stat-content {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n}\n\n.stat-icon {\n  width: 48px;\n  height: 48px;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 24px;\n  color: white;\n}\n\n.doc-icon {\n  background-color: #409EFF;\n}\n\n.edit-icon {\n  background-color: #67C23A;\n}\n\n.share-icon {\n  background-color: #E6A23C;\n}\n\n.stat-info {\n  display: flex;\n  flex-direction: column;\n}\n\n.stat-value {\n  font-size: 24px;\n  font-weight: 600;\n  color: #303133;\n}\n\n.stat-label {\n  font-size: 14px;\n  color: #909399;\n}\n\n/* 区域通用样式 */\n.section {\n  margin-bottom: 32px;\n}\n\n/* 分类区域特殊样式 */\n.category-section {\n  margin-bottom: 16px;\n}\n\n.section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n}\n\n.section-header h3 {\n  font-size: 18px;\n  font-weight: 600;\n  margin: 0;\n  color: #303133;\n}\n\n.section-actions {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.filter-tag {\n  background-color: #f0f2f5;\n  padding: 4px 8px;\n  border-radius: 4px;\n  font-size: 13px;\n  color: #606266;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n/* 文档卡片 */\n.document-cards {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n  gap: 20px;\n  margin-bottom: 30px;\n}\n\n.doc-card {\n  height: 240px;\n  display: flex;\n  flex-direction: column;\n  cursor: pointer;\n  transition: all 0.3s;\n  position: relative;\n  overflow: hidden;\n}\n\n.doc-card:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n\n.doc-card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 12px;\n}\n\n.doc-info {\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  gap: 8px;\n}\n\n.doc-type-tag {\n  font-size: 12px;\n  color: #606266;\n  background-color: #f5f7fa;\n  padding: 2px 8px;\n  border-radius: 4px;\n  white-space: nowrap;\n}\n\n.doc-category-tag {\n  font-size: 12px;\n  color: white;\n  padding: 2px 8px;\n  border-radius: 4px;\n  white-space: nowrap;\n  display: inline-flex;\n  align-items: center;\n}\n\n.doc-title {\n  font-size: 16px;\n  font-weight: 500;\n  margin: 0 0 10px 0;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  color: #303133;\n}\n\n.doc-preview {\n  flex: 1;\n  font-size: 13px;\n  color: #606266;\n  overflow: hidden;\n  display: -webkit-box;\n  -webkit-line-clamp: 4;\n  -webkit-box-orient: vertical;\n  line-height: 1.5;\n  margin-bottom: 10px;\n}\n\n.doc-footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-top: 8px;\n  border-top: 1px solid #ebeef5;\n  margin-top: auto;\n}\n\n.doc-time {\n  font-size: 12px;\n  color: #909399;\n}\n\n.doc-actions {\n  display: flex;\n  gap: 4px;\n}\n\n.new-doc-card {\n  border: 1px dashed #dcdfe6;\n  background-color: #f8f9fb;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s;\n}\n\n.new-doc-card:hover {\n  border-color: #409EFF;\n  color: #409EFF;\n  background-color: #ecf5ff;\n}\n\n.new-doc-content {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  color: #909399;\n}\n\n.new-doc-content .el-icon {\n  font-size: 32px;\n}\n\n/* 分类卡片 */\n.category-cards {\n  display: flex;\n  gap: 16px;\n  overflow-x: auto;\n  padding-bottom: 8px;\n}\n\n.category-card {\n  min-width: 180px;\n  height: 80px;\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  transition: all 0.3s;\n  border-radius: 8px;\n  padding: 12px 16px;\n  border: 2px solid transparent;\n  position: relative;\n  overflow: hidden;\n  background-color: #f5f7fa;\n}\n\n.category-card:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.08);\n  background-color: #f0f5ff;\n}\n\n.category-active {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  border-color: #409EFF;\n  background-color: #ecf5ff;\n}\n\n.category-selected-indicator {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 3px;\n  background-color: #409EFF;\n  transition: all 0.3s;\n}\n\n.category-icon {\n  width: 36px;\n  height: 36px;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 18px;\n  color: white;\n  margin-right: 12px;\n  transition: all 0.3s;\n}\n\n.category-active .category-icon {\n  transform: scale(1.1);\n}\n\n.category-info {\n  display: flex;\n  flex-direction: column;\n}\n\n.category-info h4 {\n  margin: 0 0 4px 0;\n  font-size: 15px;\n  font-weight: 500;\n  color: #303133;\n  transition: all 0.3s;\n}\n\n.category-active .category-info h4 {\n  color: #409EFF;\n  font-weight: 600;\n}\n\n.category-count {\n  font-size: 12px;\n  color: #909399;\n}\n\n.mt-4 {\n  margin-top: 16px;\n}\n\n.form-tip {\n  font-size: 12px;\n  color: #909399;\n  margin-top: 4px;\n}\n\n.category-management {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.category-list {\n  margin-bottom: 20px;\n}\n\n.category-form {\n  margin-top: 20px;\n}\n\n.color-preview {\n  display: inline-block;\n  width: 20px;\n  height: 20px;\n  border-radius: 4px;\n  margin-right: 8px;\n  vertical-align: middle;\n}\n\n.color-value {\n  margin-left: 12px;\n  color: #606266;\n}\n\n.category-select {\n  width: 200px;\n}\n\n.doc-menu {\n  color: #909399;\n  cursor: pointer;\n}\n\n.filter-controls {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.empty-state {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 200px;\n}\n\n.loading-state {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 200px;\n}\n\n/* 筛选状态栏样式 */\n.filter-status-bar {\n  background-color: #ecf5ff;\n  padding: 12px 20px;\n  margin-bottom: 20px;\n  border-radius: 8px;\n  transition: all 0.3s ease;\n  animation: slideDown 0.3s ease-in-out;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);\n  border-left: 4px solid #409EFF;\n  position: relative;\n  overflow: hidden;\n}\n\n.filter-status-bar::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(135deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.3) 50%, rgba(255,255,255,0) 100%);\n  animation: shimmer 2s infinite;\n}\n\n.filter-bar-content {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: relative;\n  z-index: 1;\n}\n\n.filter-title {\n  font-size: 14px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.filter-category {\n  padding: 4px 12px;\n  border-radius: 16px;\n  color: white;\n  font-weight: 500;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.filter-actions {\n  display: flex;\n  align-items: center;\n}\n\n/* 添加文档卡片的动画效果 */\n.document-cards {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n  gap: 20px;\n  margin-bottom: 30px;\n  transition: all 0.3s;\n}\n\n.doc-card {\n  animation: fadeIn 0.4s ease-in-out;\n}\n\n.fadeIn {\n  animation: fadeIn 0.4s ease-in-out;\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes slideDown {\n  from {\n    opacity: 0;\n    transform: translateY(-10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes shimmer {\n  0% {\n    transform: translateX(-100%);\n  }\n  100% {\n    transform: translateX(100%);\n  }\n}\n</style> "],"mappings":"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","ignoreList":[]}]}