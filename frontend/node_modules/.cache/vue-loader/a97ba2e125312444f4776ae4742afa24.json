{"remainingRequest":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\smartdoc\\Index.vue?vue&type=style&index=0&id=3005a10c&lang=css","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\smartdoc\\Index.vue","mtime":1747724951883},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\css-loader\\dist\\cjs.js","mtime":1746431217000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\postcss-loader\\src\\index.js","mtime":1746431217000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1746431218000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci8qIOa3u+WKoOWFqOWxgOagt+W8j+imhuebliAqLwpib2R5LnNtYXJ0LWRvYy1hY3RpdmUgewogIG92ZXJmbG93OiBhdXRvICFpbXBvcnRhbnQ7CiAgaGVpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7CiAgcG9zaXRpb246IHJlbGF0aXZlICFpbXBvcnRhbnQ7Cn0KCmJvZHkuc21hcnQtZG9jLWFjdGl2ZSAubmF2YmFyIHsKICBwb3NpdGlvbjogZml4ZWQgIWltcG9ydGFudDsKICB0b3A6IDAgIWltcG9ydGFudDsKICBsZWZ0OiAwICFpbXBvcnRhbnQ7CiAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDsKICB6LWluZGV4OiAxMDAwMCAhaW1wb3J0YW50OwogIGRpc3BsYXk6IGZsZXggIWltcG9ydGFudDsKfQoKYm9keS5zbWFydC1kb2MtYWN0aXZlIC5tYWluLWNvbnRhaW5lciB7CiAgcGFkZGluZy10b3A6IDYwcHggIWltcG9ydGFudDsKfQo="},{"version":3,"sources":["C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\views\\smartdoc\\Index.vue"],"names":[],"mappings":";AAoyBA,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;AACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACpB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACzB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACvB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC/B;;AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EAC5B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAC1B,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACjB,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAClB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACtB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACzB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC1B;;AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACpC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC9B","file":"C:/Users/18083/Desktop/CCIT/office/smart-office/frontend/src/views/smartdoc/Index.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"smart-doc-container\">\n    <!-- 文档列表侧边栏 -->\n    <div class=\"sidebar\" :class=\"{ 'collapsed': isDocListCollapsed }\">\n      <!-- 侧边栏头部 -->\n      <div class=\"sidebar-header\">\n        <h4 v-if=\"!isDocListCollapsed\">我的文档</h4>\n        <div class=\"toggle-btn\" @click=\"toggleDocList\">\n          <el-icon><ArrowLeft v-if=\"!isDocListCollapsed\" /><ArrowRight v-else /></el-icon>\n        </div>\n      </div>\n\n      <!-- 展开状态的文档列表 -->\n      <div class=\"sidebar-content\" v-show=\"!isDocListCollapsed\">\n        <!-- 搜索和筛选区域 -->\n        <div class=\"search-area\">\n          <el-input\n            placeholder=\"搜索文档...\"\n            v-model=\"searchQuery\"\n            clearable\n          >\n            <template #prefix>\n              <el-icon><ElIconSearch /></el-icon>\n            </template>\n          </el-input>\n          <div class=\"filter-options\">\n            <el-input v-model=\"docTypeFilter\" placeholder=\"文档类型\" size=\"small\" clearable />\n            <el-select v-model=\"sortOption\" placeholder=\"排序\" size=\"small\">\n              <el-option label=\"最近更新\" value=\"update\" />\n              <el-option label=\"最近创建\" value=\"create\" />\n              <el-option label=\"名称升序\" value=\"name-asc\" />\n            </el-select>\n          </div>\n        </div>\n\n        <!-- 文档列表区域 -->\n        <el-scrollbar class=\"document-list-scrollbar\">\n          <div class=\"document-list\">\n            <div \n              v-for=\"doc in filteredDocuments\" \n              :key=\"doc.id\" \n              class=\"doc-item\"\n              :class=\"{ 'active': currentDoc?.id === doc.id }\"\n              @click=\"selectDocument(doc)\"\n            >\n              <div class=\"doc-icon\">\n                <el-icon><Document /></el-icon>\n              </div>\n              <div class=\"doc-info\">\n                <h5>{{ doc.title }}</h5>\n                <div class=\"doc-meta\">\n                  <span>{{ doc.type }}</span>\n                  <span>{{ formatDate(doc.update_time) }}</span>\n                </div>\n              </div>\n            </div>\n            \n            <div v-if=\"filteredDocuments.length === 0\" class=\"empty-state\">\n              <el-empty description=\"暂无文档\" />\n            </div>\n          </div>\n        </el-scrollbar>\n\n        <!-- 创建按钮区域 -->\n        <div class=\"action-buttons\">\n          <el-button type=\"primary\" @click=\"openNewDocumentDialog\">\n            <el-icon><Plus /></el-icon> 新建文档\n          </el-button>\n        </div>\n      </div>\n\n      <!-- 折叠状态的文档图标列表 -->\n      <div class=\"collapsed-sidebar\" v-if=\"isDocListCollapsed\">\n        <el-tooltip content=\"新建文档\" placement=\"right\">\n          <div class=\"icon-btn create-btn\" @click=\"openNewDocumentDialog\">\n            <el-icon><Plus /></el-icon>\n          </div>\n        </el-tooltip>\n        \n        <div class=\"recent-docs\">\n          <el-tooltip \n            v-for=\"doc in filteredDocuments.slice(0, 5)\" \n            :key=\"doc.id\" \n            :content=\"doc.title\"\n            placement=\"right\"\n          >\n            <div \n              class=\"icon-btn doc-btn\"\n              :class=\"{ 'active': currentDoc?.id === doc.id }\"\n              @click=\"selectDocument(doc)\"\n            >\n              <el-icon><Document /></el-icon>\n            </div>\n          </el-tooltip>\n        </div>\n      </div>\n    </div>\n\n    <!-- 主内容区域 -->\n    <div class=\"main-content\">\n      <!-- 文档内容显示区域 -->\n      <div class=\"document-content\">\n        <template v-if=\"currentDoc\">\n          <!-- 文档标题和操作栏 -->\n          <div class=\"document-header\">\n            <div class=\"doc-info-area\">\n              <div class=\"doc-title\">\n                <el-input \n                  v-model=\"currentDoc.title\"\n                  placeholder=\"文档标题\"\n                  size=\"large\"\n                />\n              </div>\n              <div class=\"doc-type-selector\">\n                <el-input \n                  v-model=\"currentDoc.type\" \n                  placeholder=\"输入文档类型\"\n                  size=\"default\"\n                />\n              </div>\n            </div>\n            <div class=\"doc-actions\">\n              <el-tooltip content=\"保存文档\" placement=\"top\">\n                <el-button circle :loading=\"saveLoading\" @click=\"saveDocument\"><el-icon><CircleCheck /></el-icon></el-button>\n              </el-tooltip>\n              <el-tooltip content=\"分享文档\" placement=\"top\">\n                <el-button circle><el-icon><ShareIcon /></el-icon></el-button>\n              </el-tooltip>\n              <el-tooltip content=\"导出文档\" placement=\"top\">\n                <el-button circle><el-icon><Download /></el-icon></el-button>\n              </el-tooltip>\n              <el-tooltip content=\"更多操作\" placement=\"top\">\n                <el-dropdown trigger=\"click\">\n                  <el-button circle><el-icon><More /></el-icon></el-button>\n                  <template #dropdown>\n                    <el-dropdown-menu>\n                      <el-dropdown-item>打印文档</el-dropdown-item>\n                      <el-dropdown-item>添加协作者</el-dropdown-item>\n                      <el-dropdown-item>查看历史版本</el-dropdown-item>\n                      <el-dropdown-item divided type=\"danger\" @click=\"deleteCurrentDocument\">删除文档</el-dropdown-item>\n                    </el-dropdown-menu>\n                  </template>\n                </el-dropdown>\n              </el-tooltip>\n            </div>\n          </div>\n          \n          <!-- 编辑器区域 -->\n          <div class=\"editor-area\">\n            <QuillEditor\n              v-model:content=\"currentDoc.content\"\n              :options=\"editorOptions\"\n              contentType=\"text\"\n              theme=\"snow\"\n              class=\"quill-editor\"\n              placeholder=\"\"\n            />\n          </div>\n        </template>\n        \n        <!-- 无文档时的提示 -->\n        <div v-else class=\"empty-doc-state\">\n          <el-empty description=\"请选择或创建一个文档\">\n            <el-button type=\"primary\" @click=\"openNewDocumentDialog\">新建文档</el-button>\n          </el-empty>\n        </div>\n      </div>\n    </div>\n    \n    <!-- 智能助手面板 -->\n    <div class=\"assistant-panel\" :class=\"{ 'collapsed': isAssistantCollapsed }\">\n      <div class=\"assistant-header\">\n        <h5 v-if=\"!isAssistantCollapsed\">智能助手</h5>\n        <div class=\"toggle-btn\" @click=\"toggleAssistant\">\n          <el-icon><ArrowRight v-if=\"!isAssistantCollapsed\" /><ArrowLeft v-else /></el-icon>\n        </div>\n      </div>\n      \n      <div class=\"assistant-body\" v-show=\"!isAssistantCollapsed\">\n        <el-tabs v-model=\"activeAssistantTab\">\n          <!-- 上下文感知标签页 -->\n          <el-tab-pane label=\"上下文感知\" name=\"context\">\n            <div class=\"assistant-content\">\n              <h6>相关文档</h6>\n              <div class=\"related-docs\">\n                <div v-for=\"(doc, _index) in relatedDocuments\" :key=\"_index\" class=\"related-doc-item\">\n                  <div class=\"doc-title\">{{ doc.title }}</div>\n                  <div class=\"doc-source\">来源: {{ doc.source }}</div>\n                </div>\n              </div>\n              \n              <h6>建议操作</h6>\n              <div class=\"suggested-actions\">\n                <el-button size=\"small\" @click=\"applySmartAction('整合相关邮件内容')\">\n                  整合相关邮件内容\n                </el-button>\n                <el-button size=\"small\" @click=\"applySmartAction('引用会议记录')\">\n                  引用会议记录\n                </el-button>\n                <el-button size=\"small\" @click=\"applySmartAction('添加项目数据分析')\">\n                  添加项目数据分析\n                </el-button>\n              </div>\n            </div>\n          </el-tab-pane>\n          \n          <!-- 专业知识标签页 -->\n          <el-tab-pane label=\"专业知识\" name=\"knowledge\">\n            <div class=\"assistant-content\">\n              <div class=\"knowledge-items\">\n                <div v-for=\"(term, index) in professionalTerms\" :key=\"index\" class=\"knowledge-item\">\n                  <div class=\"term-header\" @click=\"term.expanded = !term.expanded\">\n                    <span>{{ term.term }}</span>\n                    <el-icon v-if=\"!term.expanded\"><ArrowDown /></el-icon>\n                    <el-icon v-else><ArrowUp /></el-icon>\n                  </div>\n                  <div v-if=\"term.expanded\" class=\"term-explanation\">\n                    {{ term.explanation }}\n                    <div class=\"more-link\">\n                      <a href=\"#\">查看更多</a>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </el-tab-pane>\n          \n          <!-- 决策树标签页 -->\n          <el-tab-pane label=\"决策树\" name=\"decision\">\n            <div class=\"assistant-content\">\n              <div class=\"decision-tree\">\n                <h6>根据当前文档内容，您可能需要：</h6>\n                <el-steps direction=\"vertical\" :active=\"1\" finish-status=\"success\">\n                  <el-step title=\"明确目标受众\" :description=\"'您的文档似乎面向技术团队，建议添加更多技术细节'\" />\n                  <el-step title=\"完善文档结构\" :description=\"'建议添加执行摘要和结论部分'\" />\n                  <el-step title=\"添加支持数据\" :description=\"'当前缺少数据支持，建议添加相关统计数据'\" />\n                </el-steps>\n                \n                <div class=\"decision-actions\">\n                  <el-button type=\"primary\" size=\"small\" @click=\"applyDecisionSuggestion\">\n                    应用此建议\n                  </el-button>\n                </div>\n              </div>\n            </div>\n          </el-tab-pane>\n          \n          <!-- 内容转译标签页 -->\n          <el-tab-pane label=\"内容转译\" name=\"translation\">\n            <div class=\"assistant-content\">\n              <div class=\"translation-options\">\n                <h6>将当前内容转译为：</h6>\n                <el-radio-group v-model=\"translationTarget\">\n                  <el-radio label=\"business\">面向管理层</el-radio>\n                  <el-radio label=\"technical\">技术详细版</el-radio>\n                  <el-radio label=\"simple\">简化版本</el-radio>\n                </el-radio-group>\n                \n                <div class=\"translation-preview\">\n                  <h6>预览：</h6>\n                  <div class=\"preview-content\">\n                    {{ getTranslationPreview() }}\n                  </div>\n                  <el-button type=\"primary\" size=\"small\" @click=\"applyTranslation\">\n                    应用此转译\n                  </el-button>\n                </div>\n              </div>\n            </div>\n          </el-tab-pane>\n        </el-tabs>\n      </div>\n    </div>\n  </div>\n\n  <!-- 新建文档对话框 -->\n  <el-dialog\n    v-model=\"newDocDialogVisible\"\n    title=\"快速创建文档\"\n    width=\"500px\"\n    destroy-on-close\n  >\n    <el-form :model=\"newDocForm\" label-position=\"top\">\n      <el-form-item label=\"文档标题\">\n        <el-input v-model=\"newDocForm.title\" placeholder=\"请输入文档标题（不填则自动生成）\" />\n      </el-form-item>\n      <el-form-item label=\"简短描述\">\n        <el-input\n          v-model=\"newDocForm.description\"\n          type=\"textarea\"\n          :rows=\"4\"\n          placeholder=\"请输入文档简短描述，帮助智能系统理解文档类型\"\n        />\n      </el-form-item>\n      <el-form-item label=\"文档类型\">\n        <el-input \n          v-model=\"newDocForm.type\" \n          placeholder=\"输入文档类型\"\n        />\n        <div class=\"predicted-type-box\" v-if=\"predictedDocType\">\n          <el-icon class=\"prediction-icon\"><ElIconSunny /></el-icon>\n          <div class=\"prediction-content\">\n            <div class=\"prediction-title\">智能预判：<span>{{ predictedDocType }}</span></div>\n            <div class=\"prediction-desc\">基于您输入的信息，智能系统认为这是一份{{ predictedDocType }}文档</div>\n          </div>\n        </div>\n      </el-form-item>\n    </el-form>\n    <template #footer>\n      <div class=\"dialog-footer\">\n        <el-button @click=\"newDocDialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"createNewDocumentWithPrediction\" :loading=\"isPredicting\">\n          创建文档\n        </el-button>\n      </div>\n    </template>\n  </el-dialog>\n</template>\n\n<script>\nimport { ref, computed, watch, onMounted, onBeforeUnmount } from 'vue'\nimport { ElMessage, ElMessageBox } from 'element-plus'\nimport { Document, Plus, CircleCheck, Download, More, ArrowDown, ArrowUp, Search as ElIconSearch, ArrowLeft, ArrowRight, Share as ShareIcon, Sunny as ElIconSunny } from '@element-plus/icons-vue'\nimport { QuillEditor } from '@vueup/vue-quill'\nimport '@vueup/vue-quill/dist/vue-quill.snow.css'\nimport { \n  getDocuments, getDocument, createDocument, updateDocument, \n  deleteDocument, getTerms\n} from '@/api/smartdoc'\n\nexport default {\n  name: 'SmartDoc',\n  components: {\n    Document, Plus, CircleCheck, Download, More, ArrowDown, ArrowUp, ElIconSearch, ArrowLeft, ArrowRight, ShareIcon, QuillEditor, ElIconSunny\n  },\n  setup() {\n    // 文档列表\n    const documents = ref([])\n    const loading = ref(false)\n    const saveLoading = ref(false)\n    \n    // 搜索和筛选\n    const searchQuery = ref('')\n    const docTypeFilter = ref('')\n    const sortOption = ref('update')\n    \n    // 当前选中的文档\n    const currentDoc = ref(null)\n\n    // 折叠状态\n    const isDocListCollapsed = ref(false)\n    const isAssistantCollapsed = ref(false)\n    \n    // Quill编辑器配置\n    const editorOptions = {\n      theme: 'snow',\n      modules: {\n        toolbar: [\n          ['bold', 'italic', 'underline', 'strike'],\n          ['blockquote', 'code-block'],\n          [{ 'header': 1 }, { 'header': 2 }],\n          [{ 'list': 'ordered' }, { 'list': 'bullet' }],\n          [{ 'script': 'sub' }, { 'script': 'super' }],\n          [{ 'indent': '-1' }, { 'indent': '+1' }],\n          [{ 'direction': 'rtl' }],\n          [{ 'size': ['small', false, 'large', 'huge'] }],\n          [{ 'header': [1, 2, 3, 4, 5, 6, false] }],\n          [{ 'color': [] }, { 'background': [] }],\n          [{ 'font': [] }],\n          [{ 'align': [] }],\n          ['clean']\n        ]\n      },\n      placeholder: ''\n    }\n    \n    // 筛选后的文档列表\n    const filteredDocuments = computed(() => {\n      if (!documents.value) return []\n      \n      let result = [...documents.value]\n      \n      // 应用搜索过滤\n      if (searchQuery.value) {\n        const query = searchQuery.value.toLowerCase()\n        result = result.filter(doc => \n          doc.title.toLowerCase().includes(query) || \n          (doc.content && doc.content.toLowerCase().includes(query))\n        )\n      }\n      \n      // 应用类型过滤\n      if (docTypeFilter.value) {\n        result = result.filter(doc => doc.type.toLowerCase().includes(docTypeFilter.value.toLowerCase()))\n      }\n      \n      // 应用排序\n      switch (sortOption.value) {\n        case 'update':\n          result.sort((a, b) => new Date(b.update_time) - new Date(a.update_time))\n          break\n        case 'create':\n          result.sort((a, b) => new Date(b.create_time) - new Date(a.create_time))\n          break\n        case 'name-asc':\n          result.sort((a, b) => a.title.localeCompare(b.title))\n          break\n      }\n      \n      return result\n    })\n    \n    // 相关文档推荐\n    const relatedDocuments = ref([\n      { title: '上季度工作总结', source: '邮件（李总 2023-12-05）' },\n      { title: '部门KPI考核标准', source: '知识库（人力资源部）' },\n      { title: '工作计划模板', source: '聊天记录（项目组 2023-12-08）' }\n    ])\n    \n    // 专业术语解释\n    const professionalTerms = ref([])\n    \n    // 智能助手标签页\n    const activeAssistantTab = ref('context')\n    \n    // 内容转译\n    const translationTarget = ref('business')\n    \n    // 新建文档对话框\n    const newDocDialogVisible = ref(false)\n    const newDocForm = ref({\n      title: '',\n      type: '',\n      description: '',\n      content: ''\n    })\n    const isPredicting = ref(false)\n    const predictedDocType = ref('')\n    \n    // 加载文档列表\n    const fetchDocuments = async () => {\n      loading.value = true\n      try {\n        const response = await getDocuments()\n        documents.value = response.data\n      } catch (error) {\n        console.error('加载文档列表失败:', error)\n        ElMessage.error('加载文档列表失败，请重试')\n      } finally {\n        loading.value = false\n      }\n    }\n    \n    // 加载专业术语\n    const fetchTerms = async () => {\n      try {\n        const response = await getTerms()\n        // 添加安全检查，确保response.data存在，如果不存在则使用空数组\n        const termsData = response.data || []\n        professionalTerms.value = termsData.map(term => ({\n          ...term,\n          expanded: false\n        }))\n      } catch (error) {\n        console.error('加载专业术语失败:', error)\n        // 初始化为空数组，避免后续操作出错\n        professionalTerms.value = []\n      }\n    }\n    \n    // 选择文档\n    const selectDocument = async (doc) => {\n      try {\n        // 如果文档已被修改但未保存，先询问是否保存\n        if (currentDoc.value && currentDoc.value._dirty) {\n          await confirmSave()\n        }\n        \n        // 加载完整文档信息\n        const response = await getDocument(doc.id)\n        currentDoc.value = response.data\n        currentDoc.value._dirty = false // 添加脏标记，用于跟踪是否需要保存\n      } catch (error) {\n        console.error('加载文档详情失败:', error)\n        ElMessage.error('加载文档详情失败，请重试')\n      }\n    }\n    \n    // 监听文档内容变化\n    watch(() => currentDoc.value?.content, (newVal, oldVal) => {\n      if (currentDoc.value && newVal !== oldVal) {\n        currentDoc.value._dirty = true\n      }\n    }, { deep: true })\n    \n    // 监听文档标题变化\n    watch(() => currentDoc.value?.title, (newVal, oldVal) => {\n      if (currentDoc.value && newVal !== oldVal) {\n        currentDoc.value._dirty = true\n      }\n    })\n    \n    // 监听文档类型变化\n    watch(() => currentDoc.value?.type, (newVal, oldVal) => {\n      if (currentDoc.value && newVal !== oldVal) {\n        currentDoc.value._dirty = true\n      }\n    })\n    \n    // 保存文档\n    const saveDocument = async () => {\n      if (!currentDoc.value) return\n      \n      saveLoading.value = true\n      try {\n        const { id, title, content, type, description } = currentDoc.value\n        await updateDocument(id, { title, content, type, description })\n        currentDoc.value._dirty = false\n        ElMessage.success('文档保存成功')\n        \n        // 更新文档列表中的对应文档\n        const index = documents.value.findIndex(doc => doc.id === id)\n        if (index !== -1) {\n          documents.value[index] = { ...documents.value[index], title, type }\n        }\n      } catch (error) {\n        console.error('保存文档失败:', error)\n        ElMessage.error('保存文档失败，请重试')\n      } finally {\n        saveLoading.value = false\n      }\n    }\n    \n    // 确认是否保存\n    const confirmSave = () => {\n      return new Promise((resolve, reject) => {\n        if (!currentDoc.value || !currentDoc.value._dirty) {\n          resolve()\n          return\n        }\n        \n        ElMessageBox.confirm(\n          '当前文档已修改，是否保存？',\n          '保存确认',\n          {\n            confirmButtonText: '保存',\n            cancelButtonText: '不保存',\n            type: 'warning'\n          }\n        ).then(() => {\n          saveDocument().then(resolve).catch(reject)\n        }).catch(() => {\n          // 用户选择不保存\n          resolve()\n        })\n      })\n    }\n    \n    // 删除文档\n    const deleteCurrentDocument = async () => {\n      if (!currentDoc.value) return\n      \n      try {\n        await ElMessageBox.confirm(\n          '确定要删除这篇文档吗？删除后将无法恢复。',\n          '删除确认',\n          {\n            confirmButtonText: '删除',\n            cancelButtonText: '取消',\n            type: 'warning'\n          }\n        )\n        \n        await deleteDocument(currentDoc.value.id)\n        \n        // 从文档列表中移除\n        documents.value = documents.value.filter(doc => doc.id !== currentDoc.value.id)\n        currentDoc.value = null\n        ElMessage.success('文档已删除')\n      } catch (error) {\n        if (error !== 'cancel') {\n          console.error('删除文档失败:', error)\n          ElMessage.error('删除文档失败，请重试')\n        }\n      }\n    }\n    \n    // 创建新文档\n    const openNewDocumentDialog = () => {\n      newDocForm.value = {\n        title: '',\n        type: '',\n        description: '',\n        content: ''\n      }\n      predictedDocType.value = ''\n      newDocDialogVisible.value = true\n    }\n    \n    // 智能预测文档类型\n    const predictDocumentType = async () => {\n      if (!newDocForm.value.description) return\n      \n      isPredicting.value = true\n      try {\n        // 这里可以调用AI接口来预测文档类型\n        // 暂时使用模拟数据\n        await new Promise(resolve => setTimeout(resolve, 1000))\n        const types = ['工作报告', '会议记录', '技术文档', '项目方案']\n        predictedDocType.value = types[Math.floor(Math.random() * types.length)]\n      } catch (error) {\n        console.error('预测文档类型失败:', error)\n      } finally {\n        isPredicting.value = false\n      }\n    }\n    \n    // 监听描述变化，自动预测文档类型\n    watch(() => newDocForm.value.description, (newVal) => {\n      if (newVal && newVal.length > 10) {\n        predictDocumentType()\n      }\n    })\n    \n    // 创建文档\n    const createNewDocumentWithPrediction = async () => {\n      try {\n        const title = newDocForm.value.title || '新建文档'\n        const type = newDocForm.value.type || predictedDocType.value || '通用类型'\n        \n        const response = await createDocument({\n          title,\n          type,\n          description: newDocForm.value.description,\n          content: getDocumentTemplate(type)\n        })\n        \n        // 添加到文档列表\n        documents.value.unshift(response.data)\n        \n        // 选择新创建的文档\n        selectDocument(response.data)\n        \n        newDocDialogVisible.value = false\n        ElMessage.success('文档创建成功')\n      } catch (error) {\n        console.error('创建文档失败:', error)\n        ElMessage.error('创建文档失败，请重试')\n      }\n    }\n    \n    // 根据文档类型获取模板内容\n    const getDocumentTemplate = (type) => {\n      let template = ''\n      \n      switch (type) {\n        case '工作报告':\n          template = '<h1>工作报告</h1><h2>工作内容</h2><p>请在此处填写工作内容...</p><h2>工作成果</h2><p>请在此处填写工作成果...</p><h2>后续计划</h2><p>请在此处填写后续工作计划...</p>'\n          break\n        case '会议记录':\n          template = '<h1>会议记录</h1><h2>会议信息</h2><p>时间：</p><p>地点：</p><p>参会人员：</p><h2>会议议题</h2><p>请在此处填写会议议题...</p><h2>会议纪要</h2><p>请在此处填写会议纪要...</p><h2>会议决议</h2><p>请在此处填写会议决议...</p>'\n          break\n        case '技术文档':\n          template = '<h1>技术文档</h1><h2>系统概述</h2><p>请在此处描述系统概况...</p><h2>技术架构</h2><p>请在此处描述技术架构...</p><h2>接口设计</h2><p>请在此处描述接口设计...</p><h2>数据模型</h2><p>请在此处描述数据模型...</p>'\n          break\n        case '项目方案':\n          template = '<h1>项目方案</h1><h2>项目背景</h2><p>请在此处描述项目背景...</p><h2>需求分析</h2><p>请在此处描述需求分析...</p><h2>解决方案</h2><p>请在此处描述解决方案...</p><h2>实施计划</h2><p>请在此处描述实施计划...</p>'\n          break\n        default:\n          template = '<h1>新建文档</h1><p>请在此处输入文档内容...</p>'\n      }\n      \n      return template\n    }\n    \n    // 格式化日期\n    const formatDate = (dateString) => {\n      const date = new Date(dateString)\n      return date.toLocaleString('zh-CN', {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit',\n        hour: '2-digit',\n        minute: '2-digit'\n      })\n    }\n    \n    // 切换文档列表折叠状态\n    const toggleDocList = () => {\n      isDocListCollapsed.value = !isDocListCollapsed.value\n      // 添加延迟，确保布局重新计算\n      setTimeout(() => {\n        window.dispatchEvent(new Event('resize'))\n      }, 300)\n    }\n    \n    // 切换智能助手折叠状态\n    const toggleAssistant = () => {\n      isAssistantCollapsed.value = !isAssistantCollapsed.value\n      // 添加延迟，确保布局重新计算\n      setTimeout(() => {\n        window.dispatchEvent(new Event('resize'))\n      }, 300)\n    }\n    \n    // 应用智能助手的建议操作\n    const applySmartAction = (action) => {\n      // 这里可以实现智能操作的功能\n      ElMessage.success(`已应用操作: ${action}`)\n    }\n    \n    // 应用决策建议\n    const applyDecisionSuggestion = () => {\n      // 这里可以实现决策建议的功能\n      ElMessage.success('已应用决策建议')\n    }\n    \n    // 获取转译预览\n    const getTranslationPreview = () => {\n      if (!currentDoc.value || !currentDoc.value.content) return '请先选择文档...'\n      \n      // 这里可以实现真实的内容转译逻辑\n      switch (translationTarget.value) {\n        case 'business':\n          return '【面向管理层】本季度的工作主要围绕产品迭代和市场拓展两个核心方向展开，取得了显著的业绩增长...'\n        case 'technical':\n          return '【技术详细版】技术团队实现了微服务架构的重构，将原有单体应用拆分为5个独立微服务，同时采用了Kubernetes容器编排...'\n        case 'simple':\n          return '【简化版】我们优化了产品，扩大了市场，完成了季度目标。主要成果包括用户增长20%，收入增长15%...'\n        default:\n          return '转译预览内容...'\n      }\n    }\n    \n    // 应用转译\n    const applyTranslation = () => {\n      if (!currentDoc.value) return\n      \n      currentDoc.value.content = getTranslationPreview()\n      ElMessage.success('已应用内容转译')\n    }\n    \n    // 在组件挂载时确保正确初始化\n    onMounted(() => {\n      fetchDocuments()\n      fetchTerms()\n      // 确保没有全局样式干扰\n      document.body.classList.add('smart-doc-active')\n    })\n    \n    // 在组件卸载前重置状态\n    onBeforeUnmount(() => {\n      // 重置折叠状态，确保不影响其他页面\n      isDocListCollapsed.value = false\n      isAssistantCollapsed.value = false\n      // 移除添加的类名和样式\n      document.body.classList.remove('smart-doc-active')\n      document.body.style.overflow = ''\n      // 触发窗口调整事件，强制重新布局\n      window.dispatchEvent(new Event('resize'))\n    })\n\n    return {\n      // 状态\n      documents,\n      loading,\n      saveLoading,\n      searchQuery,\n      docTypeFilter,\n      sortOption,\n      currentDoc,\n      isDocListCollapsed,\n      isAssistantCollapsed,\n      editorOptions,\n      filteredDocuments,\n      relatedDocuments,\n      professionalTerms,\n      activeAssistantTab,\n      translationTarget,\n      newDocDialogVisible,\n      newDocForm,\n      isPredicting,\n      predictedDocType,\n      \n      // 方法\n      fetchDocuments,\n      selectDocument,\n      saveDocument,\n      deleteCurrentDocument,\n      openNewDocumentDialog,\n      createNewDocumentWithPrediction,\n      formatDate,\n      toggleDocList,\n      toggleAssistant,\n      applySmartAction,\n      applyDecisionSuggestion,\n      getTranslationPreview,\n      applyTranslation\n    }\n  }\n}\n</script>\n\n<style>\n/* 添加全局样式覆盖 */\nbody.smart-doc-active {\n  overflow: auto !important;\n  height: auto !important;\n  position: relative !important;\n}\n\nbody.smart-doc-active .navbar {\n  position: fixed !important;\n  top: 0 !important;\n  left: 0 !important;\n  width: 100% !important;\n  z-index: 10000 !important;\n  display: flex !important;\n}\n\nbody.smart-doc-active .main-container {\n  padding-top: 60px !important;\n}\n</style>\n\n<style scoped>\n.smart-doc-container {\n  position: relative;\n  height: calc(100vh - 60px);\n  display: flex;\n  width: 100%;\n  padding: 20px;\n  margin-top: 0;\n  background-color: #f5f7fa;\n  box-sizing: border-box;\n  z-index: 1;\n}\n\n/* 侧边栏样式 */\n.sidebar {\n  width: 250px;\n  background-color: #fff;\n  border-radius: 8px;\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);\n  height: 100%;\n  transition: width 0.3s ease;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  flex-shrink: 0;\n}\n\n.sidebar.collapsed {\n  width: 60px;\n}\n\n.sidebar-header {\n  height: 60px;\n  padding: 0 16px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom: 1px solid #f0f0f0;\n}\n\n.sidebar-header h4 {\n  margin: 0;\n  font-size: 18px;\n  font-weight: 600;\n  color: #303133;\n}\n\n.toggle-btn {\n  width: 30px;\n  height: 30px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  color: #909399;\n  transition: all 0.2s;\n}\n\n.toggle-btn:hover {\n  background-color: #f2f6fc;\n  color: #409EFF;\n}\n\n.sidebar-content {\n  display: flex;\n  flex-direction: column;\n  height: calc(100% - 60px);\n}\n\n.search-area {\n  padding: 16px;\n  border-bottom: 1px solid #f0f0f0;\n}\n\n.filter-options {\n  display: flex;\n  gap: 8px;\n  margin-top: 12px;\n}\n\n.document-list-scrollbar {\n  flex: 1;\n  height: 0; /* 使 flex: 1 生效 */\n}\n\n.document-list {\n  padding: 8px 12px;\n}\n\n.doc-item {\n  padding: 12px;\n  border-radius: 6px;\n  margin-bottom: 8px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  transition: all 0.2s ease;\n  border-left: 3px solid transparent;\n}\n\n.doc-item:hover {\n  background-color: #f5f7fa;\n  transform: translateX(2px);\n}\n\n.doc-item.active {\n  background-color: #ecf5ff;\n  border-left: 3px solid #409EFF;\n}\n\n.doc-icon {\n  margin-right: 12px;\n  color: #606266;\n  font-size: 20px;\n}\n\n.doc-info {\n  flex: 1;\n  overflow: hidden;\n}\n\n.doc-info h5 {\n  margin: 0;\n  font-size: 14px;\n  font-weight: 500;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.doc-meta {\n  font-size: 12px;\n  color: #909399;\n  margin-top: 4px;\n  display: flex;\n  justify-content: space-between;\n}\n\n.action-buttons {\n  padding: 16px;\n  border-top: 1px solid #f0f0f0;\n}\n\n/* 折叠状态的侧边栏 */\n.collapsed-sidebar {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 16px 0;\n  height: calc(100% - 60px);\n}\n\n.icon-btn {\n  width: 40px;\n  height: 40px;\n  border-radius: 6px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  margin-bottom: 12px;\n  transition: all 0.2s;\n}\n\n.create-btn {\n  background-color: #ecf5ff;\n  color: #409EFF;\n}\n\n.create-btn:hover {\n  background-color: #409EFF;\n  color: white;\n  transform: scale(1.05);\n}\n\n.doc-btn {\n  color: #606266;\n}\n\n.doc-btn:hover {\n  background-color: #f5f7fa;\n  transform: scale(1.05);\n}\n\n.doc-btn.active {\n  background-color: #ecf5ff;\n  color: #409EFF;\n}\n\n.recent-docs {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  overflow-y: auto;\n  flex: 1;\n}\n\n/* 主内容区域样式 */\n.main-content {\n  flex: 1;\n  margin: 0 20px;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n.document-content {\n  background-color: #fff;\n  border-radius: 8px;\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  width: 100%;\n}\n\n.document-header {\n  height: 64px;\n  padding: 0 20px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom: 1px solid #f0f0f0;\n}\n\n.doc-info-area {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  gap: 15px;\n}\n\n.doc-title {\n  flex: 2;\n  padding-right: 0;\n}\n\n.doc-type-selector {\n  flex: 1;\n  max-width: 180px;\n}\n\n.doc-type-selector :deep(.el-input__wrapper) {\n  background-color: #f5f7fa;\n}\n\n.doc-actions {\n  display: flex;\n  gap: 8px;\n}\n\n.editor-area {\n  flex: 1;\n  padding: 20px;\n  overflow-y: auto;\n  display: flex;\n  flex-direction: column;\n}\n\n.quill-editor {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n/* 确保编辑器内容区域自动填充剩余空间 */\n:deep(.ql-container) {\n  flex: 1;\n  overflow-y: auto;\n}\n\n:deep(.ql-toolbar) {\n  background: #f8f9fa;\n  border-top-left-radius: 6px;\n  border-top-right-radius: 6px;\n  border-color: #e9ecef;\n}\n\n:deep(.ql-container) {\n  border-bottom-left-radius: 6px;\n  border-bottom-right-radius: 6px;\n  border-color: #e9ecef;\n  font-size: 15px;\n}\n\n:deep(.ql-editor) {\n  min-height: 300px;\n}\n\n.editor-textarea {\n  height: 100%;\n  resize: none;\n}\n\n/* 智能助手面板 */\n.assistant-panel {\n  width: 280px;\n  background-color: #fff;\n  border-radius: 8px;\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);\n  height: 100%;\n  transition: width 0.3s ease;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  flex-shrink: 0;\n}\n\n.assistant-panel.collapsed {\n  width: 60px;\n}\n\n.assistant-header {\n  height: 60px;\n  padding: 0 16px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom: 1px solid #f0f0f0;\n}\n\n.assistant-header h5 {\n  margin: 0;\n  font-size: 18px;\n  font-weight: 600;\n  color: #303133;\n}\n\n.assistant-body {\n  flex: 1;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n}\n\n.assistant-content {\n  padding: 16px;\n}\n\n.related-docs {\n  margin-bottom: 20px;\n}\n\n.related-doc-item {\n  padding: 12px;\n  border-radius: 4px;\n  background-color: #f5f7fa;\n  margin-bottom: 8px;\n  transition: all 0.2s;\n}\n\n.related-doc-item:hover {\n  background-color: #ecf5ff;\n  transform: translateY(-2px);\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);\n}\n\n.related-doc-item .doc-title {\n  font-size: 13px;\n  font-weight: 500;\n  padding: 0;\n}\n\n.related-doc-item .doc-source {\n  font-size: 12px;\n  color: #909399;\n  margin-top: 4px;\n}\n\n.suggested-actions {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  margin-top: 10px;\n}\n\n.knowledge-item {\n  margin-bottom: 12px;\n}\n\n.term-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px 10px;\n  background-color: #f5f7fa;\n  border-radius: 4px;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.term-header:hover {\n  background-color: #ecf5ff;\n}\n\n.term-header span {\n  font-weight: 500;\n  font-size: 14px;\n}\n\n.term-explanation {\n  padding: 10px;\n  font-size: 13px;\n  color: #606266;\n  background-color: #fafafa;\n  border-radius: 0 0 4px 4px;\n  animation: fade-in 0.3s ease;\n}\n\n@keyframes fade-in {\n  from { opacity: 0; transform: translateY(-10px); }\n  to { opacity: 1; transform: translateY(0); }\n}\n\n.more-link {\n  margin-top: 8px;\n  text-align: right;\n}\n\n.decision-tree {\n  padding: 10px 0;\n}\n\n.decision-actions {\n  margin-top: 16px;\n  text-align: center;\n}\n\n.translation-options {\n  padding: 10px 0;\n}\n\n.translation-preview {\n  margin-top: 20px;\n  padding: 10px;\n  background-color: #f5f7fa;\n  border-radius: 4px;\n}\n\n.preview-content {\n  margin: 10px 0;\n  font-size: 13px;\n  padding: 10px;\n  background-color: #fff;\n  border-radius: 4px;\n  border: 1px dashed #dcdfe6;\n}\n\n.empty-doc-state {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\nh6 {\n  margin: 10px 0;\n  font-size: 14px;\n  font-weight: 500;\n  color: #303133;\n}\n\n.empty-state {\n  padding: 30px 0;\n  text-align: center;\n}\n\n.predicted-type-box {\n  display: flex;\n  background-color: #ecf8ff;\n  border-radius: 6px;\n  padding: 12px 16px;\n  margin-top: 10px;\n  border: 1px solid #d9ecff;\n}\n\n.prediction-icon {\n  color: #409EFF;\n  font-size: 24px;\n  margin-right: 16px;\n}\n\n.prediction-content {\n  flex: 1;\n}\n\n.prediction-title {\n  font-weight: 500;\n  margin-bottom: 5px;\n}\n\n.prediction-title span {\n  color: #409EFF;\n  font-weight: 600;\n}\n\n.prediction-desc {\n  font-size: 13px;\n  color: #606266;\n}\n</style> "]}]}