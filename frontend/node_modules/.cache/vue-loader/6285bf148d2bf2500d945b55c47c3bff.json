{"remainingRequest":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\components\\layout\\Sidebar.vue?vue&type=style&index=0&id=afc9a92c&lang=scss&scoped=true","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\components\\layout\\Sidebar.vue","mtime":1747734852159},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\css-loader\\dist\\cjs.js","mtime":1746431217000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\postcss-loader\\src\\index.js","mtime":1746431217000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1747194135644},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1746431218000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5zaWRlYmFyIHsKICB3aWR0aDogMTYwcHg7CiAgaGVpZ2h0OiAxMDAlOwogIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJnLWNvbG9yKTsKICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXItY29sb3IpOwogIGJveC1zaGFkb3c6IDAgMCAxMHB4IHZhcigtLXNoYWRvdy1jb2xvcik7CiAgei1pbmRleDogMTAwMDsKICB0cmFuc2l0aW9uOiB3aWR0aCAwLjNzOwp9Cgouc2lkZWJhci5pcy1jb2xsYXBzZWQgewogIHdpZHRoOiA2NHB4Owp9Cgouc2lkZWJhci1oZWFkZXIgewogIHBhZGRpbmc6IDIwcHg7CiAgZGlzcGxheTogZmxleDsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1ib3JkZXItY29sb3IpOwogIGhlaWdodDogNjBweDsKICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iZy1jb2xvcik7Cn0KCi5zaWRlYmFyLWhlYWRlciBpbWcgewogIHdpZHRoOiAyNHB4OwogIGhlaWdodDogMjRweDsKfQoKLnNpZGViYXItaGVhZGVyIGg1IHsKICBtYXJnaW46IDAgMCAwIDEycHg7CiAgZm9udC1zaXplOiAxNnB4OwogIGZvbnQtd2VpZ2h0OiA2MDA7CiAgY29sb3I6IHZhcigtLXRleHQtY29sb3IpOwogIHdoaXRlLXNwYWNlOiBub3dyYXA7Cn0KCi5zaWRlYmFyLW1lbnUtY29udGFpbmVyIHsKICBoZWlnaHQ6IGNhbGMoMTAwJSAtIDYwcHgpOwp9CgouZWwtbWVudSB7CiAgYm9yZGVyLXJpZ2h0OiBub25lOwp9CgouZWwtbWVudS1pdGVtIHsKICBoZWlnaHQ6IDUwcHg7CiAgbGluZS1oZWlnaHQ6IDUwcHg7Cn0KCi5lbC1tZW51LWl0ZW0gLmVsLWljb24gewogIG1hcmdpbi1yaWdodDogMTBweDsKICB3aWR0aDogMjRweDsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgZm9udC1zaXplOiAxOHB4Owp9Cg=="},{"version":3,"sources":["C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\components\\layout\\Sidebar.vue"],"names":[],"mappings":"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","file":"C:/Users/18083/Desktop/CCIT/office/smart-office/frontend/src/components/layout/Sidebar.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"sidebar\" :class=\"{ 'is-collapsed': !sidebarOpened }\" v-stop-propagation>\n    <!-- 侧边栏头部 -->\n    <div class=\"sidebar-header\">\n      <img src=\"https://cdn-icons-png.flaticon.com/512/2891/2891491.png\" alt=\"Logo\">\n      <h5 v-if=\"sidebarOpened\">智能办公系统</h5>\n    </div>\n\n    <!-- 侧边栏菜单 -->\n    <el-scrollbar class=\"sidebar-menu-container\">\n      <el-menu\n        :default-active=\"activeMenu\"\n        :collapse=\"!sidebarOpened\"\n        :background-color=\"menuBackgroundColor\"\n        :text-color=\"menuTextColor\"\n        :active-text-color=\"menuActiveTextColor\"\n        :unique-opened=\"true\"\n        router\n      >\n        <el-menu-item \n          v-for=\"route in routes\" \n          :key=\"route.path\" \n          :index=\"route.path\"\n          @click=\"handleMenuClick(route.path)\"\n        >\n          <el-icon>\n            <component :is=\"iconComponent(route.meta.icon)\"></component>\n          </el-icon>\n          <template #title>\n            <span>{{ route.meta.title }}</span>\n          </template>\n        </el-menu-item>\n      </el-menu>\n    </el-scrollbar>\n  </div>\n</template>\n\n<script>\nimport { computed, watch, ref } from 'vue'\nimport { useRouter, useRoute } from 'vue-router'\nimport { useStore } from 'vuex'\n\nexport default {\n  name: 'Sidebar',\n  setup() {\n    const store = useStore()\n    const router = useRouter()\n    const route = useRoute()\n    \n    // 跟踪上一个路由\n    const lastPath = ref('');\n\n    // 从Vuex中获取侧边栏状态\n    const sidebarOpened = computed(() => store.getters.sidebar.opened)\n\n    // 菜单路由\n    const routes = computed(() => {\n      return router.options.routes.find(r => r.path === '/').children\n        .filter(route => !route.hidden)\n    })\n\n    // 当前激活的菜单\n    const activeMenu = computed(() => {\n      return route.path\n    })\n    \n    // 获取主题相关的颜色\n    const currentTheme = computed(() => {\n      const theme = localStorage.getItem('theme') || 'light';\n      return theme;\n    });\n    \n    // 根据主题计算菜单颜色\n    const menuBackgroundColor = computed(() => {\n      return currentTheme.value === 'dark' ? 'var(--bg-color-secondary)' : 'var(--bg-color)';\n    });\n    \n    const menuTextColor = computed(() => {\n      return 'var(--text-color)';\n    });\n    \n    const menuActiveTextColor = computed(() => {\n      return 'var(--primary-color)';\n    });\n    \n    // 处理菜单点击\n    const handleMenuClick = (path) => {\n      // 如果是从smartdoc页面点击其他页面，强制刷新\n      if (route.path === '/smartdoc' && path !== '/smartdoc') {\n        try {\n          // 清理可能存在的遮罩\n          document.querySelectorAll('.el-overlay').forEach(el => {\n            if (el && el.parentNode) el.parentNode.removeChild(el);\n          });\n          \n          // 强制跳转（硬刷新）\n          window.location.href = path;\n        } catch (e) {\n          console.error('导航处理错误:', e);\n          // 如果出错，尝试常规导航\n          router.replace(path);\n        }\n      }\n      // 否则正常导航处理\n    }\n    \n    // 监视路由变化，确保导航菜单正常工作\n    watch(() => route.path, () => {\n      // 记录上一个路径\n      lastPath.value = route.path;\n      \n      // 在路由变化时确保导航菜单可点击\n      setTimeout(() => {\n        document.querySelectorAll('.el-menu-item, .el-submenu').forEach(el => {\n          el.style.pointerEvents = 'auto';\n        });\n      }, 50);\n    });\n\n    // 将Bootstrap图标类名转换为Element Plus图标组件\n    const iconComponent = (icon) => {\n      // 如果是bootstrap图标类，转换为Element Plus图标\n      if (icon && icon.includes('bi-')) {\n        // 移除bi-前缀\n        const iconName = icon.replace('bi-', '');\n        \n        // 图标映射表 - Bootstrap图标到Element Plus图标的映射\n        const iconMap = {\n          'grid-1x2': 'Menu',\n          'calendar-week': 'Calendar',\n          'book': 'Collection',\n          'chat-dots': 'ChatDotRound',\n          'camera-video': 'VideoCamera',\n          'file-earmark-text': 'Document',\n          'file-earmark-ruled': 'Tickets',\n          'envelope': 'Message',\n          'check2-square': 'CheckboxButton',\n          'box-seam': 'Box',\n          'person-lines-fill': 'User',\n          'kanban': 'Opportunity',\n          'list-check': 'Finished',\n          'people': 'UserFilled',\n          'building': 'OfficeBuilding',\n          'gear': 'Setting',\n          'house': 'HomeFilled',\n          'grid': 'Grid',\n          'person': 'User'\n        };\n        \n        // 如果在映射表中找到对应的图标，则返回它，否则返回默认图标\n        return iconMap[iconName] || 'Document';\n      }\n      \n      // 如果不是bi-前缀，则原样返回\n      return icon || 'Document';\n    }\n\n    return {\n      sidebarOpened,\n      routes,\n      activeMenu,\n      iconComponent,\n      handleMenuClick,\n      menuBackgroundColor,\n      menuTextColor,\n      menuActiveTextColor\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.sidebar {\n  width: 160px;\n  height: 100%;\n  background-color: var(--bg-color);\n  border-right: 1px solid var(--border-color);\n  box-shadow: 0 0 10px var(--shadow-color);\n  z-index: 1000;\n  transition: width 0.3s;\n}\n\n.sidebar.is-collapsed {\n  width: 64px;\n}\n\n.sidebar-header {\n  padding: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-bottom: 1px solid var(--border-color);\n  height: 60px;\n  background-color: var(--bg-color);\n}\n\n.sidebar-header img {\n  width: 24px;\n  height: 24px;\n}\n\n.sidebar-header h5 {\n  margin: 0 0 0 12px;\n  font-size: 16px;\n  font-weight: 600;\n  color: var(--text-color);\n  white-space: nowrap;\n}\n\n.sidebar-menu-container {\n  height: calc(100% - 60px);\n}\n\n.el-menu {\n  border-right: none;\n}\n\n.el-menu-item {\n  height: 50px;\n  line-height: 50px;\n}\n\n.el-menu-item .el-icon {\n  margin-right: 10px;\n  width: 24px;\n  text-align: center;\n  font-size: 18px;\n}\n</style> "]}]}