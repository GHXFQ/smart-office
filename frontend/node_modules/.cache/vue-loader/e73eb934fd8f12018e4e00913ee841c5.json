{"remainingRequest":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\components\\profile\\AvatarDropdown.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\components\\profile\\AvatarDropdown.vue","mtime":1747306310907},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1746431202000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1746431218000},{"path":"C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1746431218000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBkZWZpbmVDb21wb25lbnQsIGNvbXB1dGVkLCBvbk1vdW50ZWQgfSBmcm9tICd2dWUnDQppbXBvcnQgeyB1c2VTdG9yZSB9IGZyb20gJ3Z1ZXgnDQppbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tICd2dWUtcm91dGVyJw0KDQpleHBvcnQgZGVmYXVsdCBkZWZpbmVDb21wb25lbnQoew0KICBuYW1lOiAnQXZhdGFyRHJvcGRvd24nLA0KICANCiAgc2V0dXAoKSB7DQogICAgY29uc3Qgc3RvcmUgPSB1c2VTdG9yZSgpDQogICAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCkNCiAgICANCiAgICAvLyDojrflj5bnlKjmiLfkv6Hmga8NCiAgICBjb25zdCB1c2VySW5mbyA9IGNvbXB1dGVkKCgpID0+IHN0b3JlLnN0YXRlLnVzZXIudXNlckluZm8pDQogICAgDQogICAgLy8g6K6h566X55So5oi35ZCN6aaW5a2X5q+N77yI55So5LqO5peg5aS05YOP5pe25pi+56S677yJDQogICAgY29uc3QgdXNlckluaXRpYWwgPSBjb21wdXRlZCgoKSA9PiB7DQogICAgICBpZiAodXNlckluZm8udmFsdWUubmFtZSkgew0KICAgICAgICByZXR1cm4gdXNlckluZm8udmFsdWUubmFtZS5jaGFyQXQoMCkNCiAgICAgIH0gZWxzZSBpZiAodXNlckluZm8udmFsdWUudXNlcm5hbWUpIHsNCiAgICAgICAgcmV0dXJuIHVzZXJJbmZvLnZhbHVlLnVzZXJuYW1lLmNoYXJBdCgwKQ0KICAgICAgfQ0KICAgICAgcmV0dXJuICfnlKgnDQogICAgfSkNCiAgICANCiAgICAvLyDlpoLmnpzmsqHmnInnlKjmiLfkv6Hmga/vvIzliJnojrflj5bnlKjmiLfkv6Hmga8NCiAgICBvbk1vdW50ZWQoKCkgPT4gew0KICAgICAgaWYgKCF1c2VySW5mby52YWx1ZS5pZCkgew0KICAgICAgICBzdG9yZS5kaXNwYXRjaCgndXNlci9nZXRVc2VySW5mbycpDQogICAgICB9DQogICAgfSkNCiAgICANCiAgICAvLyDlpITnkIbpgIDlh7rnmbvlvZUNCiAgICBjb25zdCBoYW5kbGVMb2dvdXQgPSAoKSA9PiB7DQogICAgICBzdG9yZS5kaXNwYXRjaCgndXNlci9sb2dvdXQnKS50aGVuKCgpID0+IHsNCiAgICAgICAgcm91dGVyLnB1c2goJy9sb2dpbicpDQogICAgICB9KQ0KICAgIH0NCiAgICANCiAgICByZXR1cm4gew0KICAgICAgdXNlckluZm8sDQogICAgICB1c2VySW5pdGlhbCwNCiAgICAgIGhhbmRsZUxvZ291dA0KICAgIH0NCiAgfQ0KfSkNCg=="},{"version":3,"sources":["C:\\Users\\18083\\Desktop\\CCIT\\office\\smart-office\\frontend\\src\\components\\profile\\AvatarDropdown.vue"],"names":[],"mappings":";AAoCA,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACzD,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AAC9B,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;AAErC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAC7B,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;EAEtB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACN,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACvB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;IAEzB,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IACR,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;IAEzD,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACpB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE;MACjC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;QACvB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACrC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;QAClC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACzC;MACA,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;IACX,CAAC;;IAED,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE;MACd,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;QACtB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACnC;IACF,CAAC;;IAED,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IACR,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE;MACzB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE;QACvC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACtB,CAAC;IACH;;IAEA,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;MACL,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACR,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACb;EACF;AACF,CAAC","file":"C:/Users/18083/Desktop/CCIT/office/smart-office/frontend/src/components/profile/AvatarDropdown.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <el-dropdown trigger=\"click\" class=\"avatar-dropdown\">\r\n    <div class=\"avatar-container\">\r\n      <el-avatar \r\n        :size=\"32\" \r\n        :src=\"userInfo.avatar ? userInfo.avatar : null\" \r\n        v-if=\"userInfo.avatar\">\r\n      </el-avatar>\r\n      <el-avatar \r\n        :size=\"32\" \r\n        v-else \r\n        class=\"default-avatar\">\r\n        {{ userInitial }}\r\n      </el-avatar>\r\n      <span class=\"user-name hidden-xs\">{{ userInfo.name || userInfo.username }}</span>\r\n      <i class=\"el-icon-caret-bottom\"></i>\r\n    </div>\r\n\r\n    <template #dropdown>\r\n      <el-dropdown-menu>\r\n        <router-link to=\"/profile\">\r\n          <el-dropdown-item>\r\n            <i class=\"el-icon-user\"></i>\r\n            个人中心\r\n          </el-dropdown-item>\r\n        </router-link>\r\n        <el-dropdown-item divided @click=\"handleLogout\">\r\n          <i class=\"el-icon-switch-button\"></i>\r\n          退出登录\r\n        </el-dropdown-item>\r\n      </el-dropdown-menu>\r\n    </template>\r\n  </el-dropdown>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent, computed, onMounted } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useRouter } from 'vue-router'\r\n\r\nexport default defineComponent({\r\n  name: 'AvatarDropdown',\r\n  \r\n  setup() {\r\n    const store = useStore()\r\n    const router = useRouter()\r\n    \r\n    // 获取用户信息\r\n    const userInfo = computed(() => store.state.user.userInfo)\r\n    \r\n    // 计算用户名首字母（用于无头像时显示）\r\n    const userInitial = computed(() => {\r\n      if (userInfo.value.name) {\r\n        return userInfo.value.name.charAt(0)\r\n      } else if (userInfo.value.username) {\r\n        return userInfo.value.username.charAt(0)\r\n      }\r\n      return '用'\r\n    })\r\n    \r\n    // 如果没有用户信息，则获取用户信息\r\n    onMounted(() => {\r\n      if (!userInfo.value.id) {\r\n        store.dispatch('user/getUserInfo')\r\n      }\r\n    })\r\n    \r\n    // 处理退出登录\r\n    const handleLogout = () => {\r\n      store.dispatch('user/logout').then(() => {\r\n        router.push('/login')\r\n      })\r\n    }\r\n    \r\n    return {\r\n      userInfo,\r\n      userInitial,\r\n      handleLogout\r\n    }\r\n  }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.avatar-dropdown {\r\n  height: 100%;\r\n  cursor: pointer;\r\n  \r\n  .avatar-container {\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 0 8px;\r\n    \r\n    .default-avatar {\r\n      background-color: #409EFF;\r\n      color: #fff;\r\n      font-weight: bold;\r\n    }\r\n    \r\n    .user-name {\r\n      margin-left: 8px;\r\n      font-size: 14px;\r\n      color: #606266;\r\n    }\r\n    \r\n    .el-icon-caret-bottom {\r\n      margin-left: 4px;\r\n      font-size: 12px;\r\n    }\r\n  }\r\n}\r\n\r\n// 适配移动设备\r\n@media (max-width: 768px) {\r\n  .hidden-xs {\r\n    display: none;\r\n  }\r\n}\r\n</style> "]}]}