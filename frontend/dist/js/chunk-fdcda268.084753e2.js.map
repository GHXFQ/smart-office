{"version":3,"sources":["webpack:///./src/views/setting/Index.vue","webpack:///./src/views/setting/Index.vue?79c2","webpack:///./src/views/setting/Index.vue?cb1e"],"names":["class","_createElementBlock","_createVNode","_component_el_popover","placement","width","trigger","reference","_withCtx","_cache","_createElementVNode","_hoisted_1","onClick","args","$options","openSettings","_component_el_dialog","title","$data","dialogVisible","$event","before-close","handleClose","close-on-click-modal","custom-class","destroy-on-close","_hoisted_2","_hoisted_3","_normalizeClass","active","activeTab","_hoisted_4","_hoisted_5","_component_el_popconfirm","confirm-button-text","cancel-button-text","onConfirm","resetCurrentSettings","_component_el_button","_component_el_icon","_component_refresh_left","type","saveCurrentSettings","_component_check","_hoisted_6","_component_el_form","label-position","model","aiSettings","_component_el_row","gutter","_component_el_col","span","_component_el_form_item","label","_hoisted_7","_component_el_tooltip","effect","content","_component_info_filled","_component_el_input","nickname","placeholder","clearable","_hoisted_8","job","_hoisted_9","_component_el_radio_group","tone","_component_el_radio_button","_hoisted_10","traitsText","rows","_hoisted_11","otherInfo","_hoisted_12","label-width","uiSettings","theme","_component_el_radio","contentDensity","_component_el_slider","fontSize","min","max","step","show-stops","_hoisted_13","_toDisplayString","name","components","InfoFilled","RefreshLeftIcon","CheckIcon","data","mounted","this","fetchUiSettings","fetchAiSettings","document","addEventListener","handleKeyDown","beforeUnmount","removeEventListener","methods","showMessage","message","ElMessage","error","console","log","e","key","response","request","url","method","success","traits_text","other_info","requestData","errorMsg","resetAiSettings","applyTheme","resetUiSettings","documentElement","style","setAttribute","setProperty","saveAiSettings","saveUiSettings","__exports__","render"],"mappings":"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","file":"js/chunk-fdcda268.084753e2.js","sourcesContent":["<template>\n  <div>\n    <!-- 右上角设置按钮 -->\n    <el-popover\n      placement=\"bottom\"\n      :width=\"120\"\n      trigger=\"click\"\n    >\n      <template #reference>\n        <div class=\"settings-button\">\n          <i class=\"el-icon-setting\"></i>\n        </div>\n      </template>\n      <div class=\"settings-menu\">\n        <div class=\"menu-item\" @click=\"openSettings\">系统设置</div>\n        <div class=\"menu-item\">帮助中心</div>\n        <div class=\"menu-divider\"></div>\n        <div class=\"menu-item\">退出登录</div>\n      </div>\n    </el-popover>\n    \n    <!-- 设置弹窗 -->\n    <el-dialog\n      title=\"系统设置\"\n      v-model=\"dialogVisible\"\n      width=\"800px\"\n      :before-close=\"handleClose\"\n      :close-on-click-modal=\"false\"\n      custom-class=\"settings-dialog\"\n      destroy-on-close\n    >\n      <div class=\"settings-container\">\n        <!-- 左侧导航 -->\n        <div class=\"settings-nav\">\n          <div \n            class=\"nav-item\" \n            :class=\"{ active: activeTab === 'ai' }\" \n            @click=\"activeTab = 'ai'\"\n          >\n            <i class=\"el-icon-cpu\"></i>\n            <span>个性化AI设置</span>\n          </div>\n          <div \n            class=\"nav-item\" \n            :class=\"{ active: activeTab === 'ui' }\" \n            @click=\"activeTab = 'ui'\"\n          >\n            <i class=\"el-icon-brush\"></i>\n            <span>界面偏好</span>\n          </div>\n        </div>\n        \n        <!-- 右侧内容 -->\n        <div class=\"settings-content\">\n          <!-- 统一的操作按钮区 -->\n          <div class=\"global-action-bar\">\n            <el-popconfirm\n              :title=\"`确定要恢复${activeTab === 'ai' ? '个性化AI设置' : '界面偏好'}的默认设置吗？`\"\n              confirm-button-text=\"确定\"\n              cancel-button-text=\"取消\"\n              @confirm=\"resetCurrentSettings\"\n            >\n              <template #reference>\n                <el-button>\n                  <el-icon><refresh-left /></el-icon>\n                  恢复默认\n                </el-button>\n              </template>\n            </el-popconfirm>\n            <el-button type=\"primary\" @click=\"saveCurrentSettings\">\n              <el-icon><check /></el-icon>\n              保存设置\n            </el-button>\n          </div>\n          \n          <!-- 个性化AI设置 -->\n          <div v-if=\"activeTab === 'ai'\" class=\"setting-section\">\n            <h3>个性化AI设置</h3>\n            <el-form label-position=\"top\" :model=\"aiSettings\">\n              <el-row :gutter=\"20\">\n                <el-col :span=\"12\">\n                  <el-form-item>\n                    <template #label>\n                      <span class=\"label-with-icon\">\n                        AI如何称呼您\n                        <el-tooltip\n                          effect=\"light\"\n                          content=\"您希望AI助手如何称呼您，例如您的姓名或昵称。\"\n                          placement=\"top\"\n                        >\n                          <el-icon class=\"info-icon\"><info-filled /></el-icon>\n                        </el-tooltip>\n                      </span>\n                    </template>\n                    <el-input \n                      v-model=\"aiSettings.nickname\" \n                      placeholder=\"例如：李经理\"\n                      clearable\n                    />\n                  </el-form-item>\n                </el-col>\n                <el-col :span=\"12\">\n                  <el-form-item>\n                    <template #label>\n                      <span class=\"label-with-icon\">\n                        您的职位\n                        <el-tooltip\n                          effect=\"light\"\n                          content=\"您的职位信息有助于AI在生成内容时更贴合您的专业领域。\"\n                          placement=\"top\"\n                        >\n                          <el-icon class=\"info-icon\"><info-filled /></el-icon>\n                        </el-tooltip>\n                      </span>\n                    </template>\n                    <el-input \n                      v-model=\"aiSettings.job\" \n                      placeholder=\"例如：软件工程师\"\n                      clearable\n                    />\n                  </el-form-item>\n                </el-col>\n              </el-row>\n              \n              <el-form-item>\n                <template #label>\n                  <span class=\"label-with-icon\">\n                    AI沟通风格\n                    <el-tooltip\n                      effect=\"light\"\n                      content=\"选择您偏好的AI沟通风格，或在下方文本框中自定义。\"\n                      placement=\"top\"\n                    >\n                      <el-icon class=\"info-icon\"><info-filled /></el-icon>\n                    </el-tooltip>\n                  </span>\n                </template>\n                <el-radio-group v-model=\"aiSettings.tone\" class=\"tone-radios\">\n                  <el-radio-button label=\"professional\">专业严谨</el-radio-button>\n                  <el-radio-button label=\"friendly\">亲切友好</el-radio-button>\n                  <el-radio-button label=\"concise\">简洁直接</el-radio-button>\n                </el-radio-group>\n              </el-form-item>\n              \n              <el-form-item>\n                <template #label>\n                  <span class=\"label-with-icon\">\n                    自定义AI风格\n                    <el-tooltip\n                      effect=\"light\"\n                      content='在这里输入您希望AI具备的其它沟通风格或特征，例如\"幽默\"、\"详细\"等，多个词语请用逗号隔开。'\n                      placement=\"top\"\n                    >\n                      <el-icon class=\"info-icon\"><info-filled /></el-icon>\n                    </el-tooltip>\n                  </span>\n                </template>\n                <el-input \n                  type=\"textarea\" \n                  v-model=\"aiSettings.traitsText\" \n                  placeholder=\"例如：富有创造力, 善于总结\" \n                  :rows=\"3\"\n                  class=\"textarea-input\"\n                />\n              </el-form-item>\n              \n              <el-form-item>\n                <template #label>\n                  <span class=\"label-with-icon\">\n                    其它自定义信息\n                    <el-tooltip\n                      effect=\"light\"\n                      content=\"您可以在此提供更多关于您的工作内容、兴趣偏好或特定要求的信息，以便AI为您提供更个性化的服务。\"\n                      placement=\"top\"\n                    >\n                      <el-icon class=\"info-icon\"><info-filled /></el-icon>\n                    </el-tooltip>\n                  </span>\n                </template>\n                <el-input \n                  type=\"textarea\" \n                  v-model=\"aiSettings.otherInfo\" \n                  placeholder=\"例如：我主要负责XX项目的管理，请在总结时突出项目进度和风险点。\" \n                  :rows=\"4\"\n                  class=\"textarea-input\"\n                />\n              </el-form-item>\n            </el-form>\n          </div>\n          \n          <!-- 界面偏好设置 -->\n          <div v-if=\"activeTab === 'ui'\" class=\"setting-section\">\n            <h3>主题设置</h3>\n            <el-form label-position=\"left\" label-width=\"120px\">\n              <el-form-item label=\"主题模式\">\n                <el-radio-group v-model=\"uiSettings.theme\">\n                  <el-radio label=\"light\">浅色</el-radio>\n                  <el-radio label=\"dark\">深色</el-radio>\n                </el-radio-group>\n              </el-form-item>\n            </el-form>\n            \n            <h3>布局设置</h3>\n            <el-form label-position=\"left\" label-width=\"120px\">\n              <el-form-item label=\"内容密度\">\n                <el-radio-group v-model=\"uiSettings.contentDensity\">\n                  <el-radio label=\"compact\">紧凑</el-radio>\n                  <el-radio label=\"normal\">标准</el-radio>\n                  <el-radio label=\"comfortable\">宽松</el-radio>\n                </el-radio-group>\n              </el-form-item>\n              \n              <el-form-item label=\"字体大小\">\n                <el-slider v-model=\"uiSettings.fontSize\" :min=\"12\" :max=\"20\" :step=\"1\" show-stops></el-slider>\n                <span class=\"description\">{{ uiSettings.fontSize }}px</span>\n              </el-form-item>\n            </el-form>\n          </div>\n        </div>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport request from '@/utils/request'\nimport { ElMessage } from 'element-plus'\nimport { InfoFilled, RefreshLeft as RefreshLeftIcon, Check as CheckIcon } from '@element-plus/icons-vue'\n\nexport default {\n  name: 'Setting',\n  components: {\n    InfoFilled,\n    'refresh-left': RefreshLeftIcon,\n    'check': CheckIcon\n  },\n  data() {\n    return {\n      dialogVisible: false,\n      activeTab: 'ai',\n      aiSettings: {\n        nickname: '',\n        job: '',\n        tone: 'professional',\n        traitsText: '',\n        otherInfo: ''\n      },\n      uiSettings: {\n        theme: 'light',\n        contentDensity: 'normal',\n        fontSize: 14\n      }\n    }\n  },\n  mounted() {\n    // 只在需要时获取设置\n    if (this.dialogVisible) {\n      this.fetchUiSettings()\n      this.fetchAiSettings()\n    }\n    // 添加处理弹窗显示的事件监听\n    document.addEventListener('keydown', this.handleKeyDown)\n  },\n  beforeUnmount() {\n    // 组件销毁前清理事件监听\n    document.removeEventListener('keydown', this.handleKeyDown)\n  },\n  methods: {\n    // 消息提示封装，避免直接依赖this.$message\n    showMessage(type, message) {\n      try {\n        // 尝试使用Element Plus的消息组件\n        ElMessage({\n          type,\n          message\n        })\n      } catch (error) {\n        // 备用方案：使用console记录消息\n        console.log(`[${type}] ${message}`)\n      }\n    },\n    // 暴露给父组件的方法，用于打开设置弹窗\n    openSettings() {\n      try {\n        console.log('设置弹窗被打开')\n        this.dialogVisible = true\n        // 打开弹窗时获取设置\n        this.fetchUiSettings()\n        this.fetchAiSettings()\n      } catch (error) {\n        console.error('打开设置弹窗失败:', error)\n        // 确保即使出错也不会阻塞用户界面\n      }\n    },\n    handleKeyDown(e) {\n      // ESC键关闭弹窗\n      if (e.key === 'Escape' && this.dialogVisible) {\n        this.dialogVisible = false\n      }\n    },\n    handleClose() {\n      this.dialogVisible = false\n    },\n    async fetchUiSettings() {\n      try {\n        // 使用request实用程序自动携带认证\n        const response = await request({\n          url: '/api/settings/ui-preferences',\n          method: 'get'\n        })\n        \n        if (response && response.success) {\n          this.uiSettings = { ...this.uiSettings, ...response.data }\n        }\n      } catch (error) {\n        console.error('获取界面偏好失败:', error)\n        // 更友好的错误消息，不要暴露403错误\n        this.showMessage('info', '首次使用系统，暂无偏好设置')\n      }\n    },\n    async fetchAiSettings() {\n      try {\n        // 获取个性化AI设置\n        const response = await request({\n          url: '/api/settings/ai-settings',\n          method: 'get'\n        })\n        \n        if (response && response.success) {\n          // 将API返回的字段映射到本地状态\n          this.aiSettings = {\n            nickname: response.data.nickname || '',\n            job: response.data.job || '',\n            tone: response.data.tone || 'professional',\n            traitsText: response.data.traits_text || '',\n            otherInfo: response.data.other_info || ''\n          }\n        }\n      } catch (error) {\n        console.error('获取个性化AI设置失败:', error)\n        this.showMessage('info', '首次使用系统，暂无个性化AI设置')\n      }\n    },\n    async saveAiSettings() {\n      try {\n        // 构建请求数据，将本地字段映射为API所需格式\n        const requestData = {\n          nickname: this.aiSettings.nickname,\n          job: this.aiSettings.job,\n          tone: this.aiSettings.tone,\n          traits_text: this.aiSettings.traitsText,\n          other_info: this.aiSettings.otherInfo\n        }\n        \n        // 保存个性化AI设置\n        const response = await request({\n          url: '/api/settings/ai-settings',\n          method: 'post',\n          data: requestData\n        })\n        \n        if (response && response.success) {\n          this.showMessage('success', '个性化AI设置已保存')\n          this.dialogVisible = false\n        } else {\n          const errorMsg = (response && response.message) || '保存失败'\n          this.showMessage('error', errorMsg)\n        }\n      } catch (error) {\n        console.error('保存个性化AI设置失败:', error)\n        this.showMessage('error', '保存设置信息失败')\n      }\n    },\n    resetAiSettings() {\n      this.aiSettings = {\n        nickname: '',\n        job: '',\n        tone: 'professional',\n        traitsText: '',\n        otherInfo: ''\n      }\n      this.showMessage('info', '已重置个性化AI设置')\n    },\n    async saveUiSettings() {\n      try {\n        // 使用request实用程序自动携带认证\n        const response = await request({\n          url: '/api/settings/ui-preferences',\n          method: 'post',\n          data: this.uiSettings\n        })\n        \n        if (response && response.success) {\n          this.showMessage('success', '界面偏好设置已保存')\n          // 应用新的主题设置\n          this.applyTheme()\n          this.dialogVisible = false\n        } else {\n          const errorMsg = (response && response.message) || '保存失败'\n          this.showMessage('error', errorMsg)\n        }\n      } catch (error) {\n        console.error('保存界面偏好失败:', error)\n        this.showMessage('error', '保存设置信息失败')\n      }\n    },\n    resetUiSettings() {\n      this.uiSettings = {\n        theme: 'light',\n        contentDensity: 'normal',\n        fontSize: 14\n      }\n      this.showMessage('info', '已恢复默认设置，请点击保存生效')\n    },\n    applyTheme() {\n      // 实际应用主题的逻辑，可以通过修改CSS变量来实现\n      if (document && document.documentElement && document.documentElement.style) {\n      document.documentElement.setAttribute('data-theme', this.uiSettings.theme)\n      document.documentElement.style.setProperty('--font-size-base', `${this.uiSettings.fontSize}px`)\n      }\n    },\n    // 根据当前激活的标签页重置设置\n    resetCurrentSettings() {\n      if (this.activeTab === 'ai') {\n        this.resetAiSettings();\n      } else if (this.activeTab === 'ui') {\n        this.resetUiSettings();\n      }\n    },\n    \n    // 根据当前激活的标签页保存设置\n    saveCurrentSettings() {\n      if (this.activeTab === 'ai') {\n        this.saveAiSettings();\n      } else if (this.activeTab === 'ui') {\n        this.saveUiSettings();\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.settings-button {\n  position: fixed;\n  top: 15px;\n  right: 20px;\n  z-index: 999;\n  cursor: pointer;\n  color: #409EFF;\n  font-size: 20px;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  transition: all 0.3s;\n}\n\n.settings-button:hover {\n  background-color: rgba(64, 158, 255, 0.1);\n}\n\n.settings-menu {\n  padding: 5px 0;\n}\n\n.menu-item {\n  padding: 8px 16px;\n  cursor: pointer;\n  transition: all 0.3s;\n  font-size: 14px;\n}\n\n.menu-item:hover {\n  background-color: #f5f7fa;\n  color: #409EFF;\n}\n\n.menu-divider {\n  height: 1px;\n  background-color: #eee;\n  margin: 5px 0;\n}\n\n.settings-container {\n  display: flex;\n  height: 500px;\n}\n\n.settings-nav {\n  width: 200px;\n  border-right: 1px solid #eee;\n  padding: 20px 0;\n}\n\n.nav-item {\n  padding: 15px 20px;\n  cursor: pointer;\n  transition: all 0.3s;\n  display: flex;\n  align-items: center;\n}\n\n.nav-item i {\n  margin-right: 10px;\n  font-size: 18px;\n}\n\n.nav-item.active {\n  background-color: #ecf5ff;\n  color: #409EFF;\n  border-right: 2px solid #409EFF;\n}\n\n.nav-item:hover:not(.active) {\n  background-color: #f5f7fa;\n}\n\n.settings-content {\n  flex: 1;\n  padding: 20px 30px;\n  overflow-y: auto;\n}\n\n.settings-dialog :deep(.el-dialog__body) {\n  padding: 0;\n}\n\n.setting-section {\n  margin-bottom: 30px;\n}\n\n.setting-section h3 {\n  font-size: 16px;\n  font-weight: 500;\n  margin: 20px 0;\n  color: #333;\n  border-bottom: 1px solid #eee;\n  padding-bottom: 10px;\n}\n\n.description {\n  color: #909399;\n  font-size: 13px;\n  margin-left: 10px;\n}\n\n.setting-action {\n  display: none; /* 隐藏原有的按钮区 */\n}\n\n.global-action-bar {\n  display: flex;\n  justify-content: flex-end;\n  padding: 0 0 15px 0;\n  margin-bottom: 20px;\n  border-bottom: 1px solid #eee;\n}\n\n.global-action-bar :deep(.el-button) {\n  margin-left: 10px;\n  display: inline-flex;\n  align-items: center;\n}\n\n.global-action-bar :deep(.el-button .el-icon) {\n  margin-right: 5px;\n}\n\n.custom-input-aligned {\n  width: 400px;\n  max-width: 100%;\n  border-radius: 4px;\n}\n\n.input-label {\n  font-size: 16px;\n  margin-bottom: 10px;\n  color: #333;\n}\n\n.input-wrapper {\n  display: flex;\n}\n\n.textarea-input :deep(.el-textarea__inner) {\n  font-size: 14px;\n  line-height: 1.5;\n  padding: 10px 12px;\n}\n\n.label-with-icon {\n  display: flex;\n  align-items: center;\n  gap: 5px;\n}\n\n.info-icon {\n  font-size: 16px;\n  color: #909399;\n  cursor: pointer;\n}\n\n.info-icon:hover {\n  color: #409EFF;\n}\n</style> ","import { render } from \"./Index.vue?vue&type=template&id=3234de44&scoped=true\"\nimport script from \"./Index.vue?vue&type=script&lang=js\"\nexport * from \"./Index.vue?vue&type=script&lang=js\"\n\nimport \"./Index.vue?vue&type=style&index=0&id=3234de44&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\18083\\\\Desktop\\\\CCIT\\\\office\\\\smart-office\\\\frontend\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3234de44\"]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Index.vue?vue&type=style&index=0&id=3234de44&scoped=true&lang=css\""],"sourceRoot":""}