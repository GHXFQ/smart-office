{"version":3,"sources":["webpack:///./src/views/dashboard/Index.vue?f8d6","webpack:///./src/api/calendar.js","webpack:///./node_modules/core-js/modules/web.url-search-params.has.js","webpack:///./src/api/ai.js","webpack:///./src/views/dashboard/Index.vue?069a","webpack:///./node_modules/core-js/modules/web.url-search-params.size.js","webpack:///./src/views/dashboard/Index.vue?ade3","webpack:///./src/views/dashboard/Index.vue?a58a","webpack:///./src/views/dashboard/Index.vue?4231","webpack:///./src/views/dashboard/Index.vue?3a0a","webpack:///./src/views/dashboard/Index.vue?13b8","webpack:///./node_modules/core-js/modules/web.url-search-params.delete.js","webpack:///./node_modules/core-js/modules/es.iterator.filter.js","webpack:///./src/views/dashboard/Index.vue?891a","webpack:///./src/views/dashboard/Index.vue?6edb","webpack:///./src/views/dashboard/Index.vue?3135","webpack:///./src/views/dashboard/Index.vue","webpack:///./src/views/dashboard/Index.vue?61bf","webpack:///./node_modules/core-js/internals/validate-arguments-length.js","webpack:///./node_modules/core-js/modules/es.iterator.find.js"],"names":["getMonthlyEvents","year","month","request","url","method","params","getWeeklyEvents","date","getDailyEvents","createEvent","data","title","start","end","location","description","type","reminder","participants","updateEvent","id","deleteCalendarEvent","getCalendarEvent","defineBuiltIn","uncurryThis","toString","validateArgumentsLength","$URLSearchParams","URLSearchParams","URLSearchParamsPrototype","prototype","getAll","$has","has","undefined","name","length","arguments","$value","this","values","value","index","enumerable","unsafe","getScheduleReminders","markScheduleReminderAsRead","aiChatWithDocuments","responseType","aiChatWithDocumentsStream","onChunk","onComplete","onError","controller","AbortController","signal","token","localStorage","getItem","headers","fetch","body","JSON","stringify","then","async","response","ok","errorData","json","catch","message","Error","status","reader","getReader","decoder","TextDecoder","buffer","lastChatId","processStream","done","read","console","error","decode","stream","lines","split","pop","line","startsWith","jsonStr","substring","trim","parsed","parse","chat_id","err","getAIChatSessions","getAIChatSession","deleteAIChatSession","DESCRIPTORS","defineBuiltInAccessor","forEach","get","count","configurable","append","$delete","push","entries","v","k","key","entry","dindex","found","entriesLength","$","call","aCallable","anObject","getIteratorDirect","createIteratorProxy","callWithSafeIterationClosing","IS_PURE","iteratorClose","iteratorHelperWithoutClosingOnEarlyError","filterWithoutClosingOnEarlyError","TypeError","IteratorProxy","result","iterator","predicate","next","counter","target","proto","real","forced","filter","class","ref","viewBox","width","height","src","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_createVNode","_component_el_button","size","onClick","$setup","clearChat","_component_el_icon","_component_Delete","_hoisted_4","_hoisted_5","_Fragment","_renderList","messages","msg","idx","_normalizeClass","role","_hoisted_6","_cache","cx","cy","r","fill","x","y","text-anchor","font-size","font-family","dy","_hoisted_7","userAvatarUrl","alt","args","handleAvatarError","_hoisted_9","_hoisted_10","_hoisted_11","_toDisplayString","content","innerHTML","streaming","_hoisted_13","source","_hoisted_14","_component_DataAnalysis","_hoisted_15","_component_Cpu","getCardClass","data-event-id","event_id","_hoisted_17","_createBlock","_resolveDynamicComponent","getCardIcon","_hoisted_18","_hoisted_19","getCardTitle","_hoisted_21","$event","editEvent","round","_component_EditPen","deleteEventFromCard","_hoisted_22","files","file","_hoisted_23","ext","_hoisted_24","_component_Document","_hoisted_25","_hoisted_26","_hoisted_27","toUpperCase","_hoisted_28","rightPanelCollapsed","_hoisted_29","_hoisted_30","_component_el_radio_group","chatMode","_component_el_radio_button","label","_component_MagicStick","circle","_component_Fold","_component_Expand","_hoisted_31","_hoisted_32","chatSessions","text","confirmClearAllHistory","_hoisted_33","session","chatId","switchChatSession","_hoisted_35","_component_ChatLineSquare","_hoisted_36","_hoisted_37","_hoisted_38","formatTime","created_at","_hoisted_39","_withModifiers","deleteSession","_hoisted_41","_hoisted_42","selectedFiles","_hoisted_43","_hoisted_44","style","_normalizeStyle","background","bg","_hoisted_46","_hoisted_47","_hoisted_48","_component_el_progress","percentage","progress","stroke-width","_hoisted_49","_component_Check","removeFile","_component_Close","_hoisted_50","onChange","handleFileUpload","multiple","accept","_component_el_tooltip","placement","popper-class","open-delay","triggerFileInput","disabled","loading","_component_UploadFilled","_component_el_input","input","placeholder","onKeyup","_withKeys","sendMsg","processingFiles","_hoisted_51","searchMethod","_component_el_dialog","editEventDialogVisible","append-to-body","destroy-on-close","close-on-click-modal","footer","_withCtx","_hoisted_52","saveEditEvent","editingEvent","_component_el_form","model","label-width","_component_el_form_item","_component_el_date_picker","format","value-format","_component_el_select","_component_el_option","rows","formatSize","toFixed","getExt","arr","toLowerCase","getFileLabel","ext_lower","includes","getFileBg","escapeHtml","html","replace","m","dateTimeStr","Date","getMonth","getDate","getHours","padStart","getMinutes","components","UploadFilled","Document","Close","Check","Delete","DataAnalysis","Cpu","MagicStick","ChatLineSquare","Fold","Expand","Calendar","ChatDotRound","Collection","DocumentCopy","Grid","Connection","CircleCheckFilled","InfoFilled","CircleCloseFilled","WarningFilled","EditPen","setup","proxy","getCurrentInstance","$store","state","user","avatar","rawContent","chatBody","fileInput","computed","some","showContextBar","retrievalScope","currentRequestController","currentEditingMessage","emitter","fetchChatSessions","res","Array","isArray","results","sessionId","map","ElMessage","sessionExists","watch","newChatId","getUserInfo","log","avatarUrl","findAvatar","obj","baseUrl","window","origin","scrollToBottom","nextTick","scrollTop","scrollHeight","uploadFileAndGetId","formData","FormData","rawFile","smoothTimer","lastProgress","uploadFinished","onUploadProgress","progressEvent","percentCompleted","Math","loaded","total","fakeProgress","setInterval","clearInterval","documentId","pollDocumentStatus","interval","min","setTimeout","e","abort","processBuffer","lastMessage","filteredContent","marked","emit","targetCard","find","warning","userMsg","f","assistantMsg","currentInput","currentDocumentIds","Boolean","aiSettings","aiSettingsResponse","success","requestData","document_ids","ai_settings","payload","lastMsg","click","allowedTypes","supportedFormats","validFiles","hasInvalidFile","validExtensions","from","isValidExtension","now","random","FileReader","onload","ev","readAsDataURL","URL","createObjectURL","warn","info","splice","renderer","Renderer","table","header","code","infostring","escaped","codeId","substr","lang","langLabel","langClass","disableStrikethrough","walkTokens","raw","tokens","use","setOptions","breaks","gfm","headerIds","mangle","navigateTo","path","currentPath","pathname","href","navigateToModule","ElMessageBox","confirm","confirmButtonText","cancelButtonText","clearAllHistory","onMounted","document","addEventListener","classList","contains","getAttribute","codeElem","getElementById","navigator","clipboard","writeText","innerText","on","formatDateForPicker","eventData","startTime","getTime","endTime","updateCardDisplay","eventId","eventMsg","eventDate","dateStr","getFullYear","cardElement","querySelector","remove","add","dateObj","isNaN","day","hours","minutes","formatted","__exports__","render","$TypeError","module","exports","passed","required","iterate","findWithoutClosingOnEarlyError","record","stop","IS_RECORD","INTERRUPTED"],"mappings":"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","file":"js/chunk-09678759.859284e4.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Index.vue?vue&type=style&index=2&id=4d090986&lang=css\"","import request from '@/utils/request'\n\n/**\n * 获取月度日历事件\n * @param {Number} year - 年份\n * @param {Number} month - 月份(1-12)\n * @returns {Promise} - 返回月度事件列表\n */\nexport function getMonthlyEvents(year, month) {\n  return request({\n    url: '/api/calendar/events/monthly/',\n    method: 'get',\n    params: { year, month }\n  })\n}\n\n/**\n * 获取周视图日历事件\n * @param {String} date - 日期字符串，格式为YYYY-MM-DD\n * @returns {Promise} - 返回周视图事件列表\n */\nexport function getWeeklyEvents(date) {\n  return request({\n    url: '/api/calendar/events/weekly/',\n    method: 'get',\n    params: { date }\n  })\n}\n\n/**\n * 获取日视图日历事件\n * @param {String} date - 日期字符串，格式为YYYY-MM-DD\n * @returns {Promise} - 返回日视图事件列表\n */\nexport function getDailyEvents(date) {\n  return request({\n    url: '/api/calendar/events/daily/',\n    method: 'get',\n    params: { date }\n  })\n}\n\n/**\n * 创建日历事件\n * @param {Object} data - 事件数据\n * @returns {Promise} - 返回创建的事件\n */\nexport function createEvent(data) {\n  const { title, start, end, location, description, type, reminder, participants } = data\n  \n  return request({\n    url: '/api/calendar/events/',\n    method: 'post',\n    data: { title, start, end, location, description, type, reminder, participants }\n  })\n}\n\n/**\n * 更新日历事件\n * @param {Number} id - 事件ID\n * @param {Object} data - 事件数据\n * @returns {Promise} - 返回更新后的事件\n */\nexport function updateEvent(id, data) {\n  const { title, start, end, location, description, type, reminder, participants } = data\n  \n  return request({\n    url: `/api/calendar/events/${id}/`,\n    method: 'put',\n    data: { title, start, end, location, description, type, reminder, participants }\n  })\n}\n\n/**\n * 删除日历事件\n * @param {number} id - 事件ID\n * @returns {Promise}\n */\nexport function deleteCalendarEvent(id) {\n  return request({\n    url: `/api/calendar/events/${id}/`,\n    method: 'delete'\n  })\n}\n\n/**\n * 获取日历事件详情\n * @param {number} id - 事件ID\n * @returns {Promise}\n */\nexport function getCalendarEvent(id) {\n    return request({\n        url: `/api/calendar/events/${id}/`,\n        method: 'get'\n    })\n} ","'use strict';\nvar defineBuiltIn = require('../internals/define-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toString = require('../internals/to-string');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\n\nvar $URLSearchParams = URLSearchParams;\nvar URLSearchParamsPrototype = $URLSearchParams.prototype;\nvar getAll = uncurryThis(URLSearchParamsPrototype.getAll);\nvar $has = uncurryThis(URLSearchParamsPrototype.has);\nvar params = new $URLSearchParams('a=1');\n\n// `undefined` case is a Chromium 117 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=14222\nif (params.has('a', 2) || !params.has('a', undefined)) {\n  defineBuiltIn(URLSearchParamsPrototype, 'has', function has(name /* , value */) {\n    var length = arguments.length;\n    var $value = length < 2 ? undefined : arguments[1];\n    if (length && $value === undefined) return $has(this, name);\n    var values = getAll(this, name); // also validates `this`\n    validateArgumentsLength(length, 1);\n    var value = toString($value);\n    var index = 0;\n    while (index < values.length) {\n      if (values[index++] === value) return true;\n    } return false;\n  }, { enumerable: true, unsafe: true });\n}\n","import request from '@/utils/request'\n\n/**\n * 获取AI日程提醒\n * @returns {Promise} 返回AI日程提醒列表\n */\nexport function getScheduleReminders() {\n  return request({\n    url: '/api/ai/schedule-reminder/',\n    method: 'get'\n  })\n}\n\n/**\n * 调用AI聊天\n * @param {Object} data - 聊天数据\n * @returns {Promise} 返回AI回复\n */\nexport function aiChat(data) {\n  return request({\n    url: '/api/ai/chat/',\n    method: 'post',\n    data\n  })\n}\n\n/**\n * 生成AI内容\n * @param {Object} data - 生成请求数据\n * @returns {Promise} 返回生成的内容\n */\nexport function generateContent(data) {\n  return request({\n    url: '/api/ai/generate/',\n    method: 'post',\n    data\n  })\n}\n\n/**\n * 标记AI日程提醒为已读\n * @param {number} id - 提醒ID\n * @returns {Promise}\n */\nexport function markScheduleReminderAsRead(id) {\n  return request({\n    url: `/api/ai/recommendations/${id}/mark_as_read/`,\n    method: 'post'\n  })\n}\n\n/**\n * 文档增强AI对话\n * @param {Object} data - { message, chat_id, document_ids }\n * @returns {Promise}\n */\nexport function aiChatWithDocuments(data) {\n  return request({\n    url: '/api/ai/chat-with-documents/',\n    method: 'post',\n    data,\n    responseType: 'text'\n  })\n}\n\n/**\n * 流式文档增强AI对话\n * @param {Object} data - { message, chat_id, document_ids }\n * @param {Function} onChunk - 处理每个数据块的回调函数\n * @param {Function} onComplete - 处理完成时的回调函数\n * @param {Function} onError - 处理错误的回调函数\n * @returns {AbortController} 返回可用于取消请求的控制器\n */\nexport function aiChatWithDocumentsStream(data, onChunk, onComplete, onError) {\n  // 创建AbortController，用于在需要时取消请求\n  const controller = new AbortController();\n  const signal = controller.signal;\n  \n  // 获取Token\n  const token = localStorage.getItem('token');\n  \n  // 构建请求头\n  const headers = {\n    'Content-Type': 'application/json',\n  };\n  \n  if (token) {\n    headers['Authorization'] = `Bearer ${token}`;\n  }\n  \n  // 使用fetch API发起请求\n  fetch('http://localhost:8000/api/ai/chat-with-documents/', {\n    method: 'POST',\n    headers: headers,\n    body: JSON.stringify(data),\n    signal: signal\n  })\n  .then(async response => {\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({ message: '服务返回了错误状态，且响应体不是有效的JSON。' }));\n      throw new Error(errorData.message || `HTTP error! Status: ${response.status}`);\n    }\n\n    const reader = response.body.getReader();\n    const decoder = new TextDecoder(\"utf-8\");\n    let buffer = \"\";\n    let lastChatId = null;\n\n    const processStream = async () => {\n      // eslint-disable-next-line no-constant-condition\n      while (true) {\n        const { done, value } = await reader.read();\n        if (done) {\n          if (buffer) {\n            console.error(\"Stream finished but buffer is not empty:\", buffer);\n          }\n          onComplete && onComplete(lastChatId);\n          break;\n        }\n\n        buffer += decoder.decode(value, { stream: true });\n        const lines = buffer.split('\\n');\n        buffer = lines.pop(); // Keep the last partial line in buffer\n\n        for (const line of lines) {\n          if (line.startsWith(\"data:\")) {\n            const jsonStr = line.substring(5).trim();\n            if (jsonStr === \"[DONE]\") {\n              onComplete && onComplete(lastChatId);\n              return;\n            }\n            try {\n              const parsed = JSON.parse(jsonStr);\n              onChunk && onChunk(parsed, parsed.chat_id);\n\n              // 处理session_id类型的消息，提取chat_id\n              if (parsed.type === 'session_id') {\n                lastChatId = parsed.chat_id;\n              } else if (parsed.chat_id) {\n                lastChatId = parsed.chat_id;\n              }\n            } catch (error) {\n              console.error(\"无法解析JSON流: \", jsonStr, error);\n              onError && onError(new Error(\"无法解析服务器发送的数据\"));\n            }\n          }\n        }\n      }\n    };\n\n    processStream().catch(err => {\n      console.error(\"An error occurred while processing the stream:\", err);\n      onError && onError(err);\n    });\n  })\n  .catch(error => {\n    if (error.name !== 'AbortError') {\n      console.error('Fetch request failed:', error);\n      onError && onError(error);\n    }\n  });\n  \n  // 返回控制器，以便调用者可以取消请求\n  return controller;\n}\n\n/**\n * 获取AI聊天会话列表\n */\nexport function getAIChatSessions() {\n  return request({\n    url: '/api/ai/chats/',\n    method: 'get'\n  })\n}\n\n/**\n * 获取AI聊天会话详情\n * @param {Number} id - 聊天会话ID\n */\nexport function getAIChatSession(id) {\n  return request({\n    url: `/api/ai/chats/${id}/`,\n    method: 'get'\n  })\n}\n\n/**\n * 删除AI聊天会话\n * @param {Number} id - 聊天会话ID\n */\nexport function deleteAIChatSession(id) {\n  return request({\n    url: `/api/ai/chats/${id}/`,\n    method: 'delete'\n  })\n}\n\nexport function getChatHistory(chat_id) {\n  return request({\n    url: `/api/ai/chats/${chat_id}/messages/`,\n    method: 'get'\n  });\n}\n\n/**\n * 与文档进行非流式对话\n * @param {Object} data - { message, chat_id, document_ids, chatMode, search_method }\n */\nexport function chatWithDocuments(data) {\n  return request({\n    url: '/api/ai/chat-with-documents/',\n    method: 'post',\n    data,\n  });\n} ","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Index.vue?vue&type=style&index=5&id=4d090986&lang=css\"","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\n\nvar URLSearchParamsPrototype = URLSearchParams.prototype;\nvar forEach = uncurryThis(URLSearchParamsPrototype.forEach);\n\n// `URLSearchParams.prototype.size` getter\n// https://github.com/whatwg/url/pull/734\nif (DESCRIPTORS && !('size' in URLSearchParamsPrototype)) {\n  defineBuiltInAccessor(URLSearchParamsPrototype, 'size', {\n    get: function size() {\n      var count = 0;\n      forEach(this, function () { count++; });\n      return count;\n    },\n    configurable: true,\n    enumerable: true\n  });\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Index.vue?vue&type=style&index=8&id=4d090986&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Index.vue?vue&type=style&index=1&id=4d090986&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Index.vue?vue&type=style&index=3&id=4d090986&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Index.vue?vue&type=style&index=0&id=4d090986&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Index.vue?vue&type=style&index=4&id=4d090986&lang=scss&scoped=true\"","'use strict';\nvar defineBuiltIn = require('../internals/define-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toString = require('../internals/to-string');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\n\nvar $URLSearchParams = URLSearchParams;\nvar URLSearchParamsPrototype = $URLSearchParams.prototype;\nvar append = uncurryThis(URLSearchParamsPrototype.append);\nvar $delete = uncurryThis(URLSearchParamsPrototype['delete']);\nvar forEach = uncurryThis(URLSearchParamsPrototype.forEach);\nvar push = uncurryThis([].push);\nvar params = new $URLSearchParams('a=1&a=2&b=3');\n\nparams['delete']('a', 1);\n// `undefined` case is a Chromium 117 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=14222\nparams['delete']('b', undefined);\n\nif (params + '' !== 'a=2') {\n  defineBuiltIn(URLSearchParamsPrototype, 'delete', function (name /* , value */) {\n    var length = arguments.length;\n    var $value = length < 2 ? undefined : arguments[1];\n    if (length && $value === undefined) return $delete(this, name);\n    var entries = [];\n    forEach(this, function (v, k) { // also validates `this`\n      push(entries, { key: k, value: v });\n    });\n    validateArgumentsLength(length, 1);\n    var key = toString(name);\n    var value = toString($value);\n    var index = 0;\n    var dindex = 0;\n    var found = false;\n    var entriesLength = entries.length;\n    var entry;\n    while (index < entriesLength) {\n      entry = entries[index++];\n      if (found || entry.key === key) {\n        found = true;\n        $delete(this, entry.key);\n      } else dindex++;\n    }\n    while (dindex < entriesLength) {\n      entry = entries[dindex++];\n      if (!(entry.key === key && entry.value === value)) append(this, entry.key, entry.value);\n    }\n  }, { enumerable: true, unsafe: true });\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar createIteratorProxy = require('../internals/iterator-create-proxy');\nvar callWithSafeIterationClosing = require('../internals/call-with-safe-iteration-closing');\nvar IS_PURE = require('../internals/is-pure');\nvar iteratorClose = require('../internals/iterator-close');\nvar iteratorHelperWithoutClosingOnEarlyError = require('../internals/iterator-helper-without-closing-on-early-error');\n\nvar filterWithoutClosingOnEarlyError = !IS_PURE && iteratorHelperWithoutClosingOnEarlyError('filter', TypeError);\n\nvar IteratorProxy = createIteratorProxy(function () {\n  var iterator = this.iterator;\n  var predicate = this.predicate;\n  var next = this.next;\n  var result, done, value;\n  while (true) {\n    result = anObject(call(next, iterator));\n    done = this.done = !!result.done;\n    if (done) return;\n    value = result.value;\n    if (callWithSafeIterationClosing(iterator, predicate, [value, this.counter++], true)) return value;\n  }\n});\n\n// `Iterator.prototype.filter` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.filter\n$({ target: 'Iterator', proto: true, real: true, forced: IS_PURE || filterWithoutClosingOnEarlyError }, {\n  filter: function filter(predicate) {\n    anObject(this);\n    try {\n      aCallable(predicate);\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    if (filterWithoutClosingOnEarlyError) return call(filterWithoutClosingOnEarlyError, this, predicate);\n\n    return new IteratorProxy(getIteratorDirect(this), {\n      predicate: predicate\n    });\n  }\n});\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Index.vue?vue&type=style&index=7&id=4d090986&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Index.vue?vue&type=style&index=9&id=4d090986&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Index.vue?vue&type=style&index=6&id=4d090986&lang=css\"","<template>\n  <div class=\"openwebui-chat-root\">\n    <div class=\"openwebui-chat-window\">\n      <div class=\"openwebui-chat-header\">\n        <span class=\"openwebui-title\">智慧AI办公助手</span>\n        <el-button type=\"link\" size=\"small\" @click=\"clearChat\" class=\"clear-chat-btn\">\n          <el-icon><Delete /></el-icon> 新对话\n        </el-button>\n      </div>\n      \n      <div class=\"openwebui-chat-container\">\n        <div class=\"openwebui-chat-body\" ref=\"chatBody\">\n          <div v-for=\"(msg, idx) in messages\" :key=\"idx\" :class=\"['openwebui-msg', msg.role]\">\n            <template v-if=\"msg.role==='assistant'\">\n              <div class=\"openwebui-avatar ai-avatar left-avatar\">\n                <svg viewBox=\"0 0 40 40\" width=\"36\" height=\"36\"><circle cx=\"20\" cy=\"20\" r=\"20\" fill=\"#2f54eb\"/><text x=\"50%\" y=\"55%\" text-anchor=\"middle\" fill=\"#fff\" font-size=\"20\" font-family=\"Arial\" dy=\".3em\">🤖</text></svg>\n              </div>\n            </template>\n            <template v-if=\"msg.role==='user'\">\n              <div class=\"openwebui-avatar user-avatar right-avatar\">\n                <img v-if=\"userAvatarUrl\" :src=\"userAvatarUrl\" class=\"user-avatar-img\" alt=\"用户头像\" @error=\"handleAvatarError\" />\n                <svg v-else viewBox=\"0 0 40 40\" width=\"36\" height=\"36\"><circle cx=\"20\" cy=\"20\" r=\"20\" fill=\"#bbb\"/><text x=\"50%\" y=\"55%\" text-anchor=\"middle\" fill=\"#fff\" font-size=\"20\" font-family=\"Arial\" dy=\".3em\">🧑</text></svg>\n              </div>\n            </template>\n            <div class=\"openwebui-msg-bubble\">\n              <template v-if=\"msg.type === 'text'\">\n                <span v-if=\"msg.role==='user'\">{{ msg.content }}</span>\n                <span v-else v-html=\"msg.content\"></span>\n                <span v-if=\"msg.streaming\" class=\"openwebui-cursor\"></span>\n                <div v-if=\"msg.source === 'knowledge_base' && msg.role === 'assistant'\" class=\"source-tag knowledge-base-tag\">\n                  <el-icon><DataAnalysis /></el-icon> 知识库\n                </div>\n                <div v-if=\"msg.source === 'general_ai' && msg.role === 'assistant'\" class=\"source-tag general-ai-tag\">\n                  <el-icon><Cpu /></el-icon> AI大模型\n                </div>\n              </template>\n              <!-- 卡片类型消息渲染（已修改） -->\n              <template v-else-if=\"msg.type === 'card'\">\n                <div class=\"openwebui-card-message\" :class=\"getCardClass(msg.status)\" :data-event-id=\"msg.event_id\">\n                  <div class=\"card-icon-wrapper\">\n                    <el-icon><component :is=\"getCardIcon(msg.status)\" /></el-icon>\n                  </div>\n                  <div class=\"card-content-wrapper\">\n                    <div class=\"card-title\">{{ getCardTitle(msg.status) }}</div>\n                    <div class=\"card-body\" v-html=\"msg.content\"></div>\n                    <!-- 新增：卡片操作按钮 -->\n                    <div v-if=\"msg.status === 'success' && msg.event_id\" class=\"card-actions\">\n                        <el-button size=\"small\" @click=\"editEvent(msg)\" round>\n                          <el-icon><EditPen /></el-icon> 编辑\n                        </el-button>\n                        <el-button type=\"danger\" size=\"small\" @click=\"deleteEventFromCard(msg.event_id)\" round>\n                          <el-icon><Delete /></el-icon> 删除\n                        </el-button>\n                    </div>\n                  </div>\n                </div>\n              </template>\n              <template v-else-if=\"msg.type === 'file'\">\n                <div class=\"file-bubble-nest file-bubble-vertical\">\n                  <div v-for=\"file in msg.files\" :key=\"file.name + file.size\" class=\"file-message-card\">\n                    <div class=\"file-icon-area\">\n                      <img v-if=\"file.ext==='csv'\" src=\"https://cdn.jsdelivr.net/gh/file-icons/icons/svg/csv.svg\" class=\"file-icon-img\" />\n                      <el-icon v-else><Document /></el-icon>\n                    </div>\n                    <div class=\"file-info-area\">\n                      <div class=\"file-name\">{{ file.name }}</div>\n                      <div class=\"file-meta\">{{ file.ext.toUpperCase() }} · {{ file.size }}</div>\n                    </div>\n                  </div>\n                  <div class=\"file-desc-text\" v-if=\"msg.content\">{{ msg.content }}</div>\n                </div>\n              </template>\n            </div>\n          </div>\n        </div>\n        \n        <!-- 右侧面板 - 包含模式切换和历史记录 -->\n        <div class=\"openwebui-right-panel\" :class=\"{'collapsed': rightPanelCollapsed}\">\n          <div class=\"right-panel-header\">\n            <!-- 模式切换按钮 -->\n            <div class=\"right-panel-mode-controls\">\n              <el-radio-group v-model=\"chatMode\" size=\"default\">\n                <el-radio-button label=\"agent\">\n                  <el-icon><MagicStick /></el-icon> AI助手\n                </el-radio-button>\n                <el-radio-button label=\"knowledge_base\">\n                  <el-icon><DataAnalysis /></el-icon> 知识库\n                </el-radio-button>\n              </el-radio-group>\n            </div>\n            \n            <!-- 展开/收起按钮 -->\n            <el-button \n              circle\n              @click=\"rightPanelCollapsed = !rightPanelCollapsed\"\n              :title=\"rightPanelCollapsed ? '展开' : '收起'\"\n              class=\"collapse-button\"\n            >\n              <el-icon :size=\"16\">\n                <Expand v-if=\"!rightPanelCollapsed\" />\n                <Fold v-else />\n              </el-icon>\n            </el-button>\n          </div>\n          \n          <!-- 历史记录内容 -->\n          <div class=\"history-container\">\n            <div class=\"history-header\">\n              <h3 class=\"history-title\">历史记录</h3>\n              <el-button \n                v-if=\"chatSessions.length > 0\"\n                text\n                size=\"small\" \n                class=\"clear-all-btn\"\n                @click=\"confirmClearAllHistory\"\n              >\n                清空\n              </el-button>\n            </div>\n            \n            <div class=\"history-list\">\n              <div \n                v-for=\"(session, index) in chatSessions\" \n                :key=\"session.id\"\n                class=\"history-item\"\n                :class=\"{'active': session.id === chatId}\"\n              >\n                <div class=\"history-item-content\" @click=\"switchChatSession(session.id)\">\n                  <div class=\"history-item-icon\">\n                    <el-icon><ChatLineSquare /></el-icon>\n                  </div>\n                  <div class=\"history-item-info\">\n                    <div class=\"history-item-title\">{{ session.title || `对话 ${index + 1}` }}</div>\n                    <div class=\"history-item-time\">{{ formatTime(session.created_at) }}</div>\n                  </div>\n                </div>\n                <div class=\"history-item-actions\">\n                  <div class=\"delete-btn-wrapper\" @click.stop=\"deleteSession(session.id)\">\n                    <el-icon class=\"delete-icon\"><Delete /></el-icon>\n                  </div>\n                </div>\n              </div>\n              <div v-if=\"chatSessions.length === 0\" class=\"history-empty\">\n                暂无历史记录\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <div class=\"openwebui-chat-footer\">\n        <!-- 预览区放在footer顶部 -->\n        <div v-if=\"selectedFiles.length\" class=\"openwebui-file-preview-bar\">\n          <div v-for=\"(file, idx) in selectedFiles\" :key=\"file.id\" class=\"openwebui-file-card\">\n            <div class=\"openwebui-file-thumb\">\n              <img v-if=\"file.type.startsWith('image/')\" :src=\"file.url\" class=\"openwebui-file-img\" />\n              <div v-else class=\"openwebui-file-icon\" :style=\"{background: file.bg}\">\n                <el-icon v-if=\"file.ext==='pdf'\"><Document /></el-icon>\n                <el-icon v-else-if=\"file.ext==='csv' || file.ext==='xls' || file.ext==='xlsx'\"><Document /></el-icon>\n                <el-icon v-else><Document /></el-icon>\n              </div>\n            </div>\n            <div class=\"openwebui-file-info\">\n              <div class=\"openwebui-file-name\" :title=\"file.name\">{{ file.name }}</div>\n              <div class=\"openwebui-file-meta\">{{ file.label }} · {{ file.size }}</div>\n              <!-- 添加进度条显示 -->\n              <el-progress \n                v-if=\"file.status !== 'completed'\" \n                :percentage=\"file.progress\" \n                :status=\"file.status === 'failed' ? 'exception' : ''\" \n                :stroke-width=\"4\"\n                class=\"openwebui-file-progress\" />\n              <div v-else class=\"openwebui-file-status completed\">\n                <el-icon><Check /></el-icon> 处理完成\n              </div>\n            </div>\n            <el-icon class=\"openwebui-file-remove\" @click=\"removeFile(idx)\"><Close /></el-icon>\n          </div>\n        </div>\n        <!-- 输入区 -->\n        <div class=\"openwebui-input-area\">\n          <input type=\"file\" ref=\"fileInput\" style=\"display:none\" @change=\"handleFileUpload\" multiple \n               accept=\".txt,.pdf,.doc,.docx,.md,.xls,.xlsx,.csv,.jpg,.jpeg,.png,.gif,.bmp,.webp,.svg,.tiff\" />\n          <el-tooltip\n            content=\"文档: txt, pdf, doc, docx, md&#10;表格: xls, xlsx, csv&#10;图片: jpg, jpeg, png, gif, bmp, webp, svg, tiff\"\n            placement=\"top\"\n            popper-class=\"openwebui-upload-tooltip\"\n            :open-delay=\"200\"\n          >\n            <el-button class=\"openwebui-upload-btn\" @click=\"triggerFileInput\" title=\"上传文件/图片\" :disabled=\"loading\">\n              <el-icon><UploadFilled /></el-icon>\n            </el-button>\n          </el-tooltip>\n          <el-input\n            v-model=\"input\"\n            placeholder=\"请输入您的问题...\"\n            @keyup.enter=\"sendMsg\"\n            class=\"openwebui-input\"\n            :disabled=\"loading || processingFiles\"\n          />\n          <el-button type=\"primary\" @click=\"sendMsg\" class=\"openwebui-send-btn\" :loading=\"loading\" :disabled=\"processingFiles\">\n            {{ loading ? '生成中' : (processingFiles ? '处理中' : '发送') }}\n          </el-button>\n        </div>\n        <div class=\"openwebui-options-area\" v-if=\"chatMode === 'knowledge_base'\">\n            <el-radio-group v-model=\"searchMethod\" size=\"small\">\n              <el-radio-button label=\"basic\">基础检索</el-radio-button>\n              <el-radio-button label=\"local\">复杂检索</el-radio-button>\n            </el-radio-group>\n        </div>\n        <div class=\"openwebui-footer-hint\">\n          支持文档、表格、图片等多种格式文件\n        </div>\n      </div>\n    </div>\n\n    <!-- 新增：编辑日程对话框 -->\n    <el-dialog\n      v-model=\"editEventDialogVisible\"\n      title=\"编辑日程\"\n      width=\"500px\"\n      class=\"calendar-dialog\"\n      :append-to-body=\"true\"\n      :destroy-on-close=\"true\"\n      :close-on-click-modal=\"false\"\n    >\n      <el-form :model=\"editingEvent\" label-width=\"80px\" v-if=\"editingEvent\">\n        <el-form-item label=\"标题\">\n          <el-input v-model=\"editingEvent.title\" placeholder=\"请输入日程标题\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"开始时间\">\n          <el-date-picker\n            v-model=\"editingEvent.start\"\n            type=\"datetime\"\n            placeholder=\"选择开始时间\"\n            format=\"YYYY-MM-DD HH:mm\"\n            value-format=\"YYYY-MM-DD HH:mm\"\n          ></el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"结束时间\">\n          <el-date-picker\n            v-model=\"editingEvent.end\"\n            type=\"datetime\"\n            placeholder=\"选择结束时间\"\n            format=\"YYYY-MM-DD HH:mm\"\n            value-format=\"YYYY-MM-DD HH:mm\"\n          ></el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"地点\">\n          <el-input v-model=\"editingEvent.location\" placeholder=\"请输入地点\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"类型\">\n          <el-select v-model=\"editingEvent.type\" placeholder=\"请选择日程类型\">\n            <el-option label=\"会议\" value=\"blue\"></el-option>\n            <el-option label=\"出差\" value=\"orange\"></el-option>\n            <el-option label=\"假期\" value=\"green\"></el-option>\n            <el-option label=\"截止日期\" value=\"red\"></el-option>\n            <el-option label=\"其他\" value=\"purple\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"提醒\">\n          <el-select v-model=\"editingEvent.reminder\" placeholder=\"请选择提醒时间\">\n            <el-option label=\"不提醒\" value=\"none\"></el-option>\n            <el-option label=\"10分钟前\" value=\"10min\"></el-option>\n            <el-option label=\"30分钟前\" value=\"30min\"></el-option>\n            <el-option label=\"1小时前\" value=\"1hour\"></el-option>\n            <el-option label=\"1天前\" value=\"1day\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"备注\">\n          <el-input \n            v-model=\"editingEvent.description\" \n            type=\"textarea\" \n            :rows=\"3\"\n            placeholder=\"请输入备注信息\"\n          ></el-input>\n        </el-form-item>\n      </el-form>\n      <template #footer>\n        <div class=\"dialog-footer\">\n          <el-button @click=\"editEventDialogVisible = false\">取消</el-button>\n          <el-button type=\"primary\" @click=\"saveEditEvent\">确定</el-button>\n        </div>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { ref, nextTick, computed, onMounted, watch } from 'vue'\nimport { UploadFilled, Document, Close, Check, Delete, DataAnalysis, Cpu, MagicStick, ChatLineSquare, Fold, Expand, \n  Calendar, ChatDotRound, Collection, DocumentCopy, Grid, Connection, CircleCheckFilled, InfoFilled, CircleCloseFilled, WarningFilled, EditPen } from '@element-plus/icons-vue'\nimport request from '@/utils/request'\nimport { marked } from 'marked'\nimport { ElMessage, ElMessageBox } from 'element-plus'\nimport { aiChatWithDocumentsStream, getAIChatSessions, getAIChatSession, deleteAIChatSession } from '@/api/ai'\nimport { deleteCalendarEvent } from '@/api/calendar' // 新增导入\nimport { getCurrentInstance } from 'vue';\nimport { getCalendarEvent, updateEvent } from '@/api/calendar' // 新增导入\n\nfunction formatSize(size) {\n  if (size < 1024) return size + 'B';\n  if (size < 1024*1024) return (size/1024).toFixed(1) + 'KB';\n  return (size/1024/1024).toFixed(1) + 'MB';\n}\nfunction getExt(name) {\n  const arr = name.split('.');\n  return arr.length > 1 ? arr[arr.length-1].toLowerCase() : '';\n}\nfunction getFileLabel(type, ext) {\n  const ext_lower = ext.toLowerCase();\n  if (type.startsWith('image/')) return '图片';\n  if (ext_lower === 'pdf') return 'PDF';\n  if (['csv','xls','xlsx'].includes(ext_lower)) return '表格';\n  if (['doc','docx'].includes(ext_lower)) return '文档';\n  if (ext_lower === 'md') return 'Markdown';\n  if (ext_lower === 'txt') return '文本';\n  return ext_lower.toUpperCase();\n}\nfunction getFileBg(ext) {\n  const ext_lower = ext.toLowerCase();\n  if (ext_lower === 'pdf') return '#f87171'; // 红色\n  if (['csv','xls','xlsx'].includes(ext_lower)) return '#34d399'; // 绿色\n  if (['doc','docx'].includes(ext_lower)) return '#60a5fa'; // 蓝色\n  if (ext_lower === 'md') return '#a78bfa'; // 紫色\n  if (ext_lower === 'txt') return '#fbbf24'; // 黄色\n  return '#a5b4fc'; // 默认淡紫色\n}\nfunction escapeHtml(html) {\n  return html.replace(/[&<>\"']/g, function(m) {\n    return ({\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '\"': '&quot;',\n      \"'\": '&#39;'\n    })[m];\n  });\n}\n\n// 格式化日期时间\nfunction formatTime(dateTimeStr) {\n  if (!dateTimeStr) return '';\n  const date = new Date(dateTimeStr);\n  return `${date.getMonth() + 1}月${date.getDate()}日 ${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}`;\n}\n\nexport default {\n  name: 'Dashboard',\n  components: {\n    UploadFilled, Document, Close, Check, Delete, DataAnalysis, Cpu, MagicStick, ChatLineSquare, Fold, Expand,\n    Calendar, ChatDotRound, Collection, DocumentCopy, Grid, Connection, CircleCheckFilled, InfoFilled, CircleCloseFilled, WarningFilled, EditPen\n  },\n  setup() {\n    const { proxy } = getCurrentInstance();\n    const userAvatarUrl = ref(proxy.$store.state.user.avatar)\n    const handleAvatarError = () => {\n      userAvatarUrl.value = ''; // 加载失败时清空，会显示默认SVG\n    };\n    \n    const input = ref('')\n    const messages = ref([\n      { \n        role: 'assistant', \n        content: `<div class=\"welcome-message\">\n          <h3>欢迎来到智行舟平台</h3>\n          <div class=\"platform-intro\">\n            <p>智行舟平台是您的智能协作中心，融合了项目管理、即时通讯、智能文档和AI助手等。我们致力于通过前沿AI技术赋能您的团队，优化业务流程，为您打造无缝连接的未来办公新范式，核心优势如下：</p>\n            \n            <ul class=\"platform-features\">\n              <li><span class=\"feature-highlight\">AI智能引擎</span> - 我们的AI助手能够理解自然语言，处理复杂文档，创建日程，成为您24小时的智能工作伙伴。</li>\n              <li><span class=\"feature-highlight\">一体化协作</span> - 无缝整合项目、日程与沟通工具，打破信息孤岛，让团队协作如行云流水般顺畅，显著提升效率。</li>\n              <li><span class=\"feature-highlight\">智慧文档处理</span> - 从智能合同生成到知识库管理，自动化处理繁杂的文档工作流，让您的团队聚焦于核心创新。</li>\n              <li><span class=\"feature-highlight\">安全可靠保障</span> - 采用企业级数据加密与精细化权限管理，全方位守护您的核心数据资产安全。</li>\n            </ul>\n            \n            <p>借助智行舟平台，您的企业将迈入更敏捷、高效、智能的协作新纪元，激发团队潜力，提升整体竞争力。</p>\n          </div>\n          <p>选择以下功能模块，或直接向我提问，我将为您提供智能助手服务。</p>\n          <div class=\"quick-nav-cards\">\n            <div class=\"nav-card\" onclick=\"window.location.href='/project'\">\n              <div class=\"nav-card-icon\">\n                <i class=\"bi bi-kanban\"></i>\n              </div>\n              <div class=\"nav-card-content\">\n                <div class=\"nav-card-title\">项目协作</div>\n                <div class=\"nav-card-desc\">任务分配、进度跟踪、团队协作</div>\n              </div>\n              <div class=\"nav-card-arrow\"><i class=\"nav-arrow-icon\">→</i></div>\n            </div>\n            <div class=\"nav-card\" onclick=\"window.location.href='/calendar'\">\n              <div class=\"nav-card-icon\">\n                <i class=\"bi bi-calendar-week\"></i>\n              </div>\n              <div class=\"nav-card-content\">\n                <div class=\"nav-card-title\">日程安排</div>\n                <div class=\"nav-card-desc\">会议预约、日程提醒、时间管理</div>\n              </div>\n              <div class=\"nav-card-arrow\"><i class=\"nav-arrow-icon\">→</i></div>\n            </div>\n            <div class=\"nav-card\" onclick=\"window.location.href='/chat'\">\n              <div class=\"nav-card-icon\">\n                <i class=\"bi bi-chat-dots\"></i>\n              </div>\n              <div class=\"nav-card-content\">\n                <div class=\"nav-card-title\">即时沟通</div>\n                <div class=\"nav-card-desc\">团队聊天、文件共享、消息通知</div>\n              </div>\n              <div class=\"nav-card-arrow\"><i class=\"nav-arrow-icon\">→</i></div>\n            </div>\n            <div class=\"nav-card\" onclick=\"window.location.href='/smartdoc'\">\n              <div class=\"nav-card-icon\">\n                <i class=\"bi bi-file-earmark-text\"></i>\n              </div>\n              <div class=\"nav-card-content\">\n                <div class=\"nav-card-title\">智能文档</div>\n                <div class=\"nav-card-desc\">内容创作、智能问答、文档共享</div>\n              </div>\n              <div class=\"nav-card-arrow\"><i class=\"nav-arrow-icon\">→</i></div>\n            </div>\n            <div class=\"nav-card\" onclick=\"window.location.href='/knowledge'\">\n              <div class=\"nav-card-icon\">\n                <i class=\"bi bi-book\"></i>\n              </div>\n              <div class=\"nav-card-content\">\n                <div class=\"nav-card-title\">知识库</div>\n                <div class=\"nav-card-desc\">团队知识共享、检索、存储平台</div>\n              </div>\n              <div class=\"nav-card-arrow\"><i class=\"nav-arrow-icon\">→</i></div>\n            </div>\n            <div class=\"nav-card\" onclick=\"window.location.href='/contract'\">\n              <div class=\"nav-card-icon\">\n                <i class=\"bi bi-file-earmark-ruled\"></i>\n              </div>\n              <div class=\"nav-card-content\">\n                <div class=\"nav-card-title\">智能合同</div>\n                <div class=\"nav-card-desc\">合同模板、AI审查、智能生成</div>\n              </div>\n              <div class=\"nav-card-arrow\"><i class=\"nav-arrow-icon\">→</i></div>\n            </div>\n          </div>\n        </div>`, \n        rawContent: '您好，我是您的AI助手，有什么可以帮您？',\n        type: 'text' \n      }\n    ])\n    const chatBody = ref(null)\n    const fileInput = ref(null)\n    const selectedFiles = ref([])\n    const loading = ref(false)\n    const processingFiles = computed(() => {\n      return selectedFiles.value.some(file => file.status !== 'completed' && file.status !== 'failed');\n    })\n    const chatId = ref(null) // 存储当前聊天ID，用于维持对话上下文\n    const showContextBar = computed(() => chatId.value !== null)\n    const searchMethod = ref('basic') // 新增：搜索方法, 默认为basic\n    const chatMode = ref('agent') // agent 或 knowledge_base\n    const retrievalScope = ref('local') // 'local' 或 'basic'\n    \n    // 添加变量来存储当前请求的控制器\n    const currentRequestController = ref(null);\n    \n    // 右侧面板相关状态\n    const rightPanelCollapsed = ref(false);\n    const chatSessions = ref([]);\n    \n    // 编辑对话框相关状态\n    const editEventDialogVisible = ref(false);\n    const editingEvent = ref(null);\n    const currentEditingMessage = ref(null);\n    \n    // 获取 emitter 实例\n    const emitter = proxy.emitter;\n    \n    // 获取聊天会话列表\n    const fetchChatSessions = async () => {\n      try {\n        const res = await getAIChatSessions();\n        if (res.data && Array.isArray(res.data)) {\n          chatSessions.value = res.data;\n        } else if (res.data && res.data.results && Array.isArray(res.data.results)) {\n          chatSessions.value = res.data.results;\n        }\n        return chatSessions.value;\n      } catch (error) {\n        console.error('获取聊天会话列表失败:', error);\n        chatSessions.value = [];\n        return [];\n      }\n    };\n    \n    // 切换聊天会话\n    const switchChatSession = async (sessionId) => {\n      if (sessionId === chatId.value) return;\n      \n      try {\n        loading.value = true;\n        const res = await getAIChatSession(sessionId);\n        if (res.data) {\n          chatId.value = sessionId;\n          // 加载聊天历史\n          if (res.data.messages && Array.isArray(res.data.messages)) {\n            messages.value = res.data.messages.map(msg => {\n              return {\n                role: msg.role,\n                content: msg.content,\n                rawContent: msg.content,\n                type: msg.type || 'text',\n                source: msg.role === 'user' ? '' : (msg.source || (msg.role === 'assistant' ? 'general_ai' : '')) // 确保用户消息没有source属性\n              }\n            });\n          }\n        }\n      } catch (error) {\n        console.error('获取聊天会话详情失败:', error);\n        ElMessage.error('切换聊天会话失败');\n        \n        // 如果切换失败，检查当前会话列表中是否还有这个会话\n        const sessionExists = chatSessions.value.some(session => session.id === sessionId);\n        if (!sessionExists) {\n          // 如果会话已不存在，尝试切换到第一个可用会话或创建新会话\n          if (chatSessions.value.length > 0) {\n            await switchChatSession(chatSessions.value[0].id);\n          } else {\n            clearChat();\n          }\n        }\n      } finally {\n        loading.value = false;\n      }\n    };\n\n    // 监听聊天ID变化，更新会话列表\n    watch(chatId, (newChatId) => {\n      if (newChatId) {\n        fetchChatSessions();\n      }\n    });\n\n    // 获取用户信息\n    const getUserInfo = async () => {\n      try {\n        const res = await request({\n          url: '/api/auth/users/me/',\n          method: 'get'\n        })\n        console.log('用户信息完整响应:', res)\n\n        // 尝试从响应的不同位置获取头像URL\n        let avatarUrl = null\n        if (res.data && res.data.data && res.data.data.avatar) {\n          avatarUrl = res.data.data.avatar\n        } else if (res.data && res.data.avatar) {\n          avatarUrl = res.data.avatar\n        } else if (res.data) {\n          // 遍历res.data查找avatar字段\n          const findAvatar = (obj) => {\n            if (!obj || typeof obj !== 'object') return null\n            \n            if ('avatar' in obj) return obj.avatar\n            \n            // 递归搜索所有子对象\n            for (const key in obj) {\n              if (typeof obj[key] === 'object') {\n                const result = findAvatar(obj[key])\n                if (result) return result\n              }\n            }\n            return null\n          }\n          \n          avatarUrl = findAvatar(res.data)\n        }\n\n        console.log('找到的头像URL:', avatarUrl)\n        \n        if (avatarUrl) {\n          // 如果是相对路径，添加基础URL\n          if (!avatarUrl.startsWith('http') && !avatarUrl.startsWith('data:')) {\n            // 确保媒体URL正确拼接\n            const baseUrl = window.location.origin\n            if (avatarUrl.startsWith('/')) {\n              userAvatarUrl.value = `${baseUrl}${avatarUrl}`\n            } else {\n              userAvatarUrl.value = `${baseUrl}/${avatarUrl}`\n            }\n          } else {\n            userAvatarUrl.value = avatarUrl\n          }\n          console.log('处理后的用户头像URL:', userAvatarUrl.value)\n        } else {\n          console.log('用户信息中没有找到头像:', res.data)\n        }\n      } catch (error) {\n        console.error('获取用户信息失败:', error)\n      }\n    }\n    \n    const scrollToBottom = () => {\n      nextTick(() => {\n        if (chatBody.value) chatBody.value.scrollTop = chatBody.value.scrollHeight\n      })\n    }\n    \n    const uploadFileAndGetId = async (file) => {\n      const formData = new FormData()\n      formData.append('file', file.rawFile)\n      try {\n        // 标记文件为上传中\n        file.progress = 0;\n        file.status = 'pending';\n        let smoothTimer = null;\n        let lastProgress = 0;\n        let uploadFinished = false;\n        const res = await request({\n          url: '/api/ai/documents/upload/',\n          method: 'post',\n          data: formData,\n          onUploadProgress: (progressEvent) => {\n            const percentCompleted = Math.round((progressEvent.loaded * 100) / progressEvent.total);\n            if (percentCompleted < 100) {\n              file.progress = percentCompleted;\n              lastProgress = percentCompleted;\n            } else {\n              // 上传瞬间完成，平滑递增到95%\n              if (!uploadFinished) {\n                uploadFinished = true;\n                let fakeProgress = lastProgress;\n                smoothTimer = setInterval(() => {\n                  fakeProgress += 3;\n                  if (fakeProgress >= 95) {\n                    fakeProgress = 95;\n                    clearInterval(smoothTimer);\n                  }\n                  file.progress = fakeProgress;\n                }, 20);\n              }\n            }\n          }\n        })\n        // 上传完成后，状态改为处理中，不重置进度条\n        if (smoothTimer) clearInterval(smoothTimer);\n        if (file.progress < 95) file.progress = 95;\n        file.status = 'processing';\n        file.documentId = res.data.id;\n        pollDocumentStatus(file);\n        return res.data.id;\n      } catch (error) {\n        file.status = 'failed';\n        console.error('文件上传失败:', error);\n        throw new Error(`上传文件 ${file.name} 失败: ${error.message || '服务器错误'}`);\n      }\n    }\n    \n    // 轮询文档处理状态\n    const pollDocumentStatus = async (file, interval = 1000) => {\n      if (!file.documentId) return;\n      \n      try {\n        const res = await request({\n          url: `/api/ai/documents/${file.documentId}/`,\n          method: 'get'\n        });\n        \n        if (res.data.status === 'completed') {\n          file.progress = 100;\n          file.status = 'completed';\n          return;\n        } else if (res.data.status === 'failed') {\n          file.status = 'failed';\n          file.progress = 0;\n          return;\n        } else if (res.data.status === 'processing') {\n          // 处理中，增加进度（仅在小于95时递增）\n          if (file.progress < 95) {\n            file.progress = Math.min(file.progress + 5, 95);\n          }\n        }\n        \n        // 继续轮询\n        setTimeout(() => pollDocumentStatus(file, interval), interval);\n      } catch (e) {\n        // 出错时，继续轮询，但不更新进度\n        setTimeout(() => pollDocumentStatus(file, interval), interval);\n      }\n    }\n    \n    const clearChat = () => {\n      // 清空对话历史，开始新的对话\n      chatId.value = null;\n      \n      // 重置消息列表，只保留欢迎消息\n      messages.value = [\n        { \n          role: 'assistant', \n          content: `<div class=\"welcome-message\">\n            <h3>欢迎来到智行舟平台</h3>\n            <div class=\"platform-intro\">\n              <p>智行舟平台是您的智能协作中心，融合了项目管理、即时通讯、智能文档和AI助手。我们致力于通过前沿AI技术赋能您的团队，优化业务流程，为您打造无缝连接的未来办公新范式，核心优势如下：</p>\n              \n              <ul class=\"platform-features\">\n                <li><span class=\"feature-highlight\">AI智能引擎</span> - 我们的AI助手能够理解自然语言，处理复杂文档，自动创建日程，成为您24小时的智能工作伙伴。</li>\n                <li><span class=\"feature-highlight\">一体化协作</span> - 无缝整合项目、日程与沟通工具，打破信息孤岛，让团队协作如行云流水般顺畅，显著提升效率。</li>\n                <li><span class=\"feature-highlight\">智慧文档处理</span> - 从智能合同生成到知识库管理，自动化处理繁杂的文档工作流，让您的团队聚焦于核心创新。</li>\n                <li><span class=\"feature-highlight\">安全可靠保障</span> - 采用企业级数据加密与精细化权限管理，全方位守护您的核心数据资产安全。</li>\n              </ul>\n              \n              <p>借助智行舟平台，您的企业将迈入更敏捷、高效、智能的协作新纪元，激发团队潜力，提升整体竞争力。</p>\n            </div>\n            <p>选择以下功能模块，或直接向我提问，我将为您提供智能助手服务。</p>\n            <div class=\"quick-nav-cards\">\n              <div class=\"nav-card\" onclick=\"window.location.href='/project'\">\n                <div class=\"nav-card-icon\">\n                  <i class=\"bi bi-kanban\"></i>\n                </div>\n                <div class=\"nav-card-content\">\n                  <div class=\"nav-card-title\">项目协作</div>\n                  <div class=\"nav-card-desc\">任务分配、进度跟踪、团队协作</div>\n                </div>\n                <div class=\"nav-card-arrow\"><i class=\"nav-arrow-icon\">→</i></div>\n              </div>\n              <div class=\"nav-card\" onclick=\"window.location.href='/calendar'\">\n                <div class=\"nav-card-icon\">\n                  <i class=\"bi bi-calendar-week\"></i>\n                </div>\n                <div class=\"nav-card-content\">\n                  <div class=\"nav-card-title\">日程安排</div>\n                  <div class=\"nav-card-desc\">会议预约、日程提醒、时间管理</div>\n                </div>\n                <div class=\"nav-card-arrow\"><i class=\"nav-arrow-icon\">→</i></div>\n              </div>\n              <div class=\"nav-card\" onclick=\"window.location.href='/chat'\">\n                <div class=\"nav-card-icon\">\n                  <i class=\"bi bi-chat-dots\"></i>\n                </div>\n                <div class=\"nav-card-content\">\n                  <div class=\"nav-card-title\">即时沟通</div>\n                  <div class=\"nav-card-desc\">团队聊天、文件共享、消息通知</div>\n                </div>\n                <div class=\"nav-card-arrow\"><i class=\"nav-arrow-icon\">→</i></div>\n              </div>\n              <div class=\"nav-card\" onclick=\"window.location.href='/smartdoc'\">\n                <div class=\"nav-card-icon\">\n                  <i class=\"bi bi-file-earmark-text\"></i>\n                </div>\n                <div class=\"nav-card-content\">\n                  <div class=\"nav-card-title\">AI文档</div>\n                  <div class=\"nav-card-desc\">文档摘要、智能问答、内容创作</div>\n                </div>\n                <div class=\"nav-card-arrow\"><i class=\"nav-arrow-icon\">→</i></div>\n              </div>\n              <div class=\"nav-card\" onclick=\"window.location.href='/knowledge'\">\n                <div class=\"nav-card-icon\">\n                  <i class=\"bi bi-book\"></i>\n                </div>\n                <div class=\"nav-card-content\">\n                  <div class=\"nav-card-title\">知识库</div>\n                  <div class=\"nav-card-desc\">团队知识共享、检索、存储平台</div>\n                </div>\n                <div class=\"nav-card-arrow\"><i class=\"nav-arrow-icon\">→</i></div>\n              </div>\n              <div class=\"nav-card\" onclick=\"window.location.href='/contract'\">\n                <div class=\"nav-card-icon\">\n                  <i class=\"bi bi-file-earmark-ruled\"></i>\n                </div>\n                <div class=\"nav-card-content\">\n                  <div class=\"nav-card-title\">智能合同</div>\n                  <div class=\"nav-card-desc\">合同模板、AI审查、智能生成</div>\n                </div>\n                <div class=\"nav-card-arrow\"><i class=\"nav-arrow-icon\">→</i></div>\n              </div>\n            </div>\n          </div>`, \n          rawContent: '您好，我是您的AI助手，有什么可以帮您？',\n          type: 'text' \n        }\n      ];\n      \n      // 清空选择的文件\n      selectedFiles.value = [];\n      \n      // 清空输入框\n      input.value = '';\n      \n      // 如果有正在进行的请求，取消它\n      if (currentRequestController.value) {\n        currentRequestController.value.abort();\n        currentRequestController.value = null;\n      }\n      \n      // 重置加载状态\n      loading.value = false;\n      \n      // 滚动到顶部\n      nextTick(() => {\n        if (chatBody.value) {\n          chatBody.value.scrollTop = 0;\n        }\n      });\n      \n      // 刷新历史记录列表\n      fetchChatSessions();\n    }\n    \n    const processBuffer = (data) => {\n        let lastMessage = messages.value[messages.value.length - 1];\n        if (!lastMessage || lastMessage.role !== 'assistant') {\n            lastMessage = { \n                role: 'assistant', \n                content: '', \n                rawContent: '', \n                type: 'text', \n                streaming: true,\n                source: chatMode.value === 'knowledge_base' ? 'knowledge_base' : 'general_ai' // 根据当前模式设置默认source\n            };\n            messages.value.push(lastMessage);\n        }\n\n        if (data.type === 'processing_start') {\n            lastMessage.type = 'text';\n            lastMessage.content = data.content;\n            lastMessage.rawContent = data.content;\n            lastMessage.streaming = true;\n        } else if (data.type === 'text_chunk') {\n            lastMessage.type = 'text';\n            lastMessage.streaming = true;\n            if (!lastMessage.rawContent || lastMessage.rawContent === \"正在为您处理日程...\") {\n              lastMessage.rawContent = '';\n            }\n            // 在将内容添加到rawContent之前进行过滤\n            const filteredContent = data.content.replace(/\\[Data: Sources \\(\\d+\\)\\]\\.?/g, '');\n            lastMessage.rawContent += filteredContent;\n            // 流式传输时，实时进行markdown转换\n            lastMessage.content = marked.parse(lastMessage.rawContent);\n        } else if (data.type === 'final_card') {\n            lastMessage.type = 'card';\n            lastMessage.streaming = false;\n            lastMessage.content = marked.parse(data.content || '');\n            lastMessage.status = data.status || 'clarification';\n            lastMessage.event_id = data.event_id || null; // 关键：保存event_id\n            \n            // 如果是成功创建日程，触发日历刷新\n            if (data.status === 'success') {\n                emitter.emit('refreshCalendar');\n            }\n        } else if (data.type === 'error') {\n            lastMessage.type = 'card';\n            lastMessage.streaming = false;\n            lastMessage.content = data.content || '发生未知错误。';\n            lastMessage.status = 'error';\n        } else if (data.type === 'update_card') {\n            // 处理卡片更新\n            const targetCard = messages.value.find(msg => \n                msg.type === 'card' && msg.event_id === data.event_id\n            );\n            \n            if (targetCard) {\n                targetCard.content = marked.parse(data.content || '');\n                targetCard.status = data.status || targetCard.status;\n            }\n        } else if (data.type === 'session_id') {\n            // 处理会话ID消息，更新当前聊天ID\n            if (data.chat_id && !chatId.value) {\n                chatId.value = data.chat_id;\n                fetchChatSessions(); // 创建新会话后刷新列表\n            }\n        }\n        scrollToBottom();\n    };\n\n    const sendMsg = async () => {\n      if (!input.value.trim() && selectedFiles.value.length === 0) {\n        ElMessage.warning('请输入内容或上传文件');\n        return;\n      }\n      \n      if (processingFiles.value) {\n        ElMessage.warning('文件正在处理中，请稍候再试');\n        return;\n      }\n      \n      if (currentRequestController.value) {\n        currentRequestController.value.abort();\n      }\n      \n      const userMsg = { role: 'user', content: input.value, type: 'text' };\n      messages.value.push(userMsg);\n      \n      if (selectedFiles.value.length > 0) {\n        messages.value.push({\n          role: 'user',\n          content: `上传了${selectedFiles.value.length}个文件`,\n          type: 'file',\n          files: selectedFiles.value.map(f => ({ name: f.name, size: f.size, ext: f.ext }))\n        });\n      }\n      \n      const assistantMsg = { role: 'assistant', content: '', type: 'text', streaming: true, source: chatMode.value === 'knowledge_base' ? 'knowledge_base' : 'general_ai' };\n      messages.value.push(assistantMsg);\n      \n      const currentInput = input.value;\n      input.value = '';\n      \n      const currentDocumentIds = selectedFiles.value.map(f => f.documentId).filter(Boolean);\n      selectedFiles.value = [];\n      \n      scrollToBottom();\n      loading.value = true;\n      \n      // 获取用户的AI个性化设置\n      let aiSettings = null;\n      try {\n        const aiSettingsResponse = await request({\n          url: '/api/settings/ai-settings',\n          method: 'get'\n        });\n        \n        if (aiSettingsResponse && aiSettingsResponse.success) {\n          aiSettings = aiSettingsResponse.data;\n        }\n      } catch (error) {\n        console.error('获取AI个性化设置失败:', error);\n        // 即使获取失败也继续聊天\n      }\n      \n      const requestData = {\n        message: currentInput,\n        chat_id: chatId.value,\n        document_ids: currentDocumentIds,\n        chatMode: chatMode.value,\n        method: searchMethod.value, // For knowledge base\n        ai_settings: aiSettings // 添加AI个性化设置\n      };\n\n      // 统一使用流式请求处理所有模式\n      currentRequestController.value = aiChatWithDocumentsStream(\n        requestData,\n        // onChunk callback\n        (payload, newChatId) => {\n          if (newChatId && !chatId.value) {\n            chatId.value = newChatId;\n          }\n          processBuffer(payload);\n        },\n        // onComplete callback\n        (newChatId) => {\n          const lastMsg = messages.value[messages.value.length - 1];\n          if (lastMsg && lastMsg.role === 'assistant') {\n            lastMsg.streaming = false;\n          }\n          if (newChatId && !chatId.value) {\n            chatId.value = newChatId;\n            fetchChatSessions(); // 创建新会话后刷新列表\n          }\n          loading.value = false;\n          currentRequestController.value = null;\n        },\n        // onError callback\n        (error) => {\n          console.error('流式请求出错:', error);\n          const lastMsg = messages.value[messages.value.length - 1];\n          if (lastMsg && lastMsg.role === 'assistant') {\n            lastMsg.content = '抱歉，响应生成过程中出现错误，请稍后重试。';\n            lastMsg.streaming = false;\n          }\n          loading.value = false;\n          currentRequestController.value = null;\n          ElMessage.error('请求出错: ' + (error.message || '未知错误'));\n        }\n      );\n    }\n    \n    const triggerFileInput = () => {\n      if (fileInput.value) fileInput.value.value = '';\n      fileInput.value && fileInput.value.click()\n    }\n    \n    const handleFileUpload = (e) => {\n      const files = e.target.files\n      if (!files || !files.length) return\n      \n      // 支持的文件类型配置\n      const allowedTypes = {\n        // 文档类型\n        'text/plain': 'txt',                          // txt文件\n        'application/pdf': 'pdf',                     // pdf文件\n        'application/msword': 'doc',                  // doc文件\n        'application/vnd.openxmlformats-officedocument.wordprocessingml.document': 'docx', // docx文件\n        'text/markdown': 'md',                        // markdown文件\n        'text/x-markdown': 'md',                      // markdown文件变体\n        \n        // 表格类型\n        'text/csv': 'csv',                            // csv文件\n        'application/csv': 'csv',                     // csv文件另一种MIME\n        'application/vnd.ms-excel': 'xls',            // xls文件\n        'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': 'xlsx', // xlsx文件\n        \n        // 图片类型\n        'image/jpeg': 'jpg',                          // jpg/jpeg图片\n        'image/png': 'png',                           // png图片\n        'image/gif': 'gif',                           // gif图片\n        'image/bmp': 'bmp',                           // bmp图片\n        'image/webp': 'webp',                         // webp图片\n        'image/svg+xml': 'svg',                       // svg矢量图\n        'image/tiff': 'tiff'                          // tiff图片\n      };\n      \n      // 显示支持的文件格式提示\n      const supportedFormats = '支持的文件格式: txt, pdf, doc, docx, md, xls, xlsx, csv 和常见图片格式';\n      \n      // 检查每个文件\n      const validFiles = [];\n      let hasInvalidFile = false;\n      \n      // 有效的文件扩展名列表（不区分大小写）\n      const validExtensions = ['txt', 'pdf', 'doc', 'docx', 'md', 'xls', 'xlsx', 'csv', \n                              'jpg', 'jpeg', 'png', 'gif', 'bmp', 'webp', 'svg', 'tiff'];\n      \n      Array.from(files).forEach(file => {\n        const ext = getExt(file.name).toLowerCase();\n        const isValidExtension = validExtensions.includes(ext);\n        \n        // 检查MIME类型或扩展名是否有效\n        if (allowedTypes[file.type] || isValidExtension) {\n          const id = file.name + '_' + file.size + '_' + Date.now() + Math.random()\n          if (file.type.startsWith('image/')) {\n            const reader = new FileReader()\n            reader.onload = (ev) => {\n              selectedFiles.value.push({\n                id,\n                name: file.name,\n                type: file.type,\n                url: ev.target.result,\n                size: formatSize(file.size),\n                ext,\n                label: getFileLabel(file.type, ext),\n                bg: getFileBg(ext),\n                rawFile: file,\n                progress: 0,\n                status: 'ready'\n              })\n              // 自动上传\n              uploadFileAndGetId(selectedFiles.value[selectedFiles.value.length - 1])\n            }\n            reader.readAsDataURL(file)\n          } else {\n            selectedFiles.value.push({\n              id,\n              name: file.name,\n              type: file.type,\n              url: URL.createObjectURL(file),\n              size: formatSize(file.size),\n              ext,\n              label: getFileLabel(file.type, ext),\n              bg: getFileBg(ext),\n              rawFile: file, // 直接使用原始file对象\n              progress: 0,\n              status: 'ready'\n            })\n            // 自动上传\n            uploadFileAndGetId(selectedFiles.value[selectedFiles.value.length - 1])\n          }\n          validFiles.push(selectedFiles.value[selectedFiles.value.length - 1])\n        } else {\n          hasInvalidFile = true;\n          ElMessage.error(`不支持的文件类型: ${file.name}`);\n          console.warn(`文件类型拒绝: ${file.name}, MIME: ${file.type}, 扩展名: ${ext}`);\n        }\n      })\n      \n      // 在有不支持文件类型时显示支持的格式信息\n      if (hasInvalidFile) {\n        ElMessage.info(supportedFormats);\n      }\n      \n      // 如果全部文件都是有效的，显示成功上传提示\n      if (validFiles.length > 0 && validFiles.length === files.length) {\n        ElMessage.success(`已添加${validFiles.length}个文件`);\n      }\n    }\n    \n    const removeFile = (idx) => {\n      selectedFiles.value.splice(idx, 1)\n    }\n\n    // marked配置：表格带边框+代码块美化+复制按钮\n    const renderer = new marked.Renderer();\n    renderer.table = function(header, body) {\n      return `<table class=\"openwebui-md-table\"><thead>${header}</thead><tbody>${body}</tbody></table>`;\n    };\n    renderer.code = function(code, infostring, escaped) {\n      const codeId = 'code-' + Math.random().toString(36).substr(2, 9);\n      let lang = (infostring || '').split(/\\s+/)[0];\n      let langLabel = lang ? lang : 'code';\n      let langClass = lang ? `language-${lang}` : '';\n      return `\n        <div class=\"openwebui-md-code-block-beauty\">\n          <div class=\"openwebui-md-code-toolbar\">\n            <span class=\"openwebui-md-code-lang\">${langLabel}</span>\n            <button class=\"openwebui-copy-btn\" data-clipboard-target=\"#${codeId}\" title=\"复制代码\">复制</button>\n          </div>\n          <pre class=\"openwebui-md-pre\"><code id=\"${codeId}\" class=\"${langClass}\">${escaped ? code : escapeHtml(code)}</code></pre>\n        </div>\n      `;\n    };\n    \n    // 新增：自定义扩展，禁用删除线功能\n    const disableStrikethrough = {\n      walkTokens(token) {\n        if (token.type === 'del') {\n          // 将删除线（del）类型的token改写为普通文本（text）类型\n          token.type = 'text';\n          token.text = token.raw; // 使用原始文本，保留'~~'\n          delete token.tokens;\n        }\n      },\n    };\n\n    marked.use(disableStrikethrough);\n    \n    marked.setOptions({\n      breaks: true,\n      gfm: true,\n      headerIds: false,\n      mangle: false,\n      renderer\n    })\n\n    // --- 卡片样式辅助函数 (新增) ---\n    const getCardClass = (status) => {\n      switch (status) {\n        case 'success':\n          return 'success-card';\n        case 'error':\n          return 'error-card';\n        case 'clarification':\n          return 'clarification-card';\n        case 'deleted':\n          return 'deleted-card';\n        default:\n          return '';\n      }\n    };\n    const getCardIcon = (status) => {\n      switch (status) {\n        case 'success':\n          return 'CircleCheckFilled';\n        case 'error':\n          return 'CircleCloseFilled';\n        case 'clarification':\n          return 'InfoFilled';\n        case 'deleted':\n          return 'WarningFilled';\n        default:\n          return 'InfoFilled';\n      }\n    };\n    const getCardTitle = (status) => {\n      switch (status) {\n        case 'success':\n          return '日程操作成功';\n        case 'error':\n          return '操作失败';\n        case 'clarification':\n          return '需要确认';\n        case 'deleted':\n          return '日程已删除';\n        default:\n          return '提示信息';\n      }\n    };\n    // ------------------------------------\n    \n    // 导航到其他模块\n    const navigateTo = (path) => {\n      // 获取当前路由路径\n      const currentPath = window.location.pathname;\n      // 如果已经在指定路径，不进行跳转\n      if (currentPath.includes(path)) return;\n      \n      // 在同一tab中导航\n      window.location.href = `/${path}`;\n    }\n\n    // 这个方法在welcome-message中使用\n    const navigateToModule = (path) => {\n      navigateTo(path);\n    }\n\n    // 删除单个聊天会话\n    const deleteSession = async (sessionId) => {\n      try {\n        await ElMessageBox.confirm(\n          '确认要删除这条对话记录吗？',\n          '提示',\n          {\n            confirmButtonText: '确认',\n            cancelButtonText: '取消',\n            type: 'info',\n          }\n        );\n        \n        await deleteAIChatSession(sessionId);\n        \n        // 刷新会话列表\n        await fetchChatSessions();\n        \n        // 无论删除的是不是当前会话，都直接创建新会话\n        clearChat(); // 清空当前会话，创建新对话\n        ElMessage.success('对话已删除，已创建新对话');\n      } catch (error) {\n        if (error !== 'cancel' && error !== 'close') {\n          console.error('删除聊天会话失败:', error);\n          ElMessage.error('删除失败，请稍后重试');\n        }\n      }\n    }\n\n    // 确认清空所有历史记录\n    const confirmClearAllHistory = () => {\n      ElMessageBox.confirm(\n        '确认要清空所有历史记录吗？此操作不可恢复。',\n        '警告',\n        {\n          confirmButtonText: '确认',\n          cancelButtonText: '取消',\n          type: 'warning',\n        }\n      )\n        .then(() => {\n          clearAllHistory();\n        })\n        .catch(() => {\n          // 用户取消，不做任何操作\n        });\n    }\n\n    // 清空所有历史记录\n    const clearAllHistory = async () => {\n      try {\n        // 显示加载状态\n        loading.value = true;\n        \n        for (const session of chatSessions.value) {\n          await deleteAIChatSession(session.id);\n        }\n        \n        // 清空会话列表\n        chatSessions.value = [];\n        \n        // 清空当前会话，创建新对话\n        clearChat();\n        \n        ElMessage.success('所有历史记录已清空，已创建新对话');\n      } catch (error) {\n        console.error('清空历史记录失败:', error);\n        ElMessage.error('操作失败，请稍后重试');\n      } finally {\n        // 关闭加载状态\n        loading.value = false;\n      }\n    }\n\n    onMounted(() => {\n      document.body.addEventListener('click', function(e) {\n        if (e.target.classList && e.target.classList.contains('openwebui-copy-btn')) {\n          const codeId = e.target.getAttribute('data-clipboard-target').replace('#', '');\n          const codeElem = document.getElementById(codeId);\n          if (codeElem) {\n            navigator.clipboard.writeText(codeElem.innerText).then(() => {\n              e.target.innerText = '已复制';\n              setTimeout(() => { e.target.innerText = '复制'; }, 1200);\n            });\n          }\n        }\n      });\n      \n      // 获取用户头像\n      getUserInfo();\n      \n      // 获取聊天会话列表并初始化界面\n      fetchChatSessions().then(() => {\n        // 如果没有历史会话，确保显示新对话界面\n        if (chatSessions.value.length === 0) {\n          clearChat();\n        }\n      });\n      \n      // 添加页面卸载时的清理\n      window.addEventListener('beforeunload', () => {\n        if (currentRequestController.value) {\n          currentRequestController.value.abort();\n        }\n      });\n    });\n\n    // 监控日历刷新事件\n    emitter.on('refreshCalendar', () => {\n      // 假设日历有自己的刷新方法，这里我们调用它\n      // 如果日历组件有ref, 可以是 this.$refs.calendar.fetchEvents();\n      // 或者如果刷新逻辑在当前组件内，直接调用\n      console.log('收到日历刷新事件，正在重新加载数据...');\n      // 示例: findCalendarComponentAndRefresh();\n    });\n\n    // --- 新增：卡片操作函数 ---\n    const editEvent = async (msg) => {\n      try {\n        // 获取事件详情\n        const { data } = await getCalendarEvent(msg.event_id);\n        \n        // 存储当前正在编辑的消息卡片\n        currentEditingMessage.value = msg;\n\n        // 设置表单数据\n        editingEvent.value = {\n          id: data.id,\n          title: data.title,\n          start: formatDateForPicker(new Date(data.start)),\n          end: formatDateForPicker(new Date(data.end)),\n          location: data.location || '',\n          description: data.description || '',\n          type: data.type || 'blue',\n          reminder: data.reminder || '30min',\n          participants: data.participants || []\n        };\n        \n        // 打开对话框\n        editEventDialogVisible.value = true;\n        \n      } catch (error) {\n        console.error(\"获取事件详情失败:\", error);\n        ElMessage.error('无法获取日程详情，请稍后重试');\n      }\n    };\n\n    const saveEditEvent = async () => {\n      if (!editingEvent.value) return;\n\n      const eventData = editingEvent.value;\n      \n      // 验证必填字段\n      if (!eventData.title || !eventData.title.trim()) {\n        ElMessage.warning('标题不能为空');\n        return;\n      }\n      \n      if (!eventData.start) {\n        ElMessage.warning('请选择开始时间');\n        return;\n      }\n      \n      if (!eventData.end) {\n        ElMessage.warning('请选择结束时间');\n        return;\n      }\n      \n      // 验证开始时间不晚于结束时间\n      const startTime = new Date(eventData.start).getTime();\n      const endTime = new Date(eventData.end).getTime();\n      if (startTime > endTime) {\n        ElMessage.warning('结束时间不能早于开始时间');\n        return;\n      }\n      \n      try {\n        await updateEvent(eventData.id, {\n          title: eventData.title,\n          start: eventData.start,\n          end: eventData.end,\n          location: eventData.location,\n          description: eventData.description,\n          type: eventData.type,\n          reminder: eventData.reminder,\n          participants: eventData.participants\n        });\n\n        ElMessage.success('日程已成功更新！');\n        editEventDialogVisible.value = false;\n\n        // 更新卡片显示\n        if (currentEditingMessage.value) {\n          updateCardDisplay(currentEditingMessage.value, eventData.title, eventData.description);\n        }\n\n        // 通知日历刷新\n        emitter.emit('refreshCalendar');\n        \n        // 清理\n        editingEvent.value = null;\n        currentEditingMessage.value = null;\n\n      } catch (error) {\n        console.error('更新事件失败:', error);\n        ElMessage.error('更新失败，请稍后重试');\n      }\n    };\n\n    const deleteEventFromCard = async (eventId) => {\n      try {\n        await ElMessageBox.confirm(\n          '您确定要删除这个日程吗？',\n          '确认删除',\n          {\n            confirmButtonText: '确定',\n            cancelButtonText: '取消',\n            type: 'warning',\n          }\n        );\n        \n        await deleteCalendarEvent(eventId);\n        ElMessage.success('日程已成功删除！');\n        \n        // 找到对应的消息卡片并更新状态\n        const eventMsg = messages.value.find(msg => msg.type === 'card' && msg.event_id === eventId);\n        if (eventMsg) {\n          eventMsg.content = '该日程已被删除';\n          eventMsg.status = 'deleted';\n        }\n        \n        // 通知日历刷新\n        emitter.emit('refreshCalendar');\n        \n      } catch (error) {\n        if (error === 'cancel') {\n          // 用户取消操作\n          return;\n        }\n        // 处理404错误\n        if (error.response && error.response.status === 404) {\n          ElMessage.error('操作失败：该日程已被删除或不存在。');\n        } else {\n          console.error(\"从卡片删除日程时出错:\", error);\n          ElMessage.error('删除失败，请稍后重试。');\n        }\n      }\n    };\n    \n    // 更新卡片显示\n    const updateCardDisplay = (msg, title, description) => {\n      // 构建新的卡片内容\n      const eventDate = new Date();\n      const dateStr = `${eventDate.getFullYear()}年${eventDate.getMonth() + 1}月${eventDate.getDate()}日`;\n      let content = `已成功更新日程：**${title}**\\n\\n`;\n      content += `日期：${dateStr}\\n\\n`;\n      if (description) {\n        content += `描述：${description}\\n\\n`;\n      }\n      content += `您可以在日历中查看完整详情。`;\n      \n      // 更新卡片内容\n      msg.content = marked.parse(content);\n      \n      // 确保卡片状态为成功\n      msg.status = 'success';\n      \n      // 强制重新渲染卡片\n      nextTick(() => {\n        const cardElement = document.querySelector(`.openwebui-card-message[data-event-id=\"${msg.event_id}\"]`);\n        if (cardElement) {\n          cardElement.classList.remove('clarification-card', 'error-card', 'deleted-card');\n          cardElement.classList.add('success-card');\n        }\n      });\n    };\n    \n    // 为日期选择器格式化日期 (保留此函数以兼容其他地方的调用)\n    const formatDateForPicker = (date) => {\n      if (!date) return '';\n      \n      try {\n        // 确保使用有效的Date对象\n        let dateObj;\n        if (date instanceof Date) {\n          if (isNaN(date.getTime())) {\n            console.error('无效日期对象', date);\n            dateObj = new Date(); // 使用当前时间作为回退\n          } else {\n            dateObj = date;\n          }\n        } else {\n          // 尝试解析字符串日期\n          dateObj = new Date(date);\n          if (isNaN(dateObj.getTime())) {\n            console.error('无效日期字符串', date);\n            dateObj = new Date(); // 使用当前时间作为回退\n          }\n        }\n      \n        // 使用直接获取年月日时分的方式，不涉及时区转换\n        const year = dateObj.getFullYear();\n        const month = (dateObj.getMonth() + 1).toString().padStart(2, '0');\n        const day = dateObj.getDate().toString().padStart(2, '0');\n        const hours = dateObj.getHours().toString().padStart(2, '0');\n        const minutes = dateObj.getMinutes().toString().padStart(2, '0');\n        \n        const formatted = `${year}-${month}-${day} ${hours}:${minutes}`;\n        return formatted;\n      } catch (error) {\n        console.error('日期格式化错误:', error);\n        // 返回当前时间作为回退选项\n        const now = new Date();\n        return `${now.getFullYear()}-${(now.getMonth() + 1).toString().padStart(2, '0')}-${now.getDate().toString().padStart(2, '0')} ${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;\n      }\n    };\n\n    return {\n      input, \n      messages, \n      sendMsg, \n      chatBody, \n      fileInput,\n      triggerFileInput, \n      handleFileUpload, \n      selectedFiles, \n      removeFile, \n      UploadFilled, \n      Document, \n      Close, \n      Check,\n      loading, \n      processingFiles,\n      clearChat,\n      showContextBar,\n      chatId,\n      userAvatarUrl,\n      handleAvatarError,\n      searchMethod,\n      chatMode,\n      retrievalScope,\n      // 右侧面板相关\n      rightPanelCollapsed,\n      chatSessions,\n      switchChatSession,\n      formatTime,\n      navigateTo,\n      navigateToModule,\n      // 图标组件\n      Calendar, \n      ChatDotRound, \n      Collection, \n      DocumentCopy,\n      Grid,\n      Connection,\n      deleteSession,\n      confirmClearAllHistory,\n      clearAllHistory,\n      getCardClass,\n      getCardIcon,\n      getCardTitle,\n      editEvent,\n      deleteEventFromCard,\n      editEventDialogVisible,\n      editingEvent,\n      saveEditEvent,\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.dashboard-container {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n}\n\n.openwebui-chat-root {\n  width: 100%;\n  height: 100%;\n  min-height: 0;\n  min-width: 0;\n  background: var(--bg-color);\n  display: flex;\n  align-items: stretch;\n  justify-content: stretch;\n  margin: 0;\n  padding: 0;\n  overflow: hidden;\n}\n\n.openwebui-chat-window {\n  width: 100%;\n  height: 100%;\n  min-height: 0;\n  background: var(--bg-color);\n  border-radius: 0;\n  box-shadow: none;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  margin: 0;\n}\n\n.openwebui-chat-header {\n  height: 56px;\n  background: var(--bg-color-secondary);\n  display: flex;\n  align-items: center;\n  padding: 0 24px;\n  font-size: 18px;\n  font-weight: 600;\n  border-bottom: 1px solid var(--border-color);\n  flex-shrink: 0;\n  justify-content: space-between;\n  color: var(--text-color);\n}\n\n.header-center-controls {\n  display: flex;\n  gap: 16px;\n  align-items: center;\n}\n\n.openwebui-title {\n  color: var(--primary-color);\n}\n\n.clear-chat-btn {\n  color: var(--text-color-secondary);\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  font-size: 14px;\n  font-weight: normal;\n}\n\n.clear-chat-btn:hover {\n  color: var(--primary-color);\n}\n\n.openwebui-file-preview-bar {\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n  gap: 12px;\n  padding: 12px 0 8px 0;\n  background: transparent;\n  border-bottom: none;\n  overflow-x: auto;\n  min-height: 64px;\n  z-index: 3;\n}\n\n.openwebui-file-card {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  background: var(--bg-color-secondary);\n  border-radius: 14px;\n  box-shadow: 0 2px 8px rgba(var(--primary-color-rgb),0.04);\n  padding: 8px 16px 8px 8px;\n  min-width: 160px;\n  max-width: 240px;\n  position: relative;\n  color: var(--text-color);\n}\n\n.openwebui-file-thumb {\n  width: 40px;\n  height: 40px;\n  border-radius: 8px;\n  background: var(--bg-color-tertiary);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n  margin-right: 10px;\n}\n\n.openwebui-file-img {\n  width: 40px;\n  height: 40px;\n  object-fit: cover;\n  border-radius: 8px;\n}\n\n.openwebui-file-icon {\n  width: 32px;\n  height: 32px;\n  border-radius: 6px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #fff;\n  font-size: 22px;\n}\n\n.openwebui-file-info {\n  flex: 1;\n  min-width: 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n\n.openwebui-file-name {\n  font-size: 14px;\n  color: var(--text-color);\n  font-weight: 500;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 120px;\n}\n\n.openwebui-file-meta {\n  font-size: 12px;\n  color: var(--text-color-secondary);\n  margin-top: 2px;\n}\n\n.openwebui-file-progress {\n  margin-top: 4px;\n  width: 100%;\n}\n\n.openwebui-file-status.completed {\n  color: var(--success-color);\n}\n\n.openwebui-file-remove {\n  position: absolute;\n  top: 4px;\n  right: 4px;\n  color: var(--text-color-tertiary);\n  font-size: 16px;\n  cursor: pointer;\n  transition: color 0.2s;\n}\n\n.openwebui-file-remove:hover {\n  color: var(--error-color);\n}\n\n.openwebui-chat-container {\n  display: flex;\n  flex: 1;\n  overflow: hidden;\n  position: relative;\n}\n\n.openwebui-chat-body {\n  flex: 1;\n  overflow-y: auto;\n  padding: 0 16px 12px 16px;\n  background: var(--bg-color);\n  display: flex;\n  flex-direction: column;\n  min-height: 0;\n  max-height: calc(100vh - 200px);\n  height: calc(100vh - 200px);\n  flex-shrink: 1;\n  scrollbar-width: thin;\n  width: auto;\n  transition: all 0.3s ease;\n}\n\n.openwebui-msg {\n  display: flex;\n  align-items: flex-end;\n  margin-bottom: 16px;\n  flex-direction: row;\n  justify-content: flex-start;\n}\n\n.openwebui-msg.user {\n  flex-direction: row-reverse;\n  justify-content: flex-end;\n  align-items: flex-end;\n  margin-left: auto;\n  margin-right: 0;\n}\n\n.openwebui-msg.assistant {\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: flex-end;\n  margin-right: auto;\n  margin-left: 0;\n}\n\n.openwebui-msg-bubble {\n  position: relative;\n  max-width: 90%;\n  padding: 12px 18px;\n  border-radius: 20px;\n  word-wrap: break-word;\n  overflow-wrap: break-word;\n  box-shadow: 0 1px 2px rgba(0,0,0,0.05);\n  line-height: 1.6;\n}\n\n.openwebui-msg.user .openwebui-msg-bubble {\n  background: var(--primary-color);\n  color: #fff;\n  border-bottom-right-radius: 4px;\n  margin-right: 8px;\n  margin-left: auto;\n}\n\n.openwebui-msg.assistant .openwebui-msg-bubble {\n  background: var(--bg-color-secondary);\n  color: var(--text-color);\n  border-bottom-left-radius: 4px;\n  margin-left: 8px;\n  margin-right: auto;\n}\n\n.openwebui-avatar {\n  width: 36px;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n  margin-bottom: auto;\n}\n\n.left-avatar {\n  margin-right: 8px;\n}\n\n.right-avatar {\n  margin-left: 8px;\n}\n\n.user-avatar-img {\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n  object-fit: cover;\n  overflow: hidden;\n  display: block;\n  background-color: #f0f2f5;\n}\n\n.openwebui-user-label {\n  font-weight: bold;\n  margin-right: 4px;\n}\n\n.openwebui-ai-label {\n  font-weight: bold;\n  color: #2f54eb;\n  margin-right: 4px;\n}\n\n.openwebui-chat-footer {\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  padding: 0 16px 12px 16px;\n  background: var(--bg-color);\n  border-top: 1px solid var(--border-color);\n  margin: 0;\n  flex-shrink: 0;\n  box-shadow: 0 -2px 16px 0 rgba(var(--primary-color-rgb),0.03);\n  z-index: 2;\n}\n\n.openwebui-input-area {\n  display: flex;\n  align-items: center;\n  width: 100%;\n}\n\n.openwebui-input {\n  flex: 1;\n  margin-right: 12px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n}\n\n.openwebui-send-btn {\n  min-width: 72px;\n  height: 40px;\n  font-size: 16px;\n  font-weight: 500;\n  border-radius: 8px;\n}\n\n.openwebui-upload-btn {\n  margin-right: 8px;\n  font-size: 20px;\n  background: var(--bg-color-tertiary);\n  border: 1px solid var(--border-color);\n  color: var(--primary-color);\n  cursor: pointer;\n  border-radius: 8px;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: border 0.2s, box-shadow 0.2s;\n}\n\n.openwebui-upload-btn:hover {\n  border: 1.5px solid var(--primary-color);\n  box-shadow: 0 2px 8px rgba(var(--primary-color-rgb),0.08);\n}\n\n.openwebui-img-preview {\n  max-width: 180px;\n  max-height: 120px;\n  border-radius: 8px;\n  display: block;\n  margin: 4px 0;\n  box-shadow: 0 2px 8px rgba(47,84,235,0.08);\n}\n\n.openwebui-file-link {\n  color: var(--primary-color);\n  text-decoration: underline;\n  word-break: break-all;\n}\n\n.openwebui-cursor {\n  display: inline-block;\n  width: 8px;\n  height: 16px;\n  background: var(--primary-color);\n  margin-left: 2px;\n  vertical-align: middle;\n  animation: blink 0.8s infinite;\n}\n\n@keyframes blink {\n  0% { opacity: 1; }\n  50% { opacity: 0; }\n  100% { opacity: 1; }\n}\n\n.file-bubble-nest {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n}\n\n.file-bubble-vertical {\n  justify-content: flex-start;\n  align-items: flex-start;\n}\n\n.file-message-card {\n  display: flex;\n  align-items: center;\n  background: var(--bg-color-secondary);\n  border-radius: 12px;\n  padding: 8px 16px;\n  margin-bottom: 0;\n  min-width: 180px;\n  max-width: 320px;\n  box-shadow: 0 2px 8px rgba(var(--primary-color-rgb),0.04);\n  color: var(--text-color);\n}\n\n.file-icon-area {\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-right: 12px;\n}\n\n.file-icon-img {\n  width: 32px;\n  height: 32px;\n}\n\n.file-info-area {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n\n.file-name {\n  font-size: 15px;\n  font-weight: 500;\n  color: var(--text-color);\n  margin-bottom: 2px;\n  word-break: break-all;\n}\n\n.file-meta {\n  font-size: 12px;\n  color: var(--text-color-secondary);\n}\n\n.file-desc-text {\n  margin-top: 8px;\n  font-size: 15px;\n  color: var(--text-color);\n  background: transparent;\n  border-radius: 8px;\n  padding: 0 2px;\n  display: inline-block;\n  word-break: break-all;\n}\n\n.openwebui-context-bar {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px 24px;\n  background-color: var(--bg-color-tertiary);\n  border-bottom: 1px solid var(--border-color);\n  font-size: 14px;\n  color: var(--text-color-secondary);\n}\n\n.context-info {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n\n.context-icon {\n  color: var(--primary-color);\n  font-size: 16px;\n}\n\n.source-tag {\n  font-size: 10px;\n  color: #888;\n  margin-top: 8px;\n  display: inline-flex;\n  align-items: center;\n  padding: 2px 6px;\n  border-radius: 4px;\n  .el-icon {\n    margin-right: 4px;\n  }\n}\n\n.knowledge-base-tag {\n  background-color: #e8f5e9; /* Light green */\n  color: #2e7d32;\n}\n\n.general-ai-tag {\n  background-color: #e3f2fd; /* Light blue */\n  color: #1565c0;\n}\n\n/* 右侧面板样式 */\n.openwebui-right-panel {\n  width: 320px;\n  height: 100%;\n  background: var(--el-bg-color-page);\n  border-left: 1px solid var(--el-border-color);\n  display: flex;\n  flex-direction: column;\n  transition: width 0.3s ease;\n  overflow: hidden;\n}\n\n.openwebui-right-panel.collapsed {\n  width: 50px;\n}\n\n.right-panel-header {\n  padding: 12px 16px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom: 1px solid var(--el-border-color);\n  background-color: var(--el-bg-color);\n}\n\n.right-panel-mode-controls {\n  flex: 1;\n  display: flex;\n  justify-content: center;\n  overflow: hidden;\n  transition: opacity 0.3s;\n}\n\n.collapsed .right-panel-mode-controls {\n  opacity: 0;\n  width: 0;\n  pointer-events: none;\n}\n\n.collapse-button {\n  margin-left: 8px;\n  background-color: var(--bg-color);\n  border: 1px solid var(--border-color);\n  color: var(--text-color);\n  transition: all 0.2s ease;\n}\n\n.collapse-button:hover {\n  border-color: var(--primary-color);\n  color: var(--primary-color);\n  transform: scale(1.1);\n  box-shadow: 0 0 8px rgba(var(--primary-color-rgb), 0.2);\n}\n\n.collapsed .collapse-button {\n  margin-left: 0;\n}\n\n.history-container {\n  flex: 1;\n  overflow-y: auto;\n  padding: 0 16px 16px;\n  display: flex;\n  flex-direction: column;\n  min-height: 0;\n  background-color: var(--el-bg-color-page);\n}\n\n.history-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 16px;\n  padding: 16px 0 8px;\n  border-bottom: none;\n}\n\n.history-title {\n  font-size: 15px;\n  margin: 0;\n  color: var(--el-text-color-regular);\n  transition: opacity 0.2s;\n  line-height: 1.2;\n  font-weight: 500;\n}\n\n.clear-all-btn {\n  padding: 4px 12px;\n  font-size: 12px;\n  color: var(--el-text-color-secondary);\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  border-radius: 4px;\n}\n\n.clear-all-btn:hover {\n  background-color: var(--el-color-danger-light-9);\n  color: var(--el-color-danger);\n}\n\n.history-list {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  padding: 0 4px;\n}\n\n.history-item {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 12px 16px;\n  border-radius: 18px;\n  background: var(--el-bg-color);\n  cursor: pointer;\n  transition: all 0.2s ease;\n  overflow: hidden;\n  margin-bottom: 8px;\n  border: 1px solid var(--el-border-color-lighter);\n  box-shadow: none;\n}\n\n.history-item:hover {\n  background: var(--el-bg-color-page);\n  border-color: var(--el-border-color);\n  box-shadow: var(--el-box-shadow-light);\n}\n\n.history-item.active {\n  background: var(--el-color-primary);\n  color: white;\n  border-color: var(--el-color-primary);\n}\n\n.history-item-content {\n  display: flex;\n  align-items: center;\n  flex: 1;\n  overflow: hidden;\n  min-width: 0;\n}\n\n.history-item-icon {\n  min-width: 28px;\n  height: 28px;\n  border-radius: 50%;\n  background-color: var(--el-color-primary-light-9);\n  margin-right: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: var(--el-color-primary);\n  font-size: 14px;\n}\n\n.history-item.active .history-item-icon {\n  background-color: rgba(255, 255, 255, 0.2);\n  color: white;\n}\n\n.history-item-info {\n  flex: 1;\n  min-width: 0;\n  overflow: hidden;\n}\n\n.history-item-title {\n  font-size: 14.5px;\n  font-weight: 500;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  margin-bottom: 4px;\n  color: var(--el-text-color-primary);\n}\n\n.history-item-time {\n  font-size: 12px;\n  color: var(--el-text-color-secondary);\n}\n\n.history-item.active .history-item-time {\n  color: rgba(255, 255, 255, 0.8);\n}\n\n.history-item-actions {\n  opacity: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-left: 8px;\n}\n\n.delete-btn-wrapper {\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  background-color: rgba(245, 108, 108, 0.08);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  cursor: pointer;\n  border: none;\n}\n\n.delete-btn-wrapper:hover {\n  background-color: rgba(245, 108, 108, 0.15);\n}\n\n.delete-icon {\n  font-size: 17px;\n  color: var(--el-color-danger);\n  transition: all 0.2s ease;\n}\n\n.history-empty {\n  text-align: center;\n  padding: 30px 0;\n  color: var(--el-text-color-secondary);\n  font-size: 14px;\n  font-style: normal;\n}\n\n.collapsed .history-item {\n  justify-content: center;\n  padding: 10px 0;\n}\n\n.collapsed .history-item-icon {\n  margin-right: 0;\n}\n\n.collapsed .history-item-info,\n.collapsed .history-item-actions {\n  display: none;\n}\n\n.collapsed .history-title {\n  opacity: 0;\n  height: 0;\n  margin: 0;\n  padding: 0;\n}\n\n.collapsed .history-container {\n  display: none;\n}\n\n.collapsed .right-panel-header {\n  justify-content: center;\n  padding-left: 0;\n  padding-right: 0;\n  border-bottom-color: transparent;\n}\n\n/* 新增卡片消息样式 */\n.openwebui-card-message {\n  display: flex;\n  align-items: flex-start;\n  gap: 12px;\n  padding: 8px; /* 减小内边距，让卡片更紧凑 */\n  width: 100%; /* 确保卡片填满气泡 */\n}\n\n.card-icon-wrapper {\n  font-size: 24px;\n  margin-top: 2px;\n}\n\n.card-content-wrapper {\n  flex: 1;\n  text-align: left;\n}\n\n.card-title {\n  font-weight: bold;\n  font-size: 16px;\n  margin-bottom: 4px;\n}\n\n.card-body {\n  font-size: 14px;\n  line-height: 1.5;\n  // 确保换行符生效\n  white-space: pre-wrap;\n  :deep(p) {\n    margin: 0;\n  }\n}\n\n/* 新增：卡片操作区域样式 */\n.card-actions {\n  margin-top: 12px;\n  padding-top: 10px;\n  border-top: 1px solid var(--border-color);\n  display: flex;\n  justify-content: flex-end;\n  gap: 8px;\n}\n\n/* 根据状态设置不同颜色 */\n.success-card .card-icon-wrapper {\n  color: #67c23a; /* Element Plus 成功色 */\n}\n.success-card .card-title {\n  color: #67c23a;\n}\n.openwebui-msg.assistant .openwebui-msg-bubble .success-card {\n  border-left: 4px solid #67c23a;\n}\n\n.clarification-card .card-icon-wrapper {\n  color: #e6a23c; /* Element Plus 警告色 */\n}\n.clarification-card .card-title {\n  color: #e6a23c;\n}\n.openwebui-msg.assistant .openwebui-msg-bubble .clarification-card {\n  border-left: 4px solid #e6a23c;\n}\n\n.error-card .card-icon-wrapper {\n  color: #f56c6c; /* Element Plus 危险色 */\n}\n.error-card .card-title {\n  color: #f56c6c;\n}\n.openwebui-msg.assistant .openwebui-msg-bubble .error-card {\n  border-left: 4px solid #f56c6c;\n}\n\n.deleted-card .card-icon-wrapper {\n  color: #909399; /* Element Plus 灰色 */\n}\n.deleted-card .card-title {\n  color: #909399;\n}\n.openwebui-msg.assistant .openwebui-msg-bubble .deleted-card {\n  border-left: 4px solid #909399;\n}\n</style>\n\n<style>\n.openwebui-md-table {\n  width: 100%;\n  border-collapse: collapse;\n  margin: 8px 0;\n  background: var(--bg-color-secondary);\n  font-size: 15px;\n}\n.openwebui-md-table th, .openwebui-md-table td {\n  border: 1px solid var(--border-color);\n  padding: 6px 12px;\n  text-align: left;\n  color: var(--text-color);\n  background: var(--bg-color-secondary);\n}\n.openwebui-md-table th {\n  background: var(--bg-color-tertiary);\n  font-weight: 600;\n  color: var(--text-color-secondary);\n}\n/* 代码块美化和复制按钮 */\n.openwebui-md-code-block-beauty {\n  position: relative;\n  background: var(--bg-color-tertiary);\n  border-radius: 12px;\n  margin: 18px 0;\n  box-shadow: 0 4px 16px var(--shadow-color);\n  overflow: hidden;\n  border: 1px solid var(--border-color);\n}\n.openwebui-md-code-toolbar {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background: var(--bg-color-secondary);\n  border-bottom: 1px solid var(--border-color);\n  height: 36px;\n  padding: 0 14px;\n}\n.openwebui-md-code-lang {\n  font-size: 13px;\n  color: var(--text-color-tertiary);\n  font-family: 'JetBrains Mono', 'Fira Mono', 'Consolas', monospace;\n  user-select: none;\n}\n.openwebui-copy-btn {\n  background: var(--bg-color-tertiary);\n  border: 1px solid var(--border-color);\n  color: var(--primary-color);\n  border-radius: 6px;\n  font-size: 13px;\n  padding: 2px 12px;\n  cursor: pointer;\n  z-index: 2;\n  transition: background 0.2s, border 0.2s, color 0.2s;\n  outline: none;\n  margin-left: 8px;\n}\n.openwebui-copy-btn:hover {\n  background: var(--primary-color);\n  color: #fff;\n  border: 1px solid var(--primary-color);\n}\n.openwebui-md-pre {\n  margin: 0;\n  padding: 16px 18px;\n  background: var(--bg-color-tertiary);\n  border-radius: 0 0 12px 12px;\n  overflow-x: auto;\n  font-family: 'JetBrains Mono', 'Fira Mono', 'Consolas', monospace;\n  font-size: 15px;\n  line-height: 1.7;\n  color: var(--text-color);\n  min-height: 40px;\n}\n@media (max-width: 600px) {\n  .openwebui-md-pre {\n    font-size: 13px;\n    padding: 12px 6px;\n  }\n  .openwebui-md-code-block-beauty {\n    margin: 12px 0;\n  }\n}\n</style>\n\n<style>\n.openwebui-footer-hint {\n  font-size: 12px;\n  color: var(--text-color-secondary);\n  text-align: center;\n  padding-top: 8px;\n  user-select: none;\n  width: 100%;\n}\n</style>\n\n<style>\n.openwebui-upload-tooltip {\n  max-width: 300px !important;\n  background: var(--bg-color-secondary) !important;\n  color: var(--text-color) !important;\n  border: 1px solid var(--primary-color) !important;\n  border-radius: 8px !important;\n  box-shadow: 0 4px 12px rgba(var(--primary-color-rgb), 0.2) !important;\n  padding: 10px 14px !important;\n  font-size: 13px !important;\n  line-height: 1.6 !important;\n  white-space: pre-wrap; /* For newline in content */\n}\n\n.openwebui-upload-tooltip .el-popper__arrow::before {\n  border-color: var(--primary-color) !important;\n  background: var(--bg-color-secondary) !important;\n}\n</style>\n\n<style lang=\"scss\" scoped>\n.openwebui-options-area {\n  display: flex;\n  justify-content: center;\n  padding-top: 8px;\n}\n</style>\n\n<style>\n/* 导航卡片样式 */\n.welcome-message {\n  margin-bottom: 24px;\n  padding: 8px;\n  border-radius: 12px;\n  background-color: var(--el-bg-color);\n}\n\n.welcome-message h3 {\n  margin-bottom: 12px;\n  font-size: 22px;\n  font-weight: 600;\n  color: var(--el-text-color-primary);\n  text-align: center;\n}\n\n.platform-intro {\n  background-color: var(--el-bg-color-page);\n  border-radius: 8px;\n  padding: 12px 16px;\n  margin-bottom: 18px;\n  border-left: 4px solid var(--el-color-primary);\n}\n\n.platform-intro p {\n  margin: 0;\n  color: var(--el-text-color-regular);\n  font-size: 14.5px;\n  line-height: 1.6;\n  text-align: left;\n}\n\n.welcome-message p {\n  margin-bottom: 22px;\n  color: var(--el-text-color-regular);\n  font-size: 15px;\n  text-align: center;\n}\n\n.quick-nav-cards {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 16px;\n  margin-top: 15px;\n}\n\n.nav-card {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 16px;\n  background-color: var(--el-bg-color-overlay);\n  border-radius: 12px;\n  border: 1px solid var(--el-border-color-lighter);\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);\n  box-shadow: var(--el-box-shadow-lighter);\n  position: relative;\n  overflow: hidden;\n}\n\n.nav-card:hover {\n  background-color: var(--el-color-primary-light-9);\n  border-color: var(--el-color-primary-light-5);\n  transform: translateY(-3px);\n  box-shadow: var(--el-box-shadow-light);\n}\n\nbody[data-theme=\"dark\"] .nav-card:hover {\n  background-color: var(--el-color-primary-dark-2);\n}\n\n.nav-card:hover .nav-card-arrow {\n  opacity: 1;\n  transform: translateX(0);\n}\n\n.nav-card-icon {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 46px;\n  height: 46px;\n  font-size: 22px;\n  margin-right: 12px;\n  color: #ffffff;\n  background-color: var(--el-color-primary);\n  border-radius: 10px;\n  box-shadow: 0 2px 6px rgba(64, 158, 255, 0.25);\n  transition: all 0.3s ease;\n}\n\n.nav-card:hover .nav-card-icon {\n  transform: scale(1.1);\n}\n\n.nav-card-icon .el-icon,\n.nav-card-icon .bi {\n  font-size: 22px;\n}\n\n.nav-card:nth-child(2) .nav-card-icon {\n  background-color: #67C23A;\n  box-shadow: 0 2px 6px rgba(103, 194, 58, 0.25);\n}\n\n.nav-card:nth-child(3) .nav-card-icon {\n  background-color: #E6A23C;\n  box-shadow: 0 2px 6px rgba(230, 162, 60, 0.25);\n}\n\n.nav-card:nth-child(4) .nav-card-icon {\n  background-color: #F56C6C;\n  box-shadow: 0 2px 6px rgba(245, 108, 108, 0.25);\n}\n\n.nav-card:nth-child(5) .nav-card-icon {\n  background-color: #909399;\n  box-shadow: 0 2px 6px rgba(144, 147, 153, 0.25);\n}\n\n.nav-card:nth-child(6) .nav-card-icon {\n  background-color: #9c27b0;\n  box-shadow: 0 2px 6px rgba(156, 39, 176, 0.25);\n}\n\n.nav-card-content {\n  flex: 1;\n}\n\n.nav-card-title {\n  font-weight: 600;\n  font-size: 15px;\n  margin-bottom: 4px;\n  color: var(--el-text-color-primary);\n}\n\n.nav-card-desc {\n  font-size: 12px;\n  color: var(--el-text-color-secondary);\n  line-height: 1.4;\n}\n\n.nav-card-arrow {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 0;\n  transform: translateX(10px);\n  transition: all 0.3s ease;\n  color: var(--el-color-primary);\n  font-weight: bold;\n  font-size: 18px;\n  margin-left: 5px;\n}\n\n.nav-arrow-icon {\n  font-style: normal;\n}\n\n/* 响应式布局 */\n@media (max-width: 768px) {\n  .quick-nav-cards {\n    grid-template-columns: repeat(2, 1fr);\n    gap: 12px;\n  }\n  \n  .nav-card {\n    padding: 12px;\n    flex-direction: column;\n    text-align: center;\n  }\n  \n  .nav-card-icon {\n    margin-right: 0;\n    margin-bottom: 10px;\n    width: 42px;\n    height: 42px;\n  }\n  \n  .nav-card-title {\n    margin-bottom: 4px;\n  }\n  \n  .nav-card-arrow {\n    position: absolute;\n    top: 8px;\n    right: 8px;\n    font-size: 14px;\n  }\n}\n\n@media (max-width: 480px) {\n  .welcome-message h3 {\n    font-size: 18px;\n  }\n  \n  .welcome-message p {\n    font-size: 14px;\n    margin-bottom: 16px;\n  }\n  \n  .quick-nav-cards {\n    grid-template-columns: 1fr;\n    gap: 10px;\n  }\n  \n  .nav-card {\n    flex-direction: row;\n    text-align: left;\n    padding: 12px;\n  }\n  \n  .nav-card-icon {\n    margin-right: 12px;\n    margin-bottom: 0;\n  }\n}\n\n/* 更新平台介绍样式 */\n.platform-intro {\n  background-color: var(--el-bg-color-page);\n  border-radius: 12px;\n  padding: 16px 20px;\n  margin-bottom: 22px;\n  border-left: 4px solid var(--el-color-primary);\n  box-shadow: var(--el-box-shadow-lighter);\n}\n\n.platform-intro p {\n  margin: 0 0 12px;\n  color: var(--el-text-color-regular);\n  font-size: 14.5px;\n  line-height: 1.6;\n}\n\n.platform-intro p:last-child {\n  margin-bottom: 0;\n  font-style: italic;\n  color: #606266;\n}\n\n.platform-features {\n  padding-left: 18px;\n  margin: 12px 0 14px;\n  list-style-type: none;\n}\n\n.platform-features li {\n  position: relative;\n  padding-left: 8px;\n  margin-bottom: 10px;\n  font-size: 14px;\n  color: #454b54;\n  line-height: 1.5;\n}\n\n.platform-features li::before {\n  content: \"•\";\n  position: absolute;\n  left: -12px;\n  color: #409EFF;\n  font-weight: bold;\n}\n\n.feature-highlight {\n  font-weight: 600;\n  color: #303133;\n}\n\n/* 修改一下welcome-message样式 */\n.welcome-message h3 {\n  margin-bottom: 16px;\n  font-size: 22px;\n  font-weight: 600;\n  color: #303133;\n  text-align: center;\n}\n\n.welcome-message > p {\n  margin-bottom: 22px;\n  color: #606266;\n  font-size: 15px;\n  text-align: center;\n}\n</style> \n\n<!-- 添加事件编辑表单样式 -->\n<style>\n.event-edit-dialog .el-message-box__input {\n  padding: 0;\n}\n\n.event-edit-dialog .el-message-box__input input {\n  display: none;\n}\n\n.event-edit-form {\n  padding: 10px 0;\n}\n\n.event-edit-form .form-group {\n  margin-bottom: 15px;\n}\n\n.event-edit-form label {\n  display: block;\n  margin-bottom: 5px;\n  font-weight: 500;\n  color: var(--text-color);\n}\n\n.event-edit-form .form-control {\n  width: 100%;\n  padding: 8px 12px;\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n  background-color: var(--bg-color);\n  color: var(--text-color);\n  font-size: 14px;\n  transition: border-color 0.2s;\n}\n\n.event-edit-form .form-control:focus {\n  border-color: var(--primary-color);\n  outline: none;\n}\n\n.event-edit-form textarea.form-control {\n  min-height: 80px;\n  resize: vertical;\n}\n\n.event-edit-form select.form-control {\n  appearance: auto;\n  height: 38px;\n  background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3E%3Cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3E%3C/svg%3E\");\n  background-position: right 0.5rem center;\n  background-repeat: no-repeat;\n  background-size: 1.5em 1.5em;\n  padding-right: 2.5rem;\n  -webkit-print-color-adjust: exact;\n  print-color-adjust: exact;\n}\n\n/* 增加对话框宽度 */\n.event-edit-dialog .el-message-box {\n  width: 400px;\n  max-width: 95vw;\n}\n\n/* 暗色主题适配 */\nbody[data-theme=\"dark\"] .event-edit-form .form-control {\n  background-color: var(--bg-color-secondary);\n  border-color: var(--border-color);\n  color: var(--text-color);\n}\n\nbody[data-theme=\"dark\"] .event-edit-form label {\n  color: var(--text-color-secondary);\n}\n\n/* 修复datetime-local输入框样式 */\n.event-edit-form input[type=\"datetime-local\"] {\n  padding-right: 0.75rem;\n}\n\n/* 确保表单在不同浏览器中正常显示 */\n@supports (-moz-appearance: none) {\n  .event-edit-form select.form-control {\n    padding-right: 2rem;\n    background-image: none;\n  }\n}\n</style>\n\n<style lang=\"scss\" scoped>\n// ... existing code ...\n\n/* 卡片消息样式 */\n.openwebui-card-message {\n  padding: 12px;\n  border-radius: 8px;\n  background-color: var(--bg-color-secondary);\n  display: flex;\n  align-items: flex-start;\n  margin-bottom: 8px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\n  transition: all 0.3s ease;\n}\n\n.openwebui-card-message:hover {\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n}\n\n.card-icon-wrapper {\n  margin-right: 12px;\n  font-size: 20px;\n  padding-top: 2px;\n}\n\n.card-content-wrapper {\n  flex: 1;\n}\n\n.card-title {\n  font-size: 16px;\n  font-weight: 500;\n  margin-bottom: 8px;\n}\n\n.card-body {\n  font-size: 14px;\n  color: var(--text-color);\n  line-height: 1.5;\n}\n\n.card-actions {\n  margin-top: 12px;\n  display: flex;\n  gap: 8px;\n}\n\n/* 根据状态设置不同颜色 */\n.success-card .card-icon-wrapper {\n  color: #67c23a; /* Element Plus 成功色 */\n}\n.success-card .card-title {\n  color: #67c23a;\n}\n.openwebui-msg.assistant .openwebui-msg-bubble .success-card {\n  border-left: 4px solid #67c23a;\n}\n\n.clarification-card .card-icon-wrapper {\n  color: #e6a23c; /* Element Plus 警告色 */\n}\n.clarification-card .card-title {\n  color: #e6a23c;\n}\n.openwebui-msg.assistant .openwebui-msg-bubble .clarification-card {\n  border-left: 4px solid #e6a23c;\n}\n\n.error-card .card-icon-wrapper {\n  color: #f56c6c; /* Element Plus 危险色 */\n}\n.error-card .card-title {\n  color: #f56c6c;\n}\n.openwebui-msg.assistant .openwebui-msg-bubble .error-card {\n  border-left: 4px solid #f56c6c;\n}\n\n.deleted-card .card-icon-wrapper {\n  color: #909399; /* Element Plus 灰色 */\n}\n.deleted-card .card-title {\n  color: #909399;\n}\n.openwebui-msg.assistant .openwebui-msg-bubble .deleted-card {\n  border-left: 4px solid #909399;\n}\n</style>\n\n<!-- 添加事件编辑表单样式 -->\n<style>\n.event-edit-dialog .el-message-box__input {\n  padding: 0;\n}\n\n.event-edit-dialog .el-message-box__input input {\n  display: none;\n}\n\n.event-edit-form {\n  padding: 10px 0;\n}\n\n.event-edit-form .form-group {\n  margin-bottom: 15px;\n}\n\n.event-edit-form label {\n  display: block;\n  margin-bottom: 5px;\n  font-weight: 500;\n  color: var(--text-color);\n}\n\n.event-edit-form .form-control {\n  width: 100%;\n  padding: 8px 12px;\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n  background-color: var(--bg-color);\n  color: var(--text-color);\n  font-size: 14px;\n  transition: border-color 0.2s;\n}\n\n.event-edit-form .form-control:focus {\n  border-color: var(--primary-color);\n  outline: none;\n}\n\n.event-edit-form textarea.form-control {\n  min-height: 80px;\n  resize: vertical;\n}\n\n.event-edit-form select.form-control {\n  appearance: auto;\n}\n</style>\n\n<style>\n/* 确保 el-dialog 在暗黑模式下样式正确 */\n.calendar-dialog .el-dialog {\n  background-color: var(--bg-color);\n}\n.calendar-dialog .el-dialog__title {\n  color: var(--text-color);\n}\n.calendar-dialog .el-dialog__header {\n  border-bottom: 1px solid var(--border-color);\n}\n.calendar-dialog .el-dialog__body {\n  background-color: var(--bg-color);\n  color: var(--text-color);\n}\n.calendar-dialog .el-dialog__footer {\n  border-top: 1px solid var(--border-color);\n}\n.calendar-dialog .el-form-item__label {\n  color: var(--text-color);\n}\n.calendar-dialog .el-input__wrapper,\n.calendar-dialog .el-textarea__inner {\n  background-color: var(--bg-color-secondary) !important;\n  box-shadow: none !important;\n  border: 1px solid var(--border-color);\n  color: var(--text-color);\n}\n.calendar-dialog .el-input__inner {\n  color: var(--text-color) !important;\n}\n\n/* 移除旧的、不再需要的CSS */\n.event-edit-dialog .el-message-box__input {\n  display: none;\n}\n.event-edit-form {\n  display: none;\n}\n</style>","import { render } from \"./Index.vue?vue&type=template&id=4d090986&scoped=true\"\nimport script from \"./Index.vue?vue&type=script&lang=js\"\nexport * from \"./Index.vue?vue&type=script&lang=js\"\n\nimport \"./Index.vue?vue&type=style&index=0&id=4d090986&scoped=true&lang=scss\"\nimport \"./Index.vue?vue&type=style&index=1&id=4d090986&lang=css\"\nimport \"./Index.vue?vue&type=style&index=2&id=4d090986&lang=css\"\nimport \"./Index.vue?vue&type=style&index=3&id=4d090986&lang=css\"\nimport \"./Index.vue?vue&type=style&index=4&id=4d090986&lang=scss&scoped=true\"\nimport \"./Index.vue?vue&type=style&index=5&id=4d090986&lang=css\"\nimport \"./Index.vue?vue&type=style&index=6&id=4d090986&lang=css\"\nimport \"./Index.vue?vue&type=style&index=7&id=4d090986&lang=scss&scoped=true\"\nimport \"./Index.vue?vue&type=style&index=8&id=4d090986&lang=css\"\nimport \"./Index.vue?vue&type=style&index=9&id=4d090986&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\18083\\\\Desktop\\\\CCIT\\\\office\\\\smart-office\\\\frontend\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4d090986\"]])\n\nexport default __exports__","'use strict';\nvar $TypeError = TypeError;\n\nmodule.exports = function (passed, required) {\n  if (passed < required) throw new $TypeError('Not enough arguments');\n  return passed;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar iterate = require('../internals/iterate');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar iteratorClose = require('../internals/iterator-close');\nvar iteratorHelperWithoutClosingOnEarlyError = require('../internals/iterator-helper-without-closing-on-early-error');\n\nvar findWithoutClosingOnEarlyError = iteratorHelperWithoutClosingOnEarlyError('find', TypeError);\n\n// `Iterator.prototype.find` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.find\n$({ target: 'Iterator', proto: true, real: true, forced: findWithoutClosingOnEarlyError }, {\n  find: function find(predicate) {\n    anObject(this);\n    try {\n      aCallable(predicate);\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    if (findWithoutClosingOnEarlyError) return call(findWithoutClosingOnEarlyError, this, predicate);\n\n    var record = getIteratorDirect(this);\n    var counter = 0;\n    return iterate(record, function (value, stop) {\n      if (predicate(value, counter++)) return stop(value);\n    }, { IS_RECORD: true, INTERRUPTED: true }).result;\n  }\n});\n"],"sourceRoot":""}