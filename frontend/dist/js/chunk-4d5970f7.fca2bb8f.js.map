{"version":3,"sources":["webpack:///./src/views/dashboard/components/NlpScheduler.vue","webpack:///./src/views/dashboard/components/NlpScheduler.vue?ccc2","webpack:///./src/views/dashboard/components/NlpScheduler.vue?f0de"],"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_el_input","$data","query","$event","placeholder","clearable","onKeyup","_withKeys","$options","handleQuery","append","_withCtx","_component_el_button","onClick","_cache","_hoisted_3","_Fragment","_renderList","events","event","_createBlock","_component_el_card","key","id","header","_hoisted_4","_toDisplayString","title","_component_el_dropdown","style","onCommand","handleCommand","dropdown","_component_el_dropdown_menu","_component_el_dropdown_item","command","action","_hoisted_5","formatDateTime","start","end","location","_hoisted_6","description","_hoisted_7","name","data","methods","queryToSend","this","trim","response","request","post","success","$message","error","console","warning","commandString","$prompt","confirmButtonText","cancelButtonText","inputValue","then","value","catch","type","message","dateTime","date","Date","toLocaleString","year","month","day","hour","minute","__exports__","render"],"mappings":"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","file":"js/chunk-4d5970f7.fca2bb8f.js","sourcesContent":["<template>\r\n  <div class=\"nlp-scheduler\">\r\n    <div class=\"input-area\">\r\n      <el-input\r\n        v-model=\"query\"\r\n        placeholder=\"请输入您的日程安排，例如：明天下午两点和张三开会\"\r\n        clearable\r\n        @keyup.enter=\"handleQuery\"\r\n      >\r\n        <template #append>\r\n          <el-button @click=\"handleQuery()\">智能安排</el-button>\r\n        </template>\r\n      </el-input>\r\n    </div>\r\n    <div class=\"events-display\">\r\n      <el-card v-for=\"event in events\" :key=\"event.id\" class=\"event-card\">\r\n        <template #header>\r\n          <div class=\"clearfix\">\r\n            <span>{{ event.title }}</span>\r\n            <el-dropdown style=\"float: right;\" @command=\"handleCommand\">\r\n              <span class=\"el-dropdown-link\">\r\n                操作<i class=\"el-icon-arrow-down el-icon--right\"></i>\r\n              </span>\r\n              <template #dropdown>\r\n                <el-dropdown-menu>\r\n                  <el-dropdown-item :command=\"{ action: 'edit', event: event }\">编辑</el-dropdown-item>\r\n                  <el-dropdown-item :command=\"{ action: 'delete', event: event }\">删除</el-dropdown-item>\r\n                </el-dropdown-menu>\r\n              </template>\r\n            </el-dropdown>\r\n          </div>\r\n        </template>\r\n        <div class=\"event-details\">\r\n          <p><strong>时间:</strong> {{ formatDateTime(event.start) }} - {{ formatDateTime(event.end) }}</p>\r\n          <p v-if=\"event.location\"><strong>地点:</strong> {{ event.location }}</p>\r\n          <p v-if=\"event.description\"><strong>描述:</strong> {{ event.description }}</p>\r\n        </div>\r\n      </el-card>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from '@/utils/request';\r\n\r\nexport default {\r\n  name: 'NlpScheduler',\r\n  data() {\r\n    return {\r\n      query: '',\r\n      events: [],\r\n    };\r\n  },\r\n  methods: {\r\n    async handleQuery(command) {\r\n      const queryToSend = typeof command === 'string' ? command : this.query;\r\n      if (!queryToSend.trim()) {\r\n        this.$message.warning('请输入内容');\r\n        return;\r\n      }\r\n      try {\r\n        const response = await request.post('/api/calendar/events/nlp/', { query: queryToSend });\r\n        if (response.data.success) {\r\n          this.events = response.data.data;\r\n          this.$message.success('操作成功');\r\n          this.query = ''; // Clear input after successful command\r\n        } else {\r\n          this.$message.error(response.data.error || '操作失败');\r\n        }\r\n      } catch (error) {\r\n        this.$message.error('请求失败');\r\n        console.error(error);\r\n      }\r\n    },\r\n    handleCommand(command) {\r\n      const { action, event } = command;\r\n      if (action === 'delete') {\r\n        const commandString = `删除ID为 ${event.id} 的日程`;\r\n        this.handleQuery(commandString);\r\n      } else if (action === 'edit') {\r\n        this.$prompt('请输入新的日程信息', '编辑日程', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          inputValue: event.title,\r\n        }).then(({ value }) => {\r\n          const commandString = `将ID为 ${event.id} 的日程修改为 ${value}`;\r\n          this.handleQuery(commandString);\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '取消输入'\r\n          });       \r\n        });\r\n      }\r\n    },\r\n    formatDateTime(dateTime) {\r\n      if (!dateTime) return '';\r\n      const date = new Date(dateTime);\r\n      return date.toLocaleString('zh-CN', {\r\n        year: 'numeric',\r\n        month: '2-digit',\r\n        day: '2-digit',\r\n        hour: '2-digit',\r\n        minute: '2-digit',\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.nlp-scheduler {\r\n  padding: 20px;\r\n}\r\n.input-area {\r\n  margin-bottom: 20px;\r\n}\r\n.event-card {\r\n  margin-bottom: 15px;\r\n}\r\n.clearfix:before,\r\n.clearfix:after {\r\n  display: table;\r\n  content: \"\";\r\n}\r\n.clearfix:after {\r\n  clear: both\r\n}\r\n</style> ","import { render } from \"./NlpScheduler.vue?vue&type=template&id=50e117ec&scoped=true\"\nimport script from \"./NlpScheduler.vue?vue&type=script&lang=js\"\nexport * from \"./NlpScheduler.vue?vue&type=script&lang=js\"\n\nimport \"./NlpScheduler.vue?vue&type=style&index=0&id=50e117ec&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\18083\\\\Desktop\\\\CCIT\\\\office\\\\smart-office\\\\frontend\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-50e117ec\"]])\n\nexport default __exports__","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./NlpScheduler.vue?vue&type=style&index=0&id=50e117ec&scoped=true&lang=css\""],"sourceRoot":""}