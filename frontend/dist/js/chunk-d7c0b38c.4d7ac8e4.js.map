{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.reduce.js","webpack:///./src/views/company/Index.vue","webpack:///./src/views/company/Index.vue?ed58","webpack:///./node_modules/core-js/internals/environment.js","webpack:///./node_modules/core-js/modules/es.iterator.reduce.js","webpack:///./node_modules/core-js/internals/environment-is-node.js","webpack:///./node_modules/core-js/internals/array-method-is-strict.js","webpack:///./node_modules/core-js/internals/array-reduce.js","webpack:///./src/views/company/Index.vue?5ba7","webpack:///./src/api/company.js"],"names":["$","$reduce","left","arrayMethodIsStrict","CHROME_VERSION","IS_NODE","CHROME_BUG","FORCED","target","proto","forced","reduce","callbackfn","length","arguments","this","undefined","class","_createElementBlock","_hoisted_1","_createVNode","_component_el_card","shadow","header","_withCtx","_createElementVNode","_hoisted_2","_hoisted_3","_component_el_icon","_component_OfficeBuilding","_$setup$companyInfo$s","_$setup$companyInfo$f","_hoisted_4","_hoisted_5","_hoisted_6","$setup","companyInfo","logo","src","alt","_hoisted_7","_toDisplayString","shortName","charAt","fullName","_hoisted_9","_hoisted_10","_component_el_divider","_hoisted_11","_hoisted_12","_hoisted_13","industry","_hoisted_14","_component_User","_hoisted_15","size","_hoisted_16","_component_Location","_hoisted_17","address","_hoisted_18","_component_Link","_hoisted_19","website","href","formatWebsiteUrl","_hoisted_20","_hoisted_21","_hoisted_22","_component_Phone","_hoisted_23","phone","_hoisted_24","_hoisted_25","_hoisted_26","_component_Connection","_hoisted_27","_component_el_tree","data","orgStructure","props","defaultProps","node-key","default-expand-all","default","node","_hoisted_28","level","_createBlock","key","_component_Folder","label","_component_el_tag","type","count","_hoisted_29","_hoisted_30","_component_Grid","departments","_component_el_table","style","border","stripe","_component_el_table_column","prop","scope","_hoisted_31","row","name","manager_name","width","align","_component_el_empty","description","setup","router","useRouter","store","useStore","currentUser","computed","getters","departmentFormRef","ref","companyFormRef","reactive","id","editingCompanyInfo","companyDialogVisible","companyRules","required","message","trigger","min","max","pattern","departmentRules","children","departmentOptions","managers","value","departmentDialogVisible","isEdit","currentDepartment","manager","company","fetchCompanyData","async","ElMessage","warning","push","response","getCurrentUserCompany","success","Object","assign","short_name","map","dept","createTime","Date","created_at","toLocaleDateString","totalEmployeeCount","total_employee_count","buildOrgStructure","buildDepartmentOptions","error","console","departmentCount","sum","noDepCount","deptChildren","rootDept","editCompanyInfo","saveCompanyInfo","validate","websiteUrl","trim","match","companyData","updateCompany","_error$response","errorData","errorMessages","field","Array","isArray","join","addDepartment","editDepartment","deleteDepartment","ElMessageBox","confirm","confirmButtonText","cancelButtonText","then","apiDeleteDepartment","catch","saveDepartment","departmentData","updateDepartment","createDepartment","url","onMounted","Edit","Plus","Delete","OfficeBuilding","User","Location","Link","Phone","Connection","Grid","Folder","__exports__","render","globalThis","userAgent","classof","userAgentStartsWith","string","slice","module","exports","Bun","version","Deno","process","window","document","iterate","aCallable","anObject","getIteratorDirect","iteratorClose","iteratorHelperWithoutClosingOnEarlyError","apply","fails","$TypeError","TypeError","FAILS_ON_INITIAL_UNDEFINED","keys","reduceWithoutClosingOnEarlyError","real","reducer","noInitial","accumulator","record","counter","IS_RECORD","ENVIRONMENT","METHOD_NAME","argument","method","call","toObject","IndexedObject","lengthOfArrayLike","REDUCE_EMPTY","createMethod","IS_RIGHT","that","argumentsLength","memo","O","self","index","i","right","getSimpleCompanyList","request","auth"],"mappings":"kHACA,IAAIA,EAAI,EAAQ,QACZC,EAAU,EAAQ,QAA6BC,KAC/CC,EAAsB,EAAQ,QAC9BC,EAAiB,EAAQ,QACzBC,EAAU,EAAQ,QAIlBC,GAAcD,GAAWD,EAAiB,IAAMA,EAAiB,GACjEG,EAASD,IAAeH,EAAoB,UAIhDH,EAAE,CAAEQ,OAAQ,QAASC,OAAO,EAAMC,OAAQH,GAAU,CAClDI,OAAQ,SAAgBC,GACtB,IAAIC,EAASC,UAAUD,OACvB,OAAOZ,EAAQc,KAAMH,EAAYC,EAAQA,EAAS,EAAIC,UAAU,QAAKE,O,oEChBlEC,MAAM,qB,GAIAA,MAAM,oB,GACJA,MAAM,c,GAOVA,MAAM,gB,GACJA,MAAM,wB,GACJA,MAAM,gB,uBAINA,MAAM,gB,aAQRA,MAAM,a,GACJA,MAAM,a,GAGHA,MAAM,c,GAETA,MAAM,a,GAGHA,MAAM,c,GAETA,MAAM,a,GAGHA,MAAM,c,GAETA,MAAM,a,GAGHA,MAAM,c,wBAKTA,MAAM,a,GAGHA,MAAM,c,GAMfA,MAAM,Y,GAIAA,MAAM,oB,GACJA,MAAM,c,GAOVA,MAAM,a,GAQAA,MAAM,Y,GAcVA,MAAM,oB,GACJA,MAAM,c,GAYJA,MAAM,a,yvBA1GvBC,gCA8HM,MA9HNC,EA8HM,CA5HJC,yBAuDUC,EAAA,CAvDDJ,MAAM,YAAYK,OAAO,S,CACrBC,OAAMC,qBACf,IAKM,CALNC,gCAKM,MALNC,EAKM,CAJJD,gCAGM,MAHNE,EAGM,CAFJP,yBAAyDQ,EAAA,CAAhDX,MAAM,eAAa,C,6BAAC,IAAkB,CAAlBG,yBAAkBS,K,kBAC/CJ,gCAAmB,YAAb,UAAM,U,6BAKlB,SAAAK,EAAAC,EAAA,MA4CM,CA5CNN,gCA4CM,MA5CNO,EA4CM,CA3CJP,gCASM,MATNQ,EASM,CARJR,gCAGM,MAHNS,EAGM,CAFSC,EAAAC,YAAYC,M,yBACzBnB,gCAAmD,O,MAAtCoB,IAAKH,EAAAC,YAAYC,KAAME,IAAI,U,qCADxCrB,gCAAsH,OAAAsB,EAAAC,8BAA/D,QAArBX,EAAAK,EAAAC,YAAYM,iBAAS,IAAAZ,OAAA,EAArBA,EAAuBa,OAAO,MAA0B,QAA3BZ,EAAOI,EAAAC,YAAYQ,gBAAQ,IAAAb,OAAA,EAApBA,EAAsBY,OAAO,KAAD,WAGpGlB,gCAGM,MAHNoB,EAGM,CAFJpB,gCAAmC,UAAAgB,6BAA5BN,EAAAC,YAAYQ,UAAQ,GAClBT,EAAAC,YAAYM,W,yBAArBxB,gCAA+D,IAAA4B,EAAAL,6BAA5BN,EAAAC,YAAYM,WAAS,I,2CAI5DtB,yBAAc2B,GAEdtB,gCA6BM,MA7BNuB,EA6BM,CA5BJvB,gCAIM,MAJNwB,EAIM,CAHJ7B,yBAAqCQ,EAAA,M,6BAA5B,IAAkB,CAAlBR,yBAAkBS,K,kBAC3BJ,gCAAqC,QAA/BR,MAAM,cAAa,SAAK,IAC9BQ,gCAAmE,OAAnEyB,EAAmET,6BAAvCN,EAAAC,YAAYe,UAAY,OAAJ,KAElD1B,gCAIM,MAJN2B,EAIM,CAHJhC,yBAA2BQ,EAAA,M,6BAAlB,IAAQ,CAARR,yBAAQiC,K,kBACjB5B,gCAAqC,QAA/BR,MAAM,cAAa,SAAK,IAC9BQ,gCAA+D,OAA/D6B,EAA+Db,6BAAnCN,EAAAC,YAAYmB,MAAQ,OAAJ,KAE9C9B,gCAIM,MAJN+B,EAIM,CAHJpC,yBAA+BQ,EAAA,M,6BAAtB,IAAY,CAAZR,yBAAYqC,K,kBACrBhC,gCAAqC,QAA/BR,MAAM,cAAa,SAAK,IAC9BQ,gCAAkE,OAAlEiC,EAAkEjB,6BAAtCN,EAAAC,YAAYuB,SAAW,OAAJ,KAEjDlC,gCAOM,MAPNmC,EAOM,CANJxC,yBAA2BQ,EAAA,M,6BAAlB,IAAQ,CAARR,yBAAQyC,K,kBACjBpC,gCAAqC,QAA/BR,MAAM,cAAa,SAAK,IAC9BQ,gCAGO,OAHPqC,EAGO,CAFI3B,EAAAC,YAAY2B,S,yBAArB7C,gCAAyH,K,MAA1F8C,KAAM7B,EAAA8B,iBAAiB9B,EAAAC,YAAY2B,SAAUvD,OAAO,U,6BAAY2B,EAAAC,YAAY2B,SAAO,EAAAG,K,yBAClHhD,gCAAuB,OAAAiD,EAAV,YAGjB1C,gCAIM,MAJN2C,EAIM,CAHJhD,yBAA4BQ,EAAA,M,6BAAnB,IAAS,CAATR,yBAASiD,K,kBAClB5C,gCAAqC,QAA/BR,MAAM,cAAa,SAAK,IAC9BQ,gCAAgE,OAAhE6C,EAAgE7B,6BAApCN,EAAAC,YAAYmC,OAAS,OAAJ,Y,MAMrD9C,gCAkEM,MAlEN+C,EAkEM,CAhEJpD,yBA2BUC,EAAA,CA3BDJ,MAAM,WAAWK,OAAO,S,CACpBC,OAAMC,qBACf,IAKM,CALNC,gCAKM,MALNgD,EAKM,CAJJhD,gCAGM,MAHNiD,EAGM,CAFJtD,yBAAqDQ,EAAA,CAA5CX,MAAM,eAAa,C,6BAAC,IAAc,CAAdG,yBAAcuD,K,kBAC3ClD,gCAAiB,YAAX,QAAI,U,6BAKhB,IAgBM,CAhBNA,gCAgBM,MAhBNmD,EAgBM,CAfJxD,yBAcUyD,EAAA,CAbPC,KAAM3C,EAAA4C,aACNC,MAAO7C,EAAA8C,aACRC,WAAS,KACTC,qBAAA,I,CAEWC,QAAO5D,qBAChB,EADoB6D,OAAMP,UAAI,CAC9BrD,gCAKM,MALN6D,EAKM,CAJ0B,IAAfD,EAAKE,O,yBAApBC,yBAA6D5D,EAAA,CAAA6D,IAAA,I,6BAA5B,IAAkB,CAAlBrE,yBAAkBS,K,iCACnD2D,yBAAoC5D,EAAA,CAAA6D,IAAA,I,6BAApB,IAAU,CAAVrE,yBAAUsE,K,OAC1BjE,gCAA6B,YAAAgB,6BAApB4C,EAAKM,OAAK,GACnBvE,yBAA6EwE,EAAA,CAArErC,KAAK,QAAQsC,KAAK,OAAO5E,MAAM,a,8BAAY,IAAgB,C,0DAAb6D,EAAKgB,OAAQ,IAAC,K,kDAQ9E1E,yBAiCUC,EAAA,CAjCDJ,MAAM,kBAAkBK,OAAO,S,CAC3BC,OAAMC,qBACf,IAKM,CALNC,gCAKM,MALNsE,EAKM,CAJJtE,gCAGM,MAHNuE,EAGM,CAFJ5E,yBAA+CQ,EAAA,CAAtCX,MAAM,eAAa,C,6BAAC,IAAQ,CAARG,yBAAQ6E,K,kBACrCxE,gCAAiB,YAAX,QAAI,U,6BAKhB,IAA4D,CAA3CU,EAAA+D,YAAYrF,Q,yBAE7B2E,yBAoBWW,EAAA,C,MApBOrB,KAAM3C,EAAA+D,YAAaE,MAAA,eAAoBC,OAAA,GAAOC,OAAA,I,8BAC9D,IAOkB,CAPlBlF,yBAOkBmF,EAAA,CAPDC,KAAK,OAAOb,MAAM,Q,CACtBP,QAAO5D,qBAAEiF,GAAK,CACvBhF,gCAGM,MAHNiF,EAGM,CAFJtF,yBAA6BQ,EAAA,M,6BAApB,IAAU,CAAVR,yBAAUsE,K,MACnBjE,gCAAiC,YAAAgB,6BAAxBgE,EAAME,IAAIC,MAAI,O,MAI7BxF,yBAIkBmF,EAAA,CAJDC,KAAK,eAAeb,MAAM,Q,CAC9BP,QAAO5D,qBAAEiF,GAAK,CACvBhF,gCAAkD,YAAAgB,6BAAzCgE,EAAME,IAAIE,cAAgB,OAAJ,K,MAGnCzF,yBAIkBmF,EAAA,CAJDC,KAAK,QAAQb,MAAM,KAAKmB,MAAM,KAAKC,MAAM,U,CAC7C3B,QAAO5D,qBAAEiF,GAAK,CACvBrF,yBAAgEwE,EAAA,CAAxDrC,KAAK,QAAQsC,KAAK,Q,8BAAO,IAAqB,C,0DAAlBY,EAAME,IAAIb,OAAQ,IAAC,K,mBAG3D1E,yBAA8DmF,EAAA,CAA7CC,KAAK,aAAab,MAAM,OAAOmB,MAAM,U,4CArBxDtB,yBAA4DwB,EAAA,C,MAAvBC,YAAY,c,wIAoC1C,GACbL,KAAM,UACNM,QACE,MAAMC,EAASC,iBACTC,EAAQC,iBACRC,EAAcC,sBAAS,IAAMH,EAAMI,QAAQ,qBAC3CC,EAAoBC,iBAAI,MACxBC,EAAiBD,iBAAI,MAGrBvF,EAAcyF,sBAAS,CAC3BC,GAAI,KACJlF,SAAU,GACVF,UAAW,GACXS,SAAU,GACVI,KAAM,GACNI,QAAS,GACTI,QAAS,GACTQ,MAAO,GACPlC,KAAM,KAIF0F,EAAqBF,sBAAS,CAClCC,GAAI,KACJlF,SAAU,GACVF,UAAW,GACXS,SAAU,GACVI,KAAM,GACNI,QAAS,GACTI,QAAS,GACTQ,MAAO,KAIHyD,EAAuBL,kBAAI,GAG3BM,EAAe,CACnBrF,SAAU,CACR,CAAEsF,UAAU,EAAMC,QAAS,UAAWC,QAAS,QAC/C,CAAEC,IAAK,EAAGC,IAAK,IAAKH,QAAS,gBAAiBC,QAAS,SAEzDrE,QAAS,CACP,CACEwE,QAAS,iGACTJ,QAAS,mCACTC,QAAS,UAMTI,EAAkB,CACtB5B,KAAM,CACJ,CAAEsB,UAAU,EAAMC,QAAS,UAAWC,QAAS,QAC/C,CAAEC,IAAK,EAAGC,IAAK,GAAIH,QAAS,eAAgBC,QAAS,UAKnDrD,EAAe4C,iBAAI,IAEnB1C,EAAe,CACnBwD,SAAU,WACV9C,MAAO,SAIHO,EAAcyB,iBAAI,IAGlBe,EAAoBf,iBAAI,IAGxBgB,EAAWhB,iBAAI,CACnB,CAAEiB,MAAO,KAAMjD,MAAO,MACtB,CAAEiD,MAAO,MAAOjD,MAAO,OACvB,CAAEiD,MAAO,MAAOjD,MAAO,OACvB,CAAEiD,MAAO,MAAOjD,MAAO,OACvB,CAAEiD,MAAO,MAAOjD,MAAO,OACvB,CAAEiD,MAAO,MAAOjD,MAAO,OACvB,CAAEiD,MAAO,MAAOjD,MAAO,SAInBkD,EAA0BlB,kBAAI,GAC9BmB,EAASnB,kBAAI,GACboB,EAAoBlB,sBAAS,CACjCC,GAAI,KACJlB,KAAM,GACNoC,QAAS,GACTC,QAAS,KACThC,YAAa,KAITiC,EAAmBC,UACvB,IAEE,IAAK5B,EAAYqB,QAAUrB,EAAYqB,MAAMd,GAG3C,OAFAsB,OAAUC,QAAQ,aAClBlC,EAAOmC,KAAK,UAKd,MAAMC,QAAiBC,iBAEvB,GAAID,GAAYA,EAASE,QAAS,CAChC,MAAM3E,EAAOyE,EAASzE,KAGhBmE,EAAUnE,EAAKmE,QACrBS,OAAOC,OAAOvH,EAAa,CACzB0F,GAAImB,EAAQnB,GACZlF,SAAUqG,EAAQrC,KAClBlE,UAAWuG,EAAQW,YAAc,GACjCzG,SAAU8F,EAAQ9F,UAAY,GAC9BI,KAAM0F,EAAQ1F,MAAQ,GACtBI,QAASsF,EAAQtF,SAAW,GAC5BI,QAASkF,EAAQlF,SAAW,GAC5BQ,MAAO0E,EAAQ1E,OAAS,KAI1B2B,EAAY0C,MAAQ9D,EAAKoB,YAAY2D,IAAIC,IAAG,CAC1ChC,GAAIgC,EAAKhC,GACTlB,KAAMkD,EAAKlD,KACXC,aAAciD,EAAKjD,cAAgB,GACnCf,MAAOgE,EAAKhE,OAAS,EACrBiE,WAAY,IAAIC,KAAKF,EAAKG,YAAYC,mBAAmB,YAI3DpF,EAAKqF,mBAAqBrF,EAAKqF,oBAAsBrF,EAAKsF,sBAAwB,EAGlFC,EAAkBvF,EAAKoB,YAAapB,EAAKqF,oBAGzCG,EAAuBxF,EAAKoB,kBAE5BkD,OAAUmB,MAAM,YAElB,MAAOA,GACPC,QAAQD,MAAM,YAAaA,GAC3BnB,OAAUmB,MAAM,oBAKdF,EAAoBA,CAACnE,EAAaiE,KAItC,MAAMM,EAAkBvE,EAAYvF,OAAO,CAAC+J,EAAKZ,IAASY,GAAOZ,EAAKhE,OAAS,GAAI,GAG7E6E,EAAaR,EAAsBA,EAAqBM,EAAmB,EAE3EG,EAAe1E,EAAY2D,IAAIC,IAAG,CACtChC,GAAIgC,EAAKhC,GACTnC,MAAOmE,EAAKlD,KACZd,MAAOgE,EAAKhE,OAAS,KAInB6E,EAAa,GACfC,EAAatB,KAAK,CAChBxB,IAAK,EACLnC,MAAO,KACPG,MAAO6E,IAIX,MAAME,EAAW,CACf/C,GAAI,EACJnC,MAAOvD,EAAYM,WAAaN,EAAYQ,SAC5CkD,MAAO2E,EAAkBE,EACzBlC,SAAUmC,GAGZ7F,EAAa6D,MAAQ,CAACiC,IAIlBP,EAA0BpE,IAC9BwC,EAAkBE,MAAQ,CAAC,CACzBA,MAAO,EACPjD,MAAOvD,EAAYM,WAAaN,EAAYQ,SAC5C6F,SAAUvC,EAAY2D,IAAIC,IAAG,CAC3BlB,MAAOkB,EAAKhC,GACZnC,MAAOmE,EAAKlD,WAMZkE,EAAkBA,KACtBpB,OAAOC,OAAO5B,EAAoB,CAChCD,GAAI1F,EAAY0F,GAChBlF,SAAUR,EAAYQ,SACtBF,UAAWN,EAAYM,UACvBS,SAAUf,EAAYe,SACtBI,KAAMnB,EAAYmB,KAClBI,QAASvB,EAAYuB,QACrBI,QAAS3B,EAAY2B,QACrBQ,MAAOnC,EAAYmC,QAErByD,EAAqBY,OAAQ,GAIzBmC,EAAkB5B,UACtB,UACQvB,EAAegB,MAAMoC,WAG3B,IAAIC,EAAalD,EAAmBhE,QAAQmH,OACxCD,IAAeA,EAAWE,MAAM,kBAClCF,EAAa,UAAYA,GAG3B,MAAMG,EAAc,CAClBxE,KAAMmB,EAAmBnF,SACzBgH,WAAY7B,EAAmBrF,UAC/BS,SAAU4E,EAAmB5E,SAC7BI,KAAMwE,EAAmBxE,KACzBI,QAASoE,EAAmBpE,QAC5BI,QAASkH,EACT1G,MAAOwD,EAAmBxD,aAGtB8G,eAActD,EAAmBD,GAAIsD,GAC3ChC,OAAUK,QAAQ,YAClBzB,EAAqBY,OAAQ,EAC7BM,IACA,MAAOqB,GAAO,IAAAe,EAEd,GADAd,QAAQD,MAAM,YAAaA,GAClB,OAALA,QAAK,IAALA,GAAe,QAAVe,EAALf,EAAOhB,gBAAQ,IAAA+B,GAAfA,EAAiBxG,KAAM,CAEzB,MAAMyG,EAAYhB,EAAMhB,SAASzE,KAC3B0G,EAAgB,GAEtB,IAAK,MAAMC,KAASF,EACdG,MAAMC,QAAQJ,EAAUE,IAC1BD,EAAclC,KAAK,GAAGmC,MAAUF,EAAUE,GAAOG,KAAK,SACjB,kBAArBL,EAAUE,IAC1BD,EAAclC,KAAK,GAAGmC,MAAUF,EAAUE,MAI1CD,EAAc3K,OAAS,EACzBuI,OAAUmB,MAAMiB,EAAcI,KAAK,OAEnCxC,OAAUmB,MAAM,yBAEJ,OAALA,QAAK,IAALA,KAAOpC,QAChBiB,OAAUmB,MAAMA,EAAMpC,SAEtBiB,OAAUmB,MAAM,oBAMhBsB,EAAgBA,KACpB/C,EAAOF,OAAQ,EACfc,OAAOC,OAAOZ,EAAmB,CAC/BjB,GAAI,KACJlB,KAAM,GACNoC,QAAS,GACTC,QAAS7G,EAAY0F,GACrBb,YAAa,KAEf4B,EAAwBD,OAAQ,GAI5BkD,EAAkBnF,IACtBmC,EAAOF,OAAQ,EACfc,OAAOC,OAAOZ,EAAmB,CAC/BjB,GAAInB,EAAImB,GACRlB,KAAMD,EAAIC,KACVoC,QAASrC,EAAIqC,QACbC,QAAS7G,EAAY0F,GACrBb,YAAa,KAEf4B,EAAwBD,OAAQ,GAI5BmD,EAAoBpF,IACxBqF,OAAaC,QACX,WAAWtF,EAAIC,UACf,KACA,CACEsF,kBAAmB,KACnBC,iBAAkB,KAClBtG,KAAM,YAERuG,KAAKjD,UACL,UACQkD,eAAoB1F,EAAImB,IAC9BsB,OAAUK,QAAQ,SAAS9C,EAAIC,WAC/BsC,IACA,MAAOqB,GACPC,QAAQD,MAAM,UAAWA,GACzBnB,OAAUmB,MAAM,mBAEjB+B,MAAM,SAILC,EAAiBpD,UACrB,UACQzB,EAAkBkB,MAAMoC,WAE9B,MAAMwB,EAAiB,CACrB5F,KAAMmC,EAAkBnC,KACxBqC,QAASF,EAAkBE,QAC3BD,QAASD,EAAkBC,QAC3B/B,YAAa8B,EAAkB9B,aAG7B6B,EAAOF,aACH6D,eAAiB1D,EAAkBjB,GAAI0E,GAC7CpD,OAAUK,QAAQ,SAASV,EAAkBnC,mBAEvC8F,eAAiBF,GACvBpD,OAAUK,QAAQ,SAASV,EAAkBnC,YAG/CiC,EAAwBD,OAAQ,EAChCM,IACA,MAAOqB,GACPC,QAAQD,MAAM,UAAWA,GAChB,OAALA,QAAK,IAALA,KAAOpC,QACTiB,OAAUmB,MAAMA,EAAMpC,SAEtBiB,OAAUmB,MAAM,kBAMhBtG,EAAoB0I,GACpBA,IAAQA,EAAIxB,MAAM,gBACb,UAAYwB,EAEdA,EAOT,OAJAC,uBAAU,KACR1D,MAGK,CACL9G,cACA2F,qBACAC,uBACAJ,iBACAK,eACAlD,eACAE,eACAiB,cACAwC,oBACAC,WACAE,0BACAC,SACAC,oBACArB,oBACAc,kBACAsC,kBACAC,kBACAc,gBACAC,iBACAC,mBACAQ,iBACAtI,mBAEA4I,eACAC,eACAC,mBACAC,mCACAC,eACAC,uBACAC,eACAC,iBACAC,2BACAC,eACAC,sB,iCC3gBN,MAAMC,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAE1E,gB,kCCPf,IAAIC,EAAa,EAAQ,QACrBC,EAAY,EAAQ,QACpBC,EAAU,EAAQ,QAElBC,EAAsB,SAAUC,GAClC,OAAOH,EAAUI,MAAM,EAAGD,EAAOjN,UAAYiN,GAG/CE,EAAOC,QAAU,WACf,OAAIJ,EAAoB,QAAgB,MACpCA,EAAoB,sBAA8B,aAClDA,EAAoB,SAAiB,OACrCA,EAAoB,YAAoB,OACxCH,EAAWQ,KAA6B,iBAAfA,IAAIC,QAA4B,MACzDT,EAAWU,MAA+B,iBAAhBA,KAAKD,QAA4B,OAC3B,YAAhCP,EAAQF,EAAWW,SAA+B,OAClDX,EAAWY,QAAUZ,EAAWa,SAAiB,UAC9C,OATQ,I,kCCTjB,IAAIvO,EAAI,EAAQ,QACZwO,EAAU,EAAQ,QAClBC,EAAY,EAAQ,QACpBC,EAAW,EAAQ,QACnBC,EAAoB,EAAQ,QAC5BC,EAAgB,EAAQ,QACxBC,EAA2C,EAAQ,QACnDC,EAAQ,EAAQ,QAChBC,EAAQ,EAAQ,QAEhBC,EAAaC,UAGbC,EAA6BH,GAAM,WAErC,GAAGI,OAAOxO,QAAO,mBAA6BK,MAG5CoO,GAAoCF,GAA8BL,EAAyC,SAAUG,GAIzHhP,EAAE,CAAEQ,OAAQ,WAAYC,OAAO,EAAM4O,MAAM,EAAM3O,OAAQwO,GAA8BE,GAAoC,CACzHzO,OAAQ,SAAgB2O,GACtBZ,EAAS3N,MACT,IACE0N,EAAUa,GACV,MAAO/E,GACPqE,EAAc7N,KAAM,QAASwJ,GAG/B,IAAIgF,EAAYzO,UAAUD,OAAS,EAC/B2O,EAAcD,OAAYvO,EAAYF,UAAU,GACpD,GAAIsO,EACF,OAAON,EAAMM,EAAkCrO,KAAMwO,EAAY,CAACD,GAAW,CAACA,EAASE,IAEzF,IAAIC,EAASd,EAAkB5N,MAC3B2O,EAAU,EAUd,GATAlB,EAAQiB,GAAQ,SAAU7G,GACpB2G,GACFA,GAAY,EACZC,EAAc5G,GAEd4G,EAAcF,EAAQE,EAAa5G,EAAO8G,GAE5CA,MACC,CAAEC,WAAW,IACZJ,EAAW,MAAM,IAAIP,EAAW,kDACpC,OAAOQ,M,oCChDX,IAAII,EAAc,EAAQ,QAE1B5B,EAAOC,QAA0B,SAAhB2B,G,kCCFjB,IAAIb,EAAQ,EAAQ,QAEpBf,EAAOC,QAAU,SAAU4B,EAAaC,GACtC,IAAIC,EAAS,GAAGF,GAChB,QAASE,GAAUhB,GAAM,WAEvBgB,EAAOC,KAAK,KAAMF,GAAY,WAAc,OAAO,GAAM,Q,kCCN7D,IAAIrB,EAAY,EAAQ,QACpBwB,EAAW,EAAQ,QACnBC,EAAgB,EAAQ,QACxBC,EAAoB,EAAQ,QAE5BnB,EAAaC,UAEbmB,EAAe,8CAGfC,EAAe,SAAUC,GAC3B,OAAO,SAAUC,EAAM3P,EAAY4P,EAAiBC,GAClD,IAAIC,EAAIT,EAASM,GACbI,EAAOT,EAAcQ,GACrB7P,EAASsP,EAAkBO,GAE/B,GADAjC,EAAU7N,GACK,IAAXC,GAAgB2P,EAAkB,EAAG,MAAM,IAAIxB,EAAWoB,GAC9D,IAAIQ,EAAQN,EAAWzP,EAAS,EAAI,EAChCgQ,EAAIP,GAAY,EAAI,EACxB,GAAIE,EAAkB,EAAG,MAAO,EAAM,CACpC,GAAII,KAASD,EAAM,CACjBF,EAAOE,EAAKC,GACZA,GAASC,EACT,MAGF,GADAD,GAASC,EACLP,EAAWM,EAAQ,EAAI/P,GAAU+P,EACnC,MAAM,IAAI5B,EAAWoB,GAGzB,KAAME,EAAWM,GAAS,EAAI/P,EAAS+P,EAAOA,GAASC,EAAOD,KAASD,IACrEF,EAAO7P,EAAW6P,EAAME,EAAKC,GAAQA,EAAOF,IAE9C,OAAOD,IAIXzC,EAAOC,QAAU,CAGf/N,KAAMmQ,GAAa,GAGnBS,MAAOT,GAAa,K,yDC5CtB,W,kCCAA,4NAeO,SAASU,IACd,OAAOC,eAAQ,CACbrE,IAAK,mCACLoD,OAAQ,MACRkB,MAAM,IAsBH,SAAS5F,EAAcvD,EAAIhD,GAChC,OAAOkM,eAAQ,CACbrE,IAAK,uBAAuB7E,KAC5BiI,OAAQ,MACRjL,SAqCG,SAAS4H,EAAiB5H,GAC/B,OAAOkM,eAAQ,CACbrE,IAAK,yBACLoD,OAAQ,OACRjL,SAKG,SAAS2H,EAAiB3E,EAAIhD,GACnC,OAAOkM,eAAQ,CACbrE,IAAK,yBAAyB7E,KAC9BiI,OAAQ,MACRjL,SAKG,SAASiH,EAAiBjE,GAC/B,OAAOkJ,eAAQ,CACbrE,IAAK,yBAAyB7E,KAC9BiI,OAAQ,WAKL,SAASvG,IACd,OAAOwH,eAAQ,CACbrE,IAAK,4CACLoD,OAAQ","file":"js/chunk-d7c0b38c.4d7ac8e4.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar $reduce = require('../internals/array-reduce').left;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar CHROME_VERSION = require('../internals/environment-v8-version');\nvar IS_NODE = require('../internals/environment-is-node');\n\n// Chrome 80-82 has a critical bug\n// https://bugs.chromium.org/p/chromium/issues/detail?id=1049982\nvar CHROME_BUG = !IS_NODE && CHROME_VERSION > 79 && CHROME_VERSION < 83;\nvar FORCED = CHROME_BUG || !arrayMethodIsStrict('reduce');\n\n// `Array.prototype.reduce` method\n// https://tc39.es/ecma262/#sec-array.prototype.reduce\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    var length = arguments.length;\n    return $reduce(this, callbackfn, length, length > 1 ? arguments[1] : undefined);\n  }\n});\n","<template>\n  <div class=\"company-container\">\n    <!-- 企业基本信息 -->\n    <el-card class=\"info-card\" shadow=\"hover\">\n      <template #header>\n        <div class=\"card-header-flex\">\n          <div class=\"card-title\">\n            <el-icon class=\"header-icon\"><OfficeBuilding /></el-icon>\n            <span>企业基本信息</span>\n          </div>\n        </div>\n      </template>\n      \n      <div class=\"company-info\">\n        <div class=\"company-logo-section\">\n          <div class=\"company-logo\">\n            <span v-if=\"!companyInfo.logo\">{{ companyInfo.shortName?.charAt(0) || companyInfo.fullName?.charAt(0) || '企' }}</span>\n            <img v-else :src=\"companyInfo.logo\" alt=\"公司logo\" />\n          </div>\n          <div class=\"company-name\">\n            <h2>{{ companyInfo.fullName }}</h2>\n            <p v-if=\"companyInfo.shortName\">{{ companyInfo.shortName }}</p>\n          </div>\n        </div>\n\n        <el-divider />\n\n        <div class=\"info-grid\">\n          <div class=\"info-item\">\n            <el-icon><OfficeBuilding /></el-icon>\n            <span class=\"info-label\">所属行业:</span>\n            <span class=\"info-value\">{{ companyInfo.industry || '未设置' }}</span>\n          </div>\n          <div class=\"info-item\">\n            <el-icon><User /></el-icon>\n            <span class=\"info-label\">公司规模:</span>\n            <span class=\"info-value\">{{ companyInfo.size || '未设置' }}</span>\n          </div>\n          <div class=\"info-item\">\n            <el-icon><Location /></el-icon>\n            <span class=\"info-label\">公司地址:</span>\n            <span class=\"info-value\">{{ companyInfo.address || '未设置' }}</span>\n          </div>\n          <div class=\"info-item\">\n            <el-icon><Link /></el-icon>\n            <span class=\"info-label\">官方网站:</span>\n            <span class=\"info-value\">\n              <a v-if=\"companyInfo.website\" :href=\"formatWebsiteUrl(companyInfo.website)\" target=\"_blank\">{{ companyInfo.website }}</a>\n              <span v-else>未设置</span>\n            </span>\n          </div>\n          <div class=\"info-item\">\n            <el-icon><Phone /></el-icon>\n            <span class=\"info-label\">联系电话:</span>\n            <span class=\"info-value\">{{ companyInfo.phone || '未设置' }}</span>\n          </div>\n        </div>\n      </div>\n    </el-card>\n\n    <div class=\"card-row\">\n      <!-- 组织架构 -->\n      <el-card class=\"org-card\" shadow=\"hover\">\n        <template #header>\n          <div class=\"card-header-flex\">\n            <div class=\"card-title\">\n              <el-icon class=\"header-icon\"><Connection /></el-icon>\n              <span>组织架构</span>\n            </div>\n          </div>\n        </template>\n        \n        <div class=\"org-chart\">\n          <el-tree\n            :data=\"orgStructure\"\n            :props=\"defaultProps\"\n            node-key=\"id\"\n            default-expand-all\n          >\n            <template #default=\"{ node, data }\">\n              <div class=\"org-node\">\n                <el-icon v-if=\"node.level === 1\"><OfficeBuilding /></el-icon>\n                <el-icon v-else><Folder /></el-icon>\n                <span>{{ node.label }}</span>\n                <el-tag size=\"small\" type=\"info\" class=\"org-count\">{{ data.count }}人</el-tag>\n              </div>\n            </template>\n          </el-tree>\n        </div>\n      </el-card>\n      \n      <!-- 部门列表 -->\n      <el-card class=\"department-card\" shadow=\"hover\">\n        <template #header>\n          <div class=\"card-header-flex\">\n            <div class=\"card-title\">\n              <el-icon class=\"header-icon\"><Grid /></el-icon>\n              <span>部门列表</span>\n            </div>\n          </div>\n        </template>\n        \n        <el-empty v-if=\"!departments.length\" description=\"暂无部门数据\" />\n        \n        <el-table v-else :data=\"departments\" style=\"width: 100%\" border stripe>\n          <el-table-column prop=\"name\" label=\"部门名称\">\n            <template #default=\"scope\">\n              <div class=\"dept-name\">\n                <el-icon><Folder /></el-icon>\n                <span>{{ scope.row.name }}</span>\n              </div>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"manager_name\" label=\"部门主管\">\n            <template #default=\"scope\">\n              <span>{{ scope.row.manager_name || '未设置' }}</span>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"count\" label=\"人数\" width=\"80\" align=\"center\">\n            <template #default=\"scope\">\n              <el-tag size=\"small\" type=\"info\">{{ scope.row.count }}人</el-tag>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"createTime\" label=\"创建时间\" width=\"180\" />\n        </el-table>\n      </el-card>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, reactive, onMounted, computed } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRouter } from 'vue-router'\nimport { Edit, Plus, Delete, OfficeBuilding, User, Location, Link, Phone, Connection, Grid, Folder } from '@element-plus/icons-vue'\nimport { ElMessage, ElMessageBox } from 'element-plus'\nimport { updateCompany, createDepartment, updateDepartment, deleteDepartment as apiDeleteDepartment, getCurrentUserCompany } from '@/api/company'\n\nexport default {\n  name: 'Company',\n  setup() {\n    const router = useRouter();\n    const store = useStore();\n    const currentUser = computed(() => store.getters['user/currentUser']);\n    const departmentFormRef = ref(null);\n    const companyFormRef = ref(null);\n\n    // 企业基本信息\n    const companyInfo = reactive({\n      id: null,\n      fullName: '',\n      shortName: '',\n      industry: '',\n      size: '',\n      address: '',\n      website: '',\n      phone: '',\n      logo: ''\n    });\n    \n    // 编辑中的公司信息\n    const editingCompanyInfo = reactive({\n      id: null,\n      fullName: '',\n      shortName: '',\n      industry: '',\n      size: '',\n      address: '',\n      website: '',\n      phone: ''\n    });\n    \n    // 公司信息对话框\n    const companyDialogVisible = ref(false);\n    \n    // 公司表单校验规则\n    const companyRules = {\n      fullName: [\n        { required: true, message: '请输入公司全称', trigger: 'blur' },\n        { min: 2, max: 100, message: '长度在2到100个字符之间', trigger: 'blur' }\n      ],\n      website: [\n        { \n          pattern: /^(https?:\\/\\/)?(www\\.)?([a-zA-Z0-9-]+\\.)+[a-zA-Z]{2,}(\\/[a-zA-Z0-9-._~:/?#[\\]@!$&'()*+,;=]*)?$/, \n          message: '请输入合法的URL，例如: http://example.com', \n          trigger: 'blur' \n        }\n      ]\n    };\n    \n    // 部门表单校验规则\n    const departmentRules = {\n      name: [\n        { required: true, message: '请输入部门名称', trigger: 'blur' },\n        { min: 2, max: 50, message: '长度在2到50个字符之间', trigger: 'blur' }\n      ]\n    };\n    \n    // 组织架构\n    const orgStructure = ref([]);\n    \n    const defaultProps = {\n      children: 'children',\n      label: 'label'\n    }\n    \n    // 部门列表\n    const departments = ref([]);\n    \n    // 部门选项\n    const departmentOptions = ref([]);\n    \n    // 主管选项 - 实际项目中应该从用户列表API获取\n    const managers = ref([\n      { value: '张总', label: '张总' },\n      { value: '李经理', label: '李经理' },\n      { value: '王经理', label: '王经理' },\n      { value: '赵经理', label: '赵经理' },\n      { value: '钱经理', label: '钱经理' },\n      { value: '孙经理', label: '孙经理' },\n      { value: '周经理', label: '周经理' }\n    ])\n    \n    // 部门对话框\n    const departmentDialogVisible = ref(false)\n    const isEdit = ref(false)\n    const currentDepartment = reactive({\n      id: null,\n      name: '',\n      manager: '',\n      company: null,\n      description: ''\n    })\n    \n    // 获取公司数据\n    const fetchCompanyData = async () => {\n      try {\n        // 检查用户是否已登录\n        if (!currentUser.value || !currentUser.value.id) {\n          ElMessage.warning('请先登录');\n          router.push('/login');\n          return;\n        }\n\n        // 使用当前登录用户所属公司API替代固定公司ID\n        const response = await getCurrentUserCompany();\n        \n        if (response && response.success) {\n          const data = response.data;\n          \n          // 更新公司信息\n          const company = data.company;\n          Object.assign(companyInfo, {\n            id: company.id,\n            fullName: company.name,\n            shortName: company.short_name || '',\n            industry: company.industry || '',\n            size: company.size || '',\n            address: company.address || '',\n            website: company.website || '',\n            phone: company.phone || ''\n          });\n          \n          // 更新部门列表\n          departments.value = data.departments.map(dept => ({\n            id: dept.id,\n            name: dept.name,\n            manager_name: dept.manager_name || '',\n            count: dept.count || 0,\n            createTime: new Date(dept.created_at).toLocaleDateString('zh-CN')\n          }));\n          \n          // 保存员工总数，用于计算无部门员工数量\n          data.totalEmployeeCount = data.totalEmployeeCount || data.total_employee_count || 0;\n          \n          // 构建组织架构树\n          buildOrgStructure(data.departments, data.totalEmployeeCount);\n          \n          // 构建部门选项\n          buildDepartmentOptions(data.departments);\n        } else {\n          ElMessage.error('获取公司数据失败');\n        }\n      } catch (error) {\n        console.error('获取公司数据失败:', error);\n        ElMessage.error('获取公司数据失败，请刷新重试');\n      }\n    };\n    \n    // 构建组织架构树\n    const buildOrgStructure = (departments, totalEmployeeCount) => {\n      // 简化实现，实际项目中应考虑部门层级关系\n      \n      // 计算所有部门人数\n      const departmentCount = departments.reduce((sum, dept) => sum + (dept.count || 0), 0);\n      \n      // 获取未分配部门的人数（如果API提供了总人数）\n      const noDepCount = totalEmployeeCount ? (totalEmployeeCount - departmentCount) : 0;\n      \n      const deptChildren = departments.map(dept => ({\n        id: dept.id,\n        label: dept.name,\n        count: dept.count || 0\n      }));\n      \n      // 添加\"其它\"分类，显示没有部门的用户\n      if (noDepCount > 0) {\n        deptChildren.push({\n          id: -1,\n          label: '其它',\n          count: noDepCount\n        });\n      }\n      \n      const rootDept = {\n        id: 0,\n        label: companyInfo.shortName || companyInfo.fullName,\n        count: departmentCount + noDepCount,\n        children: deptChildren\n      };\n      \n      orgStructure.value = [rootDept];\n    };\n    \n    // 构建部门选项\n    const buildDepartmentOptions = (departments) => {\n      departmentOptions.value = [{\n        value: 0,\n        label: companyInfo.shortName || companyInfo.fullName,\n        children: departments.map(dept => ({\n          value: dept.id,\n          label: dept.name\n        }))\n      }];\n    };\n    \n    // 编辑企业信息\n    const editCompanyInfo = () => {\n      Object.assign(editingCompanyInfo, {\n        id: companyInfo.id,\n        fullName: companyInfo.fullName,\n        shortName: companyInfo.shortName,\n        industry: companyInfo.industry,\n        size: companyInfo.size,\n        address: companyInfo.address,\n        website: companyInfo.website,\n        phone: companyInfo.phone\n      });\n      companyDialogVisible.value = true;\n    };\n    \n    // 保存企业信息\n    const saveCompanyInfo = async () => {\n      try {\n        await companyFormRef.value.validate();\n        \n        // 格式化网站URL，确保以http://或https://开头\n        let websiteUrl = editingCompanyInfo.website.trim();\n        if (websiteUrl && !websiteUrl.match(/^https?:\\/\\//)) {\n          websiteUrl = 'http://' + websiteUrl;\n        }\n        \n        const companyData = {\n          name: editingCompanyInfo.fullName,\n          short_name: editingCompanyInfo.shortName,\n          industry: editingCompanyInfo.industry,\n          size: editingCompanyInfo.size,\n          address: editingCompanyInfo.address,\n          website: websiteUrl, // 使用格式化后的URL\n          phone: editingCompanyInfo.phone\n        };\n        \n        await updateCompany(editingCompanyInfo.id, companyData);\n        ElMessage.success('企业信息更新成功');\n        companyDialogVisible.value = false;\n        fetchCompanyData();\n      } catch (error) {\n        console.error('更新企业信息失败:', error);\n        if (error?.response?.data) {\n          // 显示后端返回的具体错误信息\n          const errorData = error.response.data;\n          const errorMessages = [];\n          \n          for (const field in errorData) {\n            if (Array.isArray(errorData[field])) {\n              errorMessages.push(`${field}: ${errorData[field].join(', ')}`);\n            } else if (typeof errorData[field] === 'string') {\n              errorMessages.push(`${field}: ${errorData[field]}`);\n            }\n          }\n          \n          if (errorMessages.length > 0) {\n            ElMessage.error(errorMessages.join('\\n'));\n          } else {\n            ElMessage.error('更新企业信息失败，请检查输入内容');\n          }\n        } else if (error?.message) {\n          ElMessage.error(error.message);\n        } else {\n          ElMessage.error('更新企业信息失败，请稍后重试');\n        }\n      }\n    };\n    \n    // 添加部门\n    const addDepartment = () => {\n      isEdit.value = false;\n      Object.assign(currentDepartment, {\n        id: null,\n        name: '',\n        manager: '',\n        company: companyInfo.id,\n        description: ''\n      });\n      departmentDialogVisible.value = true;\n    };\n    \n    // 编辑部门\n    const editDepartment = (row) => {\n      isEdit.value = true;\n      Object.assign(currentDepartment, {\n        id: row.id,\n        name: row.name,\n        manager: row.manager,\n        company: companyInfo.id,\n        description: '' // 实际应从API获取\n      });\n      departmentDialogVisible.value = true;\n    };\n    \n    // 删除部门\n    const deleteDepartment = (row) => {\n      ElMessageBox.confirm(\n        `确定要删除部门\"${row.name}\"吗？`,\n        '提示',\n        {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }\n      ).then(async () => {\n        try {\n          await apiDeleteDepartment(row.id);\n          ElMessage.success(`删除部门: ${row.name} 成功`);\n          fetchCompanyData();\n        } catch (error) {\n          console.error('删除部门失败:', error);\n          ElMessage.error('删除部门失败，请稍后重试');\n        }\n      }).catch(() => {});\n    };\n    \n    // 保存部门\n    const saveDepartment = async () => {\n      try {\n        await departmentFormRef.value.validate();\n        \n        const departmentData = {\n          name: currentDepartment.name,\n          company: currentDepartment.company,\n          manager: currentDepartment.manager,\n          description: currentDepartment.description\n        };\n        \n        if (isEdit.value) {\n          await updateDepartment(currentDepartment.id, departmentData);\n          ElMessage.success(`更新部门: ${currentDepartment.name} 成功`);\n        } else {\n          await createDepartment(departmentData);\n          ElMessage.success(`新增部门: ${currentDepartment.name} 成功`);\n        }\n        \n        departmentDialogVisible.value = false;\n        fetchCompanyData();\n      } catch (error) {\n        console.error('保存部门失败:', error);\n        if (error?.message) {\n          ElMessage.error(error.message);\n        } else {\n          ElMessage.error('保存部门失败，请稍后重试');\n        }\n      }\n    };\n    \n    // 格式化网站URL\n    const formatWebsiteUrl = (url) => {\n      if (url && !url.match(/^https?:\\/\\//)) {\n        return 'http://' + url;\n      }\n      return url;\n    };\n    \n    onMounted(() => {\n      fetchCompanyData();\n    });\n    \n    return {\n      companyInfo,\n      editingCompanyInfo,\n      companyDialogVisible,\n      companyFormRef,\n      companyRules,\n      orgStructure,\n      defaultProps,\n      departments,\n      departmentOptions,\n      managers,\n      departmentDialogVisible,\n      isEdit,\n      currentDepartment,\n      departmentFormRef,\n      departmentRules,\n      editCompanyInfo,\n      saveCompanyInfo,\n      addDepartment,\n      editDepartment,\n      deleteDepartment,\n      saveDepartment,\n      formatWebsiteUrl,\n      // 图标\n      Edit,\n      Plus,\n      Delete,\n      OfficeBuilding,\n      User,\n      Location,\n      Link,\n      Phone,\n      Connection,\n      Grid,\n      Folder\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.company-container {\n  padding: 20px;\n  max-width: 1400px;\n  margin: 0 auto;\n}\n\n.info-card {\n  margin-bottom: 20px;\n  transition: all 0.3s;\n  \n  &:hover {\n    transform: translateY(-2px);\n  }\n}\n\n.card-header-flex {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.card-title {\n  display: flex;\n  align-items: center;\n  font-size: 16px;\n  font-weight: 500;\n  \n  .header-icon {\n    margin-right: 8px;\n    font-size: 18px;\n  }\n}\n\n.company-info {\n  padding: 10px 0;\n}\n\n.company-logo-section {\n  display: flex;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.company-logo {\n  width: 80px;\n  height: 80px;\n  background-color: var(--el-color-primary);\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #fff;\n  font-size: 36px;\n  font-weight: bold;\n  margin-right: 20px;\n  \n  img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    border-radius: 8px;\n  }\n}\n\n.company-name {\n  h2 {\n    margin: 0 0 5px 0;\n    font-size: 24px;\n    font-weight: 500;\n  }\n  \n  p {\n    margin: 0;\n    color: var(--el-text-color-secondary);\n    font-size: 16px;\n  }\n}\n\n.info-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n  gap: 20px;\n}\n\n.info-item {\n  display: flex;\n  align-items: center;\n  padding: 10px 0;\n  \n  .el-icon {\n    margin-right: 10px;\n    color: var(--el-color-primary);\n    font-size: 18px;\n  }\n  \n  .info-label {\n    font-weight: 500;\n    color: var(--el-text-color-secondary);\n    margin-right: 10px;\n    white-space: nowrap;\n  }\n  \n  .info-value {\n    color: var(--el-text-color-primary);\n    word-break: break-word;\n  }\n  \n  a {\n    color: var(--el-color-primary);\n    text-decoration: none;\n    \n    &:hover {\n      text-decoration: underline;\n    }\n  }\n}\n\n.card-row {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 20px;\n  margin-top: 20px;\n}\n\n.org-card,\n.department-card {\n  height: 100%;\n  transition: all 0.3s;\n  \n  &:hover {\n    transform: translateY(-2px);\n  }\n}\n\n.org-chart {\n  min-height: 300px;\n  padding: 10px 0;\n}\n\n.org-node {\n  display: flex;\n  align-items: center;\n  \n  .el-icon {\n    margin-right: 8px;\n    color: var(--el-color-primary);\n  }\n}\n\n.org-count {\n  margin-left: 8px;\n}\n\n.dept-name {\n  display: flex;\n  align-items: center;\n  \n  .el-icon {\n    margin-right: 8px;\n    color: var(--el-color-primary);\n  }\n}\n\n/* 响应式布局 */\n@media screen and (max-width: 992px) {\n  .card-row {\n    grid-template-columns: 1fr;\n  }\n  \n  .info-grid {\n    grid-template-columns: 1fr;\n  }\n}\n\n/* 深色模式适配 */\n:deep(.el-tree) {\n  background-color: transparent;\n  color: var(--el-text-color-primary);\n}\n\n:deep(.el-tree-node__content:hover) {\n  background-color: var(--el-fill-color-light);\n}\n\n:deep(.el-tree-node__content) {\n  background-color: transparent;\n}\n\n:deep(.el-table) {\n  background-color: var(--el-bg-color) !important;\n  \n  th.el-table__cell,\n  td.el-table__cell {\n    background-color: var(--el-bg-color) !important;\n    border-bottom-color: var(--el-border-color-lighter) !important;\n  }\n  \n  .el-table__row:hover > td.el-table__cell {\n    background-color: var(--el-fill-color-light) !important;\n  }\n}\n\n:deep(.el-dialog__body) {\n  padding-top: 20px;\n}\n\n:deep(.el-form-item) {\n  margin-bottom: 20px;\n}\n\n:deep(.el-tag) {\n  background: var(--bg-color-tertiary) !important;\n  color: var(--text-color) !important;\n  border-color: var(--border-color) !important;\n}\n:deep(.el-tag.el-tag--info) {\n  background: var(--bg-color-tertiary) !important;\n  border-color: var(--border-color) !important;\n  color: var(--text-color) !important;\n}\n:deep(.el-tag.el-tag--success) {\n  background: var(--success-color) !important;\n  border-color: var(--success-color) !important;\n  color: #fff !important;\n}\n:deep(.el-tag.el-tag--primary) {\n  background: var(--primary-color) !important;\n  border-color: var(--primary-color) !important;\n  color: #fff !important;\n}\n:deep(.el-tag.el-tag--warning) {\n  background: var(--warning-color) !important;\n  border-color: var(--warning-color) !important;\n  color: #fff !important;\n}\n:deep(.el-tag.el-tag--danger) {\n  background: var(--danger-color) !important;\n  border-color: var(--danger-color) !important;\n  color: #fff !important;\n}\n:deep(.el-tree-node__content:hover) {\n  background-color: var(--hover-color) !important;\n}\n:deep(.el-table__row:hover > td.el-table__cell) {\n  background-color: var(--hover-color) !important;\n}\n</style> ","import { render } from \"./Index.vue?vue&type=template&id=22bc7c26&scoped=true\"\nimport script from \"./Index.vue?vue&type=script&lang=js\"\nexport * from \"./Index.vue?vue&type=script&lang=js\"\n\nimport \"./Index.vue?vue&type=style&index=0&id=22bc7c26&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\18083\\\\Desktop\\\\CCIT\\\\office\\\\smart-office\\\\frontend\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-22bc7c26\"]])\n\nexport default __exports__","'use strict';\n/* global Bun, Deno -- detection */\nvar globalThis = require('../internals/global-this');\nvar userAgent = require('../internals/environment-user-agent');\nvar classof = require('../internals/classof-raw');\n\nvar userAgentStartsWith = function (string) {\n  return userAgent.slice(0, string.length) === string;\n};\n\nmodule.exports = (function () {\n  if (userAgentStartsWith('Bun/')) return 'BUN';\n  if (userAgentStartsWith('Cloudflare-Workers')) return 'CLOUDFLARE';\n  if (userAgentStartsWith('Deno/')) return 'DENO';\n  if (userAgentStartsWith('Node.js/')) return 'NODE';\n  if (globalThis.Bun && typeof Bun.version == 'string') return 'BUN';\n  if (globalThis.Deno && typeof Deno.version == 'object') return 'DENO';\n  if (classof(globalThis.process) === 'process') return 'NODE';\n  if (globalThis.window && globalThis.document) return 'BROWSER';\n  return 'REST';\n})();\n","'use strict';\nvar $ = require('../internals/export');\nvar iterate = require('../internals/iterate');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar iteratorClose = require('../internals/iterator-close');\nvar iteratorHelperWithoutClosingOnEarlyError = require('../internals/iterator-helper-without-closing-on-early-error');\nvar apply = require('../internals/function-apply');\nvar fails = require('../internals/fails');\n\nvar $TypeError = TypeError;\n\n// https://bugs.webkit.org/show_bug.cgi?id=291651\nvar FAILS_ON_INITIAL_UNDEFINED = fails(function () {\n  // eslint-disable-next-line es/no-iterator-prototype-reduce, es/no-array-prototype-keys, array-callback-return -- required for testing\n  [].keys().reduce(function () { /* empty */ }, undefined);\n});\n\nvar reduceWithoutClosingOnEarlyError = !FAILS_ON_INITIAL_UNDEFINED && iteratorHelperWithoutClosingOnEarlyError('reduce', $TypeError);\n\n// `Iterator.prototype.reduce` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.reduce\n$({ target: 'Iterator', proto: true, real: true, forced: FAILS_ON_INITIAL_UNDEFINED || reduceWithoutClosingOnEarlyError }, {\n  reduce: function reduce(reducer /* , initialValue */) {\n    anObject(this);\n    try {\n      aCallable(reducer);\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    var noInitial = arguments.length < 2;\n    var accumulator = noInitial ? undefined : arguments[1];\n    if (reduceWithoutClosingOnEarlyError) {\n      return apply(reduceWithoutClosingOnEarlyError, this, noInitial ? [reducer] : [reducer, accumulator]);\n    }\n    var record = getIteratorDirect(this);\n    var counter = 0;\n    iterate(record, function (value) {\n      if (noInitial) {\n        noInitial = false;\n        accumulator = value;\n      } else {\n        accumulator = reducer(accumulator, value, counter);\n      }\n      counter++;\n    }, { IS_RECORD: true });\n    if (noInitial) throw new $TypeError('Reduce of empty iterator with no initial value');\n    return accumulator;\n  }\n});\n","'use strict';\nvar ENVIRONMENT = require('../internals/environment');\n\nmodule.exports = ENVIRONMENT === 'NODE';\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call -- required for testing\n    method.call(null, argument || function () { return 1; }, 1);\n  });\n};\n","'use strict';\nvar aCallable = require('../internals/a-callable');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\nvar $TypeError = TypeError;\n\nvar REDUCE_EMPTY = 'Reduce of empty array with no initial value';\n\n// `Array.prototype.{ reduce, reduceRight }` methods implementation\nvar createMethod = function (IS_RIGHT) {\n  return function (that, callbackfn, argumentsLength, memo) {\n    var O = toObject(that);\n    var self = IndexedObject(O);\n    var length = lengthOfArrayLike(O);\n    aCallable(callbackfn);\n    if (length === 0 && argumentsLength < 2) throw new $TypeError(REDUCE_EMPTY);\n    var index = IS_RIGHT ? length - 1 : 0;\n    var i = IS_RIGHT ? -1 : 1;\n    if (argumentsLength < 2) while (true) {\n      if (index in self) {\n        memo = self[index];\n        index += i;\n        break;\n      }\n      index += i;\n      if (IS_RIGHT ? index < 0 : length <= index) {\n        throw new $TypeError(REDUCE_EMPTY);\n      }\n    }\n    for (;IS_RIGHT ? index >= 0 : length > index; index += i) if (index in self) {\n      memo = callbackfn(memo, self[index], index, O);\n    }\n    return memo;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.reduce` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduce\n  left: createMethod(false),\n  // `Array.prototype.reduceRight` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduceright\n  right: createMethod(true)\n};\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Index.vue?vue&type=style&index=0&id=22bc7c26&lang=scss&scoped=true\"","import request from '@/utils/request'\r\n\r\n/**\r\n * 公司相关API服务\r\n */\r\n\r\n// 获取所有公司列表\r\nexport function getCompanyList() {\r\n  return request({\r\n    url: '/api/auth/companies/',\r\n    method: 'get'\r\n  })\r\n}\r\n\r\n// 获取简化的公司列表(id和名称)\r\nexport function getSimpleCompanyList() {\r\n  return request({\r\n    url: '/api/auth/companies/simple_list/',\r\n    method: 'get',\r\n    auth: false\r\n  })\r\n}\r\n\r\n// 获取公司详情\r\nexport function getCompanyDetails(id) {\r\n  return request({\r\n    url: `/api/auth/companies/${id}/company_details/`,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\n// 创建公司\r\nexport function createCompany(data) {\r\n  return request({\r\n    url: '/api/auth/companies/',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n\r\n// 更新公司信息\r\nexport function updateCompany(id, data) {\r\n  return request({\r\n    url: `/api/auth/companies/${id}/`,\r\n    method: 'put',\r\n    data\r\n  })\r\n}\r\n\r\n// 删除公司\r\nexport function deleteCompany(id) {\r\n  return request({\r\n    url: `/api/auth/companies/${id}/`,\r\n    method: 'delete'\r\n  })\r\n}\r\n\r\n/**\r\n * 部门相关API服务\r\n */\r\n\r\n// 获取部门列表\r\nexport function getDepartmentList(params) {\r\n  return request({\r\n    url: '/api/auth/departments/',\r\n    method: 'get',\r\n    params\r\n  })\r\n}\r\n\r\n// 获取公司的部门列表\r\nexport function getCompanyDepartments(companyId) {\r\n  return request({\r\n    url: '/api/auth/departments/company_departments/',\r\n    method: 'get',\r\n    params: {\r\n      company_id: companyId\r\n    }\r\n  })\r\n}\r\n\r\n// 创建部门\r\nexport function createDepartment(data) {\r\n  return request({\r\n    url: '/api/auth/departments/',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n\r\n// 更新部门信息\r\nexport function updateDepartment(id, data) {\r\n  return request({\r\n    url: `/api/auth/departments/${id}/`,\r\n    method: 'put',\r\n    data\r\n  })\r\n}\r\n\r\n// 删除部门\r\nexport function deleteDepartment(id) {\r\n  return request({\r\n    url: `/api/auth/departments/${id}/`,\r\n    method: 'delete'\r\n  })\r\n}\r\n\r\n// 获取当前登录用户所属公司信息\r\nexport function getCurrentUserCompany() {\r\n  return request({\r\n    url: '/api/auth/companies/current_user_company/',\r\n    method: 'get'\r\n  })\r\n} "],"sourceRoot":""}