(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d5970f7"],{"23b4":function(e,t,c){},"23bf":function(e,t,c){"use strict";c.r(t);var n=c("7a23");const o={class:"nlp-scheduler"},a={class:"input-area"},r={class:"events-display"},l={class:"clearfix"},d={class:"event-details"},i={key:0},s={key:1};function b(e,t,c,b,m,j){const u=Object(n["resolveComponent"])("el-button"),O=Object(n["resolveComponent"])("el-input"),p=Object(n["resolveComponent"])("el-dropdown-item"),h=Object(n["resolveComponent"])("el-dropdown-menu"),y=Object(n["resolveComponent"])("el-dropdown"),V=Object(n["resolveComponent"])("el-card");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",o,[Object(n["createElementVNode"])("div",a,[Object(n["createVNode"])(O,{modelValue:m.query,"onUpdate:modelValue":t[1]||(t[1]=e=>m.query=e),placeholder:"请输入您的日程安排，例如：明天下午两点和张三开会",clearable:"",onKeyup:Object(n["withKeys"])(j.handleQuery,["enter"])},{append:Object(n["withCtx"])(()=>[Object(n["createVNode"])(u,{onClick:t[0]||(t[0]=e=>j.handleQuery())},{default:Object(n["withCtx"])(()=>t[2]||(t[2]=[Object(n["createTextVNode"])("智能安排")])),_:1})]),_:1},8,["modelValue","onKeyup"])]),Object(n["createElementVNode"])("div",r,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(m.events,e=>(Object(n["openBlock"])(),Object(n["createBlock"])(V,{key:e.id,class:"event-card"},{header:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("div",l,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.title),1),Object(n["createVNode"])(y,{style:{float:"right"},onCommand:j.handleCommand},{dropdown:Object(n["withCtx"])(()=>[Object(n["createVNode"])(h,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(p,{command:{action:"edit",event:e}},{default:Object(n["withCtx"])(()=>t[3]||(t[3]=[Object(n["createTextVNode"])("编辑")])),_:2},1032,["command"]),Object(n["createVNode"])(p,{command:{action:"delete",event:e}},{default:Object(n["withCtx"])(()=>t[4]||(t[4]=[Object(n["createTextVNode"])("删除")])),_:2},1032,["command"])]),_:2},1024)]),default:Object(n["withCtx"])(()=>[t[5]||(t[5]=Object(n["createElementVNode"])("span",{class:"el-dropdown-link"},[Object(n["createTextVNode"])(" 操作"),Object(n["createElementVNode"])("i",{class:"el-icon-arrow-down el-icon--right"})],-1))]),_:2},1032,["onCommand"])])]),default:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("div",d,[Object(n["createElementVNode"])("p",null,[t[6]||(t[6]=Object(n["createElementVNode"])("strong",null,"时间:",-1)),Object(n["createTextVNode"])(" "+Object(n["toDisplayString"])(j.formatDateTime(e.start))+" - "+Object(n["toDisplayString"])(j.formatDateTime(e.end)),1)]),e.location?(Object(n["openBlock"])(),Object(n["createElementBlock"])("p",i,[t[7]||(t[7]=Object(n["createElementVNode"])("strong",null,"地点:",-1)),Object(n["createTextVNode"])(" "+Object(n["toDisplayString"])(e.location),1)])):Object(n["createCommentVNode"])("",!0),e.description?(Object(n["openBlock"])(),Object(n["createElementBlock"])("p",s,[t[8]||(t[8]=Object(n["createElementVNode"])("strong",null,"描述:",-1)),Object(n["createTextVNode"])(" "+Object(n["toDisplayString"])(e.description),1)])):Object(n["createCommentVNode"])("",!0)])]),_:2},1024))),128))])])}var m=c("b775"),j={name:"NlpScheduler",data(){return{query:"",events:[]}},methods:{async handleQuery(e){const t="string"===typeof e?e:this.query;if(t.trim())try{const e=await m["a"].post("/api/calendar/events/nlp/",{query:t});e.data.success?(this.events=e.data.data,this.$message.success("操作成功"),this.query=""):this.$message.error(e.data.error||"操作失败")}catch(c){this.$message.error("请求失败"),console.error(c)}else this.$message.warning("请输入内容")},handleCommand(e){const{action:t,event:c}=e;if("delete"===t){const e=`删除ID为 ${c.id} 的日程`;this.handleQuery(e)}else"edit"===t&&this.$prompt("请输入新的日程信息","编辑日程",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:c.title}).then(({value:e})=>{const t=`将ID为 ${c.id} 的日程修改为 ${e}`;this.handleQuery(t)}).catch(()=>{this.$message({type:"info",message:"取消输入"})})},formatDateTime(e){if(!e)return"";const t=new Date(e);return t.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}}},u=(c("7e0b"),c("6b0d")),O=c.n(u);const p=O()(j,[["render",b],["__scopeId","data-v-50e117ec"]]);t["default"]=p},"7e0b":function(e,t,c){"use strict";c("23b4")}}]);
//# sourceMappingURL=chunk-4d5970f7.fca2bb8f.js.map