(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-13c76586","chunk-2d0e4842"],{"0025":function(e,t,a){"use strict";a("d210")},"1e5a":function(e,t,a){"use strict";var c=a("23e7"),n=a("9961"),r=a("dad2");c({target:"Set",proto:!0,real:!0,forced:!r("symmetricDifference")},{symmetricDifference:n})},"1e70":function(e,t,a){"use strict";var c=a("23e7"),n=a("a5f7"),r=a("dad2"),o=!r("difference",(function(e){return 0===e.size}));c({target:"Set",proto:!0,real:!0,forced:o},{difference:n})},"24d2":function(e,t,a){"use strict";a.d(t,"e",(function(){return n})),a.d(t,"m",(function(){return r})),a.d(t,"b",(function(){return o})),a.d(t,"k",(function(){return l})),a.d(t,"f",(function(){return i})),a.d(t,"a",(function(){return s})),a.d(t,"l",(function(){return u})),a.d(t,"c",(function(){return d})),a.d(t,"i",(function(){return b})),a.d(t,"g",(function(){return f})),a.d(t,"j",(function(){return p})),a.d(t,"d",(function(){return m})),a.d(t,"h",(function(){return j}));var c=a("b775");function n(e){return Object(c["a"])({url:"/api/project-documents/",method:"get",params:{project:e}})}function r(e){return Object(c["a"])({url:"/api/project-documents/",method:"post",data:e,headers:{"Content-Type":"multipart/form-data"}})}function o(e){return Object(c["a"])({url:`/api/project-documents/${e}/`,method:"delete"})}function l(e,t){return Object(c["a"])({url:`/api/project-documents/${e}/`,method:"patch",data:t,headers:{"Content-Type":"application/json"}})}function i(e){return Object(c["a"])({url:"/api/requirements/",method:"get",params:{project:e}})}function s(e){return Object(c["a"])({url:"/api/requirements/",method:"post",data:e})}function u(e,t){return Object(c["a"])({url:`/api/requirements/${e}/`,method:"patch",data:t})}function d(e){return Object(c["a"])({url:`/api/requirements/${e}/`,method:"delete"})}function b(e){return Object(c["a"])({url:"/api/requirements/ai_analysis/",method:"get",params:{project:e}})}function f(e){return Object(c["a"])({url:"/api/project-documents/ai_dashboard/",method:"get",params:{project:e}})}function p(e){return Object(c["a"])({url:`/api/requirements/${e}/ai_analysis/`,method:"get"})}function m(e,t){return Object(c["a"])({url:`/api/projects/${e}/export_ai_report/`,method:"post",data:t,responseType:"blob",timeout:12e4,headers:{"Content-Type":"application/json",Accept:"application/pdf, application/json;q=0.9"},validateStatus:function(e){return e>=200&&e<500}})}function j(e){return Object(c["a"])({url:`/api/projects/${e}/chart_analysis/`,method:"get"})}},"271a":function(e,t,a){"use strict";var c=a("cb2d"),n=a("e330"),r=a("577e"),o=a("d6d6"),l=URLSearchParams,i=l.prototype,s=n(i.getAll),u=n(i.has),d=new l("a=1");!d.has("a",2)&&d.has("a",void 0)||c(i,"has",(function(e){var t=arguments.length,a=t<2?void 0:arguments[1];if(t&&void 0===a)return u(this,e);var c=s(this,e);o(t,1);var n=r(a),l=0;while(l<c.length)if(c[l++]===n)return!0;return!1}),{enumerable:!0,unsafe:!0})},"384f":function(e,t,a){"use strict";var c=a("e330"),n=a("5388"),r=a("cb27"),o=r.Set,l=r.proto,i=c(l.forEach),s=c(l.keys),u=s(new o).next;e.exports=function(e,t,a){return a?n({iterator:s(e),next:u},t):i(e,t)}},"395e":function(e,t,a){"use strict";var c=a("dc19"),n=a("cb27").has,r=a("8e16"),o=a("7f65"),l=a("5388"),i=a("2a62");e.exports=function(e){var t=c(this),a=o(e);if(r(t)<a.size)return!1;var s=a.getIterator();return!1!==l(s,(function(e){if(!n(t,e))return i(s,"normal",!1)}))}},5388:function(e,t,a){"use strict";var c=a("c65b");e.exports=function(e,t,a){var n,r,o=a?e:e.iterator,l=e.next;while(!(n=c(l,o)).done)if(r=t(n.value),void 0!==r)return r}},5494:function(e,t,a){"use strict";var c=a("83ab"),n=a("e330"),r=a("edd0"),o=URLSearchParams.prototype,l=n(o.forEach);c&&!("size"in o)&&r(o,"size",{get:function(){var e=0;return l(this,(function(){e++})),e},configurable:!0,enumerable:!0})},"68df":function(e,t,a){"use strict";var c=a("dc19"),n=a("8e16"),r=a("384f"),o=a("7f65");e.exports=function(e){var t=c(this),a=o(e);return!(n(t)>a.size)&&!1!==r(t,(function(e){if(!a.includes(e))return!1}),!0)}},"72c3":function(e,t,a){"use strict";var c=a("23e7"),n=a("e9bc"),r=a("dad2");c({target:"Set",proto:!0,real:!0,forced:!r("union")},{union:n})},"79a4":function(e,t,a){"use strict";var c=a("23e7"),n=a("d039"),r=a("953b"),o=a("dad2"),l=!o("intersection",(function(e){return 2===e.size&&e.has(1)&&e.has(2)}))||n((function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))}));c({target:"Set",proto:!0,real:!0,forced:l},{intersection:r})},"7f65":function(e,t,a){"use strict";var c=a("59ed"),n=a("825a"),r=a("c65b"),o=a("5926"),l=a("46c4"),i="Invalid size",s=RangeError,u=TypeError,d=Math.max,b=function(e,t){this.set=e,this.size=d(t,0),this.has=c(e.has),this.keys=c(e.keys)};b.prototype={getIterator:function(){return l(n(r(this.keys,this.set)))},includes:function(e){return r(this.has,this.set,e)}},e.exports=function(e){n(e);var t=+e.size;if(t!==t)throw new u(i);var a=o(t);if(a<0)throw new s(i);return new b(e,a)}},"83b9":function(e,t,a){"use strict";var c=a("cb27"),n=a("384f"),r=c.Set,o=c.add;e.exports=function(e){var t=new r;return n(e,(function(e){o(t,e)})),t}},"88a7":function(e,t,a){"use strict";var c=a("cb2d"),n=a("e330"),r=a("577e"),o=a("d6d6"),l=URLSearchParams,i=l.prototype,s=n(i.append),u=n(i["delete"]),d=n(i.forEach),b=n([].push),f=new l("a=1&a=2&b=3");f["delete"]("a",1),f["delete"]("b",void 0),f+""!=="a=2"&&c(i,"delete",(function(e){var t=arguments.length,a=t<2?void 0:arguments[1];if(t&&void 0===a)return u(this,e);var c=[];d(this,(function(e,t){b(c,{key:t,value:e})})),o(t,1);var n,l=r(e),i=r(a),f=0,p=0,m=!1,j=c.length;while(f<j)n=c[f++],m||n.key===l?(m=!0,u(this,n.key)):p++;while(p<j)n=c[p++],n.key===l&&n.value===i||s(this,n.key,n.value)}),{enumerable:!0,unsafe:!0})},"8b00":function(e,t,a){"use strict";var c=a("23e7"),n=a("68df"),r=a("dad2"),o=!r("isSubsetOf",(function(e){return e}));c({target:"Set",proto:!0,real:!0,forced:o},{isSubsetOf:n})},"8e16":function(e,t,a){"use strict";var c=a("7282"),n=a("cb27");e.exports=c(n.proto,"size","get")||function(e){return e.size}},"910d":function(e,t,a){"use strict";var c=a("23e7"),n=a("c65b"),r=a("59ed"),o=a("825a"),l=a("46c4"),i=a("c5cc"),s=a("9bdd"),u=a("c430"),d=a("2a62"),b=a("f99f"),f=!u&&b("filter",TypeError),p=i((function(){var e,t,a,c=this.iterator,r=this.predicate,l=this.next;while(1){if(e=o(n(l,c)),t=this.done=!!e.done,t)return;if(a=e.value,s(c,r,[a,this.counter++],!0))return a}}));c({target:"Iterator",proto:!0,real:!0,forced:u||f},{filter:function(e){o(this);try{r(e)}catch(t){d(this,"throw",t)}return f?n(f,this,e):new p(l(this),{predicate:e})}})},"953b":function(e,t,a){"use strict";var c=a("dc19"),n=a("cb27"),r=a("8e16"),o=a("7f65"),l=a("384f"),i=a("5388"),s=n.Set,u=n.add,d=n.has;e.exports=function(e){var t=c(this),a=o(e),n=new s;return r(t)>a.size?i(a.getIterator(),(function(e){d(t,e)&&u(n,e)})):l(t,(function(e){a.includes(e)&&u(n,e)})),n}},9961:function(e,t,a){"use strict";var c=a("dc19"),n=a("cb27"),r=a("83b9"),o=a("7f65"),l=a("5388"),i=n.add,s=n.has,u=n.remove;e.exports=function(e){var t=c(this),a=o(e).getIterator(),n=r(t);return l(a,(function(e){s(t,e)?u(n,e):i(n,e)})),n}},a4e7:function(e,t,a){"use strict";var c=a("23e7"),n=a("395e"),r=a("dad2"),o=!r("isSupersetOf",(function(e){return!e}));c({target:"Set",proto:!0,real:!0,forced:o},{isSupersetOf:n})},a5f7:function(e,t,a){"use strict";var c=a("dc19"),n=a("cb27"),r=a("83b9"),o=a("8e16"),l=a("7f65"),i=a("384f"),s=a("5388"),u=n.has,d=n.remove;e.exports=function(e){var t=c(this),a=l(e),n=r(t);return o(t)<=a.size?i(t,(function(e){a.includes(e)&&d(n,e)})):s(a.getIterator(),(function(e){u(t,e)&&d(n,e)})),n}},b4bc:function(e,t,a){"use strict";var c=a("dc19"),n=a("cb27").has,r=a("8e16"),o=a("7f65"),l=a("384f"),i=a("5388"),s=a("2a62");e.exports=function(e){var t=c(this),a=o(e);if(r(t)<=a.size)return!1!==l(t,(function(e){if(a.includes(e))return!1}),!0);var u=a.getIterator();return!1!==i(u,(function(e){if(n(t,e))return s(u,"normal",!1)}))}},c1a1:function(e,t,a){"use strict";var c=a("23e7"),n=a("b4bc"),r=a("dad2"),o=!r("isDisjointFrom",(function(e){return!e}));c({target:"Set",proto:!0,real:!0,forced:o},{isDisjointFrom:n})},cb27:function(e,t,a){"use strict";var c=a("e330"),n=Set.prototype;e.exports={Set:Set,add:c(n.add),has:c(n.has),remove:c(n["delete"]),proto:n}},d1c5:function(e,t,a){"use strict";a.r(t);a("e9f5"),a("910d"),a("7d54"),a("ab43"),a("a732"),a("1e70"),a("79a4"),a("c1a1"),a("8b00"),a("a4e7"),a("1e5a"),a("72c3"),a("88a7"),a("271a"),a("5494");var c=a("7a23"),n=a("f6f2"),r=a("3ef4"),o=a("c9a1"),l=a("24d2"),i=a("cee4"),s=a("b775"),u=a("7c5c");const d={class:"module-card"},b={class:"module-header"},f={class:"btn-group"},p={class:"ai-document-analysis mb-4"},m={class:"d-flex justify-content-between align-items-center mb-3"},j={class:"btn-group"},O={class:"row"},h={class:"col-md-4"},v={class:"ai-analysis-card"},g={class:"text-muted small"},V={class:"col-md-4"},y={class:"ai-analysis-card"},x={class:"document-relations"},w={class:"relation-item"},N={class:"relation-item"},k={class:"col-md-4"},C={class:"ai-analysis-card"},E={class:"ai-suggestions"},_={key:0,class:"text-center py-2"},B=["innerHTML"],S={class:"filter-bar",style:{display:"flex",gap:"12px","margin-bottom":"16px"}},T={class:"document-list"},z={class:"list-group"},I={class:"d-flex w-100 justify-content-between"},q={class:"mb-1"},A={class:"ai-document-tags"},L={class:"text-end"},U={class:"mb-1"},F={key:0,class:"ai-document-analysis"},D={class:"d-flex justify-content-between"},R=["innerHTML"],M=["innerHTML"],$={key:1,class:"ai-document-analysis"},H="http://localhost:8000";var P={__name:"DocumentsView",props:{project:{type:Object,required:!0}},setup(e){const t=e,a=Object(c["ref"])([]),P=Object(c["ref"])(!1),J=Object(c["ref"])(!1),G=Object(c["ref"])({name:"",desc:"",tags:"",file:null}),K=Object(c["ref"])([]),Q=Object(c["ref"])(!1),W=Object(c["ref"])(!1),X=Object(c["ref"])({id:"",name:"",desc:"",tags:""}),Y=Object(c["ref"])(!1),Z=Object(c["ref"])({health_score:0,health_desc:"",related_count:0,conflict_count:0,suggestions:[]}),ee=Object(c["ref"])(!1),te=Object(c["ref"])(""),ae=Object(c["ref"])(""),ce=Object(c["computed"])(()=>{const e=new Set;return a.value.forEach(t=>{(t.tags||[]).forEach(t=>e.add(t.text))}),Array.from(e)}),ne=Object(c["computed"])(()=>a.value.filter(e=>{const t=!te.value||e.name.includes(te.value)||e.desc&&e.desc.includes(te.value),a=!ae.value||e.tags&&e.tags.some(e=>e.text===ae.value);return t&&a})),re=e=>e?Object(u["marked"])(e):"";function oe(){var e;null!==(e=t.project)&&void 0!==e&&e.id&&(P.value=!0,Object(l["e"])(t.project.id).then(e=>{a.value=(e.data||[]).map(e=>({id:e.id,name:e.name,tags:(e.tags||"").split(",").filter(Boolean).map(e=>({text:e,type:"info"})),time:e.uploaded_at?e.uploaded_at.slice(0,10):"",desc:e.desc,analysis:e.analysis,file:e.file,analyzing:!1,showFullAnalysis:!1})),a.value.forEach(e=>{e.analysis||je(e)})}).finally(()=>P.value=!1))}function le(){var e;null!==(e=t.project)&&void 0!==e&&e.id&&(ee.value=!0,Object(l["g"])(t.project.id).then(e=>{Z.value=e.data||{health_score:0,health_desc:"",related_count:0,conflict_count:0,suggestions:[]}}).finally(()=>ee.value=!1))}function ie(){r["a"].success("文档上传成功！"),oe()}function se(){r["a"].error("文档上传失败，请重试")}function ue(e){G.value.file=e.raw,K.value=[e]}function de(){Oe.value?Oe.value.validate(e=>{if(!e)return void r["a"].error("请填写所有必填项");if(!G.value.file)return void r["a"].warning("请先选择文件");Q.value=!0;const a=new FormData;a.append("file",G.value.file),a.append("project",t.project.id),a.append("name",G.value.name||G.value.file.name),a.append("desc",G.value.desc),a.append("tags",G.value.tags),Object(l["m"])(a).then(()=>{ie(),J.value=!1,G.value={name:"",desc:"",tags:"",file:null},K.value=[]}).catch(()=>{se()}).finally(()=>{Q.value=!1})}):console.error("表单引用不存在")}function be(e,t){let a=e;/^https?:\/\//.test(e)||(a=H+e),Object(i["a"])({url:a,method:"get",responseType:"blob",headers:{Authorization:"Bearer "+(localStorage.getItem("token")||"")}}).then(a=>{const c=new Blob([a.data]);let n="";const r=e.split("/").pop()||"",o=r.lastIndexOf(".");-1!==o&&(n=r.slice(o));let l=(t||"download")+n;const i=a.headers["content-disposition"];if(i){const e=i.match(/filename="?([^"]+)"?/);e&&(l=decodeURIComponent(e[1]))}const s=document.createElement("a");s.href=window.URL.createObjectURL(c),s.download=l,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(s.href)}).catch(()=>{r["a"].error("下载失败，请检查网络或权限")})}function fe(e){X.value={id:e.id,name:e.name,desc:e.desc,tags:(e.tags||[]).map(e=>e.text).join(",")},W.value=!0}function pe(){he.value?he.value.validate(e=>{e?(Y.value=!0,Object(l["k"])(X.value.id,{name:X.value.name,desc:X.value.desc,tags:X.value.tags}).then(()=>{r["a"].success("文档信息已更新"),W.value=!1,oe()}).catch(()=>{r["a"].error("更新失败")}).finally(()=>{Y.value=!1})):r["a"].error("请填写所有必填项")}):console.error("表单引用不存在")}function me(e){o["a"].confirm("确定要删除该文档吗？","提示",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(l["b"])(e.id).then(()=>{r["a"].success("文档已删除"),oe()}).catch(()=>{r["a"].error("删除失败")})}).catch(()=>{})}function je(e){const t=Number(e.id);!t||isNaN(t)||t<=0||!Number.isInteger(t)?r["a"].warning("无效的文档ID"):(e.analyzing=!0,s["a"].post(`/api/project-documents/${e.id}/ai_analyze/`).then(t=>{const a=t.data.analysis;e.analysis=a,e.showFullAnalysis=!1,r["a"].success("AI分析完成")}).catch(e=>{console.error("文档AI分析失败:",e),r["a"].error("文档AI分析失败")}).finally(()=>{e.analyzing=!1}))}Object(c["onMounted"])(()=>{oe(),le()}),Object(c["watch"])(()=>{var e;return null===(e=t.project)||void 0===e?void 0:e.id},e=>{e&&(oe(),le())}),Object(c["watch"])(a,()=>{le()},{deep:!0});const Oe=Object(c["ref"])(null),he=Object(c["ref"])(null),ve={name:[{required:!0,message:"请输入文档名称",trigger:"blur"}],desc:[{required:!0,message:"请输入文档描述",trigger:"blur"}],tags:[{required:!0,message:"请输入标签",trigger:"blur"}],file:[{required:!0,message:"请选择文件",trigger:"change"}]};return(e,t)=>{const a=Object(c["resolveComponent"])("el-button"),r=Object(c["resolveComponent"])("el-input"),o=Object(c["resolveComponent"])("el-form-item"),l=Object(c["resolveComponent"])("el-upload"),i=Object(c["resolveComponent"])("el-form"),s=Object(c["resolveComponent"])("el-dialog"),u=Object(c["resolveComponent"])("el-icon"),H=Object(c["resolveComponent"])("el-progress"),P=Object(c["resolveComponent"])("el-option"),oe=Object(c["resolveComponent"])("el-select"),ie=Object(c["resolveComponent"])("el-tag");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",d,[Object(c["createElementVNode"])("div",b,[t[17]||(t[17]=Object(c["createElementVNode"])("h5",{class:"module-title"},"文档管理",-1)),Object(c["createElementVNode"])("div",f,[Object(c["createVNode"])(a,{type:"primary",size:"default",round:"",onClick:t[0]||(t[0]=e=>J.value=!0)},{default:Object(c["withCtx"])(()=>t[13]||(t[13]=[Object(c["createTextVNode"])("上传文档")])),_:1}),Object(c["createVNode"])(s,{modelValue:J.value,"onUpdate:modelValue":t[5]||(t[5]=e=>J.value=e),title:"上传文档",width:"400px"},{footer:Object(c["withCtx"])(()=>[Object(c["createVNode"])(a,{onClick:t[4]||(t[4]=e=>J.value=!1)},{default:Object(c["withCtx"])(()=>t[15]||(t[15]=[Object(c["createTextVNode"])("取消")])),_:1}),Object(c["createVNode"])(a,{type:"primary",onClick:de,loading:Q.value},{default:Object(c["withCtx"])(()=>t[16]||(t[16]=[Object(c["createTextVNode"])("上传")])),_:1},8,["loading"])]),default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(i,{model:G.value,"label-width":"80px",rules:ve,ref_key:"uploadFormRef",ref:Oe},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(o,{label:"文档名称",prop:"name",required:""},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(r,{modelValue:G.value.name,"onUpdate:modelValue":t[1]||(t[1]=e=>G.value.name=e),placeholder:"请输入文档名称"},null,8,["modelValue"])]),_:1}),Object(c["createVNode"])(o,{label:"描述",prop:"desc",required:""},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(r,{modelValue:G.value.desc,"onUpdate:modelValue":t[2]||(t[2]=e=>G.value.desc=e),placeholder:"请输入文档描述"},null,8,["modelValue"])]),_:1}),Object(c["createVNode"])(o,{label:"标签",prop:"tags",required:""},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(r,{modelValue:G.value.tags,"onUpdate:modelValue":t[3]||(t[3]=e=>G.value.tags=e),placeholder:"多个标签用逗号分隔"},null,8,["modelValue"])]),_:1}),Object(c["createVNode"])(o,{label:"文件",prop:"file",required:""},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(l,{"auto-upload":!1,"show-file-list":!0,"on-change":ue,"file-list":K.value},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(a,null,{default:Object(c["withCtx"])(()=>t[14]||(t[14]=[Object(c["createTextVNode"])("选择文件")])),_:1})]),_:1},8,["file-list"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])]),Object(c["createElementVNode"])("div",p,[Object(c["createElementVNode"])("div",m,[t[19]||(t[19]=Object(c["createElementVNode"])("h6",{class:"mb-0"},"AI文档分析",-1)),Object(c["createElementVNode"])("div",j,[Object(c["createVNode"])(a,{size:"small",onClick:le,loading:ee.value},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(u,null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(n["Refresh"]))]),_:1}),t[18]||(t[18]=Object(c["createTextVNode"])("刷新分析 "))]),_:1},8,["loading"])])]),Object(c["createElementVNode"])("div",O,[Object(c["createElementVNode"])("div",h,[Object(c["createElementVNode"])("div",v,[t[20]||(t[20]=Object(c["createElementVNode"])("h6",{class:"text-primary"},"文档健康度",-1)),Object(c["createVNode"])(H,{percentage:Z.value.health_score,status:Z.value.health_score>=80?"success":Z.value.health_score>=60?"warning":"exception",style:{"margin-bottom":"8px"}},null,8,["percentage","status"]),Object(c["createElementVNode"])("p",g,Object(c["toDisplayString"])(Z.value.health_desc),1)])]),Object(c["createElementVNode"])("div",V,[Object(c["createElementVNode"])("div",y,[t[21]||(t[21]=Object(c["createElementVNode"])("h6",{class:"text-primary"},"文档关联性",-1)),Object(c["createElementVNode"])("div",x,[Object(c["createElementVNode"])("div",w,[Object(c["createVNode"])(u,null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(n["Link"]))]),_:1}),Object(c["createTextVNode"])(" 发现"+Object(c["toDisplayString"])(Z.value.related_count)+"个相关文档 ",1)]),Object(c["createElementVNode"])("div",N,[Object(c["createVNode"])(u,null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(n["CircleCloseFilled"]))]),_:1}),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(Z.value.conflict_count)+"个文档存在版本冲突 ",1)])])])]),Object(c["createElementVNode"])("div",k,[Object(c["createElementVNode"])("div",C,[t[23]||(t[23]=Object(c["createElementVNode"])("h6",{class:"text-primary"},"智能建议",-1)),Object(c["createElementVNode"])("div",E,[Z.value.suggestions.length?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",_,t[22]||(t[22]=[Object(c["createElementVNode"])("span",{class:"text-muted"},"暂无建议",-1)]))),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(Z.value.suggestions,(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:"suggestion-item",key:t,innerHTML:re(e)},null,8,B))),128))])])])])]),Object(c["createElementVNode"])("div",S,[Object(c["createVNode"])(r,{modelValue:te.value,"onUpdate:modelValue":t[6]||(t[6]=e=>te.value=e),placeholder:"文档名/描述",clearable:"",style:{width:"180px"}},null,8,["modelValue"]),Object(c["createVNode"])(oe,{modelValue:ae.value,"onUpdate:modelValue":t[7]||(t[7]=e=>ae.value=e),placeholder:"标签",clearable:"",style:{width:"120px"}},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(P,{label:"全部",value:""}),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(ce.value,e=>(Object(c["openBlock"])(),Object(c["createBlock"])(P,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),Object(c["createElementVNode"])("div",T,[Object(c["createElementVNode"])("div",z,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(ne.value,e=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:"list-group-item list-group-item-action",key:e.name},[Object(c["createElementVNode"])("div",I,[Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("h6",q,Object(c["toDisplayString"])(e.name),1),Object(c["createElementVNode"])("div",A,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.tags,e=>(Object(c["openBlock"])(),Object(c["createBlock"])(ie,{key:e.text,type:e.type,size:"small"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.text),1)]),_:2},1032,["type"]))),128))])]),Object(c["createElementVNode"])("div",L,[Object(c["createElementVNode"])("small",null,Object(c["toDisplayString"])(e.time),1),e.file?(Object(c["openBlock"])(),Object(c["createBlock"])(a,{key:0,type:"success",size:"small",onClick:t=>be(e.file,e.name),style:{"margin-left":"8px"}},{default:Object(c["withCtx"])(()=>t[24]||(t[24]=[Object(c["createTextVNode"])("下载")])),_:2},1032,["onClick"])):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])(a,{type:"primary",size:"small",onClick:t=>fe(e),style:{"margin-left":"8px"}},{default:Object(c["withCtx"])(()=>t[25]||(t[25]=[Object(c["createTextVNode"])("编辑")])),_:2},1032,["onClick"]),Object(c["createVNode"])(a,{type:"info",size:"small",onClick:t=>je(e),style:{"margin-left":"8px"},loading:e.analyzing},{default:Object(c["withCtx"])(()=>t[26]||(t[26]=[Object(c["createTextVNode"])("AI分析")])),_:2},1032,["onClick","loading"]),Object(c["createVNode"])(a,{type:"danger",size:"small",onClick:t=>me(e),style:{"margin-left":"8px"}},{default:Object(c["withCtx"])(()=>t[27]||(t[27]=[Object(c["createTextVNode"])("删除")])),_:2},1032,["onClick"])])]),Object(c["createElementVNode"])("p",U,Object(c["toDisplayString"])(e.desc),1),e.analysis?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",F,[Object(c["createElementVNode"])("div",D,[t[28]||(t[28]=Object(c["createElementVNode"])("small",{class:"text-muted"},"AI分析：",-1)),Object(c["createVNode"])(a,{type:"link",size:"small",onClick:t=>e.showFullAnalysis=!e.showFullAnalysis},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.showFullAnalysis?"收起":"展开"),1)]),_:2},1032,["onClick"])]),e.showFullAnalysis?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:0,innerHTML:re(e.analysis)},null,8,R)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:1,innerHTML:re(e.analysis.substring(0,100)+(e.analysis.length>100?"...":""))},null,8,M))])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",$,t[29]||(t[29]=[Object(c["createElementVNode"])("small",{class:"text-muted"},"暂无AI分析",-1)])))]))),128))])]),Object(c["createVNode"])(s,{modelValue:W.value,"onUpdate:modelValue":t[12]||(t[12]=e=>W.value=e),title:"编辑文档信息",width:"400px"},{footer:Object(c["withCtx"])(()=>[Object(c["createVNode"])(a,{onClick:t[11]||(t[11]=e=>W.value=!1)},{default:Object(c["withCtx"])(()=>t[30]||(t[30]=[Object(c["createTextVNode"])("取消")])),_:1}),Object(c["createVNode"])(a,{type:"primary",onClick:pe,loading:Y.value},{default:Object(c["withCtx"])(()=>t[31]||(t[31]=[Object(c["createTextVNode"])("保存")])),_:1},8,["loading"])]),default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(i,{model:X.value,"label-width":"80px",rules:ve,ref_key:"editFormRef",ref:he},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(o,{label:"文档名称",prop:"name",required:""},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(r,{modelValue:X.value.name,"onUpdate:modelValue":t[8]||(t[8]=e=>X.value.name=e),placeholder:"请输入文档名称"},null,8,["modelValue"])]),_:1}),Object(c["createVNode"])(o,{label:"描述",prop:"desc",required:""},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(r,{modelValue:X.value.desc,"onUpdate:modelValue":t[9]||(t[9]=e=>X.value.desc=e),placeholder:"请输入文档描述"},null,8,["modelValue"])]),_:1}),Object(c["createVNode"])(o,{label:"标签",prop:"tags",required:""},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(r,{modelValue:X.value.tags,"onUpdate:modelValue":t[10]||(t[10]=e=>X.value.tags=e),placeholder:"多个标签用逗号分隔"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},J=(a("0025"),a("e7ae"),a("6b0d")),G=a.n(J);const K=G()(P,[["__scopeId","data-v-d3b1aee0"]]);t["default"]=K},d210:function(e,t,a){},d6d6:function(e,t,a){"use strict";var c=TypeError;e.exports=function(e,t){if(e<t)throw new c("Not enough arguments");return e}},dad2:function(e,t,a){"use strict";var c=a("d066"),n=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},r=function(e){return{size:e,has:function(){return!0},keys:function(){throw new Error("e")}}};e.exports=function(e,t){var a=c("Set");try{(new a)[e](n(0));try{return(new a)[e](n(-1)),!1}catch(l){if(!t)return!0;try{return(new a)[e](r(-1/0)),!1}catch(i){var o=new a;return o.add(1),o.add(2),t(o[e](r(1/0)))}}}catch(i){return!1}}},dc19:function(e,t,a){"use strict";var c=a("cb27").has;e.exports=function(e){return c(e),e}},e7ae:function(e,t,a){"use strict";a("f0d9")},e9bc:function(e,t,a){"use strict";var c=a("dc19"),n=a("cb27").add,r=a("83b9"),o=a("7f65"),l=a("5388");e.exports=function(e){var t=c(this),a=o(e).getIterator(),i=r(t);return l(a,(function(e){n(i,e)})),i}},f0d9:function(e,t,a){}}]);
//# sourceMappingURL=chunk-13c76586.046f712b.js.map