{"version":3,"sources":["webpack:///./src/views/project/components/DocumentsView.vue?4999","webpack:///./node_modules/core-js/modules/es.set.symmetric-difference.v2.js","webpack:///./node_modules/core-js/modules/es.set.difference.v2.js","webpack:///./src/api/project.js","webpack:///./node_modules/core-js/modules/web.url-search-params.has.js","webpack:///./node_modules/core-js/internals/set-iterate.js","webpack:///./node_modules/core-js/internals/set-is-superset-of.js","webpack:///./node_modules/core-js/internals/iterate-simple.js","webpack:///./node_modules/core-js/modules/web.url-search-params.size.js","webpack:///./node_modules/core-js/internals/set-is-subset-of.js","webpack:///./node_modules/core-js/modules/es.set.union.v2.js","webpack:///./node_modules/core-js/modules/es.set.intersection.v2.js","webpack:///./node_modules/core-js/internals/get-set-record.js","webpack:///./node_modules/core-js/internals/set-clone.js","webpack:///./node_modules/core-js/modules/web.url-search-params.delete.js","webpack:///./node_modules/core-js/modules/es.set.is-subset-of.v2.js","webpack:///./node_modules/core-js/internals/set-size.js","webpack:///./node_modules/core-js/modules/es.iterator.filter.js","webpack:///./node_modules/core-js/internals/set-intersection.js","webpack:///./node_modules/core-js/internals/set-symmetric-difference.js","webpack:///./node_modules/core-js/modules/es.set.is-superset-of.v2.js","webpack:///./node_modules/core-js/internals/set-difference.js","webpack:///./node_modules/core-js/internals/set-is-disjoint-from.js","webpack:///./node_modules/core-js/modules/es.set.is-disjoint-from.v2.js","webpack:///./node_modules/core-js/internals/set-helpers.js","webpack:///./src/views/project/components/DocumentsView.vue","webpack:///./src/views/project/components/DocumentsView.vue?4c7d","webpack:///./node_modules/core-js/internals/validate-arguments-length.js","webpack:///./node_modules/core-js/internals/set-method-accept-set-like.js","webpack:///./node_modules/core-js/internals/a-set.js","webpack:///./src/views/project/components/DocumentsView.vue?bf3e","webpack:///./node_modules/core-js/internals/set-union.js"],"names":["$","symmetricDifference","setMethodAcceptSetLike","target","proto","real","forced","difference","INCORRECT","result","size","fetchProjectDocuments","projectId","request","url","method","params","project","uploadProjectDocument","data","headers","deleteProjectDocument","id","updateProjectDocument","fetchRequirements","createRequirement","updateRequirement","deleteRequirement","getRequirementAiAnalysis","getDocumentAiDashboard","getSingleRequirementAiAnalysis","requirementId","exportProjectAiReport","responseType","timeout","validateStatus","status","getProjectChartAnalysis","defineBuiltIn","uncurryThis","toString","validateArgumentsLength","$URLSearchParams","URLSearchParams","URLSearchParamsPrototype","prototype","getAll","$has","has","undefined","name","length","arguments","$value","this","values","value","index","enumerable","unsafe","iterateSimple","SetHelpers","Set","SetPrototype","forEach","keys","next","module","exports","set","fn","interruptible","iterator","aSet","getSetRecord","iteratorClose","other","O","otherRec","getIterator","e","call","record","ITERATOR_INSTEAD_OF_RECORD","step","done","DESCRIPTORS","defineBuiltInAccessor","get","count","configurable","iterate","includes","union","fails","intersection","String","Array","from","aCallable","anObject","toIntegerOrInfinity","getIteratorDirect","INVALID_SIZE","$RangeError","RangeError","$TypeError","TypeError","max","Math","SetRecord","intSize","it","obj","numSize","add","append","$delete","push","entries","v","k","key","entry","dindex","found","entriesLength","isSubsetOf","uncurryThisAccessor","createIteratorProxy","callWithSafeIterationClosing","IS_PURE","iteratorHelperWithoutClosingOnEarlyError","filterWithoutClosingOnEarlyError","IteratorProxy","predicate","counter","filter","error","iterateSet","clone","remove","keysIter","isSupersetOf","isDisjointFrom","BASE_URL","props","__props","docs","ref","loading","uploadDialogVisible","uploadForm","desc","tags","file","fileList","uploading","editDialogVisible","editForm","editLoading","aiDocDashboard","health_score","health_desc","related_count","conflict_count","suggestions","aiDocLoading","filterKeyword","filterTag","allTags","computed","tagsSet","doc","t","text","filteredDocs","matchKeyword","matchTag","some","formatMarkdown","marked","loadDocuments","_props$project","then","res","map","split","Boolean","type","time","uploaded_at","slice","analysis","analyzing","showFullAnalysis","analyzeDocument","finally","fetchAiDocDashboard","_props$project2","handleUploadSuccess","ElMessage","success","handleUploadError","handleFileChange","raw","submitUpload","uploadFormRef","validate","valid","warning","formData","FormData","catch","console","downloadFile","downloadUrl","test","axios","Authorization","localStorage","getItem","blob","Blob","ext","urlFilename","pop","idx","lastIndexOf","filename","disposition","match","decodeURIComponent","link","document","createElement","href","window","URL","createObjectURL","download","body","appendChild","click","removeChild","revokeObjectURL","openEditDialog","join","submitEdit","editFormRef","confirmDelete","ElMessageBox","confirm","confirmButtonText","cancelButtonText","idNum","Number","isNaN","isInteger","post","response","onMounted","watch","_props$project3","val","deep","formRules","required","message","trigger","__exports__","passed","getBuiltIn","createSetLike","createSetLikeWithInfinitySize","Error","callback","error2","Infinity"],"mappings":"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","file":"js/chunk-13c76586.046f712b.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./DocumentsView.vue?vue&type=style&index=0&id=d3b1aee0&scoped=true&lang=css\"","'use strict';\nvar $ = require('../internals/export');\nvar symmetricDifference = require('../internals/set-symmetric-difference');\nvar setMethodAcceptSetLike = require('../internals/set-method-accept-set-like');\n\n// `Set.prototype.symmetricDifference` method\n// https://tc39.es/ecma262/#sec-set.prototype.symmetricdifference\n$({ target: 'Set', proto: true, real: true, forced: !setMethodAcceptSetLike('symmetricDifference') }, {\n  symmetricDifference: symmetricDifference\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar difference = require('../internals/set-difference');\nvar setMethodAcceptSetLike = require('../internals/set-method-accept-set-like');\n\nvar INCORRECT = !setMethodAcceptSetLike('difference', function (result) {\n  return result.size === 0;\n});\n\n// `Set.prototype.difference` method\n// https://tc39.es/ecma262/#sec-set.prototype.difference\n$({ target: 'Set', proto: true, real: true, forced: INCORRECT }, {\n  difference: difference\n});\n","import request from '@/utils/request'\n\n// 获取项目文档列表\nexport function fetchProjectDocuments(projectId) {\n  return request({\n    url: '/api/project-documents/',\n    method: 'get',\n    params: { project: projectId }\n  })\n}\n\n// 上传项目文档\nexport function uploadProjectDocument(data) {\n  return request({\n    url: '/api/project-documents/',\n    method: 'post',\n    data,\n    headers: { 'Content-Type': 'multipart/form-data' }\n  })\n}\n\n// 删除项目文档\nexport function deleteProjectDocument(id) {\n  return request({\n    url: `/api/project-documents/${id}/`,\n    method: 'delete'\n  })\n}\n\n// 编辑项目文档\nexport function updateProjectDocument(id, data) {\n  return request({\n    url: `/api/project-documents/${id}/`,\n    method: 'patch',\n    data,\n    headers: { 'Content-Type': 'application/json' }\n  })\n}\n\n// 获取项目需求列表\nexport function fetchRequirements(projectId) {\n  return request({\n    url: '/api/requirements/',\n    method: 'get',\n    params: { project: projectId }\n  })\n}\n\n// 创建需求\nexport function createRequirement(data) {\n  return request({\n    url: '/api/requirements/',\n    method: 'post',\n    data\n  })\n}\n\n// 更新需求\nexport function updateRequirement(id, data) {\n  return request({\n    url: `/api/requirements/${id}/`,\n    method: 'patch',\n    data\n  })\n}\n\n// 删除需求\nexport function deleteRequirement(id) {\n  return request({\n    url: `/api/requirements/${id}/`,\n    method: 'delete'\n  })\n}\n\n// 获取需求AI分析\nexport function getRequirementAiAnalysis(projectId) {\n  return request({\n    url: '/api/requirements/ai_analysis/',\n    method: 'get',\n    params: { project: projectId }\n  })\n}\n\n// 获取文档AI聚合分析\nexport function getDocumentAiDashboard(projectId) {\n  return request({\n    url: '/api/project-documents/ai_dashboard/',\n    method: 'get',\n    params: { project: projectId }\n  })\n}\n\n// 获取单条需求AI分析\nexport function getSingleRequirementAiAnalysis(requirementId) {\n  return request({\n    url: `/api/requirements/${requirementId}/ai_analysis/`,\n    method: 'get'\n  })\n}\n\n// 导出项目AI分析报告（支持POST图片）\nexport function exportProjectAiReport(projectId, data) {\n  return request({\n    url: `/api/projects/${projectId}/export_ai_report/`,\n    method: 'post',\n    data,\n    responseType: 'blob', // 重要：下载文件\n    timeout: 120000, // 增加超时时间到120秒\n    headers: {\n      'Content-Type': 'application/json',\n      'Accept': 'application/pdf, application/json;q=0.9'\n    },\n    validateStatus: function (status) {\n      return status >= 200 && status < 500 // 默认只接受2xx响应状态码\n    }\n  })\n}\n\n// 获取项目报表中每个图表的AI分析\nexport function getProjectChartAnalysis(projectId) {\n  return request({\n    url: `/api/projects/${projectId}/chart_analysis/`,\n    method: 'get'\n  })\n} ","'use strict';\nvar defineBuiltIn = require('../internals/define-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toString = require('../internals/to-string');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\n\nvar $URLSearchParams = URLSearchParams;\nvar URLSearchParamsPrototype = $URLSearchParams.prototype;\nvar getAll = uncurryThis(URLSearchParamsPrototype.getAll);\nvar $has = uncurryThis(URLSearchParamsPrototype.has);\nvar params = new $URLSearchParams('a=1');\n\n// `undefined` case is a Chromium 117 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=14222\nif (params.has('a', 2) || !params.has('a', undefined)) {\n  defineBuiltIn(URLSearchParamsPrototype, 'has', function has(name /* , value */) {\n    var length = arguments.length;\n    var $value = length < 2 ? undefined : arguments[1];\n    if (length && $value === undefined) return $has(this, name);\n    var values = getAll(this, name); // also validates `this`\n    validateArgumentsLength(length, 1);\n    var value = toString($value);\n    var index = 0;\n    while (index < values.length) {\n      if (values[index++] === value) return true;\n    } return false;\n  }, { enumerable: true, unsafe: true });\n}\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar iterateSimple = require('../internals/iterate-simple');\nvar SetHelpers = require('../internals/set-helpers');\n\nvar Set = SetHelpers.Set;\nvar SetPrototype = SetHelpers.proto;\nvar forEach = uncurryThis(SetPrototype.forEach);\nvar keys = uncurryThis(SetPrototype.keys);\nvar next = keys(new Set()).next;\n\nmodule.exports = function (set, fn, interruptible) {\n  return interruptible ? iterateSimple({ iterator: keys(set), next: next }, fn) : forEach(set, fn);\n};\n","'use strict';\nvar aSet = require('../internals/a-set');\nvar has = require('../internals/set-helpers').has;\nvar size = require('../internals/set-size');\nvar getSetRecord = require('../internals/get-set-record');\nvar iterateSimple = require('../internals/iterate-simple');\nvar iteratorClose = require('../internals/iterator-close');\n\n// `Set.prototype.isSupersetOf` method\n// https://tc39.github.io/proposal-set-methods/#Set.prototype.isSupersetOf\nmodule.exports = function isSupersetOf(other) {\n  var O = aSet(this);\n  var otherRec = getSetRecord(other);\n  if (size(O) < otherRec.size) return false;\n  var iterator = otherRec.getIterator();\n  return iterateSimple(iterator, function (e) {\n    if (!has(O, e)) return iteratorClose(iterator, 'normal', false);\n  }) !== false;\n};\n","'use strict';\nvar call = require('../internals/function-call');\n\nmodule.exports = function (record, fn, ITERATOR_INSTEAD_OF_RECORD) {\n  var iterator = ITERATOR_INSTEAD_OF_RECORD ? record : record.iterator;\n  var next = record.next;\n  var step, result;\n  while (!(step = call(next, iterator)).done) {\n    result = fn(step.value);\n    if (result !== undefined) return result;\n  }\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\n\nvar URLSearchParamsPrototype = URLSearchParams.prototype;\nvar forEach = uncurryThis(URLSearchParamsPrototype.forEach);\n\n// `URLSearchParams.prototype.size` getter\n// https://github.com/whatwg/url/pull/734\nif (DESCRIPTORS && !('size' in URLSearchParamsPrototype)) {\n  defineBuiltInAccessor(URLSearchParamsPrototype, 'size', {\n    get: function size() {\n      var count = 0;\n      forEach(this, function () { count++; });\n      return count;\n    },\n    configurable: true,\n    enumerable: true\n  });\n}\n","'use strict';\nvar aSet = require('../internals/a-set');\nvar size = require('../internals/set-size');\nvar iterate = require('../internals/set-iterate');\nvar getSetRecord = require('../internals/get-set-record');\n\n// `Set.prototype.isSubsetOf` method\n// https://tc39.github.io/proposal-set-methods/#Set.prototype.isSubsetOf\nmodule.exports = function isSubsetOf(other) {\n  var O = aSet(this);\n  var otherRec = getSetRecord(other);\n  if (size(O) > otherRec.size) return false;\n  return iterate(O, function (e) {\n    if (!otherRec.includes(e)) return false;\n  }, true) !== false;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar union = require('../internals/set-union');\nvar setMethodAcceptSetLike = require('../internals/set-method-accept-set-like');\n\n// `Set.prototype.union` method\n// https://tc39.es/ecma262/#sec-set.prototype.union\n$({ target: 'Set', proto: true, real: true, forced: !setMethodAcceptSetLike('union') }, {\n  union: union\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar intersection = require('../internals/set-intersection');\nvar setMethodAcceptSetLike = require('../internals/set-method-accept-set-like');\n\nvar INCORRECT = !setMethodAcceptSetLike('intersection', function (result) {\n  return result.size === 2 && result.has(1) && result.has(2);\n}) || fails(function () {\n  // eslint-disable-next-line es/no-array-from, es/no-set, es/no-set-prototype-intersection -- testing\n  return String(Array.from(new Set([1, 2, 3]).intersection(new Set([3, 2])))) !== '3,2';\n});\n\n// `Set.prototype.intersection` method\n// https://tc39.es/ecma262/#sec-set.prototype.intersection\n$({ target: 'Set', proto: true, real: true, forced: INCORRECT }, {\n  intersection: intersection\n});\n","'use strict';\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar call = require('../internals/function-call');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\n\nvar INVALID_SIZE = 'Invalid size';\nvar $RangeError = RangeError;\nvar $TypeError = TypeError;\nvar max = Math.max;\n\nvar SetRecord = function (set, intSize) {\n  this.set = set;\n  this.size = max(intSize, 0);\n  this.has = aCallable(set.has);\n  this.keys = aCallable(set.keys);\n};\n\nSetRecord.prototype = {\n  getIterator: function () {\n    return getIteratorDirect(anObject(call(this.keys, this.set)));\n  },\n  includes: function (it) {\n    return call(this.has, this.set, it);\n  }\n};\n\n// `GetSetRecord` abstract operation\n// https://tc39.es/proposal-set-methods/#sec-getsetrecord\nmodule.exports = function (obj) {\n  anObject(obj);\n  var numSize = +obj.size;\n  // NOTE: If size is undefined, then numSize will be NaN\n  // eslint-disable-next-line no-self-compare -- NaN check\n  if (numSize !== numSize) throw new $TypeError(INVALID_SIZE);\n  var intSize = toIntegerOrInfinity(numSize);\n  if (intSize < 0) throw new $RangeError(INVALID_SIZE);\n  return new SetRecord(obj, intSize);\n};\n","'use strict';\nvar SetHelpers = require('../internals/set-helpers');\nvar iterate = require('../internals/set-iterate');\n\nvar Set = SetHelpers.Set;\nvar add = SetHelpers.add;\n\nmodule.exports = function (set) {\n  var result = new Set();\n  iterate(set, function (it) {\n    add(result, it);\n  });\n  return result;\n};\n","'use strict';\nvar defineBuiltIn = require('../internals/define-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toString = require('../internals/to-string');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\n\nvar $URLSearchParams = URLSearchParams;\nvar URLSearchParamsPrototype = $URLSearchParams.prototype;\nvar append = uncurryThis(URLSearchParamsPrototype.append);\nvar $delete = uncurryThis(URLSearchParamsPrototype['delete']);\nvar forEach = uncurryThis(URLSearchParamsPrototype.forEach);\nvar push = uncurryThis([].push);\nvar params = new $URLSearchParams('a=1&a=2&b=3');\n\nparams['delete']('a', 1);\n// `undefined` case is a Chromium 117 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=14222\nparams['delete']('b', undefined);\n\nif (params + '' !== 'a=2') {\n  defineBuiltIn(URLSearchParamsPrototype, 'delete', function (name /* , value */) {\n    var length = arguments.length;\n    var $value = length < 2 ? undefined : arguments[1];\n    if (length && $value === undefined) return $delete(this, name);\n    var entries = [];\n    forEach(this, function (v, k) { // also validates `this`\n      push(entries, { key: k, value: v });\n    });\n    validateArgumentsLength(length, 1);\n    var key = toString(name);\n    var value = toString($value);\n    var index = 0;\n    var dindex = 0;\n    var found = false;\n    var entriesLength = entries.length;\n    var entry;\n    while (index < entriesLength) {\n      entry = entries[index++];\n      if (found || entry.key === key) {\n        found = true;\n        $delete(this, entry.key);\n      } else dindex++;\n    }\n    while (dindex < entriesLength) {\n      entry = entries[dindex++];\n      if (!(entry.key === key && entry.value === value)) append(this, entry.key, entry.value);\n    }\n  }, { enumerable: true, unsafe: true });\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar isSubsetOf = require('../internals/set-is-subset-of');\nvar setMethodAcceptSetLike = require('../internals/set-method-accept-set-like');\n\nvar INCORRECT = !setMethodAcceptSetLike('isSubsetOf', function (result) {\n  return result;\n});\n\n// `Set.prototype.isSubsetOf` method\n// https://tc39.es/ecma262/#sec-set.prototype.issubsetof\n$({ target: 'Set', proto: true, real: true, forced: INCORRECT }, {\n  isSubsetOf: isSubsetOf\n});\n","'use strict';\nvar uncurryThisAccessor = require('../internals/function-uncurry-this-accessor');\nvar SetHelpers = require('../internals/set-helpers');\n\nmodule.exports = uncurryThisAccessor(SetHelpers.proto, 'size', 'get') || function (set) {\n  return set.size;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar createIteratorProxy = require('../internals/iterator-create-proxy');\nvar callWithSafeIterationClosing = require('../internals/call-with-safe-iteration-closing');\nvar IS_PURE = require('../internals/is-pure');\nvar iteratorClose = require('../internals/iterator-close');\nvar iteratorHelperWithoutClosingOnEarlyError = require('../internals/iterator-helper-without-closing-on-early-error');\n\nvar filterWithoutClosingOnEarlyError = !IS_PURE && iteratorHelperWithoutClosingOnEarlyError('filter', TypeError);\n\nvar IteratorProxy = createIteratorProxy(function () {\n  var iterator = this.iterator;\n  var predicate = this.predicate;\n  var next = this.next;\n  var result, done, value;\n  while (true) {\n    result = anObject(call(next, iterator));\n    done = this.done = !!result.done;\n    if (done) return;\n    value = result.value;\n    if (callWithSafeIterationClosing(iterator, predicate, [value, this.counter++], true)) return value;\n  }\n});\n\n// `Iterator.prototype.filter` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.filter\n$({ target: 'Iterator', proto: true, real: true, forced: IS_PURE || filterWithoutClosingOnEarlyError }, {\n  filter: function filter(predicate) {\n    anObject(this);\n    try {\n      aCallable(predicate);\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    if (filterWithoutClosingOnEarlyError) return call(filterWithoutClosingOnEarlyError, this, predicate);\n\n    return new IteratorProxy(getIteratorDirect(this), {\n      predicate: predicate\n    });\n  }\n});\n","'use strict';\nvar aSet = require('../internals/a-set');\nvar SetHelpers = require('../internals/set-helpers');\nvar size = require('../internals/set-size');\nvar getSetRecord = require('../internals/get-set-record');\nvar iterateSet = require('../internals/set-iterate');\nvar iterateSimple = require('../internals/iterate-simple');\n\nvar Set = SetHelpers.Set;\nvar add = SetHelpers.add;\nvar has = SetHelpers.has;\n\n// `Set.prototype.intersection` method\n// https://github.com/tc39/proposal-set-methods\nmodule.exports = function intersection(other) {\n  var O = aSet(this);\n  var otherRec = getSetRecord(other);\n  var result = new Set();\n\n  if (size(O) > otherRec.size) {\n    iterateSimple(otherRec.getIterator(), function (e) {\n      if (has(O, e)) add(result, e);\n    });\n  } else {\n    iterateSet(O, function (e) {\n      if (otherRec.includes(e)) add(result, e);\n    });\n  }\n\n  return result;\n};\n","'use strict';\nvar aSet = require('../internals/a-set');\nvar SetHelpers = require('../internals/set-helpers');\nvar clone = require('../internals/set-clone');\nvar getSetRecord = require('../internals/get-set-record');\nvar iterateSimple = require('../internals/iterate-simple');\n\nvar add = SetHelpers.add;\nvar has = SetHelpers.has;\nvar remove = SetHelpers.remove;\n\n// `Set.prototype.symmetricDifference` method\n// https://github.com/tc39/proposal-set-methods\nmodule.exports = function symmetricDifference(other) {\n  var O = aSet(this);\n  var keysIter = getSetRecord(other).getIterator();\n  var result = clone(O);\n  iterateSimple(keysIter, function (e) {\n    if (has(O, e)) remove(result, e);\n    else add(result, e);\n  });\n  return result;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar isSupersetOf = require('../internals/set-is-superset-of');\nvar setMethodAcceptSetLike = require('../internals/set-method-accept-set-like');\n\nvar INCORRECT = !setMethodAcceptSetLike('isSupersetOf', function (result) {\n  return !result;\n});\n\n// `Set.prototype.isSupersetOf` method\n// https://tc39.es/ecma262/#sec-set.prototype.issupersetof\n$({ target: 'Set', proto: true, real: true, forced: INCORRECT }, {\n  isSupersetOf: isSupersetOf\n});\n","'use strict';\nvar aSet = require('../internals/a-set');\nvar SetHelpers = require('../internals/set-helpers');\nvar clone = require('../internals/set-clone');\nvar size = require('../internals/set-size');\nvar getSetRecord = require('../internals/get-set-record');\nvar iterateSet = require('../internals/set-iterate');\nvar iterateSimple = require('../internals/iterate-simple');\n\nvar has = SetHelpers.has;\nvar remove = SetHelpers.remove;\n\n// `Set.prototype.difference` method\n// https://github.com/tc39/proposal-set-methods\nmodule.exports = function difference(other) {\n  var O = aSet(this);\n  var otherRec = getSetRecord(other);\n  var result = clone(O);\n  if (size(O) <= otherRec.size) iterateSet(O, function (e) {\n    if (otherRec.includes(e)) remove(result, e);\n  });\n  else iterateSimple(otherRec.getIterator(), function (e) {\n    if (has(O, e)) remove(result, e);\n  });\n  return result;\n};\n","'use strict';\nvar aSet = require('../internals/a-set');\nvar has = require('../internals/set-helpers').has;\nvar size = require('../internals/set-size');\nvar getSetRecord = require('../internals/get-set-record');\nvar iterateSet = require('../internals/set-iterate');\nvar iterateSimple = require('../internals/iterate-simple');\nvar iteratorClose = require('../internals/iterator-close');\n\n// `Set.prototype.isDisjointFrom` method\n// https://tc39.github.io/proposal-set-methods/#Set.prototype.isDisjointFrom\nmodule.exports = function isDisjointFrom(other) {\n  var O = aSet(this);\n  var otherRec = getSetRecord(other);\n  if (size(O) <= otherRec.size) return iterateSet(O, function (e) {\n    if (otherRec.includes(e)) return false;\n  }, true) !== false;\n  var iterator = otherRec.getIterator();\n  return iterateSimple(iterator, function (e) {\n    if (has(O, e)) return iteratorClose(iterator, 'normal', false);\n  }) !== false;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar isDisjointFrom = require('../internals/set-is-disjoint-from');\nvar setMethodAcceptSetLike = require('../internals/set-method-accept-set-like');\n\nvar INCORRECT = !setMethodAcceptSetLike('isDisjointFrom', function (result) {\n  return !result;\n});\n\n// `Set.prototype.isDisjointFrom` method\n// https://tc39.es/ecma262/#sec-set.prototype.isdisjointfrom\n$({ target: 'Set', proto: true, real: true, forced: INCORRECT }, {\n  isDisjointFrom: isDisjointFrom\n});\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\n// eslint-disable-next-line es/no-set -- safe\nvar SetPrototype = Set.prototype;\n\nmodule.exports = {\n  // eslint-disable-next-line es/no-set -- safe\n  Set: Set,\n  add: uncurryThis(SetPrototype.add),\n  has: uncurryThis(SetPrototype.has),\n  remove: uncurryThis(SetPrototype['delete']),\n  proto: SetPrototype\n};\n","<template>\n  <div class=\"module-card\">\n    <div class=\"module-header\">\n      <h5 class=\"module-title\">文档管理</h5>\n      <div class=\"btn-group\">\n        <el-button type=\"primary\" size=\"default\" round @click=\"uploadDialogVisible = true\">上传文档</el-button>\n        <el-dialog v-model=\"uploadDialogVisible\" title=\"上传文档\" width=\"400px\">\n          <el-form :model=\"uploadForm\" label-width=\"80px\" :rules=\"formRules\" ref=\"uploadFormRef\">\n            <el-form-item label=\"文档名称\" prop=\"name\" required>\n              <el-input v-model=\"uploadForm.name\" placeholder=\"请输入文档名称\" />\n            </el-form-item>\n            <el-form-item label=\"描述\" prop=\"desc\" required>\n              <el-input v-model=\"uploadForm.desc\" placeholder=\"请输入文档描述\" />\n            </el-form-item>\n            <el-form-item label=\"标签\" prop=\"tags\" required>\n              <el-input v-model=\"uploadForm.tags\" placeholder=\"多个标签用逗号分隔\" />\n            </el-form-item>\n            <el-form-item label=\"文件\" prop=\"file\" required>\n              <el-upload\n                :auto-upload=\"false\"\n                :show-file-list=\"true\"\n                :on-change=\"handleFileChange\"\n                :file-list=\"fileList\"\n              >\n                <el-button>选择文件</el-button>\n              </el-upload>\n            </el-form-item>\n          </el-form>\n          <template #footer>\n            <el-button @click=\"uploadDialogVisible = false\">取消</el-button>\n            <el-button type=\"primary\" @click=\"submitUpload\" :loading=\"uploading\">上传</el-button>\n          </template>\n        </el-dialog>\n      </div>\n    </div>\n    <!-- AI文档分析 -->\n    <div class=\"ai-document-analysis mb-4\">\n      <div class=\"d-flex justify-content-between align-items-center mb-3\">\n        <h6 class=\"mb-0\">AI文档分析</h6>\n        <div class=\"btn-group\">\n          <el-button size=\"small\" @click=\"fetchAiDocDashboard\" :loading=\"aiDocLoading\">\n            <el-icon><Refresh /></el-icon>刷新分析\n          </el-button>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col-md-4\">\n          <div class=\"ai-analysis-card\">\n            <h6 class=\"text-primary\">文档健康度</h6>\n            <el-progress :percentage=\"aiDocDashboard.health_score\" :status=\"aiDocDashboard.health_score>=80?'success':(aiDocDashboard.health_score>=60?'warning':'exception')\" style=\"margin-bottom:8px;\" />\n            <p class=\"text-muted small\">{{ aiDocDashboard.health_desc }}</p>\n          </div>\n        </div>\n        <div class=\"col-md-4\">\n          <div class=\"ai-analysis-card\">\n            <h6 class=\"text-primary\">文档关联性</h6>\n            <div class=\"document-relations\">\n              <div class=\"relation-item\">\n                <el-icon><Link /></el-icon>\n                发现{{ aiDocDashboard.related_count }}个相关文档\n              </div>\n              <div class=\"relation-item\">\n                <el-icon><CircleCloseFilled /></el-icon>\n                {{ aiDocDashboard.conflict_count }}个文档存在版本冲突\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"col-md-4\">\n          <div class=\"ai-analysis-card\">\n            <h6 class=\"text-primary\">智能建议</h6>\n            <div class=\"ai-suggestions\">\n              <div v-if=\"!aiDocDashboard.suggestions.length\" class=\"text-center py-2\">\n                <span class=\"text-muted\">暂无建议</span>\n              </div>\n              <div class=\"suggestion-item\" v-for=\"(suggestion, i) in aiDocDashboard.suggestions\" :key=\"i\" v-html=\"formatMarkdown(suggestion)\">\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- 筛选区 -->\n    <div class=\"filter-bar\" style=\"display:flex;gap:12px;margin-bottom:16px;\">\n      <el-input v-model=\"filterKeyword\" placeholder=\"文档名/描述\" clearable style=\"width:180px;\" />\n      <el-select v-model=\"filterTag\" placeholder=\"标签\" clearable style=\"width:120px;\">\n        <el-option label=\"全部\" value=\"\" />\n        <el-option v-for=\"tag in allTags\" :key=\"tag\" :label=\"tag\" :value=\"tag\" />\n      </el-select>\n    </div>\n    <!-- 文档列表 -->\n    <div class=\"document-list\">\n      <div class=\"list-group\">\n        <div class=\"list-group-item list-group-item-action\" v-for=\"doc in filteredDocs\" :key=\"doc.name\">\n          <div class=\"d-flex w-100 justify-content-between\">\n            <div>\n              <h6 class=\"mb-1\">{{ doc.name }}</h6>\n              <div class=\"ai-document-tags\">\n                <el-tag v-for=\"tag in doc.tags\" :key=\"tag.text\" :type=\"tag.type\" size=\"small\">{{ tag.text }}</el-tag>\n              </div>\n            </div>\n            <div class=\"text-end\">\n              <small>{{ doc.time }}</small>\n              <el-button v-if=\"doc.file\" type=\"success\" size=\"small\" @click=\"downloadFile(doc.file, doc.name)\" style=\"margin-left:8px;\">下载</el-button>\n              <el-button type=\"primary\" size=\"small\" @click=\"openEditDialog(doc)\" style=\"margin-left:8px;\">编辑</el-button>\n              <el-button type=\"info\" size=\"small\" @click=\"analyzeDocument(doc)\" style=\"margin-left:8px;\" :loading=\"doc.analyzing\">AI分析</el-button>\n              <el-button type=\"danger\" size=\"small\" @click=\"confirmDelete(doc)\" style=\"margin-left:8px;\">删除</el-button>\n            </div>\n          </div>\n          <p class=\"mb-1\">{{ doc.desc }}</p>\n          <div class=\"ai-document-analysis\" v-if=\"doc.analysis\">\n            <div class=\"d-flex justify-content-between\">\n              <small class=\"text-muted\">AI分析：</small>\n              <el-button type=\"link\" size=\"small\" @click=\"doc.showFullAnalysis = !doc.showFullAnalysis\">\n                {{ doc.showFullAnalysis ? '收起' : '展开' }}\n              </el-button>\n            </div>\n            <div v-if=\"doc.showFullAnalysis\" v-html=\"formatMarkdown(doc.analysis)\"></div>\n            <div v-else v-html=\"formatMarkdown(doc.analysis.substring(0, 100) + (doc.analysis.length > 100 ? '...' : ''))\"></div>\n          </div>\n          <div class=\"ai-document-analysis\" v-else>\n            <small class=\"text-muted\">暂无AI分析</small>\n          </div>\n        </div>\n      </div>\n    </div>\n    <el-dialog v-model=\"editDialogVisible\" title=\"编辑文档信息\" width=\"400px\">\n      <el-form :model=\"editForm\" label-width=\"80px\" :rules=\"formRules\" ref=\"editFormRef\">\n        <el-form-item label=\"文档名称\" prop=\"name\" required>\n          <el-input v-model=\"editForm.name\" placeholder=\"请输入文档名称\" />\n        </el-form-item>\n        <el-form-item label=\"描述\" prop=\"desc\" required>\n          <el-input v-model=\"editForm.desc\" placeholder=\"请输入文档描述\" />\n        </el-form-item>\n        <el-form-item label=\"标签\" prop=\"tags\" required>\n          <el-input v-model=\"editForm.tags\" placeholder=\"多个标签用逗号分隔\" />\n        </el-form-item>\n      </el-form>\n      <template #footer>\n        <el-button @click=\"editDialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"submitEdit\" :loading=\"editLoading\">保存</el-button>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n<script setup>\nimport { ref, onMounted, watch, computed } from 'vue'\nimport { Link, CircleCloseFilled, Refresh } from '@element-plus/icons-vue'\nimport { ElMessage, ElMessageBox } from 'element-plus'\nimport { fetchProjectDocuments, uploadProjectDocument, updateProjectDocument, deleteProjectDocument, getDocumentAiDashboard } from '@/api/project'\nimport axios from 'axios'\nimport request from '@/utils/request'\nimport { marked } from 'marked'\n\nconst props = defineProps({\n  project: { type: Object, required: true }\n})\n\nconst docs = ref([])\nconst loading = ref(false)\nconst uploadDialogVisible = ref(false)\nconst uploadForm = ref({\n  name: '',\n  desc: '',\n  tags: '',\n  file: null\n})\nconst fileList = ref([])\nconst uploading = ref(false)\nconst editDialogVisible = ref(false)\nconst editForm = ref({ id: '', name: '', desc: '', tags: '' })\nconst editLoading = ref(false)\nconst aiDocDashboard = ref({\n  health_score: 0,\n  health_desc: '',\n  related_count: 0,\n  conflict_count: 0,\n  suggestions: []\n})\nconst aiDocLoading = ref(false)\nconst filterKeyword = ref('')\nconst filterTag = ref('')\nconst allTags = computed(() => {\n  // 汇总所有文档的标签\n  const tagsSet = new Set()\n  docs.value.forEach(doc => {\n    (doc.tags || []).forEach(t => tagsSet.add(t.text))\n  })\n  return Array.from(tagsSet)\n})\nconst filteredDocs = computed(() => {\n  return docs.value.filter(doc => {\n    const matchKeyword = !filterKeyword.value || doc.name.includes(filterKeyword.value) || (doc.desc && doc.desc.includes(filterKeyword.value))\n    const matchTag = !filterTag.value || (doc.tags && doc.tags.some(t => t.text === filterTag.value))\n    return matchKeyword && matchTag\n  })\n})\n\nconst formatMarkdown = (text) => {\n  if (!text) return '';\n  return marked(text);\n}\n\n// 获取后端baseURL\nconst BASE_URL = 'http://localhost:8000'\n\nfunction loadDocuments() {\n  if (!props.project?.id) return\n  loading.value = true\n  fetchProjectDocuments(props.project.id).then(res => {\n    docs.value = (res.data || []).map(doc => ({\n      id: doc.id,\n      name: doc.name,\n      tags: (doc.tags || '').split(',').filter(Boolean).map(t => ({ text: t, type: 'info' })),\n      time: doc.uploaded_at ? doc.uploaded_at.slice(0, 10) : '',\n      desc: doc.desc,\n      analysis: doc.analysis,\n      file: doc.file,\n      analyzing: false,\n      showFullAnalysis: false\n    }))\n    // 自动AI分析\n    docs.value.forEach(doc => {\n      if (!doc.analysis) {\n        analyzeDocument(doc)\n      }\n    })\n  }).finally(() => loading.value = false)\n}\n\nfunction fetchAiDocDashboard() {\n  if (!props.project?.id) return\n  aiDocLoading.value = true\n  getDocumentAiDashboard(props.project.id).then(res => {\n    aiDocDashboard.value = res.data || {\n      health_score: 0,\n      health_desc: '',\n      related_count: 0,\n      conflict_count: 0,\n      suggestions: []\n    }\n  }).finally(() => aiDocLoading.value = false)\n}\n\nonMounted(() => {\n  loadDocuments()\n  fetchAiDocDashboard()\n})\n\nwatch(() => props.project?.id, (val) => {\n  if (val) {\n    loadDocuments()\n    fetchAiDocDashboard()\n  }\n})\n\n// 监听文档列表变化，重新获取AI分析\nwatch(docs, () => {\n  fetchAiDocDashboard()\n}, { deep: true })\n\n// 上传成功回调\nfunction handleUploadSuccess() {\n  ElMessage.success('文档上传成功！')\n  loadDocuments()\n}\n\n// 上传失败回调\nfunction handleUploadError() {\n  ElMessage.error('文档上传失败，请重试')\n}\n\nfunction handleFileChange(file) {\n  uploadForm.value.file = file.raw\n  fileList.value = [file]\n}\n\nfunction submitUpload() {\n  if (!uploadFormRef.value) {\n    console.error('表单引用不存在')\n    return\n  }\n  \n  uploadFormRef.value.validate(valid => {\n    if (!valid) {\n      ElMessage.error('请填写所有必填项')\n      return\n    }\n    \n    if (!uploadForm.value.file) {\n      ElMessage.warning('请先选择文件')\n      return\n    }\n    \n    uploading.value = true\n    const formData = new FormData()\n    formData.append('file', uploadForm.value.file)\n    formData.append('project', props.project.id)\n    formData.append('name', uploadForm.value.name || uploadForm.value.file.name)\n    formData.append('desc', uploadForm.value.desc)\n    formData.append('tags', uploadForm.value.tags)\n    \n    uploadProjectDocument(formData).then(() => {\n      handleUploadSuccess()\n      uploadDialogVisible.value = false\n      uploadForm.value = { name: '', desc: '', tags: '', file: null }\n      fileList.value = []\n    }).catch(() => {\n      handleUploadError()\n    }).finally(() => {\n      uploading.value = false\n    })\n  })\n}\n\nfunction downloadFile(url, name) {\n  let downloadUrl = url\n  if (!/^https?:\\/\\//.test(url)) {\n    downloadUrl = BASE_URL + url\n  }\n  axios({\n    url: downloadUrl,\n    method: 'get',\n    responseType: 'blob',\n    headers: {\n      Authorization: `Bearer ${localStorage.getItem('token') || ''}`\n    }\n  }).then(res => {\n    const blob = new Blob([res.data])\n    // 优先用文档名称+原文件后缀\n    let ext = ''\n    const urlFilename = url.split('/').pop() || ''\n    const idx = urlFilename.lastIndexOf('.')\n    if (idx !== -1) ext = urlFilename.slice(idx)\n    let filename = (name || 'download') + ext\n    // 兼容Content-Disposition\n    const disposition = res.headers['content-disposition']\n    if (disposition) {\n      const match = disposition.match(/filename=\"?([^\"]+)\"?/)\n      if (match) filename = decodeURIComponent(match[1])\n    }\n    const link = document.createElement('a')\n    link.href = window.URL.createObjectURL(blob)\n    link.download = filename\n    document.body.appendChild(link)\n    link.click()\n    document.body.removeChild(link)\n    window.URL.revokeObjectURL(link.href)\n  }).catch(() => {\n    ElMessage.error('下载失败，请检查网络或权限')\n  })\n}\n\nfunction openEditDialog(doc) {\n  editForm.value = {\n    id: doc.id,\n    name: doc.name,\n    desc: doc.desc,\n    tags: (doc.tags || []).map(t => t.text).join(',')\n  }\n  editDialogVisible.value = true\n}\n\nfunction submitEdit() {\n  if (!editFormRef.value) {\n    console.error('表单引用不存在')\n    return\n  }\n  \n  editFormRef.value.validate(valid => {\n    if (!valid) {\n      ElMessage.error('请填写所有必填项')\n      return\n    }\n    \n    editLoading.value = true\n    updateProjectDocument(editForm.value.id, {\n      name: editForm.value.name,\n      desc: editForm.value.desc,\n      tags: editForm.value.tags\n    }).then(() => {\n      ElMessage.success('文档信息已更新')\n      editDialogVisible.value = false\n      loadDocuments()\n    }).catch(() => {\n      ElMessage.error('更新失败')\n    }).finally(() => {\n      editLoading.value = false\n    })\n  })\n}\n\nfunction confirmDelete(doc) {\n  ElMessageBox.confirm('确定要删除该文档吗？', '提示', {\n    confirmButtonText: '删除',\n    cancelButtonText: '取消',\n    type: 'warning',\n  }).then(() => {\n    deleteProjectDocument(doc.id).then(() => {\n      ElMessage.success('文档已删除')\n      loadDocuments()\n    }).catch(() => {\n      ElMessage.error('删除失败')\n    })\n  }).catch(() => {})\n}\n\n// 添加分析文档的功能\nfunction analyzeDocument(doc) {\n  // 检查文档ID\n  const idNum = Number(doc.id)\n  if (!idNum || isNaN(idNum) || idNum <= 0 || !Number.isInteger(idNum)) {\n    ElMessage.warning('无效的文档ID')\n    return\n  }\n  \n  // 设置分析状态\n  doc.analyzing = true\n  \n  // 调用AI分析接口\n  request\n    .post(`/api/project-documents/${doc.id}/ai_analyze/`)\n    .then(response => {\n      const analysis = response.data.analysis\n      // 更新文档分析结果\n      doc.analysis = analysis\n      doc.showFullAnalysis = false\n      ElMessage.success('AI分析完成')\n    })\n    .catch(error => {\n      console.error('文档AI分析失败:', error)\n      ElMessage.error('文档AI分析失败')\n    })\n    .finally(() => {\n      doc.analyzing = false\n    })\n}\n\n// 表单引用\nconst uploadFormRef = ref(null)\nconst editFormRef = ref(null)\n\n// 表单验证规则\nconst formRules = {\n  name: [{ required: true, message: '请输入文档名称', trigger: 'blur' }],\n  desc: [{ required: true, message: '请输入文档描述', trigger: 'blur' }],\n  tags: [{ required: true, message: '请输入标签', trigger: 'blur' }],\n  file: [{ required: true, message: '请选择文件', trigger: 'change' }]\n}\n</script>\n<style scoped>\n.module-card { background: var(--bg-color-secondary); border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); margin-bottom: 20px; padding: 20px; }\n.module-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }\n.module-title { font-size: 1.1rem; font-weight: 600; color: var(--text-color) !important; margin: 0; }\n.btn-group { display: flex; gap: 10px; }\n.row { display: flex; flex-wrap: wrap; margin: 0 -10px; }\n.col-md-4 { padding: 0 10px; width: 33.3333%; }\n.mb-4 { margin-bottom: 24px; }\n.list-group { margin: 0; }\n.list-group-item { background: var(--bg-color-tertiary); border: none; border-radius: 5px; margin-bottom: 10px; padding: 16px; }\n.ai-analysis-card { background: var(--bg-color-secondary); border: 1px solid var(--border-color); border-radius: 8px; padding: 15px; margin-bottom: 15px; }\n.relation-item, .suggestion-item { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; }\n.text-primary { color: var(--primary-color)!important; }\n.ai-document-analysis {\n  background: var(--bg-color-tertiary);\n  border-radius: 8px;\n  padding: 16px;\n  margin-bottom: 16px;\n  color: var(--text-color);\n}\n.ai-document-analysis .text-muted,\n.ai-document-analysis small {\n  color: var(--text-color-tertiary) !important;\n}\n\n/* 深色模式下 Element Plus 组件适配 */\n:deep(.el-tag) {\n  background: var(--bg-color-tertiary) !important;\n  color: var(--text-color) !important;\n  border-color: var(--border-color) !important;\n}\n:deep(.el-badge__content) {\n  background: var(--primary-color) !important;\n  color: #fff !important;\n}\n:deep(.el-empty) {\n  background: transparent !important;\n  color: var(--text-color-tertiary) !important;\n}\n:deep(.el-progress-bar__outer) {\n  background: var(--bg-color-tertiary) !important;\n}\n:deep(.el-progress-bar__inner) {\n  background: var(--primary-color) !important;\n}\n.el-dialog,\n.el-dialog .el-dialog__body,\n.el-dialog .el-dialog__footer {\n  background: var(--bg-color-secondary);\n  color: var(--text-color);\n}\n.list-group-item:hover {\n  background: var(--hover-color);\n  color: var(--primary-color);\n}\n</style>\n\n<style lang=\"scss\">\n[data-theme=\"dark\"] {\n  .module-card, .ai-analysis-card, .list-group-item, .el-dialog {\n    background-color: var(--el-bg-color-page) !important;\n    color: var(--el-text-color-primary) !important;\n    border: 1px solid var(--el-border-color-light) !important;\n  }\n\n  .module-title, h6, .el-dialog__title {\n    color: var(--el-text-color-primary) !important;\n  }\n\n  .text-muted, .small, .ai-document-analysis small.text-muted {\n    color: var(--el-text-color-secondary) !important;\n  }\n  \n  .el-form-item__label {\n    color: var(--el-text-color-secondary) !important;\n  }\n\n  .el-input__wrapper {\n    background-color: var(--el-fill-color-light) !important;\n    border-color: var(--el-border-color) !important;\n  }\n\n  .list-group-item-action:hover {\n    background-color: var(--el-fill-color-light) !important;\n  }\n}\n</style> ","import script from \"./DocumentsView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DocumentsView.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./DocumentsView.vue?vue&type=style&index=0&id=d3b1aee0&scoped=true&lang=css\"\nimport \"./DocumentsView.vue?vue&type=style&index=1&id=d3b1aee0&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\18083\\\\Desktop\\\\CCIT\\\\office\\\\smart-office\\\\frontend\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-d3b1aee0\"]])\n\nexport default __exports__","'use strict';\nvar $TypeError = TypeError;\n\nmodule.exports = function (passed, required) {\n  if (passed < required) throw new $TypeError('Not enough arguments');\n  return passed;\n};\n","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\n\nvar createSetLike = function (size) {\n  return {\n    size: size,\n    has: function () {\n      return false;\n    },\n    keys: function () {\n      return {\n        next: function () {\n          return { done: true };\n        }\n      };\n    }\n  };\n};\n\nvar createSetLikeWithInfinitySize = function (size) {\n  return {\n    size: size,\n    has: function () {\n      return true;\n    },\n    keys: function () {\n      throw new Error('e');\n    }\n  };\n};\n\nmodule.exports = function (name, callback) {\n  var Set = getBuiltIn('Set');\n  try {\n    new Set()[name](createSetLike(0));\n    try {\n      // late spec change, early WebKit ~ Safari 17 implementation does not pass it\n      // https://github.com/tc39/proposal-set-methods/pull/88\n      // also covered engines with\n      // https://bugs.webkit.org/show_bug.cgi?id=272679\n      new Set()[name](createSetLike(-1));\n      return false;\n    } catch (error2) {\n      if (!callback) return true;\n      // early V8 implementation bug\n      // https://issues.chromium.org/issues/351332634\n      try {\n        new Set()[name](createSetLikeWithInfinitySize(-Infinity));\n        return false;\n      } catch (error) {\n        var set = new Set();\n        set.add(1);\n        set.add(2);\n        return callback(set[name](createSetLikeWithInfinitySize(Infinity)));\n      }\n    }\n  } catch (error) {\n    return false;\n  }\n};\n","'use strict';\nvar has = require('../internals/set-helpers').has;\n\n// Perform ? RequireInternalSlot(M, [[SetData]])\nmodule.exports = function (it) {\n  has(it);\n  return it;\n};\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./DocumentsView.vue?vue&type=style&index=1&id=d3b1aee0&lang=scss\"","'use strict';\nvar aSet = require('../internals/a-set');\nvar add = require('../internals/set-helpers').add;\nvar clone = require('../internals/set-clone');\nvar getSetRecord = require('../internals/get-set-record');\nvar iterateSimple = require('../internals/iterate-simple');\n\n// `Set.prototype.union` method\n// https://github.com/tc39/proposal-set-methods\nmodule.exports = function union(other) {\n  var O = aSet(this);\n  var keysIter = getSetRecord(other).getIterator();\n  var result = clone(O);\n  iterateSimple(keysIter, function (it) {\n    add(result, it);\n  });\n  return result;\n};\n"],"sourceRoot":""}