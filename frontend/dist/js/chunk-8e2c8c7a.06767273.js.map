{"version":3,"sources":["webpack:///./src/views/project/components/DashboardView.vue?c320","webpack:///./node_modules/core-js/modules/es.iterator.filter.js","webpack:///./src/views/project/components/DashboardView.vue","webpack:///./src/views/project/components/DashboardView.vue?5c52","webpack:///./src/views/project/components/DashboardView.vue?16ad","webpack:///./src/utils/date.js"],"names":["$","call","aCallable","anObject","getIteratorDirect","createIteratorProxy","callWithSafeIterationClosing","IS_PURE","iteratorClose","iteratorHelperWithoutClosingOnEarlyError","filterWithoutClosingOnEarlyError","TypeError","IteratorProxy","result","done","value","iterator","this","predicate","next","counter","target","proto","real","forced","filter","error","props","__props","isLoading","ref","projectHealth","projectHealthDesc","projectRisks","completedTaskCount","computed","_props$tasks","tasks","task","status","length","pendingTaskCount","_props$tasks2","documentCount","_props$documents","documents","requirementCount","_props$requirements","requirements","healthBarClass","getRiskIconClass","index","getRiskIconName","async","loadProjectAnalysis","_props$project","project","id","res","request","get","console","log","data","health","health_desc","Array","isArray","risks","err","recentActivities","_props$tasks3","_props$documents2","_props$requirements2","activities","forEach","push","text","creator_name","title","time","created_at","ai_analysis","priority","updated_at","assignee_name","doc","uploader_name","name","uploaded_at","analysis","req","sort","a","b","Date","slice","onMounted","watch","_props$project2","newId","deep","__exports__","formatRelativeTime","date","isNaN","getTime","now","diff","seconds","Math","floor","minutes","hours","days","months","years"],"mappings":"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","file":"js/chunk-8e2c8c7a.06767273.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./DashboardView.vue?vue&type=style&index=0&id=2e0dd7ae&lang=scss&scoped=true\"","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar createIteratorProxy = require('../internals/iterator-create-proxy');\nvar callWithSafeIterationClosing = require('../internals/call-with-safe-iteration-closing');\nvar IS_PURE = require('../internals/is-pure');\nvar iteratorClose = require('../internals/iterator-close');\nvar iteratorHelperWithoutClosingOnEarlyError = require('../internals/iterator-helper-without-closing-on-early-error');\n\nvar filterWithoutClosingOnEarlyError = !IS_PURE && iteratorHelperWithoutClosingOnEarlyError('filter', TypeError);\n\nvar IteratorProxy = createIteratorProxy(function () {\n  var iterator = this.iterator;\n  var predicate = this.predicate;\n  var next = this.next;\n  var result, done, value;\n  while (true) {\n    result = anObject(call(next, iterator));\n    done = this.done = !!result.done;\n    if (done) return;\n    value = result.value;\n    if (callWithSafeIterationClosing(iterator, predicate, [value, this.counter++], true)) return value;\n  }\n});\n\n// `Iterator.prototype.filter` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.filter\n$({ target: 'Iterator', proto: true, real: true, forced: IS_PURE || filterWithoutClosingOnEarlyError }, {\n  filter: function filter(predicate) {\n    anObject(this);\n    try {\n      aCallable(predicate);\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    if (filterWithoutClosingOnEarlyError) return call(filterWithoutClosingOnEarlyError, this, predicate);\n\n    return new IteratorProxy(getIteratorDirect(this), {\n      predicate: predicate\n    });\n  }\n});\n","<template>\n  <div class=\"dashboard-view\">\n    <!-- 项目健康度和风险预警 -->\n    <div class=\"row mb-4\">\n      <div class=\"col-md-6\">\n        <div class=\"module-card\">\n          <div class=\"module-header\">\n            <h5 class=\"module-title\">项目健康度</h5>\n          </div>\n          <div class=\"health-content\">\n            <div v-if=\"isLoading\" class=\"d-flex justify-content-center py-3\">\n              <div class=\"spinner-border text-primary\" role=\"status\">\n                <span class=\"visually-hidden\">加载中...</span>\n              </div>\n            </div>\n            <template v-else>\n              <div class=\"progress mb-2\">\n                <div class=\"progress-bar\" :class=\"healthBarClass\" role=\"progressbar\" :style=\"{ width: `${projectHealth}%` }\"></div>\n              </div>\n              <div class=\"health-desc\">\n                <p>{{ projectHealthDesc }}</p>\n              </div>\n            </template>\n          </div>\n        </div>\n      </div>\n      <div class=\"col-md-6\">\n        <div class=\"module-card\">\n          <div class=\"module-header\">\n            <h5 class=\"module-title\">风险预警</h5>\n          </div>\n          <div class=\"risk-content\">\n            <div v-if=\"isLoading\" class=\"d-flex justify-content-center py-3\">\n              <div class=\"spinner-border text-primary\" role=\"status\">\n                <span class=\"visually-hidden\">加载中...</span>\n              </div>\n            </div>\n            <template v-else>\n              <div v-for=\"(risk, index) in projectRisks\" :key=\"index\" class=\"risk-item\">\n                <div class=\"risk-icon\" :class=\"getRiskIconClass(index)\">\n                  <i class=\"bi\" :class=\"getRiskIconName(index)\"></i>\n                </div>\n                <div class=\"risk-text\">{{ risk }}</div>\n              </div>\n              <div v-if=\"projectRisks.length === 0\" class=\"text-center text-muted py-3\">\n                暂无风险预警\n              </div>\n            </template>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 统计卡片 -->\n    <div class=\"row mb-4\">\n      <div class=\"col-md-3\">\n        <div class=\"stats-card bg-success\">\n          <div class=\"stats-content\">\n            <div class=\"stats-title\">已完成任务</div>\n            <div class=\"stats-number\">{{ completedTaskCount }}</div>\n          </div>\n        </div>\n      </div>\n      <div class=\"col-md-3\">\n        <div class=\"stats-card bg-warning\">\n          <div class=\"stats-content\">\n            <div class=\"stats-title\">待处理任务</div>\n            <div class=\"stats-number\">{{ pendingTaskCount }}</div>\n          </div>\n        </div>\n      </div>\n      <div class=\"col-md-3\">\n        <div class=\"stats-card bg-primary\">\n          <div class=\"stats-content\">\n            <div class=\"stats-title\">文档数量</div>\n            <div class=\"stats-number\">{{ documentCount }}</div>\n          </div>\n        </div>\n      </div>\n      <div class=\"col-md-3\">\n        <div class=\"stats-card bg-info\">\n          <div class=\"stats-content\">\n            <div class=\"stats-title\">需求数量</div>\n            <div class=\"stats-number\">{{ requirementCount }}</div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 最近活动 -->\n    <div class=\"module-card\">\n      <div class=\"module-header\">\n        <h5 class=\"module-title\">最近活动</h5>\n      </div>\n      <div class=\"activity-list\">\n        <div v-if=\"isLoading\" class=\"d-flex justify-content-center py-3\">\n          <div class=\"spinner-border text-primary\" role=\"status\">\n            <span class=\"visually-hidden\">加载中...</span>\n          </div>\n        </div>\n        <template v-else>\n          <div v-for=\"item in recentActivities\" :key=\"item.id\" class=\"activity-item\">\n            <div class=\"activity-main\">\n              <p class=\"activity-title\">{{ item.text }}</p>\n              <div v-if=\"item.ai_analysis\" class=\"activity-desc\" v-html=\"marked(item.ai_analysis)\"></div>\n            </div>\n            <div class=\"activity-time\">\n              {{ formatTime(item.time) }}\n            </div>\n          </div>\n          <div v-if=\"recentActivities.length === 0\" class=\"no-activity\">\n            暂无最近活动\n          </div>\n        </template>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { formatRelativeTime as formatTime } from '@/utils/date'\nimport { marked } from 'marked'\nimport request from '@/utils/request'\n\nconst props = defineProps({\n  project: Object,\n  tasks: Array,\n  documents: Array,\n  requirements: Array\n})\n\n// 加载状态\nconst isLoading = ref(false)\n\n// 项目健康度数据\nconst projectHealth = ref(65)\nconst projectHealthDesc = ref('项目处于功能阶段，各项工作有序开展，存在一定不确定性。')\nconst projectRisks = ref([])\n\n// 计算统计数据\nconst completedTaskCount = computed(() => {\n  return props.tasks?.filter(task => task.status === 'done').length || 0\n})\n\nconst pendingTaskCount = computed(() => {\n  return props.tasks?.filter(task => task.status !== 'done').length || 0\n})\n\nconst documentCount = computed(() => {\n  return props.documents?.length || 0\n})\n\nconst requirementCount = computed(() => {\n  return props.requirements?.length || 0\n})\n\n// 健康度进度条颜色\nconst healthBarClass = computed(() => {\n  if (projectHealth.value >= 80) return 'bg-success'\n  if (projectHealth.value >= 60) return 'bg-warning'\n  return 'bg-danger'\n})\n\n// 获取风险图标样式\nfunction getRiskIconClass(index) {\n  // 第一个风险使用成功样式（绿色），其他使用警告样式（黄色）\n  return index === 0 ? 'success' : 'warning'\n}\n\n// 获取风险图标名称\nfunction getRiskIconName(index) {\n  // 第一个风险使用成功图标，其他使用警告图标\n  return index === 0 ? 'bi-check-circle-fill' : 'bi-exclamation-triangle-fill'\n}\n\n// 加载项目分析数据\nasync function loadProjectAnalysis() {\n  if (!props.project?.id) return\n  \n  isLoading.value = true\n  \n  try {\n    const res = await request.get(`/api/projects/${props.project.id}/ai_dashboard/`)\n    console.log('项目分析数据:', res.data)\n    \n    // 更新健康度数据\n    projectHealth.value = res.data.health || 0\n    projectHealthDesc.value = res.data.health_desc || '无法获取项目健康度数据'\n    \n    // 更新风险数据\n    if (Array.isArray(res.data.risks)) {\n      projectRisks.value = res.data.risks\n    } else {\n      projectRisks.value = []\n    }\n    \n  } catch (err) {\n    console.error('加载项目分析数据失败:', err)\n    // 设置默认值，但不使用硬编码的数据\n    projectHealth.value = 0\n    projectHealthDesc.value = '无法获取项目健康度数据'\n    projectRisks.value = []\n  } finally {\n    isLoading.value = false\n  }\n}\n\n// 生成最近活动列表，基于任务、文档和需求数据\nconst recentActivities = computed(() => {\n  const activities = []\n\n  // 任务活动\n  props.tasks?.forEach(task => {\n    activities.push({\n      id: `task-create-${task.id}`,\n      text: `${task.creator_name || '未知用户'} 创建了任务 \"${task.title}\"`,\n      time: task.created_at,\n      ai_analysis: `任务已创建，优先级${task.priority || '未定'}`\n    })\n    if (task.status === 'in-progress' && task.updated_at) {\n      activities.push({\n        id: `task-update-${task.id}`,\n        text: `${task.assignee_name || '负责人'} 正在处理任务 \"${task.title}\"`,\n        time: task.updated_at,\n        ai_analysis: '任务正在进行中，请关注进度'\n      })\n    }\n  })\n\n  // 文档活动\n  props.documents?.forEach(doc => {\n    activities.push({\n      id: `doc-${doc.id}`,\n      text: `${doc.uploader_name || '未知用户'} 上传了文档 \"${doc.name}\"`,\n      time: doc.uploaded_at,\n      ai_analysis: doc.analysis\n    })\n  })\n\n  // 需求活动\n  props.requirements?.forEach(req => {\n    activities.push({\n      id: `req-${req.id}`,\n      text: `${req.creator_name || '未知用户'} 创建了需求 \"${req.name}\"`,\n      time: req.created_at,\n      ai_analysis: `需求优先级为${req.priority || '未定'}`\n    })\n  })\n  \n  // 按时间倒序排序\n  return activities.sort((a, b) => new Date(b.time) - new Date(a.time)).slice(0, 10) // 只显示最近10条\n})\n\n// 在组件挂载时加载项目分析数据\nonMounted(() => {\n  loadProjectAnalysis()\n})\n\n// 当项目ID变化时重新加载数据\nwatch(() => props.project?.id, (newId) => {\n  if (newId) {\n    loadProjectAnalysis()\n  }\n})\n\n// 当任务、文档或需求数据变化时，重新加载项目分析\nwatch([\n  () => props.tasks, \n  () => props.documents, \n  () => props.requirements\n], () => {\n  loadProjectAnalysis()\n}, { deep: true })\n\n</script>\n\n<style lang=\"scss\" scoped>\n.dashboard-view {\n  padding: 10px;\n}\n\n.module-card {\n  background: #fff;\n  border-radius: 8px;\n  padding: 20px;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.06);\n  height: 100%;\n}\n\n.module-header {\n  margin-bottom: 20px;\n}\n\n.module-title {\n  font-size: 18px;\n  font-weight: 600;\n  color: #303133;\n}\n\n.health-content {\n  .progress {\n    height: 10px;\n    background-color: #e9ecef;\n    border-radius: 5px;\n  }\n  .health-desc {\n    margin-top: 10px;\n    color: #606266;\n    font-size: 14px;\n  }\n}\n\n.risk-content {\n  .risk-item {\n    display: flex;\n    align-items: flex-start;\n    margin-bottom: 15px;\n    \n    &:last-child {\n      margin-bottom: 0;\n    }\n    \n    .risk-icon {\n      margin-right: 10px;\n      margin-top: 2px;\n      \n      &.success {\n        color: #67C23A;\n      }\n      \n      &.warning {\n        color: #E6A23C;\n      }\n    }\n    \n    .risk-text {\n      flex: 1;\n      font-size: 14px;\n      color: #606266;\n    }\n  }\n}\n\n.stats-card {\n  border-radius: 8px;\n  padding: 20px;\n  height: 100%;\n  color: white;\n  \n  .stats-content {\n    .stats-title {\n      font-size: 14px;\n      opacity: 0.9;\n      margin-bottom: 10px;\n    }\n    \n    .stats-number {\n      font-size: 32px;\n      font-weight: bold;\n    }\n  }\n}\n\n.activity-list {\n  .activity-item {\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    padding: 15px 0;\n    border-bottom: 1px solid #EBEEF5;\n\n    &:last-child {\n      border-bottom: none;\n    }\n  }\n\n  .activity-main {\n    flex: 1;\n    .activity-title {\n      font-size: 15px;\n      color: #303133;\n      margin: 0 0 5px 0;\n    }\n    .activity-desc {\n      font-size: 14px;\n      color: #888;\n      line-height: 1.6;\n\n      :deep(p) {\n        margin: 0 0 8px 0;\n      }\n      :deep(strong) {\n        font-weight: bold;\n        color: #555;\n      }\n      :deep(ul) {\n        padding-left: 20px;\n        margin: 0;\n      }\n      :deep(li) {\n        margin-bottom: 4px;\n      }\n    }\n  }\n\n  .activity-time {\n    font-size: 13px;\n    color: #909399;\n    width: 100px;\n    text-align: right;\n  }\n\n  .no-activity {\n    text-align: center;\n    color: #909399;\n    padding: 20px;\n  }\n}\n\n.row {\n  display: flex;\n  flex-wrap: wrap;\n  margin-right: -15px;\n  margin-left: -15px;\n}\n\n.col-md-3 {\n  flex: 0 0 25%;\n  max-width: 25%;\n  padding-right: 15px;\n  padding-left: 15px;\n}\n\n.col-md-6 {\n  flex: 0 0 50%;\n  max-width: 50%;\n  padding-right: 15px;\n  padding-left: 15px;\n}\n\n.mb-4 {\n  margin-bottom: 1.5rem;\n}\n\n.mb-2 {\n  margin-bottom: 0.5rem;\n}\n\n.spinner-border {\n  display: inline-block;\n  width: 2rem;\n  height: 2rem;\n  border: 0.25em solid currentColor;\n  border-right-color: transparent;\n  border-radius: 50%;\n  animation: spinner-border .75s linear infinite;\n}\n\n.visually-hidden {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border: 0;\n}\n\n@keyframes spinner-border {\n  to { transform: rotate(360deg); }\n}\n\n/* 响应式调整 */\n@media (max-width: 768px) {\n  .col-md-3, .col-md-6 {\n    flex: 0 0 100%;\n    max-width: 100%;\n    margin-bottom: 15px;\n  }\n}\n</style>\n\n<style lang=\"scss\" scoped>\n[data-theme=\"dark\"] {\n  .dashboard-view, .module-card {\n    background-color: var(--el-bg-color-page) !important;\n    color: var(--el-text-color-primary) !important;\n    border: 1px solid var(--el-border-color-light);\n  }\n\n  .module-title, .health-desc p {\n    color: var(--el-text-color-primary) !important;\n  }\n\n  .risk-item, .activity-item {\n    border-bottom-color: var(--el-border-color-light) !important;\n  }\n  \n  .risk-text, .activity-main .activity-title, .activity-time {\n    color: var(--el-text-color-secondary) !important;\n  }\n  \n  .no-activity {\n    color: var(--el-text-color-secondary);\n  }\n\n  /* 覆盖统计卡片的背景色 */\n  .stats-card {\n    &.bg-success { background-color: #28a745 !important; }\n    &.bg-warning { background-color: #ffc107 !important; }\n    &.bg-primary { background-color: #007bff !important; }\n    &.bg-info { background-color: #17a2b8 !important; }\n    \n    .stats-title, .stats-number {\n      color: #fff !important;\n    }\n  }\n\n  .progress {\n    background-color: var(--el-fill-color-light);\n  }\n}\n</style>","import script from \"./DashboardView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DashboardView.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./DashboardView.vue?vue&type=style&index=0&id=2e0dd7ae&lang=scss&scoped=true\"\nimport \"./DashboardView.vue?vue&type=style&index=1&id=2e0dd7ae&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\18083\\\\Desktop\\\\CCIT\\\\office\\\\smart-office\\\\frontend\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2e0dd7ae\"]])\n\nexport default __exports__","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./DashboardView.vue?vue&type=style&index=1&id=2e0dd7ae&lang=scss&scoped=true\"","/**\r\n * 日期格式化工具函数\r\n */\r\n\r\n/**\r\n * 格式化日期\r\n * @param {Date|String|Number} date - 日期对象或可转为日期的字符串/时间戳\r\n * @param {String} format - 格式化模板，如 'YYYY-MM-DD HH:mm:ss'\r\n * @returns {String} 格式化后的日期字符串\r\n */\r\nexport function formatDate(date, format = 'YYYY-MM-DD') {\r\n  if (!date) return '';\r\n  \r\n  // 确保date是Date对象\r\n  if (!(date instanceof Date)) {\r\n    date = new Date(date);\r\n    if (isNaN(date.getTime())) return '无效日期';\r\n  }\r\n  \r\n  const year = date.getFullYear();\r\n  const month = date.getMonth() + 1;\r\n  const day = date.getDate();\r\n  const hour = date.getHours();\r\n  const minute = date.getMinutes();\r\n  const second = date.getSeconds();\r\n  \r\n  // 填充函数，确保数字为两位\r\n  const pad = num => (num < 10 ? '0' + num : num);\r\n  \r\n  return format\r\n    .replace(/YYYY/g, year)\r\n    .replace(/YY/g, String(year).slice(2))\r\n    .replace(/MM/g, pad(month))\r\n    .replace(/M/g, month)\r\n    .replace(/DD/g, pad(day))\r\n    .replace(/D/g, day)\r\n    .replace(/HH/g, pad(hour))\r\n    .replace(/H/g, hour)\r\n    .replace(/hh/g, pad(hour % 12 || 12))\r\n    .replace(/h/g, hour % 12 || 12)\r\n    .replace(/mm/g, pad(minute))\r\n    .replace(/m/g, minute)\r\n    .replace(/ss/g, pad(second))\r\n    .replace(/s/g, second);\r\n}\r\n\r\n/**\r\n * 格式化相对时间，如\"几分钟前\"、\"几小时前\"等\r\n * @param {Date|String|Number} date - 日期对象或可转为日期的字符串/时间戳\r\n * @returns {String} 相对时间字符串\r\n */\r\nexport function formatRelativeTime(date) {\r\n  if (!date) return '';\r\n  \r\n  // 确保date是Date对象\r\n  if (!(date instanceof Date)) {\r\n    date = new Date(date);\r\n    if (isNaN(date.getTime())) return '无效日期';\r\n  }\r\n  \r\n  const now = new Date();\r\n  const diff = now.getTime() - date.getTime();\r\n  const seconds = Math.floor(diff / 1000);\r\n  const minutes = Math.floor(seconds / 60);\r\n  const hours = Math.floor(minutes / 60);\r\n  const days = Math.floor(hours / 24);\r\n  const months = Math.floor(days / 30);\r\n  const years = Math.floor(months / 12);\r\n  \r\n  if (seconds < 60) {\r\n    return '刚刚';\r\n  } else if (minutes < 60) {\r\n    return `${minutes}分钟前`;\r\n  } else if (hours < 24) {\r\n    return `${hours}小时前`;\r\n  } else if (days < 30) {\r\n    return `${days}天前`;\r\n  } else if (months < 12) {\r\n    return `${months}个月前`;\r\n  } else {\r\n    return `${years}年前`;\r\n  }\r\n}\r\n\r\n/**\r\n * 格式化时间范围\r\n * @param {Date|String|Number} startDate - 开始日期\r\n * @param {Date|String|Number} endDate - 结束日期\r\n * @param {String} format - 日期格式\r\n * @returns {String} 格式化后的时间范围\r\n */\r\nexport function formatDateRange(startDate, endDate, format = 'YYYY-MM-DD') {\r\n  if (!startDate) return '';\r\n  \r\n  // 格式化开始日期\r\n  const start = formatDate(startDate, format);\r\n  \r\n  // 如果没有结束日期，只返回开始日期\r\n  if (!endDate) return start;\r\n  \r\n  // 格式化结束日期\r\n  const end = formatDate(endDate, format);\r\n  \r\n  // 返回日期范围\r\n  return `${start} 至 ${end}`;\r\n} "],"sourceRoot":""}