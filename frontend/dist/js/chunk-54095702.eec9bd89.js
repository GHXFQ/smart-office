(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54095702"],{"1edc":function(e,t,a){"use strict";a.r(t);var r=a("7a23"),c=a("50fc"),n=a("3ef4"),o=a("c9a1"),l=a("4c02"),s=a("54bb"),d=a("c349"),i=a("cf2e"),u=a("1e49"),p=a("7faf"),b=a("db9d"),g=a("f6f2");const m={class:"management-container"},j={class:"card-header"},O={class:"header-left"},f={class:"header-right"},w={class:"table-container"},h={class:"pagination-container"},C=["innerHTML"],v={class:"dialog-footer"};var V={__name:"SmartDocManagement",setup(e){const t=Object(r["ref"])([]),a=Object(r["ref"])(!0),V=Object(r["ref"])(""),y=Object(r["ref"])(0),N=Object(r["reactive"])({page:1,pageSize:10}),_=Object(r["ref"])(!1),D=Object(r["ref"])({});let k=null;const x=async()=>{a.value=!0;try{const e={search:V.value,page:N.page,page_size:N.pageSize},r=await c["a"].getSmartDocs(e);t.value=r.data.results,y.value=r.data.count}catch(e){console.error("获取文档列表失败:",e),n["a"].error("获取文档列表失败")}finally{a.value=!1}},S=()=>{clearTimeout(k),k=setTimeout(()=>{N.page=1,x()},300)},$=async e=>{try{const t=await c["a"].getSmartDocDetail(e.id);D.value=t.data,_.value=!0}catch(t){n["a"].error("获取文档详情失败"),console.error("获取文档详情失败:",t)}},T=()=>{_.value=!1,D.value={}},z=e=>{o["a"].confirm(`确定要删除文档【${e.title}】吗？此操作不可恢复。`,"警告",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{await c["a"].deleteSmartDoc(e.id),n["a"].success("文档删除成功"),x()}catch(t){n["a"].error("删除失败，请稍后重试"),console.error("删除文档失败:",t)}}).catch(()=>{n["a"].info("已取消删除")})},B=e=>{N.pageSize=e,x()},K=e=>{N.page=e,x()};return Object(r["onMounted"])(x),(e,c)=>{const n=Object(r["resolveDirective"])("loading");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",m,[Object(r["createVNode"])(Object(r["unref"])(l["a"]),{class:"box-card"},{header:Object(r["withCtx"])(()=>[Object(r["createElementVNode"])("div",j,[Object(r["createElementVNode"])("div",O,[Object(r["createVNode"])(Object(r["unref"])(s["a"]),{class:"header-icon"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(Object(r["unref"])(g["Document"]))]),_:1}),c[4]||(c[4]=Object(r["createElementVNode"])("span",null,"智能文档管理",-1))]),Object(r["createElementVNode"])("div",f,[Object(r["createVNode"])(Object(r["unref"])(d["a"]),{modelValue:V.value,"onUpdate:modelValue":c[0]||(c[0]=e=>V.value=e),placeholder:"搜索文档...",clearable:"",onClear:x,onInput:S,class:"search-input"},{append:Object(r["withCtx"])(()=>[Object(r["createVNode"])(Object(r["unref"])(i["a"]),{icon:Object(r["unref"])(g["Search"])},null,8,["icon"])]),_:1},8,["modelValue"])])])]),default:Object(r["withCtx"])(()=>[Object(r["createElementVNode"])("div",w,[Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createBlock"])(Object(r["unref"])(u["a"]),{data:t.value,style:{width:"100%"}},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(Object(r["unref"])(u["b"]),{type:"index",label:"序号",width:"60"}),Object(r["createVNode"])(Object(r["unref"])(u["b"]),{prop:"title",label:"文档标题",sortable:""}),Object(r["createVNode"])(Object(r["unref"])(u["b"]),{prop:"company_name",label:"所属公司",sortable:""}),Object(r["createVNode"])(Object(r["unref"])(u["b"]),{prop:"creator_name",label:"创建者",sortable:""}),Object(r["createVNode"])(Object(r["unref"])(u["b"]),{prop:"created_at",label:"创建时间",sortable:""},{default:Object(r["withCtx"])(e=>[Object(r["createTextVNode"])(Object(r["toDisplayString"])(new Date(e.row.created_at).toLocaleString()),1)]),_:1}),Object(r["createVNode"])(Object(r["unref"])(u["b"]),{label:"操作",width:"120"},{default:Object(r["withCtx"])(e=>[Object(r["createVNode"])(Object(r["unref"])(i["a"]),{text:"",type:"primary",size:"small",onClick:t=>$(e.row)},{default:Object(r["withCtx"])(()=>c[5]||(c[5]=[Object(r["createTextVNode"])("查看")])),_:2},1032,["onClick"]),Object(r["createVNode"])(Object(r["unref"])(i["a"]),{text:"",type:"danger",size:"small",onClick:t=>z(e.row)},{default:Object(r["withCtx"])(()=>c[6]||(c[6]=[Object(r["createTextVNode"])("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[n,a.value]])]),Object(r["createElementVNode"])("div",h,[Object(r["createVNode"])(Object(r["unref"])(p["a"]),{"current-page":N.page,"onUpdate:currentPage":c[1]||(c[1]=e=>N.page=e),"page-size":N.pageSize,"onUpdate:pageSize":c[2]||(c[2]=e=>N.pageSize=e),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:y.value,onSizeChange:B,onCurrentChange:K},null,8,["current-page","page-size","total"])]),Object(r["createVNode"])(Object(r["unref"])(b["a"]),{modelValue:_.value,"onUpdate:modelValue":c[3]||(c[3]=e=>_.value=e),title:D.value.title,width:"60%"},{footer:Object(r["withCtx"])(()=>[Object(r["createElementVNode"])("span",v,[Object(r["createVNode"])(Object(r["unref"])(i["a"]),{onClick:T},{default:Object(r["withCtx"])(()=>c[7]||(c[7]=[Object(r["createTextVNode"])("关闭")])),_:1})])]),default:Object(r["withCtx"])(()=>[Object(r["createElementVNode"])("div",{class:"preview-content",innerHTML:D.value.content},null,8,C)]),_:1},8,["modelValue","title"])]),_:1})])}}},y=(a("7c80"),a("6b0d")),N=a.n(y);const _=N()(V,[["__scopeId","data-v-6909139f"]]);t["default"]=_},"2b25":function(e,t,a){},"50fc":function(e,t,a){"use strict";var r=a("cee4");const c=r["a"].create({baseURL:"http://localhost:8000/api/admin",timeout:1e4,headers:{"Content-Type":"application/json"}});c.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer "+t),e},e=>Promise.reject(e)),t["a"]={getDashboardData(){return c.get("/dashboard/")},getDashboardAnalysis(e,t){return c.post("/dashboard/analysis/",{chart_title:e,chart_data:t})},getUsers(e){return c.get("/users/",{params:e})},createUser(e){return c.post("/users/",e)},updateUser(e,t){return c.patch(`/users/${e}/`,t)},deleteUser(e){return c.delete(`/users/${e}/`)},getCompanies(e){return c.get("/companies/",{params:e})},createCompany(e){return c.post("/companies/",e)},updateCompany(e,t){return c.patch(`/companies/${e}/`,t)},deleteCompany(e){return c.delete(`/companies/${e}/`)},getDepartments(e){return c.get("/departments/",{params:e})},createDepartment(e){return c.post("/departments/",e)},updateDepartment(e,t){return c.patch(`/departments/${e}/`,t)},deleteDepartment(e){return c.delete(`/departments/${e}/`)},getSmartDocs(e){return c.get("/smart-docs/",{params:e})},getSmartDocDetail(e){return c.get(`/smart-docs/${e}/`)},deleteSmartDoc(e){return c.delete(`/smart-docs/${e}/`)},getContracts(e){return c.get("/contracts/",{params:e})},getContractDetail(e){return c.get(`/contracts/${e}/`)},deleteContract(e){return c.delete(`/contracts/${e}/`)},getContractTemplates(){return c.get("/contract-templates/")},getContractTemplate(e){return c.get(`/contract-templates/${e}/`)},createContractTemplate(e){return c.post("/contract-templates/",e)},updateContractTemplate(e,t){return c.patch(`/contract-templates/${e}/`,t)},deleteContractTemplate(e){return c.delete(`/contract-templates/${e}/`)},getKnowledgeCategories(e){return c.get("/knowledge-categories/",{params:e})},createKnowledgeCategory(e){return c.post("/knowledge-categories/",e)},updateKnowledgeCategory(e,t){return c.patch(`/knowledge-categories/${e}/`,t)},deleteKnowledgeCategory(e){return c.delete(`/knowledge-categories/${e}/`)},getKnowledgeBases(e){return c.get("/knowledge-bases/",{params:e})},getKnowledgeBaseDetail(e){return c.get(`/knowledge-bases/${e}/`)},createKnowledgeBase(e){const t=new FormData;for(const a in e)null!==e[a]&&void 0!==e[a]&&t.append(a,e[a]);return c.post("/knowledge-bases/",t,{headers:{"Content-Type":"multipart/form-data"}})},updateKnowledgeBase(e,t){const a=new FormData;for(const r in t)"original_file"!==r&&null!==t[r]&&void 0!==t[r]&&a.append(r,t[r]);return t.original_file instanceof File&&a.append("original_file",t.original_file),c.patch(`/knowledge-bases/${e}/`,a,{headers:{"Content-Type":"multipart/form-data"}})},deleteKnowledgeBase(e){return c.delete(`/knowledge-bases/${e}/`)},getKnowledgeBuildStatus(){return c.get("/knowledge/build/")},buildKnowledgeForCompanies(e){return c.post("/knowledge/build/",{company_ids:e})}}},"7c80":function(e,t,a){"use strict";a("2b25")}}]);
//# sourceMappingURL=chunk-54095702.eec9bd89.js.map