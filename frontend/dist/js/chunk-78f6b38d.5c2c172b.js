(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78f6b38d"],{"24d2":function(e,t,c){"use strict";c.d(t,"e",(function(){return l})),c.d(t,"m",(function(){return n})),c.d(t,"b",(function(){return o})),c.d(t,"k",(function(){return r})),c.d(t,"f",(function(){return i})),c.d(t,"a",(function(){return s})),c.d(t,"l",(function(){return d})),c.d(t,"c",(function(){return u})),c.d(t,"i",(function(){return b})),c.d(t,"g",(function(){return j})),c.d(t,"j",(function(){return m})),c.d(t,"d",(function(){return O})),c.d(t,"h",(function(){return p}));var a=c("b775");function l(e){return Object(a["a"])({url:"/api/project-documents/",method:"get",params:{project:e}})}function n(e){return Object(a["a"])({url:"/api/project-documents/",method:"post",data:e,headers:{"Content-Type":"multipart/form-data"}})}function o(e){return Object(a["a"])({url:`/api/project-documents/${e}/`,method:"delete"})}function r(e,t){return Object(a["a"])({url:`/api/project-documents/${e}/`,method:"patch",data:t,headers:{"Content-Type":"application/json"}})}function i(e){return Object(a["a"])({url:"/api/requirements/",method:"get",params:{project:e}})}function s(e){return Object(a["a"])({url:"/api/requirements/",method:"post",data:e})}function d(e,t){return Object(a["a"])({url:`/api/requirements/${e}/`,method:"patch",data:t})}function u(e){return Object(a["a"])({url:`/api/requirements/${e}/`,method:"delete"})}function b(e){return Object(a["a"])({url:"/api/requirements/ai_analysis/",method:"get",params:{project:e}})}function j(e){return Object(a["a"])({url:"/api/project-documents/ai_dashboard/",method:"get",params:{project:e}})}function m(e){return Object(a["a"])({url:`/api/requirements/${e}/ai_analysis/`,method:"get"})}function O(e,t){return Object(a["a"])({url:`/api/projects/${e}/export_ai_report/`,method:"post",data:t,responseType:"blob",timeout:12e4,headers:{"Content-Type":"application/json",Accept:"application/pdf, application/json;q=0.9"},validateStatus:function(e){return e>=200&&e<500}})}function p(e){return Object(a["a"])({url:`/api/projects/${e}/chart_analysis/`,method:"get"})}},"271a":function(e,t,c){"use strict";var a=c("cb2d"),l=c("e330"),n=c("577e"),o=c("d6d6"),r=URLSearchParams,i=r.prototype,s=l(i.getAll),d=l(i.has),u=new r("a=1");!u.has("a",2)&&u.has("a",void 0)||a(i,"has",(function(e){var t=arguments.length,c=t<2?void 0:arguments[1];if(t&&void 0===c)return d(this,e);var a=s(this,e);o(t,1);var l=n(c),r=0;while(r<a.length)if(a[r++]===l)return!0;return!1}),{enumerable:!0,unsafe:!0})},5494:function(e,t,c){"use strict";var a=c("83ab"),l=c("e330"),n=c("edd0"),o=URLSearchParams.prototype,r=l(o.forEach);a&&!("size"in o)&&n(o,"size",{get:function(){var e=0;return r(this,(function(){e++})),e},configurable:!0,enumerable:!0})},6966:function(e,t,c){"use strict";c.r(t);c("d9e2"),c("e9f5"),c("910d"),c("7d54"),c("ab43"),c("a732"),c("88a7"),c("271a"),c("5494");var a=c("7a23"),l=c("a8a5"),n=c.n(l),o=c("313e"),r=c("24d2"),i=c("3ef4"),s=c("f6f2");const d={class:"module-card modern-report"},u={class:"module-header"},b={class:"btn-group"},j={class:"row mb-4"},m={class:"col-md-6"},O={class:"modern-card"},p={class:"chart-center-wrap"},v={key:0,class:"chart-empty"},f={key:0,class:"ai-analysis-section"},y={key:0,class:"ai-analysis-content"},h={key:0,class:"analysis-loading"},g={class:"analysis-section"},k={class:"finding-list"},V={class:"analysis-section"},N={class:"recommendation-list"},E={class:"analysis-section"},_={class:"insights-text"},w={key:2,class:"analysis-empty"},C={class:"col-md-6"},B={class:"modern-card"},x={class:"chart-center-wrap"},S={key:0,class:"chart-empty"},A={key:0,class:"modern-summary main-value"},L={key:1,class:"ai-analysis-section"},F={key:0,class:"ai-analysis-content"},q={key:0,class:"analysis-loading"},T={class:"analysis-section"},z={class:"finding-list"},D={class:"analysis-section"},I={class:"recommendation-list"},M={class:"analysis-section"},U={class:"insights-text"},$={key:2,class:"analysis-empty"},R={class:"row mb-4"},P={class:"col-md-6"},W={class:"modern-card"},J={class:"chart-center-wrap"},H={key:0,class:"chart-empty"},Y={key:0,class:"ai-analysis-section"},G={key:0,class:"ai-analysis-content"},X={key:0,class:"analysis-loading"},K={class:"analysis-section"},Q={class:"finding-list"},Z={class:"analysis-section"},ee={class:"recommendation-list"},te={class:"analysis-section"},ce={class:"insights-text"},ae={key:2,class:"analysis-empty"},le={class:"col-md-6"},ne={class:"modern-card"},oe={class:"chart-center-wrap"},re={key:0,class:"chart-empty"},ie={key:0,class:"modern-summary main-value"},se={key:1,class:"ai-analysis-section"},de={key:0,class:"ai-analysis-content"},ue={key:0,class:"analysis-loading"},be={class:"analysis-section"},je={class:"finding-list"},me={class:"analysis-section"},Oe={class:"recommendation-list"},pe={class:"analysis-section"},ve={class:"insights-text"},fe={key:2,class:"analysis-empty"},ye={class:"export-dialog-content"},he={class:"dialog-info-box"},ge={class:"export-options"},ke={class:"dialog-footer"};var Ve={__name:"ReportsView",props:{project:Object,tasks:Array,documents:Array,requirements:Array},setup(e){const t=e,c=Object(a["ref"])(document.documentElement.getAttribute("data-theme")||"light"),l=Object(a["computed"])(()=>"dark"===c.value),Ve=Object(a["computed"])(()=>l.value?"rgba(255, 255, 255, 0.9)":"#333"),Ne=Object(a["computed"])(()=>l.value?"rgba(255, 255, 255, 0.7)":"#666"),Ee=Object(a["computed"])(()=>l.value?"rgba(255, 255, 255, 0.5)":"#888"),_e=Object(a["computed"])(()=>l.value?"#2c2c2c":"#fff"),we=Object(a["computed"])(()=>l.value?"#555":"#ccc");Object(a["watch"])(l,()=>{Object(a["nextTick"])(()=>{tt()})});const Ce=Object(a["ref"])(null),Be=Object(a["ref"])(null),xe=Object(a["ref"])(null),Se=Object(a["ref"])(null);let Ae=null,Le=null,Fe=null,qe=null;const Te=Object(a["computed"])(()=>Array.isArray(t.tasks)?t.tasks.map(e=>{let t=e.status;return"已完成"===t&&(t="done"),{...e,status:t,due_date:e.due_date||e.updated_at||e.update_time||e.end_time||(new Date).toISOString()}}):[]),ze=Object(a["computed"])(()=>{var e;return(null===(e=t.requirements)||void 0===e?void 0:e.length)||0}),De=Object(a["computed"])(()=>Te.value.length||0),Ie=Object(a["computed"])(()=>!(!Array.isArray(t.documents)||!t.documents.length)&&t.documents.some(e=>e.uploaded_at||e.created_at)),Me=Object(a["computed"])(()=>!(!Array.isArray(Te.value)||!Te.value.length)&&Te.value.some(e=>e.completed_at||e.finish_time||"done"===e.status)),Ue=Object(a["ref"])({}),$e=Object(a["ref"])(!1),Re=Object(a["ref"])(!0),Pe=Object(a["ref"])(!0),We=Object(a["ref"])(!0),Je=Object(a["ref"])(!0),He=Object(a["ref"])(!1),Ye=Object(a["ref"])(!1),Ge=Object(a["ref"])(["project_info","tasks","documents","requirements","ai_insights"]);function Xe(e){"docTrend"===e?Re.value=!Re.value:"reqPriority"===e?Pe.value=!Pe.value:"reqCompletion"===e?We.value=!We.value:"taskTrend"===e&&(Je.value=!Je.value)}async function Ke(){var e;if(null!==(e=t.project)&&void 0!==e&&e.id)try{$e.value=!0;const e=await Object(r["h"])(t.project.id);Ue.value=e.data,console.log("AI分析结果:",Ue.value)}catch(c){console.error("加载AI分析失败:",c),i["a"].error("加载AI分析失败，请稍后重试")}finally{$e.value=!1}}function Qe(e){if(!e)return console.warn("图表实例不存在，无法转换为Base64"),"";try{e.resize();const t=e.getDataURL({pixelRatio:1.5,backgroundColor:l.value?"#282c34":"#fff"});return!t||t.length<100?(console.warn("生成的Base64数据可能无效"),""):(console.log("成功转换图表，数据长度: "+t.length),t)}catch(t){return console.error("图表转换为Base64失败:",t),""}}function Ze(){var e;null!==(e=t.project)&&void 0!==e&&e.id?(0===Object.keys(Ue.value).length&&Ke(),He.value=!0,i["a"].info("报告导出后将保存到您的下载目录")):i["a"].warning("项目信息不完整，无法导出报告")}async function et(){var e;if(null!==(e=t.project)&&void 0!==e&&e.id)try{var c,l,n,o;Ye.value=!0,i["a"].info("正在准备图表数据，请稍候..."),await Object(a["nextTick"])(),null===(c=Ae)||void 0===c||c.resize(),null===(l=Le)||void 0===l||l.resize(),null===(n=Fe)||void 0===n||n.resize(),null===(o=qe)||void 0===o||o.resize(),setTimeout(async()=>{try{const e={doc_trend_img:Qe(Ae),req_chart_img:Qe(Le),gauge_chart_img:Qe(Fe),trend_chart_img:Qe(qe),export_options:Ge.value},c=Object.entries(e).filter(([e])=>e.endsWith("_img")).filter(([,e])=>e&&e.length>100).length;console.log(`有效图表数量: ${c}/4`),c<1&&i["a"].warning("图表数据准备失败，将尝试导出不含图表的报告"),i["a"].info("正在生成报告，请耐心等待...");const a=await Object(r["d"])(t.project.id,e);if(!a||!a.data)throw new Error("收到的PDF数据无效");const l=new Blob([a.data],{type:"application/pdf"}),n=URL.createObjectURL(l),o=document.createElement("a");o.href=n,o.download=(t.project.name||"项目")+"_AI分析报告.pdf",document.body.appendChild(o),o.click(),setTimeout(()=>{document.body.removeChild(o),URL.revokeObjectURL(n)},100),i["a"].success("AI分析报告导出成功"),He.value=!1}catch(e){console.error("导出过程中发生错误:",e),i["a"].error("导出失败: "+(e.message||"未知错误"))}finally{Ye.value=!1}},800)}catch(s){console.error("导出AI分析报告失败:",s),i["a"].error("导出报告失败: "+(s.message||"请稍后重试")),Ye.value=!1}else i["a"].warning("项目信息不完整，无法导出报告")}function tt(){if(Ae&&Ae.dispose(),Le&&Le.dispose(),Fe&&Fe.dispose(),qe&&qe.dispose(),Ce.value){var e;Ae=o["a"](Ce.value);const c={};null===(e=t.documents)||void 0===e||e.forEach(e=>{if(e.uploaded_at){const t=(e.uploaded_at+"").slice(0,7);c[t]=(c[t]||0)+1}});const a=Object.keys(c).sort(),l=a.map(e=>c[e]);Ae.setOption({tooltip:{trigger:"axis",backgroundColor:_e.value,borderColor:we.value,textStyle:{color:Ve.value}},grid:{left:40,right:20,top:30,bottom:40},xAxis:{type:"category",data:a,axisLabel:{color:Ee.value,fontSize:13},name:a.length?"":"暂无数据"},yAxis:{type:"value",min:0,axisLabel:{color:Ee.value,fontSize:13}},series:[{name:"上传文档数",type:"line",data:l,smooth:!0,itemStyle:{color:"#4F8CFF"},areaStyle:{color:"rgba(79,140,255,0.1)"},symbolSize:10}]})}if(Be.value){Le=o["a"](Be.value);const e={"高":0,"中":0,"低":0};Array.isArray(t.requirements)&&t.requirements.forEach(t=>{let c=t.priority;if("object"===typeof c&&null!==c&&(c=c.value||c.label||JSON.stringify(c)),"string"!==typeof c&&(c=String(c||"").trim()),["high","High","HIGH","高","1"].includes(c))c="高";else if(["medium","Medium","MEDIUM","中","2"].includes(c))c="中";else{if(!["low","Low","LOW","低","3"].includes(c))return;c="低"}e[c]=(e[c]||0)+1}),Le.setOption({tooltip:{trigger:"item",backgroundColor:_e.value,borderColor:we.value,textStyle:{color:Ve.value}},legend:{bottom:0,textStyle:{color:Ne.value,fontSize:13}},color:["#4F8CFF","#34C759","#FF9500"],series:[{name:"优先级分布",type:"pie",radius:["60%","80%"],data:Object.keys(e).map(t=>({value:e[t],name:t})),label:{show:!0,position:"outside",fontSize:14,color:Ve.value,formatter:"{b}: {d}%"},labelLine:{length:18,length2:10},avoidLabelOverlap:!1,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0,0,0,0.2)"}}}]})}if(xe.value){Fe=o["a"](xe.value);let e=0;Array.isArray(t.requirements)&&(console.log("需求原始数据:",t.requirements),t.requirements.forEach(t=>{let c=t.status;"object"===typeof c&&null!==c&&(c=c.value||c.label||JSON.stringify(c)),"string"!==typeof c&&(c=String(c||"").trim().toLowerCase()),["已完成","完成","completed","done","finished","已关闭","closed","已解决","resolved","1","true","是","success"].some(e=>c.includes(e))&&e++}));const c=ze.value?Math.round(e/ze.value*100):0;Fe.setOption({series:[{type:"gauge",center:["50%","60%"],radius:"90%",min:0,max:100,progress:{show:!0,width:18},axisLine:{lineStyle:{width:18,color:[[1,"#4F8CFF"]]}},pointer:{width:6,length:"70%"},detail:{valueAnimation:!0,fontSize:32,color:"#4F8CFF",fontWeight:"bold",offsetCenter:[0,"40%"],formatter:"{value}%"},data:[{value:c,name:"完成率"}],title:{fontSize:16,color:Ee.value,offsetCenter:[0,"80%"]}}]})}if(Se.value){console.log("任务原始数据:",Te.value),qe=o["a"](Se.value);const e={};let t=!1;Array.isArray(Te.value)&&Te.value.forEach(c=>{let a=(c.status||"").toLowerCase();if(["已完成","完成","done","finished","已关闭","closed","success","true","1"].some(e=>a.includes(e))){t=!0;let a=c.due_date||c.updated_at||c.update_time||c.end_time||"";if(!a){const e=new Date;a=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`}const l=(a+"").slice(0,7);e[l]=(e[l]||0)+1}});let c=Object.keys(e).sort(),a=c.map(t=>e[t]);if(Array.isArray(Te.value)&&Te.value.length>0&&!t){const e=new Date,t=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`;c=[t],a=[0]}qe.setOption({tooltip:{trigger:"axis",backgroundColor:_e.value,borderColor:we.value,textStyle:{color:Ve.value}},grid:{left:40,right:20,top:30,bottom:40},xAxis:{type:"category",data:c,axisLabel:{color:Ee.value,fontSize:13},name:c.length?"":"暂无数据"},yAxis:{type:"value",min:0,axisLabel:{color:Ee.value,fontSize:13}},series:[{name:"完成任务数",type:"bar",data:a,itemStyle:{color:"#34C759"},barWidth:32,label:{show:!0,position:"top",color:"#34C759",fontSize:16,fontWeight:"bold"}}]})}}const ct=()=>{var e,t,c,a;null===(e=Ae)||void 0===e||e.resize(),null===(t=Le)||void 0===t||t.resize(),null===(c=Fe)||void 0===c||c.resize(),null===(a=qe)||void 0===a||a.resize()};window.addEventListener("resize",ct),Object(a["watch"])(()=>[t.tasks,t.documents,t.requirements,t.project],()=>{Object(a["nextTick"])(()=>{var e;tt(),null!==(e=t.project)&&void 0!==e&&e.id&&0===Object.keys(Ue.value).length&&Ke()})},{deep:!0}),Object(a["onMounted"])(()=>{Object(a["nextTick"])(()=>{var e;tt(),null!==(e=t.project)&&void 0!==e&&e.id&&Ke()}),at.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]})}),Object(a["onBeforeUnmount"])(()=>{var e,t,c,a;window.removeEventListener("resize",ct),null===(e=Ae)||void 0===e||e.dispose(),null===(t=Le)||void 0===t||t.dispose(),null===(c=Fe)||void 0===c||c.dispose(),null===(a=qe)||void 0===a||a.dispose(),at.disconnect()});const at=new MutationObserver(()=>{const e=document.documentElement.getAttribute("data-theme")||"light";c.value!==e&&(c.value=e)});return(e,t)=>{const c=Object(a["resolveComponent"])("el-icon"),l=Object(a["resolveComponent"])("el-button"),o=Object(a["resolveComponent"])("el-checkbox"),r=Object(a["resolveComponent"])("el-checkbox-group"),i=Object(a["resolveComponent"])("el-dialog");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",d,[Object(a["createElementVNode"])("div",u,[t[8]||(t[8]=Object(a["createElementVNode"])("h5",{class:"module-title"},"项目数据分析",-1)),Object(a["createElementVNode"])("div",b,[Object(a["createVNode"])(l,{size:"small",plain:"",type:"primary",class:"ai-report-btn",onClick:Ze},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(c,{class:"btn-icon"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(Object(a["unref"])(s["MagicStick"]))]),_:1}),t[7]||(t[7]=Object(a["createTextVNode"])(" 导出AI分析报告 "))]),_:1})])]),Object(a["createElementVNode"])("div",j,[Object(a["createElementVNode"])("div",m,[Object(a["createElementVNode"])("div",O,[t[16]||(t[16]=Object(a["createElementVNode"])("h6",{class:"text-primary"},"文档上传趋势",-1)),Object(a["createElementVNode"])("div",p,[Object(a["createElementVNode"])("div",{ref_key:"docTrendChart",ref:Ce,class:"modern-echart"},null,512),Ie.value?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",v,"暂无数据"))]),Ie.value?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",f,[Object(a["createElementVNode"])("div",{class:"ai-analysis-header",onClick:t[0]||(t[0]=e=>Xe("docTrend"))},[Object(a["createVNode"])(c,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(Object(a["unref"])(s["MagicStick"]))]),_:1}),t[9]||(t[9]=Object(a["createElementVNode"])("span",null,"AI分析",-1)),Object(a["createVNode"])(c,{class:Object(a["normalizeClass"])(["toggle-icon",{"is-active":Re.value}])},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(Object(a["unref"])(s["ArrowDown"]))]),_:1},8,["class"])]),Re.value?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",y,[$e.value?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",h,[Object(a["createVNode"])(c,{class:"is-loading"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(Object(a["unref"])(s["Loading"]))]),_:1}),t[10]||(t[10]=Object(a["createElementVNode"])("span",null,"AI分析中...",-1))])):Ue.value.doc_trend_analysis?(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:1},[Object(a["createElementVNode"])("div",g,[t[11]||(t[11]=Object(a["createElementVNode"])("h6",null,"关键发现",-1)),Object(a["createElementVNode"])("ul",k,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(Ue.value.doc_trend_analysis.key_findings,(e,t)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{key:"finding-"+t},Object(a["toDisplayString"])(e),1))),128))])]),Object(a["createElementVNode"])("div",V,[t[12]||(t[12]=Object(a["createElementVNode"])("h6",null,"建议",-1)),Object(a["createElementVNode"])("ul",N,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(Ue.value.doc_trend_analysis.recommendations,(e,t)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{key:"rec-"+t},Object(a["toDisplayString"])(e),1))),128))])]),Object(a["createElementVNode"])("div",E,[t[13]||(t[13]=Object(a["createElementVNode"])("h6",null,"洞察",-1)),Object(a["createElementVNode"])("p",_,Object(a["toDisplayString"])(Ue.value.doc_trend_analysis.insights),1)])],64)):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",w,[t[15]||(t[15]=Object(a["createElementVNode"])("span",null,"暂无分析数据",-1)),Object(a["createVNode"])(l,{type:"text",onClick:Ke},{default:Object(a["withCtx"])(()=>t[14]||(t[14]=[Object(a["createTextVNode"])("点击生成分析")])),_:1})]))])):Object(a["createCommentVNode"])("",!0)])):Object(a["createCommentVNode"])("",!0)])]),Object(a["createElementVNode"])("div",C,[Object(a["createElementVNode"])("div",B,[t[24]||(t[24]=Object(a["createElementVNode"])("h6",{class:"text-primary"},"需求优先级分布",-1)),Object(a["createElementVNode"])("div",x,[Object(a["createElementVNode"])("div",{ref_key:"reqChart",ref:Be,class:"modern-echart"},null,512),ze.value?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",S,"暂无数据"))]),ze.value?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",A,"共 "+Object(a["toDisplayString"])(ze.value)+" 个需求",1)):Object(a["createCommentVNode"])("",!0),ze.value?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",L,[Object(a["createElementVNode"])("div",{class:"ai-analysis-header",onClick:t[1]||(t[1]=e=>Xe("reqPriority"))},[Object(a["createVNode"])(c,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(Object(a["unref"])(s["MagicStick"]))]),_:1}),t[17]||(t[17]=Object(a["createElementVNode"])("span",null,"AI分析",-1)),Object(a["createVNode"])(c,{class:Object(a["normalizeClass"])(["toggle-icon",{"is-active":Pe.value}])},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(Object(a["unref"])(s["ArrowDown"]))]),_:1},8,["class"])]),Pe.value?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",F,[$e.value?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",q,[Object(a["createVNode"])(c,{class:"is-loading"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(Object(a["unref"])(s["Loading"]))]),_:1}),t[18]||(t[18]=Object(a["createElementVNode"])("span",null,"AI分析中...",-1))])):Ue.value.req_priority_analysis?(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:1},[Object(a["createElementVNode"])("div",T,[t[19]||(t[19]=Object(a["createElementVNode"])("h6",null,"关键发现",-1)),Object(a["createElementVNode"])("ul",z,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(Ue.value.req_priority_analysis.key_findings,(e,t)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{key:"finding-"+t},Object(a["toDisplayString"])(e),1))),128))])]),Object(a["createElementVNode"])("div",D,[t[20]||(t[20]=Object(a["createElementVNode"])("h6",null,"建议",-1)),Object(a["createElementVNode"])("ul",I,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(Ue.value.req_priority_analysis.recommendations,(e,t)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{key:"rec-"+t},Object(a["toDisplayString"])(e),1))),128))])]),Object(a["createElementVNode"])("div",M,[t[21]||(t[21]=Object(a["createElementVNode"])("h6",null,"洞察",-1)),Object(a["createElementVNode"])("p",U,Object(a["toDisplayString"])(Ue.value.req_priority_analysis.insights),1)])],64)):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",$,[t[23]||(t[23]=Object(a["createElementVNode"])("span",null,"暂无分析数据",-1)),Object(a["createVNode"])(l,{type:"text",onClick:Ke},{default:Object(a["withCtx"])(()=>t[22]||(t[22]=[Object(a["createTextVNode"])("点击生成分析")])),_:1})]))])):Object(a["createCommentVNode"])("",!0)])):Object(a["createCommentVNode"])("",!0)])])]),Object(a["createElementVNode"])("div",R,[Object(a["createElementVNode"])("div",P,[Object(a["createElementVNode"])("div",W,[t[32]||(t[32]=Object(a["createElementVNode"])("h6",{class:"text-primary"},"需求完成率",-1)),Object(a["createElementVNode"])("div",J,[Object(a["createElementVNode"])("div",{ref_key:"gaugeChart",ref:xe,class:"modern-echart"},null,512),ze.value?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",H,"暂无数据"))]),ze.value?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Y,[Object(a["createElementVNode"])("div",{class:"ai-analysis-header",onClick:t[2]||(t[2]=e=>Xe("reqCompletion"))},[Object(a["createVNode"])(c,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(Object(a["unref"])(s["MagicStick"]))]),_:1}),t[25]||(t[25]=Object(a["createElementVNode"])("span",null,"AI分析",-1)),Object(a["createVNode"])(c,{class:Object(a["normalizeClass"])(["toggle-icon",{"is-active":We.value}])},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(Object(a["unref"])(s["ArrowDown"]))]),_:1},8,["class"])]),We.value?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",G,[$e.value?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",X,[Object(a["createVNode"])(c,{class:"is-loading"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(Object(a["unref"])(s["Loading"]))]),_:1}),t[26]||(t[26]=Object(a["createElementVNode"])("span",null,"AI分析中...",-1))])):Ue.value.req_completion_analysis?(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:1},[Object(a["createElementVNode"])("div",K,[t[27]||(t[27]=Object(a["createElementVNode"])("h6",null,"关键发现",-1)),Object(a["createElementVNode"])("ul",Q,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(Ue.value.req_completion_analysis.key_findings,(e,t)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{key:"finding-"+t},Object(a["toDisplayString"])(e),1))),128))])]),Object(a["createElementVNode"])("div",Z,[t[28]||(t[28]=Object(a["createElementVNode"])("h6",null,"建议",-1)),Object(a["createElementVNode"])("ul",ee,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(Ue.value.req_completion_analysis.recommendations,(e,t)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{key:"rec-"+t},Object(a["toDisplayString"])(e),1))),128))])]),Object(a["createElementVNode"])("div",te,[t[29]||(t[29]=Object(a["createElementVNode"])("h6",null,"洞察",-1)),Object(a["createElementVNode"])("p",ce,Object(a["toDisplayString"])(Ue.value.req_completion_analysis.insights),1)])],64)):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ae,[t[31]||(t[31]=Object(a["createElementVNode"])("span",null,"暂无分析数据",-1)),Object(a["createVNode"])(l,{type:"text",onClick:Ke},{default:Object(a["withCtx"])(()=>t[30]||(t[30]=[Object(a["createTextVNode"])("点击生成分析")])),_:1})]))])):Object(a["createCommentVNode"])("",!0)])):Object(a["createCommentVNode"])("",!0)])]),Object(a["createElementVNode"])("div",le,[Object(a["createElementVNode"])("div",ne,[t[40]||(t[40]=Object(a["createElementVNode"])("h6",{class:"text-primary"},"任务完成趋势",-1)),Object(a["createElementVNode"])("div",oe,[Object(a["createElementVNode"])("div",{ref_key:"trendChart",ref:Se,class:"modern-echart"},null,512),Me.value?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",re,"暂无数据"))]),De.value?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ie,"共 "+Object(a["toDisplayString"])(De.value)+" 个任务",1)):Object(a["createCommentVNode"])("",!0),Me.value||De.value>0?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",se,[Object(a["createElementVNode"])("div",{class:"ai-analysis-header",onClick:t[3]||(t[3]=e=>Xe("taskTrend"))},[Object(a["createVNode"])(c,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(Object(a["unref"])(s["MagicStick"]))]),_:1}),t[33]||(t[33]=Object(a["createElementVNode"])("span",null,"AI分析",-1)),Object(a["createVNode"])(c,{class:Object(a["normalizeClass"])(["toggle-icon",{"is-active":Je.value}])},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(Object(a["unref"])(s["ArrowDown"]))]),_:1},8,["class"])]),Je.value?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",de,[$e.value?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ue,[Object(a["createVNode"])(c,{class:"is-loading"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(Object(a["unref"])(s["Loading"]))]),_:1}),t[34]||(t[34]=Object(a["createElementVNode"])("span",null,"AI分析中...",-1))])):Ue.value.task_trend_analysis?(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:1},[Object(a["createElementVNode"])("div",be,[t[35]||(t[35]=Object(a["createElementVNode"])("h6",null,"关键发现",-1)),Object(a["createElementVNode"])("ul",je,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(Ue.value.task_trend_analysis.key_findings,(e,t)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{key:"finding-"+t},Object(a["toDisplayString"])(e),1))),128))])]),Object(a["createElementVNode"])("div",me,[t[36]||(t[36]=Object(a["createElementVNode"])("h6",null,"建议",-1)),Object(a["createElementVNode"])("ul",Oe,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(Ue.value.task_trend_analysis.recommendations,(e,t)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{key:"rec-"+t},Object(a["toDisplayString"])(e),1))),128))])]),Object(a["createElementVNode"])("div",pe,[t[37]||(t[37]=Object(a["createElementVNode"])("h6",null,"洞察",-1)),Object(a["createElementVNode"])("p",ve,Object(a["toDisplayString"])(Ue.value.task_trend_analysis.insights),1)])],64)):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",fe,[t[39]||(t[39]=Object(a["createElementVNode"])("span",null,"暂无分析数据",-1)),Object(a["createVNode"])(l,{type:"text",onClick:Ke},{default:Object(a["withCtx"])(()=>t[38]||(t[38]=[Object(a["createTextVNode"])("点击生成分析")])),_:1})]))])):Object(a["createCommentVNode"])("",!0)])):Object(a["createCommentVNode"])("",!0)])])]),Object(a["createVNode"])(i,{modelValue:He.value,"onUpdate:modelValue":t[6]||(t[6]=e=>He.value=e),title:"导出AI分析报告",width:"500px","destroy-on-close":""},{footer:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("div",ke,[Object(a["createVNode"])(l,{onClick:t[5]||(t[5]=e=>He.value=!1)},{default:Object(a["withCtx"])(()=>t[49]||(t[49]=[Object(a["createTextVNode"])("取消")])),_:1}),Object(a["createVNode"])(l,{type:"primary",loading:Ye.value,onClick:et},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(Ye.value?"导出中...":"开始导出"),1)]),_:1},8,["loading"])])]),default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("div",ye,[Object(a["createElementVNode"])("div",he,[Object(a["createElementVNode"])("p",null,[Object(a["createVNode"])(c,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(Object(a["unref"])(s["InfoFilled"]))]),_:1}),t[41]||(t[41]=Object(a["createTextVNode"])(" 系统将自动整合所有图表及AI分析结果生成PDF报告。"))])]),Object(a["createElementVNode"])("div",ge,[t[47]||(t[47]=Object(a["createElementVNode"])("h4",null,"报告内容",-1)),Object(a["createVNode"])(r,{modelValue:Ge.value,"onUpdate:modelValue":t[4]||(t[4]=e=>Ge.value=e)},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(o,{label:"project_info"},{default:Object(a["withCtx"])(()=>t[42]||(t[42]=[Object(a["createTextVNode"])("项目基本信息")])),_:1}),Object(a["createVNode"])(o,{label:"tasks"},{default:Object(a["withCtx"])(()=>t[43]||(t[43]=[Object(a["createTextVNode"])("任务分析")])),_:1}),Object(a["createVNode"])(o,{label:"documents"},{default:Object(a["withCtx"])(()=>t[44]||(t[44]=[Object(a["createTextVNode"])("文档分析")])),_:1}),Object(a["createVNode"])(o,{label:"requirements"},{default:Object(a["withCtx"])(()=>t[45]||(t[45]=[Object(a["createTextVNode"])("需求分析")])),_:1}),Object(a["createVNode"])(o,{label:"ai_insights"},{default:Object(a["withCtx"])(()=>t[46]||(t[46]=[Object(a["createTextVNode"])("AI综合结论")])),_:1})]),_:1},8,["modelValue"])]),t[48]||(t[48]=Object(a["createElementVNode"])("div",{class:"report-preview"},[Object(a["createElementVNode"])("img",{src:n.a,alt:"报告预览",class:"preview-img"})],-1))])]),_:1},8,["modelValue"])])}}},Ne=(c("dc54"),c("6b0d")),Ee=c.n(Ne);const _e=Ee()(Ve,[["__scopeId","data-v-350e44f5"]]);t["default"]=_e},"88a7":function(e,t,c){"use strict";var a=c("cb2d"),l=c("e330"),n=c("577e"),o=c("d6d6"),r=URLSearchParams,i=r.prototype,s=l(i.append),d=l(i["delete"]),u=l(i.forEach),b=l([].push),j=new r("a=1&a=2&b=3");j["delete"]("a",1),j["delete"]("b",void 0),j+""!=="a=2"&&a(i,"delete",(function(e){var t=arguments.length,c=t<2?void 0:arguments[1];if(t&&void 0===c)return d(this,e);var a=[];u(this,(function(e,t){b(a,{key:t,value:e})})),o(t,1);var l,r=n(e),i=n(c),j=0,m=0,O=!1,p=a.length;while(j<p)l=a[j++],O||l.key===r?(O=!0,d(this,l.key)):m++;while(m<p)l=a[m++],l.key===r&&l.value===i||s(this,l.key,l.value)}),{enumerable:!0,unsafe:!0})},a8a5:function(e,t,c){e.exports=c.p+"img/report-preview.387f9b33.svg"},caa0:function(e,t,c){},d6d6:function(e,t,c){"use strict";var a=TypeError;e.exports=function(e,t){if(e<t)throw new a("Not enough arguments");return e}},dc54:function(e,t,c){"use strict";c("caa0")}}]);
//# sourceMappingURL=chunk-78f6b38d.5c2c172b.js.map