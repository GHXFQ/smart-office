{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.reduce.js","webpack:///./src/views/layout/Index.vue","webpack:///./src/components/layout/Sidebar.vue","webpack:///./src/components/layout/Sidebar.vue?80f8","webpack:///./src/components/layout/Navbar.vue","webpack:///./src/components/GlobalSearch.vue","webpack:///./src/api/search.js","webpack:///./src/components/GlobalSearch.vue?376c","webpack:///./src/components/layout/Navbar.vue?d847","webpack:///./src/views/layout/Index.vue?82d6","webpack:///./node_modules/core-js/modules/es.set.symmetric-difference.v2.js","webpack:///./node_modules/core-js/modules/es.set.difference.v2.js","webpack:///./src/api/calendar.js","webpack:///./node_modules/core-js/internals/set-iterate.js","webpack:///./node_modules/core-js/internals/set-is-superset-of.js","webpack:///./src/components/GlobalSearch.vue?c735","webpack:///./src/api/ai.js","webpack:///./node_modules/core-js/internals/iterate-simple.js","webpack:///./node_modules/core-js/internals/set-is-subset-of.js","webpack:///./node_modules/core-js/modules/es.set.union.v2.js","webpack:///./node_modules/core-js/modules/es.set.intersection.v2.js","webpack:///./node_modules/core-js/internals/get-set-record.js","webpack:///./node_modules/core-js/internals/set-clone.js","webpack:///./node_modules/core-js/internals/environment.js","webpack:///./src/components/layout/Navbar.vue?6004","webpack:///./node_modules/core-js/modules/es.set.is-subset-of.v2.js","webpack:///./node_modules/core-js/internals/set-size.js","webpack:///./node_modules/core-js/modules/es.iterator.filter.js","webpack:///./node_modules/core-js/modules/es.iterator.reduce.js","webpack:///./src/views/layout/Index.vue?2a6b","webpack:///./node_modules/core-js/internals/set-intersection.js","webpack:///./src/components/layout/Sidebar.vue?63dd","webpack:///./node_modules/core-js/internals/set-symmetric-difference.js","webpack:///./node_modules/core-js/internals/environment-is-node.js","webpack:///./node_modules/core-js/modules/es.set.is-superset-of.v2.js","webpack:///./node_modules/core-js/internals/set-difference.js","webpack:///./node_modules/core-js/internals/array-method-is-strict.js","webpack:///./src/components/GlobalSearch.vue?2f17","webpack:///./node_modules/core-js/internals/set-is-disjoint-from.js","webpack:///./node_modules/core-js/modules/es.set.is-disjoint-from.v2.js","webpack:///./node_modules/core-js/internals/set-helpers.js","webpack:///./node_modules/core-js/internals/array-reduce.js","webpack:///./src/api/chat.js","webpack:///./node_modules/core-js/internals/set-method-accept-set-like.js","webpack:///./node_modules/core-js/internals/a-set.js","webpack:///./node_modules/core-js/internals/set-union.js","webpack:///./node_modules/core-js/modules/es.iterator.find.js"],"names":["$","$reduce","left","arrayMethodIsStrict","CHROME_VERSION","IS_NODE","CHROME_BUG","FORCED","target","proto","forced","reduce","callbackfn","length","arguments","this","undefined","class","_createElementBlock","_normalizeClass","$setup","device","_createVNode","_component_Sidebar","_createElementVNode","style","_normalizeStyle","mainContainerStyle","_component_Navbar","_hoisted_1","_component_router_view","Component","_Transition","name","mode","onBeforeLeave","beforeRouteLeave","_createBlock","_KeepAlive","include","cachedRoutes","_resolveDynamicComponent","key","_ctx","$route","fullPath","refreshKey","sidebarOpened","src","alt","_hoisted_2","_component_el_scrollbar","_component_el_menu","default-active","activeMenu","collapse","background-color","menuBackgroundColor","text-color","menuTextColor","active-text-color","menuActiveTextColor","unique-opened","router","_Fragment","_renderList","routes","route","_component_el_menu_item","absPath","index","onClick","$event","handleMenuClick","title","_withCtx","_toDisplayString","meta","_component_el_icon","iconComponent","icon","setup","store","useStore","useRouter","useRoute","lastPath","ref","computed","getters","sidebar","opened","allRoutes","options","find","r","path","children","filter","hidden","map","startsWith","routeOrder","sort","a","b","indexA","indexOf","indexB","currentTheme","theme","localStorage","getItem","value","console","log","document","querySelectorAll","forEach","el","parentNode","removeChild","push","e","error","setTimeout","cleanupQuillEditor","window","location","href","quillElements","clone","cloneNode","replaceChild","watch","pointerEvents","includes","iconName","replace","iconMap","__exports__","_cache","args","toggleSidebar","size","_component_Menu","_component_el_breadcrumb","separator","_component_el_breadcrumb_item","to","currentRoute","_hoisted_3","_hoisted_4","_component_global_search","_component_el_dropdown","trigger","teleported","onVisibleChange","handleDropdownChange","dropdown","_component_el_dropdown_menu","reminders","_component_el_dropdown_item","item","recommendation_id","event_id","_hoisted_6","_hoisted_7","formatReminderTime","reminder","_hoisted_8","ai_content","_component_el_tooltip","content","placement","markAsRead","_component_Check","_hoisted_5","_component_el_badge","_component_Bell","_component_router_link","_component_User","openSettings","_component_Setting","divided","logout","_component_SwitchButton","_hoisted_9","userAvatar","username","_hoisted_11","_component_ArrowDown","_component_el_select","currentQuery","filterable","remote","reserve-keyword","placeholder","remote-method","search","loading","onChange","handleSelect","onClear","clearSearch","clearable","popper-class","empty","_component_el_icon_loading","trim","_hoisted_10","searchResults","group","_component_el_option_group","type","label","items","_component_el_option","id","getIconForType","summary","globalSearch","query","request","url","method","params","q","components","ElIconLoading","props","expose","selectedValue","searchCounter","clearSearchState","debounce","async","localCounter","data","grouped","acc","Object","values","findOrCreateChat","chat_id","GlobalSearch","Menu","Bell","User","Setting","SwitchButton","ArrowDown","Check","searchInput","globalSearchRef","isActive","avatar","user","fetchReminders","response","getScheduleReminders","Array","isArray","success","is_read","remindedSet","Set","reminderTimer","checkReminders","now","Date","year","getFullYear","month","getMonth","res","getMonthlyEvents","events","event","remindTime","start","getTime","toISOString","slice","Math","abs","has","add","warn","onMounted","setInterval","onUnmounted","clearInterval","dispatch","commit","ElMessage","visible","reminderMap","preventDefault","stopPropagation","settingsVisible","inject","get","state","set","markScheduleReminderAsRead","newPath","oldPath","Sidebar","Navbar","sidebarWidth","marginLeft","width","cleanupDOMElements","body","overflow","classList","remove","handleResize","clientWidth","addEventListener","onBeforeUnmount","removeEventListener","render","symmetricDifference","setMethodAcceptSetLike","real","difference","INCORRECT","result","getWeeklyEvents","date","getDailyEvents","createEvent","end","description","participants","updateEvent","deleteCalendarEvent","getCalendarEvent","uncurryThis","iterateSimple","SetHelpers","SetPrototype","keys","next","module","exports","fn","interruptible","iterator","aSet","getSetRecord","iteratorClose","other","O","otherRec","getIterator","aiChatWithDocuments","responseType","aiChatWithDocumentsStream","onChunk","onComplete","onError","controller","AbortController","signal","token","headers","fetch","JSON","stringify","then","ok","errorData","json","catch","message","Error","status","reader","getReader","decoder","TextDecoder","buffer","lastChatId","processStream","done","read","decode","stream","lines","split","pop","line","jsonStr","substring","parsed","parse","err","getAIChatSessions","getAIChatSession","deleteAIChatSession","call","record","ITERATOR_INSTEAD_OF_RECORD","step","iterate","union","fails","intersection","String","from","aCallable","anObject","toIntegerOrInfinity","getIteratorDirect","INVALID_SIZE","$RangeError","RangeError","$TypeError","TypeError","max","SetRecord","intSize","prototype","it","obj","numSize","globalThis","userAgent","classof","userAgentStartsWith","string","Bun","version","Deno","process","isSubsetOf","uncurryThisAccessor","createIteratorProxy","callWithSafeIterationClosing","IS_PURE","iteratorHelperWithoutClosingOnEarlyError","filterWithoutClosingOnEarlyError","IteratorProxy","predicate","counter","apply","FAILS_ON_INITIAL_UNDEFINED","reduceWithoutClosingOnEarlyError","reducer","noInitial","accumulator","IS_RECORD","iterateSet","keysIter","ENVIRONMENT","isSupersetOf","METHOD_NAME","argument","isDisjointFrom","toObject","IndexedObject","lengthOfArrayLike","REDUCE_EMPTY","createMethod","IS_RIGHT","that","argumentsLength","memo","self","i","right","getChatSessions","getChatSession","createChatSession","sendTextMessage","message_type","sendFileMessage","chatId","file","formData","FormData","append","sendImageMessage","image","sendKnowledgeMessage","downloadMessageFile","messageId","userId","user_id","findOrCreateChatWithUsers","userIds","summarizeChat","sessionId","startDate","endDate","start_date","end_date","analyzeForCalendar","createCalendarEvent","eventData","getBuiltIn","createSetLike","createSetLikeWithInfinitySize","callback","error2","Infinity","findWithoutClosingOnEarlyError","stop","INTERRUPTED"],"mappings":"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","file":"js/chunk-50c3118c.0e3012e4.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar $reduce = require('../internals/array-reduce').left;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar CHROME_VERSION = require('../internals/environment-v8-version');\nvar IS_NODE = require('../internals/environment-is-node');\n\n// Chrome 80-82 has a critical bug\n// https://bugs.chromium.org/p/chromium/issues/detail?id=1049982\nvar CHROME_BUG = !IS_NODE && CHROME_VERSION > 79 && CHROME_VERSION < 83;\nvar FORCED = CHROME_BUG || !arrayMethodIsStrict('reduce');\n\n// `Array.prototype.reduce` method\n// https://tc39.es/ecma262/#sec-array.prototype.reduce\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    var length = arguments.length;\n    return $reduce(this, callbackfn, length, length > 1 ? arguments[1] : undefined);\n  }\n});\n","<template>\n  <div class=\"app-wrapper\" :class=\"{ 'mobile': device === 'mobile' }\">\n    <!-- 侧边栏 -->\n    <Sidebar class=\"sidebar-container\" />\n    \n    <!-- 主要内容区域 -->\n    <div class=\"main-container\" :style=\"mainContainerStyle\">\n      <!-- 顶部导航栏 -->\n      <Navbar />\n      \n      <!-- 内容区域 -->\n      <div class=\"app-main\">\n        <router-view v-slot=\"{ Component }\">\n          <transition name=\"fade-transform\" mode=\"out-in\" @before-leave=\"beforeRouteLeave\">\n            <keep-alive :include=\"cachedRoutes\">\n              <component :is=\"Component\" :key=\"$route.fullPath + refreshKey\" />\n          </keep-alive>\n          </transition>\n        </router-view>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { computed, onMounted, onBeforeUnmount, watch, ref } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRoute } from 'vue-router'\nimport Sidebar from '@/components/layout/Sidebar.vue'\nimport Navbar from '@/components/layout/Navbar.vue'\n\nexport default {\n  name: 'Layout',\n  components: {\n    Sidebar,\n    Navbar\n  },\n  setup() {\n    const store = useStore()\n    const route = useRoute()\n    \n    // 设备类型\n    const device = computed(() => store.getters.device)\n    \n    // 侧边栏状态\n    const sidebarOpened = computed(() => store.getters.sidebar.opened)\n    \n    // 刷新页面时使用的key\n    const refreshKey = ref(0)\n    \n    // 需要缓存的路由，缓存小组件页面提高切换性能\n    const cachedRoutes = ref([\n      'Dashboard',\n      'Calendar',\n      'Chat',\n      'Contact',\n      'Company',\n      'Project',\n      'Profile',\n      'Knowledge'\n    ])\n    \n    // 动态计算主容器样式\n    const mainContainerStyle = computed(() => {\n      // 侧边栏展开宽度为160px，收起宽度为64px\n      const sidebarWidth = sidebarOpened.value ? '160px' : '64px'\n      return {\n        marginLeft: sidebarWidth,\n        width: `calc(100% - ${sidebarWidth})`\n      }\n    })\n    \n    // 路由离开前的清理工作\n    const beforeRouteLeave = () => {\n      // 清理可能存在的DOM副作用\n      cleanupDOMElements();\n    }\n    \n    // 清理DOM元素的集中处理函数\n    const cleanupDOMElements = () => {\n      try {\n        // 移除可能的事件拦截器和遮罩\n        document.querySelectorAll('.el-overlay, .el-popup-parent--hidden, .el-message, .el-message-box').forEach(el => {\n            if (el && el.parentNode) {\n              try {\n                el.parentNode.removeChild(el);\n              } catch (e) {\n                console.error('清理DOM元素失败:', e);\n              }\n            }\n          });\n          \n          // 恢复body样式\n          if (document && document.body && document.body.style) {\n          document.body.style.overflow = '';\n          document.body.classList.remove('el-popup-parent--hidden');\n          }\n          \n          // 确保导航菜单可点击\n          document.querySelectorAll('.el-menu-item, .el-submenu').forEach(el => {\n            if (el && el.style) {\n            el.style.pointerEvents = 'auto';\n            }\n          });\n        \n        // 如果当前是智能文档页面，额外清理相关资源\n        if (route.path === '/smartdoc' || route.path.startsWith('/smartdoc/')) {\n          document.querySelectorAll('.ql-container, .ql-toolbar, .ql-editor').forEach(el => {\n            if (el && el.parentNode) {\n              el.parentNode.removeChild(el);\n            }\n          });\n        }\n      } catch (error) {\n        console.error('清理DOM资源失败:', error);\n      }\n    }\n    \n    // 监视路由变化，刷新页面时更新key值\n    watch(() => route.fullPath, (newPath, oldPath) => {\n      if (newPath === oldPath && oldPath !== undefined) {\n        // 相同路径刷新页面时，更新key值触发组件重新渲染\n        refreshKey.value = Date.now();\n      }\n    });\n    \n    // 响应式布局 - 窗口尺寸变化监听\n    const handleResize = () => {\n      if (document && document.body) {\n        if (document.body.clientWidth < 992) {\n          store.dispatch('setDevice', 'mobile')\n          store.dispatch('toggleSidebar', false)\n        } else {\n          store.dispatch('setDevice', 'desktop')\n        }\n      }\n    }\n    \n    onMounted(() => {\n      handleResize()\n      window.addEventListener('resize', handleResize)\n    })\n    \n    onBeforeUnmount(() => {\n      window.removeEventListener('resize', handleResize)\n    })\n    \n    return {\n      device,\n      mainContainerStyle,\n      cachedRoutes,\n      refreshKey,\n      beforeRouteLeave\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.app-wrapper {\n  position: relative;\n  height: 100%;\n  width: 100%;\n  display: flex;\n  background-color: var(--el-bg-color-page);\n  color: var(--text-color);\n}\n\n.sidebar-container {\n  transition: width 0.28s;\n  height: 100%;\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 1001;\n}\n\n.main-container {\n  min-height: 100%;\n  transition: margin-left 0.28s;\n  position: relative;\n  padding-top: 60px; /* 为固定导航栏腾出空间 */\n  overflow: auto; /* 允许主内容区出现滚动条 */\n  display: flex;\n  flex-direction: column;\n  background-color: var(--el-bg-color-page);\n  color: var(--text-color);\n}\n\n.app-main {\n  flex: 1;\n  width: 100%;\n  position: relative;\n  overflow: auto;\n  padding: 0;\n  height: 100%;\n  background-color: var(--el-bg-color-page);\n}\n\n/* 增强过渡动画效果 */\n.fade-transform-enter-active,\n.fade-transform-leave-active {\n  transition: all 0.3s;\n}\n\n.fade-transform-enter-from {\n  opacity: 0;\n  transform: translateX(30px);\n}\n\n.fade-transform-leave-to {\n  opacity: 0;\n  transform: translateX(-30px);\n}\n\n/* 备用过渡动画，确保动画效果一定生效 */\n.v-enter-active,\n.v-leave-active {\n  transition: opacity 0.3s ease;\n}\n\n.v-enter-from,\n.v-leave-to {\n  opacity: 0;\n}\n\n.app-wrapper.mobile .sidebar-container {\n  transition: transform .28s;\n  width: 180px !important;\n}\n\n.app-wrapper.mobile .main-container {\n  margin-left: 0 !important;\n  width: 100% !important;\n}\n\n.app-wrapper.mobile .sidebar-container.is-collapsed {\n  transform: translateX(-200px);\n}\n</style> ","<template>\n  <div class=\"sidebar\" :class=\"{ 'is-collapsed': !sidebarOpened }\">\n    <!-- 侧边栏头部 -->\n    <div class=\"sidebar-header\">\n      <img src=\"https://cdn-icons-png.flaticon.com/512/2891/2891491.png\" alt=\"Logo\">\n      <h5 v-if=\"sidebarOpened\">智能办公系统</h5>\n    </div>\n\n    <!-- 侧边栏菜单 -->\n    <el-scrollbar class=\"sidebar-menu-container\">\n      <el-menu\n        :default-active=\"activeMenu\"\n        :collapse=\"!sidebarOpened\"\n        :background-color=\"menuBackgroundColor\"\n        :text-color=\"menuTextColor\"\n        :active-text-color=\"menuActiveTextColor\"\n        :unique-opened=\"true\"\n        router\n      >\n        <el-menu-item \n          v-for=\"route in routes\" \n          :key=\"route.absPath\" \n          :index=\"route.absPath\"\n          @click=\"handleMenuClick(route.absPath)\"\n        >\n          <el-icon>\n            <component :is=\"iconComponent(route.meta.icon)\"></component>\n          </el-icon>\n          <template #title>\n            <span>{{ route.meta.title }}</span>\n          </template>\n        </el-menu-item>\n      </el-menu>\n    </el-scrollbar>\n  </div>\n</template>\n\n<script>\nimport { computed, watch, ref } from 'vue'\nimport { useRouter, useRoute } from 'vue-router'\nimport { useStore } from 'vuex'\n\nexport default {\n  name: 'Sidebar',\n  setup() {\n    const store = useStore()\n    const router = useRouter()\n    const route = useRoute()\n    \n    // 跟踪上一个路由\n    const lastPath = ref('');\n\n    // 从Vuex中获取侧边栏状态\n    const sidebarOpened = computed(() => store.getters.sidebar.opened)\n\n    // 菜单路由\n    const routes = computed(() => {\n      // 首先获取所有非隐藏的路由\n      const allRoutes = router.options.routes.find(r => r.path === '/').children\n        .filter(route => !route.hidden)\n        .map(route => ({\n          ...route,\n          absPath: route.path.startsWith('/') ? route.path : '/' + route.path\n        }));\n      \n      // 定义期望的路由顺序\n      const routeOrder = [\n        'dashboard',     // 工作中心\n        'smartdoc',      // 文档处理\n        'project',       // 项目协作\n        'calendar',      // 日程安排\n        'chat',          // 即时沟通\n        'contract',      // 智能合同\n        'knowledge',     // 企业知识库\n        'contact',       // 企业通讯录\n        'company',       // 企业信息\n        'profile'        // 个人中心\n      ];\n      \n      // 按照定义的顺序对路由进行排序\n      return allRoutes.sort((a, b) => {\n        const indexA = routeOrder.indexOf(a.path);\n        const indexB = routeOrder.indexOf(b.path);\n        // 如果两者都在排序列表中，按列表顺序排序\n        if (indexA >= 0 && indexB >= 0) {\n          return indexA - indexB;\n        }\n        // 如果只有一个在列表中，将其排在前面\n        if (indexA >= 0) return -1;\n        if (indexB >= 0) return 1;\n        // 如果都不在列表中，保持原顺序\n        return 0;\n      });\n    })\n\n    // 当前激活的菜单\n    const activeMenu = computed(() => {\n      const path = route.path;\n      \n      // 如果当前路径是文档详情页，激活的菜单应该是smartdoc\n      if (path.startsWith('/smartdoc/')) {\n        return '/smartdoc';\n      }\n      \n      return path;\n    })\n    \n    // 获取主题相关的颜色\n    const currentTheme = computed(() => {\n      const theme = localStorage.getItem('theme') || 'light';\n      return theme;\n    });\n    \n    // 根据主题计算菜单颜色\n    const menuBackgroundColor = computed(() => {\n      return currentTheme.value === 'dark' ? 'var(--bg-color-secondary)' : 'var(--bg-color)';\n    });\n    \n    const menuTextColor = computed(() => {\n      return 'var(--text-color)';\n    });\n    \n    const menuActiveTextColor = computed(() => {\n      return 'var(--primary-color)';\n    });\n    \n    // 处理菜单点击\n    const handleMenuClick = (path) => {\n      // 确保path为绝对路径\n      if (!path.startsWith('/')) path = '/' + path;\n      \n      console.log('菜单点击:', path, '当前路径:', route.path);\n      \n      // 如果是从smartdoc详情页点击到智能文档首页，使用路由导航\n      if (route.path.startsWith('/smartdoc/') && path === '/smartdoc') {\n        try {\n          // 清理可能存在的遮罩\n          document.querySelectorAll('.el-overlay').forEach(el => {\n            if (el && el.parentNode) el.parentNode.removeChild(el);\n          });\n          \n          // 使用路由导航而不是强制刷新\n          router.push(path);\n          return;\n        } catch (e) {\n          console.error('导航处理错误:', e);\n        }\n      }\n      \n      // 如果是从smartdoc页面点击其他页面，也使用路由导航\n      if ((route.path === '/smartdoc' || route.path.startsWith('/smartdoc/')) && path !== '/smartdoc') {\n        try {\n          // 清理可能存在的遮罩\n          document.querySelectorAll('.el-overlay').forEach(el => {\n            if (el && el.parentNode) el.parentNode.removeChild(el);\n          });\n          \n          // 清理编辑器实例以避免内存泄漏，但不中断导航流程\n          setTimeout(() => {\n            cleanupQuillEditor();\n          }, 100);\n          \n          // 使用路由导航代替硬刷新\n          router.push(path);\n        } catch (e) {\n          console.error('导航处理错误:', e);\n          // 如果发生错误，尝试使用硬刷新作为后备方案\n          window.location.href = path;\n        }\n      } else if (path === '/smartdoc' && !route.path.startsWith('/smartdoc')) {\n        // 从其他页面点击智能文档菜单，使用常规导航\n        router.push(path);\n      } else {\n        // 其他情况使用常规导航\n        router.push(path);\n      }\n    }\n    \n    // 清理Quill编辑器，避免内存泄漏\n    const cleanupQuillEditor = () => {\n      try {\n        // 移除编辑器相关DOM元素\n        const quillElements = document.querySelectorAll('.ql-container, .ql-toolbar, .ql-editor');\n        quillElements.forEach(el => {\n          if (el && el.parentNode) {\n            // 创建克隆以移除事件监听器\n            const clone = el.cloneNode(false);\n            if (el.parentNode) {\n              el.parentNode.replaceChild(clone, el);\n            }\n          }\n        });\n      } catch (error) {\n        console.error('清理编辑器资源失败:', error);\n      }\n    }\n    \n    // 监视路由变化，确保导航菜单正常工作\n    watch(() => route.path, () => {\n      // 记录上一个路径\n      lastPath.value = route.path;\n      \n      // 在路由变化时确保导航菜单可点击\n      setTimeout(() => {\n        document.querySelectorAll('.el-menu-item, .el-submenu').forEach(el => {\n          el.style.pointerEvents = 'auto';\n        });\n      }, 50);\n    });\n\n    // 将Bootstrap图标类名转换为Element Plus图标组件\n    const iconComponent = (icon) => {\n      // 如果是bootstrap图标类，转换为Element Plus图标\n      if (icon && icon.includes('bi-')) {\n        // 移除bi-前缀\n        const iconName = icon.replace('bi-', '');\n        \n        // 图标映射表 - Bootstrap图标到Element Plus图标的映射\n        const iconMap = {\n          'grid-1x2': 'Menu',\n          'calendar-week': 'Calendar',\n          'book': 'Collection',\n          'chat-dots': 'ChatDotRound',\n          'camera-video': 'VideoCamera',\n          'file-earmark-text': 'Document',\n          'file-earmark-ruled': 'Tickets',\n          'envelope': 'Message',\n          'check2-square': 'CheckboxButton',\n          'box-seam': 'Box',\n          'person-lines-fill': 'User',\n          'kanban': 'Opportunity',\n          'list-check': 'Finished',\n          'people': 'UserFilled',\n          'building': 'OfficeBuilding',\n          'gear': 'Setting',\n          'house': 'HomeFilled',\n          'grid': 'Grid',\n          'person': 'User'\n        };\n        \n        // 如果在映射表中找到对应的图标，则返回它，否则返回默认图标\n        return iconMap[iconName] || 'Document';\n      }\n      \n      // 如果不是bi-前缀，则原样返回\n      return icon || 'Document';\n    }\n\n    return {\n      sidebarOpened,\n      routes,\n      activeMenu,\n      iconComponent,\n      handleMenuClick,\n      menuBackgroundColor,\n      menuTextColor,\n      menuActiveTextColor\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.sidebar {\n  width: 160px;\n  height: 100%;\n  background-color: var(--bg-color);\n  border-right: 1px solid var(--border-color);\n  box-shadow: 0 0 10px var(--shadow-color);\n  z-index: 1000;\n  transition: width 0.3s;\n}\n\n.sidebar.is-collapsed {\n  width: 64px;\n}\n\n.sidebar-header {\n  padding: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-bottom: 1px solid var(--border-color);\n  height: 60px;\n  background-color: var(--bg-color);\n}\n\n.sidebar-header img {\n  width: 24px;\n  height: 24px;\n}\n\n.sidebar-header h5 {\n  margin: 0 0 0 12px;\n  font-size: 16px;\n  font-weight: 600;\n  color: var(--text-color);\n  white-space: nowrap;\n}\n\n.sidebar-menu-container {\n  height: calc(100% - 60px);\n}\n\n.el-menu {\n  border-right: none;\n}\n\n.el-menu-item {\n  height: 50px;\n  line-height: 50px;\n  position: relative;\n  overflow: hidden;\n  \n  /* 添加过渡效果 */\n  transition: background-color 0.25s ease, color 0.25s ease;\n  \n  /* 添加悬停效果 */\n  &:hover {\n    background-color: var(--hover-color) !important;\n  }\n  \n  /* 增强激活状态的样式 */\n  &.is-active {\n    background-color: rgba(var(--primary-color-rgb, 59, 130, 246), 0.1) !important;\n    color: var(--primary-color) !important;\n    font-weight: 500;\n    \n    /* 添加左侧指示条 */\n    &::before {\n      content: '';\n      position: absolute;\n      left: 0;\n      top: 0;\n      height: 100%;\n      width: 4px;\n      background-color: var(--primary-color);\n    }\n  }\n  \n  /* 点击反馈效果 */\n  &:active {\n    background-color: var(--active-color) !important;\n    transform: scale(0.98);\n    transition: transform 0.1s;\n  }\n}\n\n.el-menu-item .el-icon {\n  margin-right: 10px;\n  width: 24px;\n  text-align: center;\n  font-size: 18px;\n}\n</style> ","import { render } from \"./Sidebar.vue?vue&type=template&id=430612da&scoped=true\"\nimport script from \"./Sidebar.vue?vue&type=script&lang=js\"\nexport * from \"./Sidebar.vue?vue&type=script&lang=js\"\n\nimport \"./Sidebar.vue?vue&type=style&index=0&id=430612da&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\18083\\\\Desktop\\\\CCIT\\\\office\\\\smart-office\\\\frontend\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-430612da\"]])\n\nexport default __exports__","<template>\n  <div class=\"navbar\">\n    <!-- 左侧菜单按钮 -->\n    <div class=\"hamburger-container\" @click=\"toggleSidebar\">\n      <el-icon size=\"20\">\n        <Menu />\n      </el-icon>\n    </div>\n\n    <!-- 面包屑导航 -->\n    <div class=\"breadcrumb-container\">\n      <el-breadcrumb separator=\"/\">\n        <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\n        <el-breadcrumb-item>{{ currentRoute }}</el-breadcrumb-item>\n      </el-breadcrumb>\n    </div>\n\n    <!-- 右侧菜单 -->\n    <div class=\"right-menu\">\n      <!-- 全局搜索 -->\n      <div class=\"search-container\">\n        <global-search ref=\"globalSearchRef\" />\n      </div>\n\n      <!-- 通知菜单 -->\n      <el-dropdown class=\"notification-container\" trigger=\"click\" :teleported=\"true\" @visible-change=\"handleDropdownChange\">\n        <div class=\"notification-icon-container\">\n          <el-badge :value=\"reminders.length\" class=\"item\" :hidden=\"reminders.length === 0\">\n            <el-icon size=\"18\"><Bell /></el-icon>\n          </el-badge>\n        </div>\n        <template #dropdown>\n          <el-dropdown-menu style=\"min-width:260px;max-width:350px;\">\n            <el-dropdown-item v-if=\"reminders.length === 0\">\n              <span style=\"color:#888;\">暂无日程提醒</span>\n            </el-dropdown-item>\n            <el-dropdown-item v-for=\"item in reminders\" :key=\"item.recommendation_id || item.event_id\" style=\"white-space:normal;line-height:1.5;position:relative;padding-right:32px;\">\n              <div style=\"flex:1;\">\n                <b>{{ item.title }}</b>\n                <div style=\"font-size:12px;color:#888;\">提醒时间：{{ formatReminderTime(item.reminder) }}</div>\n                <div style=\"margin-top:2px;\">{{ item.ai_content }}</div>\n              </div>\n              <el-tooltip content=\"标记为已读\" placement=\"left\">\n                <el-icon\n                  class=\"read-icon\"\n                  style=\"position:absolute;top:12px;right:8px;cursor:pointer;\"\n                  @click=\"markAsRead(item)\"\n                >\n                  <Check />\n                </el-icon>\n              </el-tooltip>\n            </el-dropdown-item>\n          </el-dropdown-menu>\n        </template>\n      </el-dropdown>\n\n      <!-- 用户头像菜单 -->\n      <el-dropdown class=\"avatar-container\" trigger=\"click\" :teleported=\"true\" @visible-change=\"handleDropdownChange\">\n        <div class=\"avatar-wrapper\">\n          <img :src=\"userAvatar\" class=\"user-avatar\">\n          <span v-if=\"username\" class=\"username\">{{ username }}</span>\n          <el-icon><ArrowDown /></el-icon>\n        </div>\n        <template #dropdown>\n          <el-dropdown-menu>\n            <el-dropdown-item>\n              <router-link to=\"/profile\" class=\"dropdown-link\">\n                <el-icon><User /></el-icon> 个人中心\n              </router-link>\n            </el-dropdown-item>\n            <el-dropdown-item>\n              <span @click=\"(e) => openSettings(e)\" style=\"display: block;\">\n                <el-icon><Setting /></el-icon> 系统设置\n              </span>\n            </el-dropdown-item>\n            <el-dropdown-item divided>\n              <span @click=\"logout\" style=\"display: block;\">\n                <el-icon><SwitchButton /></el-icon> 退出登录\n              </span>\n            </el-dropdown-item>\n          </el-dropdown-menu>\n        </template>\n      </el-dropdown>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { computed, ref, inject, onMounted, onUnmounted, watch } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRoute, useRouter } from 'vue-router'\nimport { ElMessage } from 'element-plus'\nimport { \n  Menu, \n  Bell, \n  User, \n  Setting, \n  SwitchButton, \n  ArrowDown,\n  Check\n} from '@element-plus/icons-vue'\nimport { getMonthlyEvents } from '@/api/calendar'\nimport { getScheduleReminders, markScheduleReminderAsRead } from '@/api/ai' // 导入AI API及已读接口\nimport GlobalSearch from '@/components/GlobalSearch.vue' // 导入全局搜索组件\n\nexport default {\n  name: 'Navbar',\n  components: {\n    GlobalSearch, // 注册全局搜索组件\n    Menu, \n    Bell, \n    User, \n    Setting, \n    SwitchButton, \n    ArrowDown,\n    Check\n  },\n  setup() {\n    const store = useStore()\n    const route = useRoute()\n    const router = useRouter()\n\n    const searchInput = ref('')\n    const globalSearchRef = ref(null)\n    \n    // 从Vuex获取侧边栏状态\n    const isActive = computed(() => store.getters.sidebar.opened)\n    \n    // 从Vuex获取用户信息和未读消息\n    const userAvatar = computed(() => {\n      const avatar = store.getters.user && store.getters.user.avatar;\n      if (!avatar) {\n        return '/img/default-avatar.svg'; // 更新默认头像路径\n      }\n      // 检查是否是完整URL\n      if (avatar.startsWith('http://') || avatar.startsWith('https://')) {\n        return avatar;\n      }\n      // 添加服务器地址前缀，确保不会重复添加前缀\n      if (avatar.startsWith('/')) {\n        return `http://localhost:8000${avatar}`;\n      } else {\n        return `http://localhost:8000/${avatar}`;\n      }\n    });\n    const username = computed(() => {\n      // 从store中获取用户信息\n      const user = store.getters.user;\n      // 优先获取name，如果没有则尝试获取username\n      if (user) {\n        return user.name || user.username || '';\n      }\n      return '';\n    });\n    const reminders = ref([])\n    \n    // 获取AI日程提醒\n    const fetchReminders = async () => {\n      try {\n        const response = await getScheduleReminders()\n        if (response && response.data) {\n          let data = []\n          if (Array.isArray(response.data)) {\n            data = response.data\n          } else if (response.data.data && Array.isArray(response.data.data)) {\n            data = response.data.data\n          } else if (response.success && Array.isArray(response.data)) {\n            data = response.data\n          }\n          // 只保留未读提醒\n          reminders.value = data.filter(r => r.is_read === false || r.is_read === undefined)\n        } else {\n          reminders.value = []\n        }\n      } catch (e) {\n        reminders.value = []\n      }\n    }\n\n    // 记录已提醒的eventId+提醒时间，避免重复请求\n    const remindedSet = ref(new Set())\n    // 定时检测日程提醒\n    let reminderTimer = null\n    const checkReminders = async () => {\n      const now = new Date()\n      const year = now.getFullYear()\n      const month = now.getMonth() + 1\n      try {\n        // 获取本月所有日程\n        const res = await getMonthlyEvents(year, month)\n        const events = (res.data || []).filter(e => e.reminder && e.reminder !== 'none')\n        for (const event of events) {\n          let remindTime = null\n          const start = new Date(event.start)\n          switch (event.reminder) {\n            case '10min': remindTime = new Date(start.getTime() - 10 * 60 * 1000); break\n            case '30min': remindTime = new Date(start.getTime() - 30 * 60 * 1000); break\n            case '1hour': remindTime = new Date(start.getTime() - 60 * 60 * 1000); break\n            case '1day': remindTime = new Date(start.getTime() - 24 * 60 * 60 * 1000); break\n            default: remindTime = null\n          }\n          if (remindTime) {\n            const key = `${event.id}_${remindTime.toISOString().slice(0,16)}`\n            // 到达提醒点且未提醒过（允许1分钟误差）\n            if (Math.abs(now - remindTime) < 60 * 1000 && !remindedSet.value.has(key)) {\n              console.log('触发AI提醒检测，事件ID:', event.id, '提醒时间:', remindTime)\n              await fetchReminders()\n              remindedSet.value.add(key)\n            }\n          }\n        }\n      } catch (e) { console.warn('日程检测异常', e) }\n    }\n    onMounted(() => {\n      fetchReminders()\n      reminderTimer = setInterval(checkReminders, 60 * 1000)\n    })\n    // 页面卸载时清理定时器\n    onUnmounted(() => { if (reminderTimer) clearInterval(reminderTimer) })\n\n    // 获取当前路由标题\n    const currentRoute = computed(() => {\n      return route.meta.title || '工作台'\n    })\n\n    // 切换侧边栏\n    const toggleSidebar = () => {\n      store.dispatch('toggleSidebar')\n    }\n\n    // 退出登录\n    const logout = async () => {\n      try {\n        await store.dispatch('user/logout')\n        // 成功退出后，明确重置loading状态\n        store.commit('user/AUTH_REQUEST', false)\n        ElMessage.success('退出登录成功')\n        router.push('/login')\n      } catch (error) {\n        ElMessage.error('退出登录失败，请重试')\n        console.error('登出失败:', error)\n        // 失败时也确保重置loading状态\n        store.commit('user/AUTH_REQUEST', false)\n      }\n    }\n    \n    // 处理下拉菜单变化，防止事件冒泡\n    const handleDropdownChange = (visible) => {\n      if (visible) {\n        // 阻止可能的事件冒泡\n        setTimeout(() => {\n          fetchReminders()\n        }, 0)\n      }\n    }\n\n    // 格式化提醒时间\n    const formatReminderTime = (reminder) => {\n      const reminderMap = {\n        '10min': '10分钟前',\n        '30min': '30分钟前',\n        '1hour': '1小时前',\n        '1day': '1天前',\n        'none': '不提醒'\n      }\n      return reminderMap[reminder] || reminder\n    }\n\n    // 打开系统设置\n    const openSettings = (event) => {\n      // 阻止事件冒泡，避免点击事件传播导致设置框立即关闭\n      if (event) {\n        event.preventDefault();\n        event.stopPropagation();\n      }\n      \n      // 使用store的action来打开设置\n      store.dispatch('openSettings');\n    }\n\n    // 从父组件获取设置对话框可见状态\n    const settingsVisible = inject('settingsVisible', computed({\n      get: () => store.state.settingsVisible || false,\n      set: (value) => store.commit('SET_SETTINGS_VISIBLE', value)\n    }));\n\n    // 标记提醒为已读并隐藏\n    const markAsRead = async (item) => {\n      if (!item.recommendation_id) return\n      try {\n        await markScheduleReminderAsRead(item.recommendation_id)\n        // 隐藏该提醒\n        reminders.value = reminders.value.filter(r => r.recommendation_id !== item.recommendation_id)\n      } catch (e) {\n        ElMessage.error('标记已读失败')\n      }\n    }\n\n    // 监听路由变化，刷新导航栏状态\n    watch(() => route.path, (newPath, oldPath) => {\n      if (newPath !== oldPath) {\n        // 重新获取日程提醒\n        fetchReminders();\n        \n        // 清空全局搜索组件状态\n        if (globalSearchRef.value && typeof globalSearchRef.value.clearSearch === 'function') {\n          globalSearchRef.value.clearSearch();\n        }\n      }\n    });\n\n    return {\n      // 图标组件\n      Menu,\n      Bell,\n      User,\n      Setting,\n      SwitchButton,\n      ArrowDown,\n      Check,\n      // 其他数据\n      searchInput,\n      globalSearchRef,\n      isActive,\n      userAvatar,\n      username,\n      currentRoute,\n      toggleSidebar,\n      logout,\n      handleDropdownChange,\n      openSettings,\n      settingsVisible,\n      reminders,\n      markAsRead,\n      formatReminderTime\n    }\n  }\n}\n</script>\n\n<style scoped>\n.navbar {\n  height: 60px;\n  background-color: var(--bg-color);\n  box-shadow: 0 1px 4px var(--shadow-color);\n  padding: 0 20px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  z-index: 20000; /* 提高z-index确保不被其他元素覆盖 */\n  width: 100%;\n}\n\n.hamburger-container {\n  cursor: pointer;\n  font-size: 20px;\n  line-height: 60px;\n  padding: 0 15px;\n  transition: color 0.3s;\n  \n  &:hover {\n    color: var(--primary-color);\n  }\n  \n  &:active {\n    transform: scale(0.95);\n  }\n}\n\n.breadcrumb-container {\n  margin-left: 15px;\n  flex: 1;\n}\n\n.right-menu {\n  display: flex;\n  align-items: center;\n}\n\n.search-container {\n  margin-right: 20px;\n}\n\n.search-input {\n  width: 210px;\n  margin-left: 10px;\n  transition: width 0.3s;\n}\n\n.search-input:focus {\n  width: 240px;\n}\n\n.notification-container, \n.avatar-container {\n  margin-left: 15px;\n  cursor: pointer;\n  position: relative;\n  z-index: 20001; /* 确保下拉菜单按钮高于其他元素 */\n  \n  /* 添加悬停效果 */\n  &:hover {\n    color: var(--primary-color);\n  }\n  \n  /* 添加点击效果 */\n  &:active {\n    transform: scale(0.95);\n  }\n}\n\n.notification-icon-container {\n  font-size: 18px;\n  padding: 5px;\n  border-radius: 50%;\n  transition: background-color 0.3s, color 0.3s, transform 0.2s;\n  min-width: 30px; /* 确保点击区域足够大 */\n  min-height: 30px; /* 确保点击区域足够大 */\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  \n  /* 悬停时显示背景 */\n  &:hover {\n    background-color: var(--hover-color);\n  }\n}\n\n.avatar-wrapper {\n  display: flex;\n  align-items: center;\n  padding: 2px 8px;\n  border-radius: 20px;\n  transition: background-color 0.3s, transform 0.2s;\n  min-height: 40px; /* 确保点击区域足够大 */\n  \n  /* 悬停时显示背景 */\n  &:hover {\n    background-color: var(--hover-color);\n  }\n}\n\n.user-avatar {\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  margin-right: 8px;\n}\n\n.username {\n  font-size: 14px;\n  color: var(--text-color);\n  margin-right: 5px;\n}\n\n.dropdown-link {\n  display: block;\n  width: 100%;\n  height: 100%;\n  text-decoration: none;\n  color: inherit;\n}\n\na {\n  text-decoration: none;\n  color: inherit;\n}\n\n/* 修复下拉菜单项样式 */\n:deep(.el-dropdown-menu) {\n  z-index: 20002 !important; /* 确保下拉菜单显示在最上层 */\n}\n\n:deep(.el-dropdown-menu__item) {\n  line-height: 30px;\n  padding: 6px 16px;\n  pointer-events: auto !important; /* 确保点击事件能够被捕获 */\n  \n  &:hover {\n    background-color: var(--hover-color);\n    color: var(--primary-color);\n  }\n  \n  &:active {\n    background-color: var(--active-color);\n  }\n  \n  .el-icon {\n    margin-right: 8px;\n    font-size: 16px;\n    vertical-align: middle;\n  }\n}\n\n.read-icon {\n  color: #52c41a;\n  font-size: 20px;\n  border-radius: 50%;\n  transition: box-shadow 0.2s, background 0.2s, transform 0.1s;\n}\n.read-icon:hover {\n  background: #e6f7ec;\n  box-shadow: 0 2px 8px rgba(82,196,26,0.15);\n  color: #389e0d;\n  transform: scale(1.15);\n}\n.read-icon:active {\n  background: #b7eb8f;\n  transform: scale(0.95);\n}\n</style> ","<template>\n  <div class=\"global-search-container\">\n    <el-select\n      v-model=\"currentQuery\"\n      filterable\n      remote\n      reserve-keyword\n      placeholder=\"在所有应用中搜索...\"\n      :remote-method=\"search\"\n      :loading=\"loading\"\n      @change=\"handleSelect\"\n      @clear=\"clearSearch\"\n      clearable\n      class=\"global-search-input\"\n      popper-class=\"global-search-popper\"\n      size=\"large\"\n    >\n      <el-option-group\n        v-for=\"group in searchResults\"\n        :key=\"group.type\"\n        :label=\"group.type\"\n      >\n        <el-option\n          v-for=\"item in group.items\"\n          :key=\"item.id + item.type\"\n          :label=\"item.title\"\n          :value=\"item\"\n        >\n          <div class=\"search-result-item\">\n            <div class=\"item-icon\">\n              <i :class=\"getIconForType(item.type)\"></i>\n            </div>\n            <div class=\"item-content\">\n              <span class=\"title\">{{ item.title }}</span>\n              <span class=\"summary\">{{ item.summary }}</span>\n            </div>\n          </div>\n        </el-option>\n      </el-option-group>\n      <template #empty>\n        <div class=\"search-empty-state\">\n          <i v-if=\"loading\" class=\"el-icon is-loading\"><el-icon-loading /></i>\n          <span v-else-if=\"currentQuery && currentQuery.trim().length > 0 && currentQuery.trim().length < 2\">请输入至少两个字符进行搜索</span>\n          <span v-else>无匹配结果</span>\n        </div>\n      </template>\n    </el-select>\n  </div>\n</template>\n\n<script>\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { globalSearch } from '@/api/search'; // 需要在api中创建此方法\nimport { findOrCreateChat } from '@/api/chat';\nimport { debounce } from 'lodash';\nimport {\n  Loading as ElIconLoading\n} from '@element-plus/icons-vue'\n\nexport default {\n  name: 'GlobalSearch',\n  components: {\n    ElIconLoading\n  },\n  setup(props, { expose }) {\n    const router = useRouter();\n    const selectedValue = ref(''); // 保留用于跟踪最终选择的值，但不再是 v-model\n    const currentQuery = ref(''); // 现在是 v-model，跟踪输入框的实时文本\n    const searchResults = ref([]);\n    const loading = ref(false);\n    const searchCounter = ref(0); // 用于处理竞态条件的计数器\n\n    const getIconForType = (type) => {\n      const iconMap = {\n        '项目': 'bi bi-kanban',\n        '任务': 'bi bi-check2-square',\n        '日程': 'bi bi-calendar-week',\n        '智能文档': 'bi bi-file-earmark-text',\n        '合同': 'bi bi-file-earmark-ruled',\n        '知识库': 'bi bi-book',\n        '聊天记录': 'bi bi-chat-dots',\n        '联系人': 'bi bi-person-lines-fill'\n      };\n      return iconMap[type] || 'bi bi-app';\n    };\n\n    // 封装一个清晰的清除状态的函数\n    const clearSearchState = () => {\n      selectedValue.value = '';\n      currentQuery.value = ''; // 清除输入框文本\n      searchResults.value = [];\n      loading.value = false;\n    };\n\n    const search = debounce(async (query) => {\n      // currentQuery.value = query; // 不再需要，因为 v-model 会自动更新\n      searchCounter.value++; // 为每个新搜索增加计数器\n      const localCounter = searchCounter.value;\n\n      if (query && query.trim().length >= 2) {\n        loading.value = true;\n        try {\n          const { data } = await globalSearch(query);\n          // 仅当这是最新的搜索时才更新结果\n          if (localCounter === searchCounter.value) {\n            const grouped = data.reduce((acc, item) => {\n              if (!acc[item.type]) {\n                acc[item.type] = { type: item.type, items: [] };\n              }\n              acc[item.type].items.push(item);\n              return acc;\n            }, {});\n            searchResults.value = Object.values(grouped);\n          }\n        } catch (error) {\n          // 仅为最新的搜索报告错误\n          if (localCounter === searchCounter.value) {\n            console.error('Global search failed:', error);\n            searchResults.value = [];\n          }\n        } finally {\n          // 仅为最新的搜索更新加载状态\n          if (localCounter === searchCounter.value) {\n            loading.value = false;\n          }\n        }\n      } else {\n        searchResults.value = [];\n        loading.value = false; // 如果输入无效，确保停止加载\n      }\n    }, 300);\n\n    const handleSelect = async (url) => {\n      // The 'url' is now the full item object because we bind :value=\"item\"\n      const item = url; \n      if (!item || !item.type) return;\n\n      if (item.type === '联系人') {\n        try {\n          const { data } = await findOrCreateChat(item.id);\n          if (data && data.chat_id) {\n            router.push(`/chat?session=${data.chat_id}`);\n          }\n        } catch (error) {\n          console.error('Failed to find or create chat:', error);\n          // Optionally show an error message to the user\n        }\n      } else {\n        // Default behavior for all other types\n        if(item.url) {\n          router.push(item.url);\n        }\n      }\n      \n      searchCounter.value++;\n      setTimeout(() => {\n        clearSearchState();\n      }, 0);\n    };\n\n    // 从外部或通过 clearable 按钮调用的清除方法\n    const clearSearch = () => {\n      searchCounter.value++; // 使所有待处理的请求无效\n      clearSearchState();\n    };\n\n    expose({\n      clearSearch\n    });\n\n    return {\n      selectedValue,\n      currentQuery,\n      searchResults,\n      loading,\n      search,\n      handleSelect,\n      clearSearch, // 暴露给模板\n      getIconForType,\n    };\n  },\n};\n</script>\n\n<style>\n/* 将 popper 的样式提升为全局，以便应用 */\n.global-search-popper {\n  width: 400px !important; /* 固定宽度，与输入框一致 */\n}\n\n.global-search-popper .el-select-group__title {\n  padding-left: 15px;\n  font-size: 1rem;\n  font-weight: 600;\n  color: var(--el-text-color-primary);\n  border-bottom: 1px solid var(--el-border-color-lighter);\n  margin-bottom: 5px;\n}\n\n.global-search-popper .el-select-dropdown__item {\n  height: auto;\n  padding: 8px 15px;\n  line-height: 1.4;\n  white-space: normal;\n  word-break: break-all;\n}\n</style>\n\n<style scoped>\n.global-search-container {\n  width: 400px;\n}\n.global-search-input {\n  width: 100%;\n}\n.search-result-item {\n  display: flex;\n  align-items: center;\n}\n.item-icon {\n  font-size: 1.5rem;\n  margin-right: 15px;\n  color: var(--el-color-primary);\n  flex-shrink: 0;\n}\n.item-content {\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n.title {\n  font-weight: 500;\n  color: var(--el-text-color-regular);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.summary {\n  font-size: 0.85rem;\n  color: var(--el-text-color-secondary);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.search-empty-state {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n  text-align: center;\n  color: #999;\n}\n.search-empty-state .el-icon {\n  margin-right: 8px;\n}\n</style> ","import request from '@/utils/request'\r\n\r\nexport function globalSearch(query) {\r\n  return request({\r\n    url: '/api/search/global/',\r\n    method: 'get',\r\n    params: { q: query }\r\n  })\r\n} ","import { render } from \"./GlobalSearch.vue?vue&type=template&id=167b7d2b&scoped=true\"\nimport script from \"./GlobalSearch.vue?vue&type=script&lang=js\"\nexport * from \"./GlobalSearch.vue?vue&type=script&lang=js\"\n\nimport \"./GlobalSearch.vue?vue&type=style&index=0&id=167b7d2b&lang=css\"\nimport \"./GlobalSearch.vue?vue&type=style&index=1&id=167b7d2b&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\18083\\\\Desktop\\\\CCIT\\\\office\\\\smart-office\\\\frontend\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-167b7d2b\"]])\n\nexport default __exports__","import { render } from \"./Navbar.vue?vue&type=template&id=4f7feae3&scoped=true\"\nimport script from \"./Navbar.vue?vue&type=script&lang=js\"\nexport * from \"./Navbar.vue?vue&type=script&lang=js\"\n\nimport \"./Navbar.vue?vue&type=style&index=0&id=4f7feae3&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\18083\\\\Desktop\\\\CCIT\\\\office\\\\smart-office\\\\frontend\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4f7feae3\"]])\n\nexport default __exports__","import { render } from \"./Index.vue?vue&type=template&id=078e0e16&scoped=true\"\nimport script from \"./Index.vue?vue&type=script&lang=js\"\nexport * from \"./Index.vue?vue&type=script&lang=js\"\n\nimport \"./Index.vue?vue&type=style&index=0&id=078e0e16&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\18083\\\\Desktop\\\\CCIT\\\\office\\\\smart-office\\\\frontend\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-078e0e16\"]])\n\nexport default __exports__","'use strict';\nvar $ = require('../internals/export');\nvar symmetricDifference = require('../internals/set-symmetric-difference');\nvar setMethodAcceptSetLike = require('../internals/set-method-accept-set-like');\n\n// `Set.prototype.symmetricDifference` method\n// https://tc39.es/ecma262/#sec-set.prototype.symmetricdifference\n$({ target: 'Set', proto: true, real: true, forced: !setMethodAcceptSetLike('symmetricDifference') }, {\n  symmetricDifference: symmetricDifference\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar difference = require('../internals/set-difference');\nvar setMethodAcceptSetLike = require('../internals/set-method-accept-set-like');\n\nvar INCORRECT = !setMethodAcceptSetLike('difference', function (result) {\n  return result.size === 0;\n});\n\n// `Set.prototype.difference` method\n// https://tc39.es/ecma262/#sec-set.prototype.difference\n$({ target: 'Set', proto: true, real: true, forced: INCORRECT }, {\n  difference: difference\n});\n","import request from '@/utils/request'\n\n/**\n * 获取月度日历事件\n * @param {Number} year - 年份\n * @param {Number} month - 月份(1-12)\n * @returns {Promise} - 返回月度事件列表\n */\nexport function getMonthlyEvents(year, month) {\n  return request({\n    url: '/api/calendar/events/monthly/',\n    method: 'get',\n    params: { year, month }\n  })\n}\n\n/**\n * 获取周视图日历事件\n * @param {String} date - 日期字符串，格式为YYYY-MM-DD\n * @returns {Promise} - 返回周视图事件列表\n */\nexport function getWeeklyEvents(date) {\n  return request({\n    url: '/api/calendar/events/weekly/',\n    method: 'get',\n    params: { date }\n  })\n}\n\n/**\n * 获取日视图日历事件\n * @param {String} date - 日期字符串，格式为YYYY-MM-DD\n * @returns {Promise} - 返回日视图事件列表\n */\nexport function getDailyEvents(date) {\n  return request({\n    url: '/api/calendar/events/daily/',\n    method: 'get',\n    params: { date }\n  })\n}\n\n/**\n * 创建日历事件\n * @param {Object} data - 事件数据\n * @returns {Promise} - 返回创建的事件\n */\nexport function createEvent(data) {\n  const { title, start, end, location, description, type, reminder, participants } = data\n  \n  return request({\n    url: '/api/calendar/events/',\n    method: 'post',\n    data: { title, start, end, location, description, type, reminder, participants }\n  })\n}\n\n/**\n * 更新日历事件\n * @param {Number} id - 事件ID\n * @param {Object} data - 事件数据\n * @returns {Promise} - 返回更新后的事件\n */\nexport function updateEvent(id, data) {\n  const { title, start, end, location, description, type, reminder, participants } = data\n  \n  return request({\n    url: `/api/calendar/events/${id}/`,\n    method: 'put',\n    data: { title, start, end, location, description, type, reminder, participants }\n  })\n}\n\n/**\n * 删除日历事件\n * @param {number} id - 事件ID\n * @returns {Promise}\n */\nexport function deleteCalendarEvent(id) {\n  return request({\n    url: `/api/calendar/events/${id}/`,\n    method: 'delete'\n  })\n}\n\n/**\n * 获取日历事件详情\n * @param {number} id - 事件ID\n * @returns {Promise}\n */\nexport function getCalendarEvent(id) {\n    return request({\n        url: `/api/calendar/events/${id}/`,\n        method: 'get'\n    })\n} ","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar iterateSimple = require('../internals/iterate-simple');\nvar SetHelpers = require('../internals/set-helpers');\n\nvar Set = SetHelpers.Set;\nvar SetPrototype = SetHelpers.proto;\nvar forEach = uncurryThis(SetPrototype.forEach);\nvar keys = uncurryThis(SetPrototype.keys);\nvar next = keys(new Set()).next;\n\nmodule.exports = function (set, fn, interruptible) {\n  return interruptible ? iterateSimple({ iterator: keys(set), next: next }, fn) : forEach(set, fn);\n};\n","'use strict';\nvar aSet = require('../internals/a-set');\nvar has = require('../internals/set-helpers').has;\nvar size = require('../internals/set-size');\nvar getSetRecord = require('../internals/get-set-record');\nvar iterateSimple = require('../internals/iterate-simple');\nvar iteratorClose = require('../internals/iterator-close');\n\n// `Set.prototype.isSupersetOf` method\n// https://tc39.github.io/proposal-set-methods/#Set.prototype.isSupersetOf\nmodule.exports = function isSupersetOf(other) {\n  var O = aSet(this);\n  var otherRec = getSetRecord(other);\n  if (size(O) < otherRec.size) return false;\n  var iterator = otherRec.getIterator();\n  return iterateSimple(iterator, function (e) {\n    if (!has(O, e)) return iteratorClose(iterator, 'normal', false);\n  }) !== false;\n};\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./GlobalSearch.vue?vue&type=style&index=0&id=167b7d2b&lang=css\"","import request from '@/utils/request'\n\n/**\n * 获取AI日程提醒\n * @returns {Promise} 返回AI日程提醒列表\n */\nexport function getScheduleReminders() {\n  return request({\n    url: '/api/ai/schedule-reminder/',\n    method: 'get'\n  })\n}\n\n/**\n * 调用AI聊天\n * @param {Object} data - 聊天数据\n * @returns {Promise} 返回AI回复\n */\nexport function aiChat(data) {\n  return request({\n    url: '/api/ai/chat/',\n    method: 'post',\n    data\n  })\n}\n\n/**\n * 生成AI内容\n * @param {Object} data - 生成请求数据\n * @returns {Promise} 返回生成的内容\n */\nexport function generateContent(data) {\n  return request({\n    url: '/api/ai/generate/',\n    method: 'post',\n    data\n  })\n}\n\n/**\n * 标记AI日程提醒为已读\n * @param {number} id - 提醒ID\n * @returns {Promise}\n */\nexport function markScheduleReminderAsRead(id) {\n  return request({\n    url: `/api/ai/recommendations/${id}/mark_as_read/`,\n    method: 'post'\n  })\n}\n\n/**\n * 文档增强AI对话\n * @param {Object} data - { message, chat_id, document_ids }\n * @returns {Promise}\n */\nexport function aiChatWithDocuments(data) {\n  return request({\n    url: '/api/ai/chat-with-documents/',\n    method: 'post',\n    data,\n    responseType: 'text'\n  })\n}\n\n/**\n * 流式文档增强AI对话\n * @param {Object} data - { message, chat_id, document_ids }\n * @param {Function} onChunk - 处理每个数据块的回调函数\n * @param {Function} onComplete - 处理完成时的回调函数\n * @param {Function} onError - 处理错误的回调函数\n * @returns {AbortController} 返回可用于取消请求的控制器\n */\nexport function aiChatWithDocumentsStream(data, onChunk, onComplete, onError) {\n  // 创建AbortController，用于在需要时取消请求\n  const controller = new AbortController();\n  const signal = controller.signal;\n  \n  // 获取Token\n  const token = localStorage.getItem('token');\n  \n  // 构建请求头\n  const headers = {\n    'Content-Type': 'application/json',\n  };\n  \n  if (token) {\n    headers['Authorization'] = `Bearer ${token}`;\n  }\n  \n  // 使用fetch API发起请求\n  fetch('http://localhost:8000/api/ai/chat-with-documents/', {\n    method: 'POST',\n    headers: headers,\n    body: JSON.stringify(data),\n    signal: signal\n  })\n  .then(async response => {\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({ message: '服务返回了错误状态，且响应体不是有效的JSON。' }));\n      throw new Error(errorData.message || `HTTP error! Status: ${response.status}`);\n    }\n\n    const reader = response.body.getReader();\n    const decoder = new TextDecoder(\"utf-8\");\n    let buffer = \"\";\n    let lastChatId = null;\n\n    const processStream = async () => {\n      // eslint-disable-next-line no-constant-condition\n      while (true) {\n        const { done, value } = await reader.read();\n        if (done) {\n          if (buffer) {\n            console.error(\"Stream finished but buffer is not empty:\", buffer);\n          }\n          onComplete && onComplete(lastChatId);\n          break;\n        }\n\n        buffer += decoder.decode(value, { stream: true });\n        const lines = buffer.split('\\n');\n        buffer = lines.pop(); // Keep the last partial line in buffer\n\n        for (const line of lines) {\n          if (line.startsWith(\"data:\")) {\n            const jsonStr = line.substring(5).trim();\n            if (jsonStr === \"[DONE]\") {\n              onComplete && onComplete(lastChatId);\n              return;\n            }\n            try {\n              const parsed = JSON.parse(jsonStr);\n              onChunk && onChunk(parsed, parsed.chat_id);\n\n              // 处理session_id类型的消息，提取chat_id\n              if (parsed.type === 'session_id') {\n                lastChatId = parsed.chat_id;\n              } else if (parsed.chat_id) {\n                lastChatId = parsed.chat_id;\n              }\n            } catch (error) {\n              console.error(\"无法解析JSON流: \", jsonStr, error);\n              onError && onError(new Error(\"无法解析服务器发送的数据\"));\n            }\n          }\n        }\n      }\n    };\n\n    processStream().catch(err => {\n      console.error(\"An error occurred while processing the stream:\", err);\n      onError && onError(err);\n    });\n  })\n  .catch(error => {\n    if (error.name !== 'AbortError') {\n      console.error('Fetch request failed:', error);\n      onError && onError(error);\n    }\n  });\n  \n  // 返回控制器，以便调用者可以取消请求\n  return controller;\n}\n\n/**\n * 获取AI聊天会话列表\n */\nexport function getAIChatSessions() {\n  return request({\n    url: '/api/ai/chats/',\n    method: 'get'\n  })\n}\n\n/**\n * 获取AI聊天会话详情\n * @param {Number} id - 聊天会话ID\n */\nexport function getAIChatSession(id) {\n  return request({\n    url: `/api/ai/chats/${id}/`,\n    method: 'get'\n  })\n}\n\n/**\n * 删除AI聊天会话\n * @param {Number} id - 聊天会话ID\n */\nexport function deleteAIChatSession(id) {\n  return request({\n    url: `/api/ai/chats/${id}/`,\n    method: 'delete'\n  })\n}\n\nexport function getChatHistory(chat_id) {\n  return request({\n    url: `/api/ai/chats/${chat_id}/messages/`,\n    method: 'get'\n  });\n}\n\n/**\n * 与文档进行非流式对话\n * @param {Object} data - { message, chat_id, document_ids, chatMode, search_method }\n */\nexport function chatWithDocuments(data) {\n  return request({\n    url: '/api/ai/chat-with-documents/',\n    method: 'post',\n    data,\n  });\n} ","'use strict';\nvar call = require('../internals/function-call');\n\nmodule.exports = function (record, fn, ITERATOR_INSTEAD_OF_RECORD) {\n  var iterator = ITERATOR_INSTEAD_OF_RECORD ? record : record.iterator;\n  var next = record.next;\n  var step, result;\n  while (!(step = call(next, iterator)).done) {\n    result = fn(step.value);\n    if (result !== undefined) return result;\n  }\n};\n","'use strict';\nvar aSet = require('../internals/a-set');\nvar size = require('../internals/set-size');\nvar iterate = require('../internals/set-iterate');\nvar getSetRecord = require('../internals/get-set-record');\n\n// `Set.prototype.isSubsetOf` method\n// https://tc39.github.io/proposal-set-methods/#Set.prototype.isSubsetOf\nmodule.exports = function isSubsetOf(other) {\n  var O = aSet(this);\n  var otherRec = getSetRecord(other);\n  if (size(O) > otherRec.size) return false;\n  return iterate(O, function (e) {\n    if (!otherRec.includes(e)) return false;\n  }, true) !== false;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar union = require('../internals/set-union');\nvar setMethodAcceptSetLike = require('../internals/set-method-accept-set-like');\n\n// `Set.prototype.union` method\n// https://tc39.es/ecma262/#sec-set.prototype.union\n$({ target: 'Set', proto: true, real: true, forced: !setMethodAcceptSetLike('union') }, {\n  union: union\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar intersection = require('../internals/set-intersection');\nvar setMethodAcceptSetLike = require('../internals/set-method-accept-set-like');\n\nvar INCORRECT = !setMethodAcceptSetLike('intersection', function (result) {\n  return result.size === 2 && result.has(1) && result.has(2);\n}) || fails(function () {\n  // eslint-disable-next-line es/no-array-from, es/no-set, es/no-set-prototype-intersection -- testing\n  return String(Array.from(new Set([1, 2, 3]).intersection(new Set([3, 2])))) !== '3,2';\n});\n\n// `Set.prototype.intersection` method\n// https://tc39.es/ecma262/#sec-set.prototype.intersection\n$({ target: 'Set', proto: true, real: true, forced: INCORRECT }, {\n  intersection: intersection\n});\n","'use strict';\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar call = require('../internals/function-call');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\n\nvar INVALID_SIZE = 'Invalid size';\nvar $RangeError = RangeError;\nvar $TypeError = TypeError;\nvar max = Math.max;\n\nvar SetRecord = function (set, intSize) {\n  this.set = set;\n  this.size = max(intSize, 0);\n  this.has = aCallable(set.has);\n  this.keys = aCallable(set.keys);\n};\n\nSetRecord.prototype = {\n  getIterator: function () {\n    return getIteratorDirect(anObject(call(this.keys, this.set)));\n  },\n  includes: function (it) {\n    return call(this.has, this.set, it);\n  }\n};\n\n// `GetSetRecord` abstract operation\n// https://tc39.es/proposal-set-methods/#sec-getsetrecord\nmodule.exports = function (obj) {\n  anObject(obj);\n  var numSize = +obj.size;\n  // NOTE: If size is undefined, then numSize will be NaN\n  // eslint-disable-next-line no-self-compare -- NaN check\n  if (numSize !== numSize) throw new $TypeError(INVALID_SIZE);\n  var intSize = toIntegerOrInfinity(numSize);\n  if (intSize < 0) throw new $RangeError(INVALID_SIZE);\n  return new SetRecord(obj, intSize);\n};\n","'use strict';\nvar SetHelpers = require('../internals/set-helpers');\nvar iterate = require('../internals/set-iterate');\n\nvar Set = SetHelpers.Set;\nvar add = SetHelpers.add;\n\nmodule.exports = function (set) {\n  var result = new Set();\n  iterate(set, function (it) {\n    add(result, it);\n  });\n  return result;\n};\n","'use strict';\n/* global Bun, Deno -- detection */\nvar globalThis = require('../internals/global-this');\nvar userAgent = require('../internals/environment-user-agent');\nvar classof = require('../internals/classof-raw');\n\nvar userAgentStartsWith = function (string) {\n  return userAgent.slice(0, string.length) === string;\n};\n\nmodule.exports = (function () {\n  if (userAgentStartsWith('Bun/')) return 'BUN';\n  if (userAgentStartsWith('Cloudflare-Workers')) return 'CLOUDFLARE';\n  if (userAgentStartsWith('Deno/')) return 'DENO';\n  if (userAgentStartsWith('Node.js/')) return 'NODE';\n  if (globalThis.Bun && typeof Bun.version == 'string') return 'BUN';\n  if (globalThis.Deno && typeof Deno.version == 'object') return 'DENO';\n  if (classof(globalThis.process) === 'process') return 'NODE';\n  if (globalThis.window && globalThis.document) return 'BROWSER';\n  return 'REST';\n})();\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Navbar.vue?vue&type=style&index=0&id=4f7feae3&scoped=true&lang=css\"","'use strict';\nvar $ = require('../internals/export');\nvar isSubsetOf = require('../internals/set-is-subset-of');\nvar setMethodAcceptSetLike = require('../internals/set-method-accept-set-like');\n\nvar INCORRECT = !setMethodAcceptSetLike('isSubsetOf', function (result) {\n  return result;\n});\n\n// `Set.prototype.isSubsetOf` method\n// https://tc39.es/ecma262/#sec-set.prototype.issubsetof\n$({ target: 'Set', proto: true, real: true, forced: INCORRECT }, {\n  isSubsetOf: isSubsetOf\n});\n","'use strict';\nvar uncurryThisAccessor = require('../internals/function-uncurry-this-accessor');\nvar SetHelpers = require('../internals/set-helpers');\n\nmodule.exports = uncurryThisAccessor(SetHelpers.proto, 'size', 'get') || function (set) {\n  return set.size;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar createIteratorProxy = require('../internals/iterator-create-proxy');\nvar callWithSafeIterationClosing = require('../internals/call-with-safe-iteration-closing');\nvar IS_PURE = require('../internals/is-pure');\nvar iteratorClose = require('../internals/iterator-close');\nvar iteratorHelperWithoutClosingOnEarlyError = require('../internals/iterator-helper-without-closing-on-early-error');\n\nvar filterWithoutClosingOnEarlyError = !IS_PURE && iteratorHelperWithoutClosingOnEarlyError('filter', TypeError);\n\nvar IteratorProxy = createIteratorProxy(function () {\n  var iterator = this.iterator;\n  var predicate = this.predicate;\n  var next = this.next;\n  var result, done, value;\n  while (true) {\n    result = anObject(call(next, iterator));\n    done = this.done = !!result.done;\n    if (done) return;\n    value = result.value;\n    if (callWithSafeIterationClosing(iterator, predicate, [value, this.counter++], true)) return value;\n  }\n});\n\n// `Iterator.prototype.filter` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.filter\n$({ target: 'Iterator', proto: true, real: true, forced: IS_PURE || filterWithoutClosingOnEarlyError }, {\n  filter: function filter(predicate) {\n    anObject(this);\n    try {\n      aCallable(predicate);\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    if (filterWithoutClosingOnEarlyError) return call(filterWithoutClosingOnEarlyError, this, predicate);\n\n    return new IteratorProxy(getIteratorDirect(this), {\n      predicate: predicate\n    });\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar iterate = require('../internals/iterate');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar iteratorClose = require('../internals/iterator-close');\nvar iteratorHelperWithoutClosingOnEarlyError = require('../internals/iterator-helper-without-closing-on-early-error');\nvar apply = require('../internals/function-apply');\nvar fails = require('../internals/fails');\n\nvar $TypeError = TypeError;\n\n// https://bugs.webkit.org/show_bug.cgi?id=291651\nvar FAILS_ON_INITIAL_UNDEFINED = fails(function () {\n  // eslint-disable-next-line es/no-iterator-prototype-reduce, es/no-array-prototype-keys, array-callback-return -- required for testing\n  [].keys().reduce(function () { /* empty */ }, undefined);\n});\n\nvar reduceWithoutClosingOnEarlyError = !FAILS_ON_INITIAL_UNDEFINED && iteratorHelperWithoutClosingOnEarlyError('reduce', $TypeError);\n\n// `Iterator.prototype.reduce` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.reduce\n$({ target: 'Iterator', proto: true, real: true, forced: FAILS_ON_INITIAL_UNDEFINED || reduceWithoutClosingOnEarlyError }, {\n  reduce: function reduce(reducer /* , initialValue */) {\n    anObject(this);\n    try {\n      aCallable(reducer);\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    var noInitial = arguments.length < 2;\n    var accumulator = noInitial ? undefined : arguments[1];\n    if (reduceWithoutClosingOnEarlyError) {\n      return apply(reduceWithoutClosingOnEarlyError, this, noInitial ? [reducer] : [reducer, accumulator]);\n    }\n    var record = getIteratorDirect(this);\n    var counter = 0;\n    iterate(record, function (value) {\n      if (noInitial) {\n        noInitial = false;\n        accumulator = value;\n      } else {\n        accumulator = reducer(accumulator, value, counter);\n      }\n      counter++;\n    }, { IS_RECORD: true });\n    if (noInitial) throw new $TypeError('Reduce of empty iterator with no initial value');\n    return accumulator;\n  }\n});\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Index.vue?vue&type=style&index=0&id=078e0e16&lang=scss&scoped=true\"","'use strict';\nvar aSet = require('../internals/a-set');\nvar SetHelpers = require('../internals/set-helpers');\nvar size = require('../internals/set-size');\nvar getSetRecord = require('../internals/get-set-record');\nvar iterateSet = require('../internals/set-iterate');\nvar iterateSimple = require('../internals/iterate-simple');\n\nvar Set = SetHelpers.Set;\nvar add = SetHelpers.add;\nvar has = SetHelpers.has;\n\n// `Set.prototype.intersection` method\n// https://github.com/tc39/proposal-set-methods\nmodule.exports = function intersection(other) {\n  var O = aSet(this);\n  var otherRec = getSetRecord(other);\n  var result = new Set();\n\n  if (size(O) > otherRec.size) {\n    iterateSimple(otherRec.getIterator(), function (e) {\n      if (has(O, e)) add(result, e);\n    });\n  } else {\n    iterateSet(O, function (e) {\n      if (otherRec.includes(e)) add(result, e);\n    });\n  }\n\n  return result;\n};\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Sidebar.vue?vue&type=style&index=0&id=430612da&lang=scss&scoped=true\"","'use strict';\nvar aSet = require('../internals/a-set');\nvar SetHelpers = require('../internals/set-helpers');\nvar clone = require('../internals/set-clone');\nvar getSetRecord = require('../internals/get-set-record');\nvar iterateSimple = require('../internals/iterate-simple');\n\nvar add = SetHelpers.add;\nvar has = SetHelpers.has;\nvar remove = SetHelpers.remove;\n\n// `Set.prototype.symmetricDifference` method\n// https://github.com/tc39/proposal-set-methods\nmodule.exports = function symmetricDifference(other) {\n  var O = aSet(this);\n  var keysIter = getSetRecord(other).getIterator();\n  var result = clone(O);\n  iterateSimple(keysIter, function (e) {\n    if (has(O, e)) remove(result, e);\n    else add(result, e);\n  });\n  return result;\n};\n","'use strict';\nvar ENVIRONMENT = require('../internals/environment');\n\nmodule.exports = ENVIRONMENT === 'NODE';\n","'use strict';\nvar $ = require('../internals/export');\nvar isSupersetOf = require('../internals/set-is-superset-of');\nvar setMethodAcceptSetLike = require('../internals/set-method-accept-set-like');\n\nvar INCORRECT = !setMethodAcceptSetLike('isSupersetOf', function (result) {\n  return !result;\n});\n\n// `Set.prototype.isSupersetOf` method\n// https://tc39.es/ecma262/#sec-set.prototype.issupersetof\n$({ target: 'Set', proto: true, real: true, forced: INCORRECT }, {\n  isSupersetOf: isSupersetOf\n});\n","'use strict';\nvar aSet = require('../internals/a-set');\nvar SetHelpers = require('../internals/set-helpers');\nvar clone = require('../internals/set-clone');\nvar size = require('../internals/set-size');\nvar getSetRecord = require('../internals/get-set-record');\nvar iterateSet = require('../internals/set-iterate');\nvar iterateSimple = require('../internals/iterate-simple');\n\nvar has = SetHelpers.has;\nvar remove = SetHelpers.remove;\n\n// `Set.prototype.difference` method\n// https://github.com/tc39/proposal-set-methods\nmodule.exports = function difference(other) {\n  var O = aSet(this);\n  var otherRec = getSetRecord(other);\n  var result = clone(O);\n  if (size(O) <= otherRec.size) iterateSet(O, function (e) {\n    if (otherRec.includes(e)) remove(result, e);\n  });\n  else iterateSimple(otherRec.getIterator(), function (e) {\n    if (has(O, e)) remove(result, e);\n  });\n  return result;\n};\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call -- required for testing\n    method.call(null, argument || function () { return 1; }, 1);\n  });\n};\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./GlobalSearch.vue?vue&type=style&index=1&id=167b7d2b&scoped=true&lang=css\"","'use strict';\nvar aSet = require('../internals/a-set');\nvar has = require('../internals/set-helpers').has;\nvar size = require('../internals/set-size');\nvar getSetRecord = require('../internals/get-set-record');\nvar iterateSet = require('../internals/set-iterate');\nvar iterateSimple = require('../internals/iterate-simple');\nvar iteratorClose = require('../internals/iterator-close');\n\n// `Set.prototype.isDisjointFrom` method\n// https://tc39.github.io/proposal-set-methods/#Set.prototype.isDisjointFrom\nmodule.exports = function isDisjointFrom(other) {\n  var O = aSet(this);\n  var otherRec = getSetRecord(other);\n  if (size(O) <= otherRec.size) return iterateSet(O, function (e) {\n    if (otherRec.includes(e)) return false;\n  }, true) !== false;\n  var iterator = otherRec.getIterator();\n  return iterateSimple(iterator, function (e) {\n    if (has(O, e)) return iteratorClose(iterator, 'normal', false);\n  }) !== false;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar isDisjointFrom = require('../internals/set-is-disjoint-from');\nvar setMethodAcceptSetLike = require('../internals/set-method-accept-set-like');\n\nvar INCORRECT = !setMethodAcceptSetLike('isDisjointFrom', function (result) {\n  return !result;\n});\n\n// `Set.prototype.isDisjointFrom` method\n// https://tc39.es/ecma262/#sec-set.prototype.isdisjointfrom\n$({ target: 'Set', proto: true, real: true, forced: INCORRECT }, {\n  isDisjointFrom: isDisjointFrom\n});\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\n// eslint-disable-next-line es/no-set -- safe\nvar SetPrototype = Set.prototype;\n\nmodule.exports = {\n  // eslint-disable-next-line es/no-set -- safe\n  Set: Set,\n  add: uncurryThis(SetPrototype.add),\n  has: uncurryThis(SetPrototype.has),\n  remove: uncurryThis(SetPrototype['delete']),\n  proto: SetPrototype\n};\n","'use strict';\nvar aCallable = require('../internals/a-callable');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\nvar $TypeError = TypeError;\n\nvar REDUCE_EMPTY = 'Reduce of empty array with no initial value';\n\n// `Array.prototype.{ reduce, reduceRight }` methods implementation\nvar createMethod = function (IS_RIGHT) {\n  return function (that, callbackfn, argumentsLength, memo) {\n    var O = toObject(that);\n    var self = IndexedObject(O);\n    var length = lengthOfArrayLike(O);\n    aCallable(callbackfn);\n    if (length === 0 && argumentsLength < 2) throw new $TypeError(REDUCE_EMPTY);\n    var index = IS_RIGHT ? length - 1 : 0;\n    var i = IS_RIGHT ? -1 : 1;\n    if (argumentsLength < 2) while (true) {\n      if (index in self) {\n        memo = self[index];\n        index += i;\n        break;\n      }\n      index += i;\n      if (IS_RIGHT ? index < 0 : length <= index) {\n        throw new $TypeError(REDUCE_EMPTY);\n      }\n    }\n    for (;IS_RIGHT ? index >= 0 : length > index; index += i) if (index in self) {\n      memo = callbackfn(memo, self[index], index, O);\n    }\n    return memo;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.reduce` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduce\n  left: createMethod(false),\n  // `Array.prototype.reduceRight` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduceright\n  right: createMethod(true)\n};\n","import request from '@/utils/request'\n\n/**\n * 获取聊天会话列表\n */\nexport function getChatSessions() {\n  return request({\n    url: '/api/chat/sessions/',\n    method: 'get'\n  })\n}\n\n/**\n * 获取聊天会话详情\n * @param {Number} id - 聊天会话ID\n */\nexport function getChatSession(id) {\n  return request({\n    url: `/api/chat/sessions/${id}/`,\n    method: 'get'\n  })\n}\n\n/**\n * 创建新的聊天会话\n * @param {Object} data - 聊天会话数据\n */\nexport function createChatSession(data) {\n  return request({\n    url: '/api/chat/sessions/',\n    method: 'post',\n    data\n  })\n}\n\n/**\n * 发送文本消息\n * @param {Object} data - 消息数据\n */\nexport function sendTextMessage(data) {\n  return request({\n    url: '/api/chat/messages/',\n    method: 'post',\n    data: {\n      ...data,\n      message_type: 'text'\n    }\n  })\n}\n\n/**\n * 发送文件消息\n * @param {Number} chatId - 聊天ID\n * @param {String} content - 消息内容\n * @param {File} file - 文件对象\n */\nexport function sendFileMessage(chatId, content, file) {\n  const formData = new FormData();\n  formData.append('chat', chatId);\n  formData.append('message_type', 'file');\n  formData.append('content', content);\n  formData.append('file', file);\n  \n  return request({\n    url: '/api/chat/messages/',\n    method: 'post',\n    data: formData\n  })\n}\n\n/**\n * 发送图片消息\n * @param {Number} chatId - 聊天ID\n * @param {String} content - 消息内容\n * @param {File} image - 图片文件\n */\nexport function sendImageMessage(chatId, content, image) {\n  const formData = new FormData();\n  formData.append('chat', chatId);\n  formData.append('message_type', 'image');\n  formData.append('content', content);\n  formData.append('file', image);\n  \n  return request({\n    url: '/api/chat/messages/',\n    method: 'post',\n    data: formData\n  })\n}\n\n/**\n * 发送知识库消息\n * @param {Object} data - 消息数据，包含chat和knowledge_id\n */\nexport function sendKnowledgeMessage(data) {\n  return request({\n    url: '/api/chat/messages/',\n    method: 'post',\n    data: {\n      ...data,\n      message_type: 'knowledge',\n      content: '分享了一个知识库文件'\n    }\n  })\n}\n\n/**\n * 下载消息中的文件\n * @param {Number} messageId - 消息ID\n */\nexport function downloadMessageFile(messageId) {\n  return request({\n    url: `/api/chat/messages/${messageId}/download/`,\n    method: 'get',\n    responseType: 'blob'\n  })\n}\n\n/**\n * 发送文档消息 - 分享智能文档到聊天\n * @param {Object} data - 包含chat(聊天ID)、document_id(文档ID)、format(文档格式，如pdf/word)、title(文档标题)的对象\n */\nexport function sendDocumentMessage(data) {\n  // 创建FormData对象\n  const formData = new FormData();\n  \n  // 添加必要的字段\n  formData.append('chat', data.chat);\n  formData.append('message_type', 'file');\n  formData.append('document_id', data.document_id);\n  formData.append('format', data.format);\n  formData.append('title', data.title);\n  formData.append('content', `分享了一个${data.format === 'pdf' ? 'PDF' : 'Word'}文档`);\n  \n  return request({\n    url: '/api/chat/messages/',\n    method: 'post',\n    data: formData,\n    headers: {\n      'Content-Type': 'multipart/form-data'\n    }\n  })\n}\n\n/**\n * 向聊天添加参与者\n * @param {Number} chatId - 聊天会话ID\n * @param {Number} userId - 用户ID\n */\nexport function addChatParticipant(chatId, userId) {\n  return request({\n    url: `/api/chat/sessions/${chatId}/add_participant/`,\n    method: 'post',\n    data: {\n      user_id: userId\n    }\n  })\n}\n\n/**\n * 从聊天中移除参与者\n * @param {Number} chatId - 聊天会话ID\n * @param {Number} userId - 用户ID\n */\nexport function removeChatParticipant(chatId, userId) {\n  return request({\n    url: `/api/chat/sessions/${chatId}/remove_participant/`,\n    method: 'post',\n    data: {\n      user_id: userId\n    }\n  })\n}\n\n/**\n * 从聊天消息添加日历事件\n * @param {Number} messageId - 消息ID\n * @param {Object} data - 可选的更新日程数据\n * @param {Boolean} preview - 是否仅预览不创建事件\n */\nexport function addCalendarEvent(messageId, data, preview = false) {\n  let url = `/api/chat/messages/${messageId}/add_calendar_event/`\n  if (preview) {\n    url += '?preview=true'\n  }\n  \n  return request({\n    url: url,\n    method: 'post',\n    data\n  })\n}\n\n// 获取知识库列表\nexport function getKnowledgeList(params) {\n  return request({\n    url: '/api/knowledge/files/',\n    method: 'get',\n    params\n  })\n}\n\n// 查看文件内容 \nexport function deleteMessage(id) {\n  return request({\n    url: `/chat/messages/${id}/`,\n    method: 'delete'\n  })\n}\n\n// 新增：查找或创建一对一聊天\nexport function findOrCreateChat(userId) {\n  return request({\n    url: '/api/chat/find-or-create/',\n    method: 'post',\n    data: { user_id: userId }\n  })\n}\n\n/**\n * 根据用户ID列表查找或创建聊天会话\n * @param {Array<Number>} userIds - 用户ID数组\n * @returns {Promise}\n */\nexport async function findOrCreateChatWithUsers(userIds) {\n  if (!userIds || userIds.length === 0) {\n    throw new Error('No user IDs provided');\n  }\n\n  if (userIds.length === 1) {\n    // 处理单人聊天\n    return findOrCreateChat(userIds[0]);\n  } else {\n    // 处理多人聊天\n    return createChatSession({ participants: userIds });\n  }\n}\n\n/**\n * 清空所有聊天会话\n * @returns {Promise}\n */\nexport function clearAllChatSessions() {\n  return request({\n    url: '/api/chat/sessions/clear_all/',\n    method: 'post'\n  });\n}\n\n/**\n * 上传文件到会话中\n * @param {FormData} formData 包含文件和会话ID的表单数据\n * @returns {Promise}\n */\nexport function uploadFile(formData) {\n  return request({\n    url: '/api/chat/messages/',\n    method: 'post',\n    data: formData,\n    headers: {\n      'Content-Type': 'multipart/form-data',\n    },\n  });\n}\n\nexport function getChatMessages(chatId, page = 1, pageSize = 20) {\n  return request({\n    url: `/api/chat/messages/`,\n    method: 'get',\n    params: {\n      chat: chatId,\n      page,\n      page_size: pageSize\n    }\n  });\n}\n\n// Summarize chat messages\nexport function summarizeChat(sessionId, startDate, endDate) {\n  return request({\n    url: `/api/chat/sessions/${sessionId}/summarize/`,\n    method: 'post',\n    data: {\n      start_date: startDate,\n      end_date: endDate\n    }\n  });\n}\n\nexport function createChatMessage(data) {\n  const formData = new FormData();\n  for (const key in data) {\n    if (data[key] !== null && data[key] !== undefined) {\n      if (key === 'file' && data[key] instanceof File) {\n        formData.append(key, data[key], data[key].name);\n      } else {\n        formData.append(key, data[key]);\n      }\n    }\n  }\n\n  return request({\n    url: '/api/chat/messages/',\n    method: 'post',\n    data: formData,\n    headers: {\n      'Content-Type': 'multipart/form-data',\n    },\n  });\n}\n\n/**\n * Analyzes text content to extract calendar event information.\n * @param {String} content - The text content to analyze.\n */\nexport function analyzeForCalendar(content) {\n  return request({\n    url: '/api/chat/analyze-for-calendar/',\n    method: 'post',\n    data: { content }\n  });\n}\n\n/**\n * Creates a new calendar event.\n * @param {Object} eventData - The event data to create.\n */\nexport function createCalendarEvent(eventData) {\n  return request({\n    url: '/api/calendar/events/',\n    method: 'post',\n    data: eventData\n  });\n} ","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\n\nvar createSetLike = function (size) {\n  return {\n    size: size,\n    has: function () {\n      return false;\n    },\n    keys: function () {\n      return {\n        next: function () {\n          return { done: true };\n        }\n      };\n    }\n  };\n};\n\nvar createSetLikeWithInfinitySize = function (size) {\n  return {\n    size: size,\n    has: function () {\n      return true;\n    },\n    keys: function () {\n      throw new Error('e');\n    }\n  };\n};\n\nmodule.exports = function (name, callback) {\n  var Set = getBuiltIn('Set');\n  try {\n    new Set()[name](createSetLike(0));\n    try {\n      // late spec change, early WebKit ~ Safari 17 implementation does not pass it\n      // https://github.com/tc39/proposal-set-methods/pull/88\n      // also covered engines with\n      // https://bugs.webkit.org/show_bug.cgi?id=272679\n      new Set()[name](createSetLike(-1));\n      return false;\n    } catch (error2) {\n      if (!callback) return true;\n      // early V8 implementation bug\n      // https://issues.chromium.org/issues/351332634\n      try {\n        new Set()[name](createSetLikeWithInfinitySize(-Infinity));\n        return false;\n      } catch (error) {\n        var set = new Set();\n        set.add(1);\n        set.add(2);\n        return callback(set[name](createSetLikeWithInfinitySize(Infinity)));\n      }\n    }\n  } catch (error) {\n    return false;\n  }\n};\n","'use strict';\nvar has = require('../internals/set-helpers').has;\n\n// Perform ? RequireInternalSlot(M, [[SetData]])\nmodule.exports = function (it) {\n  has(it);\n  return it;\n};\n","'use strict';\nvar aSet = require('../internals/a-set');\nvar add = require('../internals/set-helpers').add;\nvar clone = require('../internals/set-clone');\nvar getSetRecord = require('../internals/get-set-record');\nvar iterateSimple = require('../internals/iterate-simple');\n\n// `Set.prototype.union` method\n// https://github.com/tc39/proposal-set-methods\nmodule.exports = function union(other) {\n  var O = aSet(this);\n  var keysIter = getSetRecord(other).getIterator();\n  var result = clone(O);\n  iterateSimple(keysIter, function (it) {\n    add(result, it);\n  });\n  return result;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar iterate = require('../internals/iterate');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar iteratorClose = require('../internals/iterator-close');\nvar iteratorHelperWithoutClosingOnEarlyError = require('../internals/iterator-helper-without-closing-on-early-error');\n\nvar findWithoutClosingOnEarlyError = iteratorHelperWithoutClosingOnEarlyError('find', TypeError);\n\n// `Iterator.prototype.find` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.find\n$({ target: 'Iterator', proto: true, real: true, forced: findWithoutClosingOnEarlyError }, {\n  find: function find(predicate) {\n    anObject(this);\n    try {\n      aCallable(predicate);\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    if (findWithoutClosingOnEarlyError) return call(findWithoutClosingOnEarlyError, this, predicate);\n\n    var record = getIteratorDirect(this);\n    var counter = 0;\n    return iterate(record, function (value, stop) {\n      if (predicate(value, counter++)) return stop(value);\n    }, { IS_RECORD: true, INTERRUPTED: true }).result;\n  }\n});\n"],"sourceRoot":""}